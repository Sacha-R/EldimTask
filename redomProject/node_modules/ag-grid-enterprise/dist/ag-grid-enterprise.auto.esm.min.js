/**
          * @ag-grid-enterprise/all-modules - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v31.0.1
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
/**
          * @ag-grid-enterprise/all-modules - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v31.0.1
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
import{PreConstruct as t,Bean as e,BeanStub as i,Autowired as n,RefSelector as o,PostConstruct as r,Component as s,ModuleNames as a,Events as l,_ as c,KeyCode as d,AgRichSelect as u,VirtualListDragFeature as h,DragSourceType as p,AgInputDateField as f,AgInputNumberField as g,AgInputTextField as v,TooltipFeature as y,DragAndDropService as m,TabGuardComp as b,VirtualList as S,AgDialog as x,AgAutocomplete as C,ChangedPath as w,Optional as E,CsvExportModule as O,EventService as D,Column as A,ProvidedColumnGroup as T,AgMenuList as k,AgMenuItemComponent as M,CssClassApplier as R,TouchListener as P,PreDestroy as N,RowNode as L,ManagedFocusFeature as I,PositionableFeature as F,AgSelect as _,AgPromise as G,ModuleRegistry as B,XmlFactory as V,ExcelFactoryMode as j,RowType as W,BaseGridSerializingSession as z,Downloader as U,BaseCreator as H,ZipContainer as K,GridSerializer as Y,CsvCreator as X,AgGroupComponent as q,AutoScrollService as $,AgRadioButton as Z,AgToggleButton as J,AgCheckbox as Q,AgAbstractLabel as tt,AgSlider as et,DEFAULT_CHART_GROUPS as it,TabbedLayout as nt,CHART_TOOLBAR_ALLOW_LIST as ot,CHART_TOOL_PANEL_ALLOW_LIST as rt,CHART_TOOL_PANEL_MENU_OPTIONS as st,AgPanel as at,CellRangeType as lt,CellCtrl as ct,SelectionHandleType as dt,AgPickerField as ut,createGrid as ht,ColumnApi as pt,ProvidedFilter as ft,PopupComponent as gt,NumberSequence as vt,RowNodeBlock as yt,ServerSideTransactionResultStatus as mt,RowNodeBlockLoader as bt,ExpansionService as St,TextFilter as xt,GROUP_AUTO_COLUMN_ID as Ct,AllCommunityModules as wt}from"ag-grid-community";export*from"ag-grid-community";var Et=function(){function t(){this.ieCompatibility=!1}return t.prototype.init=function(){this.ieCompatibility="5d41402abc4b2a76b9719d911017c592"!=this.md5("hello")},t.prototype.md5cycle=function(t,e){var i=t[0],n=t[1],o=t[2],r=t[3];i=this.ff(i,n,o,r,e[0],7,-680876936),r=this.ff(r,i,n,o,e[1],12,-389564586),o=this.ff(o,r,i,n,e[2],17,606105819),n=this.ff(n,o,r,i,e[3],22,-1044525330),i=this.ff(i,n,o,r,e[4],7,-176418897),r=this.ff(r,i,n,o,e[5],12,1200080426),o=this.ff(o,r,i,n,e[6],17,-1473231341),n=this.ff(n,o,r,i,e[7],22,-45705983),i=this.ff(i,n,o,r,e[8],7,1770035416),r=this.ff(r,i,n,o,e[9],12,-1958414417),o=this.ff(o,r,i,n,e[10],17,-42063),n=this.ff(n,o,r,i,e[11],22,-1990404162),i=this.ff(i,n,o,r,e[12],7,1804603682),r=this.ff(r,i,n,o,e[13],12,-40341101),o=this.ff(o,r,i,n,e[14],17,-1502002290),n=this.ff(n,o,r,i,e[15],22,1236535329),i=this.gg(i,n,o,r,e[1],5,-165796510),r=this.gg(r,i,n,o,e[6],9,-1069501632),o=this.gg(o,r,i,n,e[11],14,643717713),n=this.gg(n,o,r,i,e[0],20,-373897302),i=this.gg(i,n,o,r,e[5],5,-701558691),r=this.gg(r,i,n,o,e[10],9,38016083),o=this.gg(o,r,i,n,e[15],14,-660478335),n=this.gg(n,o,r,i,e[4],20,-405537848),i=this.gg(i,n,o,r,e[9],5,568446438),r=this.gg(r,i,n,o,e[14],9,-1019803690),o=this.gg(o,r,i,n,e[3],14,-187363961),n=this.gg(n,o,r,i,e[8],20,1163531501),i=this.gg(i,n,o,r,e[13],5,-1444681467),r=this.gg(r,i,n,o,e[2],9,-51403784),o=this.gg(o,r,i,n,e[7],14,1735328473),n=this.gg(n,o,r,i,e[12],20,-1926607734),i=this.hh(i,n,o,r,e[5],4,-378558),r=this.hh(r,i,n,o,e[8],11,-2022574463),o=this.hh(o,r,i,n,e[11],16,1839030562),n=this.hh(n,o,r,i,e[14],23,-35309556),i=this.hh(i,n,o,r,e[1],4,-1530992060),r=this.hh(r,i,n,o,e[4],11,1272893353),o=this.hh(o,r,i,n,e[7],16,-155497632),n=this.hh(n,o,r,i,e[10],23,-1094730640),i=this.hh(i,n,o,r,e[13],4,681279174),r=this.hh(r,i,n,o,e[0],11,-358537222),o=this.hh(o,r,i,n,e[3],16,-722521979),n=this.hh(n,o,r,i,e[6],23,76029189),i=this.hh(i,n,o,r,e[9],4,-640364487),r=this.hh(r,i,n,o,e[12],11,-421815835),o=this.hh(o,r,i,n,e[15],16,530742520),n=this.hh(n,o,r,i,e[2],23,-995338651),i=this.ii(i,n,o,r,e[0],6,-198630844),r=this.ii(r,i,n,o,e[7],10,1126891415),o=this.ii(o,r,i,n,e[14],15,-1416354905),n=this.ii(n,o,r,i,e[5],21,-57434055),i=this.ii(i,n,o,r,e[12],6,1700485571),r=this.ii(r,i,n,o,e[3],10,-1894986606),o=this.ii(o,r,i,n,e[10],15,-1051523),n=this.ii(n,o,r,i,e[1],21,-2054922799),i=this.ii(i,n,o,r,e[8],6,1873313359),r=this.ii(r,i,n,o,e[15],10,-30611744),o=this.ii(o,r,i,n,e[6],15,-1560198380),n=this.ii(n,o,r,i,e[13],21,1309151649),i=this.ii(i,n,o,r,e[4],6,-145523070),r=this.ii(r,i,n,o,e[11],10,-1120210379),o=this.ii(o,r,i,n,e[2],15,718787259),n=this.ii(n,o,r,i,e[9],21,-343485551),t[0]=this.add32(i,t[0]),t[1]=this.add32(n,t[1]),t[2]=this.add32(o,t[2]),t[3]=this.add32(r,t[3])},t.prototype.cmn=function(t,e,i,n,o,r){return e=this.add32(this.add32(e,t),this.add32(n,r)),this.add32(e<<o|e>>>32-o,i)},t.prototype.ff=function(t,e,i,n,o,r,s){return this.cmn(e&i|~e&n,t,e,o,r,s)},t.prototype.gg=function(t,e,i,n,o,r,s){return this.cmn(e&n|i&~n,t,e,o,r,s)},t.prototype.hh=function(t,e,i,n,o,r,s){return this.cmn(e^i^n,t,e,o,r,s)},t.prototype.ii=function(t,e,i,n,o,r,s){return this.cmn(i^(e|~n),t,e,o,r,s)},t.prototype.md51=function(t){var e,i=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)this.md5cycle(n,this.md5blk(t.substring(e-64,e)));t=t.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(this.md5cycle(n,o),e=0;e<16;e++)o[e]=0;return o[14]=8*i,this.md5cycle(n,o),n},t.prototype.md5blk=function(t){for(var e=[],i=0;i<64;i+=4)e[i>>2]=t.charCodeAt(i)+(t.charCodeAt(i+1)<<8)+(t.charCodeAt(i+2)<<16)+(t.charCodeAt(i+3)<<24);return e},t.prototype.rhex=function(t){for(var e="0123456789abcdef".split(""),i="",n=0;n<4;n++)i+=e[t>>8*n+4&15]+e[t>>8*n&15];return i},t.prototype.hex=function(t){for(var e=0;e<t.length;e++)t[e]=this.rhex(t[e]);return t.join("")},t.prototype.md5=function(t){return this.hex(this.md51(t))},t.prototype.add32=function(t,e){return this.ieCompatibility?this.add32Compat(t,e):this.add32Std(t,e)},t.prototype.add32Std=function(t,e){return t+e&4294967295},t.prototype.add32Compat=function(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i},t}(),Ot=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s};function Dt(t){return null==t||0===t.length}var At,Tt={"01":"GRID","02":"CHARTS","0102":"BOTH"},kt=function(){function t(t){this.watermarkMessage=void 0,this.document=t,this.md5=new Et,this.md5.init()}return t.prototype.validateLicense=function(){var e=this.getLicenseDetails(t.licenseKey);if(e.missing)this.isWebsiteUrl()&&!this.isForceWatermark()||this.outputMissingLicenseKey();else if(e.valid){if(e.isTrial&&e.trialExpired)this.outputExpiredTrialKey(e.expiry);else if(e.expired){var i=t.getGridReleaseDate(),n=t.formatDate(i);this.outputIncompatibleVersion(e.expiry,n)}}else this.outputInvalidLicenseKey(e.incorrectLicenseType,e.licenseType)},t.extractExpiry=function(e){var i=e.substring(e.lastIndexOf("_")+1,e.length);return new Date(parseInt(t.decode(i),10))},t.extractLicenseComponents=function(e){var i=e.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),e.length<=32)return{md5:null,license:e,version:null,isTrial:null};var n=i.length-32,o=i.substring(n),r=i.substring(0,n),s=Ot(t.extractBracketedInformation(i),3);return{md5:o,license:r,version:s[0],isTrial:s[1],type:s[2]}},t.prototype.getLicenseDetails=function(e){if(Dt(e))return{licenseKey:e,valid:!1,missing:!0};var i=t.getGridReleaseDate(),n=t.extractLicenseComponents(e),o=n.md5,r=n.license,s=n.version,a=n.isTrial,l=n.type,c=o===this.md5.md5(r)&&-1===e.indexOf("For_Trialing_ag-Grid_Only"),d=void 0,u=void 0,h=null,p=void 0,f=void 0;function g(){var t=new Date;d=h<t,u=void 0}if(c&&(h=t.extractExpiry(r),c=!isNaN(h.getTime())))switch(u=i>h,s){case"legacy":case"2":a&&g();break;case"3":Dt(l)?c=!1:l!==Tt["01"]&&l!==Tt["0102"]?(c=!1,p=!0,f=l):a&&g()}return c?{licenseKey:e,valid:c,expiry:t.formatDate(h),expired:u,version:s,isTrial:a,trialExpired:d}:{licenseKey:e,valid:c,incorrectLicenseType:p,licenseType:f}},t.prototype.isDisplayWatermark=function(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!Dt(this.watermarkMessage)},t.prototype.getWatermarkMessage=function(){return this.watermarkMessage||""},t.prototype.getHostname=function(){var t=(this.document.defaultView||window).location.hostname;return void 0===t?"":t},t.prototype.isForceWatermark=function(){var t=(this.document.defaultView||window).location.pathname;return!!t&&-1!==t.indexOf("forceWatermark")},t.prototype.isWebsiteUrl=function(){return null!==this.getHostname().match(/^((?:\w+\.)?ag-grid\.com)$/)},t.prototype.isLocalhost=function(){return null!==this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)},t.formatDate=function(t){var e=t.getDate(),i=t.getMonth(),n=t.getFullYear();return e+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][i]+" "+n},t.getGridReleaseDate=function(){return new Date(parseInt(t.decode(t.RELEASE_INFORMATION),10))},t.decode=function(e){for(var i,n,o,r,s,a,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",d=0,u=e.replace(/[^A-Za-z0-9+/=]/g,"");d<u.length;)i=l.indexOf(u.charAt(d++))<<2|(r=l.indexOf(u.charAt(d++)))>>4,n=(15&r)<<4|(s=l.indexOf(u.charAt(d++)))>>2,o=(3&s)<<6|(a=l.indexOf(u.charAt(d++))),c+=String.fromCharCode(i),64!=s&&(c+=String.fromCharCode(n)),64!=a&&(c+=String.fromCharCode(o));return c=t.utf8_decode(c)},t.utf8_decode=function(t){t=t.replace(/rn/g,"n");for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e},t.setLicenseKey=function(t){this.licenseKey=t},t.extractBracketedInformation=function(t){if(!t.includes("["))return["legacy",!1,void 0];var e=t.match(/\[(.*?)\]/g).map((function(t){return t.replace("[","").replace("]","")}));if(!e||0===e.length)return["legacy",!1,void 0];var i=1===e.filter((function(t){return"TRIAL"===t})).length,n=e.filter((function(t){return 0===t.indexOf("v")}))[0];return[n?n.replace("v",""):"legacy",i,Tt[e.filter((function(t){return Tt[t]}))[0]]]},t.prototype.outputInvalidLicenseKey=function(t,e){var i,n;console.error("*****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License ********************************************"),console.error("********************************************* Invalid License ***************************************************"),void 0===n&&(n=!1),null!=(i=t)&&(""!==i||n)&&t&&"CHARTS"===e&&console.error("* The license supplied is for AG Charts Enterprise Only and does not cover AG Grid Enterprise                   *"),console.error("* Your license for AG Grid Enterprise is not valid - please contact info@ag-grid.com to obtain a valid license. *"),console.error("*****************************************************************************************************************"),console.error("*****************************************************************************************************************"),this.watermarkMessage="Invalid License"},t.prototype.outputExpiredTrialKey=function(t){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("*****************************************   Trial Period Expired.    *******************************************"),console.error("* Your license for AG Grid Enterprise expired on ".concat(t,".                                                *")),console.error("* Please email info@ag-grid.com to purchase a license.                                                         *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="Trial Period Expired"},t.prototype.outputMissingLicenseKey=function(){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("****************************************** License Key Not Found ***********************************************"),console.error("* All AG Grid Enterprise features are unlocked.                                                                *"),console.error("* This is an evaluation only version, it is not licensed for development projects intended for production.     *"),console.error("* If you want to hide the watermark, please email info@ag-grid.com for a trial license.                        *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="For Trial Use Only"},t.prototype.outputIncompatibleVersion=function(t,e){console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),console.error("*                                             AG Grid Enterprise License                                                   *"),console.error("*                           License not compatible with installed version of AG Grid Enterprise.                           *"),console.error("*                                                                                                                          *"),console.error("* Your AG Grid License entitles you to all versions of AG Grid that we release within the time covered by your license     *"),console.error("* - typically we provide one year licenses which entitles you to all releases / updates of AG Grid within that year.       *"),console.error("* Your license has an end (expiry) date which stops the license key working with versions of AG Grid released after the    *"),console.error("* license end date. The license key that you have expires on ".concat(t,", however the version of AG Grid you    *")),console.error("* are trying to use was released on ".concat(e,".                                                               *")),console.error("*                                                                                                                          *"),console.error("* Please contact info@ag-grid.com to renew your subscription to new versions and get a new license key to work with this   *"),console.error("* version of AG Grid.                                                                                                      *"),console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),this.watermarkMessage="License Expired"},t.RELEASE_INFORMATION="MTcwMjI5MjcxNTE0OQ==",t}(),Mt=(At=function(t,e){return(At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}At(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Rt=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Pt=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return Mt(n,i),n.prototype.validateLicense=function(){this.licenseManager=new kt(this.gridOptionsService.getDocument()),this.licenseManager.validateLicense()},n.getLicenseDetails=function(t){return new kt(null).getLicenseDetails(t)},n.prototype.isDisplayWatermark=function(){return this.licenseManager.isDisplayWatermark()},n.prototype.getWatermarkMessage=function(){return this.licenseManager.getWatermarkMessage()},n.setLicenseKey=function(t){kt.setLicenseKey(t)},Rt([t],n.prototype,"validateLicense",null),n=Rt([e("licenseManager")],n)}(i),Nt=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Lt=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},It=function(t){function e(){return t.call(this,'<div class="ag-watermark">\n                <div ref="eLicenseTextRef" class="ag-watermark-text"></div>\n            </div>')||this}return Nt(e,t),e.prototype.postConstruct=function(){var t=this,e=this.shouldDisplayWatermark();this.setDisplayed(e),e&&(this.eLicenseTextRef.innerText=this.licenseManager.getWatermarkMessage(),window.setTimeout((function(){return t.addCssClass("ag-opacity-zero")}),0),window.setTimeout((function(){return t.setDisplayed(!1)}),5e3))},e.prototype.shouldDisplayWatermark=function(){return this.licenseManager.isDisplayWatermark()},Lt([n("licenseManager")],e.prototype,"licenseManager",void 0),Lt([o("eLicenseTextRef")],e.prototype,"eLicenseTextRef",void 0),Lt([r],e.prototype,"postConstruct",null),e}(s),Ft={version:"31.0.1",moduleName:a.EnterpriseCoreModule,beans:[Pt],agStackComponents:[{componentName:"AgWatermark",componentClass:It}]},_t=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Gt=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Bt=function(t){function e(e){var i=t.call(this,'\n            <div class="ag-advanced-filter-header" role="row">\n            </div>')||this;return i.enabled=e,i}return _t(e,t),e.prototype.postConstruct=function(){var t=this;this.setupAdvancedFilter(this.enabled),this.addDestroyFunc((function(){return t.destroyBean(t.eAdvancedFilter)})),this.addManagedListener(this.eventService,l.EVENT_GRID_COLUMNS_CHANGED,(function(){return t.onGridColumnsChanged()})),this.addGuiEventListener("keydown",(function(e){return t.onKeyDown(e)})),this.addGuiEventListener("focusout",(function(e){t.getFocusableElement().contains(e.relatedTarget)||t.focusService.clearAdvancedFilterColumn()}))},e.prototype.getFocusableElement=function(){var t,e;return null!==(e=null===(t=this.eAdvancedFilter)||void 0===t?void 0:t.getGui())&&void 0!==e?e:this.getGui()},e.prototype.setEnabled=function(t){t!==this.enabled&&this.setupAdvancedFilter(t)},e.prototype.refresh=function(){var t;null===(t=this.eAdvancedFilter)||void 0===t||t.refresh()},e.prototype.getHeight=function(){return this.height},e.prototype.setInputDisabled=function(t){var e;null===(e=this.eAdvancedFilter)||void 0===e||e.setInputDisabled(t)},e.prototype.setupAdvancedFilter=function(t){var e=this.getGui();if(t){this.eAdvancedFilter=this.createBean(new Ae);var i=this.eAdvancedFilter.getGui();this.eAdvancedFilter.addCssClass("ag-advanced-filter-header-cell"),this.height=this.columnModel.getFloatingFiltersHeight();var n="".concat(this.height,"px");e.style.height=n,e.style.minHeight=n,this.setAriaRowIndex(),c.setAriaRole(i,"gridcell"),c.setAriaColIndex(i,1),this.setAriaColumnCount(i),e.appendChild(i)}else c.clearElement(e),this.destroyBean(this.eAdvancedFilter),this.height=0;c.setDisplayed(e,t),this.enabled=t},e.prototype.setAriaColumnCount=function(t){c.setAriaColSpan(t,this.columnModel.getAllGridColumns().length)},e.prototype.setAriaRowIndex=function(){c.setAriaRowIndex(this.getGui(),this.headerNavigationService.getHeaderRowCount())},e.prototype.onGridColumnsChanged=function(){this.eAdvancedFilter&&(this.setAriaColumnCount(this.eAdvancedFilter.getGui()),this.setAriaRowIndex())},e.prototype.onKeyDown=function(t){switch(t.key){case d.ENTER:this.hasFocus()&&this.focusService.focusInto(this.getFocusableElement())&&t.preventDefault();break;case d.ESCAPE:this.hasFocus()||this.getFocusableElement().focus();break;case d.UP:this.navigateUpDown(!0,t);break;case d.DOWN:this.navigateUpDown(!1,t);break;case d.TAB:if(this.hasFocus())this.navigateLeftRight(t);else{var e=this.focusService.findNextFocusableElement(this.getFocusableElement(),null,t.shiftKey);e?(t.preventDefault(),e.focus()):this.navigateLeftRight(t)}}},e.prototype.navigateUpDown=function(t,e){this.hasFocus()&&this.focusService.focusNextFromAdvancedFilter(t)&&e.preventDefault()},e.prototype.navigateLeftRight=function(t){(t.shiftKey?this.focusService.focusLastHeader():this.focusService.focusNextFromAdvancedFilter(!1,!0))&&t.preventDefault()},e.prototype.hasFocus=function(){return this.gridOptionsService.getDocument().activeElement===this.getFocusableElement()},Gt([n("columnModel")],e.prototype,"columnModel",void 0),Gt([n("focusService")],e.prototype,"focusService",void 0),Gt([n("headerNavigationService")],e.prototype,"headerNavigationService",void 0),Gt([r],e.prototype,"postConstruct",null),e}(s),Vt=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),jt=function(){return(jt=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Wt=function(t){function e(e){var i=t.call(this,jt(jt({},e),{template:'\n                <div class="ag-picker-field" role="presentation">\n                    <div ref="eLabel"></div>\n                    <div ref="eWrapper" class="ag-wrapper ag-picker-collapsed">\n                        <div ref="eDisplayField" class="ag-picker-field-display"></div>\n                        <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>\n                        <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                    </div>\n                </div>'}))||this;return i.params=e,i}return Vt(e,t),e.prototype.showPicker=function(){var e=this;setTimeout((function(){return t.prototype.showPicker.call(e)}))},e.prototype.hidePicker=function(){var e=this;setTimeout((function(){return t.prototype.hidePicker.call(e)}))},e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this);var e=this.params,i=e.wrapperClassName,n=e.ariaLabel;c.setDisplayed(this.eDisplayField,!1),i&&this.eWrapper.classList.add(i),c.setAriaLabelledBy(this.eWrapper,""),c.setAriaLabel(this.eWrapper,n)},e.prototype.onEnterKeyDown=function(e){c.stopPropagationForAgGrid(e),this.isPickerDisplayed?t.prototype.onEnterKeyDown.call(this,e):(e.preventDefault(),this.showPicker())},e}(u),zt=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ut=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ht=function(t){function e(e,i){var n=t.call(this)||this;return n.comp=e,n.virtualList=i,n}return zt(e,t),e.prototype.postConstruct=function(){var t=this;this.createManagedBean(new h(this.comp,this.virtualList,{dragSourceType:p.AdvancedFilterBuilder,listItemDragStartEvent:e.EVENT_DRAG_STARTED,listItemDragEndEvent:e.EVENT_DRAG_ENDED,eventSource:this,getCurrentDragValue:function(e){return t.getCurrentDragValue(e)},isMoveBlocked:function(){return!1},getNumRows:function(t){return t.getNumItems()},moveItem:function(e,i){return t.moveItem(e,i)}}))},e.prototype.getCurrentDragValue=function(t){return t.item},e.prototype.moveItem=function(t,e){this.comp.moveItem(t,e)},e.EVENT_DRAG_STARTED="advancedFilterBuilderDragStarted",e.EVENT_DRAG_ENDED="advancedFilterBuilderDragEnded",Ut([r],e.prototype,"postConstruct",null),e}(i),Kt=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yt=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Xt=function(t){function e(e,i,n){var o=t.call(this)||this;return o.eGui=e,o.focusWrapper=i,o.eFocusableComp=n,o}return Kt(e,t),e.prototype.postConstruct=function(){var t=this;this.addManagedListener(this.eGui,"keydown",(function(e){switch(e.key){case d.TAB:e.defaultPrevented||c.stopPropagationForAgGrid(e);break;case d.UP:case d.DOWN:c.stopPropagationForAgGrid(e);break;case d.ESCAPE:if(c.isStopPropagationForAgGrid(e))return;var i=t.gridOptionsService.getDocument();t.eGui.contains(i.activeElement)&&(e.preventDefault(),c.stopPropagationForAgGrid(e),t.focusWrapper.focus())}})),this.addManagedListener(this.focusWrapper,"keydown",(function(e){switch(e.key){case d.ENTER:if(c.isStopPropagationForAgGrid(e))return;t.gridOptionsService.getDocument().activeElement===t.focusWrapper&&(e.preventDefault(),c.stopPropagationForAgGrid(e),t.eFocusableComp.getFocusableElement().focus())}})),this.addManagedListener(this.focusWrapper,"focusin",(function(){t.focusWrapper.classList.add("ag-advanced-filter-builder-virtual-list-item-highlight")})),this.addManagedListener(this.focusWrapper,"focusout",(function(e){t.focusWrapper.contains(e.relatedTarget)||t.focusWrapper.classList.remove("ag-advanced-filter-builder-virtual-list-item-highlight")}))},Yt([r],e.prototype,"postConstruct",null),e}(i);function qt(t,e){return{pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderAddField",pickerAriaLabelValue:"Advanced Filter Builder Add Field",pickerType:"ag-list",valueList:[{key:"condition",displayValue:t("advancedFilterBuilderAddCondition")},{key:"join",displayValue:t("advancedFilterBuilderAddJoin")}],valueFormatter:function(t){var e;return null==t?null:null!==(e=t.displayValue)&&void 0!==e?e:t.key},pickerIcon:"advancedFilterBuilderAdd",maxPickerWidth:"".concat(null!=e?e:120,"px"),wrapperClassName:"ag-advanced-filter-builder-item-button",ariaLabel:t("advancedFilterBuilderAddButtonTooltip")}}var $t=function(){function t(){}return t.EVENT_ADDED="advancedFilterBuilderAdded",t.EVENT_MOVED="advancedFilterBuilderMoved",t.EVENT_REMOVED="advancedFilterBuilderRemoved",t.EVENT_VALUE_CHANGED="advancedFilterBuilderValueChanged",t.EVENT_VALID_CHANGED="advancedFilterBuilderValidChanged",t}(),Zt=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Jt=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Qt=function(t){function e(){var e=t.call(this,'\n            <div class="ag-advanced-filter-builder-item-condition" role="presentation"></div>\n        ')||this;return e.validationMessage=null,e}return Zt(e,t),e.prototype.init=function(t){var e=this,i=t.item,n=t.createPill;this.item=i,this.createPill=n,this.filterModel=i.filterModel,this.setupColumnCondition(this.filterModel),this.validate(),this.addDestroyFunc((function(){return e.destroyBeans([e.eColumnPill,e.eOperatorPill,e.eOperandPill])}))},e.prototype.getDragName=function(){return this.filterModel.colId?this.advancedFilterExpressionService.parseColumnFilterModel(this.filterModel):this.getDefaultColumnDisplayValue()},e.prototype.getAriaLabel=function(){return"".concat(this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderFilterItem")," ").concat(this.getDragName())},e.prototype.getValidationMessage=function(){return this.validationMessage},e.prototype.getFocusableElement=function(){return this.eColumnPill.getFocusableElement()},e.prototype.setupColumnCondition=function(t){var e,i=this,n=this.advancedFilterExpressionService.getColumnDetails(t.colId);this.baseCellDataType=n.baseCellDataType,this.column=n.column,this.numOperands=this.getNumOperands(this.getOperatorKey()),this.eColumnPill=this.createPill({key:this.getColumnKey(),displayValue:null!==(e=this.getColumnDisplayValue())&&void 0!==e?e:this.getDefaultColumnDisplayValue(),cssClass:"ag-advanced-filter-builder-column-pill",isSelect:!0,getEditorParams:function(){return{values:i.advancedFilterExpressionService.getColumnAutocompleteEntries()}},update:function(t){return i.setColumnKey(t)},pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderColumnSelectField",pickerAriaLabelValue:"Advanced Filter Builder Column Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderColumn")}),this.getGui().appendChild(this.eColumnPill.getGui()),c.exists(this.getColumnKey())&&(this.createOperatorPill(),this.hasOperand()&&this.createOperandPill())},e.prototype.createOperatorPill=function(){var t,e=this;this.eOperatorPill=this.createPill({key:this.getOperatorKey(),displayValue:null!==(t=this.getOperatorDisplayValue())&&void 0!==t?t:this.getDefaultOptionSelectValue(),cssClass:"ag-advanced-filter-builder-option-pill",isSelect:!0,getEditorParams:function(){return{values:e.getOperatorAutocompleteEntries()}},update:function(t){return e.setOperatorKey(t)},pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderOptionSelectField",pickerAriaLabelValue:"Advanced Filter Builder Option Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderOption")}),this.eColumnPill.getGui().insertAdjacentElement("afterend",this.eOperatorPill.getGui())},e.prototype.createOperandPill=function(){var t,e=this,i=null!==(t=this.getOperandDisplayValue())&&void 0!==t?t:"";this.eOperandPill=this.createPill({key:i,displayValue:i,baseCellDataType:this.baseCellDataType,cssClass:"ag-advanced-filter-builder-value-pill",isSelect:!1,update:function(t){return e.setOperand(t)},ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderValue")}),this.getGui().appendChild(this.eOperandPill.getGui())},e.prototype.getColumnKey=function(){return this.filterModel.colId},e.prototype.getColumnDisplayValue=function(){return this.advancedFilterExpressionService.getColumnDisplayValue(this.filterModel)},e.prototype.getOperatorKey=function(){return this.filterModel.type},e.prototype.getOperatorDisplayValue=function(){return this.advancedFilterExpressionService.getOperatorDisplayValue(this.filterModel)},e.prototype.getOperandDisplayValue=function(){return this.advancedFilterExpressionService.getOperandDisplayValue(this.filterModel,!0)},e.prototype.hasOperand=function(){return this.numOperands>0},e.prototype.getOperatorAutocompleteEntries=function(){return this.column?this.advancedFilterExpressionService.getOperatorAutocompleteEntries(this.column,this.baseCellDataType):[]},e.prototype.setColumnKey=function(t){this.eOperatorPill||this.createOperatorPill();var e=this.advancedFilterExpressionService.getColumnDetails(t);this.column=e.column;var i=e.baseCellDataType;this.baseCellDataType!==i&&(this.baseCellDataType=i,this.setOperatorKey(void 0),this.eOperatorPill&&(c.removeFromParent(this.eOperatorPill.getGui()),this.destroyBean(this.eOperatorPill),this.createOperatorPill()),this.validate()),this.filterModel.colId=t,this.filterModel.filterType=this.baseCellDataType},e.prototype.setOperatorKey=function(t){var e=this.getNumOperands(t);e!==this.numOperands&&(this.numOperands=e,0===e?this.destroyOperandPill():(this.createOperandPill(),"number"!==this.baseCellDataType&&this.setOperand(""))),this.filterModel.type=t,this.validate()},e.prototype.setOperand=function(t){var e,i=t;this.column&&(i=null!==(e=this.advancedFilterExpressionService.getOperandModelValue(t,this.baseCellDataType,this.column))&&void 0!==e?e:""),this.filterModel.filter=i,this.validate()},e.prototype.getNumOperands=function(t){var e,i;return null!==(i=null===(e=this.advancedFilterExpressionService.getExpressionOperator(this.baseCellDataType,t))||void 0===e?void 0:e.numOperands)&&void 0!==i?i:0},e.prototype.destroyOperandPill=function(){delete this.filterModel.filter,this.getGui().removeChild(this.eOperandPill.getGui()),this.destroyBean(this.eOperandPill),this.eOperandPill=void 0},e.prototype.validate=function(){var t=null;c.exists(this.getColumnKey())?c.exists(this.getOperatorKey())?this.numOperands>0&&!c.exists(this.getOperandDisplayValue())&&(t=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationEnterValue")):t=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationSelectOption"):t=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationSelectColumn"),this.item.valid=!t,t!==this.validationMessage&&(this.validationMessage=t,this.dispatchEvent({type:$t.EVENT_VALID_CHANGED}))},e.prototype.getDefaultColumnDisplayValue=function(){return this.advancedFilterExpressionService.translate("advancedFilterBuilderSelectColumn")},e.prototype.getDefaultOptionSelectValue=function(){return this.advancedFilterExpressionService.translate("advancedFilterBuilderSelectOption")},Jt([n("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),Jt([n("valueParserService")],e.prototype,"valueParserService",void 0),e}(s),te=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ee=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ie=function(t){function e(e){var i=t.call(this,'\n            <div class="ag-advanced-filter-builder-pill-wrapper" role="presentation">\n                <div ref="ePill" class="ag-advanced-filter-builder-pill" role="button">\n                    <span ref="eLabel" class="ag-advanced-filter-builder-pill-display"></span>\n                </div>\n            </div>\n        ')||this;return i.params=e,i.value=e.value,i}return te(e,t),e.prototype.postConstruct=function(){var t=this,e=this.params,i=e.cssClass,n=e.ariaLabel;this.ePill.classList.add(i),this.activateTabIndex([this.ePill]),this.eLabel.id="".concat(this.getCompId()),c.setAriaDescribedBy(this.ePill,this.eLabel.id),c.setAriaLabel(this.ePill,n),this.renderValue(),this.addManagedListener(this.ePill,"click",(function(e){e.preventDefault(),t.showEditor()})),this.addManagedListener(this.ePill,"keydown",(function(e){switch(e.key){case d.ENTER:e.preventDefault(),c.stopPropagationForAgGrid(e),t.showEditor()}})),this.addDestroyFunc((function(){return t.destroyBean(t.eEditor)}))},e.prototype.getFocusableElement=function(){return this.ePill},e.prototype.showEditor=function(){var t=this;if(!this.eEditor){c.setDisplayed(this.ePill,!1),this.eEditor=this.createEditorComp(this.params.type),this.eEditor.setValue(this.value);var e=this.eEditor.getGui();this.eEditor.addManagedListener(e,"keydown",(function(e){switch(e.key){case d.ENTER:e.preventDefault(),c.stopPropagationForAgGrid(e),t.updateValue(!0);break;case d.ESCAPE:e.preventDefault(),c.stopPropagationForAgGrid(e),t.hideEditor(!0)}})),this.eEditor.addManagedListener(e,"focusout",(function(){t.updateValue(!1)})),this.getGui().appendChild(e),this.eEditor.getFocusableElement().focus()}},e.prototype.createEditorComp=function(t){var e;switch(t){case"text":e=new v;break;case"number":e=new g;break;case"date":e=new f}return this.createBean(e)},e.prototype.hideEditor=function(t){var e=this.eEditor;e&&(this.eEditor=void 0,this.getGui().removeChild(e.getGui()),this.destroyBean(e),c.setDisplayed(this.ePill,!0),t&&this.ePill.focus())},e.prototype.renderValue=function(){var t;this.eLabel.classList.remove("ag-advanced-filter-builder-value-empty","ag-advanced-filter-builder-value-number","ag-advanced-filter-builder-value-text"),c.exists(this.value)?"number"===this.params.type?(t=this.value,this.eLabel.classList.add("ag-advanced-filter-builder-value-number")):(t='"'.concat(this.value,'"'),this.eLabel.classList.add("ag-advanced-filter-builder-value-text")):(t=this.advancedFilterExpressionService.translate("advancedFilterBuilderEnterValue"),this.eLabel.classList.add("ag-advanced-filter-builder-value-empty")),this.eLabel.innerText=t},e.prototype.updateValue=function(t){var e;if(this.eEditor){var i=null!==(e=this.eEditor.getValue())&&void 0!==e?e:"";this.dispatchEvent({type:l.EVENT_FIELD_VALUE_CHANGED,value:i}),this.value=i,this.renderValue(),this.hideEditor(t)}},ee([o("ePill")],e.prototype,"ePill",void 0),ee([o("eLabel")],e.prototype,"eLabel",void 0),ee([n("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),ee([r],e.prototype,"postConstruct",null),e}(s),ne=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),oe=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},re=function(t){function e(){return t.call(this,'\n            <div class="ag-advanced-filter-builder-item-condition" role="presentation"></div>\n        ')||this}return ne(e,t),e.prototype.init=function(t){var e=this,i=t.item,n=t.createPill,o=i.filterModel;this.filterModel=o,this.ePill=n({key:o.type,displayValue:this.advancedFilterExpressionService.parseJoinOperator(o),cssClass:"ag-advanced-filter-builder-join-pill",isSelect:!0,getEditorParams:function(){return{values:e.advancedFilterExpressionService.getJoinOperatorAutocompleteEntries()}},update:function(t){return o.type=t},pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderJoinSelectField",pickerAriaLabelValue:"Advanced Filter Builder Join Operator Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderJoinOperator")}),this.getGui().appendChild(this.ePill.getGui()),this.addDestroyFunc((function(){return e.destroyBean(e.ePill)}))},e.prototype.getDragName=function(){return this.advancedFilterExpressionService.parseJoinOperator(this.filterModel)},e.prototype.getAriaLabel=function(){return"".concat(this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderGroupItem")," ").concat(this.getDragName())},e.prototype.getValidationMessage=function(){return null},e.prototype.getFocusableElement=function(){return this.ePill.getFocusableElement()},oe([n("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),e}(s),se=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ae=function(){return(ae=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},le=function(t){function e(e){var i=t.call(this,ae(ae({},e),{template:'\n                <div class="ag-picker-field ag-advanced-filter-builder-pill-wrapper" role="presentation">\n                    <div ref="eLabel"></div>\n                    <div ref="eWrapper" class="ag-wrapper ag-advanced-filter-builder-pill ag-picker-collapsed">\n                        <div ref="eDisplayField" class="ag-picker-field-display ag-advanced-filter-builder-pill-display"></div>\n                        <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>\n                        <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                    </div>\n                </div>'}))||this;return i.params=e,i}return se(e,t),e.prototype.getFocusableElement=function(){return this.eWrapper},e.prototype.showPicker=function(){var e=this;setTimeout((function(){return t.prototype.showPicker.call(e)}))},e.prototype.hidePicker=function(){var e=this;setTimeout((function(){return t.prototype.hidePicker.call(e)}))},e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this);var e=this.params,i=e.wrapperClassName,n=e.ariaLabel;this.eWrapper.classList.add(i),c.setAriaLabelledBy(this.eWrapper,""),c.setAriaLabel(this.eWrapper,n)},e.prototype.createPickerComponent=function(){var e;if(!this.values){var i=this.params.getEditorParams().values;this.values=i;var n=this.value.key,o=null!==(e=i.find((function(t){return t.key===n})))&&void 0!==e?e:{key:n,displayValue:this.value.displayValue};this.value=o}return t.prototype.createPickerComponent.call(this)},e.prototype.onEnterKeyDown=function(e){c.stopPropagationForAgGrid(e),this.isPickerDisplayed?t.prototype.onEnterKeyDown.call(this,e):(e.preventDefault(),this.showPicker())},e}(u),ce=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),de=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ue=function(t){function e(e,i,n){var o=t.call(this,'\n            <div class="ag-advanced-filter-builder-item-wrapper" role="presentation">\n                <div ref="eItem" class="ag-advanced-filter-builder-item" role="presentation">\n                    <div ref="eTreeLines" class="ag-advanced-filter-builder-item-tree-lines" aria-hidden="true"></div>\n                    <span ref="eDragHandle" class="ag-drag-handle" aria-hidden="true"></span>\n                    <span ref="eValidation" class="ag-advanced-filter-builder-item-button ag-advanced-filter-builder-invalid" aria-hidden="true"></span>\n                </div>\n                <div ref="eButtons" class="ag-advanced-filter-builder-item-buttons">\n                    <span ref="eMoveUpButton" class="ag-advanced-filter-builder-item-button" role="button"></span>\n                    <span ref="eMoveDownButton" class="ag-advanced-filter-builder-item-button" role="button"></span>\n                    <div ref="eAddButton" role="presentation"></div>\n                    <span ref="eRemoveButton" class="ag-advanced-filter-builder-item-button" role="button"></span>\n                </div>\n            </div>\n        ')||this;return o.item=e,o.dragFeature=i,o.focusWrapper=n,o.moveUpDisabled=!1,o.moveDownDisabled=!1,o}return ce(e,t),e.prototype.postConstruct=function(){var t=this,e=this.item,i=e.filterModel,n=e.level,o=e.showMove,r="join"===i.filterType;if(this.ePillWrapper=this.createManagedBean(r?new re:new Qt),this.ePillWrapper.init({item:this.item,createPill:function(e){return t.createPill(e)}}),this.eDragHandle.insertAdjacentElement("afterend",this.ePillWrapper.getGui()),0===n){var s=document.createElement("div");s.classList.add("ag-advanced-filter-builder-item-tree-line-vertical-bottom"),s.classList.add("ag-advanced-filter-builder-item-tree-line-root"),this.eTreeLines.appendChild(s),c.setDisplayed(this.eDragHandle,!1),c.setDisplayed(this.eButtons,!1),c.setAriaExpanded(this.focusWrapper,!0)}else this.setupTreeLines(n),this.eDragHandle.appendChild(c.createIconNoSpan("advancedFilterBuilderDrag",this.gridOptionsService)),this.setupValidation(),this.setupMoveButtons(o),this.setupAddButton(),this.setupRemoveButton(),this.setupDragging(),this.updateAriaExpanded();c.setAriaLevel(this.focusWrapper,n+1),this.initialiseTabGuard({}),this.createManagedBean(new Xt(this.getGui(),this.focusWrapper,this.ePillWrapper)),this.updateAriaLabel(),this.addManagedListener(this.ePillWrapper,$t.EVENT_VALUE_CHANGED,(function(){return t.dispatchEvent({type:$t.EVENT_VALUE_CHANGED})})),this.addManagedListener(this.ePillWrapper,$t.EVENT_VALID_CHANGED,(function(){return t.updateValidity()}))},e.prototype.setState=function(t){if(0!==this.item.level){var e=this.item.showMove,i=t.disableMoveUp,n=t.disableMoveDown,o=t.treeLines,r=t.showStartTreeLine;this.updateTreeLines(o,r),this.updateAriaExpanded(),e&&(this.moveUpDisabled=!!i,this.moveDownDisabled=!!n,this.eMoveUpButton.classList.toggle("ag-advanced-filter-builder-item-button-disabled",i),this.eMoveDownButton.classList.toggle("ag-advanced-filter-builder-item-button-disabled",n),c.setAriaDisabled(this.eMoveUpButton,!!i),c.setAriaDisabled(this.eMoveDownButton,!!n),this.moveUpTooltipFeature.refreshToolTip(),this.moveDownTooltipFeature.refreshToolTip())}},e.prototype.focusMoveButton=function(t){(t?this.eMoveUpButton:this.eMoveDownButton).focus()},e.prototype.afterAdd=function(){this.ePillWrapper.getFocusableElement().focus()},e.prototype.setupTreeLines=function(t){for(var e=0;e<t;e++){var i=document.createElement("div");this.eTreeLines.appendChild(i)}},e.prototype.updateTreeLines=function(t,e){for(var i=t.length-1,n=this.eTreeLines.children,o=0;o<i;o++){var r=n.item(o);r&&r.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical",!t[o])}var s=n.item(i);if(s){s.classList.add("ag-advanced-filter-builder-item-tree-line-horizontal");var a=t[i];s.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical-top",a),s.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical",!a)}this.eDragHandle.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical-bottom",e)},e.prototype.setupValidation=function(){var t=this;this.eValidation.appendChild(c.createIconNoSpan("advancedFilterBuilderInvalid",this.gridOptionsService)),this.validationTooltipFeature=this.createManagedBean(new y({getGui:function(){return t.eValidation},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return t.ePillWrapper.getValidationMessage()},getTooltipShowDelayOverride:function(){return 1e3}},this.beans)),this.validationTooltipFeature.setComp(this.eValidation),this.updateValidity()},e.prototype.setupAddButton=function(){var t,e=this,i=qt((function(t){return e.advancedFilterExpressionService.translate(t)}),null===(t=this.gridOptionsService.get("advancedFilterBuilderParams"))||void 0===t?void 0:t.addSelectWidth),n=this.createManagedBean(new Wt(i));this.addManagedListener(n,l.EVENT_FIELD_PICKER_VALUE_SELECTED,(function(t){var i=t.value;return e.dispatchEvent({type:$t.EVENT_ADDED,item:e.item,isJoin:"join"===i.key})})),this.eAddButton.appendChild(n.getGui()),this.createManagedBean(new y({getGui:function(){return e.eAddButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip")}},this.beans)).setComp(this.eAddButton)},e.prototype.setupRemoveButton=function(){var t=this;this.eRemoveButton.appendChild(c.createIconNoSpan("advancedFilterBuilderRemove",this.gridOptionsService)),this.addManagedListener(this.eRemoveButton,"click",(function(){return t.removeItem()})),this.addManagedListener(this.eRemoveButton,"keydown",(function(e){switch(e.key){case d.ENTER:e.preventDefault(),c.stopPropagationForAgGrid(e),t.removeItem()}})),this.createManagedBean(new y({getGui:function(){return t.eRemoveButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return t.advancedFilterExpressionService.translate("advancedFilterBuilderRemoveButtonTooltip")}},this.beans)).setComp(this.eRemoveButton),c.setAriaLabel(this.eRemoveButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderRemoveButtonTooltip")),this.activateTabIndex([this.eRemoveButton])},e.prototype.setupMoveButtons=function(t){var e=this;t?(this.eMoveUpButton.appendChild(c.createIconNoSpan("advancedFilterBuilderMoveUp",this.gridOptionsService)),this.addManagedListener(this.eMoveUpButton,"click",(function(){return e.moveItem(!0)})),this.addManagedListener(this.eMoveUpButton,"keydown",(function(t){switch(t.key){case d.ENTER:t.preventDefault(),c.stopPropagationForAgGrid(t),e.moveItem(!0)}})),this.moveUpTooltipFeature=this.createManagedBean(new y({getGui:function(){return e.eMoveUpButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.moveUpDisabled?null:e.advancedFilterExpressionService.translate("advancedFilterBuilderMoveUpButtonTooltip")}},this.beans)),this.moveUpTooltipFeature.setComp(this.eMoveUpButton),c.setAriaLabel(this.eMoveUpButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderMoveUpButtonTooltip")),this.eMoveDownButton.appendChild(c.createIconNoSpan("advancedFilterBuilderMoveDown",this.gridOptionsService)),this.addManagedListener(this.eMoveDownButton,"click",(function(){return e.moveItem(!1)})),this.addManagedListener(this.eMoveDownButton,"keydown",(function(t){switch(t.key){case d.ENTER:t.preventDefault(),c.stopPropagationForAgGrid(t),e.moveItem(!1)}})),this.moveDownTooltipFeature=this.createManagedBean(new y({getGui:function(){return e.eMoveDownButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.moveDownDisabled?null:e.advancedFilterExpressionService.translate("advancedFilterBuilderMoveDownButtonTooltip")}},this.beans)),this.moveDownTooltipFeature.setComp(this.eMoveDownButton),c.setAriaLabel(this.eMoveDownButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderMoveDownButtonTooltip")),this.activateTabIndex([this.eMoveUpButton,this.eMoveDownButton])):(c.setDisplayed(this.eMoveUpButton,!1),c.setDisplayed(this.eMoveDownButton,!1))},e.prototype.updateValidity=function(){c.setVisible(this.eValidation,!this.item.valid),this.validationTooltipFeature.refreshToolTip(),this.updateAriaLabel()},e.prototype.createPill=function(t){var e,i,n=this,o=t.key,r=t.displayValue,s=t.cssClass,a=t.update,c=t.ariaLabel,d=function(t){null!=t&&(a(t),n.dispatchEvent({type:$t.EVENT_VALUE_CHANGED}))};if(t.isSelect){var u=t.getEditorParams,h=t.pickerAriaLabelKey,p=t.pickerAriaLabelValue,f=this.gridOptionsService.get("advancedFilterBuilderParams"),g="".concat(null!==(e=null==f?void 0:f.pillSelectMinWidth)&&void 0!==e?e:140,"px"),v="".concat(null!==(i=null==f?void 0:f.pillSelectMaxWidth)&&void 0!==i?i:200,"px"),y=this.createBean(new le({pickerAriaLabelKey:h,pickerAriaLabelValue:p,pickerType:"ag-list",value:{key:o,displayValue:r},valueFormatter:function(t){var e;return null==t?null:null!==(e=t.displayValue)&&void 0!==e?e:t.key},variableWidth:!0,minPickerWidth:g,maxPickerWidth:v,getEditorParams:u,wrapperClassName:s,ariaLabel:c}));return this.addManagedListener(y,l.EVENT_FIELD_PICKER_VALUE_SELECTED,(function(t){var e=t.value;return d(null==e?void 0:e.key)})),y}y=this.createBean(new ie({value:r,cssClass:s,type:this.getInputType(t.baseCellDataType),ariaLabel:c}));return this.addManagedListener(y,l.EVENT_FIELD_VALUE_CHANGED,(function(t){var e=t.value;return d(e)})),y},e.prototype.getInputType=function(t){switch(t){case"text":case"object":case"boolean":return"text";case"number":return"number";case"date":case"dateString":return"date"}},e.prototype.setupDragging=function(){var t=this,e={type:p.AdvancedFilterBuilder,eElement:this.eDragHandle,dragItemName:function(){return t.ePillWrapper.getDragName()},getDefaultIconName:function(){return m.ICON_NOT_ALLOWED},getDragItem:function(){return{}},onDragStarted:function(){return t.dragFeature.dispatchEvent({type:Ht.EVENT_DRAG_STARTED,item:t.item})},onDragStopped:function(){return t.dragFeature.dispatchEvent({type:Ht.EVENT_DRAG_ENDED})}};this.dragAndDropService.addDragSource(e,!0),this.addDestroyFunc((function(){return t.dragAndDropService.removeDragSource(e)}))},e.prototype.updateAriaLabel=function(){var t,e=this.ePillWrapper.getAriaLabel(),i="".concat(this.item.level+1),n=this.ePillWrapper.getValidationMessage();t=n?this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItemValidation",[e,i,n]):this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItem",[e,i]),c.setAriaLabel(this.focusWrapper,t)},e.prototype.updateAriaExpanded=function(){c.removeAriaExpanded(this.focusWrapper);var t=this.item.filterModel;"join"===(null==t?void 0:t.filterType)&&t.conditions.length&&c.setAriaExpanded(this.focusWrapper,!0)},e.prototype.removeItem=function(){this.dispatchEvent({type:$t.EVENT_REMOVED,item:this.item})},e.prototype.moveItem=function(t){this.dispatchEvent({type:$t.EVENT_MOVED,item:this.item,backwards:t})},de([o("eTreeLines")],e.prototype,"eTreeLines",void 0),de([o("eDragHandle")],e.prototype,"eDragHandle",void 0),de([o("eItem")],e.prototype,"eItem",void 0),de([o("eButtons")],e.prototype,"eButtons",void 0),de([o("eValidation")],e.prototype,"eValidation",void 0),de([o("eMoveUpButton")],e.prototype,"eMoveUpButton",void 0),de([o("eMoveDownButton")],e.prototype,"eMoveDownButton",void 0),de([o("eAddButton")],e.prototype,"eAddButton",void 0),de([o("eRemoveButton")],e.prototype,"eRemoveButton",void 0),de([n("beans")],e.prototype,"beans",void 0),de([n("dragAndDropService")],e.prototype,"dragAndDropService",void 0),de([n("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),de([r],e.prototype,"postConstruct",null),e}(b),he=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),pe=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},fe=function(t){function e(e,i){var n=t.call(this,'\n            <div class="ag-advanced-filter-builder-item-wrapper" role="presentation">\n                <div ref="eItem" class="ag-advanced-filter-builder-item" role="presentation">\n                    <div class="ag-advanced-filter-builder-item-tree-lines" aria-hidden="true">\n                        <div class="ag-advanced-filter-builder-item-tree-line-vertical-top ag-advanced-filter-builder-item-tree-line-horizontal"></div>\n                    </div>\n                </div>\n            </div>\n        ')||this;return n.item=e,n.focusWrapper=i,n}return he(e,t),e.prototype.postConstruct=function(){var t,e=this;c.setAriaLevel(this.focusWrapper,2);var i=qt((function(t){return e.advancedFilterExpressionService.translate(t)}),null===(t=this.gridOptionsService.get("advancedFilterBuilderParams"))||void 0===t?void 0:t.addSelectWidth),n=this.createManagedBean(new Wt(i));this.addManagedListener(n,l.EVENT_FIELD_PICKER_VALUE_SELECTED,(function(t){var i=t.value;e.dispatchEvent({type:$t.EVENT_ADDED,item:e.item,isJoin:"join"===i.key})})),this.eItem.appendChild(n.getGui()),this.createManagedBean(new y({getGui:function(){return n.getGui()},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip")}},this.beans)).setComp(n.getGui()),this.createManagedBean(new Xt(this.getGui(),this.focusWrapper,n)),c.setAriaLabel(this.focusWrapper,this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItem",[this.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip"),"".concat(this.item.level+1)]))},e.prototype.afterAdd=function(){},pe([n("beans")],e.prototype,"beans",void 0),pe([n("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),pe([o("eItem")],e.prototype,"eItem",void 0),pe([r],e.prototype,"postConstruct",null),e}(s),ge=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ve=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ye=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},me=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},be=function(t){function e(){var e=t.call(this,'\n            <div role="presentation" class="ag-advanced-filter-builder" tabindex="-1">\n                <div role="presentation" class="ag-advanced-filter-builder-list" ref="eList"></div>\n                <div role="presentation" class="ag-advanced-filter-builder-button-panel">\n                    <button class="ag-button ag-standard-button ag-advanced-filter-builder-apply-button" ref="eApplyFilterButton"></button>\n                    <button class="ag-button ag-standard-button ag-advanced-filter-builder-cancel-button" ref="eCancelFilterButton"></button>\n                </div>\n            </div>')||this;return e.validationMessage=null,e}return ge(e,t),e.prototype.postConstruct=function(){var t,e=this,i=(null!==(t=this.gridOptionsService.get("advancedFilterBuilderParams"))&&void 0!==t?t:{}).showMoveButtons;this.showMove=!!i,this.addManagedPropertyListener("advancedFilterBuilderParams",(function(t){var i=t.currentValue;e.showMove=!!(null==i?void 0:i.showMoveButtons),e.refreshList(!1)})),this.filterModel=this.setupFilterModel(),this.setupVirtualList(),this.dragFeature=this.createManagedBean(new Ht(this,this.virtualList)),this.setupButtons()},e.prototype.refresh=function(){var t=this.virtualList.getLastFocusedRow();this.setupFilterModel(),this.validateItems(),this.refreshList(!1),null!=t&&(this.virtualList.getComponentAt(t)||(t=0),this.virtualList.focusRow(t))},e.prototype.getNumItems=function(){return this.items.length},e.prototype.moveItem=function(t,e){e&&t&&this.moveItemToIndex(t,e.rowIndex,e.position)},e.prototype.afterGuiAttached=function(){this.virtualList.focusRow(0)},e.prototype.setupVirtualList=function(){var t=this;this.virtualList=this.createManagedBean(new S({cssIdentifier:"advanced-filter-builder",ariaRole:"tree",listName:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderList")})),this.virtualList.setComponentCreator(this.createItemComponent.bind(this)),this.virtualList.setComponentUpdater(this.updateItemComponent.bind(this)),this.virtualList.setRowHeight(40),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:function(){return t.items.length},getRow:function(e){return t.items[e]},areRowsEqual:function(t,e){return t===e}}),this.buildList(),this.virtualList.refresh()},e.prototype.setupButtons=function(){var t=this;this.eApplyFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilderApply"),this.activateTabIndex([this.eApplyFilterButton]),this.addManagedListener(this.eApplyFilterButton,"click",(function(){t.advancedFilterService.setModel(t.filterModel),t.filterManager.onFilterChanged({source:"advancedFilter"}),t.close()})),this.validationTooltipFeature=this.createManagedBean(new y({getGui:function(){return t.eApplyFilterButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return t.validationMessage},getTooltipShowDelayOverride:function(){return 1e3}},this.beans)),this.validationTooltipFeature.setComp(this.eApplyFilterButton),this.validate(),this.addManagedListener(this.eApplyFilterButton,"mouseenter",(function(){return t.addOrRemoveCssClass("ag-advanced-filter-builder-validation",!0)})),this.addManagedListener(this.eApplyFilterButton,"mouseleave",(function(){return t.addOrRemoveCssClass("ag-advanced-filter-builder-validation",!1)})),this.eCancelFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilderCancel"),this.activateTabIndex([this.eCancelFilterButton]),this.addManagedListener(this.eCancelFilterButton,"click",(function(){return t.close()}))},e.prototype.removeItemFromParent=function(t){var e=t.parent.conditions.indexOf(t.filterModel);return t.parent.conditions.splice(e,1),e},e.prototype.moveItemToIndex=function(t,e,i){var n,o,r=this.items[e],s="join"===(null===(n=r.filterModel)||void 0===n?void 0:n.filterType)&&"bottom"===i,a=s?r.filterModel:r.parent;a&&(this.isChildOrSelf(a,t.filterModel)||r===t||(this.removeItemFromParent(t),s?o=0:-1===(o=a.conditions.indexOf(r.filterModel))?o=a.conditions.length:"bottom"===i&&(o+=1),a.conditions.splice(o,0,t.filterModel),this.refreshList(!1)))},e.prototype.isChildOrSelf=function(t,e){var i=this;return t===e||"join"===e.filterType&&e.conditions.some((function(e){return i.isChildOrSelf(t,e)}))},e.prototype.setupFilterModel=function(){var t=this.formatFilterModel(this.advancedFilterService.getModel());return this.stringifiedModel=JSON.stringify(t),t},e.prototype.formatFilterModel=function(t){return"join"!==(t=null!=t?t:{filterType:"join",type:"AND",conditions:[]}).filterType&&(t={filterType:"join",type:"AND",conditions:[t]}),t},e.prototype.buildList=function(){var t=this,e=function(i,n,o,r){n.push({filterModel:i,level:o,parent:r,valid:!0,showMove:t.showMove}),"join"===i.filterType&&(i.conditions.forEach((function(t){return e(t,n,o+1,i)})),0===o&&n.push({filterModel:null,level:o+1,parent:i,valid:!0}))};this.items=[],e(this.filterModel,this.items,0)},e.prototype.refreshList=function(t){if(!t){var e=[];this.items.forEach((function(t){t.valid||e.push(t.filterModel)})),this.buildList(),e.length&&this.items.forEach((function(t){t.filterModel&&e.includes(t.filterModel)&&(t.valid=!1)}))}this.virtualList.refresh(t),this.validate()},e.prototype.updateItemComponent=function(t,e){var i=this,n=this.items.indexOf(t),o=function(t,e){var n=i.items.find((function(e){return e.filterModel===t})),r=null==n?void 0:n.parent;if(r){var s=r.conditions;o(r,e),e.push(s[s.length-1]===t)}},r=[],s=t.filterModel;s&&(o(s,r),r[0]=!1);var a="join"===(null==s?void 0:s.filterType)&&!!s.conditions.length;e.setState({disableMoveUp:1===n,disableMoveDown:!this.canMoveDown(t,n),treeLines:r,showStartTreeLine:a})},e.prototype.createItemComponent=function(t,e){var i=this,n=this.createBean(t.filterModel?new ue(t,this.dragFeature,e):new fe(t,e));return n.addManagedListener(n,$t.EVENT_REMOVED,(function(t){var e=t.item;return i.removeItem(e)})),n.addManagedListener(n,$t.EVENT_VALUE_CHANGED,(function(){return i.validate()})),n.addManagedListener(n,$t.EVENT_ADDED,(function(t){var e=t.item,n=t.isJoin;return i.addItem(e,n)})),n.addManagedListener(n,$t.EVENT_MOVED,(function(t){var e=t.item,n=t.backwards;return i.moveItemUpDown(e,n)})),n instanceof ue&&this.updateItemComponent(t,n),n},e.prototype.addItem=function(t,e){var i,n,o=t.parent,r=t.level,s=t.filterModel,a="join"===(null==s?void 0:s.filterType),l=e?{filterType:"join",type:"AND",conditions:[]}:{},c=a?s:o,d=a?0:c.conditions.indexOf(s);d>=0?(a||(d+=1),c.conditions.splice(d,0,l)):c.conditions.push(l);var u=this.items.indexOf(t),h=u>=0;if(h){t.filterModel&&u++;var p=[{filterModel:l,level:a?r+1:r,parent:c,valid:e,showMove:this.showMove}];(i=this.items).splice.apply(i,me([u,0],ye(p),!1))}this.refreshList(h),h&&(null===(n=this.virtualList.getComponentAt(u))||void 0===n||n.afterAdd())},e.prototype.removeItem=function(t){var e,i=t.parent,n=t.filterModel,o=i.conditions.indexOf(n);i.conditions.splice(o,1);var r="join"===(null===(e=t.filterModel)||void 0===e?void 0:e.filterType),s=this.items.indexOf(t),a=!r&&s>=0;a&&this.items.splice(s,1),this.refreshList(a),s>=0&&this.virtualList.focusRow(s)},e.prototype.moveItemUpDown=function(t,e){var i=this.items.indexOf(t),n=e?i-1:i+1;if(0!==n&&(e||this.canMoveDown(t,i))){var o=this.items[n],r=this.removeItemFromParent(t),s=t.level,a=t.filterModel,l=t.parent,c=o.level,d=o.filterModel,u=o.parent;if(e)if(c===s&&"join"===d.filterType)d.conditions.push(a);else if(c<=s){var h=u.conditions.indexOf(d);u.conditions.splice(h,0,a)}else{l.conditions[r-1].conditions.push(a)}else if(c===s)if("join"===d.filterType)d.conditions.splice(0,0,a);else{var p=u.conditions.indexOf(d);u.conditions.splice(p+1,0,a)}else if(r<l.conditions.length)l.conditions.splice(r+1,0,a);else{var f=this.items.find((function(t){return t.filterModel===l})),g=f.parent.conditions.indexOf(f.filterModel)+1;f.parent.conditions.splice(g,0,a)}this.refreshList(!1);var v=this.items.findIndex((function(t){return t.filterModel===a}));if(v>=0){var y=this.virtualList.getComponentAt(v);y instanceof ue&&y.focusMoveButton(e)}}},e.prototype.canMoveDown=function(t,e){return!(1===t.level&&e===this.items.length-2||1===t.level&&t.parent.conditions[t.parent.conditions.length-1]===t.filterModel)},e.prototype.close=function(){this.advancedFilterService.getCtrl().toggleFilterBuilder("ui")},e.prototype.validate=function(){var t=!this.items.every((function(t){return t.valid}));t?this.validationMessage=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationIncomplete"):(t=JSON.stringify(this.filterModel)===this.stringifiedModel,this.validationMessage=t?this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationAlreadyApplied"):null),c.setDisabled(this.eApplyFilterButton,t),this.validationTooltipFeature.refreshToolTip()},e.prototype.validateItems=function(){var t=this,e=function(t){t.type=void 0},i=function(t){delete t.filter};this.items.forEach((function(n){if(n.valid&&n.filterModel&&"join"!==n.filterModel.filterType){var o=n.filterModel,r=o.colId,s=t.advancedFilterExpressionService.getColumnAutocompleteEntries().find((function(t){return t.key===r})),a=t.advancedFilterExpressionService.getColumnDetails(o.colId);if(!s||!a.column)return n.valid=!1,o.colId=void 0,e(o),void i(o);var l=t.advancedFilterExpressionService.getDataTypeExpressionOperator(a.baseCellDataType).operators[o.type];if(!l)return n.valid=!1,e(o),void i(o);l.numOperands>0&&!c.exists(o.filter)&&(n.valid=!1)}}))},ve([o("eList")],e.prototype,"eList",void 0),ve([o("eApplyFilterButton")],e.prototype,"eApplyFilterButton",void 0),ve([o("eCancelFilterButton")],e.prototype,"eCancelFilterButton",void 0),ve([n("filterManager")],e.prototype,"filterManager",void 0),ve([n("advancedFilterService")],e.prototype,"advancedFilterService",void 0),ve([n("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),ve([n("beans")],e.prototype,"beans",void 0),ve([r],e.prototype,"postConstruct",null),e}(s),Se=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xe=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ce=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},we=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},Ee=function(t){function e(e){var i=t.call(this)||this;return i.enabled=e,i}return Se(e,t),e.prototype.postConstruct=function(){var t=this;this.hasAdvancedFilterParent=!!this.gridOptionsService.get("advancedFilterParent"),this.ctrlsService.whenReady((function(){return t.setAdvancedFilterComp()})),this.addManagedListener(this.eventService,l.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,(function(e){var i=e.enabled;return t.onEnabledChanged(i)})),this.addManagedPropertyListener("advancedFilterParent",(function(){return t.updateComps()})),this.addDestroyFunc((function(){t.destroyAdvancedFilterComp(),t.destroyBean(t.eBuilderComp),t.eBuilderDialog&&t.eBuilderDialog.isAlive()&&t.destroyBean(t.eBuilderDialog)}))},e.prototype.setupHeaderComp=function(t){this.eHeaderComp=this.createManagedBean(new Bt(this.enabled&&!this.hasAdvancedFilterParent)),t.insertAdjacentElement("beforebegin",this.eHeaderComp.getGui())},e.prototype.focusHeaderComp=function(){return!!this.eHeaderComp&&(this.eHeaderComp.getFocusableElement().focus(),!0)},e.prototype.refreshComp=function(){var t,e;null===(t=this.eFilterComp)||void 0===t||t.refresh(),null===(e=this.eHeaderComp)||void 0===e||e.refresh()},e.prototype.refreshBuilderComp=function(){var t;null===(t=this.eBuilderComp)||void 0===t||t.refresh()},e.prototype.getHeaderHeight=function(){var t,e;return null!==(e=null===(t=this.eHeaderComp)||void 0===t?void 0:t.getHeight())&&void 0!==e?e:0},e.prototype.setInputDisabled=function(t){var e,i;null===(e=this.eFilterComp)||void 0===e||e.setInputDisabled(t),null===(i=this.eHeaderComp)||void 0===i||i.setInputDisabled(t)},e.prototype.toggleFilterBuilder=function(t,i){var n=this;if(!(i&&this.eBuilderDialog||!1===i&&!this.eBuilderDialog)){if(this.eBuilderDialog)return this.builderDestroySource=t,void this.destroyBean(this.eBuilderDialog);this.setInputDisabled(!0);var o=this.getBuilderDialogSize(),r=o.width,s=o.height,a=o.minWidth;this.eBuilderComp=this.createBean(new be),this.eBuilderDialog=this.createBean(new x({title:this.advancedFilterExpressionService.translate("advancedFilterBuilderTitle"),component:this.eBuilderComp,width:r,height:s,resizable:!0,movable:!0,maximizable:!0,centered:!0,closable:!0,minWidth:a,afterGuiAttached:function(){var t;return null===(t=n.eBuilderComp)||void 0===t?void 0:t.afterGuiAttached()}})),this.dispatchFilterBuilderVisibleChangedEvent(t,!0),this.eBuilderDialog.addEventListener(x.EVENT_DESTROYED,(function(){var t;n.destroyBean(n.eBuilderComp),n.eBuilderComp=void 0,n.eBuilderDialog=void 0,n.setInputDisabled(!1),n.dispatchEvent({type:e.EVENT_BUILDER_CLOSED}),n.dispatchFilterBuilderVisibleChangedEvent(null!==(t=n.builderDestroySource)&&void 0!==t?t:"ui",!1),n.builderDestroySource=void 0}))}},e.prototype.dispatchFilterBuilderVisibleChangedEvent=function(t,e){var i={type:l.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED,source:t,visible:e};this.eventService.dispatchEvent(i)},e.prototype.getBuilderDialogSize=function(){var t,e,i=null!==(e=null===(t=this.gridOptionsService.get("advancedFilterBuilderParams"))||void 0===t?void 0:t.minWidth)&&void 0!==e?e:500,n=this.popupService.getPopupParent(),o=Math.round(c.getAbsoluteWidth(n))-2,r=Math.round(.75*c.getAbsoluteHeight(n))-2;return{width:Math.min(Math.max(600,i),o),height:Math.min(600,r),minWidth:i}},e.prototype.onEnabledChanged=function(t){this.enabled=t,this.updateComps()},e.prototype.updateComps=function(){this.setAdvancedFilterComp(),this.setHeaderCompEnabled(),this.eventService.dispatchEvent({type:l.EVENT_HEADER_HEIGHT_CHANGED})},e.prototype.setAdvancedFilterComp=function(){var t;if(this.destroyAdvancedFilterComp(),this.enabled){var e=this.gridOptionsService.get("advancedFilterParent");if(this.hasAdvancedFilterParent=!!e,e){var i=this.createBean(new Ae),n=i.getGui(),o=this.environment.getTheme().allThemes;o.length&&(t=n.classList).add.apply(t,we([],Ce(o),!1)),n.classList.add(this.gridOptionsService.get("enableRtl")?"ag-rtl":"ag-ltr"),e.appendChild(n),this.eFilterComp=i}}},e.prototype.setHeaderCompEnabled=function(){var t;null===(t=this.eHeaderComp)||void 0===t||t.setEnabled(this.enabled&&!this.hasAdvancedFilterParent)},e.prototype.destroyAdvancedFilterComp=function(){this.eFilterComp&&(c.removeFromParent(this.eFilterComp.getGui()),this.destroyBean(this.eFilterComp))},e.EVENT_BUILDER_CLOSED="advancedFilterBuilderClosed",xe([n("focusService")],e.prototype,"focusService",void 0),xe([n("ctrlsService")],e.prototype,"ctrlsService",void 0),xe([n("popupService")],e.prototype,"popupService",void 0),xe([n("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),xe([r],e.prototype,"postConstruct",null),e}(i),Oe=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),De=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ae=function(t){function e(){var e=t.call(this,'\n            <div class="ag-advanced-filter" role="presentation" tabindex="-1">\n                <ag-autocomplete ref="eAutocomplete"></ag-autocomplete>\n                <button class="ag-button ag-standard-button ag-advanced-filter-apply-button" ref="eApplyFilterButton"></button>\n                <button class="ag-advanced-filter-builder-button" ref="eBuilderFilterButton">\n                    <span ref="eBuilderFilterButtonIcon" aria-hidden="true"></span>\n                    <span class="ag-advanced-filter-builder-button-label" ref="eBuilderFilterButtonLabel"></span>\n                </button>\n            </div>')||this;return e.expressionParser=null,e.isApplyDisabled=!0,e.builderOpen=!1,e}return Oe(e,t),e.prototype.postConstruct=function(){var t=this;this.eAutocomplete.setListGenerator((function(e,i){return t.generateAutocompleteListParams(i)})).setValidator((function(){return t.validateValue()})).setForceLastSelection((function(e,i){return t.forceLastSelection(e,i)})).setInputAriaLabel(this.advancedFilterExpressionService.translate("ariaAdvancedFilterInput")).setListAriaLabel(this.advancedFilterExpressionService.translate("ariaLabelAdvancedFilterAutocomplete")),this.refresh(),this.addManagedListener(this.eAutocomplete,C.EVENT_VALUE_CHANGED,(function(e){var i=e.value;return t.onValueChanged(i)})),this.addManagedListener(this.eAutocomplete,C.EVENT_VALUE_CONFIRMED,(function(e){var i=e.isValid;return t.onValueConfirmed(i)})),this.addManagedListener(this.eAutocomplete,C.EVENT_OPTION_SELECTED,(function(e){var i=e.position,n=e.updateEntry,o=e.autocompleteType;return t.onOptionSelected(i,n,o)})),this.addManagedListener(this.eAutocomplete,C.EVENT_VALID_CHANGED,(function(e){var i=e.isValid,n=e.validationMessage;return t.onValidChanged(i,n)})),this.setupApplyButton(),this.setupBuilderButton()},e.prototype.refresh=function(){var t=this.advancedFilterService.getExpressionDisplayValue();this.eAutocomplete.setValue({value:null!=t?t:"",position:null==t?void 0:t.length,updateListOnlyIfOpen:!0})},e.prototype.setInputDisabled=function(t){this.eAutocomplete.setInputDisabled(t),c.setDisabled(this.eApplyFilterButton,t||this.isApplyDisabled)},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="advancedFilter",e},e.prototype.setupApplyButton=function(){var t=this;this.eApplyFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterApply"),this.activateTabIndex([this.eApplyFilterButton]),this.addManagedListener(this.eApplyFilterButton,"click",(function(){return t.onValueConfirmed(t.eAutocomplete.isValid())})),c.setDisabled(this.eApplyFilterButton,this.isApplyDisabled)},e.prototype.setupBuilderButton=function(){var t=this;this.eBuilderFilterButtonIcon.appendChild(c.createIconNoSpan("advancedFilterBuilder",this.gridOptionsService)),this.eBuilderFilterButtonLabel.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilder"),this.activateTabIndex([this.eBuilderFilterButton]),this.addManagedListener(this.eBuilderFilterButton,"click",(function(){return t.openBuilder()})),this.addManagedListener(this.advancedFilterService.getCtrl(),Ee.EVENT_BUILDER_CLOSED,(function(){return t.closeBuilder()}))},e.prototype.onValueChanged=function(t){var e;t=c.makeNull(t),this.advancedFilterService.setExpressionDisplayValue(t),this.expressionParser=this.advancedFilterService.createExpressionParser(t);var i=null===(e=this.expressionParser)||void 0===e?void 0:e.parseExpression();i&&i!==t&&this.eAutocomplete.setValue({value:i,silent:!0,restoreFocus:!0})},e.prototype.onValueConfirmed=function(t){t&&!this.isApplyDisabled&&(c.setDisabled(this.eApplyFilterButton,!0),this.advancedFilterService.applyExpression(),this.filterManager.onFilterChanged({source:"advancedFilter"}))},e.prototype.onOptionSelected=function(t,e,i){var n=this.updateExpression(t,e,i),o=n.updatedValue,r=n.updatedPosition,s=n.hideAutocomplete;this.eAutocomplete.setValue({value:o,position:r,updateListOnlyIfOpen:s,restoreFocus:!0})},e.prototype.validateValue=function(){var t,e,i;return(null===(t=this.expressionParser)||void 0===t?void 0:t.isValid())?null:null!==(i=null===(e=this.expressionParser)||void 0===e?void 0:e.getValidationMessage())&&void 0!==i?i:null},e.prototype.onValidChanged=function(t,e){this.isApplyDisabled=!t||this.advancedFilterService.isCurrentExpressionApplied(),c.setDisabled(this.eApplyFilterButton,this.isApplyDisabled),this.setTooltip(e,1e3)},e.prototype.generateAutocompleteListParams=function(t){return this.expressionParser?this.expressionParser.getAutocompleteListParams(t):this.advancedFilterExpressionService.getDefaultAutocompleteListParams("")},e.prototype.updateExpression=function(t,e,i){var n,o;return this.advancedFilterExpressionService.updateAutocompleteCache(e,i),null!==(o=null===(n=this.expressionParser)||void 0===n?void 0:n.updateExpression(t,e,i))&&void 0!==o?o:this.advancedFilterService.getDefaultExpression(e)},e.prototype.forceLastSelection=function(t,e){var i=t.key,n=t.displayValue;return!!e.toLocaleLowerCase().match("^".concat((null!=n?n:i).toLocaleLowerCase(),"\\s*$"))},e.prototype.openBuilder=function(){this.builderOpen||(this.builderOpen=!0,c.setDisabled(this.eBuilderFilterButton,!0),this.advancedFilterService.getCtrl().toggleFilterBuilder("ui"))},e.prototype.closeBuilder=function(){this.builderOpen&&(this.builderOpen=!1,c.setDisabled(this.eBuilderFilterButton,!1),this.eBuilderFilterButton.focus())},De([o("eAutocomplete")],e.prototype,"eAutocomplete",void 0),De([o("eApplyFilterButton")],e.prototype,"eApplyFilterButton",void 0),De([o("eBuilderFilterButton")],e.prototype,"eBuilderFilterButton",void 0),De([o("eBuilderFilterButtonIcon")],e.prototype,"eBuilderFilterButtonIcon",void 0),De([o("eBuilderFilterButtonLabel")],e.prototype,"eBuilderFilterButtonLabel",void 0),De([n("advancedFilterService")],e.prototype,"advancedFilterService",void 0),De([n("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),De([n("filterManager")],e.prototype,"filterManager",void 0),De([r],e.prototype,"postConstruct",null),e}(s),Te={ariaAdvancedFilterBuilderItem:function(t){return"".concat(t[0],". Level ").concat(t[1],". Press ENTER to edit.")},ariaAdvancedFilterBuilderItemValidation:function(t){return"".concat(t[0],". Level ").concat(t[1],". ").concat(t[2]," Press ENTER to edit.")},ariaAdvancedFilterBuilderList:"Advanced Filter Builder List",ariaAdvancedFilterBuilderFilterItem:"Filter Condition",ariaAdvancedFilterBuilderGroupItem:"Filter Group",ariaAdvancedFilterBuilderColumn:"Column",ariaAdvancedFilterBuilderOption:"Option",ariaAdvancedFilterBuilderValue:"Value",ariaAdvancedFilterBuilderJoinOperator:"Join Operator",ariaAdvancedFilterInput:"Advanced Filter Input",ariaLabelAdvancedFilterAutocomplete:"Advanced Filter Autocomplete",advancedFilterContains:"contains",advancedFilterNotContains:"does not contain",advancedFilterTextEquals:"equals",advancedFilterTextNotEqual:"does not equal",advancedFilterStartsWith:"begins with",advancedFilterEndsWith:"ends with",advancedFilterBlank:"is blank",advancedFilterNotBlank:"is not blank",advancedFilterEquals:"=",advancedFilterNotEqual:"!=",advancedFilterGreaterThan:">",advancedFilterGreaterThanOrEqual:">=",advancedFilterLessThan:"<",advancedFilterLessThanOrEqual:"<=",advancedFilterTrue:"is true",advancedFilterFalse:"is false",advancedFilterAnd:"AND",advancedFilterOr:"OR",advancedFilterApply:"Apply",advancedFilterBuilder:"Builder",advancedFilterValidationMissingColumn:"Column is missing",advancedFilterValidationMissingOption:"Option is missing",advancedFilterValidationMissingValue:"Value is missing",advancedFilterValidationInvalidColumn:"Column not found",advancedFilterValidationInvalidOption:"Option not found",advancedFilterValidationMissingQuote:"Value is missing an end quote",advancedFilterValidationNotANumber:"Value is not a number",advancedFilterValidationInvalidDate:"Value is not a valid date",advancedFilterValidationMissingCondition:"Condition is missing",advancedFilterValidationJoinOperatorMismatch:"Join operators within a condition must be the same",advancedFilterValidationInvalidJoinOperator:"Join operator not found",advancedFilterValidationMissingEndBracket:"Missing end bracket",advancedFilterValidationExtraEndBracket:"Too many end brackets",advancedFilterValidationMessage:function(t){return"Expression has an error. ".concat(t[0]," - ").concat(t[1],".")},advancedFilterValidationMessageAtEnd:function(t){return"Expression has an error. ".concat(t[0]," at end of expression.")},advancedFilterBuilderTitle:"Advanced Filter",advancedFilterBuilderApply:"Apply",advancedFilterBuilderCancel:"Cancel",advancedFilterBuilderAddButtonTooltip:"Add Filter or Group",advancedFilterBuilderRemoveButtonTooltip:"Remove",advancedFilterBuilderMoveUpButtonTooltip:"Move Up",advancedFilterBuilderMoveDownButtonTooltip:"Move Down",advancedFilterBuilderAddJoin:"Add Group",advancedFilterBuilderAddCondition:"Add Filter",advancedFilterBuilderSelectColumn:"Select a column",advancedFilterBuilderSelectOption:"Select an option",advancedFilterBuilderEnterValue:"Enter a value...",advancedFilterBuilderValidationAlreadyApplied:"Current filter already applied.",advancedFilterBuilderValidationIncomplete:"Not all conditions are complete.",advancedFilterBuilderValidationSelectColumn:"Must select a column.",advancedFilterBuilderValidationSelectOption:"Must select an option.",advancedFilterBuilderValidationEnterValue:"Must enter a value."};function ke(t,e,i){if(!t)return"";var n=i-e;return n?t.slice(0,t.length-n):t}function Me(t,e,i,n,o,r,s){var a=i+(!t.length||s?0:1),l=0;return o&&(" "===t[a]?l=1:(n+=" ",r&&(n+='"'))),{updatedValue:t.slice(0,e)+n+t.slice(a),updatedPosition:e+n.length+l}}function Re(t,e,i,n){for(var o=e,r=!1;o<t.length;){var s=t[o];if("("===s){n&&" "===t[o-1]?r=!0:o-=1;break}if(" "===s||i&&")"===s){o-=1;break}o++}return{endPosition:o,isEmpty:r}}function Pe(t,e,i,n){i!==e&&(t.expression=Me(t.expression,n-e.length+1,n,i).updatedValue)}var Ne=function(){return(Ne=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Le=function(){function t(t,e){this.params=t,this.startPosition=e,this.type="column",this.valid=!0,this.hasStartChar=!1,this.hasEndChar=!1,this.colName=""}return t.prototype.parse=function(t,e){if(t!==_e.COL_START_CHAR||this.colName)if(t===_e.COL_END_CHAR&&this.hasStartChar){if(this.parseColumn(!1,e))return this.hasEndChar=!0,!1;this.colName+=t}else this.colName+=t;else this.hasStartChar=!0},t.prototype.getDisplayValue=function(){return(this.hasStartChar?_e.COL_START_CHAR:"")+this.colName+(this.hasEndChar?_e.COL_END_CHAR:"")},t.prototype.getColId=function(){return this.colId},t.prototype.complete=function(t){this.parseColumn(!0,t)},t.prototype.getValidationError=function(){var t;return this.valid?null:{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidColumn"),startPosition:this.startPosition,endPosition:null!==(t=this.endPosition)&&void 0!==t?t:this.params.expression.length-1}},t.prototype.parseColumn=function(t,e){var i;this.endPosition=e;var n=this.params.advancedFilterExpressionService.getColId(this.colName);return n&&this.hasStartChar&&(this.colId=n.colId,Pe(this.params,this.colName,n.columnName,e-1),this.colName=n.columnName,this.column=this.params.columnModel.getPrimaryColumn(this.colId),this.column)?(this.baseCellDataType=null!==(i=this.params.dataTypeService.getBaseDataType(this.column))&&void 0!==i?i:"text",!0):(t&&(this.valid=!1),this.baseCellDataType="text",!1)},t}(),Ie=function(){function t(t,e,i){this.params=t,this.startPosition=e,this.baseCellDataType=i,this.type="operator",this.valid=!0,this.expectedNumOperands=0,this.operator=""}return t.prototype.parse=function(t,e){if(" "===t||")"===t){if(this.parseOperator(!1,e-1))return!0;this.operator+=t}else this.operator+=t},t.prototype.complete=function(t){this.parseOperator(!0,t)},t.prototype.getValidationError=function(){var t;return this.valid?null:{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidOption"),startPosition:this.startPosition,endPosition:null!==(t=this.endPosition)&&void 0!==t?t:this.params.expression.length-1}},t.prototype.getDisplayValue=function(){return this.operator},t.prototype.getOperatorKey=function(){return this.parsedOperator},t.prototype.parseOperator=function(t,e){var i=this.params.advancedFilterExpressionService.getDataTypeExpressionOperator(this.baseCellDataType),n=i.findOperator(this.operator);if(this.endPosition=e,n){this.parsedOperator=n;var o=i.operators[n];this.expectedNumOperands=o.numOperands;var r=o.displayValue;return Pe(this.params,this.operator,r,e),this.operator=r,!0}return!t&&null===n||(this.valid=!1),!1},t}(),Fe=function(){function t(t,e,i,n){this.params=t,this.startPosition=e,this.baseCellDataType=i,this.column=n,this.type="operand",this.valid=!0,this.operand="",this.validationMessage=null}return t.prototype.parse=function(t,e){if(" "===t){if(!this.quotes)return this.parseOperand(!1,e),!0;this.operand+=t}else if(")"===t){if("number"===this.baseCellDataType||!this.quotes)return this.parseOperand(!1,e-1),!0;this.operand+=t}else if(this.operand||this.quotes||"'"!==t&&'"'!==t){if(this.quotes&&t===this.quotes)return this.parseOperand(!1,e),!1;this.operand+=t}else this.quotes=t},t.prototype.complete=function(t){this.parseOperand(!0,t)},t.prototype.getValidationError=function(){var t;return this.validationMessage?{message:this.validationMessage,startPosition:this.startPosition,endPosition:null!==(t=this.endPosition)&&void 0!==t?t:this.params.expression.length-1}:null},t.prototype.getRawValue=function(){return this.operand},t.prototype.getModelValue=function(){return this.modelValue},t.prototype.parseOperand=function(t,e){var i=this.params.advancedFilterExpressionService;if(this.endPosition=e,this.modelValue=this.operand,t&&this.quotes)this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationMissingQuote");else if(""===this.modelValue)this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationMissingValue");else{var n=i.getOperandModelValue(this.operand,this.baseCellDataType,this.column);switch(null!=n&&(this.modelValue=n),this.baseCellDataType){case"number":(this.quotes||isNaN(this.modelValue))&&(this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationNotANumber"));break;case"date":case"dateString":null==n&&(this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationInvalidDate"))}}},t}(),_e=function(){function t(t,e){this.params=t,this.startPosition=e,this.isAwaiting=!0}return t.prototype.parseExpression=function(){for(var t,e,i=this.startPosition,n=this.params.expression;i<n.length;){var o=n[i];if(" "===o&&this.isAwaiting);else{if(this.isAwaiting=!1,!this.parser){var r=void 0;this.columnParser?this.operatorParser?(this.operandParser=new Fe(this.params,i,this.columnParser.baseCellDataType,this.columnParser.column),r=this.operandParser):(this.operatorParser=new Ie(this.params,i,this.columnParser.baseCellDataType),r=this.operatorParser):(this.columnParser=new Le(this.params,i),r=this.columnParser),this.parser=r}var s=this.parser.parse(o,i);if(null!=s){if(this.isComplete())return this.returnEndPosition(s?i-1:i,!0);this.parser=void 0,this.isAwaiting=!0}}i++}return null===(e=null===(t=this.parser)||void 0===t?void 0:t.complete)||void 0===e||e.call(t,i-1),this.returnEndPosition(i)},t.prototype.isValid=function(){return this.isComplete()&&this.columnParser.valid&&this.operatorParser.valid&&(!this.operandParser||this.operandParser.valid)},t.prototype.getValidationError=function(){var t,e,i,n,o,r=null!==(n=null!==(e=null===(t=this.columnParser)||void 0===t?void 0:t.getValidationError())&&void 0!==e?e:null===(i=this.operatorParser)||void 0===i?void 0:i.getValidationError())&&void 0!==n?n:null===(o=this.operandParser)||void 0===o?void 0:o.getValidationError();if(r)return r;var s,a=this.params.expression.length;return this.columnParser?this.operatorParser?this.operatorParser.expectedNumOperands&&!this.operandParser&&(s="advancedFilterValidationMissingValue"):s="advancedFilterValidationMissingOption":s="advancedFilterValidationMissingColumn",s?{message:this.params.advancedFilterExpressionService.translate(s),startPosition:a,endPosition:a}:null},t.prototype.getFunction=function(t){var e,i,n,o=this.columnParser.getColId(),r=o.replace(/(['"])/,"\\$1"),s=null===(e=this.operatorParser)||void 0===e?void 0:e.getOperatorKey(),a=t.operators,l=t.evaluatorParams,c=t.operands,d=this.params.advancedFilterExpressionService.getExpressionOperator(this.columnParser.baseCellDataType,s),u=this.addToListAndGetIndex(a,d),h=this.params.advancedFilterExpressionService.getExpressionEvaluatorParams(o),p=this.addToListAndGetIndex(l,h);if(0===(null===(i=this.operatorParser)||void 0===i?void 0:i.expectedNumOperands))n="";else{var f=this.addToListAndGetIndex(c,this.getOperandValue());n=", params.operands[".concat(f,"]")}return"params.operators[".concat(u,"].evaluator(expressionProxy.getValue('").concat(r,"', node), node, params.evaluatorParams[").concat(p,"]").concat(n,")")},t.prototype.getAutocompleteListParams=function(t){return this.isColumnPosition(t)?this.getColumnAutocompleteListParams(t):this.isOperatorPosition(t)?this.getOperatorAutocompleteListParams(t):this.isBeyondEndPosition(t)?void 0:{enabled:!1}},t.prototype.updateExpression=function(t,e,i){var n,o,r,s,a,l=this.params.expression;if(this.isColumnPosition(t))return Me(this.params.expression,this.startPosition,(null===(n=this.columnParser)||void 0===n?void 0:n.getColId())?this.columnParser.endPosition:Re(l,t).endPosition,this.params.advancedFilterExpressionService.getColumnValue(e),!0);if(this.isOperatorPosition(t)){var c=this.getBaseCellDataTypeFromOperatorAutocompleteType(i),d=this.hasOperand(c,e.key),u=d&&this.doesOperandNeedQuotes(c),h=void 0;if(null!=(null===(o=this.operatorParser)||void 0===o?void 0:o.startPosition)&&t<this.operatorParser.startPosition)h=Me(l,t,t,null!==(r=e.displayValue)&&void 0!==r?r:e.key,d,u);else{var p=void 0,f=!1;if(null===(s=this.operatorParser)||void 0===s?void 0:s.getOperatorKey())p=this.operatorParser.endPosition;else{var g=Re(l,t,!0,!0);p=g.endPosition,f=g.isEmpty}h=Me(l,function(t,e,i){for(var n=e;n<i;){if(" "!==t[n])break;n++}return n}(l,this.columnParser.endPosition+1,p),p,null!==(a=e.displayValue)&&void 0!==a?a:e.key,d,u,f)}return Ne(Ne({},h),{hideAutocomplete:!d})}return null},t.prototype.getModel=function(){var t=this.columnParser.getColId(),e={filterType:this.columnParser.baseCellDataType,colId:t,type:this.operatorParser.getOperatorKey()};return this.operatorParser.expectedNumOperands&&(e.filter=this.operandParser.getModelValue()),e},t.prototype.getOperandValue=function(){var t=this.operandParser.getRawValue(),e=this.columnParser,i=e.baseCellDataType,n=e.column;switch(i){case"number":t=Number(t);break;case"date":case"dateString":t=this.params.valueParserService.parseValue(n,null,t,void 0)}return"dateString"===i?this.params.dataTypeService.getDateParserFunction()(t):t},t.prototype.isComplete=function(){return!(!this.operatorParser||!(!this.operatorParser.expectedNumOperands||this.operatorParser.expectedNumOperands&&this.operandParser))},t.prototype.isColumnPosition=function(t){return!this.columnParser||null==this.columnParser.endPosition||t<=this.columnParser.endPosition+1},t.prototype.isOperatorPosition=function(t){return!this.operatorParser||null==this.operatorParser.endPosition||t<=this.operatorParser.endPosition+1},t.prototype.isBeyondEndPosition=function(t){return this.isComplete()&&null!=this.endPosition&&t>this.endPosition+1&&this.endPosition+1<this.params.expression.length},t.prototype.returnEndPosition=function(t,e){return this.endPosition=e?t:t-1,t},t.prototype.getColumnAutocompleteListParams=function(t){return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getColumnAutocompleteEntries(),"column",this.getColumnSearchString(t))},t.prototype.getColumnSearchString=function(t){var e,i,n,o,r,s=null!==(i=null===(e=this.columnParser)||void 0===e?void 0:e.getDisplayValue())&&void 0!==i?i:"",a=ke(s,t,null==(null===(n=this.columnParser)||void 0===n?void 0:n.endPosition)?this.params.expression.length:this.columnParser.endPosition+1),l=(null===(o=this.columnParser)||void 0===o?void 0:o.hasStartChar)&&a.length>0,c=(null===(r=this.columnParser)||void 0===r?void 0:r.hasEndChar)&&a.length===s.length+2;return l?a.slice(1,c?-1:void 0):a},t.prototype.getOperatorAutocompleteListParams=function(t){var e,i,n,o,r,s=null===(e=this.columnParser)||void 0===e?void 0:e.column;if(!s)return{enabled:!1};var a=this.columnParser.baseCellDataType,l=null!=(null===(i=this.operatorParser)||void 0===i?void 0:i.startPosition)&&t<this.operatorParser.startPosition?"":ke(null!==(o=null===(n=this.operatorParser)||void 0===n?void 0:n.getDisplayValue())&&void 0!==o?o:"",t,null==(null===(r=this.operatorParser)||void 0===r?void 0:r.endPosition)?this.params.expression.length:this.operatorParser.endPosition+1);return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getOperatorAutocompleteEntries(s,a),"operator-".concat(a),l)},t.prototype.getBaseCellDataTypeFromOperatorAutocompleteType=function(t){return null==t?void 0:t.replace("operator-","")},t.prototype.hasOperand=function(t,e){var i,n;return!t||!e||(null!==(n=null===(i=this.params.advancedFilterExpressionService.getExpressionOperator(t,e))||void 0===i?void 0:i.numOperands)&&void 0!==n?n:0)>0},t.prototype.doesOperandNeedQuotes=function(t){return"number"!==t},t.prototype.addToListAndGetIndex=function(t,e){var i=t.length;return t.push(e),i},t.COL_START_CHAR="[",t.COL_END_CHAR="]",t}(),Ge=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s};function Be(t,e,i){var n=!1,o=t.toLocaleLowerCase(),r=o+" ",s=Object.entries(e).find((function(t){var e=Ge(t,2);e[0];var s=e[1],a=i(s).toLocaleLowerCase();return a.startsWith(r)&&(n=!0),a===o}));return s?s[0]:n?null:void 0}function Ve(t,e){return(null!=e?e:Object.keys(t)).map((function(e){return{key:e,displayValue:t[e].displayValue}}))}var je,We=function(){function t(t){this.params=t,this.initOperators()}return t.prototype.getEntries=function(t){return Ve(this.operators,t)},t.prototype.findOperator=function(t){return Be(t,this.operators,(function(t){return t.displayValue}))},t.prototype.initOperators=function(){var t=this,e=this.params.translate;this.operators={contains:{displayValue:e("advancedFilterContains"),evaluator:function(e,i,n,o){return t.evaluateExpression(e,i,n,o,!1,(function(t,e){return t.includes(e)}))},numOperands:1},notContains:{displayValue:e("advancedFilterNotContains"),evaluator:function(e,i,n,o){return t.evaluateExpression(e,i,n,o,!0,(function(t,e){return!t.includes(e)}))},numOperands:1},equals:{displayValue:e("advancedFilterTextEquals"),evaluator:function(e,i,n,o){return t.evaluateExpression(e,i,n,o,!1,(function(t,e){return t===e}))},numOperands:1},notEqual:{displayValue:e("advancedFilterTextNotEqual"),evaluator:function(e,i,n,o){return t.evaluateExpression(e,i,n,o,!0,(function(t,e){return t!=e}))},numOperands:1},startsWith:{displayValue:e("advancedFilterStartsWith"),evaluator:function(e,i,n,o){return t.evaluateExpression(e,i,n,o,!1,(function(t,e){return t.startsWith(e)}))},numOperands:1},endsWith:{displayValue:e("advancedFilterEndsWith"),evaluator:function(e,i,n,o){return t.evaluateExpression(e,i,n,o,!1,(function(t,e){return t.endsWith(e)}))},numOperands:1},blank:{displayValue:e("advancedFilterBlank"),evaluator:function(t){return null==t||"string"==typeof t&&0===t.trim().length},numOperands:0},notBlank:{displayValue:e("advancedFilterNotBlank"),evaluator:function(t){return null!=t&&("string"!=typeof t||t.trim().length>0)},numOperands:0}}},t.prototype.evaluateExpression=function(t,e,i,n,o,r){return null==t?o:i.caseSensitive?r(i.valueConverter(t,e),n):r(i.valueConverter(t,e).toLocaleLowerCase(),n.toLocaleLowerCase())},t}(),ze=function(){function t(t){this.params=t,this.initOperators()}return t.prototype.getEntries=function(t){return Ve(this.operators,t)},t.prototype.findOperator=function(t){return Be(t,this.operators,(function(t){return t.displayValue}))},t.prototype.initOperators=function(){var t=this,e=this.params,i=e.translate,n=e.equals;this.operators={equals:{displayValue:i("advancedFilterEquals"),evaluator:function(e,i,o,r){return t.evaluateSingleOperandExpression(e,i,o,r,!!o.includeBlanksInEquals,n)},numOperands:1},notEqual:{displayValue:i("advancedFilterNotEqual"),evaluator:function(e,i,o,r){return t.evaluateSingleOperandExpression(e,i,o,r,!!o.includeBlanksInEquals,(function(t,e){return!n(t,e)}))},numOperands:1},greaterThan:{displayValue:i("advancedFilterGreaterThan"),evaluator:function(e,i,n,o){return t.evaluateSingleOperandExpression(e,i,n,o,!!n.includeBlanksInGreaterThan,(function(t,e){return t>e}))},numOperands:1},greaterThanOrEqual:{displayValue:i("advancedFilterGreaterThanOrEqual"),evaluator:function(e,i,n,o){return t.evaluateSingleOperandExpression(e,i,n,o,!!n.includeBlanksInGreaterThan,(function(t,e){return t>=e}))},numOperands:1},lessThan:{displayValue:i("advancedFilterLessThan"),evaluator:function(e,i,n,o){return t.evaluateSingleOperandExpression(e,i,n,o,!!n.includeBlanksInLessThan,(function(t,e){return t<e}))},numOperands:1},lessThanOrEqual:{displayValue:i("advancedFilterLessThanOrEqual"),evaluator:function(e,i,n,o){return t.evaluateSingleOperandExpression(e,i,n,o,!!n.includeBlanksInLessThan,(function(t,e){return t<=e}))},numOperands:1},blank:{displayValue:i("advancedFilterBlank"),evaluator:function(t){return null==t},numOperands:0},notBlank:{displayValue:i("advancedFilterNotBlank"),evaluator:function(t){return null!=t},numOperands:0}}},t.prototype.evaluateSingleOperandExpression=function(t,e,i,n,o,r){return null==t?o:r(i.valueConverter(t,e),n)},t}(),Ue=function(){function t(t){this.params=t,this.initOperators()}return t.prototype.getEntries=function(t){return Ve(this.operators,t)},t.prototype.findOperator=function(t){return Be(t,this.operators,(function(t){return t.displayValue}))},t.prototype.initOperators=function(){var t=this.params.translate;this.operators={true:{displayValue:t("advancedFilterTrue"),evaluator:function(t){return!!t},numOperands:0},false:{displayValue:t("advancedFilterFalse"),evaluator:function(t){return!1===t},numOperands:0},blank:{displayValue:t("advancedFilterBlank"),evaluator:function(t){return null==t},numOperands:0},notBlank:{displayValue:t("advancedFilterNotBlank"),evaluator:function(t){return null!=t},numOperands:0}}},t}(),He=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ke=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ye=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},Xe=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.columnNameToIdMap={},e.columnAutocompleteEntries=null,e.expressionEvaluatorParams={},e}return He(i,t),i.prototype.postConstruct=function(){this.expressionJoinOperators=this.generateExpressionJoinOperators(),this.expressionOperators=this.generateExpressionOperators()},i.prototype.parseJoinOperator=function(t){var e,i=t.type;return null!==(e=this.expressionJoinOperators[i])&&void 0!==e?e:i},i.prototype.getColumnDisplayValue=function(t){var e,i=t.colId,n=this.getColumnAutocompleteEntries().find((function(t){return t.key===i}));return n?(e=n.displayValue,this.columnNameToIdMap[e.toLocaleUpperCase()]={colId:i,columnName:e}):e=i,e},i.prototype.getOperatorDisplayValue=function(t){var e,i;return null!==(i=null===(e=this.getExpressionOperator(t.filterType,t.type))||void 0===e?void 0:e.displayValue)&&void 0!==i?i:t.type},i.prototype.getOperandModelValue=function(t,e,i){var n;switch(e){case"number":return c.exists(t)?Number(t):null;case"date":return c.serialiseDate(this.valueParserService.parseValue(i,null,t,void 0),!1);case"dateString":var o=this.valueParserService.parseValue(i,null,t,void 0);return c.serialiseDate(null!==(n=this.dataTypeService.getDateParserFunction()(o))&&void 0!==n?n:null,!1)}return t},i.prototype.getOperandDisplayValue=function(t,e){var i,n,o=t,r=o.colId,s=o.filter,a=this.columnModel.getPrimaryColumn(r),l="";if(null!=s){var d=void 0;switch(t.filterType){case"number":d=null!==(i=c.toStringOrNull(s))&&void 0!==i?i:"";break;case"date":var u=c.parseDateTimeFromString(s);d=a?this.valueFormatterService.formatValue(a,null,u):null;break;case"dateString":var h=c.parseDateTimeFromString(s),p=a?this.dataTypeService.getDateFormatterFunction()(null!=h?h:void 0):null;d=a?this.valueFormatterService.formatValue(a,null,p):null}"number"!==t.filterType&&(d=null!==(n=null!=d?d:c.toStringOrNull(s))&&void 0!==n?n:"",e||(d='"'.concat(d,'"'))),l=e?d:" ".concat(d)}return l},i.prototype.parseColumnFilterModel=function(t){var e,i,n=null!==(e=this.getColumnDisplayValue(t))&&void 0!==e?e:"",o=null!==(i=this.getOperatorDisplayValue(t))&&void 0!==i?i:"",r=this.getOperandDisplayValue(t);return"[".concat(n,"] ").concat(o).concat(r)},i.prototype.updateAutocompleteCache=function(t,e){if("column"===e){var i=t.key,n=t.displayValue;this.columnNameToIdMap[t.displayValue.toLocaleUpperCase()]={colId:i,columnName:n}}},i.prototype.translate=function(t,e){var i=Te[t];return"function"==typeof i&&(i=i(e)),this.localeService.getLocaleTextFunc()(t,i,e)},i.prototype.generateAutocompleteListParams=function(t,e,i){return{enabled:!0,type:e,searchString:i,entries:t}},i.prototype.getColumnAutocompleteEntries=function(){var t,e=this;if(this.columnAutocompleteEntries)return this.columnAutocompleteEntries;var i=null!==(t=this.columnModel.getAllPrimaryColumns())&&void 0!==t?t:[],n=[],o=this.gridOptionsService.get("includeHiddenColumnsInAdvancedFilter");return i.forEach((function(t){t.getColDef().filter&&(o||t.isVisible()||t.isRowGroupActive())&&n.push({key:t.getColId(),displayValue:e.columnModel.getDisplayNameForColumn(t,"advancedFilter")})})),n.sort((function(t,e){var i,n,o=null!==(i=t.displayValue)&&void 0!==i?i:"",r=null!==(n=e.displayValue)&&void 0!==n?n:"";return o<r?-1:r>o?1:0})),n},i.prototype.getOperatorAutocompleteEntries=function(t,e){var i=this.getActiveOperators(t);return this.getDataTypeExpressionOperator(e).getEntries(i)},i.prototype.getJoinOperatorAutocompleteEntries=function(){return Object.entries(this.expressionJoinOperators).map((function(t){var e=Ye(t,2);return{key:e[0],displayValue:e[1]}}))},i.prototype.getDefaultAutocompleteListParams=function(t){return this.generateAutocompleteListParams(this.getColumnAutocompleteEntries(),"column",t)},i.prototype.getDataTypeExpressionOperator=function(t){return this.expressionOperators[t]},i.prototype.getExpressionOperator=function(t,e){var i,n;return null===(n=null===(i=this.getDataTypeExpressionOperator(t))||void 0===i?void 0:i.operators)||void 0===n?void 0:n[e]},i.prototype.getExpressionJoinOperators=function(){return this.expressionJoinOperators},i.prototype.getColId=function(t){var e=t.toLocaleUpperCase(),i=this.columnNameToIdMap[e];if(i)return i;var n=this.getColumnAutocompleteEntries().find((function(t){return t.displayValue.toLocaleUpperCase()===e}));if(n){var o={colId:n.key,columnName:n.displayValue};return this.columnNameToIdMap[e]=o,o}return null},i.prototype.getExpressionEvaluatorParams=function(t){var e=this,i=this.expressionEvaluatorParams[t];if(i)return i;var n=this.columnModel.getPrimaryColumn(t);if(!n)return{valueConverter:function(t){return t}};switch(this.dataTypeService.getBaseDataType(n)){case"dateString":i={valueConverter:this.dataTypeService.getDateParserFunction()};break;case"object":i=n.getColDef().filterValueGetter?{valueConverter:function(t){return t}}:{valueConverter:function(t,i){var o;return null!==(o=e.valueFormatterService.formatValue(n,i,t))&&void 0!==o?o:"function"==typeof t.toString?t.toString():""}};break;case"text":case void 0:i={valueConverter:function(t){return c.toStringOrNull(t)}};break;default:i={valueConverter:function(t){return t}}}var o=n.getColDef().filterParams;return o&&["caseSensitive","includeBlanksInEquals","includeBlanksInLessThan","includeBlanksInGreaterThan"].forEach((function(t){var e=o[t];e&&(i[t]=e)})),this.expressionEvaluatorParams[t]=i,i},i.prototype.getColumnDetails=function(t){var e,i,n=null!==(e=this.columnModel.getPrimaryColumn(t))&&void 0!==e?e:void 0;return{column:n,baseCellDataType:null!==(i=n?this.dataTypeService.getBaseDataType(n):void 0)&&void 0!==i?i:"text"}},i.prototype.generateExpressionOperators=function(){var t=this,e=function(e,i){return t.translate(e,i)};return{text:new We({translate:e}),boolean:new Ue({translate:e}),object:new We({translate:e}),number:new ze({translate:e,equals:function(t,e){return t===e}}),date:new ze({translate:e,equals:function(t,e){return t.getTime()===e.getTime()}}),dateString:new ze({translate:e,equals:function(t,e){return t.getTime()===e.getTime()}})}},i.prototype.getColumnValue=function(t){var e=t.displayValue;return"".concat(_e.COL_START_CHAR).concat(e).concat(_e.COL_END_CHAR)},i.prototype.generateExpressionJoinOperators=function(){return{AND:this.translate("advancedFilterAnd"),OR:this.translate("advancedFilterOr")}},i.prototype.getActiveOperators=function(t){var e,i=null===(e=t.getColDef().filterParams)||void 0===e?void 0:e.filterOptions;if(i)return i.every((function(t){return"string"==typeof t}))?i:void 0},i.prototype.resetColumnCaches=function(){this.columnAutocompleteEntries=null,this.columnNameToIdMap={},this.expressionEvaluatorParams={}},Ke([n("valueFormatterService")],i.prototype,"valueFormatterService",void 0),Ke([n("valueParserService")],i.prototype,"valueParserService",void 0),Ke([n("columnModel")],i.prototype,"columnModel",void 0),Ke([n("dataTypeService")],i.prototype,"dataTypeService",void 0),Ke([r],i.prototype,"postConstruct",null),i=Ke([e("advancedFilterExpressionService")],i)}(i),qe=function(){function t(t){this.params=t,this.operators=[],this.operatorStartPositions=[],this.operatorEndPositions=[],this.activeOperator=0,this.validationError=null}return t.prototype.parseExpression=function(t){this.operators.push(""),this.operatorStartPositions.push(t),this.operatorEndPositions.push(void 0);for(var e=this.params.expression;t<e.length;){var i=e[t];if(" "===i){if(this.parseOperator(t-1))return this.activeOperator++,t-1;this.operators[this.activeOperator]+=i}else this.operators[this.activeOperator]+=i;t++}return this.parseOperator(t-1),t},t.prototype.isValid=function(){return!(this.validationError||this.operators.length&&!this.parsedOperator)},t.prototype.getValidationError=function(){return this.validationError},t.prototype.getFunction=function(){return"OR"===this.parsedOperator?"||":"&&"},t.prototype.getModel=function(){return"OR"===this.parsedOperator?"OR":"AND"},t.prototype.getAutocompleteListParams=function(t,e){var i,n=this;if(null==e)i="";else{var o=this.operators[e],r=this.operatorEndPositions[e];i=ke(o,t,null==r?this.params.expression.length:r+1)}var s=this.params.advancedFilterExpressionService.getJoinOperatorAutocompleteEntries();return(e||null==e&&this.activeOperator)&&(s=s.filter((function(t){return t.key===n.parsedOperator}))),this.params.advancedFilterExpressionService.generateAutocompleteListParams(s,"join",i)},t.prototype.updateExpression=function(t,e,i){var n,o,r=this.params.expression,s=null!==(n=e.displayValue)&&void 0!==n?n:e.key;if(0===i)for(var a=this.operatorEndPositions.length-1;a>0;a--){var l=this.operatorEndPositions[a];null!=l&&(r=Me(r,this.operatorStartPositions[a],l,s).updatedValue)}return Me(r,this.operatorStartPositions.length>i?this.operatorStartPositions[i]:t,null!==(o=this.operatorEndPositions.length>i?this.operatorEndPositions[i]:void 0)&&void 0!==o?o:Re(r,t,!0).endPosition,s,!0)},t.prototype.getNumOperators=function(){return this.operators.length},t.prototype.getLastOperatorEndPosition=function(){return this.operatorEndPositions[this.operatorEndPositions.length-1]},t.prototype.parseOperator=function(t){var e=this.operators.length>this.activeOperator?this.operators[this.activeOperator]:"",i=this.params.advancedFilterExpressionService.getExpressionJoinOperators(),n=Be(e,i,(function(t){return t}));if(n){this.operatorEndPositions[this.activeOperator]=t;var o=i[n];if(this.activeOperator){if(n!==this.parsedOperator)return this.validationError||(this.validationError={message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationJoinOperatorMismatch"),startPosition:t-e.length+1,endPosition:t}),!1}else this.parsedOperator=n;return e!==o&&(Pe(this.params,e,o,t),this.operators[this.activeOperator]=o),!0}return null!==n&&(this.validationError||(this.validationError={message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidJoinOperator"),startPosition:t-e.length+1,endPosition:t}),!0)},t}(),$e=function(){function t(t,e){this.params=t,this.startPosition=e,this.expectingExpression=!0,this.expectingOperator=!1,this.expressionParsers=[],this.operatorParser=new qe(this.params),this.missingEndBracket=!1,this.extraEndBracket=!1}return t.prototype.parseExpression=function(){for(var e=this.startPosition,i=this.params.expression;e<i.length;){var n=i[e];if("("!==n||this.expectingOperator){if(")"===n)return this.endPosition=e-1,0===this.startPosition&&(this.extraEndBracket=!0),e;if(" "===n);else if(this.expectingExpression){e=(o=new _e(this.params,e)).parseExpression(),this.expressionParsers.push(o),this.expectingExpression=!1,this.expectingOperator=!0}else this.expectingOperator&&(e=this.operatorParser.parseExpression(e),this.expectingOperator=!1,this.expectingExpression=!0)}else{var o;e=(o=new t(this.params,e+1)).parseExpression(),this.expressionParsers.push(o),this.expectingExpression=!1,this.expectingOperator=!0}e++}return this.startPosition>0&&(this.missingEndBracket=!0),e},t.prototype.isValid=function(){return!this.missingEndBracket&&!this.extraEndBracket&&this.expressionParsers.length===this.operatorParser.getNumOperators()+1&&this.operatorParser.isValid()&&this.expressionParsers.every((function(t){return t.isValid()}))},t.prototype.getValidationError=function(){for(var t,e=this.operatorParser.getValidationError(),i=0;i<this.expressionParsers.length;i++){var n=this.expressionParsers[i].getValidationError();if(n)return e&&e.startPosition<n.startPosition?e:n}return e||(this.extraEndBracket?{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationExtraEndBracket"),startPosition:this.endPosition+1,endPosition:this.endPosition+1}:(this.expressionParsers.length===this.operatorParser.getNumOperators()?t="advancedFilterValidationMissingCondition":this.missingEndBracket&&(t="advancedFilterValidationMissingEndBracket"),t?{message:this.params.advancedFilterExpressionService.translate(t),startPosition:this.params.expression.length,endPosition:this.params.expression.length}:null))},t.prototype.getFunction=function(t){var e=this.expressionParsers.length>1,i=this.expressionParsers.map((function(e){return e.getFunction(t)})).join(" ".concat(this.operatorParser.getFunction()," "));return e?"(".concat(i,")"):i},t.prototype.getAutocompleteListParams=function(t){if(!(null!=this.endPosition&&t>this.endPosition+1)){if(!this.expressionParsers.length)return this.getColumnAutocompleteListParams();var e=this.getExpressionParserIndex(t);if(null==e)return"("===this.params.expression[t]?{enabled:!1}:this.getColumnAutocompleteListParams();var i=this.expressionParsers[e].getAutocompleteListParams(t);if(!i){if(e<this.expressionParsers.length-1)return this.operatorParser.getAutocompleteListParams(t,e);if(this.expressionParsers.length===this.operatorParser.getNumOperators()){var n=this.operatorParser.getLastOperatorEndPosition();return null==n||t<=n+1?this.operatorParser.getAutocompleteListParams(t,this.operatorParser.getNumOperators()-1):this.getColumnAutocompleteListParams()}return")"===this.params.expression[t-1]?{enabled:!1}:this.operatorParser.getAutocompleteListParams(t)}return i}},t.prototype.updateExpression=function(t,e,i){var n,o=this.params.expression,r=this.getExpressionParserIndex(t);if(null==r){var s="column"===i?this.params.advancedFilterExpressionService.getColumnValue(e):null!==(n=e.displayValue)&&void 0!==n?n:e.key;return Me(o,this.startPosition,this.startPosition,s,!0)}var a=this.expressionParsers[r].updateExpression(t,e,i);return null==a?"column"===i?Me(o,t,o.length-1,this.params.advancedFilterExpressionService.getColumnValue(e),!0):null!=this.endPosition&&t>this.endPosition+1?null:this.operatorParser.updateExpression(t,e,r):a},t.prototype.getModel=function(){return this.expressionParsers.length>1?{filterType:"join",type:this.operatorParser.getModel(),conditions:this.expressionParsers.map((function(t){return t.getModel()}))}:this.expressionParsers[0].getModel()},t.prototype.getColumnAutocompleteListParams=function(){return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getColumnAutocompleteEntries(),"column","")},t.prototype.getExpressionParserIndex=function(t){for(var e,i=0;i<this.expressionParsers.length;i++){if(this.expressionParsers[i].startPosition>t)break;e=i}return e},t}(),Ze=function(){function t(t){this.params=t,this.valid=!1}return t.prototype.parseExpression=function(){this.joinExpressionParser=new $e(this.params,0);var t=this.joinExpressionParser.parseExpression();return this.valid=t>=this.params.expression.length-1&&this.joinExpressionParser.isValid(),this.params.expression},t.prototype.isValid=function(){return this.valid},t.prototype.getValidationMessage=function(){var t=this.joinExpressionParser.getValidationError();if(!t)return null;var e=t.message,i=t.startPosition,n=t.endPosition;return i<this.params.expression.length?this.params.advancedFilterExpressionService.translate("advancedFilterValidationMessage",[e,this.params.expression.slice(i,n+1).trim()]):this.params.advancedFilterExpressionService.translate("advancedFilterValidationMessageAtEnd",[e])},t.prototype.getFunction=function(){var t={operands:[],operators:[],evaluatorParams:[]};return{functionBody:"return ".concat(this.joinExpressionParser.getFunction(t),";"),params:t}},t.prototype.getAutocompleteListParams=function(t){var e;return null!==(e=this.joinExpressionParser.getAutocompleteListParams(t))&&void 0!==e?e:{enabled:!1}},t.prototype.updateExpression=function(t,e,i){return this.joinExpressionParser.updateExpression(t,e,i)},t.prototype.getModel=function(){return this.isValid()?this.joinExpressionParser.getModel():null},t}(),Je=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Qe=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ti=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.appliedExpression=null,e.expression=null,e.isValid=!0,e}return Je(i,t),i.prototype.postConstruct=function(){var t=this;this.setEnabled(this.gridOptionsService.get("enableAdvancedFilter"),!0),this.ctrl=this.createManagedBean(new Ee(this.enabled)),this.expressionProxy={getValue:function(e,i){var n=t.columnModel.getPrimaryColumn(e);return n?t.valueService.getValue(n,i,!0):void 0}},this.addManagedPropertyListener("enableAdvancedFilter",(function(e){return t.setEnabled(!!e.currentValue)})),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,(function(e){return t.onNewColumnsLoaded(e)})),this.addManagedPropertyListener("includeHiddenColumnsInAdvancedFilter",(function(){return t.updateValidity()}))},i.prototype.isEnabled=function(){return this.enabled},i.prototype.isFilterPresent=function(){return!!this.expressionFunction},i.prototype.doesFilterPass=function(t){return this.expressionFunction(this.expressionProxy,t,this.expressionParams)},i.prototype.getModel=function(){var t,e=this.createExpressionParser(this.appliedExpression);return null==e||e.parseExpression(),null!==(t=null==e?void 0:e.getModel())&&void 0!==t?t:null},i.prototype.setModel=function(t){var e=this,i=function(t,n){if("join"===t.filterType){var o=e.advancedFilterExpressionService.parseJoinOperator(t),r=t.conditions.map((function(t){return i(t)})).filter((function(t){return c.exists(t)})).join(" ".concat(o," "));return n||t.conditions.length<=1?r:"(".concat(r,")")}return e.advancedFilterExpressionService.parseColumnFilterModel(t)},n=t?i(t,!0):null;this.setExpressionDisplayValue(n),this.applyExpression(),this.ctrl.refreshComp(),this.ctrl.refreshBuilderComp()},i.prototype.getExpressionDisplayValue=function(){return this.expression},i.prototype.setExpressionDisplayValue=function(t){this.expression=t},i.prototype.isCurrentExpressionApplied=function(){return this.appliedExpression===this.expression},i.prototype.createExpressionParser=function(t){return t?new Ze({expression:t,columnModel:this.columnModel,dataTypeService:this.dataTypeService,valueParserService:this.valueParserService,advancedFilterExpressionService:this.advancedFilterExpressionService}):null},i.prototype.getDefaultExpression=function(t){var e=this.advancedFilterExpressionService.getColumnValue(t)+" ";return{updatedValue:e,updatedPosition:e.length}},i.prototype.isHeaderActive=function(){return!this.gridOptionsService.get("advancedFilterParent")},i.prototype.getCtrl=function(){return this.ctrl},i.prototype.setEnabled=function(t,e){var i=this.enabled,n=this.rowModel.getType(),o="clientSide"===n||"serverSide"===n;if(t&&!n&&c.warnOnce("Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model."),this.enabled=t&&o,!e&&this.enabled!==i){var r={type:l.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,enabled:this.enabled};this.eventService.dispatchEvent(r)}},i.prototype.applyExpression=function(){var t=this.createExpressionParser(this.expression);null==t||t.parseExpression(),this.applyExpressionFromParser(t)},i.prototype.applyExpressionFromParser=function(t){if(this.isValid=!t||t.isValid(),!t||!this.isValid)return this.expressionFunction=null,this.expressionParams=null,void(this.appliedExpression=null);var e=t.getFunction(),i=e.functionBody,n=e.params;this.expressionFunction=new Function("expressionProxy","node","params",i),this.expressionParams=n,this.appliedExpression=this.expression},i.prototype.updateValidity=function(){this.advancedFilterExpressionService.resetColumnCaches();var t=this.createExpressionParser(this.expression);null==t||t.parseExpression();var e=(!t||t.isValid())!==this.isValid;return this.applyExpressionFromParser(t),this.ctrl.refreshComp(),this.ctrl.refreshBuilderComp(),e},i.prototype.onNewColumnsLoaded=function(t){var e=this;if("gridInitializing"===t.source&&this.dataTypeService.isPendingInference()){this.ctrl.setInputDisabled(!0);var i=this.addManagedListener(this.eventService,l.EVENT_DATA_TYPES_INFERRED,(function(){null==i||i(),e.ctrl.setInputDisabled(!1)}))}},Qe([n("valueService")],i.prototype,"valueService",void 0),Qe([n("columnModel")],i.prototype,"columnModel",void 0),Qe([n("dataTypeService")],i.prototype,"dataTypeService",void 0),Qe([n("valueParserService")],i.prototype,"valueParserService",void 0),Qe([n("rowModel")],i.prototype,"rowModel",void 0),Qe([n("advancedFilterExpressionService")],i.prototype,"advancedFilterExpressionService",void 0),Qe([r],i.prototype,"postConstruct",null),i=Qe([e("advancedFilterService")],i)}(i),ei={version:"31.0.1",moduleName:a.AdvancedFilterModule,beans:[ti,Xe],agStackComponents:[{componentName:"agAdvancedFilter",componentClass:Ae}],dependantModules:[Ft]},ii=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ni=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},oi=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},ri=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},si=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(t){t[t.CellRange=0]="CellRange",t[t.SelectedRows=1]="SelectedRows",t[t.FocusedCell=2]="FocusedCell"}(je||(je={}));var ai,li=function(t){return"AG Grid: Unable to use the Clipboard API (navigator.clipboard.".concat(t,"()). ")+"The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API."},ci=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.lastPasteOperationTime=0,e.navigatorApiFailed=!1,e}var o;return ii(i,t),o=i,i.prototype.init=function(){var t=this;this.logger=this.loggerFactory.create("ClipboardService"),"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady((function(e){t.gridCtrl=e.gridCtrl}))},i.prototype.pasteFromClipboard=function(){var t=this;this.logger.log("pasteFromClipboard"),!this.gridOptionsService.get("suppressClipboardApi")&&!this.navigatorApiFailed&&navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(this.processClipboardData.bind(this)).catch((function(e){c.doOnce((function(){console.warn(e),console.warn(li("readText"))}),"clipboardApiError"),t.navigatorApiFailed=!0,t.pasteFromClipboardLegacy()})):this.pasteFromClipboardLegacy()},i.prototype.pasteFromClipboardLegacy=function(){var t=this,e=!1,i=function(i){var n=(new Date).getTime();n-t.lastPasteOperationTime<50&&(e=!0,i.preventDefault()),t.lastPasteOperationTime=n};this.executeOnTempElement((function(t){t.addEventListener("paste",i),t.focus({preventScroll:!0})}),(function(n){var o=n.value;e?t.refocusLastFocusedCell():t.processClipboardData(o),n.removeEventListener("paste",i)}))},i.prototype.refocusLastFocusedCell=function(){var t=this.focusService.getFocusedCell();t&&this.focusService.setFocusedCell({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0})},i.prototype.getClipboardDelimiter=function(){var t=this.gridOptionsService.get("clipboardDelimiter");return c.exists(t)?t:"\t"},i.prototype.processClipboardData=function(t){var e=this;if(null!=t){var i=o.stringToArray(t,this.getClipboardDelimiter()),n=this.gridOptionsService.getCallback("processDataFromClipboard");if(n&&(i=n({data:i})),null!=i){this.gridOptionsService.get("suppressLastEmptyLineOnPaste")&&this.removeLastLineIfBlank(i);this.doPasteOperation((function(t,n,o,r){e.rangeService&&e.rangeService.isMoreThanOneCell()&&!e.hasOnlyOneValueToPaste(i)?e.pasteIntoActiveRange(i,t,n,r):e.pasteStartingFromFocusedCell(i,t,n,o,r)}))}}},i.stringToArray=function(t,e){void 0===e&&(e=",");var i=[],n=function(t){return"\r"===t||"\n"===t},o=!1;if(""===t)return[[""]];for(var r,s,a,l=function(l,c,d){var u=t[d-1],h=t[d],p=t[d+1],f=function(){i[l]||(i[l]=[]),i[l][c]||(i[l][c]="")};if(f(),'"'===h&&(o?'"'===p?(i[l][c]+='"',d++):o=!1:(void 0===u||u===e||n(u))&&(o=!0)),!o&&'"'!==h){if(h===e)return c++,f(),r=l,s=c,a=d,"continue";if(n(h))return c=0,l++,f(),"\r"===h&&"\n"===p&&d++,r=l,s=c,a=d,"continue"}i[l][c]+=h,r=l,s=c,a=d},c=0,d=0,u=0;u<t.length;u++)l(c,d,u),c=r,d=s,u=a;return i},i.prototype.doPasteOperation=function(t){var e,i=this.gridOptionsService.api,n=this.gridOptionsService.columnApi;if(this.eventService.dispatchEvent({type:l.EVENT_PASTE_START,api:i,columnApi:n,source:"clipboard"}),this.clientSideRowModel){var o=this.gridOptionsService.get("aggregateOnlyChangedColumns");e=new w(o,this.clientSideRowModel.getRootNode())}var r={},s=[];t(r,s,this.focusService.getFocusedCell(),e);var a=ri([],oi(s),!1);e&&(this.clientSideRowModel.doAggregate(e),e.forEachChangedNodeDepthFirst((function(t){a.push(t)}))),this.rowRenderer.refreshCells({rowNodes:a}),this.dispatchFlashCells(r),this.fireRowChanged(s),this.refocusLastFocusedCell();var c={type:l.EVENT_PASTE_END,source:"clipboard"};this.eventService.dispatchEvent(c)},i.prototype.pasteIntoActiveRange=function(t,e,i,n){var o=this,r=this.getRangeSize()%t.length!=0,s=0,a=0;this.iterateActiveRanges(!1,(function(l,c,d,u){if(u-s>=t.length){if(r)return;s+=a,a=0}var h=t[u-s];i.push(c);var p=o.gridOptionsService.getCallback("processCellFromClipboard");d.forEach((function(t,i){if(t.isCellEditable(c)&&!t.isSuppressPaste(c)){i>=h.length&&(i%=h.length);var r=o.processCell(c,t,h[i],"dragCopy",p,!0);c.setDataValue(t,r,"paste"),n&&n.addParentNode(c.parent,[t]);var s=l.rowIndex,a=l.rowPinned,d=o.cellPositionUtils.createIdFromValues({rowIndex:s,column:t,rowPinned:a});e[d]=!0}})),a++}))},i.prototype.pasteStartingFromFocusedCell=function(t,e,i,n,o){if(n){var r={rowIndex:n.rowIndex,rowPinned:n.rowPinned},s=this.columnModel.getDisplayedColumnsStartingAt(n.column);this.isPasteSingleValueIntoRange(t)?this.pasteSingleValueIntoRange(t,i,e,o):this.pasteMultipleValues(t,r,i,s,e,"clipboard",o)}},i.prototype.isPasteSingleValueIntoRange=function(t){return this.hasOnlyOneValueToPaste(t)&&null!=this.rangeService&&!this.rangeService.isEmpty()},i.prototype.pasteSingleValueIntoRange=function(t,e,i,n){var o=this,r=t[0][0];this.iterateActiveRanges(!1,(function(t,s,a){e.push(s),a.forEach((function(t){return o.updateCellValue(s,t,r,i,"clipboard",n)}))}))},i.prototype.hasOnlyOneValueToPaste=function(t){return 1===t.length&&1===t[0].length},i.prototype.copyRangeDown=function(){var t=this;if(this.rangeService&&!this.rangeService.isEmpty()){var e=[];this.doPasteOperation((function(i,n,o,r){var s=t.gridOptionsService.getCallback("processCellForClipboard"),a=t.gridOptionsService.getCallback("processCellFromClipboard");t.iterateActiveRanges(!0,(function(o,l,c){e.length?(n.push(l),c.forEach((function(n,s){if(n.isCellEditable(l)&&!n.isSuppressPaste(l)){var c=t.processCell(l,n,e[s],"dragCopy",a,!0);l.setDataValue(n,c,"paste"),r&&r.addParentNode(l.parent,[n]);var d=o.rowIndex,u=o.rowPinned,h=t.cellPositionUtils.createIdFromValues({rowIndex:d,column:n,rowPinned:u});i[h]=!0}}))):c.forEach((function(i){var n=t.processCell(l,i,t.valueService.getValue(i,l),"dragCopy",s,!1,!0);e.push(n)}))}))}))}},i.prototype.removeLastLineIfBlank=function(t){var e=c.last(t);if(e&&1===e.length&&""===e[0]){if(1===t.length)return;c.removeFromArray(t,e)}},i.prototype.fireRowChanged=function(t){var e=this;"fullRow"===this.gridOptionsService.get("editType")&&t.forEach((function(t){var i={type:l.EVENT_ROW_VALUE_CHANGED,node:t,data:t.data,rowIndex:t.rowIndex,rowPinned:t.rowPinned};e.eventService.dispatchEvent(i)}))},i.prototype.pasteMultipleValues=function(t,e,i,n,o,r,s){var a=this,l=e,c=null!=this.clientSideRowModel&&!this.gridOptionsService.get("enableGroupEdit")&&!this.gridOptionsService.get("treeData");t.forEach((function(t){var e=function(){for(;;){if(!l)return null;var t=a.rowPositionUtils.getRowNode(l);if(l=a.cellNavigationService.getRowBelow({rowPinned:l.rowPinned,rowIndex:l.rowIndex}),null==t)return null;if(!(t.detail||t.footer||c&&t.group))return t}}();e&&(t.forEach((function(t,i){return a.updateCellValue(e,n[i],t,o,r,s)})),i.push(e))}))},i.prototype.updateCellValue=function(t,e,i,n,o,r){if(t&&e&&e.isCellEditable(t)&&!e.isSuppressPaste(t)&&(!t.group||!e.isValueActive())){var s=this.processCell(t,e,i,o,this.gridOptionsService.getCallback("processCellFromClipboard"),!0);t.setDataValue(e,s,"paste");var a=t.rowIndex,l=t.rowPinned;n[this.cellPositionUtils.createIdFromValues({rowIndex:a,column:e,rowPinned:l})]=!0,r&&r.addParentNode(t.parent,[e])}},i.prototype.copyToClipboard=function(t){void 0===t&&(t={}),this.copyOrCutToClipboard(t)},i.prototype.cutToClipboard=function(t,e){if(void 0===t&&(t={}),void 0===e&&(e="api"),!this.gridOptionsService.get("suppressCutToClipboard")){var i={type:l.EVENT_CUT_START,source:e};this.eventService.dispatchEvent(i),this.copyOrCutToClipboard(t,!0);var n={type:l.EVENT_CUT_END,source:e};this.eventService.dispatchEvent(n)}},i.prototype.copyOrCutToClipboard=function(t,e){var i=t.includeHeaders,n=t.includeGroupHeaders;this.logger.log("copyToClipboard: includeHeaders = ".concat(i)),null==i&&(i=this.gridOptionsService.get("copyHeadersToClipboard")),null==n&&(n=this.gridOptionsService.get("copyGroupHeadersToClipboard"));var o={includeHeaders:i,includeGroupHeaders:n},r=!this.gridOptionsService.get("suppressCopyRowsToClipboard"),s=null;!this.rangeService||this.rangeService.isEmpty()||this.shouldSkipSingleCellRange()?r&&!this.selectionService.isEmpty()?(this.copySelectedRowsToClipboard(o),s=je.SelectedRows):this.focusService.isAnyCellFocused()&&(this.copyFocusedCellToClipboard(o),s=je.FocusedCell):(this.copySelectedRangeToClipboard(o),s=je.CellRange),e&&null!==s&&this.clearCellsAfterCopy(s)},i.prototype.clearCellsAfterCopy=function(t){if(this.eventService.dispatchEvent({type:l.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),t===je.CellRange)this.rangeService.clearCellRangeCellValues({cellEventSource:"clipboardService"});else if(t===je.SelectedRows)this.clearSelectedRows();else{var e=this.focusService.getFocusedCell();if(null==e)return;var i=this.rowPositionUtils.getRowNode(e);i&&this.clearCellValue(i,e.column)}this.eventService.dispatchEvent({type:l.EVENT_KEY_SHORTCUT_CHANGED_CELL_END})},i.prototype.clearSelectedRows=function(){var t,e,i,n,o=this.selectionService.getSelectedNodes(),r=this.columnModel.getAllDisplayedColumns();try{for(var s=si(o),a=s.next();!a.done;a=s.next()){var l=a.value;try{for(var c=(i=void 0,si(r)),d=c.next();!d.done;d=c.next()){var u=d.value;this.clearCellValue(l,u)}}catch(t){i={error:t}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(i)throw i.error}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}},i.prototype.clearCellValue=function(t,e){e.isCellEditable(t)&&t.setDataValue(e,null,"clipboardService")},i.prototype.shouldSkipSingleCellRange=function(){return this.gridOptionsService.get("suppressCopySingleCellRanges")&&!this.rangeService.isMoreThanOneCell()},i.prototype.iterateActiveRanges=function(t,e,i){var n=this;if(this.rangeService&&!this.rangeService.isEmpty()){var o=this.rangeService.getCellRanges();t?this.iterateActiveRange(o[0],e,i,!0):o.forEach((function(t,r){return n.iterateActiveRange(t,e,i,r===o.length-1)}))}},i.prototype.iterateActiveRange=function(t,e,i,n){if(this.rangeService){var o=this.rangeService.getRangeStartRow(t),r=this.rangeService.getRangeEndRow(t);i&&t.columns&&i(t.columns);for(var s=0,a=!1;!a&&null!=o;){var l=this.rowPositionUtils.getRowNode(o);a=this.rowPositionUtils.sameRow(o,r),e(o,l,t.columns,s++,a&&n),o=this.cellNavigationService.getRowBelow(o)}}},i.prototype.copySelectedRangeToClipboard=function(t){if(void 0===t&&(t={}),this.rangeService&&!this.rangeService.isEmpty()){var e=this.rangeService.areAllRangesAbleToMerge()?this.buildDataFromMergedRanges(t):this.buildDataFromRanges(t),i=e.data,n=e.cellsToFlash;this.copyDataToClipboard(i),this.dispatchFlashCells(n)}},i.prototype.buildDataFromMergedRanges=function(t){var e=this,i=new Set,n=this.rangeService.getCellRanges(),o=new Map,r=[],s={};n.forEach((function(t){t.columns.forEach((function(t){return i.add(t)}));var n=e.getRangeRowPositionsAndCellsToFlash(t),a=n.rowPositions,l=n.cellsToFlash;a.forEach((function(t){var e="".concat(t.rowIndex,"-").concat(t.rowPinned||"null");o.get(e)||(o.set(e,!0),r.push(t))})),Object.assign(s,l)}));var a=this.columnModel.getAllDisplayedColumns(),l=Array.from(i);return l.sort((function(t,e){return a.indexOf(t)-a.indexOf(e)})),{data:this.buildExportParams({columns:l,rowPositions:r,includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders}),cellsToFlash:s}},i.prototype.buildDataFromRanges=function(t){var e=this,i=this.rangeService.getCellRanges(),n=[],o={};return i.forEach((function(i){var r=e.getRangeRowPositionsAndCellsToFlash(i),s=r.rowPositions,a=r.cellsToFlash;Object.assign(o,a),n.push(e.buildExportParams({columns:i.columns,rowPositions:s,includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders}))})),{data:n.join("\n"),cellsToFlash:o}},i.prototype.getRangeRowPositionsAndCellsToFlash=function(t){for(var e=this,i=[],n={},o=this.rangeService.getRangeStartRow(t),r=this.rangeService.getRangeEndRow(t),s=o;s&&(i.push(s),t.columns.forEach((function(t){var i=s,o=i.rowIndex,r=i.rowPinned,a=e.cellPositionUtils.createIdFromValues({rowIndex:o,column:t,rowPinned:r});n[a]=!0})),!this.rowPositionUtils.sameRow(s,r));)s=this.cellNavigationService.getRowBelow(s);return{rowPositions:i,cellsToFlash:n}},i.prototype.copyFocusedCellToClipboard=function(t){var e;void 0===t&&(t={});var i=this.focusService.getFocusedCell();if(null!=i){var n=this.cellPositionUtils.createId(i),o={rowPinned:i.rowPinned,rowIndex:i.rowIndex},r=i.column,s=this.buildExportParams({columns:[r],rowPositions:[o],includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders});this.copyDataToClipboard(s),this.dispatchFlashCells(((e={})[n]=!0,e))}},i.prototype.copySelectedRowsToClipboard=function(t){void 0===t&&(t={});var e=t.columnKeys,i=t.includeHeaders,n=t.includeGroupHeaders,o=this.buildExportParams({columns:e,includeHeaders:i,includeGroupHeaders:n});this.copyDataToClipboard(o)},i.prototype.buildExportParams=function(t){var e=this,i=t.columns,n=t.rowPositions,o=t.includeHeaders,r=void 0!==o&&o,s=t.includeGroupHeaders,a={columnKeys:i,rowPositions:n,skipColumnHeaders:!r,skipColumnGroupHeaders:!(void 0!==s&&s),suppressQuotes:!0,columnSeparator:this.getClipboardDelimiter(),onlySelected:!n,processCellCallback:this.gridOptionsService.getCallback("processCellForClipboard"),processRowGroupCallback:function(t){return e.processRowGroupCallback(t)},processHeaderCallback:this.gridOptionsService.getCallback("processHeaderForClipboard"),processGroupHeaderCallback:this.gridOptionsService.getCallback("processGroupHeaderForClipboard")};return this.csvCreator.getDataAsCsv(a,!0)},i.prototype.processRowGroupCallback=function(t){var e=this,i=t.node,n=i.key,o=null!=n?n:"";if(t.node.footer){var r="";n&&n.length&&(r=" ".concat(n)),o="Total".concat(r)}var s=this.gridOptionsService.getCallback("processCellForClipboard");if(s){var a=i.rowGroupColumn;return!a&&i.footer&&-1===i.level&&(a=this.columnModel.getRowGroupColumns()[0]),s({value:o,node:i,column:a,type:"clipboard",formatValue:function(t){var n;return null!==(n=e.valueFormatterService.formatValue(a,i,t))&&void 0!==n?n:t},parseValue:function(t){return e.valueParserService.parseValue(a,i,t,e.valueService.getValue(a,i))}})}return o},i.prototype.dispatchFlashCells=function(t){var e=this;window.setTimeout((function(){var i={type:l.EVENT_FLASH_CELLS,cells:t};e.eventService.dispatchEvent(i)}),0)},i.prototype.processCell=function(t,e,i,n,o,r,s){var a,l=this;return o?o({column:e,node:t,value:i,type:n,formatValue:function(i){var n;return null!==(n=l.valueFormatterService.formatValue(e,null!=t?t:null,i))&&void 0!==n?n:i},parseValue:function(i){return l.valueParserService.parseValue(e,null!=t?t:null,i,l.valueService.getValue(e,t))}}):r&&!1!==e.getColDef().useValueParserForImport?this.valueParserService.parseValue(e,null!=t?t:null,i,this.valueService.getValue(e,t)):s&&!1!==e.getColDef().useValueFormatterForExport&&null!==(a=this.valueFormatterService.formatValue(e,null!=t?t:null,i))&&void 0!==a?a:i},i.prototype.copyDataToClipboard=function(t){var e=this,i=this.gridOptionsService.getCallback("sendToClipboard");i?i({data:t}):!this.gridOptionsService.get("suppressClipboardApi")&&navigator.clipboard?navigator.clipboard.writeText(t).catch((function(i){c.doOnce((function(){console.warn(i),console.warn(li("writeText"))}),"clipboardApiError"),e.copyDataToClipboardLegacy(t)})):this.copyDataToClipboardLegacy(t)},i.prototype.copyDataToClipboardLegacy=function(t){var e=this;this.executeOnTempElement((function(i){var n=e.gridOptionsService.getDocument(),o=n.activeElement;i.value=t||" ",i.select(),i.focus({preventScroll:!0}),n.execCommand("copy")||console.warn("AG Grid: Browser did not allow document.execCommand('copy'). Ensure api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons."),null!=o&&null!=o.focus&&o.focus({preventScroll:!0})}))},i.prototype.executeOnTempElement=function(t,e){var i=this.gridOptionsService.getDocument(),n=i.createElement("textarea");n.style.width="1px",n.style.height="1px",n.style.top=i.documentElement.scrollTop+"px",n.style.left=i.documentElement.scrollLeft+"px",n.style.position="absolute",n.style.opacity="0";var o=this.gridCtrl.getGui();o.appendChild(n);try{t(n)}catch(t){console.warn("AG Grid: Browser does not support document.execCommand('copy') for clipboard operations")}e?window.setTimeout((function(){e(n),o.removeChild(n)}),100):o.removeChild(n)},i.prototype.getRangeSize=function(){var t=this.rangeService.getCellRanges(),e=0,i=0;return t.length>0&&(e=this.rangeService.getRangeStartRow(t[0]).rowIndex,i=this.rangeService.getRangeEndRow(t[0]).rowIndex),e-i+1},ni([n("csvCreator")],i.prototype,"csvCreator",void 0),ni([n("loggerFactory")],i.prototype,"loggerFactory",void 0),ni([n("selectionService")],i.prototype,"selectionService",void 0),ni([E("rangeService")],i.prototype,"rangeService",void 0),ni([n("rowModel")],i.prototype,"rowModel",void 0),ni([n("ctrlsService")],i.prototype,"ctrlsService",void 0),ni([n("valueService")],i.prototype,"valueService",void 0),ni([n("focusService")],i.prototype,"focusService",void 0),ni([n("rowRenderer")],i.prototype,"rowRenderer",void 0),ni([n("columnModel")],i.prototype,"columnModel",void 0),ni([n("cellNavigationService")],i.prototype,"cellNavigationService",void 0),ni([n("cellPositionUtils")],i.prototype,"cellPositionUtils",void 0),ni([n("rowPositionUtils")],i.prototype,"rowPositionUtils",void 0),ni([n("valueFormatterService")],i.prototype,"valueFormatterService",void 0),ni([n("valueParserService")],i.prototype,"valueParserService",void 0),ni([r],i.prototype,"init",null),i=o=ni([e("clipboardService")],i)}(i),di={version:"31.0.1",moduleName:a.ClipboardModule,beans:[ci],dependantModules:[Ft,O]},ui=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hi=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};!function(t){t[t.EXPANDED=0]="EXPANDED",t[t.COLLAPSED=1]="COLLAPSED",t[t.INDETERMINATE=2]="INDETERMINATE"}(ai||(ai={}));var pi=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return ui(e,t),e.prototype.postConstruct=function(){var t=this;this.createExpandIcons(),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eExpand,"keydown",(function(e){e.key===d.SPACE&&(e.preventDefault(),t.onExpandClicked())})),this.addManagedListener(this.eSelect.getInputElement(),"click",this.onSelectClicked.bind(this)),this.addManagedPropertyListener("functionsReadOnly",(function(){return t.onFunctionsReadOnlyPropChanged()})),this.eFilterTextField.setAutoComplete(!1).onValueChange((function(){return t.onFilterTextChanged()})),this.addManagedListener(this.eFilterTextField.getInputElement(),"keydown",this.onMiniFilterKeyDown.bind(this)),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this));var e=this.localeService.getLocaleTextFunc();this.eSelect.setInputAriaLabel(e("ariaColumnSelectAll","Toggle Select All Columns")),this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")),this.activateTabIndex([this.eExpand])},e.prototype.onFunctionsReadOnlyPropChanged=function(){var t=this.gridOptionsService.get("functionsReadOnly");this.eSelect.setReadOnly(t),this.eSelect.addOrRemoveCssClass("ag-column-select-column-readonly",t)},e.prototype.init=function(t){this.params=t;var e=this.gridOptionsService.get("functionsReadOnly");this.eSelect.setReadOnly(e),this.eSelect.addOrRemoveCssClass("ag-column-select-column-readonly",e),this.columnModel.isReady()&&this.showOrHideOptions()},e.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=c.createIconNoSpan("columnSelectOpen",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandUnchecked=c.createIconNoSpan("columnSelectClosed",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandIndeterminate=c.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsService)),this.setExpandState(ai.EXPANDED)},e.prototype.showOrHideOptions=function(){var t=!this.params.suppressColumnFilter,e=!this.params.suppressColumnSelectAll,i=!this.params.suppressColumnExpandAll,n=this.columnModel.isPrimaryColumnGroupsPresent(),o=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(o("searchOoo","Search...")),c.setDisplayed(this.eFilterTextField.getGui(),t),c.setDisplayed(this.eSelect.getGui(),e),c.setDisplayed(this.eExpand,i&&n)},e.prototype.onFilterTextChanged=function(){var t=this;this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=c.debounce((function(){var e=t.eFilterTextField.getValue();t.dispatchEvent({type:"filterChanged",filterText:e})}),e.DEBOUNCE_DELAY)),this.onFilterTextChangedDebounced()},e.prototype.onMiniFilterKeyDown=function(t){var i=this;t.key===d.ENTER&&setTimeout((function(){return i.onSelectClicked()}),e.DEBOUNCE_DELAY)},e.prototype.onSelectClicked=function(){this.dispatchEvent({type:this.selectState?"unselectAll":"selectAll"})},e.prototype.onExpandClicked=function(){this.dispatchEvent({type:this.expandState===ai.EXPANDED?"collapseAll":"expandAll"})},e.prototype.setExpandState=function(t){this.expandState=t,c.setDisplayed(this.eExpandChecked,this.expandState===ai.EXPANDED),c.setDisplayed(this.eExpandUnchecked,this.expandState===ai.COLLAPSED),c.setDisplayed(this.eExpandIndeterminate,this.expandState===ai.INDETERMINATE)},e.prototype.setSelectionState=function(t){this.selectState=t,this.eSelect.setValue(this.selectState)},e.DEBOUNCE_DELAY=300,e.TEMPLATE='<div class="ag-column-select-header" role="presentation">\n            <div ref="eExpand" class="ag-column-select-header-icon"></div>\n            <ag-checkbox ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>\n            <ag-input-text-field class="ag-column-select-header-filter-wrapper" ref="eFilterTextField"></ag-input-text-field>\n        </div>',hi([n("columnModel")],e.prototype,"columnModel",void 0),hi([o("eExpand")],e.prototype,"eExpand",void 0),hi([o("eSelect")],e.prototype,"eSelect",void 0),hi([o("eFilterTextField")],e.prototype,"eFilterTextField",void 0),hi([r],e.prototype,"postConstruct",null),e}(s),fi=function(){function t(t,e,i,n,o){void 0===n&&(n=!1),this.eventService=new D,this.displayName=t,this.dept=i,this.group=n,n?(this.columnGroup=e,this.expanded=o,this.children=[]):this.column=e}return t.prototype.isGroup=function(){return this.group},t.prototype.getDisplayName=function(){return this.displayName},t.prototype.getColumnGroup=function(){return this.columnGroup},t.prototype.getColumn=function(){return this.column},t.prototype.getDept=function(){return this.dept},t.prototype.isExpanded=function(){return!!this.expanded},t.prototype.getChildren=function(){return this.children},t.prototype.isPassesFilter=function(){return this.passesFilter},t.prototype.setExpanded=function(e){e!==this.expanded&&(this.expanded=e,this.eventService.dispatchEvent({type:t.EVENT_EXPANDED_CHANGED}))},t.prototype.setPassesFilter=function(t){this.passesFilter=t},t.prototype.addEventListener=function(t,e){this.eventService.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){this.eventService.removeEventListener(t,e)},t.EVENT_EXPANDED_CHANGED="expandedChanged",t}(),gi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vi=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},yi=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},mi=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},bi=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Si=function(t){function e(e,i,n){var o=t.call(this,'<div class="ag-menu"></div>')||this;return o.column=e,o.mouseEvent=i,o.parentEl=n,o.displayName=null,o}return gi(e,t),e.prototype.postConstruct=function(){if(this.initializeProperties(this.column),this.buildMenuItemMap(),this.column instanceof A?this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel"):this.displayName=this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.column,"columnToolPanel"),this.isActive()){this.mouseEvent.preventDefault();var t=this.getMappedMenuItems();if(0===t.length)return;this.displayContextMenu(t)}},e.prototype.initializeProperties=function(t){this.columns=t instanceof T?t.getLeafColumns():[t],this.allowGrouping=this.columns.some((function(t){return t.isPrimary()&&t.isAllowRowGroup()})),this.allowValues=this.columns.some((function(t){return t.isPrimary()&&t.isAllowValue()})),this.allowPivoting=this.columnModel.isPivotMode()&&this.columns.some((function(t){return t.isPrimary()&&t.isAllowPivot()}))},e.prototype.buildMenuItemMap=function(){var t=this,e=this.localeService.getLocaleTextFunc();this.menuItemMap=new Map,this.menuItemMap.set("rowGroup",{allowedFunction:function(e){return e.isPrimary()&&e.isAllowRowGroup()&&!t.columnModel.isColumnGroupingLocked(e)},activeFunction:function(t){return t.isRowGroupActive()},activateLabel:function(){return"".concat(e("groupBy","Group by")," ").concat(t.displayName)},deactivateLabel:function(){return"".concat(e("ungroupBy","Un-Group by")," ").concat(t.displayName)},activateFunction:function(){var e=t.columnModel.getRowGroupColumns();t.columnModel.setRowGroupColumns(t.addColumnsToList(e),"toolPanelUi")},deActivateFunction:function(){var e=t.columnModel.getRowGroupColumns();t.columnModel.setRowGroupColumns(t.removeColumnsFromList(e),"toolPanelUi")},addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"}),this.menuItemMap.set("value",{allowedFunction:function(t){return t.isPrimary()&&t.isAllowValue()},activeFunction:function(t){return t.isValueActive()},activateLabel:function(){return e("addToValues","Add ".concat(t.displayName," to values"),[t.displayName])},deactivateLabel:function(){return e("removeFromValues","Remove ".concat(t.displayName," from values"),[t.displayName])},activateFunction:function(){var e=t.columnModel.getValueColumns();t.columnModel.setValueColumns(t.addColumnsToList(e),"toolPanelUi")},deActivateFunction:function(){var e=t.columnModel.getValueColumns();t.columnModel.setValueColumns(t.removeColumnsFromList(e),"toolPanelUi")},addIcon:"valuePanel",removeIcon:"valuePanel"}),this.menuItemMap.set("pivot",{allowedFunction:function(e){return t.columnModel.isPivotMode()&&e.isPrimary()&&e.isAllowPivot()},activeFunction:function(t){return t.isPivotActive()},activateLabel:function(){return e("addToLabels","Add ".concat(t.displayName," to labels"),[t.displayName])},deactivateLabel:function(){return e("removeFromLabels","Remove ".concat(t.displayName," from labels"),[t.displayName])},activateFunction:function(){var e=t.columnModel.getPivotColumns();t.columnModel.setPivotColumns(t.addColumnsToList(e),"toolPanelUi")},deActivateFunction:function(){var e=t.columnModel.getPivotColumns();t.columnModel.setPivotColumns(t.removeColumnsFromList(e),"toolPanelUi")},addIcon:"pivotPanel",removeIcon:"pivotPanel"})},e.prototype.addColumnsToList=function(t){return mi([],yi(t),!1).concat(this.columns.filter((function(e){return-1===t.indexOf(e)})))},e.prototype.removeColumnsFromList=function(t){var e=this;return t.filter((function(t){return-1===e.columns.indexOf(t)}))},e.prototype.displayContextMenu=function(t){var e=this,i=this.getGui(),n=this.createBean(new k),o=this.localeService.getLocaleTextFunc(),r=function(){};i.appendChild(n.getGui()),n.addMenuItems(t),n.addManagedListener(n,M.EVENT_MENU_ITEM_SELECTED,(function(){e.parentEl.focus(),r()}));var s=this.popupService.addPopup({modal:!0,eChild:i,closeOnEsc:!0,afterGuiAttached:function(){return e.focusService.focusInto(n.getGui())},ariaLabel:o("ariaLabelContextMenu","Context Menu"),closedCallback:function(t){t instanceof KeyboardEvent&&e.parentEl.focus(),e.destroyBean(n)}});s&&(r=s.hideFunc),this.popupService.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:i})},e.prototype.isActive=function(){return this.allowGrouping||this.allowValues||this.allowPivoting},e.prototype.getMappedMenuItems=function(){var t,e,i=[],n=function(t){var e=o.columns.some((function(e){return t.allowedFunction(e)&&!t.activeFunction(e)})),n=o.columns.some((function(e){return t.allowedFunction(e)&&t.activeFunction(e)}));e&&i.push({name:t.activateLabel(o.displayName),icon:c.createIconNoSpan(t.addIcon,o.gridOptionsService,null),action:function(){return t.activateFunction()}}),n&&i.push({name:t.deactivateLabel(o.displayName),icon:c.createIconNoSpan(t.removeIcon,o.gridOptionsService,null),action:function(){return t.deActivateFunction()}})},o=this;try{for(var r=bi(this.menuItemMap.values()),s=r.next();!s.done;s=r.next()){n(s.value)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return i},vi([n("columnModel")],e.prototype,"columnModel",void 0),vi([n("popupService")],e.prototype,"popupService",void 0),vi([n("focusService")],e.prototype,"focusService",void 0),vi([r],e.prototype,"postConstruct",null),e}(s),xi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ci=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},wi=function(t){function e(e,i,n,o){var r=t.call(this)||this;return r.modelItem=e,r.allowDragging=i,r.eventType=n,r.focusWrapper=o,r.processingColumnStateChange=!1,r.modelItem=e,r.columnGroup=e.getColumnGroup(),r.columnDept=e.getDept(),r.displayName=e.getDisplayName(),r.allowDragging=i,r}return xi(e,t),e.prototype.init=function(){var t=this;this.setTemplate(e.TEMPLATE),this.eDragHandle=c.createIconNoSpan("columnDrag",this.gridOptionsService),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");var i=this.cbSelect.getGui(),n=this.cbSelect.getInputElement();i.insertAdjacentElement("afterend",this.eDragHandle),n.setAttribute("tabindex","-1"),this.eLabel.innerHTML=this.displayName?this.displayName:"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+this.columnDept),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.addManagedListener(this.cbSelect,l.EVENT_FIELD_VALUE_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.modelItem,fi.EVENT_EXPANDED_CHANGED,this.onExpandChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip(),R.getToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(),this.gridOptionsService,null,this.columnGroup).forEach((function(e){return t.addOrRemoveCssClass(e,!0)}))},e.prototype.getColumns=function(){return this.columnGroup.getLeafColumns()},e.prototype.setupTooltip=function(){var t=this,e=this.columnGroup.getColGroupDef();if(e){var i=function(){var i=e.headerTooltip;t.setTooltip(i)};i(),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,i)}},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="columnToolPanelColumnGroup",e},e.prototype.handleKeyDown=function(t){switch(t.key){case d.LEFT:t.preventDefault(),this.modelItem.setExpanded(!1);break;case d.RIGHT:t.preventDefault(),this.modelItem.setExpanded(!0);break;case d.SPACE:t.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected())}},e.prototype.onContextMenu=function(t){var e=this,i=this.columnGroup;if(!this.gridOptionsService.get("functionsReadOnly")){var n=this.createBean(new Si(i,t,this.focusWrapper));this.addDestroyFunc((function(){n.isAlive()&&e.destroyBean(n)}))}},e.prototype.addVisibilityListenersToAllChildren=function(){var t=this;this.columnGroup.getLeafColumns().forEach((function(e){t.addManagedListener(e,A.EVENT_VISIBLE_CHANGED,t.onColumnStateChanged.bind(t)),t.addManagedListener(e,A.EVENT_VALUE_CHANGED,t.onColumnStateChanged.bind(t)),t.addManagedListener(e,A.EVENT_PIVOT_CHANGED,t.onColumnStateChanged.bind(t)),t.addManagedListener(e,A.EVENT_ROW_GROUP_CHANGED,t.onColumnStateChanged.bind(t))}))},e.prototype.setupDragging=function(){var t=this;if(this.allowDragging){var e=!this.gridOptionsService.get("suppressDragLeaveHidesColumns"),i={type:p.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:function(){return e?m.ICON_HIDE:m.ICON_NOT_ALLOWED},getDragItem:function(){return t.createDragItem()},onDragStarted:function(){e=!t.gridOptionsService.get("suppressDragLeaveHidesColumns");var i={type:l.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:t.columnGroup};t.eventService.dispatchEvent(i)},onDragStopped:function(){var e={type:l.EVENT_COLUMN_PANEL_ITEM_DRAG_END};t.eventService.dispatchEvent(e)},onGridEnter:function(i){e&&t.modelItemUtils.updateColumns({columns:t.columnGroup.getLeafColumns(),visibleState:null==i?void 0:i.visibleState,pivotState:null==i?void 0:i.pivotState,eventType:t.eventType})},onGridExit:function(){e&&t.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(i,!0),this.addDestroyFunc((function(){return t.dragAndDropService.removeDragSource(i)}))}else c.setDisplayed(this.eDragHandle,!1)},e.prototype.createDragItem=function(){var t=this,e=this.columnGroup.getLeafColumns(),i={},n={};return e.forEach((function(e){var o=e.getId();i[o]=e.isVisible(),n[o]=t.modelItemUtils.createPivotState(e)})),{columns:e,visibleState:i,pivotState:n}},e.prototype.setupExpandContract=function(){this.eGroupClosedIcon.appendChild(c.createIcon("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(c.createIcon("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this));var t=new P(this.eColumnGroupIcons,!0);this.addManagedListener(t,P.EVENT_TAP,this.onExpandOrContractClicked.bind(this)),this.addDestroyFunc(t.destroy.bind(t))},e.prototype.onLabelClicked=function(){var t=!this.cbSelect.getValue();this.onChangeCommon(t)},e.prototype.onCheckboxChanged=function(t){this.onChangeCommon(t.selected)},e.prototype.getVisibleLeafColumns=function(){var t=[],e=function(i){i.forEach((function(i){i.isPassesFilter()&&(i.isGroup()?e(i.getChildren()):t.push(i.getColumn()))}))};return e(this.modelItem.getChildren()),t},e.prototype.onChangeCommon=function(t){this.refreshAriaLabel(),this.processingColumnStateChange||this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(),t,this.eventType)},e.prototype.refreshAriaLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=t("ariaColumnGroup","Column Group"),i=this.cbSelect.getValue(),n=void 0===i?t("ariaIndeterminate","indeterminate"):i?t("ariaVisible","visible"):t("ariaHidden","hidden"),o=t("ariaToggleVisibility","Press SPACE to toggle visibility");c.setAriaLabel(this.focusWrapper,"".concat(this.displayName," ").concat(e)),this.cbSelect.setInputAriaLabel("".concat(o," (").concat(n,")")),c.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},e.prototype.onColumnStateChanged=function(){var t=this.workOutSelectedValue(),e=this.workOutReadOnlyValue();this.processingColumnStateChange=!0,this.cbSelect.setValue(t),this.cbSelect.setReadOnly(e),this.addOrRemoveCssClass("ag-column-select-column-group-readonly",e),this.processingColumnStateChange=!1},e.prototype.workOutSelectedValue=function(){var t=this,e=this.columnModel.isPivotMode(),i=this.getVisibleLeafColumns(),n=0,o=0;if(i.forEach((function(i){!e&&i.getColDef().lockVisible||(t.isColumnChecked(i,e)?n++:o++)})),!(n>0&&o>0))return n>0},e.prototype.workOutReadOnlyValue=function(){var t=this.columnModel.isPivotMode(),e=0;return this.columnGroup.getLeafColumns().forEach((function(i){t?i.isAnyFunctionAllowed()&&e++:i.getColDef().lockVisible||e++})),0===e},e.prototype.isColumnChecked=function(t,e){if(e){var i=t.isPivotActive(),n=t.isRowGroupActive(),o=t.isValueActive();return i||n||o}return t.isVisible()},e.prototype.onExpandOrContractClicked=function(){var t=this.modelItem.isExpanded();this.modelItem.setExpanded(!t)},e.prototype.onExpandChanged=function(){this.setOpenClosedIcons(),this.refreshAriaExpanded()},e.prototype.setOpenClosedIcons=function(){var t=this.modelItem.isExpanded();c.setDisplayed(this.eGroupClosedIcon,!t),c.setDisplayed(this.eGroupOpenedIcon,t)},e.prototype.refreshAriaExpanded=function(){c.setAriaExpanded(this.focusWrapper,this.modelItem.isExpanded())},e.prototype.getDisplayName=function(){return this.displayName},e.prototype.onSelectAllChanged=function(t){var e=this.cbSelect.getValue();!this.cbSelect.isReadOnly()&&(t&&!e||!t&&e)&&this.cbSelect.toggle()},e.prototype.isSelected=function(){return this.cbSelect.getValue()},e.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},e.prototype.setSelected=function(t){this.cbSelect.setValue(t,!0)},e.TEMPLATE='<div class="ag-column-select-column-group" aria-hidden="true">\n            <span class="ag-column-group-icons" ref="eColumnGroupIcons" >\n                <span class="ag-column-group-closed-icon" ref="eGroupClosedIcon"></span>\n                <span class="ag-column-group-opened-icon" ref="eGroupOpenedIcon"></span>\n            </span>\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',Ci([n("columnModel")],e.prototype,"columnModel",void 0),Ci([n("dragAndDropService")],e.prototype,"dragAndDropService",void 0),Ci([n("modelItemUtils")],e.prototype,"modelItemUtils",void 0),Ci([o("cbSelect")],e.prototype,"cbSelect",void 0),Ci([o("eLabel")],e.prototype,"eLabel",void 0),Ci([o("eGroupOpenedIcon")],e.prototype,"eGroupOpenedIcon",void 0),Ci([o("eGroupClosedIcon")],e.prototype,"eGroupClosedIcon",void 0),Ci([o("eColumnGroupIcons")],e.prototype,"eColumnGroupIcons",void 0),Ci([r],e.prototype,"init",null),e}(s),Ei=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Oi=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Di=function(t){function e(e,i){var n=t.call(this)||this;return n.comp=e,n.virtualList=i,n}return Ei(e,t),e.prototype.postConstruct=function(){var t=this;this.createManagedBean(new h(this.comp,this.virtualList,{dragSourceType:p.ToolPanel,listItemDragStartEvent:l.EVENT_COLUMN_PANEL_ITEM_DRAG_START,listItemDragEndEvent:l.EVENT_COLUMN_PANEL_ITEM_DRAG_END,eventSource:this.eventService,getCurrentDragValue:function(e){return t.getCurrentDragValue(e)},isMoveBlocked:function(e){return t.isMoveBlocked(e)},getNumRows:function(t){return t.getDisplayedColsList().length},moveItem:function(e,i){return t.moveItem(e,i)}}))},e.prototype.getCurrentDragValue=function(t){return t.column},e.prototype.isMoveBlocked=function(t){return!!this.gridOptionsService.get("suppressMovableColumns")||!!this.getCurrentColumns(t).find((function(t){var e=t.getColDef();return!!e.suppressMovable||!!e.lockPosition}))},e.prototype.moveItem=function(t,e){var i=this.getTargetIndex(t,e),n=this.getCurrentColumns(t);null!=i&&this.columnModel.moveColumns(n,i,"toolPanelUi")},e.prototype.getMoveDiff=function(t,e){var i=this.columnModel.getAllGridColumns(),n=this.getCurrentColumns(t),o=n[0],r=n.length;return i.indexOf(o)<e?r:0},e.prototype.getCurrentColumns=function(t){return t instanceof T?t.getLeafColumns():[t]},e.prototype.getTargetIndex=function(t,e){if(!e)return null;var i,n=e.component,o="top"===e.position;n instanceof wi?(i=n.getColumns()[0],o=!0):i=n.getColumn();if(-1!==this.getCurrentColumns(t).indexOf(i))return null;var r=this.columnModel.getAllGridColumns().indexOf(i),s=o?r:r+1;return s-this.getMoveDiff(t,s)},Oi([n("columnModel")],e.prototype,"columnModel",void 0),Oi([n("gridOptionsService")],e.prototype,"gridOptionsService",void 0),Oi([r],e.prototype,"postConstruct",null),e}(i),Ai=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ti=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ki=function(t){function e(e,i,n,o){var r=t.call(this)||this;return r.allowDragging=i,r.groupsExist=n,r.focusWrapper=o,r.processingColumnStateChange=!1,r.column=e.getColumn(),r.columnDept=e.getDept(),r.displayName=e.getDisplayName(),r}return Ai(e,t),e.prototype.init=function(){var t=this;this.setTemplate(e.TEMPLATE),this.eDragHandle=c.createIconNoSpan("columnDrag",this.gridOptionsService),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");var i=this.cbSelect.getGui(),n=this.cbSelect.getInputElement();i.insertAdjacentElement("afterend",this.eDragHandle),n.setAttribute("tabindex","-1");var o=c.escapeString(this.displayName);this.eLabel.innerHTML=o;var r=this.columnDept;this.groupsExist&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass("ag-column-select-indent-".concat(r)),this.setupDragging(),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,A.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,A.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,A.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,A.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.addManagedPropertyListener("functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListener(this.cbSelect,l.EVENT_FIELD_VALUE_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip(),R.getToolPanelClassesFromColDef(this.column.getColDef(),this.gridOptionsService,this.column,null).forEach((function(e){return t.addOrRemoveCssClass(e,!0)}))},e.prototype.getColumn=function(){return this.column},e.prototype.setupTooltip=function(){var t=this,e=function(){var e=t.column.getColDef().headerTooltip;t.setTooltip(e)};e(),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,e)},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="columnToolPanelColumn",e.colDef=this.column.getColDef(),e},e.prototype.onContextMenu=function(t){var e=this,i=this.column;if(!this.gridOptionsService.get("functionsReadOnly")){var n=this.createBean(new Si(i,t,this.focusWrapper));this.addDestroyFunc((function(){n.isAlive()&&e.destroyBean(n)}))}},e.prototype.handleKeyDown=function(t){t.key===d.SPACE&&(t.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))},e.prototype.onLabelClicked=function(){if(!this.gridOptionsService.get("functionsReadOnly")){var t=!this.cbSelect.getValue();this.onChangeCommon(t)}},e.prototype.onCheckboxChanged=function(t){this.onChangeCommon(t.selected)},e.prototype.onChangeCommon=function(t){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),this.processingColumnStateChange||this.modelItemUtils.setColumn(this.column,t,"toolPanelUi"))},e.prototype.refreshAriaLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=t("ariaColumn","Column"),i=this.cbSelect.getValue()?t("ariaVisible","visible"):t("ariaHidden","hidden"),n=t("ariaToggleVisibility","Press SPACE to toggle visibility");c.setAriaLabel(this.focusWrapper,"".concat(this.displayName," ").concat(e)),this.cbSelect.setInputAriaLabel("".concat(n," (").concat(i,")")),c.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},e.prototype.setupDragging=function(){var t=this;if(this.allowDragging){var e=!this.gridOptionsService.get("suppressDragLeaveHidesColumns"),i={type:p.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:function(){return e?m.ICON_HIDE:m.ICON_NOT_ALLOWED},getDragItem:function(){return t.createDragItem()},onDragStarted:function(){e=!t.gridOptionsService.get("suppressDragLeaveHidesColumns");var i={type:l.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:t.column};t.eventService.dispatchEvent(i)},onDragStopped:function(){var e={type:l.EVENT_COLUMN_PANEL_ITEM_DRAG_END};t.eventService.dispatchEvent(e)},onGridEnter:function(i){e&&t.modelItemUtils.updateColumns({columns:[t.column],visibleState:null==i?void 0:i.visibleState,pivotState:null==i?void 0:i.pivotState,eventType:"toolPanelUi"})},onGridExit:function(){e&&t.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(i,!0),this.addDestroyFunc((function(){return t.dragAndDropService.removeDragSource(i)}))}else c.setDisplayed(this.eDragHandle,!1)},e.prototype.createDragItem=function(){var t,e,i=this.column.getColId(),n=((t={})[i]=this.column.isVisible(),t),o=((e={})[i]=this.modelItemUtils.createPivotState(this.column),e);return{columns:[this.column],visibleState:n,pivotState:o}},e.prototype.onColumnStateChanged=function(){this.processingColumnStateChange=!0;var t=this.columnModel.isPivotMode();if(t){var e=this.column.isAnyFunctionActive();this.cbSelect.setValue(e)}else this.cbSelect.setValue(this.column.isVisible());var i=!0,n=!0;if(t){var o=this.gridOptionsService.get("functionsReadOnly"),r=!this.column.isAnyFunctionAllowed();n=i=!o&&!r}else{var s=this.column.getColDef(),a=s.enableRowGroup,l=s.enableValue,c=s.lockPosition,d=s.suppressMovable;i=!s.lockVisible,n=!!a||!!l||!(!!c||!!d)}this.cbSelect.setReadOnly(!i),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!n),this.addOrRemoveCssClass("ag-column-select-column-readonly",!n&&!i);var u=t&&this.gridOptionsService.get("functionsPassive");this.cbSelect.setPassive(u),this.processingColumnStateChange=!1},e.prototype.getDisplayName=function(){return this.displayName},e.prototype.onSelectAllChanged=function(t){t!==this.cbSelect.getValue()&&(this.cbSelect.isReadOnly()||this.cbSelect.toggle())},e.prototype.isSelected=function(){return this.cbSelect.getValue()},e.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},e.prototype.isExpandable=function(){return!1},e.prototype.setExpanded=function(t){console.warn("AG Grid: can not expand a column item that does not represent a column group header")},e.TEMPLATE='<div class="ag-column-select-column" aria-hidden="true">\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',Ti([n("columnModel")],e.prototype,"columnModel",void 0),Ti([n("dragAndDropService")],e.prototype,"dragAndDropService",void 0),Ti([n("modelItemUtils")],e.prototype,"modelItemUtils",void 0),Ti([o("eLabel")],e.prototype,"eLabel",void 0),Ti([o("cbSelect")],e.prototype,"cbSelect",void 0),Ti([r],e.prototype,"init",null),e}(s),Mi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ri=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Pi=function(){function t(t){this.items=t}return t.prototype.getRowCount=function(){return this.items.length},t.prototype.getRow=function(t){return this.items[t]},t}(),Ni=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.destroyColumnItemFuncs=[],i.hasLoadedInitialState=!1,i.isInitialState=!1,i}return Mi(e,t),e.prototype.destroyColumnTree=function(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach((function(t){return t()})),this.destroyColumnItemFuncs=[]},e.prototype.init=function(t,e,i){var n=this;this.params=t,this.allowDragging=e,this.eventType=i,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,l.EVENT_COLUMN_MOVED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,this.onColumnsChanged.bind(this)),[l.EVENT_COLUMN_PIVOT_CHANGED,l.EVENT_COLUMN_PIVOT_MODE_CHANGED,l.EVENT_COLUMN_ROW_GROUP_CHANGED,l.EVENT_COLUMN_VALUE_CHANGED,l.EVENT_COLUMN_VISIBLE,l.EVENT_NEW_COLUMNS_LOADED].forEach((function(t){n.addManagedListener(n.eventService,t,n.fireSelectionChangedEvent.bind(n))})),this.expandGroupsByDefault=!this.params.contractColumnSelection,this.virtualList=this.createManagedBean(new S({cssIdentifier:"column-select",ariaRole:"tree"})),this.appendChild(this.virtualList.getGui());var o=this.virtualList.getAriaElement();c.setAriaLive(o,"assertive"),c.setAriaAtomic(o,!1),c.setAriaRelevant(o,"text"),this.virtualList.setComponentCreator((function(t,e){return c.setAriaLevel(e,t.getDept()+1),n.createComponentFromItem(t,e)})),this.columnModel.isReady()&&this.onColumnsChanged(),this.params.suppressColumnMove||(this.colsListPanelItemDragFeature=this.createManagedBean(new Di(this,this.virtualList)))},e.prototype.createComponentFromItem=function(t,e){if(t.isGroup()){var i=new wi(t,this.allowDragging,this.eventType,e);return this.getContext().createBean(i),i}var n=new ki(t,this.allowDragging,this.groupsExist,e);return this.getContext().createBean(n),n},e.prototype.onColumnsChanged=function(){this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!this.params.initialState);var t=this.getExpandedStates(),e=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!e?this.buildTreeFromWhatGridIsDisplaying():this.buildTreeFromProvidedColumnDefs(),this.setExpandedStates(t),this.markFilteredColumns(),this.flattenAndFilterModel(),this.isInitialState=!1},e.prototype.getDisplayedColsList=function(){return this.displayedColsList},e.prototype.getExpandedStates=function(){var t={};return this.isInitialState?(this.params.initialState.expandedGroupIds.forEach((function(e){t[e]=!0})),t):this.allColsTree?(this.forEachItem((function(e){if(e.isGroup()){var i=e.getColumnGroup();i&&(t[i.getId()]=e.isExpanded())}})),t):{}},e.prototype.setExpandedStates=function(t){if(this.allColsTree){var e=this.isInitialState;this.forEachItem((function(i){if(i.isGroup()){var n=i.getColumnGroup();if(n){var o=t[n.getId()];(null!=o||e)&&i.setExpanded(!!o)}}}))}},e.prototype.buildTreeFromWhatGridIsDisplaying=function(){this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this))},e.prototype.setColumnLayout=function(t){var e=this.colDefService.createColumnTree(t);this.buildListModel(e),this.groupsExist=t.some((function(t){return t&&void 0!==t.children})),this.markFilteredColumns(),this.flattenAndFilterModel()},e.prototype.buildTreeFromProvidedColumnDefs=function(){this.buildListModel(this.columnModel.getPrimaryColumnTree()),this.groupsExist=this.columnModel.isPrimaryColumnGroupsPresent()},e.prototype.buildListModel=function(t){var e=this,i=this.onColumnExpanded.bind(this),n=function(t,e,i){t.forEach((function(t){t instanceof T?o(t,e,i):r(t,e,i)}))},o=function(t,o,r){var s=t.getColGroupDef();if(!(s&&s.suppressColumnsToolPanel))if(t.isPadding())n(t.getChildren(),o,r);else{var a=e.columnModel.getDisplayNameForProvidedColumnGroup(null,t,"columnToolPanel"),l=new fi(a,t,o,!0,e.expandGroupsByDefault);r.push(l),function(t){t.addEventListener(fi.EVENT_EXPANDED_CHANGED,i);var n=t.removeEventListener.bind(t,fi.EVENT_EXPANDED_CHANGED,i);e.destroyColumnItemFuncs.push(n)}(l),n(t.getChildren(),o+1,l.getChildren())}},r=function(t,i,n){if(!(t.getColDef()&&t.getColDef().suppressColumnsToolPanel)){var o=e.columnModel.getDisplayNameForColumn(t,"columnToolPanel");n.push(new fi(o,t,i))}};this.destroyColumnTree(),n(t,0,this.allColsTree)},e.prototype.onColumnExpanded=function(){this.flattenAndFilterModel()},e.prototype.flattenAndFilterModel=function(){var t=this;this.displayedColsList=[];var e=function(i){i.isPassesFilter()&&(t.displayedColsList.push(i),i.isGroup()&&i.isExpanded()&&i.getChildren().forEach(e))};this.allColsTree.forEach(e),this.virtualList.setModel(new Pi(this.displayedColsList));var i=this.virtualList.getLastFocusedRow();this.virtualList.refresh(),null!=i&&this.focusRowIfAlive(i),this.notifyListeners(),this.refreshAriaLabel()},e.prototype.refreshAriaLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=t("ariaColumnPanelList","Column List"),i=t("columns","Columns"),n=this.displayedColsList.length;c.setAriaLabel(this.virtualList.getAriaElement(),"".concat(e," ").concat(n," ").concat(i))},e.prototype.focusRowIfAlive=function(t){var e=this;window.setTimeout((function(){e.isAlive()&&e.virtualList.focusRow(t)}),0)},e.prototype.forEachItem=function(t){var e=function(i){i.forEach((function(i){t(i),i.isGroup()&&e(i.getChildren())}))};e(this.allColsTree)},e.prototype.doSetExpandedAll=function(t){this.forEachItem((function(e){e.isGroup()&&e.setExpanded(t)}))},e.prototype.setGroupsExpanded=function(t,e){if(e){var i=[];this.forEachItem((function(n){if(n.isGroup()){var o=n.getColumnGroup().getId();e.indexOf(o)>=0&&(n.setExpanded(t),i.push(o))}}));var n=e.filter((function(t){return!c.includes(i,t)}));n.length>0&&console.warn("AG Grid: unable to find group(s) for supplied groupIds:",n)}else this.doSetExpandedAll(t)},e.prototype.getExpandState=function(){var t=0,e=0;return this.forEachItem((function(i){i.isGroup()&&(i.isExpanded()?t++:e++)})),t>0&&e>0?ai.INDETERMINATE:e>0?ai.COLLAPSED:ai.EXPANDED},e.prototype.doSetSelectedAll=function(t){this.modelItemUtils.selectAllChildren(this.allColsTree,t,this.eventType)},e.prototype.getSelectionState=function(){var t=0,e=0,i=this.columnModel.isPivotMode();if(this.forEachItem((function(n){if(!n.isGroup()&&n.isPassesFilter()){var o,r=n.getColumn(),s=r.getColDef();if(i){if(!r.isAllowPivot()&&!r.isAllowRowGroup()&&!r.isAllowValue())return;o=r.isValueActive()||r.isPivotActive()||r.isRowGroupActive()}else{if(s.lockVisible)return;o=r.isVisible()}o?t++:e++}})),!(t>0&&e>0))return!(0===t||e>0)},e.prototype.setFilterText=function(t){this.filterText=c.exists(t)?t.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()},e.prototype.markFilteredColumns=function(){var t=this,e=function(e){if(!c.exists(t.filterText))return!0;var i=e.getDisplayName();return null==i||-1!==i.toLowerCase().indexOf(t.filterText)},i=function(t,n){var o=!1;if(t.isGroup()){var r=e(t);t.getChildren().forEach((function(t){var e=i(t,r||n);e&&(o=e)}))}var s=!(!n&&!o)||e(t);return t.setPassesFilter(s),s};this.allColsTree.forEach((function(t){return i(t,!1)}))},e.prototype.notifyListeners=function(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()},e.prototype.fireGroupExpandedEvent=function(){var t=this.getExpandState();this.dispatchEvent({type:"groupExpanded",state:t})},e.prototype.fireSelectionChangedEvent=function(){if(this.allColsTree){var t=this.getSelectionState();this.dispatchEvent({type:"selectionChanged",state:t})}},e.prototype.getExpandedGroups=function(){var t=[];return this.allColsTree?(this.forEachItem((function(e){e.isGroup()&&e.isExpanded()&&t.push(e.getColumnGroup().getId())})),t):t},e.TEMPLATE='<div class="'.concat("ag-column-select-list",'" role="presentation"></div>'),Ri([n("columnModel")],e.prototype,"columnModel",void 0),Ri([n("toolPanelColDefService")],e.prototype,"colDefService",void 0),Ri([n("modelItemUtils")],e.prototype,"modelItemUtils",void 0),Ri([N],e.prototype,"destroyColumnTree",null),e}(s),Li=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ii=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Fi=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Li(i,e),i.prototype.createTemplate=function(){return'<div class="ag-pivot-mode-panel">\n                <ag-toggle-button ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>\n            </div>'},i.prototype.init=function(){this.setTemplate(this.createTemplate()),this.cbPivotMode.setValue(this.columnModel.isPivotMode());var t=this.localeService.getLocaleTextFunc();this.cbPivotMode.setLabel(t("pivotMode","Pivot Mode")),this.addManagedListener(this.cbPivotMode,l.EVENT_FIELD_VALUE_CHANGED,this.onBtPivotMode.bind(this)),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this))},i.prototype.onBtPivotMode=function(){var t=!!this.cbPivotMode.getValue();if(t!==this.columnModel.isPivotMode()){this.gridOptionsService.updateGridOptions({options:{pivotMode:t},source:"toolPanelUi"});var e=this.api;e&&e.refreshHeader()}},i.prototype.onPivotModeChanged=function(){var t=this.columnModel.isPivotMode();this.cbPivotMode.setValue(t)},Ii([n("columnModel")],i.prototype,"columnModel",void 0),Ii([n("gridApi")],i.prototype,"api",void 0),Ii([o("cbPivotMode")],i.prototype,"cbPivotMode",void 0),Ii([t],i.prototype,"init",null),i}(s),_i=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Gi=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Bi=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return _i(i,t),i.prototype.execute=function(t){var e=c.missingOrEmpty(this.columnModel.getValueColumns()),i=!this.gridOptionsService.getCallback("getGroupRowAgg"),n=t.changedPath&&t.changedPath.isActive();if(!(e&&i&&n)){var o=this.createAggDetails(t);this.recursivelyCreateAggData(o)}},i.prototype.createAggDetails=function(t){var e=this.columnModel.isPivotActive(),i=this.columnModel.getValueColumns(),n=e?this.columnModel.getPivotColumns():[];return{alwaysAggregateAtRootLevel:this.gridOptionsService.get("alwaysAggregateAtRootLevel"),groupIncludeTotalFooter:this.gridOptionsService.get("groupIncludeTotalFooter"),changedPath:t.changedPath,valueColumns:i,pivotColumns:n,filteredOnly:!this.isSuppressAggFilteredOnly(),userAggFunc:this.gridOptionsService.getCallback("getGroupRowAgg")}},i.prototype.isSuppressAggFilteredOnly=function(){return void 0!==this.gridOptionsService.getGroupAggFiltering()||this.gridOptionsService.get("suppressAggFilteredOnly")},i.prototype.recursivelyCreateAggData=function(t){var e=this;t.changedPath.forEachChangedNodeDepthFirst((function(i){if(!i.hasChildren())i.aggData&&i.setAggData(null);else{if(-1===i.level&&!t.groupIncludeTotalFooter){var n=!e.columnModel.isPivotMode();if(!t.alwaysAggregateAtRootLevel&&n)return void i.setAggData(null)}e.aggregateRowNode(i,t)}}),!0)},i.prototype.aggregateRowNode=function(t,e){var i,n=0===e.valueColumns.length,o=0===e.pivotColumns.length;i=e.userAggFunc?e.userAggFunc({nodes:t.childrenAfterFilter}):n?null:o?this.aggregateRowNodeUsingValuesOnly(t,e):this.aggregateRowNodeUsingValuesAndPivot(t),t.setAggData(i),t.sibling&&t.sibling.setAggData(i)},i.prototype.aggregateRowNodeUsingValuesAndPivot=function(t){var e,i=this,n={},o=null!==(e=this.columnModel.getSecondaryColumns())&&void 0!==e?e:[];return o.forEach((function(e){var o=e.getColDef(),r=o.pivotValueColumn,s=o.pivotTotalColumnIds,a=o.colId,l=o.pivotKeys;if(!c.exists(s)){var d,u=null!=l?l:[];d=t.leafGroup?i.getValuesFromMappedSet(t.childrenMapped,u,r):i.getValuesPivotNonLeaf(t,a),n[a]=i.aggregateValues(d,r.getAggFunc(),r,t,e)}})),o.forEach((function(e){var o=e.getColDef(),r=o.pivotValueColumn,s=o.pivotTotalColumnIds,a=o.colId;if(c.exists(s)){var l=[];s&&s.length&&(s.forEach((function(t){l.push(n[t])})),n[a]=i.aggregateValues(l,r.getAggFunc(),r,t,e))}})),n},i.prototype.aggregateRowNodeUsingValuesOnly=function(t,e){var i=this,n={},o=e.changedPath.isActive()?e.changedPath.getValueColumnsForNode(t,e.valueColumns):e.valueColumns,r=e.changedPath.isActive()?e.changedPath.getNotValueColumnsForNode(t,e.valueColumns):null,s=this.getValuesNormal(t,o,e.filteredOnly),a=t.aggData;return o.forEach((function(e,o){n[e.getId()]=i.aggregateValues(s[o],e.getAggFunc(),e,t)})),r&&a&&r.forEach((function(t){n[t.getId()]=a[t.getId()]})),n},i.prototype.getValuesPivotNonLeaf=function(t,e){var i=[];return t.childrenAfterFilter.forEach((function(t){var n=t.aggData[e];i.push(n)})),i},i.prototype.getValuesFromMappedSet=function(t,e,i){var n=this,o=t;if(e.forEach((function(t){return o=o?o[t]:null})),!o)return[];var r=[];return o.forEach((function(t){var e=n.valueService.getValue(i,t);r.push(e)})),r},i.prototype.getValuesNormal=function(t,e,i){var n=[];e.forEach((function(){return n.push([])}));for(var o=e.length,r=i?t.childrenAfterFilter:t.childrenAfterGroup,s=r.length,a=0;a<s;a++)for(var l=r[a],c=0;c<o;c++){var d=e[c],u=this.valueService.getValue(d,l);n[c].push(u)}return n},i.prototype.aggregateValues=function(t,e,i,n,o){var r="string"==typeof e?this.aggFuncService.getAggFunc(e):e;return"function"!=typeof r?(console.error("AG Grid: unrecognised aggregation function ".concat(e)),null):r({values:t,column:i,colDef:i?i.getColDef():void 0,pivotResultColumn:o,rowNode:n,data:n?n.data:void 0,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context})},Gi([n("columnModel")],i.prototype,"columnModel",void 0),Gi([n("valueService")],i.prototype,"valueService",void 0),Gi([n("aggFuncService")],i.prototype,"aggFuncService",void 0),i=Gi([e("aggregationStage")],i)}(i),Vi=function(){function t(){this.allSets={},this.allParents=[]}return t.prototype.removeFromChildrenAfterGroup=function(t,e){this.getSet(t).removeFromChildrenAfterGroup[e.id]=!0},t.prototype.isRemoveFromAllLeafChildren=function(t,e){return!!this.getSet(t).removeFromAllLeafChildren[e.id]},t.prototype.preventRemoveFromAllLeafChildren=function(t,e){delete this.getSet(t).removeFromAllLeafChildren[e.id]},t.prototype.removeFromAllLeafChildren=function(t,e){this.getSet(t).removeFromAllLeafChildren[e.id]=!0},t.prototype.getSet=function(t){return this.allSets[t.id]||(this.allSets[t.id]={removeFromAllLeafChildren:{},removeFromChildrenAfterGroup:{}},this.allParents.push(t)),this.allSets[t.id]},t.prototype.getAllParents=function(){return this.allParents},t.prototype.flush=function(){var t=this;this.allParents.forEach((function(e){var i=t.allSets[e.id];e.childrenAfterGroup=e.childrenAfterGroup.filter((function(t){return!i.removeFromChildrenAfterGroup[t.id]})),e.allLeafChildren=e.allLeafChildren.filter((function(t){return!i.removeFromAllLeafChildren[t.id]})),e.updateHasChildren(),e.sibling&&(e.sibling.childrenAfterGroup=e.childrenAfterGroup,e.sibling.allLeafChildren=e.allLeafChildren)})),this.allSets={},this.allParents.length=0},t}(),ji=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wi=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},zi=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},Ui=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},Hi=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return ji(i,t),i.prototype.execute=function(t){var e=this.createGroupingDetails(t);if(e.transactions)this.handleTransaction(e);else{var i=!0===t.afterColumnsChanged;this.shotgunResetEverything(e,i)}e.usingTreeData||(this.positionLeafsAndGroups(t.changedPath),this.orderGroups(e)),this.selectableService.updateSelectableAfterGrouping()},i.prototype.positionLeafsAndGroups=function(t){t.forEachChangedNodeDepthFirst((function(t){if(t.childrenAfterGroup){var e,i=[],n=[];t.childrenAfterGroup.forEach((function(t){var o;(null===(o=t.childrenAfterGroup)||void 0===o?void 0:o.length)?""!==t.key||e?n.push(t):e=t:i.push(t)})),e&&n.push(e),t.childrenAfterGroup=Ui(Ui([],zi(i),!1),zi(n),!1)}}),!1)},i.prototype.createGroupingDetails=function(t){var e,i=t.rowNode,n=t.changedPath,o=t.rowNodeTransactions,r=t.rowNodeOrder,s=this.gridOptionsService.get("treeData"),a=s?null:this.columnModel.getRowGroupColumns();return{includeParents:!this.gridOptionsService.get("suppressParentsInRowNodes"),expandByDefault:this.gridOptionsService.get("groupDefaultExpanded"),groupedCols:a,rootNode:i,pivotMode:this.columnModel.isPivotMode(),groupedColCount:s||!a?0:a.length,rowNodeOrder:r,transactions:o,changedPath:n,groupAllowUnbalanced:this.gridOptionsService.get("groupAllowUnbalanced"),isGroupOpenByDefault:this.gridOptionsService.getCallback("isGroupOpenByDefault"),initialGroupOrderComparator:this.gridOptionsService.getCallback("initialGroupOrderComparator"),usingTreeData:s,suppressGroupMaintainValueType:this.gridOptionsService.get("suppressGroupMaintainValueType"),getDataPath:s?this.gridOptionsService.get("getDataPath"):void 0,keyCreators:null!==(e=null==a?void 0:a.map((function(t){return t.getColDef().keyCreator})))&&void 0!==e?e:[]}},i.prototype.handleTransaction=function(t){var e=this;t.transactions.forEach((function(i){var n=t.usingTreeData?void 0:new Vi;if(c.existsAndNotEmpty(i.remove)&&e.removeNodes(i.remove,t,n),c.existsAndNotEmpty(i.update)&&e.moveNodesInWrongPath(i.update,t,n),c.existsAndNotEmpty(i.add)&&e.insertNodes(i.add,t,!1),n){var o=n.getAllParents().slice();n.flush(),e.removeEmptyGroups(o,t)}})),t.rowNodeOrder&&this.sortChildren(t)},i.prototype.sortChildren=function(t){t.changedPath.forEachChangedNodeDepthFirst((function(e){e.childrenAfterGroup&&(c.sortRowNodesByOrder(e.childrenAfterGroup,t.rowNodeOrder)&&t.changedPath.addParentNode(e))}),!1,!0)},i.prototype.orderGroups=function(t){var e=t.initialGroupOrderComparator;c.exists(e)&&function t(i){c.exists(i.childrenAfterGroup)&&!i.leafGroup&&(i.childrenAfterGroup.sort((function(t,i){return e({nodeA:t,nodeB:i})})),i.childrenAfterGroup.forEach((function(e){return t(e)})))}(t.rootNode)},i.prototype.getExistingPathForNode=function(t,e){for(var i=[],n=e.usingTreeData?t:t.parent;n&&n!==e.rootNode;)i.push({key:n.key,rowGroupColumn:n.rowGroupColumn,field:n.field}),n=n.parent;return i.reverse(),i},i.prototype.moveNodesInWrongPath=function(t,e,i){var n=this;t.forEach((function(t){e.changedPath.isActive()&&e.changedPath.addParentNode(t.parent);var o=function(t){return t.key},r=n.getExistingPathForNode(t,e).map(o),s=n.getGroupInfo(t,e).map(o);c.areEqual(r,s)||n.moveNode(t,e,i)}))},i.prototype.moveNode=function(t,e,i){if(this.removeNodesInStages([t],e,i),this.insertOneNode(t,e,!0,i),t.setData(t.data),e.changedPath.isActive()){var n=t.parent;e.changedPath.addParentNode(n)}},i.prototype.removeNodes=function(t,e,i){this.removeNodesInStages(t,e,i),e.changedPath.isActive()&&t.forEach((function(t){return e.changedPath.addParentNode(t.parent)}))},i.prototype.removeNodesInStages=function(t,e,i){if(this.removeNodesFromParents(t,e,i),e.usingTreeData){this.postRemoveCreateFillerNodes(t,e);var n=t.map((function(t){return t.parent}));this.removeEmptyGroups(n,e)}},i.prototype.forEachParentGroup=function(t,e,i){for(var n=e;n&&n!==t.rootNode;)i(n),n=n.parent},i.prototype.removeNodesFromParents=function(t,e,i){var n=this,o=null==i,r=i||new Vi;t.forEach((function(t){n.removeFromParent(t,r),n.forEachParentGroup(e,t.parent,(function(e){r.removeFromAllLeafChildren(e,t)}))})),o&&r.flush()},i.prototype.postRemoveCreateFillerNodes=function(t,e){var i=this;t.forEach((function(t){if(t.hasChildren()){var n=i.getExistingPathForNode(t,e),o=i.findParentForNode(t,n,e);o.expanded=t.expanded,o.allLeafChildren=t.allLeafChildren,o.childrenAfterGroup=t.childrenAfterGroup,o.childrenMapped=t.childrenMapped,o.updateHasChildren(),o.childrenAfterGroup.forEach((function(t){return t.parent=o}))}}))},i.prototype.removeEmptyGroups=function(t,e){for(var i=this,n=!0,o=function(){n=!1;var o=new Vi;t.forEach((function(t){i.forEachParentGroup(e,t,(function(t){(function(t){var e=i.getChildrenMappedKey(t.key,t.rowGroupColumn),n=t.parent;return!(!n||!n.childrenMapped||!n.childrenMapped[e])&&!!t.isEmptyRowGroupNode()})(t)&&(n=!0,i.removeFromParent(t,o),t.setSelectedParams({newValue:!1,source:"rowGroupChanged"}))}))})),o.flush()};n;)o()},i.prototype.removeFromParent=function(t,e){t.parent&&(e?e.removeFromChildrenAfterGroup(t.parent,t):(c.removeFromArray(t.parent.childrenAfterGroup,t),t.parent.updateHasChildren()));var i=this.getChildrenMappedKey(t.key,t.rowGroupColumn);t.parent&&t.parent.childrenMapped&&(t.parent.childrenMapped[i]=void 0),t.setRowTop(null),t.setRowIndex(null)},i.prototype.addToParent=function(t,e){var i=this.getChildrenMappedKey(t.key,t.rowGroupColumn);e&&(null!=e.childrenMapped&&(e.childrenMapped[i]=t),e.childrenAfterGroup.push(t),e.updateHasChildren())},i.prototype.areGroupColsEqual=function(t,e){return null!=t&&null!=e&&t.pivotMode===e.pivotMode&&(c.areEqual(t.groupedCols,e.groupedCols)&&c.areEqual(t.keyCreators,e.keyCreators))},i.prototype.checkAllGroupDataAfterColsChanged=function(t){var e=this,i=function(n){n&&n.forEach((function(n){if(!(!t.usingTreeData&&!n.group)){var o={field:n.field,key:n.key,rowGroupColumn:n.rowGroupColumn,leafNode:n.allLeafChildren[0]};e.setGroupData(n,o,t),i(n.childrenAfterGroup)}}))};i(t.rootNode.childrenAfterGroup)},i.prototype.shotgunResetEverything=function(t,e){if(!this.noChangeInGroupingColumns(t,e)){this.selectionService.filterFromSelection((function(t){return t&&!t.group}));var i=t.rootNode,n=t.groupedCols;i.leafGroup=!t.usingTreeData&&0===n.length,i.childrenAfterGroup=[],i.childrenMapped={},i.updateHasChildren();var o=i.sibling;o&&(o.childrenAfterGroup=i.childrenAfterGroup,o.childrenMapped=i.childrenMapped),this.insertNodes(i.allLeafChildren,t,!1)}},i.prototype.noChangeInGroupingColumns=function(t,e){var i=!1,n=this.columnModel.getGroupDisplayColumns(),o=n?n.map((function(t){return t.getId()})).join("-"):"";return e&&(i=t.usingTreeData||this.areGroupColsEqual(t,this.oldGroupingDetails),this.oldGroupDisplayColIds!==o&&this.checkAllGroupDataAfterColsChanged(t)),this.oldGroupingDetails=t,this.oldGroupDisplayColIds=o,i},i.prototype.insertNodes=function(t,e,i){var n=this;t.forEach((function(t){n.insertOneNode(t,e,i),e.changedPath.isActive()&&e.changedPath.addParentNode(t.parent)}))},i.prototype.insertOneNode=function(t,e,i,n){var o=this.getGroupInfo(t,e),r=this.findParentForNode(t,o,e,n);r.group||console.warn("AG Grid: duplicate group keys for row data, keys should be unique",[r.data,t.data]),e.usingTreeData?this.swapGroupWithUserNode(r,t,i):(t.parent=r,t.level=o.length,r.childrenAfterGroup.push(t),r.updateHasChildren())},i.prototype.findParentForNode=function(t,e,i,n){var o=this,r=i.rootNode;return e.forEach((function(e,s){r=o.getOrCreateNextNode(r,e,s,i),(null==n?void 0:n.isRemoveFromAllLeafChildren(r,t))?null==n||n.preventRemoveFromAllLeafChildren(r,t):r.allLeafChildren.push(t)})),r},i.prototype.swapGroupWithUserNode=function(t,e,i){e.parent=t.parent,e.key=t.key,e.field=t.field,e.groupData=t.groupData,e.level=t.level,i||(e.expanded=t.expanded),e.leafGroup=t.leafGroup,e.rowGroupIndex=t.rowGroupIndex,e.allLeafChildren=t.allLeafChildren,e.childrenAfterGroup=t.childrenAfterGroup,e.childrenMapped=t.childrenMapped,e.sibling=t.sibling,e.updateHasChildren(),this.removeFromParent(t),e.childrenAfterGroup.forEach((function(t){return t.parent=e})),this.addToParent(e,t.parent)},i.prototype.getOrCreateNextNode=function(t,e,i,n){var o=this.getChildrenMappedKey(e.key,e.rowGroupColumn),r=t.childrenMapped?t.childrenMapped[o]:void 0;return r||(r=this.createGroup(e,t,i,n),this.addToParent(r,t)),r},i.prototype.createGroup=function(t,e,i,n){var o=new L(this.beans);return o.group=!0,o.field=t.field,o.rowGroupColumn=t.rowGroupColumn,this.setGroupData(o,t,n),o.key=t.key,o.id=this.createGroupId(o,e,n.usingTreeData,i),o.level=i,o.leafGroup=!n.usingTreeData&&i===n.groupedColCount-1,o.allLeafChildren=[],o.setAllChildrenCount(0),o.rowGroupIndex=n.usingTreeData?null:i,o.childrenAfterGroup=[],o.childrenMapped={},o.updateHasChildren(),o.parent=n.includeParents?e:null,this.setExpandedInitialValue(n,o),o},i.prototype.createGroupId=function(t,e,i,n){var o;return o=i?function(t,e,i){if(i<0)return null;var n=e?o(e,e.parent,i-1):null;return"".concat(null==n?"":n+"-").concat(i,"-").concat(t.key)}:function(t,e){if(!t.rowGroupColumn)return null;var i=e?o(e,e.parent,0):null;return"".concat(null==i?"":i+"-").concat(t.rowGroupColumn.getColId(),"-").concat(t.key)},L.ID_PREFIX_ROW_GROUP+o(t,e,n)},i.prototype.setGroupData=function(t,e,i){var n=this;t.groupData={},this.columnModel.getGroupDisplayColumns().forEach((function(o){if(i.usingTreeData)t.groupData[o.getColId()]=e.key;else{var r=t.rowGroupColumn;null!==r&&o.isRowGroupDisplayed(r.getId())&&(i.suppressGroupMaintainValueType?t.groupData[o.getColId()]=e.key:t.groupData[o.getColId()]=n.valueService.getValue(r,e.leafNode))}}))},i.prototype.getChildrenMappedKey=function(t,e){return e?e.getId()+"-"+t:t},i.prototype.setExpandedInitialValue=function(t,e){if(t.pivotMode&&e.leafGroup)e.expanded=!1;else{var i=t.isGroupOpenByDefault;if(i){var n={rowNode:e,field:e.field,key:e.key,level:e.level,rowGroupColumn:e.rowGroupColumn};e.expanded=1==i(n)}else{var o=t.expandByDefault;-1!==t.expandByDefault?e.expanded=e.level<o:e.expanded=!0}}},i.prototype.getGroupInfo=function(t,e){return e.usingTreeData?this.getGroupInfoFromCallback(t,e):this.getGroupInfoFromGroupColumns(t,e)},i.prototype.getGroupInfoFromCallback=function(t,e){var i=e.getDataPath?e.getDataPath(t.data):null;null!=i&&0!==i.length||c.warnOnce("getDataPath() should not return an empty path for data ".concat(t.data));return i?i.map((function(t){return{key:t,field:null,rowGroupColumn:null}})):[]},i.prototype.getGroupInfoFromGroupColumns=function(t,e){var i=this,n=[];return e.groupedCols.forEach((function(o){var r=i.valueService.getKeyForNode(o,t),s=null!=r&&""!==r;if((e.pivotMode||!e.groupAllowUnbalanced)&&!s&&(r="",s=!0),s){var a={key:r,field:o.getColDef().field,rowGroupColumn:o,leafNode:t};n.push(a)}})),n},Wi([n("columnModel")],i.prototype,"columnModel",void 0),Wi([n("selectableService")],i.prototype,"selectableService",void 0),Wi([n("valueService")],i.prototype,"valueService",void 0),Wi([n("beans")],i.prototype,"beans",void 0),Wi([n("selectionService")],i.prototype,"selectionService",void 0),i=Wi([e("groupStage")],i)}(i),Ki=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yi=function(){return(Yi=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Xi=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},qi=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},$i=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},Zi=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}var o;return Ki(i,t),o=i,i.prototype.init=function(){var t=this,e=function(){var e;return null!==(e=t.gos.get("serverSidePivotResultFieldSeparator"))&&void 0!==e?e:"_"};this.fieldSeparator=e(),this.addManagedPropertyListener("serverSidePivotResultFieldSeparator",(function(){t.fieldSeparator=e()}));var i=function(){return t.gos.get("pivotDefaultExpanded")};this.pivotDefaultExpanded=i(),this.addManagedPropertyListener("pivotDefaultExpanded",(function(){t.pivotDefaultExpanded=i()}))},i.prototype.createPivotColumnDefs=function(t){var e=this.createPivotColumnsFromUniqueValues(t);var i=function t(e,i){return void 0===i&&(i=[]),e.forEach((function(e){void 0!==e.children?t(e.children,i):i.push(e)})),i}(e);return this.addRowGroupTotals(e,i),this.addExpandablePivotGroups(e,i),this.addPivotTotalsToGroups(e,i),{pivotColumnGroupDefs:e,pivotColumnDefs:i.map((function(t){return c.cloneObject(t)}))}},i.prototype.createPivotColumnsFromUniqueValues=function(t){var e=this.columnModel.getPivotColumns(),i=e.length;return this.recursivelyBuildGroup(0,t,[],i,e)},i.prototype.recursivelyBuildGroup=function(t,e,i,n,o){var r=this,s=this.columnModel.getValueColumns();if(t>=n)return this.buildMeasureCols(i);var a=o[t].getColDef(),l=this.headerNameComparator.bind(this,a.pivotComparator);if(1===s.length&&this.gridOptionsService.get("removePivotHeaderRowWhenSingleValueColumn")&&t===n-1){var d=[];return c.iterateObject(e,(function(t){var e=$i($i([],qi(i),!1),[t],!1),n=r.createColDef(s[0],t,e);n.columnGroupShow="open",d.push(n)})),d.sort(l),d}var u=[];return c.iterateObject(e,(function(e,s){var a=-1===r.pivotDefaultExpanded||t<r.pivotDefaultExpanded,l=$i($i([],qi(i),!1),[e],!1);u.push({children:r.recursivelyBuildGroup(t+1,s,l,n,o),headerName:e,pivotKeys:l,columnGroupShow:"open",openByDefault:a,groupId:r.generateColumnGroupId(l)})})),u.sort(l),u},i.prototype.buildMeasureCols=function(t){var e=this,i=this.columnModel.getValueColumns();return 0===i.length?[this.createColDef(null,"-",t)]:i.map((function(i){var n=e.columnModel.getDisplayNameForColumn(i,"header");return Yi(Yi({},e.createColDef(i,n,t)),{columnGroupShow:"open"})}))},i.prototype.addExpandablePivotGroups=function(t,e){var i=this;if(!this.gridOptionsService.get("suppressExpandablePivotGroups")&&!this.gridOptionsService.get("pivotColumnGroupTotals")){var n=function(t,e,o){var r=t;if(r.children){var s=new Map;r.children.forEach((function(t){n(t,e,s)}));var a=!r.children.some((function(t){return t.children}));i.columnModel.getValueColumns().forEach((function(n){var o=i.columnModel.getDisplayNameForColumn(n,"header"),r=i.createColDef(n,o,t.pivotKeys);(r.pivotTotalColumnIds=s.get(n.getColId()),r.columnGroupShow="closed",r.aggFunc=n.getAggFunc(),a)||(t.children.push(r),e.push(r))})),i.merge(o,s)}else{var l=t;if(!l.pivotValueColumn)return;var c=l.pivotValueColumn.getColId(),d=o.has(c)?o.get(c):[];d.push(l.colId),o.set(c,d)}};t.forEach((function(t){n(t,e,new Map)}))}},i.prototype.addPivotTotalsToGroups=function(t,e){var i=this;if(this.gridOptionsService.get("pivotColumnGroupTotals")){var n="after"===this.gridOptionsService.get("pivotColumnGroupTotals"),o=this.columnModel.getValueColumns(),r=o.map((function(t){return t.getAggFunc()}));if(r&&!(r.length<1)&&this.sameAggFuncs(r)){var s=o[0];t.forEach((function(t){i.recursivelyAddPivotTotal(t,e,s,n)}))}}},i.prototype.recursivelyAddPivotTotal=function(t,e,i,n){var o=this,r=t;if(!r.children){var s=t;return s.colId?[s.colId]:null}var a=[];if(r.children.forEach((function(t){var r=o.recursivelyAddPivotTotal(t,e,i,n);r&&(a=a.concat(r))})),r.children.length>1){var l=this.localeService.getLocaleTextFunc()("pivotColumnGroupTotals","Total"),c=this.createColDef(i,l,t.pivotKeys,!0);c.pivotTotalColumnIds=a,c.aggFunc=i.getAggFunc();var d=t.children;n?d.push(c):d.unshift(c),e.push(c)}return a},i.prototype.addRowGroupTotals=function(t,e){var i=this;if(this.gridOptionsService.get("pivotRowTotals"))for(var n="after"===this.gridOptionsService.get("pivotRowTotals"),o=this.columnModel.getValueColumns(),r=n?o.slice():o.slice().reverse(),s=function(o){var s=r[o],l=[];t.forEach((function(t){l=l.concat(i.extractColIdsForValueColumn(t,s))}));var c=r.length>1||!a.gridOptionsService.get("removePivotHeaderRowWhenSingleValueColumn");a.createRowGroupTotal(t,e,s,l,n,c)},a=this,l=0;l<r.length;l++)s(l)},i.prototype.extractColIdsForValueColumn=function(t,e){var i=this,n=t;if(!n.children){var o=n;return o.pivotValueColumn===e&&o.colId?[o.colId]:[]}var r=[];return n.children.forEach((function(t){i.extractColIdsForValueColumn(t,e);var n=i.extractColIdsForValueColumn(t,e);r=r.concat(n)})),r},i.prototype.createRowGroupTotal=function(t,e,i,n,r,s){var a;if(0===this.columnModel.getValueColumns().length)a=this.createColDef(null,"-",[]);else{var l=this.columnModel.getDisplayNameForColumn(i,"header");(a=this.createColDef(i,l,[])).pivotTotalColumnIds=n}a.colId=o.PIVOT_ROW_TOTAL_PREFIX+a.colId,e.push(a);var c=s?{children:[a],pivotKeys:[],groupId:"".concat(o.PIVOT_ROW_TOTAL_PREFIX,"_pivotGroup_").concat(i.getColId())}:a;r?t.push(c):t.unshift(c)},i.prototype.createColDef=function(t,e,i,n){void 0===n&&(n=!1);var o={};if(t){var r=t.getColDef();Object.assign(o,r),o.hide=!1}return o.headerName=e,o.colId=this.generateColumnId(i||[],t&&!n?t.getColId():""),o.field=o.colId,o.valueGetter=function(t){var e;return null===(e=t.data)||void 0===e?void 0:e[t.colDef.field]},o.pivotKeys=i,o.pivotValueColumn=t,!0===o.filter&&(o.filter="agNumberColumnFilter"),o},i.prototype.sameAggFuncs=function(t){if(1==t.length)return!0;for(var e=1;e<t.length;e++)if(t[e]!==t[0])return!1;return!0},i.prototype.headerNameComparator=function(t,e,i){return t?t(e.headerName,i.headerName):e.headerName&&!i.headerName?1:!e.headerName&&i.headerName?-1:e.headerName&&i.headerName?e.headerName<i.headerName?-1:e.headerName>i.headerName?1:0:0},i.prototype.merge=function(t,e){e.forEach((function(e,i,n){var o=t.has(i)?t.get(i):[],r=$i($i([],qi(o),!1),qi(e),!1);t.set(i,r)}))},i.prototype.generateColumnGroupId=function(t){var e=this.columnModel.getPivotColumns().map((function(t){return t.getColId()}));return"pivotGroup_".concat(e.join("-"),"_").concat(t.join("-"))},i.prototype.generateColumnId=function(t,e){var i=this.columnModel.getPivotColumns().map((function(t){return t.getColId()}));return"pivot_".concat(i.join("-"),"_").concat(t.join("-"),"_").concat(e)},i.prototype.createColDefsFromFields=function(t){for(var e=this,i={},n=0;n<t.length;n++)for(var o=t[n].split(this.fieldSeparator),r=i,s=0;s<o.length;s++){var a=o[s];null==r[a]&&(r[a]={}),r=r[a]}var l=function(t,i,n,o){var r,s=[];for(var a in n){var c=n[a],d=l("".concat(t).concat(e.fieldSeparator).concat(a),a,c,o+1);s.push(d)}if(0===s.length){var u={colId:t,headerName:i,valueGetter:function(e){var i;return null===(i=e.data)||void 0===i?void 0:i[t]}},h=e.columnModel.getPrimaryColumn(i);return h&&(u.headerName=null!==(r=e.columnModel.getDisplayNameForColumn(h,"header"))&&void 0!==r?r:i,u.aggFunc=h.getAggFunc(),u.pivotValueColumn=h),u}return e.gridOptionsService.get("removePivotHeaderRowWhenSingleValueColumn")&&1===s.length&&"colId"in s[0]?(s[0].headerName=i,s[0]):{openByDefault:-1===e.pivotDefaultExpanded||o<e.pivotDefaultExpanded,groupId:t,headerName:i,children:s}},c=[];for(var d in i){var u=l(d,d,i[d],0);c.push(u)}return c},i.PIVOT_ROW_TOTAL_PREFIX="PivotRowTotal_",Xi([n("columnModel")],i.prototype,"columnModel",void 0),Xi([n("gridOptionsService")],i.prototype,"gos",void 0),Xi([r],i.prototype,"init",null),i=o=Xi([e("pivotColDefService")],i)}(i),Ji=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Qi=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},tn=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.uniqueValues={},e}return Ji(i,t),i.prototype.execute=function(t){var e=t.changedPath;this.columnModel.isPivotActive()?this.executePivotOn(e):this.executePivotOff(e)},i.prototype.executePivotOff=function(t){this.aggregationColumnsHashLastTime=null,this.uniqueValues={},this.columnModel.isSecondaryColumnsPresent()&&(this.columnModel.setSecondaryColumns(null,"rowModelUpdated"),t&&t.setInactive())},i.prototype.executePivotOn=function(t){var e=this.bucketUpRowNodes(t),i=this.setUniqueValues(e),n=this.columnModel.getValueColumns(),o=n.map((function(t){return"".concat(t.getId(),"-").concat(t.getColDef().headerName)})).join("#"),r=n.map((function(t){return t.getAggFunc().toString()})).join("#"),s=this.aggregationColumnsHashLastTime!==o,a=this.aggregationFuncsHashLastTime!==r;this.aggregationColumnsHashLastTime=o,this.aggregationFuncsHashLastTime=r;var l=this.columnModel.getRowGroupColumns().map((function(t){return t.getId()})).join("#"),c=l!==this.groupColumnsHashLastTime;this.groupColumnsHashLastTime=l;var d=this.gridOptionsService.get("pivotRowTotals"),u=this.gridOptionsService.get("pivotColumnGroupTotals"),h=this.gridOptionsService.get("suppressExpandablePivotGroups"),p=this.gridOptionsService.get("removePivotHeaderRowWhenSingleValueColumn"),f=d!==this.pivotRowTotalsLastTime||u!==this.pivotColumnGroupTotalsLastTime||h!==this.suppressExpandablePivotGroupsLastTime||p!==this.removePivotHeaderRowWhenSingleValueColumnLastTime;if(this.pivotRowTotalsLastTime=d,this.pivotColumnGroupTotalsLastTime=u,this.suppressExpandablePivotGroupsLastTime=h,this.removePivotHeaderRowWhenSingleValueColumnLastTime=p,i||s||c||a||f){var g=this.pivotColDefService.createPivotColumnDefs(this.uniqueValues),v=g.pivotColumnGroupDefs,y=g.pivotColumnDefs;this.pivotColumnDefs=y,this.columnModel.setSecondaryColumns(v,"rowModelUpdated"),t&&t.setInactive()}},i.prototype.setUniqueValues=function(t){return!!(JSON.stringify(t)!==JSON.stringify(this.uniqueValues))&&(this.uniqueValues=t,!0)},i.prototype.bucketUpRowNodes=function(t){var e=this,i={};t.forEachChangedNodeDepthFirst((function(t){t.leafGroup&&(t.childrenMapped=null)}));var n=function(t){var o;t.leafGroup?e.bucketRowNode(t,i):null===(o=t.childrenAfterFilter)||void 0===o||o.forEach(n)};return t.executeFromRootNode(n),i},i.prototype.bucketRowNode=function(t,e){var i=this.columnModel.getPivotColumns();0===i.length?t.childrenMapped=null:t.childrenMapped=this.bucketChildren(t.childrenAfterFilter,i,0,e),t.sibling&&(t.sibling.childrenMapped=t.childrenMapped)},i.prototype.bucketChildren=function(t,e,i,n){var o=this,r={},s=e[i];if(t.forEach((function(t){var e=o.valueService.getKeyForNode(s,t);c.missing(e)&&(e=""),n[e]||(n[e]={}),r[e]||(r[e]=[]),r[e].push(t)})),i===e.length-1)return r;var a={};return c.iterateObject(r,(function(t,r){a[t]=o.bucketChildren(r,e,i+1,n[t])})),a},i.prototype.getPivotColumnDefs=function(){return this.pivotColumnDefs},Qi([n("valueService")],i.prototype,"valueService",void 0),Qi([n("columnModel")],i.prototype,"columnModel",void 0),Qi([n("pivotColDefService")],i.prototype,"pivotColDefService",void 0),i=Qi([e("pivotStage")],i)}(i),en=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),nn=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},on="undefined"==typeof BigInt?null:BigInt,rn={sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average"},sn=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.aggFuncsMap={},e.initialised=!1,e}var n;return en(i,t),n=i,i.prototype.init=function(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gridOptionsService.get("aggFuncs")))},i.prototype.initialiseWithDefaultAggregations=function(){this.aggFuncsMap[n.AGG_SUM]=an,this.aggFuncsMap[n.AGG_FIRST]=ln,this.aggFuncsMap[n.AGG_LAST]=cn,this.aggFuncsMap[n.AGG_MIN]=dn,this.aggFuncsMap[n.AGG_MAX]=un,this.aggFuncsMap[n.AGG_COUNT]=hn,this.aggFuncsMap[n.AGG_AVG]=pn,this.initialised=!0},i.prototype.isAggFuncPossible=function(t,e){var i=this.getFuncNames(t),n=c.includes(i,e),o=c.exists(this.aggFuncsMap[e]);return n&&o},i.prototype.getDefaultFuncLabel=function(t){var e;return null!==(e=rn[t])&&void 0!==e?e:t},i.prototype.getDefaultAggFunc=function(t){var e=t.getColDef().defaultAggFunc;if(c.exists(e)&&this.isAggFuncPossible(t,e))return e;if(this.isAggFuncPossible(t,n.AGG_SUM))return n.AGG_SUM;var i=this.getFuncNames(t);return c.existsAndNotEmpty(i)?i[0]:null},i.prototype.addAggFuncs=function(t){c.iterateObject(t,this.addAggFunc.bind(this))},i.prototype.addAggFunc=function(t,e){this.init(),this.aggFuncsMap[t]=e},i.prototype.getAggFunc=function(t){return this.init(),this.aggFuncsMap[t]},i.prototype.getFuncNames=function(t){var e=t.getColDef().allowedAggFuncs;return null==e?Object.keys(this.aggFuncsMap).sort():e},i.prototype.clear=function(){this.aggFuncsMap={}},i.AGG_SUM="sum",i.AGG_FIRST="first",i.AGG_LAST="last",i.AGG_MIN="min",i.AGG_MAX="max",i.AGG_COUNT="count",i.AGG_AVG="avg",nn([r],i.prototype,"init",null),i=n=nn([e("aggFuncService")],i)}(i);function an(t){for(var e=t.values,i=null,n=0;n<e.length;n++){var o=e[n];"number"==typeof o?null===i?i=o:i+=on?"number"==typeof i?o:on(o):o:"bigint"==typeof o&&(i=null===i?o:("bigint"==typeof i?i:on(i))+o)}return i}function ln(t){return t.values.length>0?t.values[0]:null}function cn(t){return t.values.length>0?c.last(t.values):null}function dn(t){for(var e=t.values,i=null,n=0;n<e.length;n++){var o=e[n];"number"!=typeof o&&"bigint"!=typeof o||!(null===i||i>o)||(i=o)}return i}function un(t){for(var e=t.values,i=null,n=0;n<e.length;n++){var o=e[n];"number"!=typeof o&&"bigint"!=typeof o||!(null===i||i<o)||(i=o)}return i}function hn(t){for(var e,i,n=t.values,o=0,r=0;r<n.length;r++){var s=n[r];o+=null!=s&&"number"==typeof s.value?s.value:1}var a=null===(i=null===(e=t.rowNode)||void 0===e?void 0:e.aggData)||void 0===i?void 0:i[t.column.getColId()];return a&&a.value===o?a:{value:o,toString:function(){return this.value.toString()},toNumber:function(){return this.value}}}function pn(t){for(var e,i,n,o=t.values,r=0,s=0,a=0;a<o.length;a++){var l=o[a],c=null;"number"==typeof l||"bigint"==typeof l?(c=l,s++):null==l||"number"!=typeof l.value&&"bigint"!=typeof l.value||"number"!=typeof l.count||(c=on?l.value*("number"==typeof l.value?l.count:on(l.count)):l.value*l.count,s+=l.count),"number"==typeof c?r+=on?"number"==typeof r?c:on(c):c:"bigint"==typeof c&&(r=("bigint"==typeof r?r:on(r))+c)}var d=null;s>0&&(d=on?r/("number"==typeof r?s:on(s)):r/s);var u=null===(i=null===(e=t.rowNode)||void 0===e?void 0:e.aggData)||void 0===i?void 0:i[null===(n=t.column)||void 0===n?void 0:n.getColId()];return u&&u.count===s&&u.value===d?u:{count:s,value:d,toString:function(){return"number"==typeof this.value||"bigint"==typeof this.value?this.value.toString():""},toNumber:function(){return this.value}}}var fn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gn=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},vn=function(t){function e(e,i,n,o,r){var s=t.call(this)||this;return s.column=e,s.dragSourceDropTarget=i,s.ghost=n,s.dropZonePurpose=o,s.horizontal=r,s.popupShowing=!1,s}return fn(e,t),e.prototype.init=function(){var t=this;this.setTemplate(e.TEMPLATE);var i=this.getGui(),n=this.gridOptionsService.get("functionsReadOnly");this.addElementClasses(i),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(c.createIconNoSpan("columnDrag",this.gridOptionsService)),this.eButton.appendChild(c.createIconNoSpan("cancel",this.gridOptionsService)),this.setupSort(),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnDrop"),this.setupComponents(),this.ghost||n||this.addDragSource(),this.setupAria(),this.addManagedListener(this.eventService,A.EVENT_SORT_CHANGED,(function(){t.setupAria()})),this.setupTooltip(),this.activateTabIndex();var o=function(){var e=t.isGroupingAndLocked();c.setDisplayed(t.eButton,!e&&!t.gridOptionsService.get("functionsReadOnly")),t.eDragHandle.classList.toggle("ag-column-select-column-readonly",e),t.setupAria()};o(),this.isGroupingZone()&&this.addManagedPropertyListener("groupLockGroupColumns",(function(){return o()}))},e.prototype.setupAria=function(){var t=this.localeService.getLocaleTextFunc(),e=this.getColumnAndAggFuncName(),i=e.name,n=e.aggFuncName,o=t("ariaDropZoneColumnComponentAggFuncSeparator"," of "),r={asc:t("ariaDropZoneColumnComponentSortAscending","ascending"),desc:t("ariaDropZoneColumnComponentSortDescending","descending")},s=this.column.getSort(),a=this.gridOptionsService.get("rowGroupPanelSuppressSort"),l=[[n&&"".concat(n).concat(o),i,this.isGroupingZone()&&!a&&s&&", ".concat(r[s])].filter((function(t){return!!t})).join("")],d=this.gridOptionsService.get("functionsReadOnly");if(this.isAggregationZone()&&!d){var u=t("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type");l.push(u)}if(this.isGroupingZone()&&this.column.isSortable()&&!a){var h=t("ariaDropZoneColumnGroupItemDescription","Press ENTER to sort");l.push(h)}if(!this.isGroupingAndLocked()){var p=t("ariaDropZoneColumnComponentDescription","Press DELETE to remove");l.push(p)}c.setAriaLabel(this.getGui(),l.join(". "))},e.prototype.setupTooltip=function(){var t=this,e=function(){var e=t.column.getColDef().headerTooltip;t.setTooltip(e)};e(),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,e)},e.prototype.setupSort=function(){var t=this,e=this.column.isSortable(),i=this.isGroupingZone();if(e&&i&&!this.gridOptionsService.get("rowGroupPanelSuppressSort")){this.eSortIndicator.setupSort(this.column,!0);var n=function(e){e.preventDefault();var i="ctrl"===t.gridOptionsService.get("multiSortKey")?e.ctrlKey||e.metaKey:e.shiftKey;t.sortController.progressSort(t.column,i,"uiColumnSorted")};this.addGuiEventListener("click",n),this.addGuiEventListener("keydown",(function(e){e.key===d.ENTER&&t.isGroupingZone()&&n(e)}))}},e.prototype.addDragSource=function(){var t=this,e={type:p.ToolPanel,eElement:this.eDragHandle,getDefaultIconName:function(){return m.ICON_HIDE},getDragItem:function(){return t.createDragItem()},dragItemName:this.displayName,dragSourceDropTarget:this.dragSourceDropTarget};this.dragAndDropService.addDragSource(e,!0),this.addDestroyFunc((function(){return t.dragAndDropService.removeDragSource(e)}))},e.prototype.createDragItem=function(){var t={};return t[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:t}},e.prototype.setupComponents=function(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost"),this.isAggregationZone()&&!this.gridOptionsService.get("functionsReadOnly")&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))},e.prototype.isGroupingAndLocked=function(){return this.isGroupingZone()&&this.columnModel.isColumnGroupingLocked(this.column)},e.prototype.setupRemove=function(){var t=this;c.setDisplayed(this.eButton,!this.isGroupingAndLocked()&&!this.gridOptionsService.get("functionsReadOnly"));var i={type:e.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",(function(e){var n=e.key===d.ENTER;e.key===d.DELETE&&(t.isGroupingAndLocked()||(e.preventDefault(),t.dispatchEvent(i))),n&&t.isAggregationZone()&&!t.gridOptionsService.get("functionsReadOnly")&&(e.preventDefault(),t.onShowAggFuncSelection())})),this.addManagedListener(this.eButton,"click",(function(e){t.dispatchEvent(i),e.stopPropagation()}));var n=new P(this.eButton);this.addManagedListener(n,P.EVENT_TAP,(function(){t.dispatchEvent(i)})),this.addDestroyFunc(n.destroy.bind(n))},e.prototype.getColumnAndAggFuncName=function(){var t=this.displayName,e="";if(this.isAggregationZone()){var i=this.column.getAggFunc(),n="string"==typeof i?i:"agg";e=this.localeService.getLocaleTextFunc()(n,n)}return{name:t,aggFuncName:e}},e.prototype.setTextValue=function(){var t=this.getColumnAndAggFuncName(),e=t.name,i=t.aggFuncName,n=this.isAggregationZone()?"".concat(i,"(").concat(e,")"):e,o=c.escapeString(n);this.eText.innerHTML=o},e.prototype.onShowAggFuncSelection=function(){var t=this;if(!this.popupShowing){this.popupShowing=!0;var e=new S({cssIdentifier:"select-agg-func"}),i=this.aggFuncService.getFuncNames(this.column),n=this.getGui(),o=e.getGui();e.setModel({getRow:function(t){return i[t]},getRowCount:function(){return i.length}}),this.getContext().createBean(e);var r=c.loadTemplate('<div class="ag-select-agg-func-popup"></div>');r.style.top="0px",r.style.left="0px",r.appendChild(o),r.style.width="".concat(n.clientWidth,"px");var s=this.addManagedListener(r,"focusout",(function(t){!r.contains(t.relatedTarget)&&l&&l.hideFunc()})),a=this.localeService.getLocaleTextFunc(),l=this.popupService.addPopup({modal:!0,eChild:r,closeOnEsc:!0,closedCallback:function(i){t.destroyBean(e),t.popupShowing=!1,"Escape"===(null==i?void 0:i.key)&&n.focus(),s&&s()},ariaLabel:a("ariaLabelAggregationFunction","Aggregation Function")});l&&e.setComponentCreator(this.createAggSelect.bind(this,l.hideFunc)),e.addGuiEventListener("keydown",(function(t){if(t.key===d.ENTER||t.key===d.SPACE){var i=e.getLastFocusedRow();if(null==i)return;var n=e.getComponentAt(i);n&&n.selectItem()}})),this.popupService.positionPopupByComponent({type:"aggFuncSelect",eventSource:n,ePopup:r,keepWithinBounds:!0,column:this.column,position:"under"}),e.refresh();var u=i.findIndex((function(e){return e===t.column.getAggFunc()}));-1===u&&(u=0),e.focusRow(u)}},e.prototype.createAggSelect=function(t,e){var i=this,n=this.localeService.getLocaleTextFunc(),o=e.toString(),r=n(o,o);return new yn((function(){if(t(),i.gridOptionsService.get("functionsPassive")){var n={type:l.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST,columns:[i.column],aggFunc:e};i.eventService.dispatchEvent(n)}else i.columnModel.setColumnAggFunc(i.column,e,"toolPanelDragAndDrop")}),r)},e.prototype.addElementClasses=function(t,e){e=e?"-".concat(e):"";var i=this.horizontal?"horizontal":"vertical";t.classList.add("ag-column-drop-cell".concat(e),"ag-column-drop-".concat(i,"-cell").concat(e))},e.prototype.isAggregationZone=function(){return"aggregation"===this.dropZonePurpose},e.prototype.isGroupingZone=function(){return"rowGroup"===this.dropZonePurpose},e.EVENT_COLUMN_REMOVE="columnRemove",e.TEMPLATE='<span role="option">\n          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>\n          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>\n          <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>\n          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>\n        </span>',gn([n("dragAndDropService")],e.prototype,"dragAndDropService",void 0),gn([n("columnModel")],e.prototype,"columnModel",void 0),gn([n("popupService")],e.prototype,"popupService",void 0),gn([E("aggFuncService")],e.prototype,"aggFuncService",void 0),gn([n("sortController")],e.prototype,"sortController",void 0),gn([o("eText")],e.prototype,"eText",void 0),gn([o("eDragHandle")],e.prototype,"eDragHandle",void 0),gn([o("eButton")],e.prototype,"eButton",void 0),gn([o("eSortIndicator")],e.prototype,"eSortIndicator",void 0),gn([r],e.prototype,"init",null),e}(s),yn=function(t){function e(e,i){var n=t.call(this,'<div class="ag-select-agg-func-item"/>')||this;return n.selectItem=e,n.getGui().innerText=i,n.addGuiEventListener("click",n.selectItem),n}return fn(e,t),e}(s),mn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),bn=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Sn=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},xn=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},Cn=function(t){function e(i,n){var o=t.call(this,'<div class="ag-unselectable" role="presentation"></div>')||this;return o.horizontal=i,o.dropZonePurpose=n,o.state=e.STATE_NOT_DRAGGING,o.guiDestroyFunctions=[],o.childColumnComponents=[],o.resizeEnabled=!1,o.addElementClasses(o.getGui()),o.eColumnDropList=document.createElement("div"),o.addElementClasses(o.eColumnDropList,"list"),c.setAriaRole(o.eColumnDropList,"listbox"),o}return mn(e,t),e.prototype.isHorizontal=function(){return this.horizontal},e.prototype.toggleResizable=function(t){this.positionableFeature.setResizable(!!t&&{bottom:!0}),this.resizeEnabled=t},e.prototype.setBeans=function(t){this.beans=t},e.prototype.destroy=function(){this.destroyGui(),t.prototype.destroy.call(this)},e.prototype.destroyGui=function(){this.guiDestroyFunctions.forEach((function(t){return t()})),this.guiDestroyFunctions.length=0,this.childColumnComponents.length=0,c.clearElement(this.getGui()),c.clearElement(this.eColumnDropList)},e.prototype.init=function(t){this.params=t,this.createManagedBean(new I(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.addManagedListener(this.beans.eventService,l.EVENT_NEW_COLUMNS_LOADED,this.refreshGui.bind(this)),this.addManagedPropertyListeners(["functionsReadOnly","rowGroupPanelSuppressSort","groupLockGroupColumns"],this.refreshGui.bind(this)),this.setupDropTarget(),this.positionableFeature=new F(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),c.setAriaLabel(this.eColumnDropList,this.getAriaLabel())},e.prototype.handleKeyDown=function(t){var e=!this.horizontal,i=t.key===d.DOWN,n=t.key===d.UP;if(!e){var o=this.gridOptionsService.get("enableRtl");i=!o&&t.key===d.RIGHT||o&&t.key===d.LEFT,n=!o&&t.key===d.LEFT||o&&t.key===d.RIGHT}if(i||n){var r=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,n);r&&(t.preventDefault(),r.focus())}},e.prototype.addElementClasses=function(t,e){e=e?"-".concat(e):"";var i=this.horizontal?"horizontal":"vertical";t.classList.add("ag-column-drop".concat(e),"ag-column-drop-".concat(i).concat(e))},e.prototype.setupDropTarget=function(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.beans.dragAndDropService.addDropTarget(this.dropTarget)},e.prototype.isInterestedIn=function(t){return t===p.HeaderCell||t===p.ToolPanel},e.prototype.minimumAllowedNewInsertIndex=function(){var t=this.gridOptionsService.get("groupLockGroupColumns"),e=this.colModel.getRowGroupColumns().length;return-1===t?e:Math.min(t,e)},e.prototype.checkInsertIndex=function(t){var e=this.getNewInsertIndex(t);if(e<0)return!1;var i=this.minimumAllowedNewInsertIndex(),n=Math.max(i,e),o=n!==this.insertIndex;return o&&(this.insertIndex=n),o},e.prototype.getNewInsertIndex=function(t){var e=this,i=t.event,n=this.horizontal?i.clientX:i.clientY,o=this.childColumnComponents.map((function(t){return t.getGui().getBoundingClientRect()})),r=o.findIndex((function(t){return e.horizontal?t.right>n&&t.left<n:t.top<n&&t.bottom>n}));if(-1===r){var s=this.beans.gridOptionsService.get("enableRtl");return o.every((function(t){return n>(e.horizontal?t.right:t.bottom)}))?s&&this.horizontal?0:this.childColumnComponents.length:o.every((function(t){return n<(e.horizontal?t.left:t.top)}))?s&&this.horizontal?this.childColumnComponents.length:0:this.insertIndex}return this.insertIndex<=r?r+1:r},e.prototype.checkDragStartedBySelf=function(t){this.state===e.STATE_NOT_DRAGGING&&(this.state=e.STATE_REARRANGE_COLUMNS,this.potentialDndColumns=t.dragSource.getDragItem().columns||[],this.refreshGui(),this.checkInsertIndex(t),this.refreshGui())},e.prototype.onDragging=function(t){this.checkDragStartedBySelf(t),this.checkInsertIndex(t)&&this.refreshGui()},e.prototype.onDragEnter=function(t){var i=t.dragSource.getDragItem().columns||[];this.state=e.STATE_NEW_COLUMNS_IN;var n=i.filter(this.isColumnDroppable.bind(this));if(n.length>0){if(this.isRowGroupPanel()&&!this.gridOptionsService.get("suppressRowGroupHidesColumns")&&!t.fromNudge){var o=t.dragSource.getDragItem().columns;this.setColumnsVisible(o,!1,"uiColumnDragged")}this.potentialDndColumns=n,this.checkInsertIndex(t),this.refreshGui()}},e.prototype.setColumnsVisible=function(t,e,i){if(void 0===i&&(i="api"),t){var n=t.filter((function(t){return!t.getColDef().lockVisible}));this.colModel.setColumnsVisible(n,e,i)}},e.prototype.isPotentialDndColumns=function(){return c.existsAndNotEmpty(this.potentialDndColumns)},e.prototype.isRowGroupPanel=function(){return"rowGroup"===this.dropZonePurpose},e.prototype.onDragLeave=function(t){if(this.state===e.STATE_REARRANGE_COLUMNS){var i=t.dragSource.getDragItem().columns||[];this.removeColumns(i)}if(this.isPotentialDndColumns()){if(this.isRowGroupPanel()&&!this.gridOptionsService.get("suppressMakeColumnVisibleAfterUnGroup")&&!t.fromNudge){var n=t.dragSource.getDragItem();this.setColumnsVisible(n.columns,!0,"uiColumnDragged")}this.potentialDndColumns=[],this.refreshGui()}this.state=e.STATE_NOT_DRAGGING},e.prototype.onDragStop=function(){if(this.isPotentialDndColumns()){var t=!1;this.state===e.STATE_NEW_COLUMNS_IN?(this.addColumns(this.potentialDndColumns),t=!0):t=this.rearrangeColumns(this.potentialDndColumns),this.potentialDndColumns=[],this.beans.gridOptionsService.get("functionsPassive")&&t||this.refreshGui()}this.state=e.STATE_NOT_DRAGGING},e.prototype.removeColumns=function(t){var e=this.getExistingColumns().filter((function(e){return!c.includes(t,e)}));this.updateColumns(e)},e.prototype.addColumns=function(t){if(t){var e=this.getExistingColumns().slice(),i=t.filter((function(t){return e.indexOf(t)<0}));c.insertArrayIntoArray(e,i,this.insertIndex),this.updateColumns(e)}},e.prototype.rearrangeColumns=function(t){var e=this.getNonGhostColumns().slice();return c.insertArrayIntoArray(e,t,this.insertIndex),!c.areEqual(e,this.getExistingColumns())&&(this.updateColumns(e),!0)},e.prototype.refreshGui=function(){var t=this.eColumnDropList.scrollTop,e=this.resizeEnabled,i=this.getFocusedItem(),n=this.focusService.findNextFocusableElement();n||(n=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addColumnsToGui(),this.isHorizontal()||(this.eColumnDropList.scrollTop=t),e&&this.toggleResizable(e),this.focusService.isKeyboardMode()&&this.restoreFocus(i,n)},e.prototype.getFocusedItem=function(){var t=this.getGui(),e=this.gridOptionsService.getDocument().activeElement;return t.contains(e)?Array.from(t.querySelectorAll(".ag-column-drop-cell")).indexOf(e):-1},e.prototype.restoreFocus=function(t,e){var i=this.getGui(),n=Array.from(i.querySelectorAll(".ag-column-drop-cell"));if(-1!==t){0===n.length&&e.focus();var o=n[Math.min(n.length-1,t)];o&&o.focus()}},e.prototype.getNonGhostColumns=function(){var t=this,e=this.getExistingColumns();return this.isPotentialDndColumns()?e.filter((function(e){return!c.includes(t.potentialDndColumns,e)})):e},e.prototype.addColumnsToGui=function(){var t=this,e=this.getNonGhostColumns().map((function(e){return t.createColumnComponent(e,!1)}));if(this.isPotentialDndColumns()){var i=this.potentialDndColumns.map((function(e){return t.createColumnComponent(e,!0)}));this.insertIndex>=e.length?e.push.apply(e,xn([],Sn(i),!1)):e.splice.apply(e,xn([this.insertIndex,0],Sn(i),!1))}this.appendChild(this.eColumnDropList),e.forEach((function(e,i){i>0&&t.addArrow(t.eColumnDropList),t.eColumnDropList.appendChild(e.getGui())})),this.addAriaLabelsToComponents()},e.prototype.addAriaLabelsToComponents=function(){var t=this;this.childColumnComponents.forEach((function(e,i){var n=e.getGui();c.setAriaPosInSet(n,i+1),c.setAriaSetSize(n,t.childColumnComponents.length)}))},e.prototype.createColumnComponent=function(t,e){var i=this,n=new vn(t,this.dropTarget,e,this.dropZonePurpose,this.horizontal);return n.addEventListener(vn.EVENT_COLUMN_REMOVE,this.removeColumns.bind(this,[t])),this.beans.context.createBean(n),this.guiDestroyFunctions.push((function(){return i.destroyBean(n)})),e||this.childColumnComponents.push(n),n},e.prototype.addIconAndTitleToGui=function(){var t=this.params.icon,e=document.createElement("div");if(c.setAriaHidden(e,!0),this.addElementClasses(e,"title-bar"),this.addElementClasses(t,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingColumnsEmpty()),e.appendChild(t),!this.horizontal){var i=document.createElement("span");this.addElementClasses(i,"title"),i.innerHTML=this.params.title,e.appendChild(i)}this.appendChild(e)},e.prototype.isExistingColumnsEmpty=function(){return 0===this.getExistingColumns().length},e.prototype.addEmptyMessageToGui=function(){if(this.isExistingColumnsEmpty()&&!this.isPotentialDndColumns()){var t=document.createElement("span");t.innerHTML=this.params.emptyMessage,this.addElementClasses(t,"empty-message"),this.eColumnDropList.appendChild(t)}},e.prototype.addArrow=function(t){if(this.horizontal){var e=this.beans.gridOptionsService.get("enableRtl"),i=c.createIconNoSpan(e?"smallLeft":"smallRight",this.beans.gridOptionsService);this.addElementClasses(i,"cell-separator"),t.appendChild(i)}},e.STATE_NOT_DRAGGING="notDragging",e.STATE_NEW_COLUMNS_IN="newColumnsIn",e.STATE_REARRANGE_COLUMNS="rearrangeColumns",bn([n("columnModel")],e.prototype,"colModel",void 0),bn([n("focusService")],e.prototype,"focusService",void 0),e}(s),wn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),En=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},On=function(t){function e(e){return t.call(this,e,"rowGroup")||this}return wn(e,t),e.prototype.passBeansUp=function(){t.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.localeService.getLocaleTextFunc(),i=e("rowGroupColumnsEmptyMessage","Drag here to set row groups"),n=e("groups","Row Groups");t.prototype.init.call(this,{dragAndDropIcon:m.ICON_GROUP,icon:c.createIconNoSpan("rowGroupPanel",this.gridOptionsService,null),emptyMessage:i,title:n}),this.addManagedListener(this.eventService,l.EVENT_COLUMN_ROW_GROUP_CHANGED,this.refreshGui.bind(this))},e.prototype.getAriaLabel=function(){return this.localeService.getLocaleTextFunc()("ariaRowGroupDropZonePanelLabel","Row Groups")},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="rowGroupColumnsList",e},e.prototype.isColumnDroppable=function(t){return!(this.gridOptionsService.get("functionsReadOnly")||!t.isPrimary())&&(t.isAllowRowGroup()&&!t.isRowGroupActive())},e.prototype.updateColumns=function(t){if(this.gridOptionsService.get("functionsPassive")){var e={type:l.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:t};this.eventService.dispatchEvent(e)}else this.columnModel.setRowGroupColumns(t,"toolPanelUi")},e.prototype.getIconName=function(){return this.isPotentialDndColumns()?m.ICON_GROUP:m.ICON_NOT_ALLOWED},e.prototype.getExistingColumns=function(){return this.columnModel.getRowGroupColumns()},En([n("columnModel")],e.prototype,"columnModel",void 0),En([n("loggerFactory")],e.prototype,"loggerFactory",void 0),En([n("dragAndDropService")],e.prototype,"dragAndDropService",void 0),En([r],e.prototype,"passBeansUp",null),e}(Cn),Dn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),An=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Tn=function(t){function e(e){return t.call(this,e,"pivot")||this}return Dn(e,t),e.prototype.passBeansUp=function(){t.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.localeService.getLocaleTextFunc(),i=e("pivotColumnsEmptyMessage","Drag here to set column labels"),n=e("pivots","Column Labels");t.prototype.init.call(this,{dragAndDropIcon:m.ICON_GROUP,icon:c.createIconNoSpan("pivotPanel",this.gridOptionsService,null),emptyMessage:i,title:n}),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,this.refresh.bind(this)),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PIVOT_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.checkVisibility.bind(this)),this.refresh()},e.prototype.getAriaLabel=function(){return this.localeService.getLocaleTextFunc()("ariaPivotDropZonePanelLabel","Column Labels")},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="pivotColumnsList",e},e.prototype.refresh=function(){this.checkVisibility(),this.refreshGui()},e.prototype.checkVisibility=function(){var t=this.columnModel.isPivotMode();if(this.isHorizontal())switch(this.gridOptionsService.get("pivotPanelShow")){case"always":this.setDisplayed(t);break;case"onlyWhenPivoting":var e=this.columnModel.isPivotActive();this.setDisplayed(t&&e);break;default:this.setDisplayed(!1)}else this.setDisplayed(t)},e.prototype.isColumnDroppable=function(t){return!(this.gridOptionsService.get("functionsReadOnly")||!t.isPrimary())&&(t.isAllowPivot()&&!t.isPivotActive())},e.prototype.updateColumns=function(t){if(this.gridOptionsService.get("functionsPassive")){var e={type:l.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:t};this.eventService.dispatchEvent(e)}else this.columnModel.setPivotColumns(t,"toolPanelUi")},e.prototype.getIconName=function(){return this.isPotentialDndColumns()?m.ICON_PIVOT:m.ICON_NOT_ALLOWED},e.prototype.getExistingColumns=function(){return this.columnModel.getPivotColumns()},An([n("columnModel")],e.prototype,"columnModel",void 0),An([n("loggerFactory")],e.prototype,"loggerFactory",void 0),An([n("dragAndDropService")],e.prototype,"dragAndDropService",void 0),An([r],e.prototype,"passBeansUp",null),e}(Cn),kn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Mn=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Rn=function(t){function e(){return t.call(this)||this}return kn(e,t),e.prototype.postConstruct=function(){var t=this;this.setGui(this.createNorthPanel()),this.addManagedListener(this.eventService,l.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return t.onRowGroupChanged()})),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,(function(){return t.onRowGroupChanged()})),this.addManagedPropertyListener("rowGroupPanelShow",(function(){return t.onRowGroupChanged()})),this.addManagedPropertyListener("pivotPanelShow",(function(){return t.onPivotPanelShow()})),this.onRowGroupChanged()},e.prototype.createNorthPanel=function(){var t=this,e=document.createElement("div");return e.classList.add("ag-column-drop-wrapper"),c.setAriaRole(e,"presentation"),this.rowGroupComp=new On(!0),this.createManagedBean(this.rowGroupComp),this.pivotComp=new Tn(!0),this.createManagedBean(this.pivotComp),e.appendChild(this.rowGroupComp.getGui()),e.appendChild(this.pivotComp.getGui()),this.addManagedListener(this.rowGroupComp,s.EVENT_DISPLAYED_CHANGED,(function(){return t.onDropPanelVisible()})),this.addManagedListener(this.pivotComp,s.EVENT_DISPLAYED_CHANGED,(function(){return t.onDropPanelVisible()})),this.onDropPanelVisible(),e},e.prototype.onDropPanelVisible=function(){var t=this.rowGroupComp.isDisplayed()&&this.pivotComp.isDisplayed();this.rowGroupComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",t),this.pivotComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",t)},e.prototype.onRowGroupChanged=function(){if(this.rowGroupComp){var t=this.gridOptionsService.get("rowGroupPanelShow");if("always"===t)this.rowGroupComp.setDisplayed(!0);else if("onlyWhenGrouping"===t){var e=!this.columnModel.isRowGroupEmpty();this.rowGroupComp.setDisplayed(e)}else this.rowGroupComp.setDisplayed(!1)}},e.prototype.onPivotPanelShow=function(){if(this.pivotComp){var t=this.gridOptionsService.get("pivotPanelShow");if("always"===t)this.pivotComp.setDisplayed(!0);else if("onlyWhenPivoting"===t){var e=this.columnModel.isPivotActive();this.pivotComp.setDisplayed(e)}else this.pivotComp.setDisplayed(!1)}},Mn([n("columnModel")],e.prototype,"columnModel",void 0),Mn([r],e.prototype,"postConstruct",null),e}(s),Pn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Nn=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ln=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Pn(i,t),i.prototype.execute=function(t){var e=this,i=this.columnModel.isPivotMode(),n=this.filterManager.isAggregateFilterPresent()||this.filterManager.isAggregateQuickFilterPresent(),o=this.gridOptionsService.getGroupAggFiltering()||(i?function(t){return t.node.leafGroup}:function(t){return!t.node.group}),r=t.changedPath,s=function(t,i){void 0===i&&(i=!1),t.childrenAfterFilter&&(t.childrenAfterAggFilter=t.childrenAfterFilter,i&&t.childrenAfterAggFilter.forEach((function(t){return s(t,i)})),e.setAllChildrenCount(t)),t.sibling&&(t.sibling.childrenAfterAggFilter=t.childrenAfterAggFilter)};r.forEachChangedNodeDepthFirst(n?function(t){var i;t.childrenAfterAggFilter=(null===(i=t.childrenAfterFilter)||void 0===i?void 0:i.filter((function(t){var i;if(o({node:t})&&e.filterManager.doesRowPassAggregateFilters({rowNode:t}))return s(t,!0),!0;return null===(i=t.childrenAfterAggFilter)||void 0===i?void 0:i.length})))||null,e.setAllChildrenCount(t),t.sibling&&(t.sibling.childrenAfterAggFilter=t.childrenAfterAggFilter)}:s,!0)},i.prototype.setAllChildrenCountTreeData=function(t){var e=0;t.childrenAfterAggFilter.forEach((function(t){e++,e+=t.allChildrenCount})),t.setAllChildrenCount(e)},i.prototype.setAllChildrenCountGridGrouping=function(t){var e=0;t.childrenAfterAggFilter.forEach((function(t){t.group?e+=t.allChildrenCount:e++})),t.setAllChildrenCount(e)},i.prototype.setAllChildrenCount=function(t){t.hasChildren()?this.gridOptionsService.get("treeData")?this.setAllChildrenCountTreeData(t):this.setAllChildrenCountGridGrouping(t):t.setAllChildrenCount(null)},Nn([n("filterManager")],i.prototype,"filterManager",void 0),Nn([n("columnModel")],i.prototype,"columnModel",void 0),i=Nn([e("filterAggregatesStage")],i)}(i),In=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Fn=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},_n=function(t){function e(){return t.call(this,'\n            <div class="ag-group-filter">\n                <div ref="eGroupField"></div>\n                <div ref="eUnderlyingFilter"></div>\n            </div>\n        ')||this}return In(e,t),e.prototype.postConstruct=function(){this.initialiseTabGuard({})},e.prototype.init=function(t){var e=this;return this.params=t,this.validateParams(),this.updateGroups().then((function(){e.addManagedListener(e.eventService,l.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return e.onColumnRowGroupChanged()}))}))},e.prototype.validateParams=function(){var t=this.params.colDef;t.field&&c.warnOnce('Group Column Filter does not work with the colDef property "field". This property will be ignored.'),t.filterValueGetter&&c.warnOnce('Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.'),t.filterParams&&c.warnOnce('Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.')},e.prototype.updateGroups=function(){var t=this.updateGroupField();return this.getUnderlyingFilters(t)},e.prototype.getSourceColumns=function(){if(this.groupColumn=this.params.column,this.gridOptionsService.get("treeData"))return c.warnOnce("Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter."),[];var t=this.columnModel.getSourceColumnsForGroupColumn(this.groupColumn);return t||(c.warnOnce("Group Column Filter only works on group columns. Please use a different filter."),[])},e.prototype.updateGroupField=function(){var t=this;c.clearElement(this.eGroupField),this.eGroupFieldSelect&&this.destroyBean(this.eGroupFieldSelect);var e=this.getSourceColumns(),i=e.filter((function(t){return t.isFilterAllowed()}));return i.length?(1===e.length?(this.selectedColumn=i[0],c.setDisplayed(this.eGroupField,!1)):(this.selectedColumn&&i.some((function(e){return e.getId()===t.selectedColumn.getId()}))||(this.selectedColumn=i[0]),this.createGroupFieldSelectElement(i),this.eGroupField.appendChild(this.eGroupFieldSelect.getGui()),this.eGroupField.appendChild(c.loadTemplate('<div class="ag-filter-separator"></div>')),c.setDisplayed(this.eGroupField,!0)),i):(this.selectedColumn=void 0,c.setDisplayed(this.eGroupField,!1),null)},e.prototype.createGroupFieldSelectElement=function(t){var e=this;this.eGroupFieldSelect=this.createManagedBean(new _);var i=this.localeService.getLocaleTextFunc();this.eGroupFieldSelect.setLabel(i("groupFilterSelect","Select field:")),this.eGroupFieldSelect.setLabelAlignment("top"),this.eGroupFieldSelect.addOptions(t.map((function(t){var i;return{value:t.getId(),text:null!==(i=e.columnModel.getDisplayNameForColumn(t,"groupFilter",!1))&&void 0!==i?i:void 0}}))),this.eGroupFieldSelect.setValue(this.selectedColumn.getId()),this.eGroupFieldSelect.onValueChange((function(t){return e.updateSelectedColumn(t)})),this.eGroupFieldSelect.addCssClass("ag-group-filter-field-select-wrapper"),1===t.length&&this.eGroupFieldSelect.setDisabled(!0)},e.prototype.getUnderlyingFilters=function(t){var e=this;if(!t)return this.filterColumnPairs=void 0,this.selectedFilter=void 0,this.groupColumn.setFilterActive(!1,"columnRowGroupChanged"),G.resolve();var i=[],n=[];return t.forEach((function(t){var o=e.filterManager.getOrCreateFilterWrapper(t,"COLUMN_MENU");(null==o?void 0:o.filterPromise)&&i.push(o.filterPromise.then((function(i){return i&&n.push({filter:i,column:t}),t.getId()===e.selectedColumn.getId()&&(e.selectedFilter=null!=i?i:void 0),i})))})),G.all(i).then((function(){e.filterColumnPairs=n,e.groupColumn.setFilterActive(e.isFilterActive(),"columnRowGroupChanged")}))},e.prototype.addUnderlyingFilterElement=function(){var t=this;if(c.clearElement(this.eUnderlyingFilter),!this.selectedColumn)return G.resolve();var e=this.filterManager.getOrCreateFilterWrapper(this.selectedColumn,"COLUMN_MENU");return e?e.guiPromise.then((function(i){var n;t.eUnderlyingFilter.appendChild(i),null===(n=e.filterPromise)||void 0===n||n.then((function(e){var i,n;null===(i=null==e?void 0:e.afterGuiAttached)||void 0===i||i.call(e,t.afterGuiAttachedParams),(null===(n=t.afterGuiAttachedParams)||void 0===n?void 0:n.suppressFocus)||!t.eGroupFieldSelect||t.eGroupFieldSelect.isDisabled()||t.eGroupFieldSelect.getFocusableElement().focus()}))})):G.resolve()},e.prototype.updateSelectedColumn=function(t){var i,n;if(t){null===(n=null===(i=this.selectedFilter)||void 0===i?void 0:i.afterGuiDetached)||void 0===n||n.call(i);var o=this.getFilterColumnPair(t);this.selectedColumn=null==o?void 0:o.column,this.selectedFilter=null==o?void 0:o.filter,this.dispatchEvent({type:e.EVENT_SELECTED_COLUMN_CHANGED}),this.addUnderlyingFilterElement()}},e.prototype.isFilterActive=function(){var t;return!!(null===(t=this.filterColumnPairs)||void 0===t?void 0:t.some((function(t){return t.filter.isFilterActive()})))},e.prototype.doesFilterPass=function(){return!0},e.prototype.getModel=function(){return null},e.prototype.setModel=function(){return G.resolve()},e.prototype.afterGuiAttached=function(t){this.afterGuiAttachedParams=t,this.addUnderlyingFilterElement()},e.prototype.afterGuiDetached=function(){var t,e;c.clearElement(this.eUnderlyingFilter),null===(e=null===(t=this.selectedFilter)||void 0===t?void 0:t.afterGuiDetached)||void 0===e||e.call(t)},e.prototype.onColumnRowGroupChanged=function(){var t=this;this.updateGroups().then((function(){t.dispatchEvent({type:e.EVENT_COLUMN_ROW_GROUP_CHANGED}),t.eventService.dispatchEvent({type:"filterAllowedUpdated"})}))},e.prototype.getFilterColumnPair=function(t){var e;if(t)return null===(e=this.filterColumnPairs)||void 0===e?void 0:e.find((function(e){return e.column.getId()===t}))},e.prototype.getSelectedFilter=function(){return this.selectedFilter},e.prototype.getSelectedColumn=function(){return this.selectedColumn},e.prototype.isFilterAllowed=function(){return!!this.selectedColumn},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",e.EVENT_SELECTED_COLUMN_CHANGED="selectedColumnChanged",Fn([n("filterManager")],e.prototype,"filterManager",void 0),Fn([n("columnModel")],e.prototype,"columnModel",void 0),Fn([o("eGroupField")],e.prototype,"eGroupField",void 0),Fn([o("eUnderlyingFilter")],e.prototype,"eUnderlyingFilter",void 0),Fn([r],e.prototype,"postConstruct",null),e}(b),Gn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Bn=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Vn=function(t){function e(){var e=t.call(this,'\n            <div ref="eFloatingFilter" class="ag-group-floating-filter ag-floating-filter-input" role="presentation"></div>\n        ')||this;return e.haveAddedColumnListeners=!1,e}return Gn(e,t),e.prototype.init=function(t){var e=this;this.params=t;var i="multipleColumns"===this.gridOptionsService.get("groupDisplayType");return new G((function(t){e.params.parentFilterInstance((function(n){e.parentFilterInstance=n,i?e.setupUnderlyingFloatingFilterElement().then((function(){return t()})):(e.setupReadOnlyFloatingFilterElement(),t())}))})).then((function(){e.addManagedListener(e.parentFilterInstance,_n.EVENT_SELECTED_COLUMN_CHANGED,(function(){return e.onSelectedColumnChanged()})),e.addManagedListener(e.parentFilterInstance,_n.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return e.onColumnRowGroupChanged()}))}))},e.prototype.onParamsUpdated=function(t){this.params=t,this.setParams()},e.prototype.setParams=function(){var t,e=this.columnModel.getDisplayNameForColumn(this.params.column,"header",!0),i=this.localeService.getLocaleTextFunc();null===(t=this.eFloatingFilterText)||void 0===t||t.setInputAriaLabel("".concat(e," ").concat(i("ariaFilterInput","Filter Input")))},e.prototype.setupReadOnlyFloatingFilterElement=function(){var t=this;this.eFloatingFilterText||(this.eFloatingFilterText=this.createManagedBean(new v),this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",(function(){return t.params.showParentFilter()})),this.setParams()),this.updateDisplayedValue(),this.eFloatingFilter.appendChild(this.eFloatingFilterText.getGui())},e.prototype.setupUnderlyingFloatingFilterElement=function(){var t=this;this.showingUnderlyingFloatingFilter=!1,this.underlyingFloatingFilter=void 0,c.clearElement(this.eFloatingFilter);var e=this.parentFilterInstance.getSelectedColumn();if(e&&!e.isVisible()){var i=this.filterManager.getFloatingFilterCompDetails(e,this.params.showParentFilter);if(i)return this.compDetails=i,this.haveAddedColumnListeners||(this.haveAddedColumnListeners=!0,this.addManagedListener(e,A.EVENT_VISIBLE_CHANGED,this.onColumnVisibleChanged.bind(this)),this.addManagedListener(e,A.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))),i.newAgStackInstance().then((function(e){var i,n;t.underlyingFloatingFilter=e,null===(i=t.underlyingFloatingFilter)||void 0===i||i.onParentModelChanged(null===(n=t.parentFilterInstance.getSelectedFilter())||void 0===n?void 0:n.getModel()),t.appendChild(e.getGui()),t.showingUnderlyingFloatingFilter=!0}))}return this.setupReadOnlyFloatingFilterElement(),G.resolve()},e.prototype.onColumnVisibleChanged=function(){this.setupUnderlyingFloatingFilterElement()},e.prototype.onColDefChanged=function(t){var e,i;if(t.column){var n=this.filterManager.getFloatingFilterCompDetails(t.column,this.params.showParentFilter);n&&(null===(i=null===(e=this.underlyingFloatingFilter)||void 0===e?void 0:e.onParamsUpdated)||void 0===i||i.call(e,n.params))}},e.prototype.onParentModelChanged=function(t,e){var i,n;this.showingUnderlyingFloatingFilter?null===(i=this.underlyingFloatingFilter)||void 0===i||i.onParentModelChanged(null===(n=this.parentFilterInstance.getSelectedFilter())||void 0===n?void 0:n.getModel(),e):this.updateDisplayedValue()},e.prototype.updateDisplayedValue=function(){if(this.parentFilterInstance&&this.eFloatingFilterText){var t=this.parentFilterInstance.getSelectedFilter();if(!t)return this.eFloatingFilterText.setValue(""),void this.eFloatingFilterText.setDisplayed(!1);if(this.eFloatingFilterText.setDisplayed(!0),t.getModelAsString){var e=t.getModel();this.eFloatingFilterText.setValue(null==e?"":t.getModelAsString(e))}else this.eFloatingFilterText.setValue("")}},e.prototype.onSelectedColumnChanged=function(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()},e.prototype.onColumnRowGroupChanged=function(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()},e.prototype.destroy=function(){t.prototype.destroy.call(this)},Bn([n("columnModel")],e.prototype,"columnModel",void 0),Bn([n("filterManager")],e.prototype,"filterManager",void 0),Bn([o("eFloatingFilter")],e.prototype,"eFloatingFilter",void 0),e}(s),jn={version:"31.0.1",moduleName:a.RowGroupingModule,beans:[Bi,Ln,Hi,Zi,tn,sn],agStackComponents:[{componentName:"AgGridHeaderDropZones",componentClass:Rn}],userComponents:[{componentName:"agGroupColumnFilter",componentClass:_n},{componentName:"agGroupColumnFloatingFilter",componentClass:Vn}],dependantModules:[Ft]},Wn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),zn=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Un=function(t){function e(e){return t.call(this,e,"aggregation")||this}return Wn(e,t),e.prototype.passBeansUp=function(){t.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.localeService.getLocaleTextFunc(),i=e("valueColumnsEmptyMessage","Drag here to aggregate"),n=e("values","Values");t.prototype.init.call(this,{dragAndDropIcon:m.ICON_AGGREGATE,icon:c.createIconNoSpan("valuePanel",this.gridOptionsService,null),emptyMessage:i,title:n}),this.addManagedListener(this.eventService,l.EVENT_COLUMN_VALUE_CHANGED,this.refreshGui.bind(this))},e.prototype.getAriaLabel=function(){return this.localeService.getLocaleTextFunc()("ariaValuesDropZonePanelLabel","Values")},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="valueColumnsList",e},e.prototype.getIconName=function(){return this.isPotentialDndColumns()?m.ICON_AGGREGATE:m.ICON_NOT_ALLOWED},e.prototype.isColumnDroppable=function(t){return!(this.gridOptionsService.get("functionsReadOnly")||!t.isPrimary())&&(t.isAllowValue()&&!t.isValueActive())},e.prototype.updateColumns=function(t){if(this.gridOptionsService.get("functionsPassive")){var e={type:l.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:t};this.eventService.dispatchEvent(e)}else this.columnModel.setValueColumns(t,"toolPanelUi")},e.prototype.getExistingColumns=function(){return this.columnModel.getValueColumns()},zn([n("columnModel")],e.prototype,"columnModel",void 0),zn([n("loggerFactory")],e.prototype,"loggerFactory",void 0),zn([n("dragAndDropService")],e.prototype,"dragAndDropService",void 0),zn([r],e.prototype,"passBeansUp",null),e}(Cn),Hn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kn=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Yn=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return Hn(e,t),e.prototype.init=function(t,e,i){this.allowDragging=t,this.params=e,this.eventType=i,this.primaryColsHeaderPanel.init(this.params);var n=this.params.suppressColumnFilter,o=this.params.suppressColumnSelectAll;this.params.suppressColumnExpandAll&&n&&o&&this.primaryColsHeaderPanel.setDisplayed(!1),this.addManagedListener(this.primaryColsListPanel,"groupExpanded",this.onGroupExpanded.bind(this)),this.addManagedListener(this.primaryColsListPanel,"selectionChanged",this.onSelectionChange.bind(this)),this.primaryColsListPanel.init(this.params,this.allowDragging,this.eventType),this.addManagedListener(this.primaryColsHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"selectAll",this.onSelectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"unselectAll",this.onUnselectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"filterChanged",this.onFilterChanged.bind(this)),this.positionableFeature=new F(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature)},e.prototype.toggleResizable=function(t){this.positionableFeature.setResizable(!!t&&{bottom:!0})},e.prototype.onExpandAll=function(){this.primaryColsListPanel.doSetExpandedAll(!0)},e.prototype.onCollapseAll=function(){this.primaryColsListPanel.doSetExpandedAll(!1)},e.prototype.expandGroups=function(t){this.primaryColsListPanel.setGroupsExpanded(!0,t)},e.prototype.collapseGroups=function(t){this.primaryColsListPanel.setGroupsExpanded(!1,t)},e.prototype.setColumnLayout=function(t){this.primaryColsListPanel.setColumnLayout(t)},e.prototype.onFilterChanged=function(t){this.primaryColsListPanel.setFilterText(t.filterText)},e.prototype.syncLayoutWithGrid=function(){this.primaryColsListPanel.onColumnsChanged()},e.prototype.onSelectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!0)},e.prototype.onUnselectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!1)},e.prototype.onGroupExpanded=function(t){this.primaryColsHeaderPanel.setExpandState(t.state),this.params.onStateUpdated()},e.prototype.onSelectionChange=function(t){this.primaryColsHeaderPanel.setSelectionState(t.state)},e.prototype.getExpandedGroups=function(){return this.primaryColsListPanel.getExpandedGroups()},e.TEMPLATE='<div class="ag-column-select">\n            <ag-primary-cols-header ref="primaryColsHeaderPanel"></ag-primary-cols-header>\n            <ag-primary-cols-list ref="primaryColsListPanel"></ag-primary-cols-list>\n        </div>',Kn([o("primaryColsHeaderPanel")],e.prototype,"primaryColsHeaderPanel",void 0),Kn([o("primaryColsListPanel")],e.prototype,"primaryColsListPanel",void 0),e}(s),Xn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qn=function(){return(qn=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},$n=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Zn=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.initialised=!1,i.childDestroyFuncs=[],i}return Xn(e,t),e.prototype.setVisible=function(e){t.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},e.prototype.init=function(t){var e=this,i={suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi};if(this.params=qn(qn(qn({},i),t),{context:this.gridOptionsService.context}),this.isRowGroupingModuleLoaded()&&!this.params.suppressPivotMode&&(this.pivotModePanel=this.createBean(new Fi),this.childDestroyFuncs.push((function(){return e.destroyBean(e.pivotModePanel)})),this.appendChild(this.pivotModePanel)),this.primaryColsPanel=this.createBean(new Yn),this.childDestroyFuncs.push((function(){return e.destroyBean(e.primaryColsPanel)})),this.primaryColsPanel.init(!0,this.params,"toolPanelUi"),this.primaryColsPanel.addCssClass("ag-column-panel-column-select"),this.appendChild(this.primaryColsPanel),this.isRowGroupingModuleLoaded()){this.params.suppressRowGroups||(this.rowGroupDropZonePanel=this.createBean(new On(!1)),this.childDestroyFuncs.push((function(){return e.destroyBean(e.rowGroupDropZonePanel)})),this.appendChild(this.rowGroupDropZonePanel)),this.params.suppressValues||(this.valuesDropZonePanel=this.createBean(new Un(!1)),this.childDestroyFuncs.push((function(){return e.destroyBean(e.valuesDropZonePanel)})),this.appendChild(this.valuesDropZonePanel)),this.params.suppressPivots||(this.pivotDropZonePanel=this.createBean(new Tn(!1)),this.childDestroyFuncs.push((function(){return e.destroyBean(e.pivotDropZonePanel)})),this.appendChild(this.pivotDropZonePanel)),this.setLastVisible();var n=this.addManagedListener(this.eventService,l.EVENT_COLUMN_PIVOT_MODE_CHANGED,(function(){e.resetChildrenHeight(),e.setLastVisible()}));this.childDestroyFuncs.push((function(){return n()}))}this.initialised=!0},e.prototype.setPivotModeSectionVisible=function(t){var e=this;this.isRowGroupingModuleLoaded()&&(this.pivotModePanel?this.pivotModePanel.setDisplayed(t):t&&(this.pivotModePanel=this.createBean(new Fi),this.getGui().insertBefore(this.pivotModePanel.getGui(),this.getGui().firstChild),this.childDestroyFuncs.push((function(){return e.destroyBean(e.pivotModePanel)}))),this.setLastVisible())},e.prototype.setRowGroupsSectionVisible=function(t){this.isRowGroupingModuleLoaded()&&(this.rowGroupDropZonePanel?this.rowGroupDropZonePanel.setDisplayed(t):t&&(this.rowGroupDropZonePanel=this.createManagedBean(new On(!1)),this.appendChild(this.rowGroupDropZonePanel)),this.setLastVisible())},e.prototype.setValuesSectionVisible=function(t){this.isRowGroupingModuleLoaded()&&(this.valuesDropZonePanel?this.valuesDropZonePanel.setDisplayed(t):t&&(this.valuesDropZonePanel=this.createManagedBean(new Un(!1)),this.appendChild(this.valuesDropZonePanel)),this.setLastVisible())},e.prototype.setPivotSectionVisible=function(t){this.isRowGroupingModuleLoaded()&&(this.pivotDropZonePanel?this.pivotDropZonePanel.setDisplayed(t):t&&(this.pivotDropZonePanel=this.createManagedBean(new Tn(!1)),this.appendChild(this.pivotDropZonePanel),this.pivotDropZonePanel.setDisplayed(t)),this.setLastVisible())},e.prototype.setResizers=function(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach((function(t){if(t){var e=t.getGui();t.toggleResizable(!e.classList.contains("ag-last-column-drop")&&!e.classList.contains("ag-hidden"))}}))},e.prototype.setLastVisible=function(){var t=this.getGui();Array.prototype.slice.call(t.querySelectorAll(".ag-column-drop")).forEach((function(t){return t.classList.remove("ag-last-column-drop")}));var e=t.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),i=c.last(e);i&&i.classList.add("ag-last-column-drop"),this.setResizers()},e.prototype.resetChildrenHeight=function(){for(var t=this.getGui().children,e=0;e<t.length;e++){var i=t[e];i.style.removeProperty("height"),i.style.removeProperty("flex")}},e.prototype.isRowGroupingModuleLoaded=function(){return B.__assertRegistered(a.RowGroupingModule,"Row Grouping",this.context.getGridId())},e.prototype.expandColumnGroups=function(t){this.primaryColsPanel.expandGroups(t)},e.prototype.collapseColumnGroups=function(t){this.primaryColsPanel.collapseGroups(t)},e.prototype.setColumnLayout=function(t){this.primaryColsPanel.setColumnLayout(t)},e.prototype.syncLayoutWithGrid=function(){this.primaryColsPanel.syncLayoutWithGrid()},e.prototype.destroyChildren=function(){this.childDestroyFuncs.forEach((function(t){return t()})),this.childDestroyFuncs.length=0,c.clearElement(this.getGui())},e.prototype.refresh=function(){this.destroyChildren(),this.init(this.params)},e.prototype.getState=function(){return{expandedGroupIds:this.primaryColsPanel.getExpandedGroups()}},e.prototype.destroy=function(){this.destroyChildren(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-column-panel"></div>',$n([n("gridApi")],e.prototype,"gridApi",void 0),$n([n("columnApi")],e.prototype,"columnApi",void 0),e}(s),Jn=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Qn=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},to=function(t){function e(){var e=t.call(this,'<div class="ag-tool-panel-horizontal-resize"></div>')||this;return e.minWidth=100,e.maxWidth=null,e}return Jn(e,t),e.prototype.setElementToResize=function(t){this.elementToResize=t},e.prototype.postConstruct=function(){var t=this.horizontalResizeService.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizeEnd.bind(this)});this.addDestroyFunc(t),this.setInverted(this.gridOptionsService.get("enableRtl"))},e.prototype.dispatchResizeEvent=function(t,e,i){var n={type:l.EVENT_TOOL_PANEL_SIZE_CHANGED,width:i,started:t,ended:e};this.eventService.dispatchEvent(n)},e.prototype.onResizeStart=function(){this.startingWidth=this.elementToResize.offsetWidth,this.dispatchResizeEvent(!0,!1,this.startingWidth)},e.prototype.onResizeEnd=function(t){return this.onResizing(t,!0)},e.prototype.onResizing=function(t,e){void 0===e&&(e=!1);var i=this.inverted?-1:1,n=Math.max(this.minWidth,Math.floor(this.startingWidth-t*i));null!=this.maxWidth&&(n=Math.min(this.maxWidth,n)),this.elementToResize.style.width="".concat(n,"px"),this.dispatchResizeEvent(!1,e,n)},e.prototype.setInverted=function(t){this.inverted=t},e.prototype.setMaxWidth=function(t){this.maxWidth=t},e.prototype.setMinWidth=function(t){this.minWidth=null!=t?t:100},Qn([n("horizontalResizeService")],e.prototype,"horizontalResizeService",void 0),Qn([r],e.prototype,"postConstruct",null),e}(s),eo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),io=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},no=function(t){function e(e){var i=t.call(this)||this;return i.toolPanelDef=e,i}return eo(e,t),e.prototype.getToolPanelId=function(){return this.toolPanelDef.id},e.prototype.postConstruct=function(){var t=this.createTemplate();this.setTemplate(t),this.setLabel(),this.setIcon(),this.addManagedListener(this.eToggleButton,"click",this.onButtonPressed.bind(this)),this.eToggleButton.setAttribute("id","ag-".concat(this.getCompId(),"-button"))},e.prototype.createTemplate=function(){return'<div class="ag-side-button" role="presentation">\n                <button type="button" ref="eToggleButton" tabindex="-1" role="tab" aria-expanded="false" class="ag-button ag-side-button-button">\n                    <div ref="eIconWrapper" class="ag-side-button-icon-wrapper" aria-hidden="true"></div>\n                    <span ref ="eLabel" class="ag-side-button-label"></span>\n                </button>\n            </div>'},e.prototype.setLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=this.toolPanelDef,i=t(e.labelKey,e.labelDefault);this.eLabel.innerText=i},e.prototype.setIcon=function(){this.eIconWrapper.insertAdjacentElement("afterbegin",c.createIconNoSpan(this.toolPanelDef.iconKey,this.gridOptionsService))},e.prototype.onButtonPressed=function(){this.dispatchEvent({type:e.EVENT_TOGGLE_BUTTON_CLICKED})},e.prototype.setSelected=function(t){this.addOrRemoveCssClass("ag-selected",t),c.setAriaExpanded(this.eToggleButton,t)},e.prototype.getButtonElement=function(){return this.eToggleButton},e.EVENT_TOGGLE_BUTTON_CLICKED="toggleButtonClicked",io([o("eToggleButton")],e.prototype,"eToggleButton",void 0),io([o("eIconWrapper")],e.prototype,"eIconWrapper",void 0),io([o("eLabel")],e.prototype,"eLabel",void 0),io([r],e.prototype,"postConstruct",null),e}(s),oo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ro=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},so=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.buttonComps=[],i}return oo(e,t),e.prototype.postConstruct=function(){this.addManagedListener(this.getFocusableElement(),"keydown",this.handleKeyDown.bind(this))},e.prototype.handleKeyDown=function(t){if(t.key===d.TAB&&t.shiftKey){var e=c.last(this.columnModel.getAllDisplayedColumns());this.focusService.focusGridView(e,!0)&&t.preventDefault()}},e.prototype.setActiveButton=function(t){this.buttonComps.forEach((function(e){e.setSelected(t===e.getToolPanelId())}))},e.prototype.addButtonComp=function(t){var i=this,n=this.createBean(new no(t));return this.buttonComps.push(n),this.appendChild(n),n.addEventListener(no.EVENT_TOGGLE_BUTTON_CLICKED,(function(){i.dispatchEvent({type:e.EVENT_SIDE_BAR_BUTTON_CLICKED,toolPanelId:t.id})})),n},e.prototype.clearButtons=function(){this.buttonComps=this.destroyBeans(this.buttonComps),c.clearElement(this.getGui())},e.EVENT_SIDE_BAR_BUTTON_CLICKED="sideBarButtonClicked",e.TEMPLATE='<div class="ag-side-buttons" role="tablist"></div>',ro([n("focusService")],e.prototype,"focusService",void 0),ro([n("columnModel")],e.prototype,"columnModel",void 0),ro([r],e.prototype,"postConstruct",null),ro([N],e.prototype,"clearButtons",null),e}(s),ao=function(){function t(){}return t.parse=function(e){if(e){if(!0===e)return{toolPanels:[t.DEFAULT_COLUMN_COMP,t.DEFAULT_FILTER_COMP],defaultToolPanel:"columns"};if("string"==typeof e)return t.parse([e]);if(Array.isArray(e)){var i=[];if(e.forEach((function(e){var n=t.DEFAULT_BY_KEY[e];n?i.push(n):console.warn("AG Grid: the key ".concat(e," is not a valid key for specifying a tool panel, valid keys are: ").concat(Object.keys(t.DEFAULT_BY_KEY).join(",")))})),0===i.length)return;return{toolPanels:i,defaultToolPanel:i[0].id}}return{toolPanels:t.parseComponents(e.toolPanels),defaultToolPanel:e.defaultToolPanel,hiddenByDefault:e.hiddenByDefault,position:e.position}}},t.parseComponents=function(e){var i=[];return e?(e.forEach((function(e){var n=null;if("string"==typeof e){var o=t.DEFAULT_BY_KEY[e];if(!o)return void console.warn("AG Grid: the key ".concat(e," is not a valid key for specifying a tool panel, valid keys are: ").concat(Object.keys(t.DEFAULT_BY_KEY).join(",")));n=o}else n=e;i.push(n)})),i):i},t.DEFAULT_COLUMN_COMP={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel"},t.DEFAULT_FILTER_COMP={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filter",toolPanel:"agFiltersToolPanel"},t.DEFAULT_BY_KEY={columns:t.DEFAULT_COLUMN_COMP,filters:t.DEFAULT_FILTER_COMP},t}(),lo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),co=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},uo=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return lo(e,t),e.prototype.setupResize=function(){var t=this.getGui(),e=this.resizeBar=this.createManagedBean(new to);t.setAttribute("id","ag-".concat(this.getCompId())),e.setElementToResize(t),this.appendChild(e)},e.prototype.getToolPanelId=function(){return this.toolPanelId},e.prototype.setToolPanelDef=function(t,e){var i=t.id,n=t.minWidth,o=t.maxWidth,r=t.width;this.toolPanelId=i,this.width=r;var s=this.userComponentFactory.getToolPanelCompDetails(t,e).newAgStackInstance();null!=s?(s.then(this.setToolPanelComponent.bind(this)),null!=n&&this.resizeBar.setMinWidth(n),null!=o&&this.resizeBar.setMaxWidth(o)):console.warn("AG Grid: error processing tool panel component ".concat(i,". You need to specify 'toolPanel'"))},e.prototype.setToolPanelComponent=function(t){var e=this;this.toolPanelCompInstance=t,this.appendChild(t.getGui()),this.addDestroyFunc((function(){e.destroyBean(t)})),this.width&&(this.getGui().style.width="".concat(this.width,"px"))},e.prototype.getToolPanelInstance=function(){return this.toolPanelCompInstance},e.prototype.setResizerSizerSide=function(t){var e="left"===t,i=this.gridOptionsService.get("enableRtl")?e:!e;this.resizeBar.setInverted(i)},e.prototype.refresh=function(){this.toolPanelCompInstance.refresh()},e.TEMPLATE='<div class="ag-tool-panel-wrapper" role="tabpanel"/>',co([n("userComponentFactory")],e.prototype,"userComponentFactory",void 0),co([r],e.prototype,"setupResize",null),e}(s),ho=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),po=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},fo=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},go=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.toolPanelWrappers=[],i}return ho(e,t),e.prototype.postConstruct=function(){var t,e=this;this.sideBarButtonsComp.addEventListener(so.EVENT_SIDE_BAR_BUTTON_CLICKED,this.onToolPanelButtonClicked.bind(this));var i=(null!==(t=this.gridOptionsService.get("initialState"))&&void 0!==t?t:{}).sideBar;this.setSideBarDef(i),this.addManagedPropertyListener("sideBar",(function(){e.clearDownUi(),e.setSideBarDef()})),this.sideBarService.registerSideBarComp(this),this.createManagedBean(new I(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))},e.prototype.onTabKeyDown=function(t){if(!t.defaultPrevented){var e=this.focusService,i=this.sideBarButtonsComp,n=this.getGui(),o=i.getGui(),r=this.gridOptionsService.getDocument().activeElement,s=n.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)"),a=t.target;if(s)if(o.contains(r))e.focusInto(s,t.shiftKey)&&t.preventDefault();else if(t.shiftKey){var l=null;s.contains(r)?l=this.focusService.findNextFocusableElement(s,void 0,!0):e.isTargetUnderManagedComponent(s,a)&&t.shiftKey&&(l=this.focusService.findFocusableElementBeforeTabGuard(s,a)),l||(l=o.querySelector(".ag-selected button")),l&&(t.preventDefault(),l.focus())}}},e.prototype.handleKeyDown=function(t){var e=this.gridOptionsService.getDocument();if(this.sideBarButtonsComp.getGui().contains(e.activeElement)){var i=this.sideBarButtonsComp.getGui(),n=Array.prototype.slice.call(i.querySelectorAll(".ag-side-button")),o=e.activeElement,r=n.findIndex((function(t){return t.contains(o)})),s=null;switch(t.key){case d.LEFT:case d.UP:s=Math.max(0,r-1);break;case d.RIGHT:case d.DOWN:s=Math.min(r+1,n.length-1)}if(null!==s){var a=n[s].querySelector("button");a&&(a.focus(),t.preventDefault())}}},e.prototype.onToolPanelButtonClicked=function(t){var e=t.toolPanelId;this.openedItem()===e?this.openToolPanel(void 0,"sideBarButtonClicked"):this.openToolPanel(e,"sideBarButtonClicked")},e.prototype.clearDownUi=function(){this.sideBarButtonsComp.clearButtons(),this.destroyToolPanelWrappers()},e.prototype.setSideBarDef=function(t){this.setDisplayed(!1);var e=this.gridOptionsService.get("sideBar");if(this.sideBar=ao.parse(e),this.sideBar&&this.sideBar.toolPanels){var i=this.sideBar.toolPanels;if(this.createToolPanelsAndSideButtons(i,t),!this.toolPanelWrappers.length)return;var n=t?t.visible:!this.sideBar.hiddenByDefault;if(this.setDisplayed(n),this.setSideBarPosition(t?t.position:this.sideBar.position),n)if(t){var o=t.openToolPanel;o&&this.openToolPanel(o,"sideBarInitializing")}else this.openToolPanel(this.sideBar.defaultToolPanel,"sideBarInitializing")}},e.prototype.getDef=function(){return this.sideBar},e.prototype.setSideBarPosition=function(t){t||(t="right"),this.position=t;var e="left"===t,i=e?"right":"left";return this.addOrRemoveCssClass("ag-side-bar-left",e),this.addOrRemoveCssClass("ag-side-bar-right",!e),this.toolPanelWrappers.forEach((function(t){t.setResizerSizerSide(i)})),this.eventService.dispatchEvent({type:l.EVENT_SIDE_BAR_UPDATED}),this},e.prototype.setDisplayed=function(e,i){t.prototype.setDisplayed.call(this,e,i),this.eventService.dispatchEvent({type:l.EVENT_SIDE_BAR_UPDATED})},e.prototype.getState=function(){var t={};return this.toolPanelWrappers.forEach((function(e){var i,n;t[e.getToolPanelId()]=null===(n=(i=e.getToolPanelInstance()).getState)||void 0===n?void 0:n.call(i)})),{visible:this.isDisplayed(),position:this.position,openToolPanel:this.openedItem(),toolPanels:t}},e.prototype.createToolPanelsAndSideButtons=function(t,e){var i,n,o;try{for(var r=fo(t),s=r.next();!s.done;s=r.next()){var a=s.value;this.createToolPanelAndSideButton(a,null===(o=null==e?void 0:e.toolPanels)||void 0===o?void 0:o[a.id])}}catch(t){i={error:t}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}},e.prototype.validateDef=function(t){if(null==t.id)return console.warn("AG Grid: please review all your toolPanel components, it seems like at least one of them doesn't have an id"),!1;if("agColumnsToolPanel"===t.toolPanel&&!B.__assertRegistered(a.ColumnsToolPanelModule,"Column Tool Panel",this.context.getGridId()))return!1;if("agFiltersToolPanel"===t.toolPanel){if(!B.__assertRegistered(a.FiltersToolPanelModule,"Filters Tool Panel",this.context.getGridId()))return!1;if(this.filterManager.isAdvancedFilterEnabled())return c.warnOnce("Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled."),!1}return!0},e.prototype.createToolPanelAndSideButton=function(t,e){var i=this;if(this.validateDef(t)){var n=this.sideBarButtonsComp.addButtonComp(t),o=this.getContext().createBean(new uo);o.setToolPanelDef(t,{initialState:e,onStateUpdated:function(){return i.eventService.dispatchEvent({type:l.EVENT_SIDE_BAR_UPDATED})}}),o.setDisplayed(!1);var r=o.getGui();this.appendChild(r),this.toolPanelWrappers.push(o),c.setAriaControls(n.getButtonElement(),r)}},e.prototype.refresh=function(){this.toolPanelWrappers.forEach((function(t){return t.refresh()}))},e.prototype.openToolPanel=function(t,e){void 0===e&&(e="api");var i=this.openedItem();i!==t&&(this.toolPanelWrappers.forEach((function(e){var i=t===e.getToolPanelId();e.setDisplayed(i)})),i!==this.openedItem()&&(this.sideBarButtonsComp.setActiveButton(t),this.raiseToolPanelVisibleEvent(t,null!=i?i:void 0,e)))},e.prototype.getToolPanelInstance=function(t){var e=this.toolPanelWrappers.filter((function(e){return e.getToolPanelId()===t}))[0];if(e)return e.getToolPanelInstance();console.warn("AG Grid: unable to lookup Tool Panel as invalid key supplied: ".concat(t))},e.prototype.raiseToolPanelVisibleEvent=function(t,e,i){var n=!!t&&!!e;if(e){var o={type:l.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:i,key:e,visible:!1,switchingToolPanel:n};this.eventService.dispatchEvent(o)}if(t){var r={type:l.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:i,key:t,visible:!0,switchingToolPanel:n};this.eventService.dispatchEvent(r)}},e.prototype.close=function(t){void 0===t&&(t="api"),this.openToolPanel(void 0,t)},e.prototype.isToolPanelShowing=function(){return!!this.openedItem()},e.prototype.openedItem=function(){var t=null;return this.toolPanelWrappers.forEach((function(e){e.isDisplayed()&&(t=e.getToolPanelId())})),t},e.prototype.destroyToolPanelWrappers=function(){var t=this;this.toolPanelWrappers.forEach((function(e){c.removeFromParent(e.getGui()),t.destroyBean(e)})),this.toolPanelWrappers.length=0},e.prototype.destroy=function(){this.destroyToolPanelWrappers(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-side-bar ag-unselectable">\n            <ag-side-bar-buttons ref="sideBarButtons"></ag-side-bar-buttons>\n        </div>',po([n("focusService")],e.prototype,"focusService",void 0),po([n("filterManager")],e.prototype,"filterManager",void 0),po([n("sideBarService")],e.prototype,"sideBarService",void 0),po([o("sideBarButtons")],e.prototype,"sideBarButtonsComp",void 0),po([r],e.prototype,"postConstruct",null),e}(s),vo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),yo=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},mo=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.isColGroupDef=function(t){return t&&void 0!==t.children},e.getId=function(t){return e.isColGroupDef(t)?t.groupId:t.colId},e}return vo(i,t),i.prototype.createColumnTree=function(t){var e=this,i=[],n=function(t,o){if(e.isColGroupDef(t)){var r=t,s=void 0!==r.groupId?r.groupId:r.headerName,a=new T(r,s,!1,o),l=[];return r.children.forEach((function(t){var e=n(t,o+1);e&&l.push(e)})),a.setChildren(l),a}var c=t,d=c.colId?c.colId:c.field,u=e.columnModel.getPrimaryColumn(d);return u||i.push(c),u},o=[];return t.forEach((function(t){var e=n(t,0);e&&o.push(e)})),i.length>0&&console.warn("AG Grid: unable to find grid columns for the supplied colDef(s):",i),o},i.prototype.syncLayoutWithGrid=function(t){var e=this.getLeafPathTrees();t(this.mergeLeafPathTrees(e))},i.prototype.getLeafPathTrees=function(){var t=function(e,i){var n;if(e instanceof T)if(e.isPadding())n=i;else{var o=Object.assign({},e.getColGroupDef());o.groupId=e.getGroupId(),o.children=[i],n=o}else{var r=Object.assign({},e.getColDef());r.colId=e.getColId(),n=r}var s=e.getOriginalParent();return s?t(s,n):n};return this.columnModel.getAllGridColumns().filter((function(t){var e=t.getColDef();return t.isPrimary()&&!e.showRowGroup})).map((function(e){return t(e,e.getColDef())}))},i.prototype.mergeLeafPathTrees=function(t){for(var e,i,n=this,o=function(t,e){if(!n.isColGroupDef(e))return t;var i=t,r=e;if(r.children&&r.groupId&&n.addChildrenToGroup(i,r.groupId,r.children[0]))return i;return r.children.forEach((function(t){return o(i,t)})),i},r=[],s=1;s<=t.length;s++){var a=t[s-1],l=t[s];e=a,i=l,n.isColGroupDef(e)&&n.isColGroupDef(i)&&n.getId(e)===n.getId(i)?t[s]=o(a,l):r.push(a)}return r},i.prototype.addChildrenToGroup=function(t,e,i){var n=this;if(!this.isColGroupDef(t))return!0;var o=t,r=i;if(function(t,e){var i=t.children.map(n.getId),o=c.includes(i,n.getId(e)),r=c.last(t.children),s=r&&n.getId(r)!==n.getId(e);return o&&s}(o,r))return o.children.push(r),!0;if(o.groupId===e){var s=o.children.map(this.getId);if(!c.includes(s,this.getId(r)))return o.children.push(r),!0}return o.children.forEach((function(t){return n.addChildrenToGroup(t,e,i)})),!1},yo([n("columnModel")],i.prototype,"columnModel",void 0),i=yo([e("toolPanelColDefService")],i)}(i),bo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),So=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},xo=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return bo(i,t),i.prototype.registerSideBarComp=function(t){this.sideBarComp=t},i.prototype.getSideBarComp=function(){return this.sideBarComp},i=So([e("sideBarService")],i)}(i),Co={version:"31.0.1",moduleName:a.SideBarModule,beans:[mo,xo],agStackComponents:[{componentName:"AgHorizontalResize",componentClass:to},{componentName:"AgSideBar",componentClass:go},{componentName:"AgSideBarButtons",componentClass:so}],dependantModules:[Ft]},wo=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Eo=function(){function t(){}return t.prototype.selectAllChildren=function(t,e,i){var n=this.extractAllLeafColumns(t);this.setAllColumns(n,e,i)},t.prototype.setColumn=function(t,e,i){this.setAllColumns([t],e,i)},t.prototype.setAllColumns=function(t,e,i){this.columnModel.isPivotMode()?this.setAllPivot(t,e,i):this.setAllVisible(t,e,i)},t.prototype.extractAllLeafColumns=function(t){var e=[],i=function(t){t.forEach((function(t){t.isPassesFilter()&&(t.isGroup()?i(t.getChildren()):e.push(t.getColumn()))}))};return i(t),e},t.prototype.setAllVisible=function(t,e,i){var n=[];t.forEach((function(t){t.getColDef().lockVisible||t.isVisible()!=e&&n.push({colId:t.getId(),hide:!e})})),n.length>0&&this.columnModel.applyColumnState({state:n},i)},t.prototype.setAllPivot=function(t,e,i){this.gridOptionsService.get("functionsPassive")?this.setAllPivotPassive(t,e):this.setAllPivotActive(t,e,i)},t.prototype.setAllPivotPassive=function(t,e){var i=this.columnModel.getPivotColumns().slice(),n=this.columnModel.getValueColumns().slice(),o=this.columnModel.getRowGroupColumns().slice(),r=!1,s=!1,a=!1,d=e?function(t){t.isAnyFunctionActive()||(t.isAllowValue()?(n.push(t),s=!0):t.isAllowRowGroup()?(o.push(t),r=!0):t.isAllowPivot()&&(i.push(t),a=!0))}:function(t){t.isAnyFunctionActive()&&(i.indexOf(t)>=0&&(c.removeFromArray(i,t),r=!0),n.indexOf(t)>=0&&(c.removeFromArray(n,t),s=!0),o.indexOf(t)>=0&&(c.removeFromArray(o,t),a=!0))};if(t.forEach(d),r){var u={type:l.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:i};this.eventService.dispatchEvent(u)}if(a){var h={type:l.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:o};this.eventService.dispatchEvent(h)}if(s){var p={type:l.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:o};this.eventService.dispatchEvent(p)}},t.prototype.setAllPivotActive=function(t,e,i){var n=this,o=[],r=e?function(t){if(!t.isAnyFunctionActive())if(t.isAllowValue()){var e="string"==typeof t.getAggFunc()?t.getAggFunc():n.aggFuncService.getDefaultAggFunc(t);o.push({colId:t.getId(),aggFunc:e})}else t.isAllowRowGroup()?o.push({colId:t.getId(),rowGroup:!0}):t.isAllowPivot()&&o.push({colId:t.getId(),pivot:!0})}:function(t){(t.isPivotActive()||t.isRowGroupActive()||t.isValueActive())&&o.push({colId:t.getId(),pivot:!1,rowGroup:!1,aggFunc:null})};t.forEach(r),o.length>0&&this.columnModel.applyColumnState({state:o},i)},t.prototype.updateColumns=function(t){var e=this,i=t.columns,n=t.visibleState,o=t.pivotState,r=t.eventType,s=i.map((function(t){var i=t.getColId();if(e.columnModel.isPivotMode()){var r=null==o?void 0:o[i];return{colId:i,pivot:null==r?void 0:r.pivot,rowGroup:null==r?void 0:r.rowGroup,aggFunc:null==r?void 0:r.aggFunc}}return{colId:i,hide:!(null==n?void 0:n[i])}}));this.columnModel.applyColumnState({state:s},r)},t.prototype.createPivotState=function(t){return{pivot:t.isPivotActive(),rowGroup:t.isRowGroupActive(),aggFunc:t.isValueActive()?t.getAggFunc():void 0}},wo([n("aggFuncService")],t.prototype,"aggFuncService",void 0),wo([n("columnModel")],t.prototype,"columnModel",void 0),wo([n("gridOptionsService")],t.prototype,"gridOptionsService",void 0),wo([n("eventService")],t.prototype,"eventService",void 0),t=wo([e("modelItemUtils")],t)}(),Oo={version:"31.0.1",moduleName:a.ColumnsToolPanelModule,beans:[Eo],agStackComponents:[{componentName:"AgPrimaryColsHeader",componentClass:pi},{componentName:"AgPrimaryColsList",componentClass:Ni},{componentName:"AgPrimaryCols",componentClass:Yn}],userComponents:[{componentName:"agColumnsToolPanel",componentClass:Zn}],dependantModules:[Ft,jn,Co]},Do=function(t){var e=(new Date).toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:t},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:e},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:e}]}},Ao=function(t){var e=t.name,i=t.ContentType;return{name:e,properties:{rawMap:{Extension:t.Extension,PartName:t.PartName,ContentType:i}}}},To=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},ko=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},Mo=function(t){var e=new Array(t).fill(void 0).map((function(t,e){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:"/xl/worksheets/sheet".concat(e+1,".xml")}})),i=gs.worksheetImages.size,n={};gs.workbookImageIds.forEach((function(t){n[t.type]=!0}));var o=new Array(i).fill(void 0).map((function(t,e){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:"/xl/drawings/drawing".concat(e+1,".xml")}})),r=Object.keys(n).map((function(t){return{name:"Default",ContentType:"image/".concat(t),Extension:t}}));return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:ko(ko(ko(ko(ko(ko([],To(r),!1),[{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"}],!1),To(e),!1),[{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"}],!1),To(o),!1),[{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}],!1).map((function(t){return Ao(t)}))}},Ro={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49},Po=function(t){return Math.ceil(9525*t)},No=function(t,e){if(e){var i,n;if("number"==typeof e)i=e;else i=e({rowIndex:t});return n=i,Math.round(72*n/96)}},Lo=function(t){var e=V.createHeader({encoding:"UTF-8",standalone:"yes"}),i=V.createXml(t);return"".concat(e).concat(i)},Io=function(t){var e=String.fromCharCode,i=Math.floor(t/26),n=t%26;return i&&26!==t?n?i<26?e(65+i-1)+e(65+n-1):Io(i)+e(65+n-1):Io(i-1)+"Z":e(65+t-1)},Fo=function(t,e){return{name:"xdr:".concat(t),children:[{name:"xdr:col",textNode:e.col.toString()},{name:"xdr:colOff",textNode:e.offsetX.toString()},{name:"xdr:row",textNode:e.row.toString()},{name:"xdr:rowOff",textNode:e.offsetY.toString()}]}},_o=function(t){var e=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}];switch(t.recolor&&t.recolor.toLowerCase()){case"grayscale":case"sepia":case"washout":e.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children:e}},Go=function(t,e){return{name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:e,name:t.id,descr:null!=t.altText?t.altText:void 0}},children:[_o(t)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}},Bo=function(t){if(t.saturation||t.tint){var e=[];return t.saturation&&e.push({name:"a:satMod",properties:{rawMap:{val:1e3*t.saturation}}}),t.tint&&e.push({name:"a:tint",properties:{rawMap:{val:1e3*t.tint}}}),e}},Vo=function(t,e){var i,n,o;if(t.transparency){var r=Math.min(Math.max(t.transparency,0),100);i=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(1e3*r)}}}]}if(t.recolor)switch(i||(i=[]),t.recolor.toLocaleLowerCase()){case"grayscale":i.push({name:"a:grayscl"});break;case"sepia":i.push((o={color:"D9C3A5",tint:50,saturation:180},{name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:(n={color:"black"}).color}},children:Bo(n)},{name:"a:srgbClr",properties:{rawMap:{val:o.color}},children:Bo(o)}]}));break;case"washout":i.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}})}return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":"rId".concat(e),"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:i},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}},jo=function(t,e){var i={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:e.width,cy:e.height}}}]};if(t.rotation){var n=t.rotation;i.properties={rawMap:{rot:6e4*Math.min(Math.max(n,0),360)}}}return{name:"xdr:spPr",children:[i,{name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]}]}},Wo=function(t,e,i,n){return{name:"xdr:pic",children:[Go(t,e+1),Vo(t,i+1),jo(t,n)]}},zo=function(t){var e=t.sheetIndex,i=gs.worksheetImages.get(e),n=gs.worksheetImageIds.get(e);return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children:i.map((function(t,e){var i=function(t){t.fitCell=!!t.fitCell||!t.width||!t.height;var e=t.position,i=void 0===e?{}:e,n=t.fitCell,o=t.width,r=void 0===o?0:o,s=t.height,a=void 0===s?0:s,l=t.totalHeight,c=t.totalWidth,d=i.offsetX,u=void 0===d?0:d,h=i.offsetY,p=void 0===h?0:h,f=i.row,g=void 0===f?1:f,v=i.rowSpan,y=void 0===v?1:v,m=i.column,b=void 0===m?1:m,S=i.colSpan,x=void 0===S?1:S;return{from:{row:g-1,col:b-1,offsetX:Po(u),offsetY:Po(p)},to:{row:g-1+(n?1:y-1),col:b-1+(n?1:x-1),offsetX:Po(r+u),offsetY:Po(a+p)},height:Po(l||a),width:Po(c||r)}}(t);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[Fo("from",i.from),Fo("to",i.to),Wo(t,e,n.get(t.id).index,i),{name:"xdr:clientData"}]}}))}},Uo=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},Ho=function(t){var e=Uo(t,4),i=e[0],n=e[1],o=e[2],r=e[3];return{name:"a:".concat(i),children:[{name:"a:".concat(n),properties:{rawMap:{val:o,lastClr:r}}}]}},Ko=function(){return{name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[Ho(["dk1","sysClr","windowText","000000"]),Ho(["lt1","sysClr","window","FFFFFF"]),Ho(["dk2","srgbClr","44546A"]),Ho(["lt2","srgbClr","E7E6E6"]),Ho(["accent1","srgbClr","4472C4"]),Ho(["accent2","srgbClr","ED7D31"]),Ho(["accent3","srgbClr","A5A5A5"]),Ho(["accent4","srgbClr","FFC000"]),Ho(["accent5","srgbClr","5B9BD5"]),Ho(["accent6","srgbClr","70AD47"]),Ho(["hlink","srgbClr","0563C1"]),Ho(["folHlink","srgbClr","954F72"])]}},Yo=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},Xo=function(t){var e=Yo(t,4),i=e[0],n=e[1],o=e[2],r=e[3];return{name:"a:".concat(i),properties:{rawMap:{script:o,typeface:n,panose:r}}}},qo=function(){var t=c.utf8_encode;return{name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[Xo(["latin","Calibri Light",void 0,"020F0302020204030204"]),Xo(["ea",""]),Xo(["cs",""]),Xo(["font",t("\u6e38\u30b4\u30b7\u30c3\u30af Light"),"Jpan"]),Xo(["font",t("\ub9d1\uc740 \uace0\ub515"),"Hang"]),Xo(["font",t("\u7b49\u7ebf Light"),"Hans"]),Xo(["font",t("\u65b0\u7d30\u660e\u9ad4"),"Hant"]),Xo(["font","Times New Roman","Arab"]),Xo(["font","Times New Roman","Hebr"]),Xo(["font","Tahoma","Thai"]),Xo(["font","Nyala","Ethi"]),Xo(["font","Vrinda","Beng"]),Xo(["font","Shruti","Gujr"]),Xo(["font","MoolBoran","Khmr"]),Xo(["font","Tunga","Knda"]),Xo(["font","Raavi","Guru"]),Xo(["font","Euphemia","Cans"]),Xo(["font","Plantagenet Cherokee","Cher"]),Xo(["font","Microsoft Yi Baiti","Yiii"]),Xo(["font","Microsoft Himalaya","Tibt"]),Xo(["font","MV Boli","Thaa"]),Xo(["font","Mangal","Deva"]),Xo(["font","Gautami","Telu"]),Xo(["font","Latha","Taml"]),Xo(["font","Estrangelo Edessa","Syrc"]),Xo(["font","Kalinga","Orya"]),Xo(["font","Kartika","Mlym"]),Xo(["font","DokChampa","Laoo"]),Xo(["font","Iskoola Pota","Sinh"]),Xo(["font","Mongolian Baiti","Mong"]),Xo(["font","Times New Roman","Viet"]),Xo(["font","Microsoft Uighur","Uigh"]),Xo(["font","Sylfaen","Geor"]),Xo(["font","Arial","Armn"]),Xo(["font","Leelawadee UI","Bugi"]),Xo(["font","Microsoft JhengHei","Bopo"]),Xo(["font","Javanese Text","Java"]),Xo(["font","Segoe UI","Lisu"]),Xo(["font","Myanmar Text","Mymr"]),Xo(["font","Ebrima","Nkoo"]),Xo(["font","Nirmala UI","Olck"]),Xo(["font","Ebrima","Osma"]),Xo(["font","Phagspa","Phag"]),Xo(["font","Estrangelo Edessa","Syrn"]),Xo(["font","Estrangelo Edessa","Syrj"]),Xo(["font","Estrangelo Edessa","Syre"]),Xo(["font","Nirmala UI","Sora"]),Xo(["font","Microsoft Tai Le","Tale"]),Xo(["font","Microsoft New Tai Lue","Talu"]),Xo(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[Xo(["latin","Calibri",void 0,"020F0502020204030204"]),Xo(["ea",""]),Xo(["cs",""]),Xo(["font",t("\u6e38\u30b4\u30b7\u30c3\u30af"),"Jpan"]),Xo(["font",t("\ub9d1\uc740 \uace0\ub515"),"Hang"]),Xo(["font",t("\u7b49\u7ebf"),"Hans"]),Xo(["font",t("\u65b0\u7d30\u660e\u9ad4"),"Hant"]),Xo(["font","Arial","Arab"]),Xo(["font","Arial","Hebr"]),Xo(["font","Tahoma","Thai"]),Xo(["font","Nyala","Ethi"]),Xo(["font","Vrinda","Beng"]),Xo(["font","Shruti","Gujr"]),Xo(["font","DaunPenh","Khmr"]),Xo(["font","Tunga","Knda"]),Xo(["font","Raavi","Guru"]),Xo(["font","Euphemia","Cans"]),Xo(["font","Plantagenet Cherokee","Cher"]),Xo(["font","Microsoft Yi Baiti","Yiii"]),Xo(["font","Microsoft Himalaya","Tibt"]),Xo(["font","MV Boli","Thaa"]),Xo(["font","Mangal","Deva"]),Xo(["font","Gautami","Telu"]),Xo(["font","Latha","Taml"]),Xo(["font","Estrangelo Edessa","Syrc"]),Xo(["font","Kalinga","Orya"]),Xo(["font","Kartika","Mlym"]),Xo(["font","DokChampa","Laoo"]),Xo(["font","Iskoola Pota","Sinh"]),Xo(["font","Mongolian Baiti","Mong"]),Xo(["font","Arial","Viet"]),Xo(["font","Microsoft Uighur","Uigh"]),Xo(["font","Sylfaen","Geor"]),Xo(["font","Arial","Armn"]),Xo(["font","Leelawadee UI","Bugi"]),Xo(["font","Microsoft JhengHei","Bopo"]),Xo(["font","Javanese Text","Java"]),Xo(["font","Segoe UI","Lisu"]),Xo(["font","Myanmar Text","Mymr"]),Xo(["font","Ebrima","Nkoo"]),Xo(["font","Nirmala UI","Olck"]),Xo(["font","Ebrima","Osma"]),Xo(["font","Phagspa","Phag"]),Xo(["font","Estrangelo Edessa","Syrn"]),Xo(["font","Estrangelo Edessa","Syrj"]),Xo(["font","Estrangelo Edessa","Syre"]),Xo(["font","Nirmala UI","Sora"]),Xo(["font","Microsoft Tai Le","Tale"]),Xo(["font","Microsoft New Tai Lue","Talu"]),Xo(["font","Ebrima","Tfng"])]}]}},$o=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},Zo=function(t,e,i){return{name:"a:".concat(t),properties:{rawMap:{val:e}},children:i}},Jo=function(t){var e=$o(t,6),i=e[0],n=e[1],o=e[2],r=e[3],s=e[4],a=e[5],l=[];return l.push(Zo("satMod",o)),r&&l.push(Zo("lumMod",r)),s&&l.push(Zo("tint",s)),a&&l.push(Zo("shade",a)),{name:"a:gs",properties:{rawMap:{pos:i}},children:[{name:"a:schemeClr",properties:{rawMap:{val:n}},children:l}]}},Qo=function(t,e){return{name:"a:solidFill",children:[Zo("schemeClr",t,e)]}},tr=function(t){var e=$o(t,5),i=e[0],n=e[1],o=e[2],r=e[3],s=e[4],a=$o(s,2),l=a[0],c=a[1];return{name:"a:gradFill",properties:{rawMap:{rotWithShape:i}},children:[{name:"a:gsLst",children:[Jo(n),Jo(o),Jo(r)]},{name:"a:lin",properties:{rawMap:{ang:l,scaled:c}}}]}},er=function(t){var e=$o(t,4);return{name:"a:ln",properties:{rawMap:{w:e[0],cap:e[1],cmpd:e[2],algn:e[3]}},children:[Qo("phClr"),Zo("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}},ir=function(t){var e=[];if(t){var i=$o(t,5),n=i[0],o=i[1],r=i[2],s=i[3],a=i[4];e.push({name:"a:outerShdw",properties:{rawMap:{blurRad:n,dist:o,dir:r,algn:s,rotWithShape:a}},children:[Zo("srgbClr","000000",[Zo("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},e.length?{children:e}:{})]}},nr=function(){return{name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:fillStyleLst",children:[Qo("phClr"),tr(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),tr(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",void 0,"100000"],["100000","phClr","120000","99000",void 0,"78000"],["5400000","0"]])]},{name:"a:lnStyleLst",children:[er(["6350","flat","sng","ctr"]),er(["12700","flat","sng","ctr"]),er(["19050","flat","sng","ctr"])]},{name:"a:effectStyleLst",children:[ir(),ir(),ir(["57150","19050","5400000","ctr","0"])]},{name:"a:bgFillStyleLst",children:[Qo("phClr"),Qo("phClr",[Zo("tint","95000"),Zo("satMod","170000")]),tr(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",void 0,void 0,"63000"],["5400000","0"]])]}]}},or=function(){return{name:"a:themeElements",children:[Ko(),qo(),nr()]}},rr=function(){return{name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[or(),{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]}},sr=function(t){return{name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:t.size,uniqueCount:t.size}},children:(e=t,i=[],e.forEach((function(t,e){var n=e.toString(),o={name:"t",textNode:c.utf8_encode(c.escapeString(n))};n.trim().length!==n.length&&(o.properties={rawMap:{"xml:space":"preserve"}}),i.push({name:"si",children:[o]})})),i)};var e,i};var ar,lr,cr,dr,ur,hr,pr,fr,gr,vr,yr=function(t){var e=t.formatCode,i=t.numFmtId;return e.length&&(e=function(t){for(var e=t.split(/(\[[^\]]*\])/),i=0;i<e.length;i++){var n=e[i];n.length&&(n.startsWith("[")||(n=n.replace(/\$/g,'"$"')),e[i]=c.escapeString(n))}return e.join("")}(e)),{name:"numFmt",properties:{rawMap:{formatCode:e,numFmtId:i}}}},mr=function(t){return{name:"numFmts",properties:{rawMap:{count:t.length}},children:t.map((function(t){return yr(t)}))}},br=function(t){var e=t.size,i=t.colorTheme,n=t.color,o=void 0===n?"FF000000":n,r=t.fontName,s=void 0===r?"Calibri":r,a=t.family,l=t.scheme,c=t.italic,d=t.bold,u=t.strikeThrough,h=t.outline,p=t.shadow,f=t.underline,g=t.verticalAlign,v=[{name:"sz",properties:{rawMap:{val:e}}},{name:"color",properties:{rawMap:{theme:i,rgb:o}}},{name:"name",properties:{rawMap:{val:s}}}];return a&&v.push({name:"family",properties:{rawMap:{val:a}}}),l&&v.push({name:"scheme",properties:{rawMap:{val:l}}}),c&&v.push({name:"i"}),d&&v.push({name:"b"}),u&&v.push({name:"strike"}),h&&v.push({name:"outline"}),p&&v.push({name:"shadow"}),f&&v.push({name:"u",properties:{rawMap:{val:f}}}),g&&v.push({name:"vertAlign",properties:{rawMap:{val:g}}}),{name:"font",children:v}},Sr=function(t){return{name:"fonts",properties:{rawMap:{count:t.length}},children:t.map((function(t){return br(t)}))}},xr=function(t){var e=t.patternType,i=t.fgTheme,n=t.fgTint,o=t.fgRgb,r=t.bgRgb,s=t.bgIndexed,a={name:"patternFill",properties:{rawMap:{patternType:e}}};return(i||n||o)&&(a.children=[{name:"fgColor",properties:{rawMap:{theme:i,tint:n,rgb:o}}}]),(s||r)&&(a.children||(a.children=[]),a.children.push({name:"bgColor",properties:{rawMap:{indexed:s,rgb:r}}})),{name:"fill",children:[a]}},Cr=function(t){return{name:"fills",properties:{rawMap:{count:t.length}},children:t.map((function(t){return xr(t)}))}},wr={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot"},Er=["Dashed","DashDot","DashDotDot"],Or={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"},Dr={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"},Ar={Automatic:void 0,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"},Tr=function(t){return null==t?t:("#"===t.charAt(0)&&(t=t.substring(1)),6===t.length?"FF"+t:t)},kr=function(t,e){if(!t)return"thin";var i=function(t){switch(t){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}}(e),n=wr[t];return"Continuous"===t?i:"medium"===i&&-1!==Er.indexOf(n)?"medium".concat(n):n.charAt(0).toLowerCase()+n.substring(1)},Mr=function(t){return Dr[t]||"general"},Rr=function(t){return Ar[t]||void 0},Pr=function(t){return{name:"color",properties:{rawMap:{rgb:Tr(t||"#000000")}}}},Nr=function(t){var e=t.left,i=t.right,n=t.top,o=t.bottom,r=t.diagonal,s=e?[Pr(e.color)]:void 0,a=i?[Pr(i.color)]:void 0,l=n?[Pr(n.color)]:void 0,c=o?[Pr(o.color)]:void 0,d=r?[Pr(r.color)]:void 0;return{name:"border",children:[{name:"left",properties:{rawMap:{style:e&&e.style}},children:s},{name:"right",properties:{rawMap:{style:i&&i.style}},children:a},{name:"top",properties:{rawMap:{style:n&&n.style}},children:l},{name:"bottom",properties:{rawMap:{style:o&&o.style}},children:c},{name:"diagonal",properties:{rawMap:{style:r&&r.style}},children:d}]}},Lr=function(t){return{name:"borders",properties:{rawMap:{count:t.length}},children:t.map((function(t){return Nr(t)}))}},Ir=function(t){var e=["Context","LeftToRight","RightToLeft"].indexOf(t);return Math.max(e,0)},Fr=function(t){var e=t.horizontal,i=t.indent,n=t.readingOrder,o=t.rotate,r=t.shrinkToFit,s=t.vertical,a=t.wrapText;return{name:"alignment",properties:{rawMap:{horizontal:e&&Mr(e),indent:i,readingOrder:n&&Ir(n),textRotation:o,shrinkToFit:r,vertical:s&&Rr(s),wrapText:a}}}},_r=function(t){var e=!1===t.protected?0:1;return{name:"protection",properties:{rawMap:{hidden:!0===t.hideFormula?1:0,locked:e}}}},Gr=function(t){var e=t.alignment,i=t.borderId,n=t.fillId,o=t.fontId,r=t.numFmtId,s=t.protection,a=t.xfId,l=[];return e&&l.push(Fr(e)),s&&l.push(_r(s)),{name:"xf",properties:{rawMap:{applyAlignment:e?1:void 0,applyProtection:s?1:void 0,applyBorder:i?1:void 0,applyFill:n?1:void 0,borderId:i,fillId:n,applyFont:o?1:void 0,fontId:o,applyNumberFormat:r?1:void 0,numFmtId:r,xfId:a}},children:l.length?l:void 0}},Br=function(t){return{name:"cellStyleXfs",properties:{rawMap:{count:t.length}},children:t.map((function(t){return Gr(t)}))}},Vr=function(t){return{name:"cellXfs",properties:{rawMap:{count:t.length}},children:t.map((function(t){return Gr(t)}))}},jr=function(t){return{name:"cellStyle",properties:{rawMap:{builtinId:t.builtinId,name:t.name,xfId:t.xfId}}}},Wr=function(t){return{name:"cellStyles",properties:{rawMap:{count:t.length}},children:t.map((function(t){return jr(t)}))}},zr=function(){return(zr=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Ur=function(t,e){return-1!==t.indexOf("mixedStyle")&&e>1&&(t+="_".concat(e)),t},Hr=function(){ar={base:0},lr=[],cr=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}],dr=[{patternType:"none"},{patternType:"gray125"}],ur=[{left:void 0,right:void 0,top:void 0,bottom:void 0,diagonal:void 0}],hr=[{borderId:0,fillId:0,fontId:0,numFmtId:0}],pr=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}],fr=[{builtinId:0,name:"Normal",xfId:0}]},Kr=function(t){var e,i=(e=t.pattern)?Or[e]||e:"none",n=Tr(t.color),o=Tr(t.patternColor),r=dr.findIndex((function(t){var e=t.patternType,r=t.fgRgb,s=t.bgRgb;return e==i&&r==n&&s==o}));return-1===r&&(r=dr.length,dr.push({patternType:i,fgRgb:n,bgRgb:o})),r},Yr=function(t){var e=t.fontName,i=void 0===e?"Calibri":e,n=t.color,o=t.size,r=t.bold,s=t.italic,a=t.outline,l=t.shadow,d=t.strikeThrough,u=t.underline,h=t.family,p=t.verticalAlign,f=i?c.utf8_encode(i):i,g=Tr(n),v=function(t){if(void 0!==t){var e=["Automatic","Roman","Swiss","Modern","Script","Decorative"].indexOf(t||"Automatic");return Math.max(e,0)}}(h),y=u?u.toLocaleLowerCase():void 0,m=p?p.toLocaleLowerCase():void 0,b=cr.findIndex((function(t){return t.fontName==f&&t.color==g&&t.size==o&&t.bold==r&&t.italic==s&&t.outline==a&&t.shadow==l&&t.strikeThrough==d&&t.underline==y&&t.verticalAlign==m&&t.family==v}));return-1===b&&(b=cr.length,cr.push({fontName:f,color:g,size:o,bold:r,italic:s,outline:a,shadow:l,strikeThrough:d,underline:y,verticalAlign:m,family:null!=v?v.toString():void 0})),b},Xr=function(t){var e=t.alignment,i=t.borders,n=t.font,o=t.interior,r=t.numberFormat,s=t.protection,a=t.id,l=0,d=0,u=0,h=0;a&&(a=Ur(a,gr),null==ar[a]&&(o&&(l=Kr(o)),i&&(d=function(t){var e,i,n,o,r,s,a,l,c=t.borderBottom,d=t.borderTop,u=t.borderLeft,h=t.borderRight;u&&(n=kr(u.lineStyle,u.weight),a=Tr(u.color)),h&&(o=kr(h.lineStyle,h.weight),l=Tr(h.color)),c&&(e=kr(c.lineStyle,c.weight),r=Tr(c.color)),d&&(i=kr(d.lineStyle,d.weight),s=Tr(d.color));var p=ur.findIndex((function(t){var c=t.left,d=t.right,u=t.top,h=t.bottom;if(!c&&(n||a))return!1;if(!d&&(o||l))return!1;if(!u&&(i||s))return!1;if(!h&&(e||r))return!1;var p=c||{},f=p.style,g=p.color,v=d||{},y=v.style,m=v.color,b=u||{},S=b.style,x=b.color,C=h||{},w=C.style,E=C.color;return f==n&&g==a&&(y==o&&m==l&&(S==i&&x==s&&(w==e&&E==r)))}));return-1===p&&(p=ur.length,ur.push({left:{style:n,color:a},right:{style:o,color:l},top:{style:i,color:s},bottom:{style:e,color:r},diagonal:{style:void 0,color:void 0}})),p}(i)),n&&(u=Yr(n)),r&&(h=function(t){if(t=c.utf8_encode(t),Ro[t])return Ro[t];var e=lr.findIndex((function(e){return e.formatCode===t}));return-1===e?(e=lr.length+164,lr.push({formatCode:t,numFmtId:e})):e=lr[e].numFmtId,e}(r.format)),ar[a]=pr.length,pr.push({alignment:e,borderId:d||0,fillId:l||0,fontId:u||0,numFmtId:h||0,protection:s,xfId:0})))},qr=function(t){var e=mr(lr),i=Sr(cr.map((function(e){return zr(zr({},e),{size:null!=e.size?e.size:t})}))),n=Cr(dr),o=Lr(ur),r=Br(hr),s=Vr(pr),a=Wr(fr);return Hr(),{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[e,i,n,o,r,s,a,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}},$r=function(t,e){return ar[Ur(t,e)]||0},Zr=function(t,e){var i=(e+1).toString();return{name:"sheet",properties:{rawMap:{name:t,sheetId:i,"r:id":"rId".concat(i)}}}},Jr=function(t){return{name:"sheets",children:t.map((function(t,e){return Zr(t,e)}))}},Qr=function(t){return{name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[Jr(t)]}},ts=function(t){var e=t.min,i=t.max,n=t.outlineLevel,o=t.s,r=t.width,s=t.hidden,a=t.bestFit,l=1,c="0";return r>1&&(l=function(t){return Math.ceil((t-12)/7+1)}(r),c="1"),{name:"col",properties:{rawMap:{min:e,max:i,outlineLevel:null!=n?n:void 0,width:l,style:o,hidden:s?"1":"0",bestFit:a?"1":"0",customWidth:c}}}},es=function(t,e,i){var n=t.ref,o=t.data,r=t.styleId,s=o||{type:"empty",value:null},a=s.type,l=s.value,d=a;"f"===a?d="str":a.charAt(0)===a.charAt(0).toUpperCase()&&(d=function(t){var e=t.charAt(0).toLowerCase();return"s"===e?"inlineStr":e}(a));var u,h={name:"c",properties:{rawMap:{r:n,t:"empty"===d?void 0:d,s:r?$r(r,i):void 0}}};return"empty"===d?h:(u="str"===d&&"f"===a?[{name:"f",textNode:c.escapeString(c.utf8_encode(l))}]:"inlineStr"===d?[{name:"is",children:[{name:"t",textNode:c.escapeString(c.utf8_encode(l))}]}]:[{name:"v",textNode:l}],Object.assign({},h,{children:u}))},is=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},ns=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},os=function(t){var e;return""!==(null===(e=t.data)||void 0===e?void 0:e.value)||void 0!==t.styleId},rs=function(t,e,i){var n=t.collapsed,o=t.hidden,r=t.height,s=t.outlineLevel,a=t.cells,l=void 0===a?[]:a;return function(t,e){for(var i=[],n=0,o=0;o<t.length;o++){(s=t[o]).mergeAcross&&(i.push({pos:o,excelPos:n}),n+=s.mergeAcross),n++}if(i.length)for(o=i.length-1;o>=0;o--){for(var r=[],s=t[i[o].pos],a=1;a<=s.mergeAcross;a++)r.push({ref:"".concat(Io(i[o].excelPos+1+a)).concat(e+1),styleId:s.styleId,data:{type:"empty",value:null}});r.length&&t.splice.apply(t,ns([i[o].pos+1,0],is(r),!1))}}(l,e),{name:"row",properties:{rawMap:{r:e+1,collapsed:n?"1":"0",hidden:o?"1":"0",ht:r,customHeight:null!=r?"1":"0",spans:"1:1",outlineLevel:s||void 0}},children:l.filter(os).map((function(t,e){return es(t,e,i)}))}},ss=function(t){return{name:"mergeCell",properties:{rawMap:{ref:t}}}},as=function(t){if(null==t)return 1;var e=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"].indexOf(t);return-1===e?1:e+1},ls=function(t){return t.reduce((function(t,e){var i,n,o,r,s="Center"===(i=e.position)?"C":"Right"===i?"R":"L",a=(n="".concat(t,"&amp;").concat(s),(o=e.font)?(n+="&amp;&quot;",n+=o.fontName||"Calibri",o.bold!==o.italic?n+=o.bold?",Bold":",Italic":o.bold?n+=",Bold Italic":n+=",Regular",n+="&quot;",o.size&&(n+="&amp;".concat(o.size)),o.strikeThrough&&(n+="&amp;S"),o.underline&&(n+="&amp;".concat("Double"===o.underline?"E":"U")),o.color&&(n+="&amp;K".concat(o.color.replace("#","").toUpperCase())),n):n);return"".concat(a).concat(c.escapeString(c.utf8_encode((r=e.value,c.iterateObject({"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F"},(function(t,e){r=r.replace(t,e)})),r))))}),"")},cs=function(t){var e=[];return["all","first","even"].forEach((function(i){var n=t[i],o="all"===i?"odd":i;n&&(n.header||n.footer)&&c.iterateObject(n,(function(t,i){var n="".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));i&&e.push({name:"".concat(o).concat(n),properties:{rawMap:{"xml:space":"preserve"}},textNode:ls(i)})}))})),e},ds=function(t){var e,i=t.worksheet,n=t.currentSheet,o=t.config,r=o.margins,s=void 0===r?{}:r,a=o.pageSetup,l=o.headerFooterConfig,d=o.suppressColumnOutline,u=i.table,h=u.rows,p=u.columns,f=p&&p.length?function(t,e,i){var n=[],o=[];t.forEach((function(t,i){var r,s=t.cells,a=0;s.forEach((function(t,s){var l=s+a+1,c=Io(l),d=i+1;if(t.mergeAcross){a+=t.mergeAcross;var u=Io(s+a+1);n.push("".concat(c).concat(d,":").concat(u).concat(d))}e[l-1]||(e[l-1]={});var h=t.collapsibleRanges;h&&h.forEach((function(t){o.push([l+t[0],l+t[1]])})),(r=e[l-1]).min=l,r.max=l,t.ref="".concat(c).concat(d)}))})),o.sort((function(t,e){return t[0]!==e[0]?t[0]-e[0]:e[1]-t[1]}));var r=new Map,s=new Map;return o.filter((function(t){var e=t.toString();return!r.get(e)&&(r.set(e,!0),!0)})).forEach((function(t){var n=e.find((function(e){return e.min==t[0]&&e.max==t[1]})),o=s.get(t[0]);e.push({min:t[0],max:t[1],outlineLevel:i?void 0:o||1,width:(n||{width:100}).width}),s.set(t[0],(o||0)+1)})),n}(h,p,!!d):[];return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:c.compose((function(t){return t.push({name:"sheetPr",children:[{name:"outlinePr",properties:{rawMap:{summaryBelow:0}}}]}),t}),function(t){return function(e){var i=t.reduce((function(t,e){return e.outlineLevel&&e.outlineLevel>t?e.outlineLevel:t}),0);return e.push({name:"sheetFormatPr",properties:{rawMap:{baseColWidth:10,defaultRowHeight:16,outlineLevelRow:i||void 0}}}),e}}(h),function(t){return function(e){return t.length&&e.push({name:"cols",children:t.map((function(t){return ts(t)}))}),e}}(p),function(t,e){return function(i){return t.length&&i.push({name:"sheetData",children:t.map((function(t,i){return rs(t,i,e)}))}),i}}(h,n+1),(e=f,function(t){return e.length&&t.push({name:"mergeCells",properties:{rawMap:{count:e.length}},children:e.map((function(t){return ss(t)}))}),t}),function(t){return function(e){var i=t.top,n=void 0===i?.75:i,o=t.right,r=void 0===o?.7:o,s=t.bottom,a=void 0===s?.75:s,l=t.left,c=void 0===l?.7:l,d=t.header,u=void 0===d?.3:d,h=t.footer,p=void 0===h?.3:h;return e.push({name:"pageMargins",properties:{rawMap:{bottom:a,footer:p,header:u,left:c,right:r,top:n}}}),e}}(s),function(t){return function(e){var i;return t&&e.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:(i=t.orientation,!i||"Portrait"!==i&&"Landscape"!==i?"portrait":i.toLocaleLowerCase()),paperSize:as(t.pageSize)}}}),e}}(a),function(t){return function(e){if(!t)return e;var i=null!=t.first?1:0,n=null!=t.even?1:0;return e.push({name:"headerFooter",properties:{rawMap:{differentFirst:i,differentOddEven:n}},children:cs(t)}),e}}(l),function(t){return function(e){return gs.worksheetImages.get(t)&&e.push({name:"drawing",properties:{rawMap:{"r:id":"rId1"}}}),e}}(n))([])}},us=function(t){return{name:"Relationship",properties:{rawMap:{Id:t.Id,Type:t.Type,Target:t.Target}}}},hs=function(t){return{name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:t.map((function(t){return us(t)}))}},ps=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},fs=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},gs=function(){function t(){}return t.createExcel=function(t,e,i){return this.addSheetName(e),function(t,e){1===(gr=e)&&Hr(),t.forEach(Xr)}(t,this.sheetNames.length),this.createWorksheet(e,i)},t.buildImageMap=function(t,e,i,n,o){var r=this.sheetNames.length,s=this.images.get(t.id);t.position&&t.position.row&&t.position.column||(t.position||(t.position={}),t.position=Object.assign({},t.position,{row:e,column:n.indexOf(i)+1}));var a=t;if(function(t,e){var i=t.position,n=i.colSpan,o=i.column;if(t.width)if(n)for(var r=e.slice(o-1,o+n-1),s=0,a=0;a<r.length;a++){var l=r[a].getActualWidth();if(t.width<s+l){t.position.colSpan=a+1,t.totalWidth=t.width,t.width=t.totalWidth-s;break}s+=l}else t.totalWidth=t.width}(a,n),function(t,e){var i,n=t.position,o=n.rowSpan,r=n.row;if(t.height)if(o)for(var s=0,a=0,l=r;l<r+o;l++){var c=(i=No(l,e)||20,Math.round(96*i/72));if(t.height<s+c){t.position.rowSpan=a+1,t.totalHeight=t.height,t.height=t.totalHeight-s;break}s+=c,a++}else t.totalHeight=t.height}(a,o),s){var l=s.find((function(t){return t.sheetId===r}));l?l.image.push(a):s.push({sheetId:r,image:[a]})}else this.images.set(a.id,[{sheetId:r,image:[a]}]),this.workbookImageIds.set(a.id,{type:a.imageType,index:this.workbookImageIds.size});this.buildSheetImageMap(r,a)},t.buildSheetImageMap=function(t,e){var i=this.worksheetImageIds.get(t);i||(i=new Map,this.worksheetImageIds.set(t,i));var n=this.worksheetImages.get(t);n?(n.push(e),i.get(e.id)||i.set(e.id,{index:i.size,type:e.imageType})):(this.worksheetImages.set(t,[e]),i.set(e.id,{index:0,type:e.imageType}))},t.addSheetName=function(t){for(var e=c.escapeString(t.name)||"",i="";-1!==this.sheetNames.indexOf("".concat(e).concat(i));)if(""===i)i="_1";else{var n=parseInt(i.slice(1),10);i="_".concat(n+1)}t.name="".concat(e).concat(i),this.sheetNames.push(t.name)},t.getStringPosition=function(t){return this.sharedStrings.has(t)?this.sharedStrings.get(t):(this.sharedStrings.set(t,this.sharedStrings.size),this.sharedStrings.size-1)},t.resetFactory=function(){this.sharedStrings=new Map,this.images=new Map,this.worksheetImages=new Map,this.workbookImageIds=new Map,this.worksheetImageIds=new Map,this.sheetNames=[],this.factoryMode=j.SINGLE_SHEET},t.createWorkbook=function(){return Lo(Qr(this.sheetNames))},t.createStylesheet=function(t){return Lo(qr(t))},t.createSharedStrings=function(){return Lo(sr(this.sharedStrings))},t.createCore=function(t){return Lo(Do(t))},t.createContentTypes=function(t){return Lo(Mo(t))},t.createRels=function(){var t=hs([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return Lo(t)},t.createTheme=function(){return Lo(rr())},t.createWorkbookRels=function(t){var e=new Array(t).fill(void 0).map((function(t,e){return{Id:"rId".concat(e+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:"worksheets/sheet".concat(e+1,".xml")}})),i=hs(fs(fs([],ps(e),!1),[{Id:"rId".concat(t+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:"rId".concat(t+2),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:"rId".concat(t+3),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}],!1));return Lo(i)},t.createDrawing=function(t){return Lo(zo({sheetIndex:t}))},t.createDrawingRel=function(t){var e=this,i=this.worksheetImageIds.get(t),n=[];return i.forEach((function(t,i){n.push({Id:"rId".concat(t.index+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:"../media/image".concat(e.workbookImageIds.get(i).index+1,".").concat(t.type)})})),Lo(hs(n))},t.createWorksheetDrawingRel=function(t){var e=hs([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:"../drawings/drawing".concat(t+1,".xml")}]);return Lo(e)},t.createWorksheet=function(t,e){return Lo(ds({worksheet:t,currentSheet:this.sheetNames.length-1,config:e}))},t.sharedStrings=new Map,t.sheetNames=[],t.images=new Map,t.worksheetImages=new Map,t.workbookImageIds=new Map,t.worksheetImageIds=new Map,t.factoryMode=j.SINGLE_SHEET,t}(),vs=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ys=function(){return(ys=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ms=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},bs=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},Ss=function(t){function e(e){var i=t.call(this,e)||this;return i.mixedStyles={},i.mixedStyleCounter=0,i.rows=[],i.config=Object.assign({},e),i.stylesByIds={},i.config.baseExcelStyles.forEach((function(t){i.stylesByIds[t.id]=t})),i.excelStyles=bs([],ms(i.config.baseExcelStyles),!1),i}return vs(e,t),e.prototype.addCustomContent=function(t){var e=this;t.forEach((function(t){var i,n=e.rows.length+1;e.config.suppressRowOutline||null==t.outlineLevel||(i=t.outlineLevel);var o={height:No(n,t.height||e.config.rowHeight),cells:(t.cells||[]).map((function(t,i){var o,r,s,a=e.addImage(n,e.columnsToExport[i],null===(o=t.data)||void 0===o?void 0:o.value),l=null;t.styleId&&(l="string"==typeof t.styleId?[t.styleId]:t.styleId);var c=e.getStyleId(l);if(a)return e.createCell(c,e.getDataTypeForValue(a.value),null==a.value?"":a.value);var d=null!==(s=null===(r=t.data)||void 0===r?void 0:r.value)&&void 0!==s?s:"",u=e.getDataTypeForValue(d);return t.mergeAcross?e.createMergedCell(c,u,d,t.mergeAcross):e.createCell(c,u,d)})),outlineLevel:i};null!=t.collapsed&&(o.collapsed=t.collapsed),null!=t.hidden&&(o.hidden=t.hidden),e.rows.push(o)}))},e.prototype.onNewHeaderGroupingRow=function(){var t=this,e=[];return this.rows.push({cells:e,height:No(this.rows.length+1,this.config.headerRowHeight)}),{onColumn:function(i,n,o,r,s){var a=t.config.styleLinker({rowType:W.HEADER_GROUPING,rowIndex:1,value:"grouping-".concat(n),columnGroup:i});e.push(ys(ys({},t.createMergedCell(t.getStyleId(a),t.getDataTypeForValue("string"),n,r)),{collapsibleRanges:s}))}}},e.prototype.onNewHeaderRow=function(){return this.onNewRow(this.onNewHeaderColumn,this.config.headerRowHeight)},e.prototype.onNewBodyRow=function(t){var e=this.onNewRow(this.onNewBodyColumn,this.config.rowHeight);return t&&this.addRowOutlineIfNecessary(t),e},e.prototype.prepare=function(e){var i=this;t.prototype.prepare.call(this,e),this.columnsToExport=bs([],ms(e),!1),this.cols=e.map((function(t,e){return i.convertColumnToExcel(t,e)}))},e.prototype.parse=function(){for(var t=this.rows.reduce((function(t,e){return Math.max(t,e.cells.length)}),0);this.cols.length<t;)this.cols.push(this.convertColumnToExcel(null,this.cols.length+1));var e={name:this.config.sheetName,table:{columns:this.cols,rows:this.rows}};return this.createExcel(e)},e.prototype.addRowOutlineIfNecessary=function(t){var e=this.config,i=e.gridOptionsService,n=e.suppressRowOutline,o=e.rowGroupExpandState,r=void 0===o?"expanded":o;if(!i.get("groupHideOpenParents")&&!n&&null!=t.level){var s=t.footer?1:0,a=c.last(this.rows);if(a.outlineLevel=t.level+s,"expanded"!==r){var l="collapsed"===r;if(t.isExpandable()){var d=!l&&t.expanded;a.collapsed=!d}a.hidden=!!t.parent&&-1!==t.parent.level&&(l||this.isAnyParentCollapsed(t.parent))}}},e.prototype.isAnyParentCollapsed=function(t){for(;t&&-1!==t.level;){if(!t.expanded)return!0;t=t.parent}return!1},e.prototype.convertColumnToExcel=function(t,e){var i=this.config.columnWidth;if(i)return"number"==typeof i?{width:i}:{width:i({column:t,index:e})};if(t){return{width:Math.max(t.getActualWidth(),75)}}return{}},e.prototype.onNewHeaderColumn=function(t,e){var i=this;return function(n,o){var r=i.extractHeaderValue(n),s=i.config.styleLinker({rowType:W.HEADER,rowIndex:t,value:r,column:n});e.push(i.createCell(i.getStyleId(s),i.getDataTypeForValue("string"),r))}},e.prototype.onNewBodyColumn=function(t,e){var i=this,n=0;return function(o,r,s){if(n>0)n-=1;else{var a=i.extractRowCellValue(o,r,t,"excel",s),l=a.value,c=a.valueFormatted,d=i.config.styleLinker({rowType:W.BODY,rowIndex:t,value:l,column:o,node:s}),u=i.getStyleId(d),h=o.getColSpan(s),p=i.addImage(t,o,l);p?e.push(i.createCell(u,i.getDataTypeForValue(p.value),null==p.value?"":p.value)):h>1?(n=h-1,e.push(i.createMergedCell(u,i.getDataTypeForValue(l),l,h-1))):e.push(i.createCell(u,i.getDataTypeForValue(l),l,c))}}},e.prototype.onNewRow=function(t,e){var i=[];return this.rows.push({cells:i,height:No(this.rows.length+1,e)}),{onColumn:t.bind(this,this.rows.length,i)()}},e.prototype.createExcel=function(t){var e=this.excelStyles,i=this.config;return gs.createExcel(e,t,i)},e.prototype.getDataTypeForValue=function(t){return void 0===t?"empty":this.isNumerical(t)?"n":"s"},e.prototype.getType=function(t,e,i){if(this.isFormula(i))return"f";if(e&&e.dataType)switch(e.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:console.warn("AG Grid: Unrecognized data type for excel export [".concat(e.id,".dataType=").concat(e.dataType,"]"))}return t},e.prototype.addImage=function(t,e,i){if(this.config.addImageToCell){var n=this.config.addImageToCell(t,e,i);if(n)return gs.buildImageMap(n.image,t,e,this.columnsToExport,this.config.rowHeight),n}},e.prototype.createCell=function(t,e,i,n){var o=this.getStyleById(t);!(null==o?void 0:o.dataType)&&"s"===e&&n&&(i=n);var r=this.getType(e,o,i)||e;return{styleId:o?t:void 0,data:{type:r,value:this.getCellValue(r,i)}}},e.prototype.createMergedCell=function(t,e,i,n){var o=null==i?"":i;return{styleId:this.getStyleById(t)?t:void 0,data:{type:e,value:"s"===e?gs.getStringPosition(o).toString():i},mergeAcross:n}},e.prototype.getCellValue=function(t,e){if(null==e)return gs.getStringPosition("").toString();switch(t){case"s":return""===e?"":gs.getStringPosition(e).toString();case"f":return e.slice(1);case"n":return Number(e).toString();default:return e}},e.prototype.getStyleId=function(t){if(!t||!t.length)return null;if(1===t.length)return t[0];var e=t.join("-");return this.mixedStyles[e]||this.addNewMixedStyle(t),this.mixedStyles[e].excelID},e.prototype.addNewMixedStyle=function(t){var e=this;this.mixedStyleCounter+=1;var i="mixedStyle".concat(this.mixedStyleCounter),n={};t.forEach((function(t){e.excelStyles.forEach((function(e){e.id===t&&c.mergeDeep(n,c.deepCloneObject(e))}))})),n.id=i,n.name=i;var o=t.join("-");this.mixedStyles[o]={excelID:i,key:o,result:n},this.excelStyles.push(n),this.stylesByIds[i]=n},e.prototype.isFormula=function(t){return null!=t&&(this.config.autoConvertFormulas&&t.toString().startsWith("="))},e.prototype.isNumerical=function(t){return"bigint"==typeof t||isFinite(t)&&""!==t&&!isNaN(parseFloat(t))},e.prototype.getStyleById=function(t){return null==t?null:this.stylesByIds[t]||null},e}(z),xs=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cs=function(){return(Cs=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ws=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Es=function(t){var e=t.data,i=t.fontSize,n=void 0===i?11:i,o=t.author,r=void 0===o?"AG Grid":o,s=gs.images.size>0;if(K.addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]),s){K.addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);var a=0;gs.images.forEach((function(t){var e=t[0].image[0],i=e.imageType;K.addFile("xl/media/image".concat(++a,".").concat(i),e.base64,!0)}))}if(!e||0===e.length)return console.warn("AG Grid: Invalid params supplied to getMultipleSheetsAsExcel() - `ExcelExportParams.data` is empty."),void gs.resetFactory();var l=e.length,c=0;e.forEach((function(t,e){K.addFile("xl/worksheets/sheet".concat(e+1,".xml"),t),s&&gs.worksheetImages.get(e)&&Ds(e,c++)})),K.addFile("xl/workbook.xml",gs.createWorkbook()),K.addFile("xl/styles.xml",gs.createStylesheet(n)),K.addFile("xl/sharedStrings.xml",gs.createSharedStrings()),K.addFile("xl/theme/theme1.xml",gs.createTheme()),K.addFile("xl/_rels/workbook.xml.rels",gs.createWorkbookRels(l)),K.addFile("docProps/core.xml",gs.createCore(r)),K.addFile("[Content_Types].xml",gs.createContentTypes(l)),K.addFile("_rels/.rels",gs.createRels()),gs.resetFactory();var d=t.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";return K.getContent(d)},Os=function(t){var e=t.fileName,i=void 0===e?"export.xlsx":e,n=Es(t);n&&U.download(i,n)},Ds=function(t,e){var i="".concat("xl/drawings","/drawing").concat(e+1,".xml"),n="".concat("xl/drawings","/_rels/drawing").concat(e+1,".xml.rels"),o="xl/worksheets/_rels/sheet".concat(t+1,".xml.rels");K.addFile(n,gs.createDrawingRel(t)),K.addFile(i,gs.createDrawing(t)),K.addFile(o,gs.createWorksheetDrawingRel(e))},As=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return xs(i,t),i.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsService:this.gridOptionsService})},i.prototype.getMergedParams=function(t){var e=this.gridOptionsService.get("defaultExcelExportParams");return Object.assign({},e,t)},i.prototype.export=function(t){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var e=this.getMergedParams(t),i=this.getData(e),n={data:[i],fontSize:e.fontSize,author:e.author,mimeType:e.mimeType},o=this.packageFile(n);return o&&U.download(this.getFileName(e.fileName),o),i},i.prototype.exportDataAsExcel=function(t){return this.export(t)},i.prototype.getDataAsExcel=function(t){var e=this.getMergedParams(t),i={data:[this.getData(e)],fontSize:e.fontSize,author:e.author,mimeType:e.mimeType};return this.packageFile(i)},i.prototype.setFactoryMode=function(t){gs.factoryMode=t},i.prototype.getFactoryMode=function(){return gs.factoryMode},i.prototype.getSheetDataForExcel=function(t){var e=this.getMergedParams(t);return this.getData(e)},i.prototype.getMultipleSheetsAsExcel=function(t){return Es(t)},i.prototype.exportMultipleSheetsAsExcel=function(t){return Os(t)},i.prototype.getDefaultFileExtension=function(){return"xlsx"},i.prototype.createSerializingSession=function(t){var e=this,i=e.columnModel,n=e.valueService,o=e.gridOptionsService,r=e.valueFormatterService,s=e.valueParserService,a="ag-grid";null!=t.sheetName&&(a=c.utf8_encode(String(t.sheetName).substring(0,31)));var l=Cs(Cs({},t),{sheetName:a,columnModel:i,valueService:n,gridOptionsService:o,valueFormatterService:r,valueParserService:s,suppressRowOutline:t.suppressRowOutline||t.skipRowGroups,headerRowHeight:t.headerRowHeight||t.rowHeight,baseExcelStyles:this.gridOptionsService.get("excelStyles")||[],styleLinker:this.styleLinker.bind(this)});return new Ss(l)},i.prototype.styleLinker=function(t){var e=t.rowType,i=t.rowIndex,n=t.value,o=t.column,r=t.columnGroup,s=t.node,a=e===W.HEADER,l=e===W.HEADER_GROUPING,c=a?o:r,d=[];if(a||l)return d.push("header"),l&&d.push("headerGroup"),c&&(d=d.concat(R.getHeaderClassesFromColDef(c.getDefinition(),this.gridOptionsService,o||null,r||null))),d;var u=this.gridOptionsService.get("excelStyles"),h=["cell"];if(!u||!u.length)return h;var p=u.map((function(t){return t.id}));return this.stylingService.processAllCellClasses(o.getDefinition(),{value:n,data:s.data,node:s,colDef:o.getDefinition(),column:o,rowIndex:i,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context},(function(t){p.indexOf(t)>-1&&h.push(t)})),h.sort((function(t,e){return p.indexOf(t)<p.indexOf(e)?-1:1}))},i.prototype.isExportSuppressed=function(){return this.gridOptionsService.get("suppressExcelExport")},i.prototype.packageFile=function(t){return Es(t)},ws([n("columnModel")],i.prototype,"columnModel",void 0),ws([n("valueService")],i.prototype,"valueService",void 0),ws([n("stylingService")],i.prototype,"stylingService",void 0),ws([n("gridSerializer")],i.prototype,"gridSerializer",void 0),ws([n("gridOptionsService")],i.prototype,"gridOptionsService",void 0),ws([n("valueFormatterService")],i.prototype,"valueFormatterService",void 0),ws([n("valueParserService")],i.prototype,"valueParserService",void 0),ws([r],i.prototype,"postConstruct",null),i=ws([e("excelCreator")],i)}(H),Ts={version:"31.0.1",moduleName:a.ExcelExportModule,beans:[As,Y,X],dependantModules:[O,Ft]},ks=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ms=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};!function(t){t[t.EXPANDED=0]="EXPANDED",t[t.COLLAPSED=1]="COLLAPSED",t[t.INDETERMINATE=2]="INDETERMINATE"}(vr||(vr={}));var Rs=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return ks(i,e),i.prototype.preConstruct=function(){this.setTemplate('<div class="ag-filter-toolpanel-search" role="presentation">\n                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <ag-input-text-field ref="eFilterTextField" class="ag-filter-toolpanel-search-input"></ag-input-text-field>\n            </div>')},i.prototype.postConstruct=function(){var t=this.localeService.getLocaleTextFunc();this.eFilterTextField.setAutoComplete(!1).setInputAriaLabel(t("ariaFilterColumnsInput","Filter Columns Input")).onValueChange(this.onSearchTextChanged.bind(this)),this.createExpandIcons(),this.setExpandState(vr.EXPANDED),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this))},i.prototype.init=function(t){this.params=t,this.columnModel.isReady()&&this.showOrHideOptions()},i.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=c.createIconNoSpan("columnSelectOpen",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandUnchecked=c.createIconNoSpan("columnSelectClosed",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandIndeterminate=c.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsService))},i.prototype.showOrHideOptions=function(){var t=!this.params.suppressFilterSearch,e=!this.params.suppressExpandAll,i=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(i("searchOoo","Search..."));var n=this.columnModel.getAllGridColumns().some((function(t){return t.getOriginalParent()&&t.isFilterAllowed()}));c.setDisplayed(this.eFilterTextField.getGui(),t),c.setDisplayed(this.eExpand,e&&n)},i.prototype.onSearchTextChanged=function(){var t=this;this.onSearchTextChangedDebounced||(this.onSearchTextChangedDebounced=c.debounce((function(){t.dispatchEvent({type:"searchChanged",searchText:t.eFilterTextField.getValue()})}),300)),this.onSearchTextChangedDebounced()},i.prototype.onExpandClicked=function(){var t=this.currentExpandState===vr.EXPANDED?{type:"collapseAll"}:{type:"expandAll"};this.dispatchEvent(t)},i.prototype.setExpandState=function(t){this.currentExpandState=t,c.setDisplayed(this.eExpandChecked,this.currentExpandState===vr.EXPANDED),c.setDisplayed(this.eExpandUnchecked,this.currentExpandState===vr.COLLAPSED),c.setDisplayed(this.eExpandIndeterminate,this.currentExpandState===vr.INDETERMINATE)},Ms([n("columnModel")],i.prototype,"columnModel",void 0),Ms([o("eExpand")],i.prototype,"eExpand",void 0),Ms([o("eFilterTextField")],i.prototype,"eFilterTextField",void 0),Ms([t],i.prototype,"preConstruct",null),Ms([r],i.prototype,"postConstruct",null),i}(s),Ps=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ns=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ls=function(t){function e(i,n){var o=t.call(this,e.TEMPLATE)||this;return o.expandedCallback=n,o.expanded=!1,o.hideHeader=i,o}return Ps(e,t),e.prototype.postConstruct=function(){this.eExpandChecked=c.createIconNoSpan("columnSelectOpen",this.gridOptionsService),this.eExpandUnchecked=c.createIconNoSpan("columnSelectClosed",this.gridOptionsService),this.eExpand.appendChild(this.eExpandChecked),this.eExpand.appendChild(this.eExpandUnchecked)},e.prototype.setColumn=function(t){var e=this;this.column=t,this.eFilterName.innerText=this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)||"",this.addManagedListener(this.eFilterToolPanelHeader,"click",this.toggleExpanded.bind(this)),this.addManagedListener(this.eFilterToolPanelHeader,"keydown",(function(t){t.key!==d.ENTER&&t.key!==d.SPACE||(t.preventDefault(),e.toggleExpanded())})),this.addManagedListener(this.eventService,l.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this)),this.addInIcon("filter",this.eFilterIcon,this.column),c.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),c.setDisplayed(this.eExpandChecked,!1),this.hideHeader?(c.setDisplayed(this.eFilterToolPanelHeader,!1),this.eFilterToolPanelHeader.removeAttribute("tabindex")):this.eFilterToolPanelHeader.setAttribute("tabindex","0"),this.addManagedListener(this.column,A.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,l.EVENT_FILTER_DESTROYED,this.onFilterDestroyed.bind(this))},e.prototype.getColumn=function(){return this.column},e.prototype.getColumnFilterName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)},e.prototype.addCssClassToTitleBar=function(t){this.eFilterToolPanelHeader.classList.add(t)},e.prototype.addInIcon=function(t,e,i){if(null!=e){var n=c.createIconNoSpan(t,this.gridOptionsService,i);e.appendChild(n)}},e.prototype.isFilterActive=function(){return this.filterManager.isFilterActive(this.column)},e.prototype.onFilterChanged=function(){c.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),this.dispatchEvent({type:A.EVENT_FILTER_CHANGED})},e.prototype.onFilterDestroyed=function(t){this.expanded&&"api"===t.source&&t.column.getId()===this.column.getId()&&this.columnModel.getPrimaryColumn(this.column)&&(this.removeFilterElement(),this.addFilterElement())},e.prototype.toggleExpanded=function(){this.expanded?this.collapse():this.expand()},e.prototype.expand=function(){this.expanded||(this.expanded=!0,c.setAriaExpanded(this.eFilterToolPanelHeader,!0),c.setDisplayed(this.eExpandChecked,!0),c.setDisplayed(this.eExpandUnchecked,!1),this.addFilterElement(),this.expandedCallback())},e.prototype.addFilterElement=function(){var t=this,e=c.loadTemplate('<div class="ag-filter-toolpanel-instance-filter"></div>'),i=this.filterManager.getOrCreateFilterWrapper(this.column,"TOOLBAR");if(i){var n=i.filterPromise,o=i.guiPromise;null==n||n.then((function(i){t.underlyingFilter=i,i&&o.then((function(n){n&&e.appendChild(n),t.agFilterToolPanelBody.appendChild(e),i.afterGuiAttached&&i.afterGuiAttached({container:"toolPanel"})}))}))}},e.prototype.collapse=function(){var t,e;this.expanded&&(this.expanded=!1,c.setAriaExpanded(this.eFilterToolPanelHeader,!1),this.removeFilterElement(),c.setDisplayed(this.eExpandChecked,!1),c.setDisplayed(this.eExpandUnchecked,!0),null===(e=null===(t=this.underlyingFilter)||void 0===t?void 0:t.afterGuiDetached)||void 0===e||e.call(t),this.expandedCallback())},e.prototype.removeFilterElement=function(){c.clearElement(this.agFilterToolPanelBody)},e.prototype.isExpanded=function(){return this.expanded},e.prototype.refreshFilter=function(t){var e;if(this.expanded){var i=this.underlyingFilter;i&&(t?"function"==typeof i.refreshVirtualList&&i.refreshVirtualList():null===(e=i.afterGuiDetached)||void 0===e||e.call(i))}},e.prototype.onFilterOpened=function(t){"COLUMN_MENU"===t.source&&t.column===this.column&&this.expanded&&this.collapse()},e.TEMPLATE='\n        <div class="ag-filter-toolpanel-instance">\n            <div class="ag-filter-toolpanel-header ag-filter-toolpanel-instance-header" ref="eFilterToolPanelHeader" role="button" aria-expanded="false">\n                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <span ref="eFilterName" class="ag-header-cell-text"></span>\n                <span ref="eFilterIcon" class="ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon" aria-hidden="true"></span>\n            </div>\n            <div class="ag-filter-toolpanel-instance-body ag-filter" ref="agFilterToolPanelBody"></div>\n        </div>',Ns([o("eFilterToolPanelHeader")],e.prototype,"eFilterToolPanelHeader",void 0),Ns([o("eFilterName")],e.prototype,"eFilterName",void 0),Ns([o("agFilterToolPanelBody")],e.prototype,"agFilterToolPanelBody",void 0),Ns([o("eFilterIcon")],e.prototype,"eFilterIcon",void 0),Ns([o("eExpand")],e.prototype,"eExpand",void 0),Ns([n("filterManager")],e.prototype,"filterManager",void 0),Ns([n("columnModel")],e.prototype,"columnModel",void 0),Ns([r],e.prototype,"postConstruct",null),e}(s),Is=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Fs=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},_s=function(e){function i(t,i,n,o,r){var s=e.call(this)||this;return s.columnGroup=t,s.childFilterComps=i,s.depth=o,s.expandedCallback=n,s.showingColumn=r,s}return Is(i,e),i.prototype.preConstruct=function(){this.setTemplate(i.TEMPLATE,{filterGroupComp:{cssIdentifier:"filter-toolpanel",direction:"vertical"}})},i.prototype.init=function(){var t=this;this.setGroupTitle(),this.filterGroupComp.setAlignItems("stretch"),this.filterGroupComp.addCssClass("ag-filter-toolpanel-group-level-".concat(this.depth)),this.filterGroupComp.addCssClassToTitleBar("ag-filter-toolpanel-group-level-".concat(this.depth,"-header")),this.childFilterComps.forEach((function(e){t.filterGroupComp.addItem(e),e.addCssClassToTitleBar("ag-filter-toolpanel-group-level-".concat(t.depth+1,"-header"))})),this.refreshFilterClass(),this.addExpandCollapseListeners(),this.addFilterChangedListeners(),this.setupTooltip()},i.prototype.setupTooltip=function(){var t=this;if(this.showingColumn){var e=function(){var e=t.columnGroup.getColDef().headerTooltip;t.setTooltip(e)};e(),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,e)}},i.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);return t.location="filterToolPanelColumnGroup",t},i.prototype.addCssClassToTitleBar=function(t){this.filterGroupComp.addCssClassToTitleBar(t)},i.prototype.refreshFilters=function(t){this.childFilterComps.forEach((function(e){e instanceof i?e.refreshFilters(t):e.refreshFilter(t)}))},i.prototype.isColumnGroup=function(){return this.columnGroup instanceof T},i.prototype.isExpanded=function(){return this.filterGroupComp.isExpanded()},i.prototype.getChildren=function(){return this.childFilterComps},i.prototype.getFilterGroupName=function(){return this.filterGroupName?this.filterGroupName:""},i.prototype.getFilterGroupId=function(){return this.columnGroup.getId()},i.prototype.hideGroupItem=function(t,e){this.filterGroupComp.hideItem(t,e)},i.prototype.hideGroup=function(t){this.setDisplayed(!t)},i.prototype.forEachToolPanelFilterChild=function(t){this.childFilterComps.forEach((function(e){e instanceof Ls&&t(e)}))},i.prototype.addExpandCollapseListeners=function(){var t=this,e=this.isColumnGroup()?function(){return t.expandedCallback()}:function(){return t.forEachToolPanelFilterChild((function(t){return t.expand()}))},i=this.isColumnGroup()?function(){return t.expandedCallback()}:function(){return t.forEachToolPanelFilterChild((function(t){return t.collapse()}))};this.addManagedListener(this.filterGroupComp,q.EVENT_EXPANDED,e),this.addManagedListener(this.filterGroupComp,q.EVENT_COLLAPSED,i)},i.prototype.getColumns=function(){return this.columnGroup instanceof T?this.columnGroup.getLeafColumns():[this.columnGroup]},i.prototype.addFilterChangedListeners=function(){var t=this;this.getColumns().forEach((function(e){t.addManagedListener(e,A.EVENT_FILTER_CHANGED,(function(){return t.refreshFilterClass()}))})),this.columnGroup instanceof T||this.addManagedListener(this.eventService,l.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this))},i.prototype.refreshFilterClass=function(){var t=this.getColumns();this.filterGroupComp.addOrRemoveCssClass("ag-has-filter",t.some((function(t){return t.isFilterActive()})))},i.prototype.onFilterOpened=function(t){"COLUMN_MENU"===t.source&&t.column===this.columnGroup&&this.isExpanded()&&this.collapse()},i.prototype.expand=function(){this.filterGroupComp.toggleGroupExpand(!0)},i.prototype.collapse=function(){this.filterGroupComp.toggleGroupExpand(!1)},i.prototype.setGroupTitle=function(){this.filterGroupName=this.columnGroup instanceof T?this.getColumnGroupName(this.columnGroup):this.getColumnName(this.columnGroup),this.filterGroupComp.setTitle(this.filterGroupName||"")},i.prototype.getColumnGroupName=function(t){return this.columnModel.getDisplayNameForProvidedColumnGroup(null,t,"filterToolPanel")},i.prototype.getColumnName=function(t){return this.columnModel.getDisplayNameForColumn(t,"filterToolPanel",!1)},i.prototype.destroyFilters=function(){this.childFilterComps=this.destroyBeans(this.childFilterComps),c.clearElement(this.getGui())},i.prototype.destroy=function(){this.destroyFilters(),e.prototype.destroy.call(this)},i.TEMPLATE='<div class="ag-filter-toolpanel-group-wrapper">\n            <ag-group-component ref="filterGroupComp"></ag-group-component>\n        </div>',Fs([o("filterGroupComp")],i.prototype,"filterGroupComp",void 0),Fs([n("columnModel")],i.prototype,"columnModel",void 0),Fs([t],i.prototype,"preConstruct",null),Fs([r],i.prototype,"init",null),i}(s),Gs=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Bs=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Vs=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.initialised=!1,i.hasLoadedInitialState=!1,i.isInitialState=!1,i.filterGroupComps=[],i}return Gs(e,t),e.prototype.init=function(t){var e=this;this.initialised=!0;var i={suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};c.mergeDeep(i,t),this.params=i,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,l.EVENT_COLUMN_MOVED,(function(){return e.onColumnsChanged()})),this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,(function(){return e.onColumnsChanged()})),this.addManagedListener(this.eventService,l.EVENT_TOOL_PANEL_VISIBLE_CHANGED,(function(t){"filters"===t.key&&e.refreshFilters(t.visible)})),this.columnModel.isReady()&&this.onColumnsChanged();var n=this.getAriaElement();c.setAriaLive(n,"assertive"),c.setAriaAtomic(n,!1),c.setAriaRelevant(n,"text")},e.prototype.onColumnsChanged=function(){var t=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!t?this.syncFilterLayout():this.buildTreeFromProvidedColumnDefs(),this.refreshAriaLabel()},e.prototype.syncFilterLayout=function(){this.toolPanelColDefService.syncLayoutWithGrid(this.setFiltersLayout.bind(this)),this.refreshAriaLabel()},e.prototype.buildTreeFromProvidedColumnDefs=function(){var t=this.columnModel.getPrimaryColumnTree();this.recreateFilters(t)},e.prototype.setFiltersLayout=function(t){var e=this.toolPanelColDefService.createColumnTree(t);this.recreateFilters(e)},e.prototype.recreateFilters=function(t){var e=this,i=this.gridOptionsService.getDocument().activeElement;this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!this.params.initialState);var n=this.getExpansionState();this.destroyFilters(),this.filterGroupComps=this.recursivelyAddComps(t,0,n);var o=this.filterGroupComps.length;o&&(this.filterGroupComps.forEach((function(t){return e.appendChild(t)})),this.setFirstAndLastVisible(0,o-1)),c.exists(this.searchFilterText)&&this.searchFilters(this.searchFilterText),this.fireExpandedEvent(),this.getGui().contains(i)&&i.focus(),this.isInitialState=!1,this.refreshAriaLabel()},e.prototype.recursivelyAddComps=function(t,e,i){var n=this;return c.flatten(t.map((function(t){if(t instanceof T)return c.flatten(n.recursivelyAddFilterGroupComps(t,e,i));var o=t;if(!n.shouldDisplayFilter(o))return[];var r=new Ls(0===e,(function(){return n.onFilterExpanded()}));if(n.createBean(r),r.setColumn(o),i.get(o.getId())&&r.expand(),e>0)return r;var s=n.createBean(new _s(o,[r],n.onGroupExpanded.bind(n),e,!0));return s.addCssClassToTitleBar("ag-filter-toolpanel-header"),i.get(s.getFilterGroupId())||s.collapse(),s})))},e.prototype.refreshAriaLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=t("ariaFilterPanelList","Filter List"),i=t("filters","Filters"),n=this.getGui().querySelectorAll("".concat(".ag-filter-toolpanel-group-item",":not(").concat(".ag-filter-toolpanel-group-wrapper",", ").concat(".ag-hidden",")")).length;c.setAriaLabel(this.getAriaElement(),"".concat(e," ").concat(n," ").concat(i))},e.prototype.recursivelyAddFilterGroupComps=function(t,e,i){if(this.filtersExistInChildren(t.getChildren())){var n=t.getColGroupDef();if(n&&n.suppressFiltersToolPanel)return[];var o=t.isPadding()?e:e+1,r=c.flatten(this.recursivelyAddComps(t.getChildren(),o,i));if(t.isPadding())return r;var s=new _s(t,r,this.onGroupExpanded.bind(this),e,!1);this.createBean(s),s.addCssClassToTitleBar("ag-filter-toolpanel-header");var a=i.get(s.getFilterGroupId());return(this.isInitialState&&!a||!1===a)&&s.collapse(),[s]}},e.prototype.filtersExistInChildren=function(t){var e=this;return t.some((function(t){return t instanceof T?e.filtersExistInChildren(t.getChildren()):e.shouldDisplayFilter(t)}))},e.prototype.shouldDisplayFilter=function(t){var e=t.getColDef()&&t.getColDef().suppressFiltersToolPanel;return t.isFilterAllowed()&&!e},e.prototype.getExpansionState=function(){var t=new Map;if(this.isInitialState){var e=this.params.initialState,i=e.expandedColIds,n=e.expandedGroupIds;return i.forEach((function(e){return t.set(e,!0)})),n.forEach((function(e){return t.set(e,!0)})),t}var o=function(e){t.set(e.getFilterGroupId(),e.isExpanded()),e.getChildren().forEach((function(e){e instanceof _s?o(e):t.set(e.getColumn().getId(),e.isExpanded())}))};return this.filterGroupComps.forEach(o),t},e.prototype.refresh=function(){},e.prototype.setVisible=function(e){t.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},e.prototype.expandFilterGroups=function(t,e){var i=[],n=function(o){var r=o.getFilterGroupId();(!e||c.includes(e,r))&&(t&&o.isColumnGroup()?o.expand():o.collapse(),i.push(r)),o.getChildren().forEach((function(t){t instanceof _s&&n(t)}))};if(this.filterGroupComps.forEach(n),this.onGroupExpanded(),e){var o=e.filter((function(t){return i.indexOf(t)<0}));o.length>0&&console.warn("AG Grid: unable to find groups for these supplied groupIds:",o)}},e.prototype.expandFilters=function(t,e){var i=[],n=function(o){if(o instanceof _s){var r=!1;return o.getChildren().forEach((function(e){n(e)&&(t?(o.expand(),r=!0):o.isColumnGroup()||o.collapse())})),r}var s=o.getColumn().getColId(),a=!e||c.includes(e,s);return a&&(t?o.expand():o.collapse(),i.push(s)),a};if(this.filterGroupComps.forEach(n),this.onGroupExpanded(),e){var o=e.filter((function(t){return i.indexOf(t)<0}));o.length>0&&console.warn("AG Grid: unable to find columns for these supplied colIds:",o)}},e.prototype.onGroupExpanded=function(){this.fireExpandedEvent()},e.prototype.onFilterExpanded=function(){this.dispatchEvent({type:"filterExpanded"})},e.prototype.fireExpandedEvent=function(){var t,e=0,i=0,n=function(t){t.isColumnGroup()&&(t.isExpanded()?e++:i++,t.getChildren().forEach((function(t){t instanceof _s&&n(t)})))};this.filterGroupComps.forEach(n),t=e>0&&i>0?vr.INDETERMINATE:i>0?vr.COLLAPSED:vr.EXPANDED,this.dispatchEvent({type:"groupExpanded",state:t})},e.prototype.performFilterSearch=function(t){this.searchFilterText=c.exists(t)?t.toLowerCase():null,this.searchFilters(this.searchFilterText)},e.prototype.searchFilters=function(t){var e,i,n=function(e){return!c.exists(t)||-1!==e.toLowerCase().indexOf(t)},o=function(t,e){if(!(t instanceof _s))return n(t.getColumnFilterName()||"");var i=t.getChildren(),r=n(t.getFilterGroupName()),s=e||r;if(s){t.hideGroup(!1);for(var a=0;a<i.length;a++)o(i[a],s),t.hideGroupItem(!1,a);return!0}var l=!1;return i.forEach((function(i,n){var r=o(i,e);t.hideGroupItem(!r,n),r&&(l=!0)})),t.hideGroup(!l),l};this.filterGroupComps.forEach((function(t,n){o(t,!1),void 0===e?t.containsCssClass("ag-hidden")||(e=n,i=n):t.containsCssClass("ag-hidden")||i===n||(i=n)})),this.setFirstAndLastVisible(e,i),this.refreshAriaLabel()},e.prototype.setFirstAndLastVisible=function(t,e){this.filterGroupComps.forEach((function(i,n){i.removeCssClass("ag-first-group-visible"),i.removeCssClass("ag-last-group-visible"),n===t&&i.addCssClass("ag-first-group-visible"),n===e&&i.addCssClass("ag-last-group-visible")}))},e.prototype.refreshFilters=function(t){this.filterGroupComps.forEach((function(e){return e.refreshFilters(t)}))},e.prototype.getExpandedFiltersAndGroups=function(){var t=[],e=new Set,i=function(n){if(n instanceof _s){n.getChildren().forEach((function(t){return i(t)}));var o=n.getFilterGroupId();n.isExpanded()&&!e.has(o)&&t.push(o)}else n.isExpanded()&&e.add(n.getColumn().getColId())};return this.filterGroupComps.forEach(i),{expandedGroupIds:t,expandedColIds:Array.from(e)}},e.prototype.destroyFilters=function(){this.filterGroupComps=this.destroyBeans(this.filterGroupComps),c.clearElement(this.getGui())},e.prototype.destroy=function(){this.destroyFilters(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-filter-list-panel"></div>',Bs([n("gridApi")],e.prototype,"gridApi",void 0),Bs([n("columnApi")],e.prototype,"columnApi",void 0),Bs([n("toolPanelColDefService")],e.prototype,"toolPanelColDefService",void 0),Bs([n("columnModel")],e.prototype,"columnModel",void 0),e}(s),js=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ws=function(){return(Ws=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},zs=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Us=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.initialised=!1,i.listenerDestroyFuncs=[],i}return js(e,t),e.prototype.init=function(t){this.initialised&&(this.listenerDestroyFuncs.forEach((function(t){return t()})),this.listenerDestroyFuncs=[]),this.initialised=!0;var e={suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi};this.params=Ws(Ws(Ws({},e),t),{context:this.gridOptionsService.context}),this.filtersToolPanelHeaderPanel.init(this.params),this.filtersToolPanelListPanel.init(this.params);var i=this.params.suppressExpandAll,n=this.params.suppressFilterSearch;i&&n&&this.filtersToolPanelHeaderPanel.setDisplayed(!1),this.listenerDestroyFuncs.push(this.addManagedListener(this.filtersToolPanelHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"searchChanged",this.onSearchChanged.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"filterExpanded",this.onFilterExpanded.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"groupExpanded",this.onGroupExpanded.bind(this)))},e.prototype.setVisible=function(e){t.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},e.prototype.onExpandAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(!0)},e.prototype.onCollapseAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(!1)},e.prototype.onSearchChanged=function(t){this.filtersToolPanelListPanel.performFilterSearch(t.searchText)},e.prototype.setFilterLayout=function(t){this.filtersToolPanelListPanel.setFiltersLayout(t)},e.prototype.onFilterExpanded=function(){this.params.onStateUpdated()},e.prototype.onGroupExpanded=function(t){this.filtersToolPanelHeaderPanel.setExpandState(t.state),this.params.onStateUpdated()},e.prototype.expandFilterGroups=function(t){this.filtersToolPanelListPanel.expandFilterGroups(!0,t)},e.prototype.collapseFilterGroups=function(t){this.filtersToolPanelListPanel.expandFilterGroups(!1,t)},e.prototype.expandFilters=function(t){this.filtersToolPanelListPanel.expandFilters(!0,t)},e.prototype.collapseFilters=function(t){this.filtersToolPanelListPanel.expandFilters(!1,t)},e.prototype.syncLayoutWithGrid=function(){this.filtersToolPanelListPanel.syncFilterLayout()},e.prototype.refresh=function(){this.init(this.params)},e.prototype.getState=function(){return this.filtersToolPanelListPanel.getExpandedFiltersAndGroups()},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-filter-toolpanel">\n            <ag-filters-tool-panel-header ref="filtersToolPanelHeaderPanel"></ag-filters-tool-panel-header>\n            <ag-filters-tool-panel-list ref="filtersToolPanelListPanel"></ag-filters-tool-panel-list>\n         </div>',zs([o("filtersToolPanelHeaderPanel")],e.prototype,"filtersToolPanelHeaderPanel",void 0),zs([o("filtersToolPanelListPanel")],e.prototype,"filtersToolPanelListPanel",void 0),e}(s),Hs={version:"31.0.1",moduleName:a.FiltersToolPanelModule,beans:[],agStackComponents:[{componentName:"AgFiltersToolPanelHeader",componentClass:Rs},{componentName:"AgFiltersToolPanelList",componentClass:Vs}],userComponents:[{componentName:"agFiltersToolPanel",componentClass:Us}],dependantModules:[Co,Ft]};class Ks{constructor(t,e,i){this._encode=t,this._decode=e,this._rangeCallback=i}floor(t){const e=new Date(t),i=this._encode(e);return this._decode(i)}ceil(t){const e=new Date(Number(t)-1),i=this._encode(e);return this._decode(i+1)}range(t,e,i){var n;const o=null===(n=this._rangeCallback)||void 0===n?void 0:n.call(this,t,e),r=this._encode(i?this.floor(t):this.ceil(t)),s=this._encode(i?this.ceil(e):this.floor(e));if(s<r)return[];const a=[];for(let t=r;t<=s;t++){const e=this._decode(t);a.push(e)}return null==o||o(),a}}class Ys extends Ks{getOffset(t,e){const i="number"==typeof t||t instanceof Date?this._encode(new Date(t)):0;return Math.floor(i)%e}every(t,e){let i,n=0;const{snapTo:o="start"}=null!=e?e:{};if("string"==typeof o){const e=n;i=(i,r)=>{const s="start"===o?i:r;return n=this.getOffset(s,t),()=>n=e}}else"number"==typeof o?n=this.getOffset(new Date(o),t):o instanceof Date&&(n=this.getOffset(o,t));return new Ks(e=>{const i=this._encode(e);return Math.floor((i-n)/t)},e=>this._decode(e*t+n),i)}}const Xs=new Ys((function(t){return t.getTime()}),(function(t){return new Date(t)}));new Date(0).getFullYear();const qs=6e4*(new Date).getTimezoneOffset();const $s=new Ys((function(t){return Math.floor((t.getTime()-qs)/1e3)}),(function(t){return new Date(qs+1e3*t)})),Zs=6e4*(new Date).getTimezoneOffset();const Js=new Ys((function(t){return Math.floor((t.getTime()-Zs)/6e4)}),(function(t){return new Date(Zs+6e4*t)})),Qs=6e4*(new Date).getTimezoneOffset();const ta=new Ys((function(t){return Math.floor((t.getTime()-Qs)/36e5)}),(function(t){return new Date(Qs+36e5*t)}));const ea=new Ys((function(t){const e=6e4*t.getTimezoneOffset();return Math.floor((t.getTime()-e)/864e5)}),(function(t){const e=new Date(1970,0,1);return e.setDate(e.getDate()+t),e}));function ia(t){const e=new Date(2023,0,1+t).getTime();return new Ys((function(t){const i=t.getTime();return Math.floor((i-e)/6048e5)}),(function(t){const i=new Date(e);return i.setDate(i.getDate()+7*t),i}))}const na=ia(0),oa=ia(1),ra=ia(2),sa=ia(3),aa=ia(4),la=ia(5),ca=ia(6);const da=new Ys((function(t){return 12*t.getFullYear()+t.getMonth()}),(function(t){const e=Math.floor(t/12);return new Date(e,t-12*e,1)}));const ua=new Ys((function(t){return t.getFullYear()}),(function(t){const e=new Date;return e.setFullYear(t),e.setMonth(0,1),e.setHours(0,0,0,0),e}));const ha=new Ys((function(t){return Math.floor(t.getTime()/6e4)}),(function(t){return new Date(6e4*t)}));const pa=new Ys((function(t){return Math.floor(t.getTime()/36e5)}),(function(t){return new Date(36e5*t)}));const fa=new Ys((function(t){return Math.floor(t.getTime()/864e5)}),(function(t){const e=new Date(0);return e.setUTCDate(e.getUTCDate()+t),e.setUTCHours(0,0,0,0),e}));const ga=new Ys((function(t){return 12*t.getUTCFullYear()+t.getUTCMonth()}),(function(t){const e=Math.floor(t/12),i=t-12*e;return new Date(Date.UTC(e,i,1))}));const va=new Ys((function(t){return t.getUTCFullYear()}),(function(t){const e=new Date;return e.setUTCFullYear(t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e}));var ya=Object.freeze({__proto__:null,millisecond:Xs,second:$s,minute:Js,hour:ta,day:ea,sunday:na,monday:oa,tuesday:ra,wednesday:sa,thursday:aa,friday:la,saturday:ca,month:da,year:ua,utcMinute:ha,utcHour:pa,utcDay:fa,utcMonth:ga,utcYear:va});function ma(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]])}return i}function ba(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s}function Sa(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function xa(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const Ca={isEnterprise:!1};class wa{constructor(){this.destroyFns=[]}destroy(){for(const t of this.destroyFns)t()}}const Ea=[];function Oa(t){const e=Ea.find(e=>t.type===e.type&&t.optionsKey===e.optionsKey&&t.identifier===e.identifier);if(e){if("enterprise"===t.packageType&&"community"===e.packageType){const i=Ea.indexOf(e);Ea.splice(i,1,t)}}else Ea.push(t)}function Da(){return Ea.some(t=>"enterprise"===t.packageType)}const Aa=new Map;function Ta(t){const{length:e}=t;if(0===e)return;let i=1/0,n=-1/0;for(let o=0;o<e;o++){let e=t[o];e instanceof Date&&(e=e.getTime()),"number"==typeof e&&(e<i&&(i=e),e>n&&(n=e))}const o=[i,n];return o.some(t=>!isFinite(t))?void 0:o}function ka(t,e,i){var n;let o=!1;return t.length>2&&(t=null!==(n=Ta(t))&&void 0!==n?n:[NaN,NaN]),isNaN(e)||(o||(o=e>t[0]),t=[e,t[1]]),isNaN(i)||(o||(o=i<t[1]),t=[t[0],i]),t[0]>t[1]&&(t=[]),{extent:t,clipped:o}}function Ma(t,e){if(null==t||null==e||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(Array.isArray(t[i])&&Array.isArray(e[i])){if(!Ma(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;return!0}function Ra(t){return void 0===t?[]:Array.isArray(t)?t:[t]}const Pa={};function Na(t,e){Pa[e]||(t(),Pa[e]=!0)}const La={log(...t){console.log(...t)},warn(t,...e){console.warn("AG Charts - "+t,...e)},error(t,...e){"object"==typeof t?console.error("AG Charts error",t,...e):console.error("AG Charts - "+t,...e)},table(...t){console.table(...t)},warnOnce(t,...e){Na(()=>La.warn(t,...e),"Logger.warn: "+t)},errorOnce(t,...e){Na(()=>La.error(t,...e),"Logger.warn: "+t)}};function Ia(t){const e="undefined"!=typeof window?window:void 0;return null==e?void 0:e[t]}let Fa=Date.now();const _a={create:(...t)=>(...e)=>{_a.check(...t)&&("function"==typeof e[0]&&(e=Ra(e[0]())),(()=>{const t=Date.now()-Fa;if(t>2e3){const e=(Math.floor(t/100)/10).toFixed(1);La.log(`**** ${e}s since last log message ****`)}Fa=Date.now()})(),La.log(...e))},check(...t){0===t.length&&t.push(!0);return Ra(Ia("agChartsDebug")).some(e=>t.includes(e))}},Ga=Symbol("BREAK"),Ba="__decorator_config";function Va(t,e){return(i,n)=>{const o=n.toString(),r="__"+o,{getters:s,setters:a}=function(t,e,i,n){null==Object.getOwnPropertyDescriptor(t,Ba)&&Object.defineProperty(t,Ba,{value:{}});const o=t[Ba];if(null!=o[i])return o[i];o[i]={setters:[],getters:[]};const r=Object.getOwnPropertyDescriptor(t,e),s=null==r?void 0:r.set,a=null==r?void 0:r.get;return Object.defineProperty(t,e,{set:function(t){var r,l;const c=null!==(l=null===(r=o[i])||void 0===r?void 0:r.setters)&&void 0!==l?l:[];let d;c.some(t=>t.length>2)&&(d=a?a.call(this):this[n]);for(const i of c)if((t=i(this,e,t,d))===Ga)return;s?s.call(this,t):this[n]=t},get:function(){var t,r;let s=a?a.call(this):this[n];for(const n of null!==(r=null===(t=o[i])||void 0===t?void 0:t.getters)&&void 0!==r?r:[])if(s=n(this,e,s),s===Ga)return;return s},enumerable:!0,configurable:!1}),o[i]}(i,n,o,r);a.push(t),e&&s.unshift(e)}}function ja(t){return void 0!==t&&Ba in t}function Wa(t){const e=new Set;for(;ja(t);)e.add(null==t?void 0:t[Ba]),t=Object.getPrototypeOf(t);return Array.from(e).flatMap(t=>Object.keys(t))}function za(t,e){const i=$a(t),n=$a(e);if("array"===n){const n=e;return"array"!==i||t.length!==n.length||n.some((e,i)=>null!=za(null==t?void 0:t[i],e))?[...n]:null}if("primitive"===n)return"primitive"!==i?Object.assign({},e):t!==e?e:null;const o=t||{},r=e||{},s=new Set([...Object.keys(o),...Object.keys(r)]);let a=0;const l={};for(const t of s){if(o[t]===r[t])continue;const e=e=>{l[t]=e,a++},i=$a(o[t]),n=$a(r[t]);if(i!==n){e(r[t]);continue}if("primitive"===n||null===n){e(r[t]);continue}if("array"===n&&o[t].length!==r[t].length){e(r[t]);continue}if("class-instance"===n){e(r[t]);continue}if("function"===n&&o[t]!==r[t]){e(r[t]);continue}const s=za(o[t],r[t]);null!==s&&e(s)}return 0===a?null:l}const Ua=Symbol("<delete-property>"),Ha=Symbol("<unspecified-property>");function Ka(t,e){var i;const n=null!==(i=null==e?void 0:e.avoidDeepClone)&&void 0!==i?i:[];if(t.map(t=>$a(t)).some(t=>"array"===t)){const i=t[t.length-1];return Array.isArray(i)?i.map(t=>{const i=$a(t);return"array"===i?Ka([[],t],e):"object"===i?Ka([{},t],e):t}):i}const o={},r=new Set(t.map(t=>null!=t?Object.keys(t):[]).reduce((t,e)=>t.concat(e),[]));for(const i of r){const r=t.map(t=>null!=t&&"object"==typeof t&&i in t?t[i]:Ha).filter(t=>t!==Ha);if(0===r.length)continue;const s=r[r.length-1];if(s===Ua)continue;const a=r.map(t=>$a(t)),l=a[0];a.some(t=>t!==l)?o[i]=s:"array"!==l&&"object"!==l||n.includes(i)?o[i]="array"===l?[...s]:s:o[i]=Ka(r,e)}return o}function Ya(t,e,i={}){var n,o,r;const{path:s,matcherPath:a=(s?s.replace(/(\[[0-9+]+])/i,"[]"):void 0),skip:l=[],constructors:c={},constructedArrays:d=new WeakMap,allowedTypes:u={},idx:h}=i;if(null==t)throw new Error("AG Charts - target is uninitialised: "+(null!=s?s:"<root>"));if(null==e)return t;const p=t;null!=h&&"_declarationOrder"in p&&(p._declarationOrder=h);const f=$a(t);for(const h in e){const g=`${a?a+".":""}${h}`;if(l.indexOf(g)>=0)continue;const v=e[h],y=`${s?s+".":""}${h}`,m=p.constructor,b=p[h];let S=null!==(n=c[g])&&void 0!==n?n:c[h];try{const e=$a(b),n=$a(v);if("class-instance"===f&&!(h in t)&&!Object.prototype.hasOwnProperty.call(p,h)){La.warn(`unable to set [${y}] in ${null==m?void 0:m.name} - property is unknown`);continue}const s=null!==(o=u[g])&&void 0!==o?o:[e];if("class-instance"===e&&"object"===n);else if(null!=e&&null!=n&&!s.includes(n)){La.warn(`unable to set [${y}] in ${null==m?void 0:m.name} - can't apply type of [${n}], allowed types are: [${s}]`);continue}if("array"===n)if(S=null!==(r=null!=S?S:d.get(b))&&void 0!==r?r:c[g+"[]"],null!=S){const t=v;p[h]=t.map((t,e)=>Ya(new S,t,Object.assign(Object.assign({},i),{path:y,matcherPath:g+"[]",idx:e})))}else p[h]=v;else"class-instance"===n?p[h]=v:"object"===n?null!=b?Ya(b,v,Object.assign(Object.assign({},i),{path:y,matcherPath:g,idx:void 0})):p[h]=null!=S?Ya(new S,v,Object.assign(Object.assign({},i),{path:y,matcherPath:g,idx:void 0})):v:p[h]=v}catch(t){La.warn(`unable to set [${y}] in [${null==m?void 0:m.name}]; nested error is: ${t.message}`)}}return t}function Xa(t,e,i,...n){const o=$a(t),{skip:r=[]}=null!=i?i:{};if("array"===o)return e(o,t,...n),void t.forEach((t,o)=>{Xa(t,e,i,...(null!=n?n:[]).map(t=>null==t?void 0:t[o]))});if("object"===o){e(o,t,...n);for(const o in t){if(r.includes(o))continue;const s=t[o],a=null==n?void 0:n.map(t=>null==t?void 0:t[o]),l=$a(s);"object"!==l&&"array"!==l||Xa(s,e,i,...a)}}}const qa="undefined"!=typeof window;function $a(t){return null==t?null:qa&&t instanceof HTMLElement?"primitive":Array.isArray(t)?"array":t instanceof Date?"primitive":"object"==typeof t&&t.constructor===Object?"object":"function"==typeof t?"function":"object"==typeof t&&null!=t.constructor?"class-instance":"primitive"}const Za=2*Math.PI;function Ja(t){return t%=Za,t+=Za,t%=Za}function Qa(t){return(t%=Za)<-Math.PI?t+=Za:t>=Math.PI&&(t-=Za),t}function tl(t){return t/180*Math.PI}function el(t,e,i){return Math.max(e,Math.min(i,t))}class il{constructor(){this.type="band",this.cache=null,this.cacheProps=["_domain","range","_paddingInner","_paddingOuter","round","interval"],this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}didChange(){const{cache:t}=this;return!(t&&!this.cacheProps.some(e=>this[e]!==t[e]))&&(this.cache={},this.cacheProps.forEach(t=>this.cache[t]=this[t]),!0)}refresh(){this.didChange()&&this.update()}set domain(t){const e=[];this.index=new Map;const i=this.index;t.forEach(t=>{void 0===i.get(t)&&i.set(t,e.push(t)-1)}),this._domain=e}get domain(){return this._domain}ticks(){this.refresh();const{interval:t=1}=this,e=Math.abs(Math.round(t));return this._domain.filter((t,i)=>i%e==0)}convert(t){this.refresh();const e=this.index.get(t);if(void 0===e)return NaN;const i=this.ordinalRange[e];return void 0===i?NaN:i}invert(t){this.refresh();const e=this.ordinalRange.findIndex(e=>e===t);return this.domain[e]}get bandwidth(){return this.refresh(),this._bandwidth}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=el(t,0,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this._paddingInner=el(t,0,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this._paddingOuter=el(t,0,1)}get paddingOuter(){return this._paddingOuter}update(){const t=this._domain.length;if(0===t)return;const e=this.round,i=this._paddingInner,n=this._paddingOuter,[o,r]=this.range,s=r-o,a=s/Math.max(1,t+2*n-i),l=e?Math.floor(a):a,c=o+(s-l*(t-i))/2,d=e?Math.round(c):c,u=l*(1-i),h=e?Math.round(u):u,p=a*(1-i),f=[];for(let e=0;e<t;e++)f.push(d+l*e);this._bandwidth=h,this._rawBandwidth=p,this.ordinalRange=f}}function nl(t,e,i){return Math.min(i,Math.max(t,e))}function ol(t,e,i=1e-10){return Math.abs(t-e)<i}function rl(t){return Math.sign(t)<0||Object.is(t,-0)}function sl(t,e=2){const i=Math.pow(10,e);return Math.round(t*i)/i}function al(t,e=2){const i=Math.floor(Math.log(Math.abs(t))/Math.LN10);return i>=0||!isFinite(i)?t.toFixed(e):t.toFixed(Math.abs(i)-1+e)}function ll(t,e){return t>=0?Math.floor(t%e):Math.floor(t%e+e)}class cl{constructor(t,e,i,n=1){this.r=nl(0,t||0,1),this.g=nl(0,e||0,1),this.b=nl(0,i||0,1),this.a=nl(0,n||0,1)}static validColorString(t){return t.indexOf("#")>=0?!!cl.parseHex(t):t.indexOf("rgb")>=0?!!cl.stringToRgba(t):!!cl.nameToHex[t.toLowerCase()]}static fromString(t){if(t.indexOf("#")>=0)return cl.fromHexString(t);const e=cl.nameToHex[t.toLowerCase()];if(e)return cl.fromHexString(e);if(t.indexOf("rgb")>=0)return cl.fromRgbaString(t);throw new Error(`Invalid color string: '${t}'`)}static tryParseFromString(t){try{return cl.fromString(t)}catch(e){return La.warnOnce(`invalid color string: '${t}'.`),cl.fromArray([0,0,0])}}static parseHex(t){let e;switch((t=t.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(let i=0;i<t.length;i+=2)e.push(parseInt(`${t[i]}${t[i+1]}`,16));break;case 3:case 4:e=t.split("").map(t=>parseInt(t,16)).map(t=>t+16*t)}if((null==e?void 0:e.length)>=3&&e.every(t=>t>=0))return 3===e.length&&e.push(255),e}static fromHexString(t){const e=cl.parseHex(t);if(e){const[t,i,n,o]=e;return new cl(t/255,i/255,n/255,o/255)}throw new Error(`Malformed hexadecimal color string: '${t}'`)}static stringToRgba(t){let[e,i]=[NaN,NaN];for(let n=0;n<t.length;n++){const o=t[n];if(e||"("!==o){if(")"===o){i=n;break}}else e=n}const n=e&&i&&t.substring(e+1,i);if(!n)return;const o=n.split(","),r=[];for(let t=0;t<o.length;t++){const e=o[t];let i=parseFloat(e);if(isNaN(i))return;e.indexOf("%")>=0?(i=Math.max(0,Math.min(100,i)),i/=100):3===t?i=Math.max(0,Math.min(1,i)):(i=Math.max(0,Math.min(255,i)),i/=255),r.push(i)}return r}static fromRgbaString(t){const e=cl.stringToRgba(t);if(e){if(3===e.length)return new cl(e[0],e[1],e[2]);if(4===e.length)return new cl(e[0],e[1],e[2],e[3])}throw new Error(`Malformed rgb/rgba color string: '${t}'`)}static fromArray(t){if(4===t.length)return new cl(t[0],t[1],t[2],t[3]);if(3===t.length)return new cl(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,e,i,n=1){const o=cl.HSBtoRGB(t,e,i);return new cl(o[0],o[1],o[2],n)}static fromHSL(t,e,i,n=1){const o=cl.HSLtoRGB(t,e,i);return new cl(o[0],o[1],o[2],n)}static padHex(t){return 1===t.length?"0"+t:t}toHexString(){let t="#"+cl.padHex(Math.round(255*this.r).toString(16))+cl.padHex(Math.round(255*this.g).toString(16))+cl.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(t+=cl.padHex(Math.round(255*this.a).toString(16))),t}toRgbaString(t=3){const e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*i)/i),`rgba(${e.join(", ")})`):`rgb(${e.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return cl.RGBtoHSB(this.r,this.g,this.b)}static RGBtoHSL(t,e,i){const n=Math.min(t,e,i),o=Math.max(t,e,i),r=(o+n)/2;let s,a;if(o===n)s=NaN,a=0;else{const l=o-n;a=r>.5?l/(2-o-n):l/(o+n),s=o===t?(e-i)/l+(e<i?6:0):o===e?(i-t)/l+2:(t-e)/l+4,s*=60}return[s,a,r]}static HSLtoRGB(t,e,i){if(0===e)return[i,i,i];const n=i<.5?i*(1+e):i+e-i*e,o=2*i-n;function r(t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?o+6*(n-o)*t:t<.5?n:t<2/3?o+(n-o)*(2/3-t)*6:o}return[r(t/360+1/3),r(t/360),r(t/360-1/3)]}static RGBtoHSB(t,e,i){const n=Math.min(t,e,i),o=Math.max(t,e,i);let r=NaN;if(n!==o){const s=o-n,a=(o-t)/s,l=(o-e)/s,c=(o-i)/s;r=t===o?c-l:e===o?2+a-c:4+l-a,r/=6,r<0&&(r+=1)}return[360*r,0!==o?(o-n)/o:0,o]}static HSBtoRGB(t,e,i){isNaN(t)&&(t=0),t=(t%360+360)%360/360;let n=0,o=0,r=0;if(0===e)n=o=r=i;else{const s=6*(t-Math.floor(t)),a=s-Math.floor(s),l=i*(1-e),c=i*(1-e*a),d=i*(1-e*(1-a));switch(s>>0){case 0:n=i,o=d,r=l;break;case 1:n=c,o=i,r=l;break;case 2:n=l,o=i,r=d;break;case 3:n=l,o=c,r=i;break;case 4:n=d,o=l,r=i;break;case 5:n=i,o=l,r=c}}return[n,o,r]}derive(t,e,i,n){const o=cl.RGBtoHSB(this.r,this.g,this.b);let r=o[2];0==r&&i>1&&(r=.05);const s=((o[0]+t)%360+360)%360,a=Math.max(Math.min(o[1]*e,1),0);r=Math.max(Math.min(r*i,1),0);const l=Math.max(Math.min(this.a*n,1),0),c=cl.HSBtoRGB(s,a,r);return c.push(l),cl.fromArray(c)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(t,e){const i=cl.tryParseFromString(t),n=cl.tryParseFromString(e);return t=>{const e=(e,i)=>e*(1-t)+i*t;return new cl(e(i.r,n.r),e(i.g,n.g),e(i.b,n.b),e(i.a,n.a)).toString()}}}function dl(t){return Va((e,i,n)=>{var o,r,s;if(t(n,{target:e}))return n;const a=i.toString().replace(/^_*/,"");let l=null!==(r=null===(o=e.constructor)||void 0===o?void 0:o.className)&&void 0!==r?r:null===(s=e.constructor)||void 0===s?void 0:s.name;(null==l?void 0:l.length)<3&&(l=null);const c=l?`of [${l}] `:"";return t.message?La.warn(`Property [${a}] ${c}cannot be set to [${ul(n)}]; ${t.message}, ignoring.`):La.warn(`Property [${a}] ${c}cannot be set to [${ul(n)}], ignoring.`),Ga})}function ul(t){return"number"==typeof t&&isNaN(t)?"NaN":t===1/0?"Infinity":t===-1/0?"-Infinity":JSON.stringify(t)}function hl(t,e){return t.message=e,t}cl.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});const pl=(t,e,i)=>void 0===t||i(t,e),fl=(t,e)=>hl((i,n)=>Array.isArray(i)&&(!t||i.length===t)&&(!e||i.every(t=>e(t,n))),"expecting an Array"),gl=t=>hl((e,i)=>pl(e,i,fl(t)),"expecting an optional Array");hl(t=>Array.isArray(t)&&t.length>0,"expecting a non-empty Array");const vl=(...t)=>hl((e,i)=>t.every(t=>t(e,i)),t.map(t=>t.message).filter(t=>null!=t).join(" AND ")),yl=t=>null!=t&&!isNaN(t),ml=t=>hl((e,i)=>!yl(e)||!yl(i.target[t])||e<i.target[t],"expected to be less than "+t),bl=t=>hl((e,i)=>!yl(e)||!yl(i.target[t])||e>i.target[t],"expected to be greater than "+t),Sl=hl(t=>"function"==typeof t,"expecting a Function"),xl=hl((t,e)=>pl(t,e,Sl),"expecting an optional Function"),Cl=hl(t=>!0===t||!1===t,"expecting a Boolean"),wl=hl((t,e)=>pl(t,e,Cl),"expecting an optional Boolean"),El=hl(t=>"string"==typeof t,"expecting a String"),Ol=hl((t,e)=>pl(t,e,El),"expecting an optional String"),Dl=hl(t=>t instanceof Date&&!isNaN(+t),"expecting a Date object"),Al=hl((t,e)=>pl(t,e,Dl),"expecting an optional Date");hl(fl(void 0,Dl),"expecting an Array of Date objects");const Tl=Fl(0),kl=((...t)=>hl((e,i)=>t.some(t=>t(e,i)),t.map(t=>t.message).filter(t=>null!=t).join(" OR ")))(Al,hl((t,e)=>pl(t,e,Tl),"expecting an optional number")),Ml="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",Rl=hl(t=>"string"==typeof t&&cl.validColorString(t),"expecting a color String. "+Ml),Pl=hl((t,e)=>pl(t,e,Rl),"expecting an optional color String. "+Ml),Nl=hl(fl(void 0,Rl),"expecting an Array of color strings. "+Ml),Ll=hl((t,e)=>pl(t,e,Nl),"expecting an optional Array of color strings. "+Ml);function Il(t="expecting a finite Number",e,i){let n=t;return void 0!==e&&void 0!==i?n+=` between ${e} and ${i} inclusive`:void 0!==e?n+=" greater than or equal to "+e:void 0!==i&&(n+=" less than or equal to "+i),n}function Fl(t,e){return hl(i=>"number"==typeof i&&Number.isFinite(i)&&(void 0===t||i>=t)&&(void 0===e||i<=e),Il(void 0,t,e))}function _l(t,e){return hl((i,n)=>pl(i,n,Fl(t,e)),Il("expecting an optional finite Number",t,e))}function Gl(t,e){return hl(i=>"number"==typeof i&&(isNaN(i)||Number.isFinite(i)&&(void 0===t||i>=t)&&(void 0===e||i<=e)),Il(void 0,t,e))}const Bl=hl(fl(void 0,Fl()),"expecting an Array of numbers"),Vl=hl((t,e)=>pl(t,e,Bl),"expecting an optional Array of numbers"),jl=hl(fl(void 0,El),"expecting an Array of strings");function Wl(...t){return hl(e=>"string"==typeof e&&t.indexOf(e)>=0,"expecting one of: "+t.join(", "))}hl((t,e)=>pl(t,e,jl),"expecting an optional Array of strings");const zl=hl(fl(void 0,Cl),"expecting an Array of boolean values");hl((t,e)=>pl(t,e,zl),"expecting an optional Array of boolean values");const Ul=["normal","bold","bolder","lighter"],Hl=hl(t=>"normal"===t||"italic"===t||"oblique"===t,"expecting a font style keyword such as 'normal', 'italic' or 'oblique'"),Kl=hl((t,e)=>pl(t,e,Hl),"expecting an optional font style keyword such as 'normal', 'italic' or 'oblique'"),Yl=hl(t=>Ul.includes(t)||"number"==typeof t&&isFinite(t),"expecting a font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),Xl=hl((t,e)=>pl(t,e,Yl),"expecting an optional font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),ql=hl(fl(void 0,Fl(0)),"expecting an Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),$l=hl((t,e)=>pl(t,e,ql),"expecting an optional Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),Zl=["butt","round","square"],Jl=hl(t=>Zl.includes(t),"expecting a line cap keyword such as 'butt', 'round' or 'square'");hl((t,e)=>pl(t,e,Jl),"expecting an optional line cap keyword such as 'butt', 'round' or 'square'");const Ql=["round","bevel","miter"],tc=hl(t=>Ql.includes(t),"expecting a line join keyword such as 'round', 'bevel' or 'miter'");hl((t,e)=>pl(t,e,tc),"expecting an optional line join keyword such as 'round', 'bevel' or 'miter'");const ec=["top","right","bottom","left"],ic=hl(t=>ec.includes(t),"expecting a position keyword such as 'top', 'right', 'bottom' or 'left"),nc=["exact","nearest"],oc=hl(t=>"number"==typeof t&&Number.isFinite(t)||nc.includes(t),"expecting an interaction range of 'exact', 'nearest' or a number"),rc=["never","always","hyphenate","on-space"],sc=hl(t=>rc.includes(t),"expecting a text wrap strategy keyword such as 'never', 'always', 'hyphenate', or 'on-space'"),ac=["ellipsis","hide"];hl(t=>ac.includes(t),"expecting an overflow strategy keyword such as 'ellipsis', or 'hide'");const lc=["left","center","right"];hl(t=>lc.includes(t),"expecting a text align keyword such as 'left', 'center', or 'right'");const cc=["top","middle","bottom"];hl(t=>cc.includes(t),"expecting a text align keyword such as 'top', 'middle', or 'bottom'");const dc=["horizontal","vertical"],uc=hl(t=>dc.includes(t),"expecting a direction keyword such as 'horizontal' or 'vertical'");var hc,pc;hl((t,e)=>pl(t,e,uc),"expecting an optional direction keyword such as 'horizontal' or 'vertical'"),function(t){t.X="x",t.Y="y"}(hc||(hc={})),function(t){t[t.NONE=0]="NONE",t[t.TRIVIAL=1]="TRIVIAL",t[t.MINOR=2]="MINOR",t[t.MAJOR=3]="MAJOR"}(pc||(pc={}));const fc=function(){try{return new Function("return true"),!0}catch(t){return!1}}();function gc(t){const{changeCb:e,convertor:i}=null!=t?t:{};return function(n,o){const r="__"+o;n[o]||(fc&&null==e&&null==i?function(t,e,i,n){const{redraw:o=pc.TRIVIAL,type:r="normal",checkDirtyOnAssignment:s=!1}=null!=n?n:{},a=new Function("value",`\n        const oldValue = this.${i};\n        if (value !== oldValue) {\n            this.${i} = value;\n            ${"normal"===r?`this.markDirty(this, ${o});`:""}\n            ${"transform"===r?`this.markDirtyTransform(${o});`:""}\n            ${"path"===r?`if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ${o}); }`:""}\n            ${"font"===r?`if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ${o}); }`:""}\n        }\n        ${s?`if (value != null && value._dirty > ${pc.NONE}) { this.markDirty(value, value._dirty); }`:""}\n`),l=new Function(`return this.${i};`);Object.defineProperty(t,e,{set:a,get:l,enumerable:!0,configurable:!0})}(n,o,r,t):function(t,e,i,n){const{redraw:o=pc.TRIVIAL,type:r="normal",changeCb:s,convertor:a,checkDirtyOnAssignment:l=!1}=null!=n?n:{};Object.defineProperty(t,e,{set:function(t){const e=this[i];(t=a?a(t):t)!==e&&(this[i]=t,"normal"===r&&this.markDirty(this,o),"transform"===r&&this.markDirtyTransform(o),"path"!==r||this._dirtyPath||(this._dirtyPath=!0,this.markDirty(this,o)),"font"!==r||this._dirtyFont||(this._dirtyFont=!0,this.markDirty(this,o)),s&&s(this)),l&&null!=t&&t._dirty>pc.NONE&&this.markDirty(t,t._dirty)},get:function(){return this[i]},enumerable:!0,configurable:!0})}(n,o,r,t))}}class vc{constructor(){this._dirty=pc.MAJOR}markDirty(t,e=pc.TRIVIAL){this._dirty>e||(this._dirty=e)}markClean(t){this._dirty=pc.NONE}isDirty(){return this._dirty>pc.NONE}}const yc={};function mc(t){var e;const i=t.constructor,n=Object.prototype.hasOwnProperty.call(i,"className")?i.className:i.name;if(!n)throw new Error(`The ${i} is missing the 'className' property.`);const o=(null!==(e=yc[n])&&void 0!==e?e:0)+1;return yc[n]=o,n+"-"+o}function bc(t,e,i=1/0){const n={nearest:void 0,distanceSquared:i};for(const i of e){const e=i.distanceSquared(t);if(0===e)return{nearest:i,distanceSquared:0};e<n.distanceSquared&&(n.nearest=i,n.distanceSquared=e)}return n}class Sc{constructor(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}clone(){const{x:t,y:e,width:i,height:n}=this;return new Sc(t,e,i,n)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}containsPoint(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}collidesBBox(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}isInfinite(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0}distanceSquared(t){if(this.containsPoint(t.x,t.y))return 0;const e=t.x-Math.max(this.x,Math.min(t.x,this.x+this.width)),i=t.y-Math.max(this.y,Math.min(t.y,this.y+this.height));return e*e+i*i}static nearestBox(t,e){return bc(t,e)}shrink(t,e){const i=(t,e)=>{switch(t){case"top":this.y+=e;case"bottom":this.height-=e;break;case"left":this.x+=e;case"right":this.width-=e;break;case"vertical":this.y+=e,this.height-=2*e;break;case"horizontal":this.x+=e,this.width-=2*e;break;case void 0:this.x+=e,this.width-=2*e,this.y+=e,this.height-=2*e}};return"number"==typeof t?i(e,t):Object.entries(t).forEach(([t,e])=>i(t,e)),this}grow(t,e){if("number"==typeof t)this.shrink(-t,e);else{const e=Object.assign({},t);for(const t in e)e[t]*=-1;this.shrink(e)}return this}static merge(t){let e=1/0,i=1/0,n=-1/0,o=-1/0;return t.forEach(t=>{t.x<e&&(e=t.x),t.y<i&&(i=t.y),t.x+t.width>n&&(n=t.x+t.width),t.y+t.height>o&&(o=t.y+t.height)}),new Sc(e,i,n-e,o-i)}}Sc.zero=new Sc(0,0,0,0);class xc{get e(){return[...this.elements]}constructor(t=[1,0,0,1,0,0]){this.elements=t}setElements(t){const e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this}get identity(){const t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}AxB(t,e,i){const n=t[0]*e[0]+t[2]*e[1],o=t[1]*e[0]+t[3]*e[1],r=t[0]*e[2]+t[2]*e[3],s=t[1]*e[2]+t[3]*e[3],a=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];(i=null!=i?i:t)[0]=n,i[1]=o,i[2]=r,i[3]=s,i[4]=a,i[5]=l}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(t){const e=new Array(6);return this.AxB(this.elements,t.elements,e),new xc(e)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){const t=this.elements;let e=t[0],i=t[1],n=t[2],o=t[3];const r=t[4],s=t[5],a=1/(e*o-i*n);return e*=a,i*=a,n*=a,o*=a,new xc([o,-i,-n,e,n*s-o*r,i*r-e*s])}inverseTo(t){const e=this.elements;let i=e[0],n=e[1],o=e[2],r=e[3];const s=e[4],a=e[5],l=1/(i*r-n*o);return i*=l,n*=l,o*=l,r*=l,t.setElements([r,-n,-o,i,o*a-r*s,n*s-i*a]),this}invertSelf(){const t=this.elements;let e=t[0],i=t[1],n=t[2],o=t[3];const r=t[4],s=t[5],a=1/(e*o-i*n);return e*=a,i*=a,n*=a,o*=a,t[0]=o,t[1]=-i,t[2]=-n,t[3]=e,t[4]=n*s-o*r,t[5]=i*r-e*s,this}transformPoint(t,e){const i=this.elements;return{x:t*i[0]+e*i[2]+i[4],y:t*i[1]+e*i[3]+i[5]}}transformBBox(t,e){const i=this.elements,n=i[0],o=i[1],r=i[2],s=i[3],a=.5*t.width,l=.5*t.height,c=t.x+a,d=t.y+l,u=Math.abs(a*n)+Math.abs(l*r),h=Math.abs(a*o)+Math.abs(l*s);return e||(e=new Sc(0,0,0,0)),e.x=c*n+d*r+i[4]-u,e.y=c*o+d*s+i[5]-h,e.width=u+u,e.height=h+h,e}toContext(t){if(this.identity)return;const e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}static flyweight(t){return xc.instance.setElements(t.elements)}static updateTransformMatrix(t,e,i,n,o,r,s){const[a,l]=[0,0],c=e,d=i;let u,h;1===c&&1===d?(u=0,h=0):(u=null==(null==s?void 0:s.scalingCenterX)?a:null==s?void 0:s.scalingCenterX,h=null==(null==s?void 0:s.scalingCenterY)?l:null==s?void 0:s.scalingCenterY);const p=n,f=Math.cos(p),g=Math.sin(p);let v,y;0===p?(v=0,y=0):(v=null==(null==s?void 0:s.rotationCenterX)?a:null==s?void 0:s.rotationCenterX,y=null==(null==s?void 0:s.rotationCenterY)?l:null==s?void 0:s.rotationCenterY);const m=o,b=r,S=u*(1-c)-v,x=h*(1-d)-y;return t.setElements([f*c,g*c,-g*d,f*d,f*S-g*x+v+m,g*S+f*x+y+b]),t}static fromContext(t){const e=t.getTransform();return new xc([e.a,e.b,e.c,e.d,e.e,e.f])}}var Cc;xc.instance=new xc,function(t){t[t.All=0]="All",t[t.None=1]="None"}(Cc||(Cc={}));const wc=t=>{t.parent&&(t.parent.dirtyZIndex=!0),t.zIndexChanged()};class Ec extends vc{get datum(){var t,e;return null!==(t=this._datum)&&void 0!==t?t:null===(e=this._parent)||void 0===e?void 0:e.datum}get previousDatum(){return this._previousDatum}set datum(t){this._datum!==t&&(this._previousDatum=this._datum),this._datum=t}_setLayerManager(t){this._layerManager=t,this._debug=null==t?void 0:t.debug;for(const e of this._children)e._setLayerManager(t);for(const e of this._virtualChildren)e._setLayerManager(t)}get layerManager(){return this._layerManager}get parent(){return this._parent}get children(){if(0===this._virtualChildren.length)return this._children;const t=[...this._children];for(const e of this._virtualChildren)t.push(...e.children);return t}get virtualChildren(){return this._virtualChildren}hasVirtualChildren(){return this._virtualChildren.length>0}setProperties(t,e){const i=null!=e?e:Object.keys(t);for(const e of i)this[e]=t[e];return this}append(t){Array.isArray(t)||(t=[t]);for(const e of t){if(e.parent)throw new Error(`${e} already belongs to another parent: ${e.parent}.`);if(e.layerManager)throw new Error(`${e} already belongs to a scene: ${e.layerManager}.`);if(this.childSet[e.id])throw new Error(`Duplicate ${e.constructor.name} node: ${e}`);e.isVirtual?this._virtualChildren.push(e):this._children.push(e),this.childSet[e.id]=!0,e._parent=this,e._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,pc.MAJOR)}appendChild(t){return this.append(t),t}removeChild(t){const e=()=>{throw new Error("The node to be removed is not a child of this node.")};if(t.parent!==this&&e(),t.isVirtual){const i=this._virtualChildren.indexOf(t);i<0&&e(),this._virtualChildren.splice(i,1)}else{const i=this._children.indexOf(t);i<0&&e(),this._children.splice(i,1)}return delete this.childSet[t.id],t._parent=void 0,t._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(t,pc.MAJOR),t}calculateCumulativeMatrix(){this.computeTransformMatrix();const t=xc.flyweight(this.matrix);let e=this.parent;for(;e;)e.computeTransformMatrix(),t.preMultiplySelf(e.matrix),e=e.parent;return t}transformPoint(t,e){return this.calculateCumulativeMatrix().invertSelf().transformPoint(t,e)}inverseTransformPoint(t,e){return this.calculateCumulativeMatrix().transformPoint(t,e)}transformBBox(t){return this.calculateCumulativeMatrix().invertSelf().transformBBox(t)}inverseTransformBBox(t){return this.calculateCumulativeMatrix().transformBBox(t)}markDirtyTransform(){this.dirtyTransform=!0,this.markDirty(this,pc.MAJOR)}constructor({isVirtual:t,tag:e}={}){super(),this.serialNumber=Ec._nextSerialNumber++,this.id=mc(this),this.isContainerNode=!1,this._virtualChildren=[],this._children=[],this.childSet={},this.matrix=new xc,this.inverseMatrix=new xc,this.dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=Cc.All,this.isVirtual=null!=t&&t,this.tag=null!=e?e:NaN}containsPoint(t,e){return!1}pickNode(t,e){var i;if(!this.visible||this.pointerEvents===Cc.None||!this.containsPoint(t,e))return;const n=this.children;if(n.length>1e3)for(let o=n.length-1;o>=0;o--){const r=n[o],s=(null===(i=r.computeTransformedBBox())||void 0===i?void 0:i.containsPoint(t,e))?r.pickNode(t,e):void 0;if(s)return s}else if(n.length)for(let i=n.length-1;i>=0;i--){const o=n[i].pickNode(t,e);if(o)return o}else if(!this.isContainerNode)return this}findNodes(t){const e=t(this)?[this]:[];for(const i of this.children){const n=i.findNodes(t);n&&e.push(...n)}return e}computeBBox(){}computeTransformedBBox(){const t=this.computeBBox();if(!t)return;this.computeTransformMatrix();const e=xc.flyweight(this.matrix);let i=this.parent;for(;i;)i.computeTransformMatrix(),e.preMultiplySelf(i.matrix),i=i.parent;return e.transformBBox(t,t),t}computeTransformMatrix(){if(!this.dirtyTransform)return;const{matrix:t,scalingX:e,scalingY:i,rotation:n,translationX:o,translationY:r,scalingCenterX:s,scalingCenterY:a,rotationCenterX:l,rotationCenterY:c}=this;xc.updateTransformMatrix(t,e,i,n,o,r,{scalingCenterX:s,scalingCenterY:a,rotationCenterX:l,rotationCenterY:c}),t.inverseTo(this.inverseMatrix),this.dirtyTransform=!1}render(t){const{stats:e}=t;this._dirty=pc.NONE,e&&e.nodesRendered++}clearBBox(t){const e=this.computeBBox();if(null==e)return;const{x:i,y:n,width:o,height:r}=e,s=this.transformPoint(i,n),a=this.transformPoint(i+o,n+r);t.clearRect(s.x,s.y,a.x-s.x,a.y-s.y)}markDirty(t,e=pc.TRIVIAL,i=e){this._dirty>e||this._dirty===e&&e===i||(this._dirty=e,this.parent?this.parent.markDirty(this,i):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(t){const{force:e=!1,recursive:i=!0}=null!=t?t:{};if(this._dirty!==pc.NONE||e){if(this._dirty=pc.NONE,!1!==i)for(const t of this._virtualChildren)t.markClean({force:e});if(!0===i)for(const t of this._children)t.markClean({force:e})}}visibilityChanged(){}get nodeCount(){let t=1,e=this._dirty>=pc.NONE||this.dirtyTransform?1:0,i=this.visible?1:0;const n=n=>{const{count:o,visibleCount:r,dirtyCount:s}=n.nodeCount;t+=o,i+=r,e+=s};for(const t of this._children)n(t);for(const t of this._virtualChildren)n(t);return{count:t,visibleCount:i,dirtyCount:e}}zIndexChanged(){}}Ec._nextSerialNumber=0,ba([gc({type:"transform"}),Sa("design:type",Number)],Ec.prototype,"scalingX",void 0),ba([gc({type:"transform"}),Sa("design:type",Number)],Ec.prototype,"scalingY",void 0),ba([gc({type:"transform"}),Sa("design:type",Object)],Ec.prototype,"scalingCenterX",void 0),ba([gc({type:"transform"}),Sa("design:type",Object)],Ec.prototype,"scalingCenterY",void 0),ba([gc({type:"transform"}),Sa("design:type",Object)],Ec.prototype,"rotationCenterX",void 0),ba([gc({type:"transform"}),Sa("design:type",Object)],Ec.prototype,"rotationCenterY",void 0),ba([gc({type:"transform"}),Sa("design:type",Number)],Ec.prototype,"rotation",void 0),ba([gc({type:"transform"}),Sa("design:type",Number)],Ec.prototype,"translationX",void 0),ba([gc({type:"transform"}),Sa("design:type",Number)],Ec.prototype,"translationY",void 0),ba([gc({redraw:pc.MAJOR,changeCb:t=>t.visibilityChanged()}),Sa("design:type",Boolean)],Ec.prototype,"visible",void 0),ba([gc({redraw:pc.TRIVIAL,changeCb:wc}),Sa("design:type",Number)],Ec.prototype,"zIndex",void 0),ba([gc({redraw:pc.TRIVIAL,changeCb:wc}),Sa("design:type",Array)],Ec.prototype,"zIndexSubOrder",void 0);class Oc extends vc{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}}ba([dl(Cl),gc({redraw:pc.MAJOR}),Sa("design:type",Object)],Oc.prototype,"enabled",void 0),ba([dl(Rl),gc({redraw:pc.MAJOR}),Sa("design:type",Object)],Oc.prototype,"color",void 0),ba([dl(Fl()),gc({redraw:pc.MAJOR}),Sa("design:type",Object)],Oc.prototype,"xOffset",void 0),ba([dl(Fl()),gc({redraw:pc.MAJOR}),Sa("design:type",Object)],Oc.prototype,"yOffset",void 0),ba([dl(Fl(0)),gc({redraw:pc.MAJOR}),Sa("design:type",Object)],Oc.prototype,"blur",void 0);const Dc=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];function Ac(){if("undefined"==typeof navigator)return!0;const t=navigator.userAgent;return!Dc.some(e=>e.test(t))}class Tc{constructor(t){this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0;const{document:e,window:i,width:n=600,height:o=300,domLayer:r=!1,zIndex:s=0,name:a,overrideDevicePixelRatio:l}=t;this.document=e,this.window=i,Tc.document=e,this.element=e.createElement("canvas"),this.element.width=n,this.element.height=o,this.realContext=this.element.getContext("2d"),this.imageSource=this.realContext.canvas;const{style:c}=this.element;c.userSelect="none",c.display="block",r&&(c.position="absolute",c.zIndex=String(s),c.top="0",c.left="0",c.pointerEvents="none",c.opacity="1",a&&(this.element.id=a)),this.context=this.setPixelRatio(l),this.resize(n,o)}set container(t){this._container!==t&&(this.remove(),t&&t.appendChild(this.element),this._container=t)}get container(){return this._container}set enabled(t){this.element.style.display=t?"block":"none",this._enabled=!!t}get enabled(){return this._enabled}remove(){const{parentNode:t}=this.element;null!=t&&t.removeChild(this.element)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}snapshot(){}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}toImage(){const t=this.document.createElement("img");return t.src=this.getDataURL(),t}getDataURL(t){return this.element.toDataURL(t)}download(t,e="image/png"){t=(null!=t?t:"").trim()||"image";const i=this.getDataURL(e),n=this.document,o=n.createElement("a");o.href=i,o.download=t,o.style.display="none",n.body.appendChild(o),o.click(),n.body.removeChild(o)}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=null!=t?t:this.window.devicePixelRatio;return Ac()||(e=1),this._pixelRatio=e,Tc.overrideScale(this.realContext,e)}set pixelated(t){this.element.style.imageRendering=t?"pixelated":"auto"}get pixelated(){return"pixelated"===this.element.style.imageRendering}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{element:i,context:n,pixelRatio:o}=this;i.width=Math.round(t*o),i.height=Math.round(e*o),i.style.width=t+"px",i.style.height=e+"px",n.resetTransform(),this._width=t,this._height=e}static get textMeasuringContext(){if(this._textMeasuringContext)return this._textMeasuringContext;const t=this.document.createElement("canvas");return this._textMeasuringContext=t.getContext("2d"),this._textMeasuringContext}static get svgText(){if(this._svgText)return this._svgText;const t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.setAttribute("width","100"),e.setAttribute("height","100"),e.classList?e.classList.add("text-measuring-svg"):e.setAttribute("class","text-measuring-svg"),e.style.position="absolute",e.style.top="-1000px",e.style.visibility="hidden";const i=document.createElementNS(t,"text");return i.setAttribute("x","0"),i.setAttribute("y","30"),i.setAttribute("text","black"),e.appendChild(i),document.body.appendChild(e),this._svgText=i,i}static get has(){if(this._has)return this._has;const t="undefined"==typeof navigator||navigator.userAgent.indexOf("Chrome")>-1,e="undefined"!=typeof navigator&&navigator.userAgent.indexOf("Firefox")>-1,i=!t&&"undefined"!=typeof navigator&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!e&&!i,getTransform:void 0!==this.textMeasuringContext.getTransform}),this._has}static measureText(t,e,i,n){const o=this.textMeasuringContext;return o.font=e,o.textBaseline=i,o.textAlign=n,o.measureText(t)}static getTextSize(t,e){if(this.has.textMetrics){const i=this.textMeasuringContext;i.font=e;const n=i.measureText(t);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}return this.measureSvgText(t,e)}static measureSvgText(t,e){const i=this.textSizeCache,n=i[e];if(n){const e=n[t];if(e)return e}else i[e]={};const o=this.svgText;o.style.font=e,o.textContent=t;const r=o.getBBox(),s={width:r.width,height:r.height};return i[e][t]=s,s}static overrideScale(t,e){let i=0;const n={save(){this.$save(),i++},restore(){if(!(i>0))throw new Error("AG Charts - Unable to restore() past depth 0");this.$restore(),i--},setTransform(t,i,n,o,r,s){"object"==typeof t?this.$setTransform(t):this.$setTransform(t*e,i*e,n*e,o*e,r*e,s*e)},resetTransform(){this.$setTransform(e,0,0,e,0,0)},verifyDepthZero(){if(0!==i)throw new Error("AG Charts - Save/restore depth is non-zero: "+i)}};for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t["$"+e]||(t["$"+e]=t[e]),t[e]=n[e]);return t}}Tc.document=globalThis.document,Tc.textSizeCache={};class kc extends class{constructor(){this.stops=[]}}{constructor(){super(...arguments),this.angle=0}createGradient(t,e){const{stops:i,angle:n}=this,o=Ja(tl(n+90)),r=Math.cos(o),s=Math.sin(o),a=e.width,l=e.height,c=e.x+.5*a,d=e.y+.5*l;if(a>0&&l>0){const e=Math.sqrt(l*l+a*a)/2,n=Math.atan2(l,a);let u;u=o<Math.PI/2?o:o<Math.PI?Math.PI-o:o<3*Math.PI/2?o-Math.PI:2*Math.PI-o;const h=e*Math.abs(Math.cos(u-n)),p=t.createLinearGradient(c+r*h,d+s*h,c-r*h,d-s*h);return i.forEach(t=>{p.addColorStop(t.offset,t.color)}),p}return"black"}}const Mc=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i;class Rc extends Ec{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=Rc.defaultStyles.fill,this.stroke=Rc.defaultStyles.stroke,this.strokeWidth=Rc.defaultStyles.strokeWidth,this.lineDash=Rc.defaultStyles.lineDash,this.lineDashOffset=Rc.defaultStyles.lineDashOffset,this.lineCap=Rc.defaultStyles.lineCap,this.lineJoin=Rc.defaultStyles.lineJoin,this.opacity=Rc.defaultStyles.opacity,this.fillShadow=Rc.defaultStyles.fillShadow}restoreOwnStyles(){const t=this.constructor.defaultStyles,e=Object.getOwnPropertyNames(t);for(let i=0,n=e.length;i<n;i++){const n=e[i];this[n]=t[n]}}updateGradient(){const{fill:t}=this;let e;if((null==t?void 0:t.startsWith("linear-gradient"))&&(e=Mc.exec(t))){const t=parseFloat(e[1]),i=[],n=e[2],o=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let r;for(;r=o.exec(n);)i.push(r[0]);this.gradient=new kc,this.gradient.angle=t,this.gradient.stops=i.map((t,e)=>({offset:e/(i.length-1),color:t}))}else this.gradient=void 0}align(t,e){var i,n,o;const r=null!==(o=null===(n=null===(i=this.layerManager)||void 0===i?void 0:i.canvas)||void 0===n?void 0:n.pixelRatio)&&void 0!==o?o:1,s=Math.round(t*r)/r;return null==e?s:0===e?0:e<1?Math.ceil(e*r)/r:Math.round((e+t)*r)/r-s}fillStroke(t){this.renderFill(t),this.renderStroke(t)}renderFill(t){if(this.fill){const{globalAlpha:e}=t;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),t.fill(),t.globalAlpha=e}t.shadowColor="rgba(0, 0, 0, 0)"}applyFill(t){this.gradient?t.fillStyle=this.gradient.createGradient(t,this.computeBBox()):t.fillStyle=this.fill}applyFillAlpha(t){const{globalAlpha:e}=t;t.globalAlpha=e*this.opacity*this.fillOpacity}applyShadow(t){var e,i;const n=null!==(i=null===(e=this.layerManager)||void 0===e?void 0:e.canvas.pixelRatio)&&void 0!==i?i:1,o=this.fillShadow;(null==o?void 0:o.enabled)&&(t.shadowColor=o.color,t.shadowOffsetX=o.xOffset*n,t.shadowOffsetY=o.yOffset*n,t.shadowBlur=o.blur*n)}renderStroke(t){if(this.stroke&&this.strokeWidth){const{globalAlpha:e}=t;t.strokeStyle=this.stroke,t.globalAlpha=e*this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),t.stroke(),t.globalAlpha=e}}containsPoint(t,e){return this.isPointInPath(t,e)}}Rc.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0}),ba([gc({redraw:pc.MINOR}),Sa("design:type",Number)],Rc.prototype,"fillOpacity",void 0),ba([gc({redraw:pc.MINOR}),Sa("design:type",Number)],Rc.prototype,"strokeOpacity",void 0),ba([gc({redraw:pc.MINOR,changeCb:t=>t.updateGradient()}),Sa("design:type",Object)],Rc.prototype,"fill",void 0),ba([gc({redraw:pc.MINOR}),Sa("design:type",Object)],Rc.prototype,"stroke",void 0),ba([gc({redraw:pc.MINOR}),Sa("design:type",Number)],Rc.prototype,"strokeWidth",void 0),ba([gc({redraw:pc.MINOR}),Sa("design:type",Object)],Rc.prototype,"lineDash",void 0),ba([gc({redraw:pc.MINOR}),Sa("design:type",Number)],Rc.prototype,"lineDashOffset",void 0),ba([gc({redraw:pc.MINOR}),Sa("design:type",String)],Rc.prototype,"lineCap",void 0),ba([gc({redraw:pc.MINOR}),Sa("design:type",String)],Rc.prototype,"lineJoin",void 0),ba([gc({redraw:pc.MINOR,convertor:t=>Math.min(1,Math.max(0,t))}),Sa("design:type",Number)],Rc.prototype,"opacity",void 0),ba([gc({redraw:pc.MINOR,checkDirtyOnAssignment:!0}),Sa("design:type",Object)],Rc.prototype,"fillShadow",void 0);function Pc(t){const{redraw:e=pc.MAJOR,changeCb:i}=null!=t?t:{};return gc({redraw:e,type:"font",changeCb:i})}class Nc extends Rc{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=Nc.defaultStyles.textAlign,this.textBaseline=Nc.defaultStyles.textBaseline,this.lineHeight=void 0}_setLines(){this.lines=Bc(this.text)}get font(){return(null==this._font||this._dirtyFont)&&(this._dirtyFont=!1,this._font=Lc(this)),this._font}computeBBox(){return Tc.has.textMetrics?Fc(this.lines,this.x,this.y,this):_c(this.lines,this.x,this.y,this)}getLineHeight(t){var e,i;if(this.lineHeight)return this.lineHeight;if(Tc.has.textMetrics){const n=Tc.measureText(t,this.font,this.textBaseline,this.textAlign);return(null!==(e=n.fontBoundingBoxAscent)&&void 0!==e?e:n.emHeightAscent)+(null!==(i=n.fontBoundingBoxDescent)&&void 0!==i?i:n.emHeightDescent)}return Tc.getTextSize(t,this.font).height}isPointInPath(t,e){const i=this.transformPoint(t,e),n=this.computeBBox();return!!n&&n.containsPoint(i.x,i.y)}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===pc.NONE&&!i)return void(n&&(n.nodesSkipped+=this.nodeCount.count));if(!this.lines.length||!this.layerManager)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(e);const{fill:o,stroke:r,strokeWidth:s}=this;e.font=this.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline;const a=this.layerManager.canvas.pixelRatio||1,{globalAlpha:l}=e;if(o){e.fillStyle=o,e.globalAlpha=l*this.opacity*this.fillOpacity;const{fillShadow:t}=this;(null==t?void 0:t.enabled)&&(e.shadowColor=t.color,e.shadowOffsetX=t.xOffset*a,e.shadowOffsetY=t.yOffset*a,e.shadowBlur=t.blur*a),this.renderLines((t,i,n)=>e.fillText(t,i,n))}if(r&&s){e.strokeStyle=r,e.lineWidth=s,e.globalAlpha=l*this.opacity*this.strokeOpacity;const{lineDash:t,lineDashOffset:i,lineCap:n,lineJoin:o}=this;t&&e.setLineDash(t),i&&(e.lineDashOffset=i),n&&(e.lineCap=n),o&&(e.lineJoin=o),this.renderLines((t,i,n)=>e.strokeText(t,i,n))}super.render(t)}renderLines(t){const{lines:e,x:i,y:n}=this,o=this.lines.map(t=>this.getLineHeight(t));let r=-(o.reduce((t,e)=>t+e,0)-o[0])*Gc(this.textBaseline);for(let s=0;s<e.length;s++)t(e[s],i,n+r),r+=o[s]}static wrap(t,e,i,n,o,r="ellipsis"){var s;const a="hide"!==r,l=function(t){const e=new Map,i=e=>Tc.getTextSize(e,t);return{size:i,width:t=>{if(e.has(t))return e.get(t);const{width:n}=i(t);return e.set(t,n),n}}}(Lc(n)),c=t.split(/\r?\n/g);if(0===c.length)return"";if("never"===o)return null!==(s=Nc.truncateLine(c[0],e,l,a?"auto":"never"))&&void 0!==s?s:"";const d=[];let u=0;for(const t of c){const r=Nc.wrapLine(t,e,i,l,n,o,u,a);if(null==r)return"";if(d.push(r.result),u=r.cumulativeHeight,r.truncated)break}return d.join("\n").trim()}static wrapLine(t,e,i,n,o,r,s,a){if(!(t=t.trim()))return{result:"",truncated:!1,cumulativeHeight:s};const l=n.size(t);if(l.width<=e)return{result:t,truncated:!1,cumulativeHeight:s+l.height};if(l.height>i||n.width("W")>e)return a?{result:"",truncated:!0,cumulativeHeight:s}:void 0;const c=t.split(/\s+/g),d=Nc.wrapLineSequentially(c,e,i,n,o,r,s,a);if(null==d)return;s=d.cumulativeHeight;let{lines:u}=d;if(!d.wordsBrokenOrTruncated&&!d.linesTruncated){const t=d.lines.length,i=Nc.wrapLineBalanced(c,e,n,t);i.length===u.length&&(u=i)}return{result:u.map(t=>t.join(" ")).join("\n"),truncated:d.linesTruncated,cumulativeHeight:s}}static breakWord(t,e,i,n,o){const r=e=>Nc.punctuationMarks.includes(t[e]),s=n?o.width("-"):0,a=[];let l=0,c=0;for(let n=0;n<t.length;n++){const r=t[n],d=o.width(r);l+d+s>(0===c?e:i)&&(a.push(n),l=0,c++),l+=d}const d=[];let u=0;for(const e of a){let i=t.substring(u,e);n&&i.length>0&&!r(e-1)&&!r(e)&&(i+="-"),d.push(i),u=e}return d.push(t.substring(u)),d}static truncateLine(t,e,i,n){t=t.trimEnd();const o=i.width(t);if(o>e&&"never"===n)return;if(o<=e&&"force"!==n)return t;const r=i.width("\u2026");let s=t,a=o;for(;s.length>0&&a+r>e;)s=s.slice(0,-1).trimEnd(),a=i.width(s);return a+r<=e?s+"\u2026":void 0}static wrapLineSequentially(t,e,i,n,o,r,s,a){const{fontSize:l=0,lineHeight:c=l*Nc.defaultLineHeightRatio}=o,d="always"===r||"hyphenate"===r,u="hyphenate"===r,h=n.width(" ");let p=!1,f=!1;const g=[];let v=[],y=0;const m=()=>({lines:g,linesTruncated:f,wordsBrokenOrTruncated:p,cumulativeHeight:s}),b=()=>{if(!a)return;const t=v.join(" "),i=Nc.truncateLine(t,e,n,"force");return null!=i?(v.splice(0,v.length,i),f=!0,m()):void 0},S=()=>{const t=s+c;return!(t>=i)&&(v=[],y=0,s=t,g.push(v),!0)};if(!S())return b();for(let i=0;i<t.length;i++){const o=t[i],r=n.width(o),s=0===v.length?0:h,l=y+s+r;if(l<=e)v.push(o),y=l;else if(r<=e){if(!S())return b();v.push(o),y=r}else{if(p=!0,!d){if(a){if(!S())return b();const r=Nc.truncateLine(o,e,n,"force");if(null==r)return;v.push(r),i<t.length-1&&(f=!0);break}return}{const t=e-y-s,i=Nc.breakWord(o,t,e,u,n);for(let t=0;t<i.length;t++){const e=i[t];if(e&&v.push(e),t===i.length-1)y=n.width(e);else if(!S())return b()}}}}return m()}static wrapLineBalanced(t,e,i,n){const o=t.reduce((t,e)=>t+i.width(e),0),r=i.width(" "),s=(o+r*(t.length-n-2))/n,a=[];let l=[],c=i.width(t[0]),d=!0;for(const n of t){const t=i.width(n);if(d){l=[],l.push(n),c=t,d=!1,a.push(l);continue}const o=c+r+t;o<=s?(l.push(n),c=o):o<=e?(l.push(n),d=!0):(l=[n],c=t,a.push(l))}return a}setFont(t){this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontStyle=t.fontStyle,this.fontWeight=t.fontWeight}setAlign(t){this.textAlign=t.textAlign,this.textBaseline=t.textBaseline}}function Lc(t){const{fontFamily:e,fontSize:i,fontStyle:n,fontWeight:o}=t;return[null!=n?n:"",null!=o?o:"",i+"px",e].join(" ").trim()}function Ic(t,e,i,n){return Tc.has.textMetrics?Fc(t,e,i,n):_c(t,e,i,n)}function Fc(t,e,i,n){var o,r;let s=0,a=0,l=0,c=0,d=0;const u=Lc(n),{lineHeight:h,textBaseline:p=Nc.defaultStyles.textBaseline,textAlign:f=Nc.defaultStyles.textAlign}=n;for(let e=0;e<t.length;e++){const i=Tc.measureText(t[e],u,p,f);s=Math.max(s,i.actualBoundingBoxLeft),l=Math.max(l,i.width),0==e?(a+=i.actualBoundingBoxAscent,c+=i.actualBoundingBoxAscent):d+=null!==(o=i.fontBoundingBoxAscent)&&void 0!==o?o:i.emHeightAscent,e==t.length-1?c+=i.actualBoundingBoxDescent:d+=null!==(r=i.fontBoundingBoxDescent)&&void 0!==r?r:i.emHeightDescent}return void 0!==h&&(d=(t.length-1)*h),c+=d,a+=d*Gc(p),new Sc(e-s,i-a,l,c)}function _c(t,e,i,n){let o=0,r=0,s=0;const a=Lc(n),{lineHeight:l,textBaseline:c=Nc.defaultStyles.textBaseline,textAlign:d=Nc.defaultStyles.textAlign}=n;if(t.length>0){const e=Tc.getTextSize(t[0],a);o=e.width,r=e.height}for(let e=1;e<t.length;e++){const i=Tc.getTextSize(t[e],a);o=Math.max(o,i.width),s+=null!=l?l:i.height}switch(d){case"end":case"right":e-=o;break;case"center":e-=o/2}switch(c){case"alphabetic":i-=.7*r+.5*s;break;case"middle":i-=.45*r+.5*s;break;case"ideographic":i-=r+s;break;case"hanging":i-=.2*r+.5*s;break;case"bottom":i-=r+s}return new Sc(e,i,o,r+s)}function Gc(t){switch(t){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return.5}}function Bc(t){return"string"==typeof t?t.split(/\r?\n/g):[]}function Vc(t,e){return Va((i,n,o)=>(i[t][null!=e?e:n]=o,o))}function jc(t){const{newValue:e,oldValue:i,changeValue:n}=t;return Va((t,o,r,s)=>(r!==s&&(void 0!==s&&(null==i||i.call(t,s)),void 0!==r&&(null==e||e.call(t,r)),null==n||n.call(t,r,s)),r))}Nc.className="Text",Nc.defaultLineHeightRatio=1.15,Nc.defaultStyles=Object.assign({},Rc.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),Nc.ellipsis="\u2026",Nc.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],ba([gc({redraw:pc.MAJOR}),Sa("design:type",Number)],Nc.prototype,"x",void 0),ba([gc({redraw:pc.MAJOR}),Sa("design:type",Number)],Nc.prototype,"y",void 0),ba([gc({redraw:pc.MAJOR,changeCb:t=>t._setLines()}),Sa("design:type",String)],Nc.prototype,"text",void 0),ba([Pc(),Sa("design:type",String)],Nc.prototype,"fontStyle",void 0),ba([Pc(),Sa("design:type",String)],Nc.prototype,"fontWeight",void 0),ba([Pc(),Sa("design:type",Number)],Nc.prototype,"fontSize",void 0),ba([Pc(),Sa("design:type",String)],Nc.prototype,"fontFamily",void 0),ba([gc({redraw:pc.MAJOR}),Sa("design:type",String)],Nc.prototype,"textAlign",void 0),ba([gc({redraw:pc.MAJOR}),Sa("design:type",String)],Nc.prototype,"textBaseline",void 0),ba([gc({redraw:pc.MAJOR}),Sa("design:type",Number)],Nc.prototype,"lineHeight",void 0);class Wc{constructor(){this.node=new Nc,this.enabled=!1,this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.maxWidth=void 0,this.maxHeight=void 0,this.wrapping="always";const t=this.node;t.textAlign="center",t.pointerEvents=Cc.None}computeTextWrap(t,e){var i,n;const{text:o,wrapping:r}=this,s=Math.min(null!==(i=this.maxWidth)&&void 0!==i?i:1/0,t),a=null!==(n=this.maxHeight)&&void 0!==n?n:e;if(!isFinite(s)&&!isFinite(a))return void(this.node.text=o);const l=Nc.wrap(null!=o?o:"",s,a,this,r);this.node.text=l}}Wc.SMALL_PADDING=10,Wc.LARGE_PADDING=20,ba([dl(Cl),Sa("design:type",Object)],Wc.prototype,"enabled",void 0),ba([dl(Ol),Vc("node"),Sa("design:type",String)],Wc.prototype,"text",void 0),ba([dl(Kl),Vc("node"),Sa("design:type",Object)],Wc.prototype,"fontStyle",void 0),ba([dl(Xl),Vc("node"),Sa("design:type",Object)],Wc.prototype,"fontWeight",void 0),ba([dl(Fl(0)),Vc("node"),Sa("design:type",Number)],Wc.prototype,"fontSize",void 0),ba([dl(El),Vc("node"),Sa("design:type",String)],Wc.prototype,"fontFamily",void 0),ba([dl(Pl),Vc("node","fill"),Sa("design:type",Object)],Wc.prototype,"color",void 0),ba([dl(_l(0)),Sa("design:type",Number)],Wc.prototype,"spacing",void 0),ba([dl(_l(0)),Sa("design:type",Number)],Wc.prototype,"lineHeight",void 0),ba([dl(_l(0)),Sa("design:type",Number)],Wc.prototype,"maxWidth",void 0),ba([dl(_l(0)),Sa("design:type",Number)],Wc.prototype,"maxHeight",void 0),ba([dl(sc),Sa("design:type",String)],Wc.prototype,"wrapping",void 0);class zc{constructor(){this.enabled=!1,this.text=void 0,this.spacing=Wc.SMALL_PADDING,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.formatter=void 0}}function Uc(t,e){const i={};if(Array.isArray(e))for(let n=0;n<t.length;n++)i[""+t[n]]=e[n];else for(let n=0;n<t.length;n++)i[""+t[n]]=e;return i}function Hc(t,e){return i=>Number(t)*(1-i)+Number(e)*i}ba([dl(Cl),Sa("design:type",Object)],zc.prototype,"enabled",void 0),ba([dl(Ol),Sa("design:type",String)],zc.prototype,"text",void 0),ba([dl(_l(0)),Sa("design:type",Number)],zc.prototype,"spacing",void 0),ba([dl(Kl),Sa("design:type",String)],zc.prototype,"fontStyle",void 0),ba([dl(Xl),Sa("design:type",String)],zc.prototype,"fontWeight",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],zc.prototype,"fontSize",void 0),ba([dl(El),Sa("design:type",String)],zc.prototype,"fontFamily",void 0),ba([dl(Pl),Sa("design:type",String)],zc.prototype,"color",void 0),ba([dl(sc),Sa("design:type",String)],zc.prototype,"wrapping",void 0),ba([dl(xl),Sa("design:type",Function)],zc.prototype,"formatter",void 0);const Kc=t=>t,Yc=t=>Math.sin(t*Math.PI/2),Xc=t=>-(Math.cos(t*Math.PI)-1)/2;var qc=Object.freeze({__proto__:null,linear:Kc,easeIn:t=>1-Math.cos(t*Math.PI/2),easeOut:Yc,easeInOut:Xc,easeInQuad:t=>t*t,easeOutQuad:t=>1-Math.pow(1-t,2),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2});const $c={animationDuration:.2,animationDelay:1};var Zc;function Jc(t){return t.every(t=>t instanceof Ec)}!function(t){t.Loop="loop",t.Reverse="reverse"}(Zc||(Zc={}));class Qc{constructor(t){var e,i,n,o,r,s,a,l,c,d;this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=t.id,this.groupId=t.groupId,this.autoplay=null===(e=t.autoplay)||void 0===e||e,this.delay=null!==(i=t.delay)&&void 0!==i?i:0,this.duration=null!==(n=t.duration)&&void 0!==n?n:1e3,this.ease=null!==(o=t.ease)&&void 0!==o?o:Kc,this.repeat=null!==(r=t.repeat)&&void 0!==r?r:0,this.repeatType=null!==(s=t.repeatType)&&void 0!==s?s:Zc.Loop,this.onComplete=t.onComplete,this.onPlay=t.onPlay,this.onStop=t.onStop,this.onRepeat=t.onRepeat,this.onUpdate=t.onUpdate,this.interpolate=this.createInterpolator(t.from,t.to),!0===t.skip?(null===(a=this.onUpdate)||void 0===a||a.call(this,t.to,!1,this),null===(l=this.onStop)||void 0===l||l.call(this,this),null===(c=this.onComplete)||void 0===c||c.call(this,this)):this.autoplay&&(this.play(),null===(d=this.onUpdate)||void 0===d||d.call(this,t.from,!0,this))}play(){var t;return this.isPlaying||(this.isPlaying=!0,null===(t=this.onPlay)||void 0===t||t.call(this,this)),this}pause(){return this.isPlaying&&(this.isPlaying=!1),this}stop(){var t;return this.isPlaying&&(this.isPlaying=!1,null===(t=this.onStop)||void 0===t||t.call(this,this)),this}reset(t){const e=this.interpolate(this.isReverse?1-this.delta:this.delta);return this.interpolate=this.createInterpolator(e,t.to),this.elapsed=0,this.iteration=0,"number"==typeof t.delay&&(this.delay=t.delay),"number"==typeof t.duration&&(this.duration=t.duration),"function"==typeof t.ease&&(this.ease=t.ease),this}update(t){var e,i,n;if(this.elapsed+=t,this.elapsed<=this.delay)return this;const o=this.interpolate(this.isReverse?1-this.delta:this.delta);return null===(e=this.onUpdate)||void 0===e||e.call(this,o,!1,this),this.elapsed-this.delay>=this.duration&&(this.iteration<this.repeat?(this.iteration++,this.elapsed=(this.elapsed-this.delay)%this.duration+this.delay,this.repeatType===Zc.Reverse&&(this.isReverse=!this.isReverse),null===(i=this.onRepeat)||void 0===i||i.call(this,this)):(this.stop(),null===(n=this.onComplete)||void 0===n||n.call(this,this))),this}get delta(){return this.ease(nl(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(t,e){if("object"!=typeof e)return this.interpolateValue(t,e);const i=Object.keys(e).map(i=>[i,this.interpolateValue(t[i],e[i])]);return t=>{const e={};for(const[n,o]of i)e[n]=o(t);return e}}interpolateValue(t,e){try{switch(typeof t){case"number":return Hc(t,e);case"string":return function(t,e){if("string"==typeof t)try{t=cl.fromString(t)}catch(e){t=cl.fromArray([0,0,0])}if("string"==typeof e)try{e=cl.fromString(e)}catch(t){e=cl.fromArray([0,0,0])}const i=Hc(t.r,e.r),n=Hc(t.g,e.g),o=Hc(t.b,e.b),r=Hc(t.a,e.a);return t=>cl.fromArray([i(t),n(t),o(t),r(t)]).toRgbaString()}(t,e)}}catch(t){}throw new Error(`Unable to interpolate values: ${t}, ${e}`)}}const td={added:{animationDuration:.25,animationDelay:.75},updated:{animationDuration:.5,animationDelay:.25},removed:{animationDuration:.25,animationDelay:0},unknown:{animationDuration:1,animationDelay:0}};function ed(t,e,i,n,o,r,s){const{defaultDuration:a}=i,{fromFn:l,toFn:c,intermediateFn:d}=o,u=Jc(n),h=u?n:[],p=u?[]:n,f={added:{},removed:{}};r&&s&&(f.added=Uc(s.added,!0),f.removed=Uc(s.removed,!0));const g=(n,o)=>{var u,h;let p,g=0,v=0;for(const y of o){const m=n[g]===y,b={last:v>=o.length-1,lastLive:g>=n.length-1,prev:o[v-1],prevFromProps:p,prevLive:n[g-1],next:o[v+1],nextLive:n[g+(m?1:0)]},S=`${t}_${e}_${y.id}`;i.stopByAnimationId(S);let x="unknown";m?r&&s&&(x=nd(y,y.datum,r,f)):x="removed";const C=l(y,y.datum,x,b),{animationDelay:w,animationDuration:E,start:O={},finish:D={}}=C,A=ma(C,["animationDelay","animationDuration","start","finish"]),T=c(y,y.datum,x,b),{animationDelay:k,animationDuration:M,start:R={},finish:P={}}=T,N=ma(T,["animationDelay","animationDuration","start","finish"]);i.animate({id:S,groupId:t,from:A,to:N,ease:Yc,onPlay:()=>{y.setProperties(Object.assign(Object.assign({},O),R))},onUpdate(t){y.setProperties(t),d&&y.setProperties(d(y,y.datum,x,b))},onStop:()=>{y.setProperties(Object.assign(Object.assign(Object.assign({},N),D),P))},duration:(null!==(u=null!=E?E:M)&&void 0!==u?u:1)*a,delay:(null!==(h=null!=w?w:k)&&void 0!==h?h:0)*a}),m&&g++,v++,p=A}};let v=0;for(const n of p){const o=n.nodes();g(o.filter(t=>!n.isGarbage(t)),o),i.animate({id:`${t}_${e}_selection_${v}`,groupId:t,from:0,to:1,ease:Yc,onStop(){n.cleanup()}}),v++}g(h,h)}function id(t,e,i,n,o,r,s={}){const a=Jc(n),l=a?n:[],c=a?[]:n,{animationDelay:d=0,animationDuration:u=1,start:h={},finish:p={}}=s,{defaultDuration:f}=i;i.animate({id:`${t}_${e}`,groupId:t,from:o,to:r,ease:Yc,onPlay:()=>{for(const t of l)t.setProperties(h);for(const t of c)for(const e of t.nodes())e.setProperties(h)},onUpdate(t){for(const e of l)e.setProperties(t);for(const e of c)for(const i of e.nodes())i.setProperties(t)},onStop:()=>{for(const t of l)t.setProperties(Object.assign(Object.assign({},r),p));for(const t of c)for(const e of t.nodes())e.setProperties(Object.assign(Object.assign({},r),p))},duration:u*f,delay:d*f})}function nd(t,e,i,n){const o=i(t,e);return n.added[o]?"added":n.removed[o]?"removed":"updated"}var od=Object.freeze({__proto__:null,NODE_UPDATE_PHASES:["removed","updated","added"],FROM_TO_MIXINS:td,fromToMotion:ed,staticFromToMotion:id});const rd=t=>`(${t})`,sd=t=>rd(t)+"?",ad=t=>sd("?:"+t),ld=new RegExp(["^",ad(`${sd(".")}${rd("[<>=^]")}`),sd("[+\\-( ]"),sd("[$\u20ac\xa3\xa5\u20a3\u20b9#]"),sd("0"),sd("\\d+"),sd(","),ad("\\."+rd("\\d+")),sd("~"),sd("[%a-z]"),"$"].join(""),"i"),cd=new RegExp(["^",rd(".*?"),`#\\{${rd(".+?")}\\}`,rd(".*?"),"$"].join(""));function dd(t){let e,i;const n=cd.exec(t);n&&([,e,t,i]=n);const o=ld.exec(t);if(!o)throw new Error("The number formatter is invalid: "+t);const[,r,s,a,l,c,d,u,h,p,f]=o;return{fill:r,align:s,sign:a,symbol:l,zero:c,width:parseInt(d),comma:u,precision:parseInt(h),trim:Boolean(p),type:f,prefix:e,suffix:i}}function ud(t){const e="string"==typeof t?dd(t):t,{fill:i,align:n,sign:o="-",symbol:r,zero:s,width:a,comma:l,type:c,prefix:d="",suffix:u="",precision:h}=e;let{trim:p}=e;const f=void 0===h||isNaN(h);let g,v;if(c)if(c in fd&&c in pd)g=f?pd[c]:fd[c];else if(c in fd)g=fd[c];else{if(!(c in pd))throw new Error("The number formatter type is invalid: "+c);g=pd[c]}else g=fd.g,p=!0;return v=null==h||f?c?6:12:h,t=>{let e=g(t,v);return p&&(e=e.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")),l&&(e=function(t,e){let i=t.indexOf(".");i<0&&(i=t.length);const n=t.substring(0,i).split(""),o=t.substring(i);for(let t=n.length-3;t>0;t-=3)n.splice(t,0,e);return`${n.join("")}${o}`}(e,l)),e=function(t,e,i=""){if("("===i)return t>=0?e:`(${e})`;const n="+"===i?"+":"";return`${t>=0?n:"\u2212"}${e}`}(t,e,o),r&&"#"!==r&&(e=`${r}${e}`),"#"===r&&"x"===c&&(e="0x"+e),"s"===c&&(e=`${e}${function(t){return md[gd(t)]}(t)}`),"%"!==c&&"p"!==c||(e+="%"),null==a||isNaN(a)||(e=function(t,e,i=" ",n=">"){let o=t;if(">"!==n&&n){if("<"===n)o=o.padEnd(e,i);else if("^"===n){const t=Math.max(0,e-o.length),n=Math.ceil(t/2),r=Math.floor(t/2);o=o.padStart(n+o.length,i),o=o.padEnd(r+o.length,i)}}else o=o.padStart(e,i);return o}(e,a,null!=i?i:s,n)),e=`${d}${e}${u}`,e}}const hd=t=>Math.floor(Math.abs(t)),pd={b:t=>hd(t).toString(2),c:t=>String.fromCharCode(t),d:t=>Math.round(Math.abs(t)).toFixed(0),o:t=>hd(t).toString(8),x:t=>hd(t).toString(16),X:t=>pd.x(t).toUpperCase(),n:t=>pd.d(t),"%":t=>""+hd(100*t).toFixed(0)},fd={e:(t,e)=>Math.abs(t).toExponential(e),E:(t,e)=>fd.e(t,e).toUpperCase(),f:(t,e)=>Math.abs(t).toFixed(e),F:(t,e)=>fd.f(t,e).toUpperCase(),g:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),n=Math.floor(Math.log10(i));return n>=-4&&n<e?i.toFixed(e-1-n):i.toExponential(e-1)},G:(t,e)=>fd.g(t,e).toUpperCase(),n:(t,e)=>fd.g(t,e),p:(t,e)=>fd.r(100*t,e),r:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),n=Math.floor(Math.log10(i))-(e-1);if(n<=0)return i.toFixed(-n);const o=Math.pow(10,n);return(Math.round(i/o)*o).toFixed()},s:(t,e)=>{const i=gd(t);return fd.r(t/Math.pow(10,i),e)},"%":(t,e)=>fd.f(100*t,e)};function gd(t){const e=Math.log10(Math.abs(t)),i=3*Math.floor(e/3);return Math.max(vd,Math.min(yd,i))}const vd=-24,yd=24,md={[vd]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[yd]:"Y"};function bd(t,e){const i=dd(null!=e?e:",f"),{precision:n}=i;(null==n||isNaN(n))&&("f"===i.type||"%"===i.type?i.precision=Math.max(...t.map(t=>{if("number"!=typeof t||0===t)return 0;const e=Math.floor(Math.log10(Math.abs(t))),n=i.type?6:12,o=t.toExponential(n-1).replace(/\.?0+e/,"e"),r=o.indexOf(".");if(r<0)return e>=0?0:-e;const s=o.indexOf("e")-r;return Math.max(0,s-e-1)})):i.type&&!(i.type in fd)||(i.precision=Math.max(...t.map(t=>{if("number"!=typeof t)return 0;const e=t.toExponential((i.type?6:12)-1).replace(/\.?0+e/,"e");return e.substring(0,e.indexOf("e")).replace(".","").length}))));const o=ud(i);return t=>o(Number(t))}function Sd(t,e,i,n,o){if(i<2)return Ed(t,e,e-t);const r=Cd(t,e,i,n,o);return isNaN(r)?new wd(0):Ed(t=Math.ceil(t/r)*r,e=Math.floor(e/r)*r,r)}const xd=[1,2,5,10];function Cd(t,e,i,n=0,o=1/0){const r=(e-t)/i,s=Math.floor(Math.log10(r)),a=Math.pow(10,s),l=xd.map(r=>{const s=r*a,l=Math.ceil((e-t)/s);return{multiplier:r,isWithinBounds:l>=n&&l<=o,diffCount:Math.abs(l-i)}}).sort((t,e)=>t.isWithinBounds!==e.isWithinBounds?t.isWithinBounds?-1:1:t.diffCount-e.diffCount)[0].multiplier;return!l||isNaN(l)?NaN:l*a}class wd extends Array{constructor(t,e){if(super(),e)for(let t=0,i=e.length;t<i;t++)this[t]=e[t];this.fractionDigits=t}}function Ed(t,e,i){const n=(t=>{var e,i;const n=t.split("e");return Math.max((null!==(i=null===(e=n[0].split(".")[1])||void 0===e?void 0:e.length)&&void 0!==i?i:0)-Number(n[1]),0)})((i%1).toExponential()),o=Math.pow(10,n),r=Math.ceil((e-t)/i),s=new wd(n);for(let e=0;e<=r;e++){const n=t+i*e;s.push(Math.round(n*o)/o)}return s}class Od{static is(t){return t instanceof Od}constructor(t,e){this.domain=t,this.range=e,this.nice=!1,this.tickCount=Od.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClampMode="raw",this.cache=null,this.cacheProps=["domain","range","nice","tickCount","minTickCount","maxTickCount"]}transform(t){return t}transformInvert(t){return t}calcBandwidth(t=1){const e=this.getDomain(),i=Math.max(...this.range),n=(e[1]-e[0])/t+1,o=Math.floor(i),r=Math.min(n,o);return i/Math.max(1,r)}fromDomain(t){return"number"==typeof t?t:t instanceof Date?t.getTime():NaN}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(t,e){var i;const n=null!==(i=null==e?void 0:e.clampMode)&&void 0!==i?i:this.defaultClampMode;if(!this.domain||this.domain.length<2)return NaN;this.refresh();const o=this.getDomain().map(t=>this.transform(t)),[r,s]=o,{range:a}=this,[l,c]=a;if(t=this.transform(t),"clamped"===n){if(t<r)return l;if(t>s)return c}return r===s?(l+c)/2:t===r?l:t===s?c:l+(this.fromDomain(t)-this.fromDomain(r))/(this.fromDomain(s)-this.fromDomain(r))*(c-l)}invert(t){this.refresh();const e=this.getDomain().map(t=>this.transform(t)),[i,n]=e,{range:o}=this,[r,s]=o,a=r>s;let l;return t<(a?s:r)?a?n:i:t>(a?r:s)?a?i:n:(l=r===s?this.toDomain((this.fromDomain(i)+this.fromDomain(n))/2):this.toDomain(this.fromDomain(i)+(t-r)/(s-r)*(this.fromDomain(n)-this.fromDomain(i))),this.transformInvert(l))}didChange(){const{cache:t}=this;return!(t&&!this.cacheProps.some(e=>this[e]!==t[e]))&&(this.cache={},this.cacheProps.forEach(t=>this.cache[t]=this[t]),!0)}refresh(){this.didChange()&&this.update()}getPixelRange(){const t=this.range.slice().sort((t,e)=>t-e);return t[1]-t[0]}isDenseInterval({start:t,stop:e,interval:i,count:n}){return null!=n||(n=(e-t)/("number"==typeof i?i:1)),n>=this.getPixelRange()&&(La.warn("the configured tick interval results in more than 1 tick per pixel, ignoring. Supply a larger tick interval or omit this configuration."),!0)}}Od.defaultTickCount=5,Od.defaultMaxTickCount=6;class Dd extends Od{constructor(){super([0,1],[0,1]),this.type="linear"}toDomain(t){return t}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:Od.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||this.domain.some(t=>!isFinite(t)))return[];this.refresh();const[i,n]=this.getDomain(),{interval:o}=this;if(o){const t=Math.abs(o);if(!this.isDenseInterval({start:i,stop:n,interval:t}))return Ed(i,n,t)}return Sd(i,n,e,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}getTickStep(t,e){var i,n;const o=null!==(i=this.tickCount)&&void 0!==i?i:Od.defaultTickCount;return null!==(n=this.interval)&&void 0!==n?n:Cd(t,e,o,this.minTickCount,this.maxTickCount)}updateNiceDomain(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:Od.defaultTickCount;let[i,n]=this.domain;if(e<1)return void(this.niceDomain=[i,n]);if(1===e)return void(this.niceDomain=function(t,e){const i=Math.floor(Math.log10(e-t)),n=Math.pow(10,i);return xd.map(i=>{const o=i*n,r=Math.floor(t/o)*o,s=Math.ceil(e/o)*o;return{error:1-(e-t)/(s-r),domain:[r,s]}}).sort((t,e)=>t.error-e.error)[0].domain}(i,n));let o=i,r=n;for(let t=0;t<4;t++){const t=this.getTickStep(i,n),[e,s]=this.domain;if(t>=1)i=Math.floor(e/t)*t,n=Math.ceil(s/t)*t;else{const o=1/t;i=Math.floor(e*o)/o,n=Math.ceil(s*o)/o}if(i===o&&n===r)break;o=i,r=n}this.niceDomain=[i,n]}tickFormat({ticks:t,specifier:e}){return bd(null!=t?t:this.ticks(),e)}}function Ad(t,e){let i=0;return"number"==typeof t&&"number"==typeof e?i=t-e:"string"==typeof t&&"string"==typeof e?i=t.localeCompare(e):null==t&&null==e||(i=null==t?-1:null==e?1:String(t).localeCompare(String(e))),i}function Td(t,e,i){const n=t=>"function"==typeof t?t():t;for(const o in t){const r=i(n(t[o]),n(e[o]));if(0!==r)return r}return 0}class kd extends Ec{zIndexChanged(){var t;this.layer&&(null===(t=this._layerManager)||void 0===t||t.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return null!=this.layer}constructor(t){var e;super({isVirtual:null==t?void 0:t.isVirtual}),this.opts=t,this.opacity=1,this.lastBBox=void 0;const{zIndex:i,zIndexSubOrder:n}=null!=t?t:{};this.isContainerNode=!0,void 0!==i&&(this.zIndex=i),void 0!==n&&(this.zIndexSubOrder=n),this.name=null===(e=this.opts)||void 0===e?void 0:e.name}_setLayerManager(t){var e,i;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(super._setLayerManager(t),t&&(null===(e=this.opts)||void 0===e?void 0:e.layer)){const{zIndex:e,zIndexSubOrder:n,name:o}=null!==(i=this.opts)&&void 0!==i?i:{},r=()=>this.getComputedOpacity(),s=()=>this.getVisibility();this.layer=t.addLayer({zIndex:e,zIndexSubOrder:n,name:o,getComputedOpacity:r,getVisibility:s})}}getComputedOpacity(){let t=1,e=this;do{e instanceof kd&&(t*=e.opacity)}while(e=e.parent);return t}getVisibility(){let t=this,e=this.visible;for(;t=t.parent;)t.visible||(e=t.visible);return e}visibilityChanged(){this.layer&&(this.layer.enabled=this.visible)}markDirty(t,e=pc.TRIVIAL){if(this.isVirtual)return void super.markDirty(t,e);let i=e;(e<pc.MINOR||null!=this.layer)&&(i=pc.TRIVIAL),super.markDirty(t,e,i)}containsPoint(t,e){return!0}computeBBox(){return this.computeTransformMatrix(),kd.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}render(t){var e,i;const{opts:{name:n}={},_debug:o=(()=>{})}=this,{dirty:r,dirtyZIndex:s,layer:a,children:l,clipRect:c,dirtyTransform:d}=this;let{ctx:u,forceRender:h,clipBBox:p}=t;const{resized:f,stats:g}=t,v=u.getTransform(),y=r>=pc.MINOR||s||f;let m=y,b=!1;for(const t of l)if(m||(m=null==t.layerManager&&t.dirty>=pc.TRIVIAL),b||(b=null!=t.layerManager&&t.dirty>=pc.TRIVIAL),m)break;if(n&&o({name:n,group:this,isDirty:y,isChildDirty:m,dirtyTransform:d,renderCtx:t,forceRender:h}),d)h="dirtyTransform";else if(a){const t=this.computeBBox();void 0!==this.lastBBox&&this.lastBBox.equals(t)||(h="dirtyTransform",this.lastBBox=t)}if(!(y||m||b||h))return n&&g&&o({name:n,result:"skipping",renderCtx:t,counts:this.nodeCount,group:this}),a&&g&&(g.layersSkipped++,g.nodesSkipped+=this.nodeCount.count),void this.markClean({recursive:!1});const S=this.visible;if(a){if(u=a.context,u.save(),u.resetTransform(),"dirtyTransform"!==h&&(h=m||s),h&&a.clear(),p){const{width:e,height:i,x:r,y:s}=p;o(()=>({name:n,clipBBox:p,ctxTransform:u.getTransform(),renderCtx:t,group:this})),this.clipCtx(u,r,s,e,i)}u.setTransform(v)}else u.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(u),c){const{x:e,y:i,width:r,height:s}=c;u.save(),o(()=>({name:n,clipRect:c,ctxTransform:u.getTransform(),renderCtx:t,group:this})),this.clipCtx(u,e,i,r,s),p=this.matrix.transformBBox(c)}const x=this.hasVirtualChildren();s?(this.sortChildren(l),"dirtyTransform"!==h&&(h=!0)):x&&this.sortChildren(l);const C=h!==t.forceRender||p!==t.clipBBox||u!==t.ctx?Object.assign(Object.assign({},t),{ctx:u,forceRender:h,clipBBox:p}):t;let w=0;for(const t of l)t.visible&&S?h||t.dirty!==pc.NONE?(u.save(),t.render(C),u.restore()):g&&(w+=t.nodeCount.count):(t.markClean(),g&&(w+=t.nodeCount.count));if(g&&(g.nodesSkipped+=w),super.render(t),c&&u.restore(),x)for(const t of this.virtualChildren)t.markClean({recursive:"virtual"});a&&(g&&g.layersRendered++,u.restore(),h&&a.snapshot(),null===(i=(e=a.context).verifyDepthZero)||void 0===i||i.call(e)),n&&g&&o({name:n,result:"rendered",skipped:w,renderCtx:t,counts:this.nodeCount,group:this})}sortChildren(t){this.dirtyZIndex=!1,t.sort((t,e)=>{var i,n;return Td([t.zIndex,...null!==(i=t.zIndexSubOrder)&&void 0!==i?i:[void 0,void 0],t.serialNumber],[e.zIndex,...null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0],e.serialNumber],Ad)})}clipCtx(t,e,i,n,o){t.beginPath(),t.moveTo(e,i),t.lineTo(e+n,i),t.lineTo(e+n,i+o),t.lineTo(e,i+o),t.closePath(),t.clip()}static computeBBox(t){let e=1/0,i=-1/0,n=1/0,o=-1/0;return t.forEach(t=>{if(!t.visible)return;const r=t.computeTransformedBBox();if(!r)return;const s=r.x,a=r.y;s<e&&(e=s),a<n&&(n=a),s+r.width>i&&(i=s+r.width),a+r.height>o&&(o=a+r.height)}),new Sc(e,n,i-e,o-n)}setClipRectInGroupCoordinateSpace(t){this.clipRect=t?this.transformBBox(t):void 0}}kd.className="Group",ba([gc({redraw:pc.MAJOR,convertor:t=>Math.min(1,Math.max(0,t))}),Sa("design:type",Number)],kd.prototype,"opacity",void 0);class Md{static select(t,e,i=!0){return new Md(t,e,i)}static selectAll(t,e){const i=[],n=t=>{e(t)&&i.push(t),t.children.forEach(n)};return n(t),i}static selectByClass(t,e){return Md.selectAll(t,t=>t instanceof e)}static selectByTag(t,e){return Md.selectAll(t,t=>t.tag===e)}constructor(t,e,i=!0){this.parentNode=t,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=_a.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(Ec,e)?()=>new e:e}createNode(t,e,i){const n=this.nodeFactory(t);return n.datum=t,null==e||e(n),null!=i?this._nodes.splice(i,0,n):this._nodes.push(n),this.parentNode.appendChild(n),n}update(t,e,i){if(this.garbageBin.size>0&&this.debug("Selection - update() called with pending garbage: "+t),i){const n=new Map(t.map((t,e)=>[i(t),[t,e]]));for(const[t,e]of this._nodesMap.entries())if(n.has(e)){const[i]=n.get(e);t.datum=i,this.garbageBin.delete(t),n.delete(e)}else this.garbageBin.add(t);for(const[t,[i,o]]of n.entries())this._nodesMap.set(this.createNode(i,e,o),t)}else{const i=Math.max(t.length,this.data.length);for(let n=0;n<i;n++)n>=t.length?this.garbageBin.add(this._nodes[n]):n>=this._nodes.length?this.createNode(t[n],e):(this._nodes[n].datum=t[n],this.garbageBin.delete(this._nodes[n]))}return this.data=t.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return 0===this.garbageBin.size||(this._nodes=this._nodes.filter(t=>!this.garbageBin.has(t)||(this._nodesMap.delete(t),this.garbageBin.delete(t),this.parentNode.removeChild(t),!1))),this}clear(){return this.update([]),this}isGarbage(t){return this.garbageBin.has(t)}hasGarbage(){return this.garbageBin.size>0}each(t){return this._nodes.forEach((e,i)=>t(e,e.datum,i)),this}*[Symbol.iterator](){for(let t=0;t<this._nodes.length;t++){const e=this._nodes[t],i=this._nodes[t].datum;yield{node:e,datum:i,index:t}}}select(t){return Md.selectAll(this.parentNode,t)}selectByClass(t){return Md.selectByClass(this.parentNode,t)}selectByTag(t){return Md.selectByTag(this.parentNode,t)}nodes(){return this._nodes}}class Rd extends Rc{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(t){this.x1=t,this.x2=t}set y(t){this.y1=t,this.y2=t}computeBBox(){return new Sc(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(t,e){if(this.x1===this.x2||this.y1===this.y2){const{x:i,y:n}=this.transformPoint(t,e);return this.computeBBox().grow(this.strokeWidth/2).containsPoint(i,n)}return!1}render(t){var e;const{ctx:i,forceRender:n,stats:o}=t;if(this.dirty===pc.NONE&&!n)return void(o&&(o.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:r,y1:s,x2:a,y2:l}=this;if(r===a){const t=Math.round(r)+Math.floor(this.strokeWidth)%2/2;r=t,a=t}else if(s===l){const t=Math.round(s)+Math.floor(this.strokeWidth)%2/2;s=t,l=t}i.beginPath(),i.moveTo(r,s),i.lineTo(a,l),this.fillStroke(i),null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}function Pd(t,e,i,n){if(0===t)return function(t,e,i){if(0===t)return function(t,e){const i=-e/t;return 0!==t&&i>=0&&i<=1?[i]:[]}(e,i);const n=e*e-4*t*i,o=[];if(0===n){const i=-e/(2*t);i>=0&&i<=1&&o.push(i)}else if(n>0){const i=Math.sqrt(n),r=(-e-i)/(2*t),s=(-e+i)/(2*t);r>=0&&r<=1&&o.push(r),s>=0&&s<=1&&o.push(s)}return o}(e,i,n);const o=e/t,r=i/t,s=(3*r-o*o)/9,a=(9*o*r-27*(n/t)-2*o*o*o)/54,l=s*s*s+a*a,c=[];if(l>=0){const t=Math.sqrt(l),e=Math.sign(a+t)*Math.pow(Math.abs(a+t),1/3),i=Math.sign(a-t)*Math.pow(Math.abs(a-t),1/3),n=Math.abs(Math.sqrt(3)*(e-i)/2),r=-1/3*o+(e+i);if(r>=0&&r<=1&&c.push(r),0===n){const t=-1/3*o-(e+i)/2;t>=0&&t<=1&&c.push(t)}}else{const t=Math.acos(a/Math.sqrt(-s*s*s)),e=1/3*o,i=2*Math.sqrt(-s),n=i*Math.cos(1/3*t)-e,r=i*Math.cos(1/3*(t+2*Math.PI))-e,l=i*Math.cos(1/3*(t+4*Math.PI))-e;n>=0&&n<=1&&c.push(n),r>=0&&r<=1&&c.push(r),l>=0&&l<=1&&c.push(l)}return c}function Nd(t,e,i,n,o,r,s,a){const l=(i-t)*(a-r)-(n-e)*(s-o);if(0===l)return null;const c=((s-o)*(e-r)-(t-o)*(a-r))/l,d=((i-t)*(e-r)-(n-e)*(t-o))/l;return c>=0&&c<=1&&d>=0&&d<=1?{x:t+c*(i-t),y:e+c*(n-e)}:null}function Ld(t,e,i,n,o,r,s,a,l,c,d,u){const h=[],p=c-u,f=d-l,g=l*(u-c)-c*(d-l),v=Id(t,i,o,s),y=Id(e,n,r,a),m=Pd(p*v[0]+f*y[0],p*v[1]+f*y[1],p*v[2]+f*y[2],p*v[3]+f*y[3]+g);for(const t of m){const e=t*t,i=t*e,n=v[0]*i+v[1]*e+v[2]*t+v[3],o=y[0]*i+y[1]*e+y[2]*t+y[3];let r;r=l!==d?(n-l)/(d-l):(o-c)/(u-c),r>=0&&r<=1&&h.push({x:n,y:o})}return h}function Id(t,e,i,n){return[3*e-t-3*i+n,3*t-6*e+3*i,-3*t+3*e,t]}function Fd(t,e,i,n,o,r,s,a,l,c){const d=(c-a)/(l-s),u=a-d*s,h=Math.pow(d,2)+1,p=2*(d*(u-e)-t),f=Math.pow(t,2)+Math.pow(u-e,2)-Math.pow(i,2),g=Math.pow(p,2)-4*h*f;if(g<0)return[];const v=(-p+Math.sqrt(g))/2/h,y=(-p-Math.sqrt(g))/2/h,m=[];return[v,y].forEach(t=>{if(!(t>=Math.min(s,l)&&t<=Math.max(s,l)))return;const e=d*t+u,i=Ja(n);let a=Ja(o),c=Ja(Math.atan2(e,t));a<=i&&(a+=2*Math.PI),c<i&&(c+=2*Math.PI),r!==(c>=i&&c<=a)&&m.push({x:t,y:e})}),m}function _d(t,e,i){const n=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),{innerRadius:o,outerRadius:r}=i;if(i.startAngle===i.endAngle||n<Math.min(o,r)||n>Math.max(o,r))return!1;const s=Qa(i.startAngle),a=Qa(i.endAngle),l=Math.atan2(e,t);return s<a?l<=a&&l>=s:l<=a&&l>=-Math.PI||l>=s&&l<=Math.PI}function Gd(t,e){const{startAngle:i,endAngle:n,innerRadius:o,outerRadius:r}=e,s={x:r*Math.cos(i),y:r*Math.sin(i)},a={x:r*Math.cos(n),y:r*Math.sin(n)},l=0===o?{x:0,y:0}:{x:o*Math.cos(i),y:o*Math.sin(i)},c=0===o?{x:0,y:0}:{x:o*Math.cos(n),y:o*Math.sin(n)};return null!=Nd(t.start.x,t.start.y,t.end.x,t.end.y,s.x,s.y,l.x,l.y)||null!=Nd(t.start.x,t.start.y,t.end.x,t.end.y,a.x,a.y,c.x,c.y)||Fd(0,0,r,i,n,!0,t.start.x,t.start.y,t.end.x,t.end.y).length>0}var Bd;Rd.className="Line",Rd.defaultStyles=Object.assign({},Rc.defaultStyles,{fill:void 0,strokeWidth:1}),ba([gc({redraw:pc.MAJOR}),Sa("design:type",Number)],Rd.prototype,"x1",void 0),ba([gc({redraw:pc.MAJOR}),Sa("design:type",Number)],Rd.prototype,"y1",void 0),ba([gc({redraw:pc.MAJOR}),Sa("design:type",Number)],Rd.prototype,"x2",void 0),ba([gc({redraw:pc.MAJOR}),Sa("design:type",Number)],Rd.prototype,"y2",void 0),function(t){t[t.Move=0]="Move",t[t.Line=1]="Line",t[t.Arc=2]="Arc",t[t.Curve=3]="Curve",t[t.ClosePath=4]="ClosePath"}(Bd||(Bd={}));class Vd{constructor(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}isDirty(){if(this._closedPath!==this.previousClosedPath)return!0;if(this.previousCommands.length!==this.commands.length)return!0;if(this.previousParams.length!==this.params.length)return!0;for(let t=0;t<this.commands.length;t++)if(this.commands[t]!==this.previousCommands[t])return!0;for(let t=0;t<this.params.length;t++)if(this.params[t]!==this.previousParams[t])return!0;return!1}draw(t){const e=this.commands,i=this.params;let n=0;t.beginPath();for(const o of e)switch(o){case Bd.Move:t.moveTo(i[n++],i[n++]);break;case Bd.Line:t.lineTo(i[n++],i[n++]);break;case Bd.Curve:t.bezierCurveTo(i[n++],i[n++],i[n++],i[n++],i[n++],i[n++]);break;case Bd.Arc:t.arc(i[n++],i[n++],i[n++],i[n++],i[n++],1===i[n++]);break;case Bd.ClosePath:t.closePath()}0===e.length&&t.closePath()}moveTo(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push(Bd.Move),this.params.push(t,e)}lineTo(t,e){this.xy?(this.commands.push(Bd.Line),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)}rect(t,e,i,n){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+n),this.lineTo(t,e+n),this.closePath()}arc(t,e,i,n,o,r=!1){const s=t+i*Math.cos(o),a=e+i*Math.sin(o);this.xy?(this.xy[0]=s,this.xy[1]=a):this.xy=[s,a],this.commands.push(Bd.Arc),this.params.push(t,e,i,n,o,r?1:0)}cubicCurveTo(t,e,i,n,o,r){this.xy||this.moveTo(t,e),this.commands.push(Bd.Curve),this.params.push(t,e,i,n,o,r),this.xy&&(this.xy[0]=o,this.xy[1]=r)}get closedPath(){return this._closedPath}closePath(){this.xy&&(this.xy=void 0,this.commands.push(Bd.ClosePath),this._closedPath=!0)}clear({trackChanges:t}={trackChanges:!1}){t?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1}isPointInPath(t,e){const i=this.commands,n=this.params,o=i.length,r=-1e4,s=-1e4;let a=NaN,l=NaN,c=0,d=0,u=0;for(let h=0,p=0;h<o;h++)switch(i[h]){case Bd.Move:!isNaN(a)&&Nd(a,l,c,d,r,s,t,e)&&u++,c=n[p++],a=c,d=n[p++],l=d;break;case Bd.Line:Nd(c,d,n[p++],n[p++],r,s,t,e)&&u++,c=n[p-2],d=n[p-1];break;case Bd.Curve:u+=Ld(c,d,n[p++],n[p++],n[p++],n[p++],n[p++],n[p++],r,s,t,e).length,c=n[p-2],d=n[p-1];break;case Bd.Arc:const i=n[p++],o=n[p++],h=n[p++],f=n[p++],g=n[p++];u+=Fd(i,o,h,f,g,Boolean(n[p++]),r,s,t,e).length,c=i+Math.cos(g)*h,d=o+Math.sin(g)*h;break;case Bd.ClosePath:!isNaN(a)&&Nd(a,l,c,d,r,s,t,e)&&u++}return u%2==1}getPoints(){const{commands:t,params:e}=this,i=[];let n=0;for(let o=0;o<t.length;o++)switch(t[o]){case Bd.Move:case Bd.Line:i.push({x:e[n++],y:e[n++]});break;case Bd.Curve:n+=4,i.push({x:e[n++],y:e[n++]});break;case Bd.Arc:i.push({x:e[n++],y:e[n++]}),n+=4;break;case Bd.ClosePath:}return i}}function jd(t){const{redraw:e=pc.MAJOR,changeCb:i,convertor:n}=null!=t?t:{};return gc({redraw:e,type:"path",convertor:n,changeCb:i})}class Wd extends Rc{constructor(){super(...arguments),this.path=new Vd,this.clipScalingX=1,this.clipScalingY=1,this._dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty(this,pc.MAJOR))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var t,e,i,n;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!==(e=null===(t=this.fillShadow)||void 0===t?void 0:t.isDirty())&&void 0!==e&&e||null!==(n=null===(i=this.clipPath)||void 0===i?void 0:i.isDirty())&&void 0!==n&&n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.path.closedPath&&this.path.isPointInPath(i.x,i.y)}isDirtyPath(){return!1}updatePath(){}clip(t,e){const i=t.getTransform(),n=1!==this.clipScalingX||1!==this.clipScalingY;n&&t.scale(this.clipScalingX,this.clipScalingY),e(),n&&t.setTransform(i)}render(t){var e;const{ctx:i,forceRender:n,stats:o}=t;this.dirty!==pc.NONE||n?(this.computeTransformMatrix(),this.matrix.toContext(i),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.clipPath&&null!=this.clipMode?(i.save(),"normal"===this.clipMode&&this.clip(i,()=>{var t;null===(t=this.clipPath)||void 0===t||t.draw(i),i.clip()}),this.clipScalingX>0&&this.clipScalingY>0&&(this.path.draw(i),this.fillStroke(i)),"punch-out"===this.clipMode&&this.clip(i,()=>{var t,e;null===(t=this.clipPath)||void 0===t||t.draw(i),i.clip();const{x:n=-1e4,y:o=-1e4,width:r=2e4,height:s=2e4}=null!==(e=this.computeBBox())&&void 0!==e?e:{};i.clearRect(n,o,r,s)}),i.restore()):(this.path.draw(i),this.fillStroke(i)),null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)):o&&(o.nodesSkipped+=this.nodeCount.count)}}Wd.className="Path",ba([jd(),Sa("design:type",Vd)],Wd.prototype,"clipPath",void 0),ba([jd(),Sa("design:type",String)],Wd.prototype,"clipMode",void 0),ba([jd(),Sa("design:type",Object)],Wd.prototype,"clipScalingX",void 0),ba([jd(),Sa("design:type",Object)],Wd.prototype,"clipScalingY",void 0);class zd extends Wd{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.angleOffset=0,this.inset=0}computeBBox(){const t=this.outerRadius;return new Sc(this.centerX-t,this.centerY-t,2*t,2*t)}updatePath(){const t=this.path,{angleOffset:e,inset:i}=this,n=this.startAngle+e,o=this.endAngle+e,r=Math.abs(this.endAngle-this.startAngle)>=2*Math.PI,s=this.centerX,a=this.centerY;if(t.clear(),r){const e=this.innerRadius<=0?0:this.innerRadius+i,r=Math.min(e,this.outerRadius-i),l=Math.max(e,this.outerRadius-i);t.arc(s,a,l,n,o),r>0&&(t.moveTo(s+r*Math.cos(o),a+r*Math.sin(o)),t.arc(s,a,r,o,n,!0))}else{const e=Math.min(this.innerRadius+i,this.outerRadius-i),r=Math.max(this.innerRadius+i,this.outerRadius-i),l=e>0?i/e:0,c=r>0?i/r:0,d=Math.abs(o-n);if(d<2*c)return;const u=e<=i||d<2*l;if(u){const l=Math.abs(d)<.5*Math.PI?i*(1+Math.cos(d))/Math.sin(d):NaN;let c;c=l>0&&l<r?Math.max(Math.hypot(i,l),e):e;const u=.5*(n+o);t.moveTo(s+c*Math.cos(u),a+c*Math.sin(u))}else t.moveTo(s+e*Math.cos(n+l),a+e*Math.sin(n+l));t.arc(s,a,r,n+c,o-c),u||(e>0?t.arc(s,a,e,o-l,n+l,!0):t.lineTo(s,a))}t.closePath(),this.dirtyPath=!1}isPointInPath(t,e){const{angleOffset:i}=this,n=this.startAngle+i,o=this.endAngle+i,r=Math.min(this.innerRadius,this.outerRadius),s=Math.max(this.innerRadius,this.outerRadius),a=this.transformPoint(t,e);return _d(a.x,a.y,{startAngle:n,endAngle:o,innerRadius:r,outerRadius:s})}}function Ud(t,e){if(Yd(t)&&Yd(e)){const i={};return Object.keys(t).forEach(n=>{i[n]=n in e?Ud(t[n],e[n]):t[n]}),Object.keys(e).forEach(n=>{n in t||(i[n]=e[n])}),i}return Array.isArray(t)&&!Array.isArray(e)||Hd(t)&&!Hd(e)?t:e}function Hd(t){return"object"==typeof t&&null!==t}function Kd(t){return Hd(t)&&!Array.isArray(t)}function Yd(t){return Kd(t)&&t.constructor===Object}function Xd(...t){var e;const i={};for(const n of t){if(!n)continue;const t=ja(n)?Wa(n):Object.keys(n);for(const o of t)Kd(i[o])&&Kd(n[o])?i[o]=Xd(i[o],n[o]):null!==(e=i[o])&&void 0!==e||(i[o]=n[o])}return i}zd.className="Sector",ba([jd(),Sa("design:type",Number)],zd.prototype,"centerX",void 0),ba([jd(),Sa("design:type",Number)],zd.prototype,"centerY",void 0),ba([jd(),Sa("design:type",Number)],zd.prototype,"innerRadius",void 0),ba([jd(),Sa("design:type",Number)],zd.prototype,"outerRadius",void 0),ba([jd(),Sa("design:type",Number)],zd.prototype,"startAngle",void 0),ba([jd(),Sa("design:type",Number)],zd.prototype,"endAngle",void 0),ba([jd(),Sa("design:type",Number)],zd.prototype,"angleOffset",void 0),ba([jd(),Sa("design:type",Number)],zd.prototype,"inset",void 0);let qd=null;function $d(t){if(null!=t)return""===t?"":(null!=qd||(qd=document.createElement("div")),qd.textContent=String(t),qd.innerHTML)}const Zd=t=>"string"==typeof t,Jd=t=>!!t&&Object.prototype.hasOwnProperty.call(t,"toString")&&Zd(t.toString());function Qd(t){return Zd(t)||Jd(t)}function tu(t){return iu(t)||!!(e=t)&&Object.prototype.hasOwnProperty.call(e,"valueOf")&&iu(e.valueOf())||(t=>t instanceof Date&&!isNaN(+t))(t);var e}function eu(t,e){return e&&tu(t)?t:e?void 0:Qd(t)?t:String(t)}const iu=t=>"number"==typeof t&&Number.isFinite(t),nu=new Map;function ou(t,e){var i,n,o;const r=JSON.stringify(t,null,0);return nu.has(e)||nu.set(e,new Map),(null===(i=nu.get(e))||void 0===i?void 0:i.has(r))||null===(n=nu.get(e))||void 0===n||n.set(r,e(t)),null===(o=nu.get(e))||void 0===o?void 0:o.get(r)}const ru={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let t=NaN;return(e=1/0,i)=>{const n=i.keys[0],o=Math.abs(n-t);return t=n,!isNaN(o)&&o>0&&o<e?o:e}}},su={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:t}})=>{if(null!=t)return[...t].sort((t,e)=>{for(let i=0;i<t.length;i++){const n=t[i]-e[i];if(0!==n)return n}return 0})}};function au({normaliseTo:t,mode:e}){const i=(e,i)=>{const n=e*t/i;return n>=0?Math.min(t,n):Math.max(-t,n)};return()=>()=>(t,n)=>{const o=[0,0];for(const i of n){const n=t[i],r=n<0?0:1;"sum"===e?o[r]+=n:o[r]=0===r?Math.min(o[r],n):Math.max(o[r],n)}const r=Math.max(Math.abs(o[0]),o[1]);for(const e of n)t[e]=i(t[e],r)}}function lu(t,e,i,n="sum"){return{scopes:[t.id],type:"group-value-processor",matchGroupIds:e,adjust:ou({normaliseTo:i,mode:n},au)}}function cu({normaliseTo:t,zeroDomain:e,rangeMin:i,rangeMax:n}){const o=t[1]-t[0],r=(i,n,r)=>{const s=t[0]+(i-n)/r*o;return 0===r?e:s>=t[1]?t[1]:s<t[0]?t[0]:s};return()=>(e,o)=>{let[s,a]=e.domain.values[o];null!=i&&(s=i),null!=n&&(a=n);const l=a-s;e.domain.values[o]=[t[0],t[1]];for(const t of e.data){let i=t.values;"ungrouped"===e.type&&(i=[i]);for(const t of i)t[o]=r(t[o],s,l)}}}function du(t,e,i,n,o,r){return{scopes:[t.id],type:"property-value-processor",property:e,adjust:ou({normaliseTo:i,rangeMin:o,rangeMax:r,zeroDomain:n},cu)}}function uu(t,e=[]){return{type:"processor",scopes:[t.id],property:"animationValidation",calculate(i){var n;const{keys:o,values:r}=i.defs,{input:s,data:a}=i;let l=!0,c=!0;const d=[];for(let i=0;i<r.length;i++)(null===(n=r[i].scopes)||void 0===n?void 0:n.some(e=>e===t.id))&&e.some(t=>r[i].id===t)&&d.push([i,r[i]]);const u=(t,e,n)=>{var o;if("category"===e.valueType){const e=i.domain[n][t];return void(l&&(l=e.length===s.count))}let r=null===(o=a[0])||void 0===o?void 0:o[n][t];for(let e=1;(l||c)&&e<a.length;e++){const i=a[e][n][t];c&&(c=r<=i),l&&(l=r!==i),r=i}};for(let t=0;(l||c)&&t<o.length;t++)u(t,o[t],"keys");for(let t=0;(l||c)&&t<d.length;t++){const[e,i]=d[t];u(e,i,"values")}return{uniqueKeys:l,orderedKeys:c}}}}function hu({mode:t,separateNegative:e}){return()=>()=>(i,n)=>{const o=[0,0];for(const r of n){const n=i[r],s=rl(n)&&e?0:1;"number"!=typeof n||isNaN(n)||("normal"===t&&(o[s]+=n),i[r]=o[s],"trailing"===t&&(o[s]+=n))}}}function pu({mode:t,sum:e}){return()=>{const i=[];let n=!0;return()=>(o,r)=>{let s=0;for(const a of r){const r=o[a],l=n&&"current"===e?0:i[a];i[a]=r;const c="current"===e?r:l;"number"!=typeof r||isNaN(r)?o[a]=s:"number"!=typeof l||isNaN(l)?o[a]=s:("normal"===t&&(s+=c),o[a]=s,"trailing"===t&&(s+=c))}n=!1}}}function fu(t,e,i,n,o=!1){let r;if(i.startsWith("window")){r=ou({mode:i.endsWith("-trailing")?"trailing":"normal",sum:n},pu)}else r=ou({mode:i,separateNegative:o},hu);return{scopes:[t.id],type:"group-value-processor",matchGroupIds:[e],adjust:r}}function gu(t,e=!0){return{type:"processor",property:"diff",calculate:i=>{const n={changed:!1,moved:[],added:[],updated:[],removed:[],addedIndices:[],updatedIndices:[],removedIndices:[]},o=new Map,r=new Map,s=new Map,a=new Map,l=new Map,c=new Map,d=new Map;for(let n=0;n<Math.max(t.data.length,i.data.length);n++){const u=t.data[n],h=i.data[n],p=u?vu(u.keys):"",f=h?vu(h.keys):"";p!==f?(a.has(f)?(!e&&Ma(a.get(f).values,h.values)||(s.set(f,h),c.set(f,n),o.set(f,h)),a.delete(f),d.delete(f)):h&&(r.set(f,h),l.set(f,n)),r.has(p)?(!e&&Ma(r.get(p).values,u.values)||(s.set(p,u),c.set(p,n),o.set(p,u)),r.delete(p),l.delete(p)):u&&(s.delete(p),c.delete(p),a.set(p,u),d.set(p,n))):Ma(u.values,h.values)||(s.set(f,h),c.set(f,n))}return n.added=Array.from(r.keys()),n.updated=Array.from(s.keys()),n.removed=Array.from(a.keys()),n.moved=Array.from(o.keys()),n.addedIndices=Array.from(l.values()),n.updatedIndices=Array.from(c.values()),n.removedIndices=Array.from(d.values()),n.changed=n.added.length>0||n.updated.length>0||n.removed.length>0,n}}}function vu(t){return t.join("___")}class yu{constructor(){this.enabled=!0,this.color="#464646",this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return Lc(this)}}function mu(t){const{parallelFlipRotation:e=0,regularFlipRotation:i=0}=t,n=t.rotation?Ja(tl(t.rotation)):0,o=!n&&e>=0&&e<=Math.PI?-1:1,r=!n&&i>=0&&i<=Math.PI?-1:1;let s=0;return t.parallel?s=o*Math.PI/2:-1===r&&(s=Math.PI),{configuredRotation:n,defaultRotation:s,parallelFlipFlag:o,regularFlipFlag:r}}function bu(t,e,i,n,o){const r=e>0&&e<=Math.PI,s=i>0&&i<=Math.PI;if(t){if(!e&&!i)return"center";if(n*(r||s?-1:1)==-1)return"end"}else if(n*o==-1)return"end";return"start"}function Su(t,e,i,n,o){const{width:r,height:s}=e,a=new Sc(i,n,0,0);o.transformBBox(a,e);const{x:l=0,y:c=0}=e;return e.width=r,e.height=s,{point:{x:l,y:c,size:0},label:{width:r,height:s,text:t}}}var xu;ba([dl(Cl),Sa("design:type",Object)],yu.prototype,"enabled",void 0),ba([dl(Rl),Sa("design:type",Object)],yu.prototype,"color",void 0),ba([dl(Kl),Sa("design:type",String)],yu.prototype,"fontStyle",void 0),ba([dl(Xl),Sa("design:type",String)],yu.prototype,"fontWeight",void 0),ba([dl(Fl(0)),Sa("design:type",Object)],yu.prototype,"fontSize",void 0),ba([dl(El),Sa("design:type",Object)],yu.prototype,"fontFamily",void 0),ba([dl(xl),Sa("design:type",Function)],yu.prototype,"formatter",void 0),function(t){t[t.SERIES_BACKGROUND_ZINDEX=-10]="SERIES_BACKGROUND_ZINDEX",t[t.AXIS_GRID_ZINDEX=0]="AXIS_GRID_ZINDEX",t[t.AXIS_ZINDEX=20]="AXIS_ZINDEX",t[t.SERIES_CROSSLINE_RANGE_ZINDEX=30]="SERIES_CROSSLINE_RANGE_ZINDEX",t[t.SERIES_LAYER_ZINDEX=500]="SERIES_LAYER_ZINDEX",t[t.AXIS_FOREGROUND_ZINDEX=750]="AXIS_FOREGROUND_ZINDEX",t[t.SERIES_CROSSHAIR_ZINDEX=1e3]="SERIES_CROSSHAIR_ZINDEX",t[t.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",t[t.SERIES_CROSSLINE_LINE_ZINDEX=2500]="SERIES_CROSSLINE_LINE_ZINDEX",t[t.LEGEND_ZINDEX=3e3]="LEGEND_ZINDEX"}(xu||(xu={}));class Cu extends Wd{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){const{x:t,y:e,size:i}=this,n=i/2;return new Sc(t-n,e-n,i,i)}applyPath(t,e){const{path:i}=this;let{x:n,y:o}=this;i.clear();for(const{x:r,y:s,t:a}of e)n+=r*t,o+=s*t,"move"===a?i.moveTo(n,o):i.lineTo(n,o);i.closePath()}}ba([jd(),Sa("design:type",Number)],Cu.prototype,"x",void 0),ba([jd(),Sa("design:type",Number)],Cu.prototype,"y",void 0),ba([jd({convertor:Math.abs}),Sa("design:type",Number)],Cu.prototype,"size",void 0);class wu extends Cu{updatePath(){const{x:t,y:e,path:i,size:n}=this,o=n/2;i.clear(),i.arc(t,e,o,0,2*Math.PI),i.closePath()}}wu.className="Circle";const Eu={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Ou={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"};class Du{constructor(t){this.modules={},this.parent=t}destroy(){for(const[t,e]of Object.entries(this.modules))e.instance.destroy(),delete this.modules[t],delete this.parent[t]}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);if(t.optionsKey in this.parent)throw new Error(`AG Charts - class already has option key '${t.optionsKey}'`);null==this.moduleContext&&(this.moduleContext=this.parent.createModuleContext());const e=new t.instanceConstructor(Object.assign({},this.moduleContext));this.modules[t.optionsKey]={instance:e},this.parent[t.optionsKey]=e}removeModule(t){var e,i;null===(i=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===i||i.destroy(),delete this.modules[t.optionsKey],delete this.parent[t.optionsKey]}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}*[Symbol.iterator](){for(const{instance:t}of Object.values(this.modules))yield t}}class Au{constructor(){this.registeredListeners=new Map}addListener(t,e,i){const n={symbol:Symbol(t),handler:e,meta:i};return this.registeredListeners.has(t)?this.registeredListeners.get(t).push(n):this.registeredListeners.set(t,[n]),()=>this.removeListener(n.symbol)}removeListener(t){for(const[e,i]of this.registeredListeners.entries()){const n=i.findIndex(e=>e.symbol===t);if(n>=0){i.splice(n,1),0===i.length&&this.registeredListeners.delete(e);break}}}dispatch(t,...e){const i=new class{constructor(){this.results=void 0}push(t){var e;void 0!==t&&(null!==(e=this.results)&&void 0!==e||(this.results=[]),this.results.push(t))}};for(const n of this.getListenersByType(t))try{i.push(n.handler(...e))}catch(t){La.errorOnce(t)}return i.results}dispatchWrapHandlers(t,e,...i){for(const n of this.getListenersByType(t))try{e(n.handler,n.meta,...i)}catch(t){La.errorOnce(t)}}getListenersByType(t){var e;return null!==(e=this.registeredListeners.get(t))&&void 0!==e?e:[]}}class Tu{constructor(){this.eventListeners=new Map}addEventListener(t,e){if("function"!=typeof e)throw new Error("AG Charts - listener must be a Function");const i=this.eventListeners.get(t);i?i.add(e):this.eventListeners.set(t,new Set([e]))}removeEventListener(t,e){var i;null===(i=this.eventListeners.get(t))||void 0===i||i.delete(e),0===this.eventListeners.size&&this.eventListeners.delete(t)}hasEventListener(t){return this.eventListeners.has(t)}clearEventListeners(){this.eventListeners.clear()}fireEvent(t){var e;null===(e=this.eventListeners.get(t.type))||void 0===e||e.forEach(e=>e(t))}}function ku(t,e=[1/0,-1/0]){for(const i of t)"number"==typeof i&&(i<e[0]&&(e[0]=i),i>e[1]&&(e[1]=i));return e}function Mu(t,e=[0,0]){for(const i of t)"number"==typeof i&&(i<0&&(e[0]+=i),i>0&&(e[1]+=i));return e}function Ru(t,e){return{id:e,scopes:[t.id],type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(t,e=[0,0])=>{var i,n;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e}}}function Pu(t,e,i,n){const o={id:e,scopes:[t.id],matchGroupIds:n?[n]:void 0,type:"aggregate",aggregateFunction:(t,e=[])=>{const n=e[1]-e[0];return i.aggregateFunction(t).map(t=>t/n)}};return i.groupAggregateFunction&&(o.groupAggregateFunction=i.groupAggregateFunction),o}function Nu(t){return()=>{let e=0;return i=>"number"!=typeof i||isNaN(i)?i:(e+=t?Math.max(0,i):i,e)}}var Lu,Iu;function Fu(t){return null!=eu(t,!0)}function _u(t){return null!=eu(t,!1)}function Gu(t,e,i,n={}){return Object.assign({scopes:[t.id],property:e,type:"key",valueType:i?"range":"category",validation:i?Fu:_u},n)}function Bu(t,e,i,n={}){return Object.assign({scopes:[t.id],property:e,type:"value",valueType:i?"range":"category",validation:i?Fu:_u},n)}function Vu(t,e,i,n={}){const{onlyPositive:o}=n,r=ma(n,["onlyPositive"]);return Object.assign(Object.assign({},Bu(t,e,i,r)),{processor:Nu(o)})}function ju(t,e,i,n,o="current",r){return[Bu(t,e,i,r),fu(t,r.groupId,n,o,r.separateNegative)]}!function(t){t[t.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",t[t.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",t[t.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",t[t.NEAREST_NODE=3]="NEAREST_NODE"}(Lu||(Lu={}));class Wu{constructor(t,e,{datum:i},n){this.type=t,this.event=e,this.datum=i,this.seriesId=n.id}}class zu{constructor(){this.fill="yellow",this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.lineDashOffset=void 0}}ba([dl(Pl),Sa("design:type",String)],zu.prototype,"fill",void 0),ba([dl(_l(0,1)),Sa("design:type",Number)],zu.prototype,"fillOpacity",void 0),ba([dl(Pl),Sa("design:type",String)],zu.prototype,"stroke",void 0),ba([dl(_l(0)),Sa("design:type",Number)],zu.prototype,"strokeWidth",void 0),ba([dl(_l(0,1)),Sa("design:type",Number)],zu.prototype,"strokeOpacity",void 0),ba([dl($l),Sa("design:type",Array)],zu.prototype,"lineDash",void 0),ba([dl(_l(0)),Sa("design:type",Number)],zu.prototype,"lineDashOffset",void 0);class Uu{constructor(){this.strokeWidth=void 0,this.dimOpacity=void 0,this.enabled=void 0}}ba([dl(_l(0)),Sa("design:type",Number)],Uu.prototype,"strokeWidth",void 0),ba([dl(_l(0,1)),Sa("design:type",Number)],Uu.prototype,"dimOpacity",void 0),ba([dl(wl),Sa("design:type",Boolean)],Uu.prototype,"enabled",void 0);class Hu{constructor(){this.color="black"}}ba([dl(Pl),Sa("design:type",String)],Hu.prototype,"color",void 0);class Ku{constructor(){this.item=new zu,this.series=new Uu,this.text=new Hu}}!function(t){t[t.None=0]="None",t[t.This=1]="This",t[t.Other=2]="Other"}(Iu||(Iu={}));class Yu extends Tu{get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}set data(t){this._data=t,this.onDataChange()}get data(){var t;return null!==(t=this._data)&&void 0!==t?t:this._chartData}onDataChange(){this.nodeDataRefresh=!0}setChartData(t){this._chartData=t,this.data===t&&this.onDataChange()}hasData(){const{data:t}=this;return t&&(!Array.isArray(t)||t.length>0)}set visible(t){this._visible=t,this.visibleChanged()}get visible(){return this._visible}onSeriesGroupingChange(t,e){const{id:i,type:n,visible:o,rootGroup:r,highlightGroup:s,annotationGroup:a}=this;t&&this.ctx.seriesStateManager.deregisterSeries({id:i,type:n}),e&&this.ctx.seriesStateManager.registerSeries({id:i,type:n,visible:o,seriesGrouping:e}),null!=this.rootGroup.parent&&this.ctx.seriesLayerManager.changeGroup({id:i,type:n,rootGroup:r,highlightGroup:s,annotationGroup:a,getGroupZIndexSubOrder:t=>this.getGroupZIndexSubOrder(t),seriesGrouping:e,oldGrouping:t})}getBandScalePadding(){return{inner:1,outer:0}}constructor(t){super(),this.NodeClickEvent=Wu,this.id=mc(this),this.rootGroup=new kd({name:"seriesRoot",isVirtual:!0}),this.axes={[hc.X]:void 0,[hc.Y]:void 0},this.directions=[hc.X,hc.Y],this.nodeDataRefresh=!0,this._visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.seriesGrouping=void 0,this._declarationOrder=-1,this.seriesListeners=new Au,this.highlightStyle=new Ku,this.moduleMap=new Du(this),this.nodeDataDependencies={},this.ctx=t.moduleCtx;const{useLabelLayer:e=!1,pickModes:i=[Lu.NEAREST_BY_MAIN_AXIS_FIRST],directionKeys:n={},directionNames:o={},contentGroupVirtual:r=!0,canHaveAxes:s=!1}=t;this.directionKeys=n,this.directionNames=o,this.canHaveAxes=s,this.contentGroup=this.rootGroup.appendChild(new kd({name:this.id+"-content",layer:!r,isVirtual:r,zIndex:xu.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.highlightGroup=new kd({name:this.id+"-highlight",layer:!r,isVirtual:r,zIndex:xu.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("highlight")}),this.highlightNode=this.highlightGroup.appendChild(new kd({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new kd({name:"highlightLabel",zIndex:10})),this.pickModes=i,this.labelGroup=this.rootGroup.appendChild(new kd({name:this.id+"-series-labels",layer:e,zIndex:xu.SERIES_LABEL_ZINDEX})),this.annotationGroup=new kd({name:this.id+"-annotation",layer:!r,isVirtual:r,zIndex:xu.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("annotation")})}getGroupZIndexSubOrder(t,e=0){let i=0;switch(t){case"data":case"paths":break;case"labels":i+=2e4;break;case"marker":i+=1e4;break;case"highlight":e+=15e3;break;case"annotation":i+=15e3}return[()=>this._declarationOrder+i,e]}addListener(t,e){return this.seriesListeners.addListener(t,e)}dispatch(t,e){return this.seriesListeners.dispatch(t,e)}addChartEventListeners(){}destroy(){this.ctx.seriesStateManager.deregisterSeries(this),this.ctx.seriesLayerManager.releaseGroup(this)}getDirectionValues(t,e){const i=this.resolveKeyDirection(t),n=null==e?void 0:e[i],o=[];if(!n)return o;const r=(...t)=>{for(const e of t)Array.isArray(e)?r(...e):"object"==typeof e?r(...Object.values(e)):o.push(e)};return r(...n.map(t=>this[t])),o}getKeys(t){return this.getDirectionValues(t,this.directionKeys)}getNames(t){return this.getDirectionValues(t,this.directionNames)}resolveKeyDirection(t){return t}getDomain(t){var e;const i=this.getSeriesDomain(t);return(null!==(e=this.dispatch("data-getDomain",{direction:t}))&&void 0!==e?e:[]).reduce((t,e)=>t.concat(e),i)}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){this.ctx.seriesStateManager.registerSeries(this)}getOpacity(){const{dimOpacity:t=1,enabled:e=!0}=this.highlightStyle.series;if(!e||1===t)return 1;switch(this.isItemIdHighlighted()){case Iu.None:case Iu.This:return 1;case Iu.Other:default:return t}}getStrokeWidth(t){const{strokeWidth:e,enabled:i=!0}=this.highlightStyle.series;if(!i||void 0===e)return t;switch(this.isItemIdHighlighted()){case Iu.This:return e;case Iu.None:case Iu.Other:return t}}isItemIdHighlighted(){var t,e;const{series:i}=null!==(e=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight())&&void 0!==e?e:{};return null==i?Iu.None:i!==this?Iu.Other:Iu.This}getModuleTooltipParams(t){var e;return(null!==(e=this.dispatch("tooltip-getParams",{datum:t}))&&void 0!==e?e:[]).reduce((t,e)=>Object.assign(Object.assign({},e),t),{})}pickNode(t,e){const{pickModes:i,visible:n,rootGroup:o}=this;if(n&&o.visible)for(const n of i){if(e&&!e.includes(n))continue;let i;switch(n){case Lu.EXACT_SHAPE_MATCH:i=this.pickNodeExactShape(t);break;case Lu.NEAREST_BY_MAIN_AXIS_FIRST:case Lu.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST:i=this.pickNodeMainAxisFirst(t,n===Lu.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST);break;case Lu.NEAREST_NODE:i=this.pickNodeClosestDatum(t)}if(i)return{pickMode:n,match:i.datum,distance:i.distance}}}pickNodeExactShape(t){const e=this.contentGroup.pickNode(t.x,t.y);return e&&{datum:e.datum,distance:0}}pickNodeClosestDatum(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeMainAxisFirst(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(t,e){this.fireEvent(new this.NodeClickEvent("nodeClick",t,e,this))}fireNodeDoubleClickEvent(t,e){this.fireEvent(new this.NodeClickEvent("nodeDoubleClick",t,e,this))}toggleSeriesItem(t,e){this.visible=e,this.nodeDataRefresh=!0,this.dispatch("visibility-changed",{itemId:t,enabled:e})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return Object.assign(Object.assign({},this.ctx),{series:this})}getLabelText(t,e,i=String){var n;return t.formatter&&null!==(n=this.ctx.callbackCache.call(t.formatter,Object.assign({seriesId:this.id},e)))&&void 0!==n?n:i(e.value)}getMarkerStyle(t,e,i=t.getStyle()){var n,o;const r=Xd({size:null!==(o=null===(n=e.datum.point)||void 0===n?void 0:n.size)&&void 0!==o?o:0},i);if(t.formatter){return Xd(this.ctx.callbackCache.call(t.formatter,Object.assign(Object.assign(Object.assign({seriesId:this.id},r),e),{datum:e.datum.datum})),r)}return r}updateMarkerStyle(t,e,i,n=e.getStyle(),{applyTranslation:o=!0}={}){const{point:r}=i.datum,s=this.getMarkerStyle(e,i,n),a=this.visible&&s.size>0&&r&&!isNaN(r.x)&&!isNaN(r.y);o?t.setProperties(Object.assign(Object.assign({visible:a},s),{translationX:null==r?void 0:r.x,translationY:null==r?void 0:r.y})):t.setProperties(Object.assign({visible:a},s)),"function"!=typeof e.shape||t.dirtyPath||(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())}getMinRect(){}checkResize(t){const e={seriesRectWidth:null==t?void 0:t.width,seriesRectHeight:null==t?void 0:t.height},i=null!=za(this.nodeDataDependencies,e);return i&&(this.nodeDataDependencies=e,this.markNodeDataDirty()),i}}function Xu({id:t},e,i,n){id(t,e,i,n,{opacity:0},{opacity:1},$c)}function qu({id:t},e,i,n){id(t,e,i,n,{opacity:1},{opacity:0},$c)}function $u(t){return{opacity:1}}Yu.highlightedZIndex=1e12,ba([dl(El),Sa("design:type",Object)],Yu.prototype,"id",void 0),ba([dl(Cl),Sa("design:type",Object)],Yu.prototype,"_visible",void 0),ba([dl(Cl),Sa("design:type",Object)],Yu.prototype,"showInLegend",void 0),ba([dl(El),Sa("design:type",Object)],Yu.prototype,"cursor",void 0),ba([dl(oc),Sa("design:type",Object)],Yu.prototype,"nodeClickRange",void 0),ba([jc({changeValue:function(t,e){this.onSeriesGroupingChange(e,t)}}),Sa("design:type",Object)],Yu.prototype,"seriesGrouping",void 0);const Zu={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function Ju(t,e=new Date(t.getFullYear(),0,1)){const i=t.getTimezoneOffset()-e.getTimezoneOffset(),n=t.getTime()-e.getTime()+6e4*i;return Math.floor(n/864e5)}function Qu(t,e){const i=(e-new Date(t.getFullYear(),0,1).getDay()+7)%7,n=new Date(t.getFullYear(),0,i+1);return n<=t?Math.floor(Ju(t,n)/7)+1:0}const th={a:t=>Zu.shortDays[t.getDay()],A:t=>Zu.days[t.getDay()],b:t=>Zu.shortMonths[t.getMonth()],B:t=>Zu.months[t.getMonth()],c:"%x, %X",d:(t,e)=>ih(t.getDate(),2,null!=e?e:"0"),e:"%_d",f:(t,e)=>ih(1e3*t.getMilliseconds(),6,null!=e?e:"0"),H:(t,e)=>ih(t.getHours(),2,null!=e?e:"0"),I:(t,e)=>{const i=t.getHours()%12;return 0===i?"12":ih(i,2,null!=e?e:"0")},j:(t,e)=>ih(Ju(t)+1,3,null!=e?e:"0"),m:(t,e)=>ih(t.getMonth()+1,2,null!=e?e:"0"),M:(t,e)=>ih(t.getMinutes(),2,null!=e?e:"0"),L:(t,e)=>ih(t.getMilliseconds(),3,null!=e?e:"0"),p:t=>t.getHours()<12?"AM":"PM",Q:t=>String(t.getTime()),s:t=>String(Math.floor(t.getTime()/1e3)),S:(t,e)=>ih(t.getSeconds(),2,null!=e?e:"0"),u:t=>{let e=t.getDay();return e<1&&(e+=7),String(e%7)},U:(t,e)=>ih(Qu(t,0),2,null!=e?e:"0"),V:(t,e)=>ih(function t(e,i=e.getFullYear()){const n=new Date(i,0,1).getDay(),o=new Date(i,0,(4-n+7)%7-3+1);return o<=e?Math.floor(Ju(e,o)/7)+1:t(e,i-1)}(t),2,null!=e?e:"0"),w:(t,e)=>ih(t.getDay(),2,null!=e?e:"0"),W:(t,e)=>ih(Qu(t,1),2,null!=e?e:"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(t,e)=>ih(t.getFullYear()%100,2,null!=e?e:"0"),Y:(t,e)=>ih(t.getFullYear(),4,null!=e?e:"0"),Z:t=>function(t){const e=t.getTimezoneOffset(),i=Math.abs(e);return`${e>0?"-":"+"}${ih(Math.floor(i/60),2,"0")}${ih(Math.floor(i%60),2,"0")}`}(t),"%":()=>"%"},eh={_:" ",0:"0","-":""};function ih(t,e,i){const n=String(Math.floor(t));return n.length>=e?n:`${i.repeat(e-n.length)}${n}`}function nh(t){const e=[];for(;t.length>0;){let i=t.indexOf("%");if(0!==i){const n=i>0?t.substring(0,i):t;e.push(n)}if(i<0)break;const n=t[i+1],o=eh[n];null!=o&&i++;const r=t[i+1],s=th[r];if("function"==typeof s)e.push([s,o]);else if("string"==typeof s){const t=nh(s);e.push([t,o])}else e.push(`${null!=o?o:""}${r}`);t=t.substring(i+2)}return t=>{const i="number"==typeof t?new Date(t):t;return e.map(t=>"string"==typeof t?t:t[0](i,t[1])).join("")}}const oh=/(#\{(.*?)\})/g;function rh(t,e,i){return t.replace(oh,(function(...t){const n=t[2],[o,r]=n.split(":"),s=e[o];if("number"==typeof s){const t=r&&i&&i[r];if(t){const{locales:e,options:i}=t;return s.toLocaleString(e,i)}return String(s)}if(s instanceof Date){const t=r&&i&&i[r];if("string"==typeof t){return nh(t)(s)}return s.toDateString()}return"string"==typeof s||(null==s?void 0:s.toString)?String(s):""}))}function sh(t,e){const i=t.createElement("style");i.innerHTML=e,t.head.insertBefore(i,t.head.querySelector("style"))}function ah(t,e){var i,n,o;if("string"==typeof t)return t;const{content:r=(null!==(i=null==e?void 0:e.content)&&void 0!==i?i:""),title:s=(null==e?void 0:e.title),color:a=(null!==(n=null==e?void 0:e.color)&&void 0!==n?n:"white"),backgroundColor:l=(null!==(o=null==e?void 0:e.backgroundColor)&&void 0!==o?o:"#888")}=t;return`${s?`<div class="ag-chart-tooltip-title"\n        style="color: ${a}; background-color: ${l}">${s}</div>`:""}${r?`<div class="ag-chart-tooltip-content">${r}</div>`:""}`}const lh=["pointer","node"],ch=hl(t=>lh.includes(t),"expecting a position type keyword such as 'pointer' or 'node'");class dh{constructor(){this.type="pointer",this.xOffset=0,this.yOffset=0}}ba([dl(ch),Sa("design:type",String)],dh.prototype,"type",void 0),ba([dl(Fl()),Sa("design:type",Number)],dh.prototype,"xOffset",void 0),ba([dl(Fl()),Sa("design:type",Number)],dh.prototype,"yOffset",void 0);class uh{constructor(t,e,i,n){this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.lastVisibilityChange=Date.now(),this.position=new dh,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=n,this.window=i;const o=e.createElement("div");if(this.element=this.tooltipRoot.appendChild(o),this.element.classList.add("ag-chart-tooltip"),this.canvasElement=t,"undefined"!=typeof IntersectionObserver){const t=new IntersectionObserver(t=>{for(const e of t)e.target===this.canvasElement&&0===e.intersectionRatio&&this.toggle(!1)},{root:this.tooltipRoot});t.observe(this.canvasElement),this.observer=t}uh.tooltipDocuments.indexOf(e)<0&&(sh(e,'\n.ag-chart-tooltip {\n    transition: transform 0.1s ease;\n    display: table;\n    position: fixed;\n    left: 0px;\n    top: 0px;\n    white-space: nowrap;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: rgb(70, 70, 70);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);\n}\n\n.ag-chart-tooltip-no-interaction {\n    pointer-events: none;\n    user-select: none;\n}\n\n.ag-chart-tooltip-no-animation {\n    transition: none !important;\n}\n\n.ag-chart-tooltip-hidden {\n    visibility: hidden;\n}\n\n.ag-chart-tooltip-title {\n    position: relative;\n    padding: 8px 14px;\n    border-top-left-radius: 2px;\n    border-top-right-radius: 2px;\n    color: white;\n    background-color: #888888;\n    z-index: 1;\n}\n\n.ag-chart-tooltip-title:only-child {\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n}\n\n.ag-chart-tooltip-content {\n    padding: 6px 14px;\n    line-height: 1.7em;\n    background: white;\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n    border: 1px solid rgba(0, 0, 0, 0.15);\n    overflow: hidden;\n}\n\n.ag-chart-tooltip-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid #d9d9d9;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-tooltip-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: calc(100% - 1px);\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid white;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-tooltip.ag-chart-dark-tooltip {\n    color: white;\n    background: #15181c;\n}\n\n.ag-chart-tooltip.ag-chart-dark-tooltip .ag-chart-tooltip-content {\n    border-color: rgba(255, 255, 255, 0.15);\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n'),uh.tooltipDocuments.push(e))}destroy(){const{parentNode:t}=this.element;t&&t.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)}isVisible(){const{element:t}=this;return!t.classList.contains("ag-chart-tooltip-hidden")}updateClass(t,e){const{element:i,class:n,lastClass:o,enableInteraction:r,lastVisibilityChange:s}=this,a=this.isVisible(),l=!!t;let c=1/0;if(a!==l){const t=Date.now();c=t-s,this.lastVisibilityChange=t}const d=(t,e)=>{const n="ag-chart-tooltip-"+t;e?i.classList.add(n):i.classList.remove(n)};c>5&&d("no-animation",!a&&l&&c>100),d("no-interaction",!r),d("hidden",!t),d("arrow",!!e),n!==o&&(o&&i.classList.remove(o),n&&i.classList.add(n),this.lastClass=n)}show(t,e,i=!1){var n,o,r,s,a,l,c;const{element:d,canvasElement:u}=this;if(void 0!==e)d.innerHTML=e;else if(!d.innerHTML)return void this.toggle(!1);const h=(t,e,i)=>Math.max(Math.min(e,i),t),p=null!==(o=null===(n=t.position)||void 0===n?void 0:n.xOffset)&&void 0!==o?o:0,f=null!==(s=null===(r=t.position)||void 0===r?void 0:r.yOffset)&&void 0!==s?s:0,g=u.getBoundingClientRect(),v=g.left+t.offsetX-d.clientWidth/2+p,y=g.top+t.offsetY-d.clientHeight-8+f,m=this.getWindowBoundingBox(),b=m.x+m.width-d.clientWidth-1,S=m.y+m.height-d.clientHeight,x=h(m.x,v,b),C=h(m.y,y,S),w=!(x!==v||C!==y)&&!p&&!f,E=null!==(l=null!==(a=t.showArrow)&&void 0!==a?a:this.showArrow)&&void 0!==l?l:w;if(this.updateShowArrow(E),d.style.transform=`translate(${Math.round(x)}px, ${Math.round(C)}px)`,this.enableInteraction=null!==(c=t.enableInteraction)&&void 0!==c&&c,this.delay>0&&!i)return this.toggle(!1),void(this.showTimeout=this.window.setTimeout(()=>{this.toggle(!0)},this.delay));this.toggle(!0)}getWindowBoundingBox(){return new Sc(0,0,this.window.innerWidth,this.window.innerHeight)}toggle(t){t||this.window.clearTimeout(this.showTimeout),this.updateClass(t,this._showArrow)}pointerLeftOntoTooltip(t){var e;if(!this.enableInteraction)return!1;const i=null===(e=t.sourceEvent.relatedTarget)||void 0===e?void 0:e.classList,n=Boolean(["","-title","-content"].filter(t=>null==i?void 0:i.contains("ag-chart-tooltip"+t)));return void 0!==i&&n}updateShowArrow(t){this._showArrow=t}}uh.tooltipDocuments=[],ba([dl(Cl),Sa("design:type",Boolean)],uh.prototype,"enabled",void 0),ba([dl(wl),Sa("design:type",Boolean)],uh.prototype,"showArrow",void 0),ba([dl(Ol),Sa("design:type",String)],uh.prototype,"class",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],uh.prototype,"delay",void 0),ba([dl(oc),Sa("design:type",Object)],uh.prototype,"range",void 0);class hh{constructor(){this.enabled=!1}}ba([dl(Cl),Sa("design:type",Object)],hh.prototype,"enabled",void 0);class ph{constructor(){this.enabled=!0,this.showArrow=void 0,this.format=void 0,this.renderer=void 0,this.interaction=new hh,this.position=new dh}toTooltipHtml(t,e,i){var n,o;const r=null!==(n=null==i?void 0:i.format)&&void 0!==n?n:this.format,s=null!==(o=null==i?void 0:i.renderer)&&void 0!==o?o:this.renderer;return r?ah({content:rh(r,e)},t):s?ah(s(e),t):ah(t)}}function fh(t,e,i,n){const o=[i.convert(0),i.convert(1)],r=[n.convert(0),n.convert(1)],s=Math.PI/-2+tl(e);return{nodes:{toFn:(t,e,i,{prevLive:n})=>{var r,a;let{startAngle:l,endAngle:c,innerRadius:d,outerRadius:u}=e;const{stroke:h,fill:p}=e.sectorFormat;if("removed"===i&&n?(l=null===(r=n.datum)||void 0===r?void 0:r.endAngle,c=null===(a=n.datum)||void 0===a?void 0:a.endAngle):"removed"!==i||n||(l=s,c=s),"removed"===i){const t=(({radius:t})=>({innerRadius:o[0],outerRadius:o[0]+(o[1]-o[0])*t}))(e);d=t.innerRadius,u=t.outerRadius}return{startAngle:l,endAngle:c,outerRadius:u,innerRadius:d,stroke:h,fill:p}},fromFn:(e,i,n,{prevFromProps:o})=>{var a,l,c,d,u,h;let{startAngle:p,endAngle:f,innerRadius:g,outerRadius:v}=e,{fill:y,stroke:m}=i.sectorFormat;if("unknown"===n||"added"===n&&!o?(p=s,f=s,g=i.innerRadius,v=i.outerRadius):"added"===n&&o&&(p=null!==(a=o.endAngle)&&void 0!==a?a:s,f=null!==(l=o.endAngle)&&void 0!==l?l:s,g=null!==(c=o.innerRadius)&&void 0!==c?c:i.innerRadius,v=null!==(d=o.outerRadius)&&void 0!==d?d:i.outerRadius),"added"===n&&!t){const t=(({radius:t})=>({innerRadius:r[0],outerRadius:r[0]+(r[1]-r[0])*t}))(i);g=t.innerRadius,v=t.outerRadius}return"updated"===n&&(y=null!==(u=e.fill)&&void 0!==u?u:y,m=null!==(h=e.stroke)&&void 0!==h?h:m),{startAngle:p,endAngle:f,innerRadius:g,outerRadius:v,fill:y,stroke:m}}},innerCircle:{fromFn:(t,e)=>{var i,n,o;return{size:null!==(o=null!==(n=null===(i=t.previousDatum)||void 0===i?void 0:i.radius)&&void 0!==n?n:t.size)&&void 0!==o?o:0}},toFn:(t,e)=>{var i;return{size:null!==(i=e.radius)&&void 0!==i?i:0}}}}}function gh(t,e){return{startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,fill:e.sectorFormat.fill,stroke:e.sectorFormat.stroke}}function vh(t,e){const i=Jc(t),n=i?t:[],o=i?[]:t;for(const t of o){for(const i of t.nodes()){const t=e(i,i.datum);i.setProperties(t)}t.cleanup()}for(const t of n){const i=e(t,t.datum);t.setProperties(i)}}ba([dl(Cl),Sa("design:type",Object)],ph.prototype,"enabled",void 0),ba([dl(wl),Sa("design:type",Boolean)],ph.prototype,"showArrow",void 0),ba([dl(Ol),Sa("design:type",String)],ph.prototype,"format",void 0),ba([dl(xl),Sa("design:type",Function)],ph.prototype,"renderer",void 0);var yh,mh=Object.freeze({__proto__:null,resetMotion:vh});class bh{constructor(t,e,i){this.states=e,this.preTransitionCb=i,this.debug=_a.create(!0,"animation"),this.state=t,this.debug(`%c${this.constructor.name} | init -> ${t}`,"color: green")}transition(t,e){var i,n;const o=this.states[this.state],r=null==o?void 0:o[t];if(!r)return void this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${this.state}`,"color: grey");let s=this.state;return"string"==typeof r?s=r:"object"==typeof r&&(s=r.target),this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${s}`,"color: green"),null===(i=this.preTransitionCb)||void 0===i||i.call(this,this.state,s),this.state=s,"function"==typeof r?r(e):"object"==typeof r&&(null===(n=r.action)||void 0===n||n.call(r,e)),this.state}}class Sh extends Yu{isContinuous(){var t,e;return{isContinuousX:Od.is(null===(t=this.axes[hc.X])||void 0===t?void 0:t.scale),isContinuousY:Od.is(null===(e=this.axes[hc.Y])||void 0===e?void 0:e.scale)}}requestDataModel(t,e,i){var n;return xa(this,void 0,void 0,(function*(){const o=i.props,r=null!==(n=this.dispatch("data-prerequest",this.isContinuous()))&&void 0!==n?n:[];for(const t of r)o.push(...t);const{dataModel:s,processedData:a}=yield t.request(this.id,null!=e?e:[],Object.assign(Object.assign({},i),{props:o}));return this.dataModel=s,this.processedData=a,this.dispatch("data-processed",{dataModel:s,processedData:a}),{dataModel:s,processedData:a}}))}isProcessedDataAnimatable(){var t,e;const i=null===(e=null===(t=this.processedData)||void 0===t?void 0:t.reduced)||void 0===e?void 0:e.animationValidation;if(!i)return!0;const{orderedKeys:n,uniqueKeys:o}=i;return!!n&&!!o}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}}class xh extends Sh{constructor(t){var{useLabelLayer:e=!1,pickModes:i=[Lu.EXACT_SHAPE_MATCH],canHaveAxes:n=!1,animationResetFns:o}=t,r=ma(t,["useLabelLayer","pickModes","canHaveAxes","animationResetFns"]);super(Object.assign(Object.assign({},r),{useLabelLayer:e,pickModes:i,contentGroupVirtual:!1,directionKeys:{[hc.X]:["angleKey"],[hc.Y]:["radiusKey"]},directionNames:{[hc.X]:["angleName"],[hc.Y]:["radiusName"]},canHaveAxes:n})),this.sectorGroup=this.contentGroup.appendChild(new kd),this.itemSelection=Md.select(this.sectorGroup,()=>this.nodeFactory(),!1),this.labelSelection=Md.select(this.labelGroup,Nc,!1),this.highlightSelection=Md.select(this.highlightGroup,()=>this.nodeFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.sectorGroup.zIndexSubOrder=[()=>this._declarationOrder,1],this.animationResetFns=o,this.animationState=new bh("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)}},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),highlightMarkers:t=>this.animateReadyHighlightMarkers(t),resize:t=>this.animateReadyResize(t)},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)}},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)}}},()=>this.checkProcessedDataAnimatable())}getLabelData(){return[]}computeLabelsBBox(t,e){return null}resetAllAnimation(){var t;const{item:e,label:i}=null!==(t=this.animationResetFns)&&void 0!==t?t:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&vh([this.itemSelection,this.highlightSelection],e),i&&vh([this.labelSelection],i),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(t){var e;const{item:i}=null!==(e=this.animationResetFns)&&void 0!==e?e:{};i&&vh([this.highlightSelection],i)}animateReadyHighlightMarkers(t){}animateReadyResize(t){this.resetAllAnimation()}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t){return{seriesRect:t}}}class Ch extends Wu{constructor(t,e,i,n){super(t,e,i,n),this.angleKey=n.angleKey,this.radiusKey=n.radiusKey,this.calloutLabelKey=n.calloutLabelKey,this.sectorLabelKey=n.sectorLabelKey}}!function(t){t[t.Sector=0]="Sector",t[t.Callout=1]="Callout",t[t.Label=2]="Label"}(yh||(yh={}));class wh extends yu{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}}ba([dl(Fl(0)),Sa("design:type",Object)],wh.prototype,"offset",void 0),ba([dl(Fl(0)),Sa("design:type",Object)],wh.prototype,"minAngle",void 0),ba([dl(Fl(0)),Sa("design:type",Object)],wh.prototype,"minSpacing",void 0),ba([dl(Fl(0)),Sa("design:type",Object)],wh.prototype,"maxCollisionOffset",void 0),ba([dl(Cl),Sa("design:type",Object)],wh.prototype,"avoidCollisions",void 0);class Eh extends yu{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}}ba([dl(Fl()),Sa("design:type",Object)],Eh.prototype,"positionOffset",void 0),ba([dl(Fl(0,1)),Sa("design:type",Object)],Eh.prototype,"positionRatio",void 0);class Oh{constructor(){this.length=10,this.strokeWidth=1}}ba([dl(Ll),Sa("design:type",Array)],Oh.prototype,"colors",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],Oh.prototype,"length",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],Oh.prototype,"strokeWidth",void 0);class Dh extends Wc{constructor(){super(...arguments),this.showInLegend=!1}}ba([dl(Cl),Sa("design:type",Object)],Dh.prototype,"showInLegend",void 0);class Ah extends yu{constructor(){super(...arguments),this.text="",this.margin=2}}ba([dl(El),Sa("design:type",Object)],Ah.prototype,"text",void 0),ba([dl(Fl()),Sa("design:type",Object)],Ah.prototype,"margin",void 0);class Th{constructor(){this.fill="transparent",this.fillOpacity=1}}ba([dl(Rl),Sa("design:type",Object)],Th.prototype,"fill",void 0),ba([dl(_l(0,1)),Sa("design:type",Object)],Th.prototype,"fillOpacity",void 0);class kh extends xh{constructor(t){super({moduleCtx:t,useLabelLayer:!0,animationResetFns:{item:gh,label:$u}}),this.previousRadiusScale=new Dd,this.radiusScale=new Dd,this.backgroundGroup=this.rootGroup.appendChild(new kd({name:this.id+"-background",layer:!0,zIndex:xu.SERIES_BACKGROUND_ZINDEX})),this.innertCircleGroup=this.backgroundGroup.appendChild(new kd({name:this.id+"-innerCircle"})),this.nodeData=[],this.seriesItemEnabled=[],this.title=void 0,this.calloutLabel=new wh,this.sectorLabel=new Eh,this.calloutLine=new Oh,this.tooltip=new ph,this.angleKey="",this.angleName="",this.innerLabels=[],this.innerCircle=void 0,this.radiusKey=void 0,this.radiusName=void 0,this.radiusMin=void 0,this.radiusMax=void 0,this.calloutLabelKey=void 0,this.calloutLabelName=void 0,this.sectorLabelKey=void 0,this.sectorLabelName=void 0,this.legendItemKey=void 0,this.fills=Object.values(Eu),this.strokes=Object.values(Ou),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.innerRadiusOffset=0,this.innerRadiusRatio=1,this.strokeWidth=1,this.shadow=void 0,this.highlightStyle=new Ku,this.surroundingRadius=void 0,this.NodeClickEvent=Ch,this.angleScale=new Dd,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(t=>t+Math.PI/2);const e=new kd({name:"pieCalloutLabels"}),i=new kd({name:"pieSectorLabels"}),n=new kd({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(i),this.labelGroup.append(n),this.calloutLabelSelection=Md.select(e,kd),this.sectorLabelSelection=Md.select(i,Nc),this.innerLabelsSelection=Md.select(n,Nc),this.innerCircleSelection=Md.select(this.innertCircleGroup,wu)}addChartEventListeners(){var t;null===(t=this.ctx.chartEventManager)||void 0===t||t.addListener("legend-item-click",t=>this.onLegendItemClick(t))}visibleChanged(){this.processSeriesItemEnabled()}processSeriesItemEnabled(){var t;const{data:e,visible:i}=this;this.seriesItemEnabled=null!==(t=null==e?void 0:e.map(()=>i))&&void 0!==t?t:[]}nodeFactory(){return new zd}getSeriesDomain(t){return t===hc.X?this.angleScale.domain:this.radiusScale.domain}processData(t){var e,i;return xa(this,void 0,void 0,(function*(){let{data:n}=this;const{angleKey:o,radiusKey:r,calloutLabelKey:s,sectorLabelKey:a,legendItemKey:l,seriesItemEnabled:c}=this;if(null==o||null==n)return;const d=!this.ctx.animationManager.isSkipped(),u=[],h=[];l?u.push(Gu(this,l,!1,{id:"legendItemKey"})):s?u.push(Gu(this,s,!1,{id:"calloutLabelKey"})):a&&u.push(Gu(this,a,!1,{id:"sectorLabelKey"})),r&&h.push(function(t,e,i={}){const{min:n=-1/0,max:o=1/0}=i,r=ma(i,["min","max"]);return Object.assign({scopes:[t.id],type:"value",property:e,valueType:"range",validation:Fu,processor:()=>t=>"number"!=typeof t||isNaN(t)?t:Math.min(Math.max(t,n),o)},r)}(this,r,{id:"radiusValue",min:null!==(e=this.radiusMin)&&void 0!==e?e:0,max:this.radiusMax}),Bu(this,r,!0,{id:"radiusRaw"}),du(this,{id:"radiusValue"},[0,1],1,null!==(i=this.radiusMin)&&void 0!==i?i:0,this.radiusMax)),s&&h.push(Bu(this,s,!1,{id:"calloutLabelValue"})),a&&h.push(Bu(this,a,!1,{id:"sectorLabelValue"})),l&&h.push(Bu(this,l,!1,{id:"legendItemValue"})),d&&this.processedData&&u.length>0&&h.push(gu(this.processedData)),h.push(uu(this)),n=n.map((t,e)=>c[e]?t:Object.assign(Object.assign({},t),{[o]:0})),yield this.requestDataModel(t,n,{props:[...u,Vu(this,o,!0,{id:"angleValue",onlyPositive:!0}),Bu(this,o,!0,{id:"angleRaw"}),du(this,{id:"angleValue"},[0,1],0,0),...h]}),this.animationState.transition("updateData")}))}maybeRefreshNodeData(){return xa(this,void 0,void 0,(function*(){if(!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=yield this.createNodeData();this.nodeData=t,this.nodeDataRefresh=!1}))}getProcessedDataIndexes(t){return{angleIdx:t.resolveProcessedDataIndexById(this,"angleValue").index,radiusIdx:this.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue").index:-1,calloutLabelIdx:this.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,sectorLabelIdx:this.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,legendItemIdx:this.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue").index:-1}}createNodeData(){return xa(this,void 0,void 0,(function*(){const{id:t,processedData:e,dataModel:i,rotation:n,angleScale:o}=this;if(!e||!i||"ungrouped"!==e.type)return[];const{angleIdx:r,radiusIdx:s,calloutLabelIdx:a,sectorLabelIdx:l,legendItemIdx:c}=this.getProcessedDataIndexes(i);let d=0;const u=e.data.map((t,e)=>{var i;const{datum:u,values:h}=t,p=h[r],f=o.convert(d)+tl(n);d=p;const g=o.convert(d)+tl(n),v=Math.abs(g-f),y=f+v/2,m=h[r+1],b=s>=0&&null!==(i=h[s])&&void 0!==i?i:1,S=s>=0?h[s+1]:void 0,x=c>=0?h[c]:void 0,C=this.getLabels(u,y,v,!0,h[a],h[l],x),w=this.getSectorFormat(u,e,!1);return Object.assign({itemId:e,series:this,datum:u,index:e,angleValue:m,midAngle:y,midCos:Math.cos(y),midSin:Math.sin(y),startAngle:f,endAngle:g,sectorFormat:w,radiusValue:S,radius:b,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(b),0),legendItemValue:x},C)});return[{itemId:t,nodeData:u,labelData:u}]}))}getLabels(t,e,i,n,o,r,s){const{calloutLabel:a,sectorLabel:l,legendItemKey:c}=this,d=!n||a.enabled?this.calloutLabelKey:void 0,u=!n||l.enabled?this.sectorLabelKey:void 0;if(!d&&!u&&!c)return{};const h={datum:t,angleKey:this.angleKey,angleName:this.angleName,radiusKey:this.radiusKey,radiusName:this.radiusName,calloutLabelKey:this.calloutLabelKey,calloutLabelName:this.calloutLabelName,sectorLabelKey:this.sectorLabelKey,sectorLabelName:this.sectorLabelName,legendItemKey:this.legendItemKey},p={};return d&&i>tl(a.minAngle)&&(p.calloutLabel=Object.assign(Object.assign({},this.getTextAlignment(e)),{text:this.getLabelText(a,Object.assign(Object.assign({},h),{value:o})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),u&&(p.sectorLabel={text:this.getLabelText(l,Object.assign(Object.assign({},h),{value:r}))}),null!=c&&null!=s&&(p.legendItem={key:c,text:s}),p}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Qa(t)- -3*Math.PI/4;return e[ll(Math.floor(i/(Math.PI/2)),e.length)]}getSectorFormat(t,e,i){var n,o,r,s,a;const{angleKey:l,radiusKey:c,fills:d,strokes:u,formatter:h,id:p,ctx:{callbackCache:f,highlightManager:g}}=this,v=g.getActiveHighlight(),y=i&&(null==v?void 0:v.series)===this&&e===v.itemId,{fill:m,fillOpacity:b,stroke:S,strokeWidth:x,strokeOpacity:C}=Xd(y&&this.highlightStyle.item,{fill:d[e%d.length],fillOpacity:this.fillOpacity,stroke:u[e%u.length],strokeWidth:this.getStrokeWidth(this.strokeWidth),strokeOpacity:this.getOpacity()});let w;return h&&(w=f.call(h,{datum:t,angleKey:l,radiusKey:c,fill:m,stroke:S,fills:d,strokes:u,strokeWidth:x,highlighted:y,seriesId:p})),{fill:null!==(n=null==w?void 0:w.fill)&&void 0!==n?n:m,fillOpacity:null!==(o=null==w?void 0:w.fillOpacity)&&void 0!==o?o:b,stroke:null!==(r=null==w?void 0:w.stroke)&&void 0!==r?r:S,strokeWidth:null!==(s=null==w?void 0:w.strokeWidth)&&void 0!==s?s:x,strokeOpacity:null!==(a=null==w?void 0:w.strokeOpacity)&&void 0!==a?a:C}}getInnerRadius(){const{radius:t,innerRadiusRatio:e,innerRadiusOffset:i}=this,n=t*e+i;return n===t||n<0?0:n}getOuterRadius(){return Math.max(this.radius*this.outerRadiusRatio+this.outerRadiusOffset,0)}updateRadiusScale(t){const e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e),this.nodeData=this.nodeData.map(t=>{var{radius:e}=t,i=ma(t,["radius"]);return Object.assign(Object.assign({},i),{radius:e,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(e),0)})})}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);if(0===i)return NaN;return-i-(2+(null!==(e=null===(t=this.title)||void 0===t?void 0:t.spacing)&&void 0!==e?e:0))-Math.max(0,-i)}update({seriesRect:t}){return xa(this,void 0,void 0,(function*(){const{title:e}=this,i={seriesRectWidth:null==t?void 0:t.width,seriesRectHeight:null==t?void 0:t.height},n=null!=za(this.nodeDataDependencies,i);if(n&&(this.nodeDataDependencies=i),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(n),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),e){const t=this.getTitleTranslationY(),i=e.node.computeBBox();e.node.visible=e.enabled&&isFinite(t)&&!this.bboxIntersectsSurroundingSeries(i,0,t),e.node.translationY=isFinite(t)?t:0}this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(t)}))}updateTitleNodes(){var t,e;const{title:i,oldTitle:n}=this;n!==i&&(n&&(null===(t=this.labelGroup)||void 0===t||t.removeChild(n.node)),i&&(i.node.textBaseline="bottom",null===(e=this.labelGroup)||void 0===e||e.appendChild(i.node)),this.oldTitle=i)}updateNodeMidPoint(){this.nodeData.forEach(t=>{const e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,e),y:t.midSin*Math.max(0,e)}})}updateSelections(){return xa(this,void 0,void 0,(function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()}))}updateGroupSelection(){return xa(this,void 0,void 0,(function*(){const{itemSelection:t,highlightSelection:e,calloutLabelSelection:i,sectorLabelSelection:n,innerLabelsSelection:o}=this,r=(t,e)=>{let i=this.nodeData;e&&(i=i.map(t=>Object.assign(Object.assign({},t),{sectorFormat:Object.assign({},t.sectorFormat)}))),t.update(i),this.ctx.animationManager.isSkipped()&&t.cleanup()};r(t,!1),r(e,!0),i.update(this.nodeData,t=>{const e=new Rd;e.tag=yh.Callout,e.pointerEvents=Cc.None,t.appendChild(e);const i=new Nc;i.tag=yh.Label,i.pointerEvents=Cc.None,t.appendChild(i)}),n.update(this.nodeData,t=>{t.pointerEvents=Cc.None}),o.update(this.innerLabels,t=>{t.pointerEvents=Cc.None})}))}updateInnerCircleSelection(){const{innerCircle:t}=this;let e=0;const i=this.getInnerRadius();if(i>0){const t=Math.min(i,this.getOuterRadius()),n=1;e=Math.ceil(2*t+n)}const n=t?[{radius:e}]:[];this.innerCircleSelection.update(n)}updateNodes(t){return xa(this,void 0,void 0,(function*(){const e=this.ctx.highlightManager.getActiveHighlight(),i=this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(null==e?void 0:e.series)===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((t,{radius:e})=>{var i,n;t.setProperties({fill:null===(i=this.innerCircle)||void 0===i?void 0:i.fill,opacity:null===(n=this.innerCircle)||void 0===n?void 0:n.fillOpacity,size:e})});const n=(t,e,i,n)=>{const o=this.getSectorFormat(e.datum,e.itemId,n);e.sectorFormat.fill=o.fill,e.sectorFormat.stroke=o.stroke;const r=this.ctx.animationManager.isSkipped();r&&(t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius),(n||r)&&(t.fill=o.fill,t.stroke=o.stroke),t.strokeWidth=o.strokeWidth,t.fillOpacity=o.fillOpacity,t.strokeOpacity=this.strokeOpacity,t.lineDash=this.lineDash,t.lineDashOffset=this.lineDashOffset,t.fillShadow=this.shadow,t.lineJoin="round"};this.itemSelection.each((t,e,i)=>n(t,e,0,!1)),this.highlightSelection.each((t,i,o)=>{const r=(null==e?void 0:e.series)===this&&t.datum.itemId===e.itemId;n(t,i,0,r),t.visible=r}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.animationState.transition("update")}))}updateCalloutLineNodes(){var t;const{calloutLine:e}=this,i=e.length,n=e.strokeWidth,o=null!==(t=e.colors)&&void 0!==t?t:this.strokes,{offset:r}=this.calloutLabel;this.calloutLabelSelection.selectByTag(yh.Callout).forEach((t,e)=>{const s=t.datum,{calloutLabel:a,outerRadius:l}=s;if((null==a?void 0:a.text)&&!a.hidden&&0!==l){t.visible=!0,t.strokeWidth=n,t.stroke=o[e%o.length],t.fill=void 0;const c=s.midCos*l,d=s.midSin*l;let u=s.midCos*(l+i),h=s.midSin*(l+i);if((a.collisionTextAlign||0!==a.collisionOffsetY)&&null!=a.box){const t=a.box;let e=u,i=h;u<t.x?e=t.x:u>t.x+t.width&&(e=t.x+t.width),h<t.y?i=t.y:h>t.y+t.height&&(i=t.y+t.height);const n=e-u,o=i-h,s=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),l=s-r;l>0&&(u+=n*l/s,h+=o*l/s)}t.x1=c,t.y1=d,t.x2=u,t.y2=h}else t.visible=!1})}getLabelOverflow(t,e,i){const n=i.x-this.centerX,o=i.x+i.width-this.centerX,r=i.y-this.centerY,s=i.y+i.height-this.centerY;let a=1;e.x+1<n?a=(e.x+e.width-n)/e.width:e.x+e.width-1>o&&(a=(o-e.x)/e.width);const l=e.y+1<r||e.y+e.height-1>s;return{textLength:1===a?t.length:Math.floor(t.length*a)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t,e=0,i=0){const{surroundingRadius:n}=this;if(null==n)return!1;const o=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],r=Math.pow(n,2);return o.some(t=>Math.pow(t.x,2)+Math.pow(t.y,2)>r)}computeCalloutLabelCollisionOffsets(){const{radiusScale:t,calloutLabel:e,calloutLine:i}=this,{offset:n,minSpacing:o}=e,r=t.convert(0),s=this.nodeData,a=this.nodeData.filter(t=>{return!(!(e=t).calloutLabel||0===e.outerRadius);var e});if(a.forEach(t=>{const e=t.calloutLabel;null!=e&&(e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0)}),a.length<=1)return;const l=a.filter(t=>t.midCos<0).sort((t,e)=>t.midSin-e.midSin),c=a.filter(t=>t.midCos>=0).sort((t,e)=>t.midSin-e.midSin),d=a.filter(t=>{var e;return t.midSin<0&&"center"===(null===(e=t.calloutLabel)||void 0===e?void 0:e.textAlign)}).sort((t,e)=>t.midCos-e.midCos),u=a.filter(t=>{var e;return t.midSin>=0&&"center"===(null===(e=t.calloutLabel)||void 0===e?void 0:e.textAlign)}).sort((t,e)=>t.midCos-e.midCos),h=new Nc,p=t=>{var e;const o=t.calloutLabel;if(null==o)return new Sc(0,0,0,0);const r=t.outerRadius+i.length+n,s=t.midCos*r,a=t.midSin*r+o.collisionOffsetY;return h.text=o.text,h.x=s,h.y=a,h.setFont(this.calloutLabel),h.setAlign({textAlign:null!==(e=o.collisionTextAlign)&&void 0!==e?e:o.textAlign,textBaseline:o.textBaseline}),h.computeBBox()},f=(t,e,i)=>{const n=p(t).grow(o/2),r=p(e).grow(o/2);if(n.x<r.x+r.width&&n.x+n.width>r.x&&("to-top"===i?n.y<r.y+r.height:n.y+n.height>r.y)){const t="to-top"===i?n.y-r.y-r.height:n.y+n.height-r.y;e.calloutLabel.collisionOffsetY=t}},g=t=>{const e=t.slice().sort((t,e)=>Math.abs(t.midSin)-Math.abs(e.midSin))[0],i=t.indexOf(e);for(let e=i-1;e>=0;e--){const i=t[e+1],n=t[e];f(i,n,"to-top")}for(let e=i+1;e<t.length;e++){const i=t[e-1],n=t[e];f(i,n,"to-bottom")}},v=t=>{const e=a.some(t=>0!==t.calloutLabel.collisionOffsetY),i=t.map(t=>p(t)),n=i.map(t=>t.clone().grow(o/2));let l=!1;for(let e=0;e<n.length&&!l;e++){const i=n[e];for(let o=e+1;o<t.length;o++){const t=n[o];if(i.collidesBBox(t)){l=!0;break}}}const c=s.map(t=>{const{startAngle:e,endAngle:i,outerRadius:n}=t;return{startAngle:e,endAngle:i,innerRadius:r,outerRadius:n}}),d=i.some(t=>c.some(e=>function(t,e){const i={x:t.x,y:t.y},n={x:t.x+t.width,y:t.y},o={x:t.x,y:t.y+t.height},r={x:t.x+t.width,y:t.y+t.height};return Gd({start:i,end:n},e)||Gd({start:o,end:r},e)}(t,e)));(l||e||d)&&t.filter(t=>"center"===t.calloutLabel.textAlign).forEach(t=>{const e=t.calloutLabel;t.midCos<0?e.collisionTextAlign="right":t.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"})};g(l),g(c),v(d),v(u)}updateCalloutLabelNodes(t){const{radiusScale:e,calloutLabel:i,calloutLine:n}=this,o=n.length,{offset:r,color:s}=i,a=new Nc;this.calloutLabelSelection.selectByTag(yh.Label).forEach(n=>{var l;const{datum:c}=n,d=c.calloutLabel,u=e.convert(c.radius),h=Math.max(0,u);if(!(null==d?void 0:d.text)||0===h||d.hidden)return void(n.visible=!1);const p=h+o+r,f=c.midCos*p,g=c.midSin*p+d.collisionOffsetY,v={textAlign:null!==(l=d.collisionTextAlign)&&void 0!==l?l:d.textAlign,textBaseline:d.textBaseline};a.text=d.text,a.x=f,a.y=g,a.setFont(this.calloutLabel),a.setAlign(v);const y=a.computeBBox();let m=d.text,b=!0;if(i.avoidCollisions){const{textLength:e,hasVerticalOverflow:i}=this.getLabelOverflow(d.text,y,t);m=d.text.length===e?d.text:d.text.substring(0,e)+"\u2026",b=!i}n.text=m,n.x=f,n.y=g,n.setFont(this.calloutLabel),n.setAlign(v),n.fill=s,n.visible=b})}computeLabelsBBox(t,e){var i;return xa(this,void 0,void 0,(function*(){const{calloutLabel:n,calloutLine:o}=this,r=o.length,{offset:s,maxCollisionOffset:a,minSpacing:l}=n;if(!n.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const c=[],d=new Nc;let u;if((null===(i=this.title)||void 0===i?void 0:i.text)&&this.title.enabled){const t=this.getTitleTranslationY();isFinite(t)&&(d.text=this.title.text,d.x=0,d.y=t,d.setFont(this.title),d.setAlign({textBaseline:"bottom",textAlign:"center"}),u=d.computeBBox(),c.push(u))}return this.nodeData.forEach(i=>{var n;const o=i.calloutLabel;if(!o||0===i.outerRadius)return null;const h=i.outerRadius+r+s,p=i.midCos*h,f=i.midSin*h+o.collisionOffsetY;d.text=o.text,d.x=p,d.y=f,d.setFont(this.calloutLabel),d.setAlign({textAlign:null!==(n=o.collisionTextAlign)&&void 0!==n?n:o.textAlign,textBaseline:o.textBaseline});const g=d.computeBBox();if(o.box=g,Math.abs(o.collisionOffsetY)>a)o.hidden=!0;else{if(u){const t=e.y-this.centerY,i=new Sc(u.x-l,t,u.width+2*l,u.y+u.height+l-t);if(g.collidesBBox(i))return void(o.hidden=!0)}if(t.hideWhenNecessary){const{textLength:t,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:n}=this.getLabelOverflow(o.text,g,e),r=o.text.length>2&&t<2;if(i||r||n)return void(o.hidden=!0)}o.hidden=!1,c.push(g)}}),0===c.length?null:Sc.merge(c)}))}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:n,fontWeight:o,fontFamily:r,positionOffset:s,positionRatio:a,color:l}=this.sectorLabel,c=e>0,d=1===this.seriesItemEnabled.filter(Boolean).length;this.sectorLabelSelection.each((t,u)=>{const{sectorLabel:h,outerRadius:p}=u;let f=!1;if(h&&0!==p){const g=e*(1-a)+p*a+s;t.fill=l,t.fontStyle=n,t.fontWeight=o,t.fontSize=i,t.fontFamily=r,t.text=h.text;!c&&d?(t.x=0,t.y=0):(t.x=u.midCos*g,t.y=u.midSin*g),t.textAlign="center",t.textBaseline="middle";const v=t.computeBBox(),y=[[v.x,v.y],[v.x+v.width,v.y],[v.x+v.width,v.y+v.height],[v.x,v.y+v.height]],{startAngle:m,endAngle:b}=u,S={startAngle:m,endAngle:b,innerRadius:e,outerRadius:p};y.every(([t,e])=>_d(t,e,S))&&(f=!0)}t.visible=f})}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each((i,n)=>{const{fontStyle:o,fontWeight:r,fontSize:s,fontFamily:a,color:l}=n;i.fontStyle=o,i.fontWeight=r,i.fontSize=s,i.fontFamily=a,i.text=n.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",t.push(i.computeBBox()),e.push(n.margin)});const i=t=>0===t?0:e[t],n=t=>t===e.length-1?0:e[t],o=t.reduce((t,e,o)=>t+e.height+i(o)+n(o),0),r=Math.max(...t.map(t=>t.width)),s=this.getInnerRadius(),a=Math.sqrt(Math.pow(r/2,2)+Math.pow(o/2,2))<=(s>0?s:this.getOuterRadius()),l=[];for(let e=0,r=-o/2;e<t.length;e++){const o=t[e].height+r+i(e);l.push(o),r=o+n(e)}this.innerLabelsSelection.each((t,e,i)=>{t.y=l[i],t.visible=a})}getDatumLegendName(t){const{angleKey:e,calloutLabelKey:i,sectorLabelKey:n,legendItemKey:o}=this,{sectorLabel:r,calloutLabel:s,legendItem:a}=t;return o&&void 0!==a?a.text:i&&i!==e&&void 0!==(null==s?void 0:s.text)?s.text:n&&n!==e&&void 0!==(null==r?void 0:r.text)?r.text:void 0}getTooltipHtml(t){var e;if(!this.angleKey)return"";const{datum:i,angleValue:n,sectorFormat:{fill:o}}=t,r=$d(null===(e=this.title)||void 0===e?void 0:e.text),s=iu(n)?al(n):String(n),a=this.getDatumLegendName(t);return this.tooltip.toTooltipHtml({title:null!=r?r:a,content:r&&a?`${a}: ${s}`:s,backgroundColor:o},{datum:i,title:r,color:o,seriesId:this.id,angleKey:this.angleKey,angleName:this.angleName,radiusKey:this.radiusKey,radiusName:this.radiusName,calloutLabelKey:this.calloutLabelKey,calloutLabelName:this.calloutLabelName,sectorLabelKey:this.sectorLabelKey,sectorLabelName:this.sectorLabelName})}getLegendData(t){var e,i,n,o,r;const{processedData:s,angleKey:a,calloutLabelKey:l,sectorLabelKey:c,legendItemKey:d,id:u,dataModel:h}=this;if(!h||!s||0===s.data.length||"category"!==t)return[];if(!(d||l&&l!==a||c&&c!==a))return[];const{calloutLabelIdx:p,sectorLabelIdx:f,legendItemIdx:g}=this.getProcessedDataIndexes(h),v=(null===(e=this.title)||void 0===e?void 0:e.showInLegend)&&this.title.text,y=[];for(let t=0;t<s.data.length;t++){const{datum:e,values:h}=s.data[t],m=[];v&&m.push(v);const b=this.getLabels(e,2*Math.PI,2*Math.PI,!1,h[p],h[f],h[g]);if(d&&void 0!==b.legendItem?m.push(b.legendItem.text):l&&l!==a&&void 0!==(null===(i=b.calloutLabel)||void 0===i?void 0:i.text)?m.push(null===(n=b.calloutLabel)||void 0===n?void 0:n.text):c&&c!==a&&void 0!==(null===(o=b.sectorLabel)||void 0===o?void 0:o.text)&&m.push(null===(r=b.sectorLabel)||void 0===r?void 0:r.text),0===m.length)continue;const S=this.getSectorFormat(e,t,!1);y.push({legendType:"category",id:u,itemId:t,seriesId:u,enabled:this.seriesItemEnabled[t],label:{text:m.join(" - ")},marker:{fill:S.fill,stroke:S.stroke,fillOpacity:this.fillOpacity,strokeOpacity:this.strokeOpacity,strokeWidth:this.strokeWidth}})}return y}onLegendItemClick(t){const{enabled:e,itemId:i,series:n}=t;n.id===this.id?this.toggleSeriesItem(i,e):"pie"===n.type&&this.toggleOtherSeriesItems(n,i,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e,i){var n,o;const{legendItemKey:r,dataModel:s}=this;if(!r||!s)return;const a=t.legendItemKey&&(null===(n=t.data)||void 0===n?void 0:n.find((t,i)=>i===e)[t.legendItemKey]);if(!a)return;const l=s.resolveProcessedDataIndexById(this,"legendItemValue").index;null===(o=this.processedData)||void 0===o||o.data.forEach(({values:t},e)=>{t[l]===a&&this.toggleSeriesItem(e,i)})}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=fh(!0,this.rotation,this.radiusScale,this.previousRadiusScale);ed(this.id,"nodes",e,[this.itemSelection,this.highlightSelection],i.nodes),ed(this.id,"innerCircle",e,[this.innerCircleSelection],i.innerCircle),Xu(this,"callout",e,[this.calloutLabelSelection]),Xu(this,"sector",e,[this.sectorLabelSelection]),Xu(this,"inner",e,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var t,e,i,n,o,r;const{itemSelection:s,highlightSelection:a,processedData:l,radiusScale:c,previousRadiusScale:d}=this,{animationManager:u}=this.ctx,h=null===(t=null==l?void 0:l.reduced)||void 0===t?void 0:t.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const p=0===(null!==(e=null==h?void 0:h.moved.length)&&void 0!==e?e:0)&&(null==h?void 0:h.addedIndices.every(t=>!h.removedIndices.includes(t))),f=(null!==(i=null==l?void 0:l.defs.keys.length)&&void 0!==i?i:0)>0,g=null===(r=null===(o=null===(n=null==l?void 0:l.reduced)||void 0===n?void 0:n.animationValidation)||void 0===o?void 0:o.uniqueKeys)||void 0===r||r;p&&f&&g||this.ctx.animationManager.skipCurrentBatch();const v=fh(!1,this.rotation,c,d);ed(this.id,"nodes",u,[s,a],v.nodes,(t,e)=>this.getDatumId(e),h),ed(this.id,"innerCircle",u,[this.innerCircleSelection],v.innerCircle),Xu(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),Xu(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),Xu(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,radiusScale:i,previousRadiusScale:n}=this,{animationManager:o}=this.ctx,r=fh(!1,this.rotation,i,n);ed(this.id,"nodes",o,[t,e],r.nodes),ed(this.id,"innerCircle",o,[this.innerCircleSelection],r.innerCircle),qu(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),qu(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),qu(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(t){var e,i,n;const{calloutLabelKey:o,sectorLabelKey:r,legendItemKey:s}=this;if(null===(n=null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.animationValidation)||void 0===n?void 0:n.uniqueKeys)return s?t[s]:o?t[o]:r?t[r]:void 0}getDatumId(t){var e;const{index:i}=t;return null!==(e=this.getDatumIdFromData(t.datum))&&void 0!==e?e:""+i}onDataChange(){this.processSeriesItemEnabled()}}kh.className="PieSeries",kh.type="pie",ba([dl(El),Sa("design:type",Object)],kh.prototype,"angleKey",void 0),ba([dl(El),Sa("design:type",Object)],kh.prototype,"angleName",void 0),ba([dl(Ol),Sa("design:type",String)],kh.prototype,"radiusKey",void 0),ba([dl(Ol),Sa("design:type",String)],kh.prototype,"radiusName",void 0),ba([dl(_l(0)),Sa("design:type",Number)],kh.prototype,"radiusMin",void 0),ba([dl(_l(0)),Sa("design:type",Number)],kh.prototype,"radiusMax",void 0),ba([dl(Ol),Sa("design:type",String)],kh.prototype,"calloutLabelKey",void 0),ba([dl(Ol),Sa("design:type",String)],kh.prototype,"calloutLabelName",void 0),ba([dl(Ol),Sa("design:type",String)],kh.prototype,"sectorLabelKey",void 0),ba([dl(Ol),Sa("design:type",String)],kh.prototype,"sectorLabelName",void 0),ba([dl(Ol),Sa("design:type",String)],kh.prototype,"legendItemKey",void 0),ba([dl(Nl),Sa("design:type",Array)],kh.prototype,"fills",void 0),ba([dl(Nl),Sa("design:type",Array)],kh.prototype,"strokes",void 0),ba([dl(Fl(0,1)),Sa("design:type",Object)],kh.prototype,"fillOpacity",void 0),ba([dl(Fl(0,1)),Sa("design:type",Object)],kh.prototype,"strokeOpacity",void 0),ba([dl($l),Sa("design:type",Array)],kh.prototype,"lineDash",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],kh.prototype,"lineDashOffset",void 0),ba([dl(xl),Sa("design:type",Function)],kh.prototype,"formatter",void 0),ba([dl(Fl(-360,360)),Sa("design:type",Object)],kh.prototype,"rotation",void 0),ba([dl(Fl()),Sa("design:type",Object)],kh.prototype,"outerRadiusOffset",void 0),ba([dl(Fl(0)),Sa("design:type",Object)],kh.prototype,"outerRadiusRatio",void 0),ba([dl(Fl()),Sa("design:type",Object)],kh.prototype,"innerRadiusOffset",void 0),ba([dl(Fl(0)),Sa("design:type",Object)],kh.prototype,"innerRadiusRatio",void 0),ba([dl(Fl(0)),Sa("design:type",Object)],kh.prototype,"strokeWidth",void 0);const Mh={constructors:{},constructedArrays:new WeakMap};const Rh={constructors:{title:Wc,subtitle:Wc,footnote:Wc,shadow:Oc,innerCircle:Th,"axes[].title":zc,"series[].innerLabels[]":Ah},allowedTypes:{"legend.pagination.marker.shape":["primitive","function"],"series[].marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}};function Ph(){return{constructors:Object.assign(Object.assign({},Rh.constructors),Mh.constructors),constructedArrays:Mh.constructedArrays,allowedTypes:Object.assign({},Rh.allowedTypes)}}class Nh extends Rc{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new Sc(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:n,stats:o}=t;if(this.dirty===pc.NONE&&!n)return void(o&&(o.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:r,y1:s,x2:a,y2:l}=this;r=this.align(r),s=this.align(s),a=this.align(a),l=this.align(l);const{fill:c,opacity:d,isRange:u}=this;if(!(!u||!c)){const{fillOpacity:t}=this;i.fillStyle=c,i.globalAlpha=d*t,i.beginPath(),i.moveTo(r,s),i.lineTo(a,s),i.lineTo(a,l),i.lineTo(r,l),i.closePath(),i.fill()}const{stroke:h,strokeWidth:p,startLine:f,endLine:g}=this;if(!(!f&&!g||!h||!p)){const{strokeOpacity:t,lineDash:e,lineDashOffset:n,lineCap:o,lineJoin:c}=this;i.strokeStyle=h,i.globalAlpha=d*t,i.lineWidth=p,e&&i.setLineDash(e),n&&(i.lineDashOffset=n),o&&(i.lineCap=o),c&&(i.lineJoin=c),i.beginPath(),f&&(i.moveTo(r,s),i.lineTo(a,s)),g&&(i.moveTo(a,l),i.lineTo(r,l)),i.stroke()}null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}Nh.className="Range",Nh.defaultStyles=Object.assign(Object.assign({},Rc.defaultStyles),{strokeWidth:1}),ba([gc({redraw:pc.MINOR}),Sa("design:type",Number)],Nh.prototype,"x1",void 0),ba([gc({redraw:pc.MINOR}),Sa("design:type",Number)],Nh.prototype,"y1",void 0),ba([gc({redraw:pc.MINOR}),Sa("design:type",Number)],Nh.prototype,"x2",void 0),ba([gc({redraw:pc.MINOR}),Sa("design:type",Number)],Nh.prototype,"y2",void 0),ba([gc({redraw:pc.MINOR}),Sa("design:type",Boolean)],Nh.prototype,"startLine",void 0),ba([gc({redraw:pc.MINOR}),Sa("design:type",Boolean)],Nh.prototype,"endLine",void 0),ba([gc({redraw:pc.MINOR}),Sa("design:type",Boolean)],Nh.prototype,"isRange",void 0);const Lh={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},Ih={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};function Fh({yDirection:t,padding:e=0,position:i="top",bbox:n}){const o=t?Lh:Ih,{xTranslationDirection:r,yTranslationDirection:s}=o[i];return{xTranslation:r*(e+(t?n.width:n.height)/2),yTranslation:s*(e+(t?n.height:n.width)/2)}}const _h=({yDirection:t,xEnd:e,yStart:i,yEnd:n})=>t?{x:e/2,y:i}:{x:e,y:isNaN(n)?i:(i+n)/2},Gh=({yDirection:t,xStart:e,xEnd:i,yStart:n,yEnd:o})=>t?{x:e,y:isNaN(o)?n:(n+o)/2}:{x:i/2,y:n},Bh=({yDirection:t,xEnd:e,yStart:i,yEnd:n})=>t?{x:e,y:isNaN(n)?i:(i+n)/2}:{x:e/2,y:isNaN(n)?i:n},Vh=({yDirection:t,xStart:e,xEnd:i,yStart:n,yEnd:o})=>t?{x:i/2,y:isNaN(o)?n:o}:{x:e,y:isNaN(o)?n:(n+o)/2},jh=({yDirection:t,xStart:e,xEnd:i,yStart:n})=>t?{x:e/2,y:n}:{x:i,y:n},Wh=({yDirection:t,xStart:e,yStart:i,yEnd:n})=>t?{x:e,y:isNaN(n)?i:n}:{x:e,y:i},zh=({yDirection:t,xEnd:e,yStart:i,yEnd:n})=>t?{x:e,y:i}:{x:e,y:isNaN(n)?i:n},Uh=({yDirection:t,xStart:e,xEnd:i,yStart:n,yEnd:o})=>t?{x:i,y:isNaN(o)?n:o}:{x:e,y:isNaN(o)?n:o},Hh={top:{c:_h},bottom:{c:Vh},left:{c:Gh},right:{c:Bh},topLeft:{c:jh},topRight:{c:zh},bottomLeft:{c:Wh},bottomRight:{c:Uh},inside:{c:({xEnd:t,yStart:e,yEnd:i})=>({x:t/2,y:isNaN(i)?e:(e+i)/2})},insideLeft:{c:Gh},insideRight:{c:Bh},insideTop:{c:_h},insideBottom:{c:Vh},insideTopLeft:{c:jh},insideBottomLeft:{c:Wh},insideTopRight:{c:zh},insideBottomRight:{c:Uh}},Kh=["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],Yh=hl((t,e)=>pl(t,e,t=>Kh.includes(t)),"expecting an optional crossLine label position keyword such as 'topLeft', 'topRight' or 'inside'"),Xh=hl((t,e)=>pl(t,e,t=>"range"===t||"line"===t),"expecting a crossLine type keyword such as 'range' or 'line'");class qh{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}}ba([dl(wl),Sa("design:type",Boolean)],qh.prototype,"enabled",void 0),ba([dl(Ol),Sa("design:type",String)],qh.prototype,"text",void 0),ba([dl(Kl),Sa("design:type",String)],qh.prototype,"fontStyle",void 0),ba([dl(Xl),Sa("design:type",String)],qh.prototype,"fontWeight",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],qh.prototype,"fontSize",void 0),ba([dl(El),Sa("design:type",String)],qh.prototype,"fontFamily",void 0),ba([dl(Fl()),Sa("design:type",Number)],qh.prototype,"padding",void 0),ba([dl(Pl),Sa("design:type",String)],qh.prototype,"color",void 0),ba([dl(Yh),Sa("design:type",String)],qh.prototype,"position",void 0),ba([dl(_l(-360,360)),Sa("design:type",Number)],qh.prototype,"rotation",void 0),ba([dl(wl),Sa("design:type",Boolean)],qh.prototype,"parallel",void 0);class $h{constructor(){this.id=mc(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new qh,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=hc.X,this.group=new kd({name:""+this.id,layer:!0,zIndex:$h.LINE_LAYER_ZINDEX}),this.crossLineRange=new Nh,this.crossLineLabel=new Nc,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;const{group:t,crossLineRange:e,crossLineLabel:i}=this;t.append([e,i]),e.pointerEvents=Cc.None}update(t){this.enabled&&t&&0!==this.data.length?(this.group.visible=!0,this.group.zIndex=this.getZIndex(this.isRange),this.updateNodes()):this.group.visible=!1}calculateLayout(t){if(!t)return;if(!this.createNodeData())return;const{sideFlag:e,gridLength:i,data:n}=this,o=[],r=e*i,s=n[0],a=n[1],l=new Sc(Math.min(0,r),Math.min(s,a),Math.abs(0-r),Math.abs(s-a));o.push(l);const c=this.computeLabelBBox();return c&&o.push(c),Sc.merge(o)}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(){var t,e;const{scale:i,gridLength:n,sideFlag:o,direction:r,label:{position:s="top"},clippedRange:a,strokeWidth:l=0}=this;if(this.data=[],!i)return!1;const c=null!==(t=i.bandwidth)&&void 0!==t?t:0,d=t=>Math.max(Math.min(...a),Math.min(Math.max(...a),t)),[u,h]=[0,o*n];let[p,f]=this.getRange(),[g,v]=[Number(i.convert(p,{clampMode:"clamped"})),i.convert(f,{clampMode:"clamped"})+c];g=d(g),v=d(v),[p,f]=[Number(i.convert(p)),i.convert(f)+c];const y=!isNaN(g)&&!isNaN(v)&&(p===g||f===v||g!==v)&&Math.abs(v-g)>0;if(y){g!==Math.min(g,v)&&([g,v]=[Math.min(g,v),Math.max(g,v)],[p,f]=[f,p])}if(this.isRange=y,this.startLine=!isNaN(p)&&l>0&&p===g,this.endLine=!isNaN(f)&&l>0&&f===v,!y&&!this.startLine&&!this.endLine)return!1;if(this.data=[g,v],this.label.enabled){const t=r===hc.Y,{c:i=_h}=null!==(e=Hh[s])&&void 0!==e?e:{},{x:n,y:o}=i({yDirection:t,xStart:u,xEnd:h,yStart:g,yEnd:v});this.labelPoint={x:n,y:o}}return!0}updateRangeNode(){var t;const{crossLineRange:e,sideFlag:i,gridLength:n,data:o,startLine:r,endLine:s,isRange:a,fill:l,fillOpacity:c,stroke:d,strokeWidth:u,lineDash:h}=this;e.x1=0,e.x2=i*n,e.y1=o[0],e.y2=o[1],e.startLine=r,e.endLine=s,e.isRange=a,e.fill=l,e.fillOpacity=null!=c?c:1,e.stroke=d,e.strokeWidth=null!=u?u:1,e.strokeOpacity=null!==(t=this.strokeOpacity)&&void 0!==t?t:1,e.lineDash=h}updateLabel(){const{crossLineLabel:t,label:e}=this;e.text&&(t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.fill=e.color,t.text=e.text)}positionLabel(){const{crossLineLabel:t,labelPoint:{x:e,y:i}={},label:{parallel:n,rotation:o,position:r="top",padding:s=0},direction:a,parallelFlipRotation:l,regularFlipRotation:c}=this;if(void 0===e||void 0===i)return;const{defaultRotation:d,configuredRotation:u}=mu({rotation:o,parallel:n,regularFlipRotation:c,parallelFlipRotation:l});t.rotation=d+u,t.textBaseline="middle",t.textAlign="center";const h=t.computeTransformedBBox();if(!h)return;const p=a===hc.Y,{xTranslation:f,yTranslation:g}=Fh({yDirection:p,padding:s,position:r,bbox:h});t.translationX=e+f,t.translationY=i+g}getZIndex(t=!1){return t?$h.RANGE_LAYER_ZINDEX:$h.LINE_LAYER_ZINDEX}getRange(){const{value:t,range:e,scale:i}=this,n=Od.is(i);let[o,r]=null!=e?e:[t,void 0];return n||void 0!==r||(r=o),o=null!=eu(o,n)?o:void 0,r=null!=eu(r,n)?r:void 0,n&&o===r&&(r=void 0),void 0===o&&void 0!==r&&(o=r,r=void 0),[o,r]}computeLabelBBox(){const{label:t}=this;if(!t.enabled)return;const e=new Nc;e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=t.text;const{labelPoint:{x:i,y:n}={},label:{parallel:o,rotation:r,position:s="top",padding:a=0},direction:l,parallelFlipRotation:c,regularFlipRotation:d}=this;if(void 0===i||void 0===n)return;const{configuredRotation:u}=mu({rotation:r,parallel:o,regularFlipRotation:d,parallelFlipRotation:c});e.rotation=u,e.textBaseline="middle",e.textAlign="center";const h=e.computeTransformedBBox();if(!h)return;const p=l===hc.Y,{xTranslation:f,yTranslation:g}=Fh({yDirection:p,padding:a,position:s,bbox:h});return e.translationX=i+f,e.translationY=n+g,e.computeTransformedBBox()}calculatePadding(t){var e,i,n,o,r,s,a,l;const{isRange:c,startLine:d,endLine:u,direction:h,label:{padding:p=0,position:f="top"}}=this;if(!c&&!d&&!u)return;const g=this.computeLabelBBox(),v=null==g?void 0:g.x,y=null==g?void 0:g.y;if(!g||null==v||null==y)return;const m=function({yDirection:t,bbox:e,padding:i=0,position:n="top"}){const o={};return n.startsWith("inside")||("top"!==n||t?"bottom"!==n||t?"left"===n&&t?o.left=i+e.width:"right"===n&&t&&(o.right=i+e.width):o.bottom=i+e.height:o.top=i+e.height),o}({yDirection:h===hc.Y,padding:p,position:f,bbox:g});t.left=Math.max(null!==(e=t.left)&&void 0!==e?e:0,null!==(i=m.left)&&void 0!==i?i:0),t.right=Math.max(null!==(n=t.right)&&void 0!==n?n:0,null!==(o=m.right)&&void 0!==o?o:0),t.top=Math.max(null!==(r=t.top)&&void 0!==r?r:0,null!==(s=m.top)&&void 0!==s?s:0),t.bottom=Math.max(null!==(a=t.bottom)&&void 0!==a?a:0,null!==(l=m.bottom)&&void 0!==l?l:0)}}$h.LINE_LAYER_ZINDEX=xu.SERIES_CROSSLINE_LINE_ZINDEX,$h.RANGE_LAYER_ZINDEX=xu.SERIES_CROSSLINE_RANGE_ZINDEX,$h.className="CrossLine",ba([dl(wl),Sa("design:type",Boolean)],$h.prototype,"enabled",void 0),ba([dl(Xh),Sa("design:type",String)],$h.prototype,"type",void 0),ba([dl(gl(2)),Sa("design:type",Array)],$h.prototype,"range",void 0),ba([dl(Pl),Sa("design:type",String)],$h.prototype,"fill",void 0),ba([dl(_l(0,1)),Sa("design:type",Number)],$h.prototype,"fillOpacity",void 0),ba([dl(Pl),Sa("design:type",String)],$h.prototype,"stroke",void 0),ba([dl(_l()),Sa("design:type",Number)],$h.prototype,"strokeWidth",void 0),ba([dl(_l(0,1)),Sa("design:type",Number)],$h.prototype,"strokeOpacity",void 0),ba([dl($l),Sa("design:type",Array)],$h.prototype,"lineDash",void 0);const Zh=t=>t;class Jh extends Od{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.cacheProps=["domain","range","nice","tickCount","base"],this.baseLog=Zh,this.basePow=Zh,this.log=t=>this.domain[0]>=0?this.baseLog(t):-this.baseLog(-t),this.pow=t=>this.domain[0]>=0?this.basePow(t):-this.basePow(-t),this.defaultClampMode="clamped"}toDomain(t){return t}transform(t){return this.domain[0]>=0?Math.log(t):-Math.log(-t)}transformInvert(t){return this.domain[0]>=0?Math.exp(t):-Math.exp(-t)}update(){!this.domain||this.domain.length<2||(this.updateLogFn(),this.updatePowFn(),this.nice&&this.updateNiceDomain())}updateLogFn(){const{base:t}=this;let e;if(10===t)e=Math.log10;else if(t===Math.E)e=Math.log;else if(2===t)e=Math.log2;else{const i=Math.log(t);e=t=>Math.log(t)/i}this.baseLog=e}updatePowFn(){const{base:t}=this;let e;e=10===t?Jh.pow10:t===Math.E?Math.exp:e=>Math.pow(t,e),this.basePow=e}updateNiceDomain(){const[t,e]=this.domain,i=this.pow(Math.floor(this.log(t))),n=this.pow(Math.ceil(this.log(e)));this.niceDomain=[i,n]}static pow10(t){return t>=0?Math.pow(10,t):1/Math.pow(10,-t)}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:10;if(!this.domain||this.domain.length<2||e<1)return[];this.refresh();const i=this.base,[n,o]=this.getDomain();let r=this.log(n),s=this.log(o);if(this.interval){const t=Math.abs(this.interval),e=Math.abs(s-r),i=Ed(r,s,Math.min(e,t)).map(t=>this.pow(t)).filter(t=>t>=n&&t<=o);if(!this.isDenseInterval({start:n,stop:o,interval:t,count:i.length}))return i}if(!(i%1==0)||s-r>=e)return Sd(r,s,Math.min(s-r,e)).map(t=>this.pow(t));const a=[],l=n>0;r=Math.floor(r)-1,s=Math.round(s)+1;const c=Math.min(...this.range),d=(Math.max(...this.range)-c)/e;let u=1/0;for(let t=r;t<=s;t++){const e=this.convert(this.pow(t+1));for(let r=1;r<i;r++){const s=l?r:i-r+1,c=this.pow(t)*s,h=this.convert(c),p=Math.abs(u-h),f=Math.abs(h-e),g=p>=d&&f>=d;c>=n&&c<=o&&(1===r||g)&&(a.push(c),u=h)}}return a}tickFormat({count:t,ticks:e,specifier:i}){const{base:n}=this;return null==i&&(i=10===n?".0e":","),"string"==typeof i&&(i=ud(i)),t===1/0?i:(null==e&&this.ticks(),t=>i(t))}}var Qh;ba([dl(Fl(0)),Sa("design:type",Object)],Jh.prototype,"base",void 0),function(t){t[t.MILLISECOND=0]="MILLISECOND",t[t.SECOND=1]="SECOND",t[t.MINUTE=2]="MINUTE",t[t.HOUR=3]="HOUR",t[t.WEEK_DAY=4]="WEEK_DAY",t[t.SHORT_MONTH=5]="SHORT_MONTH",t[t.MONTH=6]="MONTH",t[t.SHORT_YEAR=7]="SHORT_YEAR",t[t.YEAR=8]="YEAR"}(Qh||(Qh={}));const tp={[Qh.MILLISECOND]:".%L",[Qh.SECOND]:":%S",[Qh.MINUTE]:"%I:%M",[Qh.HOUR]:"%I %p",[Qh.WEEK_DAY]:"%a",[Qh.SHORT_MONTH]:"%b %d",[Qh.MONTH]:"%B",[Qh.SHORT_YEAR]:"%y",[Qh.YEAR]:"%Y"};function ep(t){return t instanceof Date?t.getTime():t}class ip extends Od{constructor(){super([new Date(2022,11,7),new Date(2022,11,8)],[0,1]),this.type="time",this.cacheProps=["domain","range","nice","tickCount","interval","minTickCount","maxTickCount"],this.year=ua,this.month=da,this.week=na,this.day=ea,this.hour=ta,this.minute=Js,this.second=$s,this.millisecond=Xs,this.tickIntervals=[[this.second,1,1e3],[this.second,5,5e3],[this.second,15,15e3],[this.second,30,3e4],[this.minute,1,6e4],[this.minute,5,3e5],[this.minute,15,9e5],[this.minute,30,18e5],[this.hour,1,36e5],[this.hour,3,108e5],[this.hour,6,216e5],[this.hour,12,432e5],[this.day,1,864e5],[this.day,2,1728e5],[this.week,1,6048e5],[this.week,2,12096e5],[this.week,3,18144e5],[this.month,1,2592e6],[this.month,2,5184e6],[this.month,3,7776e6],[this.month,4,10368e6],[this.month,6,15552e6],[this.year,1,31536e6]]}toDomain(t){return new Date(t)}calculateDefaultTickFormat(t=[]){let e=Qh.YEAR;const i=t=>{t<e&&(e=t)};for(const e of t){i(this.getLowestGranularityFormat(e))}const n=ep(t[0]),o=ep(t[t.length-1]),r=new Date(n).getFullYear(),s=new Date(o).getFullYear()-r>0;return this.buildFormatString(e,s)}buildFormatString(t,e){let i=[tp[t]],n=0;const o=this.getDomain(),r=Math.min(...o.map(ep)),s=Math.max(...o.map(ep))-r;switch(t){case Qh.SECOND:s/6e4>1&&i.push(tp[Qh.MINUTE]);case Qh.MINUTE:s/36e5>1&&i.push(tp[Qh.HOUR]);case Qh.HOUR:n=i.length,s/864e5>1&&i.push(tp[Qh.WEEK_DAY]);case Qh.WEEK_DAY:if(s/6048e5>1||e){const t=i.indexOf(tp[Qh.WEEK_DAY]);t>-1&&i.splice(t,1,tp[Qh.SHORT_MONTH])}case Qh.SHORT_MONTH:case Qh.MONTH:(s/31536e6>1||e)&&i.push(tp[Qh.YEAR])}return n<i.length&&(i=[...i.slice(0,n),i.slice(n).join(" ")]),n>0&&(i=[...i.slice(0,n).reverse(),...i.slice(n)],n<i.length&&i.splice(n,0," ")),i.join("")}getLowestGranularityFormat(t){return this.second.floor(t)<t?Qh.MILLISECOND:this.minute.floor(t)<t?Qh.SECOND:this.hour.floor(t)<t?Qh.MINUTE:this.day.floor(t)<t?Qh.HOUR:this.month.floor(t)<t?this.week.floor(t)<t?Qh.WEEK_DAY:Qh.SHORT_MONTH:this.year.floor(t)<t?Qh.MONTH:Qh.YEAR}defaultTickFormat(t){const e=this.calculateDefaultTickFormat(t);return t=>nh(e)(t)}getTickInterval({start:t,stop:e,count:i,minCount:n,maxCount:o}){const{tickIntervals:r}=this;let s,a;const l=null!=i?i:Od.defaultTickCount,c=Math.abs(e-t)/Math.max(l,1);let d=0;for(;d<r.length&&c>r[d][2];)d++;if(0===d)a=Math.max(Cd(t,e,l,n,o),1),s=this.millisecond;else if(d===r.length){a=Cd(t/31536e6,e/31536e6,l,n,o),s=this.year}else{const t=c-r[d-1][2]<r[d][2]-c?d-1:d;[s,a]=r[t]}return s.every(a)}invert(t){return new Date(super.invert(t))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const[t,e]=this.getDomain().map(ep);if(void 0!==this.interval)return this.getTicksForInterval({start:t,stop:e});if(this.nice){const{tickCount:t}=this;if(2===t)return this.niceDomain;if(1===t)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:t,stop:e})}getDefaultTicks({start:t,stop:e}){const i=this.getTickInterval({start:t,stop:e,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return i?i.range(new Date(t),new Date(e)):[]}getTicksForInterval({start:t,stop:e}){const{interval:i,tickIntervals:n}=this;if(!i)return[];if(i instanceof Ks){const n=i.range(new Date(t),new Date(e));return this.isDenseInterval({start:t,stop:e,interval:i,count:n.length})?this.getDefaultTicks({start:t,stop:e}):n}const o=Math.abs(i);if(this.isDenseInterval({start:t,stop:e,interval:o}))return this.getDefaultTicks({start:t,stop:e});const r=[...n];r.reverse();const s=r.find(t=>o%t[2]==0);if(s){return s[0].every(o/(s[2]/s[1])).range(new Date(t),new Date(e))}let a=new Date(t);const l=new Date(e),c=[];for(;a<=l;)c.push(a),a=new Date(a),a.setMilliseconds(a.getMilliseconds()+o);return c}tickFormat({ticks:t,specifier:e}){return null==e?this.defaultTickFormat(t):nh(e)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[t,e]=this.domain;for(let i=0;i<4;i++){this.updateNiceDomainIteration(t,e);const[i,n]=this.niceDomain;if(ep(t)===ep(i)&&ep(e)===ep(n))break;t=i,e=n}}updateNiceDomainIteration(t,e){const i=ep(t),n=ep(e),{interval:o}=this;let r;if(o instanceof Ks)r=o;else{const t="number"==typeof o?(n-i)/Math.max(o,1):this.tickCount;r=this.getTickInterval({start:i,stop:n,count:t,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(r){const i=r.range(t,e,!0),n=i[0],o=i[i.length-1];this.niceDomain=[n,o]}}}class np{constructor(t=0,e=t,i=t,n=e){this.top=t,this.right=e,this.bottom=i,this.left=n}clear(){this.top=this.right=this.bottom=this.left=0}}ba([dl(Fl(0)),Sa("design:type",Number)],np.prototype,"top",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],np.prototype,"right",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],np.prototype,"bottom",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],np.prototype,"left",void 0);var op=Object.freeze({__proto__:null,extent:Ta,normalisedExtent:function(t,e,i){return ka(t,e,i).extent},normalisedExtentWithMetadata:ka,toFixed:al,isNumberEqual:ol,tickFormat:bd,interpolateString:rh,ticks:Sd,tickStep:Cd,range:Ed,Color:cl,isString:Zd,isStringObject:Jd,isDate:t=>t instanceof Date&&!isNaN(+t),isDiscrete:Qd,isContinuous:tu,checkDatum:eu,isNumber:iu,resetIds:function(){for(const t in yc)delete yc[t]},createId:mc,Padding:np,jsonDiff:za,DELETE:Ua,jsonMerge:Ka,jsonApply:Ya,jsonWalk:Xa,normalizeAngle360:Ja,normalizeAngle360Inclusive:function(t){return t%=Za,(t+=Za)!==Za&&(t%=Za),t},normalizeAngle180:Qa,toRadians:tl,toDegrees:function(t){return t/Math.PI*180},angleBetween:function(t,e){return t=Ja(t),(e=Ja(e))-t+(t>e?2*Math.PI:0)},zipObject:Uc,clamp:nl,isEqual:ol,isNegative:rl,round:sl,mod:ll,sanitizeHtml:$d,Logger:La});function rp(t,e){return t.length===e.length&&t.every((t,i)=>Number(t)===Number(e[i]))}function sp(t,e,i,n,o){let r=t.x;t.x<e?r=e:t.x>e+n&&(r=e+n);let s=t.y;t.y<i?s=i:t.y>i+o&&(s=i+o);const a=t.x-r,l=t.y-s;return Math.sqrt(a*a+l*l)<=.5*t.size}function ap(t,e,i,n,o){const r=t.x+t.width>e&&t.x<e+n,s=t.y+t.height>i&&t.y<i+o;return r&&s}const lp=["stroke","lineDash"],cp=hl(fl(void 0,t=>{for(const e in t)if(!lp.includes(e))return!1;return!0}),"expecting an Array of objects with gridline style properties such as 'stroke' and 'lineDash'");class dp{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}}function up(t,e=[void 0]){return Va((i,n,o)=>e.includes(o)?t:o)}ba([dl(Cl),Sa("design:type",Object)],dp.prototype,"enabled",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],dp.prototype,"width",void 0),ba([dl(cp),Sa("design:type",Array)],dp.prototype,"style",void 0);class hp{constructor(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0}getSideFlag(){return this.mirrored?1:-1}getFont(){return Lc(this)}}ba([dl(Cl),Sa("design:type",Object)],hp.prototype,"enabled",void 0),ba([dl(wl),Sa("design:type",Boolean)],hp.prototype,"autoWrap",void 0),ba([dl(_l(0)),Sa("design:type",Number)],hp.prototype,"maxWidth",void 0),ba([dl(_l(0)),Sa("design:type",Number)],hp.prototype,"maxHeight",void 0),ba([dl(Kl),Sa("design:type",String)],hp.prototype,"fontStyle",void 0),ba([dl(Xl),Sa("design:type",String)],hp.prototype,"fontWeight",void 0),ba([dl(Fl(1)),Sa("design:type",Number)],hp.prototype,"fontSize",void 0),ba([dl(El),Sa("design:type",String)],hp.prototype,"fontFamily",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],hp.prototype,"padding",void 0),ba([dl(Gl()),up(NaN),Sa("design:type",Number)],hp.prototype,"minSpacing",void 0),ba([dl(Pl),Sa("design:type",String)],hp.prototype,"color",void 0),ba([dl(_l(-360,360)),Sa("design:type",Number)],hp.prototype,"rotation",void 0),ba([dl(Cl),Sa("design:type",Boolean)],hp.prototype,"avoidCollisions",void 0),ba([dl(Cl),Sa("design:type",Boolean)],hp.prototype,"mirrored",void 0),ba([dl(Cl),Sa("design:type",Boolean)],hp.prototype,"parallel",void 0),ba([dl(Ol),Sa("design:type",String)],hp.prototype,"format",void 0);class pp{constructor(){this.enabled=!0,this.width=1,this.color=void 0}}ba([dl(Cl),Sa("design:type",Object)],pp.prototype,"enabled",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],pp.prototype,"width",void 0),ba([dl(Pl),Sa("design:type",String)],pp.prototype,"color",void 0);const fp=hl((t,e)=>pl(t,e,(t,e)=>0!==t&&Fl(0)(t,e)||t instanceof Ks),"expecting an optional non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'");class gp{constructor(){this.enabled=!0,this.width=1,this.size=6,this.color=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}}function vp(t){const e=Math.min(...t.range),i=Math.max(...t.range),n=Math.floor(e),o=Math.ceil(i);return{min:n,max:o,visible:n!==o}}ba([dl(Cl),Sa("design:type",Object)],gp.prototype,"enabled",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],gp.prototype,"width",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],gp.prototype,"size",void 0),ba([dl(Pl),Sa("design:type",String)],gp.prototype,"color",void 0),ba([dl(fp),Sa("design:type",Object)],gp.prototype,"interval",void 0),ba([dl(gl()),Sa("design:type",Array)],gp.prototype,"values",void 0),ba([dl(vl(Gl(1),ml("maxSpacing"))),up(NaN),Sa("design:type",Number)],gp.prototype,"minSpacing",void 0);const yp=2*Math.PI,mp=yp/2;function bp(t){const e=e=>{var i,n;const o=Math.min(...null!==(i=e.range)&&void 0!==i?i:[t.min]),r=Math.max(...null!==(n=e.range)&&void 0!==n?n:[t.max]),s=Math.round(e.translationY);return s<o||s>r},i=(t,i,n)=>{const o={translationY:Math.round(t.translationY),opacity:t.opacity};return"added"===(n=((t,i,n)=>"removed"!==n&&e(t)?"removed":"added"!==n&&e(i)?"added":n)(i,t.datum,n))&&(o.translationY=Math.round(i.translationY),o.opacity=0),Object.assign(Object.assign({},o),td[n])},n=(t,e,i)=>{const n={translationY:Math.round(e.translationY),opacity:1};return"removed"===i&&(n.opacity=0),n};return{tick:{fromFn:i,toFn:n,intermediateFn:(t,i,n)=>({visible:!e(t)})},line:{fromFn:(t,e)=>{var i,n;return Object.assign(Object.assign({},null!==(n=null!==(i=t.previousDatum)&&void 0!==i?i:e)&&void 0!==n?n:{y:t.y,x1:t.x1,x2:t.x2}),td.updated)},toFn:(t,e)=>Object.assign({},e)},label:{fromFn:(t,e,n)=>{var o;const r=null!==(o=t.previousDatum)&&void 0!==o?o:e;let s=r.rotation;return"added"!==n&&"removed"!==n||(s=e.rotation),Object.assign(Object.assign({},i(t,e,n)),{x:r.x,y:r.y,rotation:s,rotationCenterX:r.rotationCenterX})},toFn:(t,e,i)=>{var o,r;let s;var a,l;return"added"===i||"removed"===i?s=e.rotation:(a=null!==(r=null===(o=t.previousDatum)||void 0===o?void 0:o.rotation)&&void 0!==r?r:e.rotation,l=e.rotation,s=Math.abs(l-a)<mp?l:a>l?l+yp:l-yp),Object.assign(Object.assign({},n(0,e,i)),{x:e.x,y:e.y,rotation:s,rotationCenterX:e.rotationCenterX,finish:{rotation:e.rotation}})}},group:{fromFn:(t,e)=>{const{rotation:i,translationX:n,translationY:o}=t;return Object.assign({rotation:i,translationX:n,translationY:o},td.updated)},toFn:(t,e)=>{const{rotation:i,translationX:n,translationY:o}=e;return{rotation:i,translationX:n,translationY:o}}}}}var Sp,xp,Cp;!function(t){t[t.TickLine=0]="TickLine",t[t.TickLabel=1]="TickLabel",t[t.GridLine=2]="GridLine",t[t.GridArc=3]="GridArc",t[t.AxisLine=4]="AxisLine"}(Sp||(Sp={})),function(t){t[t.CREATE=0]="CREATE",t[t.CREATE_SECONDARY=1]="CREATE_SECONDARY",t[t.FILTER=2]="FILTER",t[t.VALUES=3]="VALUES"}(xp||(xp={}));class wp{get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}set crossLines(t){var e,i;null===(e=this._crossLines)||void 0===e||e.forEach(t=>this.detachCrossLine(t)),t&&this.assignCrossLineArrayConstructor(t),this._crossLines=t,null===(i=this._crossLines)||void 0===i||i.forEach(t=>{this.attachCrossLine(t),this.initCrossLine(t)})}get crossLines(){return this._crossLines}constructor(t,e){this.moduleCtx=t,this.scale=e,this.id=mc(this),this.nice=!0,this.dataDomain={domain:[],clipped:!1},this.keys=[],this.boundSeries=[],this.includeInvisibleDomains=!1,this.axisGroup=new kd({name:this.id+"-axis",zIndex:xu.AXIS_ZINDEX}),this.lineNode=this.axisGroup.appendChild(new Rd),this.tickLineGroup=this.axisGroup.appendChild(new kd({name:this.id+"-Axis-tick-lines",zIndex:xu.AXIS_ZINDEX})),this.tickLabelGroup=this.axisGroup.appendChild(new kd({name:this.id+"-Axis-tick-labels",zIndex:xu.AXIS_ZINDEX})),this.crossLineGroup=new kd({name:this.id+"-CrossLines"}),this.gridGroup=new kd({name:this.id+"-Axis-grid"}),this.gridLineGroup=this.gridGroup.appendChild(new kd({name:this.id+"-gridLines",zIndex:xu.AXIS_GRID_ZINDEX})),this.tickLineGroupSelection=Md.select(this.tickLineGroup,Rd,!1),this.tickLabelGroupSelection=Md.select(this.tickLabelGroup,Nc,!1),this.gridLineGroupSelection=Md.select(this.gridLineGroup,Rd,!1),this.line=new pp,this.tick=this.createTick(),this.gridLine=new dp,this.label=this.createLabel(),this.defaultTickMinSpacing=wp.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new Wc,this._gridLength=0,this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this.maxThickness=1/0,this.moduleMap=new Du(this),this.refreshScale(),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node),this.destroyFns.push(t.interactionManager.addListener("hover",t=>this.checkAxisHover(t))),this.animationManager=t.animationManager,this.animationState=new bh("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()}},ready:{update:t=>this.animateReadyUpdate(t),resize:()=>this.resetSelectionNodes()}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines);let i=void 0;this.destroyFns.push(t.layoutService.addListener("layout-complete",t=>{null!=i&&null!=za(t.chart,i)&&this.animationState.transition("resize"),i=Object.assign({},t.chart)})),this.destroyFns.push(t.updateService.addListener("update-complete",t=>{this.minRect=t.minRect}))}attachCrossLine(t){this.crossLineGroup.appendChild(t.group)}detachCrossLine(t){this.crossLineGroup.removeChild(t.group)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach(t=>t())}refreshScale(){var t;this.range=this.scale.range.slice(),null===(t=this.crossLines)||void 0===t||t.forEach(t=>{this.initCrossLine(t)})}updateRange(){var t;const{range:e,visibleRange:i,scale:n}=this,o=(e[1]-e[0])/(i[1]-i[0]),r=o*i[0],s=e[0]-r;n.range=[s,s+o],null===(t=this.crossLines)||void 0===t||t.forEach(t=>{t.clippedRange=[e[0],e[1]]})}setCrossLinesVisible(t){this.crossLineGroup.visible=t}attachAxis(t,e){e.appendChild(this.gridGroup),t.appendChild(this.axisGroup),t.appendChild(this.crossLineGroup)}detachAxis(t,e){e.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup)}inRange(t,e=0,i=0){const n=Math.min(...this.range),o=Math.max(...this.range);return t+e>=n-i&&t<=o+i}onLabelFormatChange(t,e){const{scale:i,fractionDigits:n}=this,o=!(i instanceof Jh)&&n>0?t=>"number"==typeof t?t.toFixed(n):String(t):t=>String(t);if(e&&i&&i.tickFormat)try{this.labelFormatter=i.tickFormat({ticks:t,specifier:e})}catch(t){this.labelFormatter=o,La.warnOnce(`the axis label format string ${e} is invalid. No formatting will be applied`)}else this.labelFormatter=o}setDomain(){var t;const{scale:e,dataDomain:{domain:i},tick:{values:n}}=this;if(n&&Od.is(e)){const[o,r]=null!==(t=Ta(n))&&void 0!==t?t:[1/0,-1/0],s=Math.min(e.fromDomain(i[0]),o),a=Math.max(e.fromDomain(i[1]),r);e.domain=[e.toDomain(s),e.toDomain(a)]}else e.domain=i}setTickInterval(t){var e;this.scale.interval=null!==(e=this.tick.interval)&&void 0!==e?e:t}setTickCount(t,e,i){const{scale:n}=this;if(t&&Od.is(n))return"number"==typeof t?(n.tickCount=t,n.minTickCount=null!=e?e:0,void(n.maxTickCount=null!=i?i:1/0)):void(n instanceof ip&&this.setTickInterval(t))}set gridLength(t){var e;(this._gridLength&&!t||!this._gridLength&&t)&&this.gridLineGroupSelection.clear(),this._gridLength=t,null===(e=this.crossLines)||void 0===e||e.forEach(t=>{this.initCrossLine(t)})}get gridLength(){return this._gridLength}createTick(){return new gp}createLabel(){return new hp}checkAxisHover(t){this.computeBBox().containsPoint(t.offsetX,t.offsetY)&&this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)}update(t){if(!this.tickGenerationResult)return;const{rotation:e,parallelFlipRotation:i,regularFlipRotation:n}=this.calculateRotations(),o=this.label.getSideFlag();this.updatePosition();const r=this.getAxisLineCoordinates(),s=this.tickGenerationResult,{tickData:a,combinedRotation:l,textBaseline:c,textAlign:d}=s,u=ma(s,["tickData","combinedRotation","textBaseline","textAlign"]),h=this.tickLabelGroupSelection.nodes().map(t=>t.datum.tickId);if(this.updateSelections(r,a.ticks,{combinedRotation:l,textAlign:d,textBaseline:c,range:this.scale.range}),this.animationManager.isSkipped())this.resetSelectionNodes();else{const t=this.calculateUpdateDiff(h,a);this.animationState.transition("update",t)}return this.updateAxisLine(),this.updateLabels(),this.updateVisibility(),this.updateGridLines(o),this.updateTickLines(),this.updateTitle({anyTickVisible:a.ticks.length>0}),this.updateCrossLines({rotation:e,parallelFlipRotation:i,regularFlipRotation:n}),this.updateLayoutState(),u.primaryTickCount}getAxisLineCoordinates(){const{range:[t,e]}=this;return{x:0,y1:Math.min(t,e),y2:Math.max(t,e)}}getTickLineCoordinates(t){const{tick:e,label:i}=this,n=i.getSideFlag()*e.size,o=Math.min(0,n);return{x1:o,x2:o+Math.abs(n),y:Math.round(t.translationY)}}getTickLabelProps(t,e){const{label:i}=this,{combinedRotation:n,textBaseline:o,textAlign:r,range:s}=e,a=t.tickLabel,l=i.getSideFlag()*(this.tick.size+i.padding+this.seriesAreaPadding),c=""!==a&&null!=a;return{tickId:t.tickId,translationY:t.translationY,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,rotation:n,rotationCenterX:l,text:a,textAlign:r,textBaseline:o,visible:c,x:l,y:0,range:s}}setTitleProps(t,e){var i;const{title:n}=this;if(n){if(t.color=n.color,t.fontFamily=n.fontFamily,t.fontSize=n.fontSize,t.fontStyle=n.fontStyle,t.fontWeight=n.fontWeight,t.enabled=n.enabled,t.wrapping=n.wrapping,n.enabled){const o=t.node,{tickSpace:r}=e,s=(null!==(i=n.spacing)&&void 0!==i?i:0)+r,a=this.label.getSideFlag(),l=Ja(this.rotation),c=-1===a&&l>Math.PI&&l<2*Math.PI?-1:1,d=c*a*Math.PI/2,u=1===c?"bottom":"top",{range:h}=this,p=Math.floor(c*a*(h[0]+h[1])/2),f=-1===a?Math.floor(c*-s):Math.floor(-s),{callbackCache:g}=this.moduleCtx,{formatter:v=(t=>t.defaultValue)}=n,y=g.call(v,this.getTitleFormatterParams());o.setProperties({rotation:d,text:y,textBaseline:u,visible:!0,x:p,y:f})}}else t.enabled=!1}calculateLayout(t){var e;const{rotation:i,parallelFlipRotation:n,regularFlipRotation:o}=this.calculateRotations(),r=this.label.getSideFlag(),s=r*(this.tick.size+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.tickGenerationResult=this.generateTicks({primaryTickCount:t,parallelFlipRotation:n,regularFlipRotation:o,labelX:s,sideFlag:r});const a=this.tickGenerationResult,{tickData:l,combinedRotation:c,textBaseline:d,textAlign:u}=a,h=ma(a,["tickData","combinedRotation","textBaseline","textAlign"]),p=[],{x:f,y1:g,y2:v}=this.getAxisLineCoordinates(),y=new Sc(f,g,0,v-g);p.push(y);const{tick:m}=this;m.enabled&&l.ticks.forEach(t=>{const{x1:e,x2:i,y:n}=this.getTickLineCoordinates(t),o=new Sc(e,n,i-e,0);p.push(o)});const{label:b}=this;if(b.enabled){const t=new Nc;l.ticks.forEach(e=>{const i=this.getTickLabelProps(e,{combinedRotation:c,textAlign:u,textBaseline:d,range:this.scale.range});if(!i.visible)return;t.setProperties(Object.assign(Object.assign({},i),{translationY:Math.round(e.translationY)}));const n=t.computeTransformedBBox();n&&p.push(n)})}const{title:S}=this;if(null==S?void 0:S.enabled){const t=new Wc;let e=0;if(l.ticks.length>0){const t=Sc.merge(p).width;isFinite(t)&&(e+=t)}this.setTitleProps(t,{tickSpace:e});const i=t.node.computeTransformedBBox();i&&p.push(i)}const x=(t=>{const e=new xc,{rotation:i,translationX:n,translationY:o,rotationCenterX:r,rotationCenterY:s}=this.getAxisTransform();return xc.updateTransformMatrix(e,1,1,i,n,o,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:r,rotationCenterY:s}),e.transformBBox(t)})(Sc.merge(p)),C=this.isAnySeriesActive();return null===(e=this.crossLines)||void 0===e||e.forEach(t=>{var e;t.sideFlag=-r,t.direction=i===-Math.PI/2?hc.X:hc.Y,t instanceof $h&&(t.label.parallel=null!==(e=t.label.parallel)&&void 0!==e?e:this.label.parallel),t.parallelFlipRotation=n,t.regularFlipRotation=o,t.calculateLayout(C)}),this.updateLayoutState(),{primaryTickCount:t=h.primaryTickCount,bbox:x}}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}updateScale(){this.updateRange(),this.calculateDomain(),this.setDomain(),this.setTickInterval(this.tick.interval);const{scale:t,nice:e}=this;Od.is(t)&&(t.nice=e,t.update())}calculateRotations(){const t=tl(this.rotation);return{rotation:t,parallelFlipRotation:Ja(t),regularFlipRotation:Ja(t-Math.PI/2)}}generateTicks({primaryTickCount:t,parallelFlipRotation:e,regularFlipRotation:i,labelX:n,sideFlag:o}){var r;const{scale:s,tick:a,label:{parallel:l,rotation:c,fontFamily:d,fontSize:u,fontStyle:h,fontWeight:p}}=this,f=void 0!==t,{defaultRotation:g,configuredRotation:v,parallelFlipFlag:y,regularFlipFlag:m}=mu({rotation:c,parallel:l,regularFlipRotation:i,parallelFlipRotation:e}),b=v+g,S=new xc,{maxTickCount:x}=this.estimateTickCount({minSpacing:a.minSpacing,maxSpacing:null!==(r=a.maxSpacing)&&void 0!==r?r:NaN}),C=!Od.is(s)||isNaN(x)?10:x;let w=bu(l,v,0,o,m);const E=function(t,e,i,n){return t&&!e?i*n==-1?"hanging":"bottom":"middle"}(l,v,o,y),O={fontFamily:d,fontSize:u,fontStyle:h,fontWeight:p,textBaseline:E,textAlign:w};let D={rawTicks:[],ticks:[],labelCount:0},A=0,T=0,k=!0,M=!1;for(;k&&A<=C&&!M;){T=0,w=bu(l,v,0,o,m);const e=this.getTickStrategies({secondaryAxis:f,index:A});for(const i of e){({tickData:D,index:A,autoRotation:T,terminate:M}=i({index:A,tickData:D,textProps:O,labelOverlap:k,terminate:M,primaryTickCount:t}));const e=0!==v||0!==T,r=b+T;w=bu(l,v,T,o,m),k=this.checkLabelOverlap(r,e,S,D.ticks,n,Object.assign(Object.assign({},O),{textAlign:w}))}}const R=g+v+T;return!f&&D.rawTicks.length>0&&(t=D.rawTicks.length),{tickData:D,primaryTickCount:t,combinedRotation:R,textBaseline:E,textAlign:w}}getTickStrategies({index:t,secondaryAxis:e}){const{scale:i,label:n,tick:o}=this,r=Od.is(i),s=n.enabled&&n.avoidCollisions,a=!r&&0!==t&&s,l=!0===n.autoRotate&&void 0===n.rotation,c=[];let d;d=this.tick.values?xp.VALUES:e?xp.CREATE_SECONDARY:a?xp.FILTER:xp.CREATE;if(c.push(({index:t,tickData:e,primaryTickCount:i,terminate:n})=>this.createTickData(d,t,e,n,i)),!r&&!isNaN(o.minSpacing)){const t=({index:t,tickData:e,primaryTickCount:i,terminate:n})=>this.createTickData(xp.FILTER,t,e,n,i);c.push(t)}if(!s)return c;if(n.autoWrap){const t=({index:t,tickData:e,textProps:i})=>this.wrapLabels(e,t,i);c.push(t)}else if(l){const t=({index:t,tickData:e,labelOverlap:i,terminate:n})=>({index:t,tickData:e,autoRotation:this.getAutoRotation(i),terminate:n});c.push(t)}return c}createTickData(t,e,i,n,o){var r;const{scale:s,tick:a}=this,{maxTickCount:l,minTickCount:c,defaultTickCount:d}=this.estimateTickCount({minSpacing:a.minSpacing,maxSpacing:null!==(r=a.maxSpacing)&&void 0!==r?r:NaN}),u=Od.is(s),h=!u||isNaN(l)?10:l;let p=u?Math.max(d-e,c):l;const f=void 0===a.interval&&void 0===a.values&&p>c&&(u||t===xp.FILTER);let g=!0;for(;g&&e<=h;){const n=i.rawTicks;p=u?Math.max(d-e,c):l;const{rawTicks:r,ticks:s,labelCount:a}=this.getTicks({tickGenerationType:t,previousTicks:n,tickCount:p,minTickCount:c,maxTickCount:l,primaryTickCount:o});i.rawTicks=r,i.ticks=s,i.labelCount=a,g=!!f&&rp(r,n),e++}const v=void 0!==a.interval||void 0!==a.values;return n||(n=v),{tickData:i,index:e,autoRotation:0,terminate:n}}checkLabelOverlap(t,e,i,n,o,r){xc.updateTransformMatrix(i,1,1,t,0,0);return function(t,e){const i=[];for(let n=0;n<t.length;n++){const o=t[n],{point:{x:r,y:s},label:{text:a}}=o;let{label:{width:l,height:c}}=o;l+=null!=e?e:0,c+=null!=e?e:0;if(i.some(t=>ap(t,r,s,l,c)))return!0;i.push({index:n,text:a,x:r,y:s,width:l,height:c,datum:o})}return!1}(this.createLabelData(n,o,r,i),function(t,e){return isNaN(t)?e?0:10:t}(this.label.minSpacing,e))}createLabelData(t,e,i,n){const o=[];for(const r of t){const{tickLabel:t,translationY:s}=r;if(""===t||null==t)continue;const a=Bc(t),{width:l,height:c}=Ic(a,e,s,i),d=Su(t,new Sc(e,s,l,c),e,s,n);o.push(d)}return o}getAutoRotation(t){var e;return t?Ja(tl(null!==(e=this.label.autoRotateAngle)&&void 0!==e?e:0)):0}getTicks({tickGenerationType:t,previousTicks:e,tickCount:i,minTickCount:n,maxTickCount:o,primaryTickCount:r}){var s;const{range:a,scale:l,visibleRange:c}=this;let d=[];switch(t){case xp.VALUES:d=this.tick.values;break;case xp.CREATE_SECONDARY:d=this.updateSecondaryAxisTicks(r);break;case xp.FILTER:d=this.filterTicks(e,i);break;default:d=this.createTicks(i,n,o)}this.onLabelFormatChange(d,this.label.format),this.fractionDigits=d.fractionDigits>=0?d.fractionDigits:0;const u=(null!==(s=l.bandwidth)&&void 0!==s?s:0)/2,h=[];let p=0;const f=new Map,g=Math.max(0,Math.floor(c[0]*d.length)),v=Math.min(d.length,Math.ceil(c[1]*d.length));for(let t=g;t<v;t++){const e=d[t],i=l.convert(e)+u;if(a.length>0&&!this.inRange(i,0,.001))continue;const n=this.formatTick(e,t);let o=n;if(f.has(o)){const t=f.get(o);f.set(o,t+1),o=`${o}_${t}`}else f.set(o,1);h.push({tick:e,tickId:o,tickLabel:n,translationY:i}),""!==n&&null!=n&&p++}return{rawTicks:d,ticks:h,labelCount:p}}filterTicks(t,e){var i;const n=!isNaN(this.tick.minSpacing)||!isNaN(null!==(i=this.tick.maxSpacing)&&void 0!==i?i:NaN)?Math.ceil(t.length/e):2;return t.filter((t,e)=>e%n==0)}createTicks(t,e,i){var n,o,r;return this.setTickCount(t,e,i),null!==(r=null===(o=(n=this.scale).ticks)||void 0===o?void 0:o.call(n))&&void 0!==r?r:[]}estimateTickCount({minSpacing:t,maxSpacing:e}){const{minRect:i}=this,n=this.calculateRangeWithBleed(),o=Math.max(this.defaultTickMinSpacing,n/Od.defaultMaxTickCount);let r=!isNaN(e);isNaN(t)&&(t=o),isNaN(e)&&(e=n),t>e&&(t===o?t=e:e=t);const s=i?this.direction===hc.X?i.width:i.height:1;r&&(r=s<o);const a=nl(1,Math.floor(n/t),r?Math.floor(n/s):1/0),l=Math.min(a,Math.ceil(n/e));return{minTickCount:l,maxTickCount:a,defaultTickCount:nl(l,Od.defaultTickCount,a)}}updateVisibility(){this.moduleCtx.animationManager.isSkipped()&&this.resetSelectionNodes(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines({rotation:t,parallelFlipRotation:e,regularFlipRotation:i}){var n;const o=this.label.getSideFlag(),r=this.isAnySeriesActive();null===(n=this.crossLines)||void 0===n||n.forEach(n=>{var s;n.sideFlag=-o,n.direction=t===-Math.PI/2?hc.X:hc.Y,n instanceof $h&&(n.label.parallel=null!==(s=n.label.parallel)&&void 0!==s?s:this.label.parallel),n.parallelFlipRotation=e,n.regularFlipRotation=i,n.update(r)})}updateTickLines(){const{tick:t,label:e}=this,i=e.getSideFlag();this.tickLineGroupSelection.each(e=>{e.strokeWidth=t.width,e.stroke=t.color,e.x1=i*t.size,e.x2=0,e.y1=0,e.y2=0})}calculateAvailableRange(){const{range:t}=this,e=Math.min(...t);return Math.max(...t)-e}calculateRangeWithBleed(){const{visibleRange:t}=this,e=1/(t[1]-t[0]);return sl(this.calculateAvailableRange()*e,2)}calculateDomain(){if(this.linkedTo)this.dataDomain=this.linkedTo.dataDomain;else{const t=this.boundSeries.filter(t=>this.includeInvisibleDomains||t.isEnabled()).flatMap(t=>t.getDomain(this.direction));this.dataDomain=this.normaliseDataDomain(t)}}getAxisTransform(){return{rotation:tl(this.rotation),rotationCenterX:0,rotationCenterY:0,translationX:this.translation.x,translationY:this.translation.y}}updatePosition(){const{crossLineGroup:t,axisGroup:e,gridGroup:i,translation:n,gridLineGroupSelection:o,gridPadding:r,gridLength:s}=this,{rotation:a}=this.calculateRotations(),l=this.label.getSideFlag(),c=Math.floor(n.x),d=Math.floor(n.y);t.setProperties({rotation:a,translationX:c,translationY:d}),e.datum=this.getAxisTransform(),i.setProperties({rotation:a,translationX:c,translationY:d}),o.each(t=>{t.x1=r,t.x2=-l*s+r,t.y=0})}updateSecondaryAxisTicks(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(t,e,i){this.lineNode.datum=t,this.gridLineGroupSelection.update(this.gridLength?e:[],t=>t.append(new Rd({tag:Sp.GridLine})),t=>t.tickId),this.tickLineGroupSelection.update(e,t=>t.appendChild(new Rd({tag:Sp.TickLine})),t=>t.tickId),this.tickLabelGroupSelection.update(e.map(t=>this.getTickLabelProps(t,i)),t=>t.appendChild(new Nc({tag:Sp.TickLabel})),t=>t.tickId)}updateAxisLine(){const{line:t}=this,e=t.enabled?t.width:0;this.lineNode.setProperties({stroke:t.color,strokeWidth:e})}updateGridLines(t){const{gridLine:{style:e,width:i},gridPadding:n,gridLength:o}=this;0!==o&&0!==e.length&&this.gridLineGroupSelection.each((r,s,a)=>{const{stroke:l,lineDash:c}=e[a%e.length];r.setProperties({x1:n,x2:-t*o+n,y:0,fill:void 0,stroke:l,strokeWidth:i,lineDash:c})})}updateLabels(){const{label:t}=this;t.enabled&&this.tickLabelGroupSelection.each((t,e)=>{t.setProperties(e,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])})}wrapLabels(t,e,i){const{parallel:n,maxWidth:o,maxHeight:r}=this.label;let s=this.maxThickness,a=Math.round(this.calculateAvailableRange()/t.labelCount);return n&&([s,a]=[a,s]),t.ticks.forEach(t=>{t.tickLabel=Nc.wrap(t.tickLabel,null!=o?o:s,null!=r?r:a,i,"hyphenate")}),{tickData:t,index:e,autoRotation:0,terminate:!0}}updateTitle(t){const{rotation:e,title:i,_titleCaption:n,lineNode:o,tickLineGroup:r,tickLabelGroup:s}=this;if(!i)return void(n.enabled=!1);let a=0;const{anyTickVisible:l}=t;if(i.enabled&&l){const t=kd.computeBBox([r,s,o]),i=0===e?t.width:t.height;Math.abs(i)<1/0&&(a+=i)}this.setTitleProps(n,{tickSpace:a})}formatTick(t,e){var i,n;const{label:o,labelFormatter:r,fractionDigits:s,moduleCtx:{callbackCache:a}}=this;if(o.formatter){const n=s>0?t:String(t);return null!==(i=a.call(o.formatter,{value:n,index:e,fractionDigits:s,formatter:r}))&&void 0!==i?i:n}return r&&null!==(n=a.call(r,t))&&void 0!==n?n:String(t)}formatDatum(t){return String(t)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(t=>this.includeInvisibleDomains||t.isEnabled())}clipTickLines(t,e,i,n){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new Sc(t,e,i,n))}clipGrid(t,e,i,n){this.gridGroup.setClipRectInGroupCoordinateSpace(new Sc(t,e,i,n))}calculatePadding(t,e){return[Math.abs(.01*t),Math.abs(.01*t)]}getTitleFormatterParams(){var t;const e=this.boundSeries.reduce((t,e)=>{const i=e.getKeys(this.direction),n=e.getNames(this.direction);for(let e=0;e<i.length;e++)t.push({key:i[e],name:n[e]});return t},[]);return{direction:this.direction,boundSeries:e,defaultValue:null===(t=this.title)||void 0===t?void 0:t.text}}normaliseDataDomain(t){return{domain:t,clipped:!1}}getLayoutState(){return Object.assign({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.tick.size},this.layout)}getModuleMap(){return this.moduleMap}createModuleContext(){var t;return null!==(t=this.axisContext)&&void 0!==t||(this.axisContext=this.createAxisContext()),Object.assign(Object.assign({},this.moduleCtx),{parent:this.axisContext})}createAxisContext(){return{axisId:this.id,direction:this.direction,continuous:Od.is(this.scale),keys:()=>this.boundSeries.flatMap(t=>t.getKeys(this.direction)),scaleValueFormatter:t=>{var e,i;return null===(i=(e=this.scale).tickFormat)||void 0===i?void 0:i.call(e,{specifier:t})},scaleBandwidth:()=>{var t;return null!==(t=this.scale.bandwidth)&&void 0!==t?t:0},scaleConvert:t=>this.scale.convert(t),scaleInvert:t=>{var e,i;return null===(i=(e=this.scale).invert)||void 0===i?void 0:i.call(e,t)}}}animateReadyUpdate(t){const{animationManager:e}=this.moduleCtx,i=bp(vp(this));ed(this.id,"axis-group",e,[this.axisGroup],i.group),ed(this.id,"line",e,[this.lineNode],i.line),ed(this.id,"line-paths",e,[this.gridLineGroupSelection,this.tickLineGroupSelection],i.tick,(t,e)=>e.tickId,t),ed(this.id,"tick-labels",e,[this.tickLabelGroupSelection],i.label,(t,e)=>e.tickId,t)}resetSelectionNodes(){const{gridLineGroupSelection:t,tickLineGroupSelection:e,tickLabelGroupSelection:i,lineNode:n}=this,o=vp(this);vh([this.axisGroup],(t,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY})),vh([t,e],function(t){const{visible:e,min:i,max:n}=t;return(t,o)=>{const r=Math.round(o.translationY);return{translationY:r,opacity:1,visible:e&&r>=i&&r<=n}}}(o)),vh([i],(t,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX})),vh([n],(t,e)=>Object.assign({},e))}calculateUpdateDiff(t,e){const i=new Set,n=new Set,o=Math.max(t.length,e.ticks.length);for(let r=0;r<o;r++){const o=e.ticks[r],s=t[r],a=null==o?void 0:o.tickId;s!==a&&(n.has(a)?n.delete(a):a&&i.add(a),i.has(s)?i.delete(s):s&&n.add(s))}return{changed:i.size>0||n.size>0,added:[...i.values()],removed:[...n.values()]}}}wp.defaultTickMinSpacing=50,ba([dl(Cl),Sa("design:type",Boolean)],wp.prototype,"nice",void 0),ba([dl(jl),Sa("design:type",Array)],wp.prototype,"keys",void 0);class Ep extends hp{constructor(){super(...arguments),this.autoRotateAngle=335}}ba([dl(wl),Sa("design:type",Boolean)],Ep.prototype,"autoRotate",void 0),ba([dl(Fl(-360,360)),Sa("design:type",Number)],Ep.prototype,"autoRotateAngle",void 0);class Op extends wp{constructor(){super(...arguments),this.thickness=0,this.position="left"}get direction(){return["top","bottom"].includes(this.position)?hc.X:hc.Y}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(t){return this.updateDirection(),super.update(t)}calculateLayout(t){return this.updateDirection(),super.calculateLayout(t)}createAxisContext(){return Object.assign(Object.assign({},super.createAxisContext()),{position:this.position})}assignCrossLineArrayConstructor(t){var e,i,n;e=t,i=$h,null===(n=Mh.constructedArrays)||void 0===n||n.set(e,i)}createLabel(){return new Ep}}ba([dl(Fl(0)),Sa("design:type",Number)],Op.prototype,"thickness",void 0),ba([dl(ic),Sa("design:type",String)],Op.prototype,"position",void 0);class Dp extends Op{constructor(t){super(t,new il),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(t){this._paddingOverrideEnabled=!0,this.scale.paddingInner=t}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(t){this.scale.paddingOuter=t}get paddingOuter(){return this.scale.paddingOuter}normaliseDataDomain(t){const e=[],i=new Set;for(const n of t){const t=n instanceof Date?n.getTime():n;i.has(t)||(i.add(t),e.push(n))}return{domain:e,clipped:!1}}calculateDomain(){if(!this._paddingOverrideEnabled){const t=this.boundSeries.map(t=>{var e;return null===(e=t.getBandScalePadding)||void 0===e?void 0:e.call(t)}).filter(t=>null!=t);t.length>0&&(this.scale.paddingInner=Math.min(...t.map(t=>t.inner)),this.scale.paddingOuter=Math.max(...t.map(t=>t.outer)))}return super.calculateDomain()}}Dp.className="CategoryAxis",Dp.type="category",ba([dl(Fl(0,1)),Sa("design:type",Number)],Dp.prototype,"groupPaddingInner",void 0);class Ap{constructor(t="",e,i=0){this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter((t,e)=>e!==this.number):[]}}function Tp(t,e=!0){const i=new Ap;let n=0;return e&&t.forEach(t=>n=Math.max(n,t.labels.length)),t.forEach(t=>{if(e)for(;t.labels.length<n;)t.labels.unshift("");!function(t,e){const i=e.labels.slice().reverse(),n=i.length-1;i.forEach((e,i)=>{const o=t.children,r=o.find(t=>t.label===e),s=i!==n;if(r&&s)t=r;else{const i=new Ap(e,t);i.number=o.length,o.push(i),s&&(t=i)}})}(i,t)}),i}function kp(t,e,i){const n=i/(e.number-t.number);e.change-=n,e.shift+=i,t.change+=n,e.prelim+=i,e.mod+=i}function Mp(t,e,i){return e.getSiblings().indexOf(t.ancestor)>=0?t.ancestor:i}function Rp(t,e){const i=t.children;if(i.length){let n=i[0];i.forEach(t=>{Rp(t,e),n=function(t,e,i){const n=t.getLeftSibling();if(n){let o=t,r=t,s=n,a=r.getLeftmostSibling(),l=r.mod,c=o.mod,d=s.mod,u=a.mod;for(;s.nextRight()&&r.nextLeft();){s=s.nextRight(),r=r.nextLeft(),a=a.nextLeft(),o=o.nextRight(),o.ancestor=t;const n=s.prelim+d-(r.prelim+l)+i;n>0&&(kp(Mp(s,t,e),t,n),l+=n,c+=n),d+=s.mod,l+=r.mod,u+=a.mod,c+=o.mod}s.nextRight()&&!o.nextRight()?(o.thread=s.nextRight(),o.mod+=d-c):(r.nextLeft()&&!a.nextLeft()&&(a.thread=r.nextLeft(),a.mod+=l-u),e=t)}return e}(t,n,e)}),function(t){const e=t.children;if(e){let t=0,i=0;for(let n=e.length-1;n>=0;n--){const o=e[n];o.prelim+=t,o.mod+=t,i+=o.change,t+=o.shift+i}}}(t);const o=(i[0].prelim+i[i.length-1].prelim)/2,r=t.getLeftSibling();r?(t.prelim=r.prelim+e,t.mod=t.prelim-o):t.prelim=o}else{const i=t.getLeftSibling();t.prelim=i?i.prelim+e:0}}class Pp{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){const{x:i,y:n}=e(t);i>this.right&&(this.right=i),i<this.left&&(this.left=i),n>this.bottom&&(this.bottom=n),n<this.top&&(this.top=n)}}function Np(t){const e=new Lp;return Rp(t,1),function t(e,i,n){e.x=e.prelim+i,e.y=e.depth,n.update(e),e.children.forEach(o=>t(o,i+e.mod,n))}(t,-t.prelim,e),function t(e){const i=e.children;let n=0;i.forEach(e=>{t(e),e.children.length?n+=e.leafCount:n++}),e.leafCount=n,i.length?(e.subtreeLeft=i[0].subtreeLeft,e.subtreeRight=i[e.children.length-1].subtreeRight,e.x=(e.subtreeLeft+e.subtreeRight)/2):(e.subtreeLeft=e.x,e.subtreeRight=e.x)}(t),e}class Lp{constructor(){this.dimensions=new Pp,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(t){this.dimensions.update(t,t=>({x:t.x,y:t.y})),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)}resize(t,e,i=0,n=0,o=!1){const r=this.leafCount-1,s=this.depth,a=this.dimensions;let l=1,c=1;if(t>0&&r){const e=(a.right-a.left)/r;l=t/r/e,o&&(l=-l)}if(e>0&&s){const t=(a.bottom-a.top)/s;c=e/s/t}const d=new Pp;this.nodes.forEach(t=>{t.screenX=t.x*l,t.screenY=t.y*c,d.update(t,t=>({x:t.screenX,y:t.screenY}))});const u=-d.left,h=-d.top;this.nodes.forEach(t=>{t.screenX+=u+i,t.screenY+=h+n})}}class Ip extends hp{constructor(){super(...arguments),this.grid=!1}}ba([dl(Cl),Sa("design:type",Boolean)],Ip.prototype,"grid",void 0);class Fp extends Op{constructor(t){super(t,new il),this.tickScale=new il,this.line=new pp,this.label=new Ip,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;const{tickLineGroup:e,tickLabelGroup:i,gridLineGroup:n,tickScale:o,scale:r}=this;r.paddingOuter=.1,r.paddingInner=2*r.paddingOuter,this.range=r.range.slice(),this.refreshScale(),o.paddingInner=1,o.paddingOuter=0,this.gridLineSelection=Md.select(n,Rd),this.axisLineSelection=Md.select(e,Rd),this.separatorSelection=Md.select(e,Rd),this.labelSelection=Md.select(i,Nc)}updateRange(){const{range:t,visibleRange:e,scale:i}=this,n=(t[1]-t[0])/(e[1]-e[0]),o=n*e[0],r=t[0]-o;this.tickScale.range=i.range=[r,r+n],this.resizeTickTree()}resizeTickTree(){var t;const e=this.scale,i=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,n=this.tickTreeLayout,o=this.lineHeight;n&&n.resize(Math.abs(i[1]-i[0]),n.depth*o,(Math.min(i[0],i[1])||0)+(null!==(t=e.bandwidth)&&void 0!==t?t:0)/2,-n.depth*o,i[1]-i[0]<0)}get lineHeight(){return 1.5*this.label.fontSize}set gridLength(t){(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineSelection.clear(),this.labelSelection.clear()),this._gridLength=t}get gridLength(){return this._gridLength}calculateDomain(){var t;const{direction:e}=this,i=[];let n;this.boundSeries.filter(t=>t.visible).forEach(t=>{if(e===hc.X)if(void 0===n){const o=t.getDomain(e);i.push(o),n="number"==typeof o[0]}else n&&i.push(t.getDomain(e));else i.push(t.getDomain(e))});const o=(new Array).concat(...i),r=null!==(t=Ta(o))&&void 0!==t?t:o;this.dataDomain=this.normaliseDataDomain(r),this.scale.domain=this.dataDomain.domain}normaliseDataDomain(t){const e=t.filter((t,e,i)=>i.indexOf(t)===e),i=Tp(e);this.tickTreeLayout=Np(i);const n=e.slice();return n.push(""),this.tickScale.domain=n,this.resizeTickTree(),{domain:e,clipped:!1}}update(){this.computedLayout&&(this.updatePosition(),this.updateTitleCaption(),this.updateCategoryLabels(),this.updateSeparators(),this.updateAxisLines(),this.updateCategoryGridLines(),this.resetSelectionNodes())}updateTitleCaption(){const{_titleCaption:t}=this;t.node.visible=!1}updateCategoryLabels(){if(!this.computedLayout)return;const{tickLabelLayout:t}=this.computedLayout;this.labelSelection.update(t).each((t,e)=>{t.setProperties(e)})}updateSeparators(){if(!this.computedLayout)return;const{separatorLayout:t}=this.computedLayout,{range:e}=this;this.separatorSelection.update(t).each((t,i)=>{t.x1=i.x1,t.x2=i.x2,t.y1=i.y,t.y2=i.y,t.visible=i.y>=e[0]-1e-7&&i.y<=e[1]+1e-7,t.stroke=this.tick.color,t.fill=void 0,t.strokeWidth=1})}updateAxisLines(){if(!this.computedLayout)return;const{axisLineLayout:t}=this.computedLayout;this.axisLineSelection.update(t).each((t,e)=>{t.setProperties(Object.assign(Object.assign({},e),{stroke:this.line.color,strokeWidth:this.line.width})),t.x1=e.x,t.x2=e.x,t.y1=e.y1,t.y2=e.y2,t.strokeWidth=this.line.width,t.stroke=this.line.color})}updateCategoryGridLines(){const{gridLength:t,gridLine:e,label:i,range:n,tickScale:o}=this,r=o.ticks(),s=i.getSideFlag(),a=this.gridLineSelection.update(t?r:[]);if(t){const{width:i,style:r}=e,l=r.length;a.each((e,a,c)=>{const d=Math.round(o.convert(a));e.x1=0,e.x2=-s*t,e.y1=d,e.y2=d,e.visible=d>=n[0]&&d<=n[1];const{stroke:u,lineDash:h}=r[c%l];e.stroke=u,e.strokeWidth=i,e.lineDash=h,e.fill=void 0})}}computeLayout(){this.updateDirection(),this.calculateDomain(),this.updateRange();const{scale:t,label:e,label:{parallel:i},moduleCtx:{callbackCache:n},range:o,title:r,title:{formatter:s=(t=>t.defaultValue)}={}}=this,a=t.range[0],l=t.range[1],c=Math.abs(l-a)/t.domain.length||0,d=tl(this.rotation),u=Math.abs(Math.cos(d))<1e-8,h=e.getSideFlag(),p=this.lineHeight,f=this.tickTreeLayout,g=t.ticks(),v=f?f.nodes:[],y=!!f&&f.depth>1,{defaultRotation:m,configuredRotation:b,parallelFlipFlag:S}=mu({rotation:e.rotation,parallel:i,regularFlipRotation:Ja(d-Math.PI/2),parallelFlipRotation:Ja(d)}),x=[],C=new Map;let w=0;const E=new Nc,O=(t,i)=>{var a;if(E.setProperties({fill:e.color,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,textAlign:"center",textBaseline:-1===S?"bottom":"hanging",translationX:t.screenY-.25*e.fontSize,translationY:t.screenX}),0===i){if(!((null==r?void 0:r.enabled)&&g.length>0))return!1;const i=n.call(s,this.getTitleFormatterParams());E.setProperties({fill:r.color,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStyle:r.fontStyle,fontWeight:r.fontWeight,text:i,textBaseline:"hanging",translationX:t.screenY-.25*e.fontSize,translationY:t.screenX})}else{if(!(t.screenX>=o[0]&&t.screenX<=o[1]))return!1;e.formatter?E.text=null!==(a=n.call(e.formatter,{value:String(t.label),index:i}))&&void 0!==a?a:String(t.label):E.text=String(t.label)}return!0};v.forEach((t,e)=>{if(O(t,e)){const t=E.computeTransformedBBox();t&&(C.set(e,t),t.width>w&&(w=t.width))}});const D=h*e.padding,A=this.label.grid,T=[];v.forEach((t,e)=>{let i=O(t,e);const n=e;E.x=D,E.rotationCenterX=D;const o=!t.children.length;if(o){E.rotation=b,E.textAlign="end",E.textBaseline="middle";const t=C.get(n);t&&t.height>c&&(i=!1,C.delete(n))}else{E.translationX-=w-p+this.label.padding;const e=t.leafCount*c,o=C.get(n);o&&o.width>e?(i=!1,C.delete(n)):E.rotation=u?m:-Math.PI/2}if(t.parent&&y){const e=o?t.screenX-c/2:t.screenX-t.leafCount*c/2;if(o)(t.number!==t.children.length-1||A)&&T.push({y:e,x1:0,x2:-w-2*this.label.padding});else{const i=-w-2*this.label.padding+t.screenY;T.push({y:e,x1:i+p,x2:i})}}let r;if(i){const t=E.computeTransformedBBox();t&&C.set(e,t),r=Object.assign(Object.assign({},{fill:(s=E).fill,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight,rotation:s.rotation,rotationCenterX:s.rotationCenterX,rotationCenterY:s.rotationCenterY,text:s.text,textAlign:s.textAlign,textBaseline:s.textBaseline,translationX:s.translationX,translationY:s.translationY,visible:s.visible,x:s.x,y:s.y}),{visible:i})}else C.delete(e),r={visible:i};var s;x.push(r)});let k=0;T.forEach(t=>k=Math.min(k,t.x2)),T.push({y:Math.max(a,l),x1:0,x2:k});const M=[],R=[];T.forEach(t=>{if(t.y>=o[0]-1e-7&&t.y<=o[1]+1e-7){const{x1:e,x2:i,y:n}=t,o=new Sc(Math.min(e,i),n,Math.abs(e-i),0);R.push(o),M.push({x1:e,x2:i,y:n})}});const P=[],N=[],L=f?f.depth+1:1;for(let t=0;t<L;t++){const e=g.length>0&&(0===t||A&&y),i=t>0?-w-2*this.label.padding-(t-1)*p:0,n=new Sc(i,Math.min(...o),0,Math.abs(o[1]-o[0]));N.push(n),P.push({x:i,y1:o[0],y2:o[1],visible:e})}return{bbox:(t=>{const e=new xc,{rotation:i,translationX:n,translationY:o,rotationCenterX:r,rotationCenterY:s}=this.getAxisTransform();return xc.updateTransformMatrix(e,1,1,i,n,o,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:r,rotationCenterY:s}),e.transformBBox(t)})(Sc.merge([...C.values(),...R,...N])),tickLabelLayout:x,separatorLayout:M,axisLineLayout:P}}calculateLayout(){const{axisLineLayout:t,separatorLayout:e,tickLabelLayout:i,bbox:n}=this.computeLayout();return this.computedLayout={axisLineLayout:t,separatorLayout:e,tickLabelLayout:i},{bbox:n,primaryTickCount:void 0}}}Fp.className="GroupedCategoryAxis",Fp.type="grouped-category",ba([dl(Pl),Sa("design:type",String)],Fp.prototype,"labelColor",void 0);class _p{static isSupported(){return"undefined"!=typeof OffscreenCanvas&&null!=OffscreenCanvas.prototype.transferToImageBitmap}constructor({width:t=600,height:e=300,overrideDevicePixelRatio:i}){this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(t,e),this.realContext=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.context=this.setPixelRatio(i),this.resize(t,e)}snapshot(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()}destroy(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=null!=t?t:window.devicePixelRatio;return Ac()||(e=1),this._pixelRatio=e,Tc.overrideScale(this.realContext,e)}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{canvas:i,context:n,pixelRatio:o}=this;i.width=Math.round(t*o),i.height=Math.round(e*o),n.resetTransform(),this._width=t,this._height=e}}!function(t){t.SCENE="scene",t.SCENE_STATS="scene:stats",t.SCENE_STATS_VERBOSE="scene:stats:verbose",t.SCENE_DIRTY_TREE="scene:dirtyTree"}(Cp||(Cp={}));const Gp="adv-composite";class Bp{constructor(t){var e;this.id=mc(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug=_a.create(!0,Cp.SCENE);const{document:i,window:n,mode:o=(null!==(e=Ia("agChartsSceneRenderModel"))&&void 0!==e?e:Gp),width:r,height:s,overrideDevicePixelRatio:a}=t;this.overrideDevicePixelRatio=a,this.opts={document:i,window:n,mode:o},this.canvas=new Tc({document:i,window:n,width:r,height:s,overrideDevicePixelRatio:a})}set container(t){this.canvas.container=t}get container(){return this.canvas.container}download(t,e){this.canvas.download(t,e)}getDataURL(t){return this.canvas.getDataURL(t)}get width(){return this.pendingSize?this.pendingSize[0]:this.canvas.width}get height(){return this.pendingSize?this.pendingSize[1]:this.canvas.height}resize(t,e){t=Math.round(t),e=Math.round(e);const i=t<=0||e<=0,n=isNaN(t)||isNaN(e);return!(t===this.width&&e===this.height||n||i)&&(this.pendingSize=[t,e],this.markDirty(),!0)}addLayer(t){var e;const{mode:i}=this.opts;if(!["composite","dom-composite",Gp].includes(i))return;const{zIndex:n=this._nextZIndex++,name:o,zIndexSubOrder:r,getComputedOpacity:s,getVisibility:a}=t,{width:l,height:c,overrideDevicePixelRatio:d}=this,u="dom-composite"===i,h=i===Gp&&_p.isSupported()?new _p({width:l,height:c,overrideDevicePixelRatio:d}):new Tc({document:this.opts.document,window:this.opts.window,width:l,height:c,domLayer:u,zIndex:n,name:o,overrideDevicePixelRatio:d}),p={id:this._nextLayerId++,name:o,zIndex:n,zIndexSubOrder:r,canvas:h,getComputedOpacity:s,getVisibility:a};if(n>=this._nextZIndex&&(this._nextZIndex=n+1),this.layers.push(p),this.sortLayers(),u){const t=this.layers.map(t=>t.canvas).filter(t=>t instanceof Tc),i=t.findIndex(t=>t===h);(null!==(e=t[i-1])&&void 0!==e?e:this.canvas).element.insertAdjacentElement("afterend",h.element)}return this.debug("Scene.addLayer() - layers",this.layers),p.canvas}removeLayer(t){const e=this.layers.findIndex(e=>e.canvas===t);e>=0&&(this.layers.splice(e,1),t.destroy(),this.markDirty(),this.debug("Scene.removeLayer() -  layers",this.layers))}moveLayer(t,e,i){const n=this.layers.find(e=>e.canvas===t);n&&(n.zIndex=e,n.zIndexSubOrder=i,this.sortLayers(),this.markDirty(),this.debug("Scene.moveLayer() -  layers",this.layers))}sortLayers(){this.layers.sort((t,e)=>{var i,n;return Td([t.zIndex,...null!==(i=t.zIndexSubOrder)&&void 0!==i?i:[void 0,void 0],t.id],[e.zIndex,...null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0],e.id],Ad)})}markDirty(){this._dirty=!0}get dirty(){return this._dirty}set root(t){var e;t!==this._root&&(null===(e=this._root)||void 0===e||e._setLayerManager(),this._root=t,t&&t._setLayerManager({addLayer:t=>this.addLayer(t),moveLayer:(...t)=>this.moveLayer(...t),removeLayer:(...t)=>this.removeLayer(...t),markDirty:()=>this.markDirty(),canvas:this.canvas,debug:_a.create(Cp.SCENE)}),this.markDirty())}get root(){return this._root}strip(){const{layers:t}=this;for(const e of t)e.canvas.destroy(),delete e.canvas;t.splice(0,t.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()}destroy(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})}render(t){var e,i;return xa(this,void 0,void 0,(function*(){const{debugSplitTimes:n={start:performance.now()},extraDebugStats:o={}}=null!=t?t:{},{canvas:r,canvas:{context:s},root:a,layers:l,pendingSize:c,opts:{mode:d}}=this;if(c&&(this.canvas.resize(...c),this.layers.forEach(t=>t.canvas.resize(...c)),this.pendingSize=void 0),a&&!a.visible)return void(this._dirty=!1);if(a&&!this.dirty)return this.debug("Scene.render() - no-op",{redrawType:pc[a.dirty],tree:this.buildTree(a)}),void this.debugStats(n,s,void 0,o);const u={ctx:s,devicePixelRatio:null!==(e=this.canvas.pixelRatio)&&void 0!==e?e:1,forceRender:!0,resized:!!c,debugNodes:{}};_a.check(Cp.SCENE_STATS_VERBOSE)&&(u.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let h=!1;if((!a||a.dirty>=pc.TRIVIAL)&&(h=!0,r.clear()),a){const{dirtyTree:t,paths:e}=this.buildDirtyTree(a);_a.create(Cp.SCENE_DIRTY_TREE)("Scene.render() - dirtyTree",{dirtyTree:t,paths:e})}a&&h&&(this.debug("Scene.render() - before",{redrawType:pc[a.dirty],canvasCleared:h,tree:this.buildTree(a)}),a.visible&&(s.save(),a.render(u),s.restore())),n["\u270d\ufe0f"]=performance.now(),"dom-composite"!==d&&l.length>0&&h&&(this.sortLayers(),s.save(),s.setTransform(1/r.pixelRatio,0,0,1/r.pixelRatio,0,0),l.forEach(({canvas:{imageSource:t,enabled:e},getComputedOpacity:i,getVisibility:n})=>{e&&n()&&(s.globalAlpha=i(),s.drawImage(t,0,0))}),s.restore(),n["\u26d9"]=performance.now()),null===(i=s.verifyDepthZero)||void 0===i||i.call(s),this._dirty=!1,this.debugStats(n,s,u.stats,o),this.debugSceneNodeHighlight(s,u.debugNodes),a&&this.debug("Scene.render() - after",{redrawType:pc[a.dirty],canvasCleared:h,tree:this.buildTree(a)})}))}debugStats(t,e,i,n={}){if(_a.check(Cp.SCENE_STATS,Cp.SCENE_STATS_VERBOSE)){const o=performance.now(),r=t.start;t.end=performance.now();const s=(t,e)=>{const i=t+e;return`${t} / ${i} (${Math.round(100*t/i)}%)`},a=(t,e,i)=>`${t}: ${Math.round(100*(i-e))/100}ms`,{layersRendered:l=0,layersSkipped:c=0,nodesRendered:d=0,nodesSkipped:u=0}=null!=i?i:{};let h=0;const p=Object.entries(t).filter(([t])=>"end"!==t).map(([t,e],i)=>{const n=i>0?a(t,h,e):null;return h=e,n}).filter(t=>null!=t).join(" + "),f=Object.entries(n).map(([t,e])=>`${t}: ${e}`).join(" ; "),g=_a.check(Cp.SCENE_STATS_VERBOSE),v=[`${a("\u23f1\ufe0f",r,o)} (${p})`,""+f,"Layers: "+(g?s(l,c):this.layers.length),g?"Nodes: "+s(d,u):null].filter(t=>null!=t).map(t=>[t,Tc.getTextSize(t,e.font)]),y=Math.max(...v.map(([,{width:t}])=>t)),m=v.reduce((t,[,{height:e}])=>t+e,0);e.save(),e.fillStyle="white",e.fillRect(0,0,y,m),e.fillStyle="black";let b=0;for(const[t,i]of v)b+=i.height,e.fillText(t,2,b);e.restore()}}debugSceneNodeHighlight(t,e){var i;const n=t=>e=>!!t.test(e.id)||e instanceof kd&&null!=e.name&&t.test(e.name),o=t=>e=>t===e.id||e instanceof kd&&null!=e.name&&t===e.name,r=Ra(Ia("agChartsSceneDebug")).flatMap(t=>"layout"===t?["seriesRoot","legend","root",/.*Axis-\d+-axis.*/]:t);for(const t of r){if("string"==typeof t&&null!=e[t])continue;const r="string"==typeof t?o(t):n(t),s=null===(i=this.root)||void 0===i?void 0:i.findNodes(r);if(s&&0!==s.length)for(const t of s)t instanceof kd&&t.name?e[t.name]=t:e[t.id]=t;else La.log(`Scene.render() - no debugging node with id [${t}] in scene graph.`)}t.save();for(const[i,n]of Object.entries(e)){const e=n.computeTransformedBBox();e?(t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(e.x,e.y,e.width,e.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(i,e.x,e.y,e.width),t.fillText(i,e.x,e.y,e.width)):La.log(`Scene.render() - no bbox for debugged node [${i}].`)}t.restore()}buildTree(t){var e,i;const n=null!==(e=t instanceof kd?t.name:null)&&void 0!==e?e:t.id;return Object.assign(Object.assign({name:n,node:t,dirty:pc[t.dirty]},(null===(i=t.parent)||void 0===i?void 0:i.isVirtual)?{virtualParentDirty:pc[t.parent.dirty],virtualParent:t.parent}:{}),t.children.map(t=>this.buildTree(t)).reduce((t,e)=>{let{name:i}=e;const{node:{visible:n,opacity:o,zIndex:r,zIndexSubOrder:s},node:a,virtualParent:l}=e;(!n||o<=0)&&(i=`(${i})`),a instanceof kd&&a.isLayer()&&(i=`*${i}*`);const c=[""+(null!=i?i:"<unknown>"),"z: "+r,s&&"zo: "+s.map(t=>"function"==typeof t?t()+" (fn)":t).join(" / "),l&&"(virtual parent)"].filter(t=>!!t).join(" ");let d=c,u=1;for(;null!=t[d]&&u<100;)d=`${c} (${u++})`;return t[d]=e,t},{}))}buildDirtyTree(t){var e;if(t.dirty===pc.NONE)return{dirtyTree:{},paths:[]};const i=t.children.map(t=>this.buildDirtyTree(t)).filter(t=>t.paths.length>0),n=null!==(e=t instanceof kd?t.name:null)&&void 0!==e?e:t.id,o=0===i.length?[n]:i.map(t=>t.paths).reduce((t,e)=>t.concat(e),[]).map(t=>`${n}.${t}`);return{dirtyTree:Object.assign({name:n,node:t,dirty:pc[t.dirty]},i.map(t=>t.dirtyTree).filter(t=>void 0!==t.dirty).reduce((t,e)=>{var i;return t[null!==(i=e.name)&&void 0!==i?i:"<unknown>"]=e,t},{})),paths:o}}}function Vp(t){return new Promise(e=>{setTimeout(()=>e(void 0),t)})}Bp.className="Scene";class jp{constructor(){this.cache=new WeakMap}call(t,...e){let i,n=this.cache.get(t);const o=()=>{try{const o=t(...e);return n&&null!=i&&n.set(i,o),o}catch(t){return void La.warnOnce("User callback errored, ignoring",t)}};try{i=JSON.stringify(e)}catch(t){return o()}return null==n&&(n=new Map,this.cache.set(t,n)),n.has(i)?n.get(i):o()}invalidateCache(){this.cache=new WeakMap}}class Wp{constructor(){this.available=!0,this.acquireQueue=[]}acquire(t){return new Promise(e=>{this.acquireQueue.push([t,e]),this.available&&this.dispatchNext()})}acquireImmediately(t){return xa(this,void 0,void 0,(function*(){return!!this.available&&(yield this.acquire(t),!0)}))}waitForClearAcquireQueue(){return xa(this,void 0,void 0,(function*(){return this.acquire(()=>xa(this,void 0,void 0,(function*(){})))}))}dispatchNext(){var t,e;return xa(this,void 0,void 0,(function*(){this.available=!1;let[i,n]=null!==(t=this.acquireQueue.shift())&&void 0!==t?t:[];for(;i;){try{yield i(),null==n||n()}catch(t){La.error("mutex callback error",t),null==n||n()}[i,n]=null!==(e=this.acquireQueue.shift())&&void 0!==e?e:[]}this.available=!0}))}}function zp(t,e){let i,n,o=0,r=!1;const s=()=>r,a=()=>{r=!1,null==n||n(),n=void 0,i=void 0,o>0&&t(l)},l=()=>{const t=o;o=0,r=!0;const i=e({count:t});i?i.then(a).catch(a):a()};return{schedule(e){0!==o||s()||t(l,e),o++},await(){return xa(this,void 0,void 0,(function*(){if(s())for(null==i&&(i=new Promise(t=>{n=t}));s();)yield i}))}}}class Up{static init(t){if("undefined"!=typeof ResizeObserver)this.resizeObserver=new ResizeObserver(t=>{for(const e of t){const{width:t,height:i}=e.contentRect;this.checkSize(this.elements.get(e.target),e.target,t,i)}});else{const t=()=>{this.elements.forEach((t,e)=>{this.checkClientSize(e,t)})};this.pollerHandler=window.setInterval(t,100)}this.ready=!0,this.documentReady="loading"!==t.readyState,this.documentReady||(this.readyEventFn=()=>{const e="loading"!==t.readyState,i=this.documentReady;if(this.documentReady=e,e&&e!==i){for(const[t,e]of this.queuedObserveRequests)this.observe(t,e);this.queuedObserveRequests.length=0}},t.addEventListener("DOMContentLoaded",this.readyEventFn))}static destroy(){var t;null!=this.pollerHandler&&(clearInterval(this.pollerHandler),this.pollerHandler=void 0),this.readyEventFn&&(document.removeEventListener("DOMContentLoaded",this.readyEventFn),this.readyEventFn=void 0),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),this.resizeObserver=void 0,this.ready=!1}static checkSize(t,e,i,n){t&&(t.size&&i===t.size.width&&n===t.size.height||(t.size={width:i,height:n},t.cb(t.size,e)))}static observe(t,e){this.ready||this.init(t.ownerDocument),this.documentReady?(this.unobserve(t,!1),this.resizeObserver&&this.resizeObserver.observe(t),this.elements.set(t,{cb:e})):this.queuedObserveRequests.push([t,e])}static unobserve(t,e=!0){this.resizeObserver&&this.resizeObserver.unobserve(t),this.elements.delete(t),this.queuedObserveRequests=this.queuedObserveRequests.filter(([e])=>e===t),e&&0===this.elements.size&&this.destroy()}static checkClientSize(t,e){const i=t.clientWidth?t.clientWidth:0,n=t.clientHeight?t.clientHeight:0;this.checkSize(e,t,i,n)}}Up.elements=new Map,Up.ready=!1,Up.documentReady=!1,Up.queuedObserveRequests=[];class Hp{constructor(){this.range="tooltip"}}var Kp;ba([dl(Wl("tooltip","node")),Sa("design:type",String)],Hp.prototype,"range",void 0),function(t){t[t.FULL=0]="FULL",t[t.PROCESS_DATA=1]="PROCESS_DATA",t[t.PERFORM_LAYOUT=2]="PERFORM_LAYOUT",t[t.SERIES_UPDATE=3]="SERIES_UPDATE",t[t.TOOLTIP_RECALCULATION=4]="TOOLTIP_RECALCULATION",t[t.SCENE_RENDER=5]="SCENE_RENDER",t[t.NONE=6]="NONE"}(Kp||(Kp={}));class Yp{constructor(t){this.type=t,this.continuousDomain=[1/0,-1/0],this.discreteDomain=new Set}extend(t){"discrete"===this.type?this.discreteDomain.add(t):"continuous"===this.type&&(this.continuousDomain[0]>t&&(this.continuousDomain[0]=t),this.continuousDomain[1]<t&&(this.continuousDomain[1]=t))}getDomain(){if("discrete"===this.type)return this.discreteDomain;if("continuous"===this.type)return this.continuousDomain;throw new Error("AG Charts - Unsupported data domain type: "+this.type)}}function Xp(t){return t.map(t=>null==t||"number"==typeof t||"string"==typeof t||"boolean"==typeof t?t:"object"==typeof t?JSON.stringify(t):t).join("-")}function qp(t,e){var i;const n=function(t){if(void 0===t)return[];let[e,i]=t;return e=+e,i=+i,0===e&&0===i?[0,1]:e===1/0&&i===-1/0?[]:(e===1/0&&(e=0),i===-1/0&&(i=0),iu(e)&&iu(i)?[e,i]:[])}(t);if(0===n.length)return n;let[o,r]=n;if(o===r){const[t,n]=null!==(i=null==e?void 0:e.calculatePadding(o,r))&&void 0!==i?i:[1,1];o-=t,r+=n}return[o,r]}const $p=Symbol("invalid");class Zp{constructor(t){const{props:e,mode:i="standalone"}=t;this.mode=i;let n=!0;for(const t of e){if("key"===t.type&&!n)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===t.type&&n&&(n=!1)}this.opts=Object.assign({dataVisible:!0},t),this.keys=e.filter(t=>"key"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e,missing:0})),this.values=e.filter(t=>"value"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e,missing:0})),this.aggregates=e.filter(t=>"aggregate"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e})),this.groupProcessors=e.filter(t=>"group-value-processor"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e})),this.propertyProcessors=e.filter(t=>"property-value-processor"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e})),this.reducers=e.filter(t=>"reducer"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e})),this.processors=e.filter(t=>"processor"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e}));for(const t of this.values)if(null==t.property)throw new Error("AG Charts - internal config error: no properties specified for value definitions: "+JSON.stringify(t));const o=({matchGroupIds:t})=>{for(const e of null!=t?t:[])if(!this.values.some(t=>t.groupId===e))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${e}).`)},r=({matchIds:t})=>{for(const e of null!=t?t:[])if(!this.values.some(t=>{var i;return null===(i=t.ids)||void 0===i?void 0:i.some(([t,i])=>t===e[0]&&i===e[1])}))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${e}).`)};for(const t of[...this.groupProcessors,...this.aggregates])r(t),o(t)}resolveProcessedDataIndexById(t,e){var i;const{index:n,def:o}=null!==(i=this.resolveProcessedDataDefById(t,e))&&void 0!==i?i:{};return{index:n,def:o}}resolveProcessedDataIndicesById(t,e){return this.resolveProcessedDataDefsById(t,e).map(({index:t,def:e})=>({index:t,def:e}))}resolveProcessedDataDefById(t,e){return this.resolveProcessedDataDefsById(t,e)[0]}resolveProcessedDataDefsByIds(t,e){const i=[];for(const n of e)i.push([n,this.resolveProcessedDataDefsById(t,n)]);return i}resolveProcessedDataDefsValues(t,{keys:e,values:i}){const n={};for(const[o,[{index:r,def:s}]]of t){const t="key"===s.type?e:i;n[o]=t[r]}return n}resolveProcessedDataDefsById(t,e){const{keys:i,values:n,aggregates:o,groupProcessors:r,reducers:s}=this,a=i=>{const{ids:n,scopes:o}=i;return null!=n&&(!(null!=t&&!(null==o?void 0:o.some(e=>e===t.id)))&&n.some(([i,n])=>i===t.id&&("string"==typeof e?n===e:e.test(n))))},l=[i,n,o,r,s],c=[];for(const t of l)c.push(...t.filter(a).map(t=>({index:t.index,def:t})));if(c.length>0)return c;throw new Error(`AG Charts - didn't find property definition for [${e}, ${t.id}]`)}getDomain(t,e,i="value",n){var o,r,s,a;let l,c;try{l=this.resolveProcessedDataIndicesById(t,e)}catch(t){if("string"!=typeof e&&/didn't find property definition/.test(t.message))return[];throw t}switch(i){case"key":c="keys";break;case"value":c="values";break;case"aggregate":c="aggValues";break;case"group-value-processor":c="groups";break;default:return[]}const d=null!==(r=null===(o=n.domain[c])||void 0===o?void 0:o[l[0].index])&&void 0!==r?r:[];if(1===l.length)return d;const u=[...d];for(const t of l.slice(1))ku(null!==(a=null===(s=n.domain[c])||void 0===s?void 0:s[t.index])&&void 0!==a?a:[],u);return u}processData(t){const{opts:{groupByKeys:e,groupByFn:i},aggregates:n,groupProcessors:o,reducers:r,processors:s,propertyProcessors:a}=this,l=performance.now();for(const t of[...this.keys,...this.values])t.missing=0;if(e&&0===this.keys.length)return;let c=this.extractData(t);e?c=this.groupData(c):i&&(c=this.groupData(c,i(c))),o.length>0&&this.postProcessGroups(c),n.length>0&&this.aggregateData(c),a.length>0&&this.postProcessProperties(c),r.length>0&&this.reduceData(c),s.length>0&&this.postProcessData(c);for(const e of[...this.keys,...this.values])t.length>0&&e.missing>=t.length&&La.warnOnce(`the key '${e.property}' was not found in any data element.`);const d=performance.now();return c.time=d-l,_a.check(!0,"data-model")&&function(t){var e,i;const n=(t,e)=>{e.length>0&&(La.log("DataModel.processData() - "+t),La.table(e))};if(La.log("DataModel.processData() - processedData",t),n("Key Domains",t.domain.keys),n("Group Domains",null!==(e=t.domain.groups)&&void 0!==e?e:[]),n("Value Domains",t.domain.values),n("Aggregate Domains",null!==(i=t.domain.aggValues)&&void 0!==i?i:[]),"grouped"===t.type){const e=t.data.reduce((t,e)=>{var i,n;const o=null!==(i=e.keys)&&void 0!==i?i:[],r=null!==(n=e.aggValues)&&void 0!==n?n:[],s=e.keys.map(()=>{}),a=null==r?void 0:r.map(()=>{});return t.push(...e.values.map((t,e)=>[...0===e?o:s,...null!=t?t:[],...0==e?r:a])),t},[]);n("Values",e)}else{const e=t.data.reduce((t,e)=>{var i;const n=null!==(i=e.aggValues)&&void 0!==i?i:[];return t.push([...e.keys,...e.values,...n]),t},[]);n("Values",e)}}(c),c}valueGroupIdxLookup({matchGroupIds:t,matchIds:e}){return this.values.map((t,e)=>({def:t,index:e})).filter(({def:i})=>!(t&&(null==i.groupId||!t.includes(i.groupId)))&&(!e||null!=i.ids&&e.some(([t,e])=>{var n;return null===(n=i.ids)||void 0===n?void 0:n.some(([i,n])=>i===t&&n===e)}))).map(({index:t})=>t)}valueIdxLookup(t,e){const i=null==t||0===t.length,n=e=>{if(null==e)return!0;const n=null==e||0===e.length;return i===n||(null==e?void 0:e.some(e=>t.includes(e)))},o="string"==typeof e?e:e.id,r=this.values.findIndex(t=>{var e;return n(t.scopes)&&((null===(e=t.ids)||void 0===e?void 0:e.some(t=>(([t,e])=>n([t])&&e===o)(t)))||t.property===o||t.id===o)});if(r>=0)return r;throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(e)} in scope(s) ${JSON.stringify(t)}`)}extractData(t){var e;const{keys:i,values:n,opts:{dataVisible:o}}=this,{dataDomain:r,processValue:s,scopes:a,allScopesHaveSameDefs:l}=this.initDataDomainProcessor(),c=new Array(o?t.length:0);let d=0,u=0;for(const r of t){const t=a.size>0?new Set(a):void 0,h=o?new Array(i.length):void 0;let p,f=0;for(const t of i){if(p=s(t,r,p),p===$p)break;h&&(h[f++]=p)}if(p===$p)continue;const g=o&&n.length>0?new Array(n.length):void 0;let v,y=0;for(const i of n)if(v=s(i,r,v),v===$p){if(l)break;for(const n of null!==(e=i.scopes)&&void 0!==e?e:a)null==t||t.delete(n);if(y++,0===(null==t?void 0:t.size))break}else g&&(g[y++]=v);if((v!==$p||!l)&&(0!==(null==t?void 0:t.size)&&o)){const e={datum:r,keys:h,values:g};!l&&t&&t.size<a.size&&(u++,e.validScopes=[...t]),c[d++]=e}}c.length=d;const h=t=>{const e=r.get(t).getDomain();return Array.isArray(e)&&e[0]>e[1]?[]:[...e]};return{type:"ungrouped",input:{count:t.length},data:c,domain:{keys:i.map(t=>h(t)),values:n.map(t=>h(t))},defs:{allScopesHaveSameDefs:l,keys:i,values:n},partialValidDataCount:u,time:0}}groupData(t,e){var i,n,o,r;const s=new Map;for(const a of t.data){const{keys:t,values:l,datum:c,validScopes:d}=a,u=e?e(a):t,h=Xp(u);if(s.has(h)){const t=s.get(h);if(t.values.push(l),t.datum.push(c),null!=d)for(let e=0;e<(null!==(n=null===(i=t.validScopes)||void 0===i?void 0:i.length)&&void 0!==n?n:0);e++){const i=null===(o=t.validScopes)||void 0===o?void 0:o[e];d.some(t=>t===i)||(null===(r=t.validScopes)||void 0===r||r.splice(e,1))}}else s.set(h,{keys:u,values:[l],datum:[c],validScopes:d})}const a=new Array(s.size),l=new Array(s.size);let c=0;for(const[,{keys:t,values:e,datum:i,validScopes:n}]of s.entries())0!==(null==n?void 0:n.length)&&(l[c]=t,a[c++]={keys:t,values:e,datum:i,validScopes:n});return Object.assign(Object.assign({},t),{type:"grouped",data:a,domain:Object.assign(Object.assign({},t.domain),{groups:l})})}aggregateData(t){var e,i,n,o,r,s,a,l;const{aggregates:c}=this;if(!c)return;const d=c.map(()=>[1/0,-1/0]),u=c.map(t=>this.valueGroupIdxLookup(t)),h=c.map(t=>t.aggregateFunction),p=c.map(t=>t.groupAggregateFunction),f=c.map(t=>t.finalFunction);for(const g of t.data){let{values:v}=g;const{validScopes:y}=g;null!==(e=g.aggValues)&&void 0!==e||(g.aggValues=new Array(u.length)),"ungrouped"===t.type&&(v=[v]);let m=0;for(const t of u){if(!(null===(i=null==y?void 0:y.some(t=>{var e;return null===(e=c[m].matchScopes)||void 0===e?void 0:e.some(e=>t===e)}))||void 0===i||i)){m++;continue}let e=null!==(o=null===(n=p[m])||void 0===n?void 0:n.call(p))&&void 0!==o?o:ku([]);for(const i of v){const n=t.map(t=>i[t]),o=h[m](n,g.keys);o&&(e=null!==(s=null===(r=p[m])||void 0===r?void 0:r.call(p,o,e))&&void 0!==s?s:ku(o,e))}const u=(null!==(l=null===(a=f[m])||void 0===a?void 0:a.call(f,e))&&void 0!==l?l:e).map(t=>{return e=t,Number.isInteger(e)?e:Math.abs(e)>1e4?Math.trunc(e):Math.round(1e4*e)/1e4;var e});ku(u,d[m]),g.aggValues[m++]=u}}t.domain.aggValues=d}postProcessGroups(t){var e,i,n,o,r;const{groupProcessors:s}=this;if(!s)return;const a=new Set,l=new Map,c=new Map,d=new Map;for(const t of s){const e=this.valueGroupIdxLookup(t);c.set(t,e),d.set(t,t.adjust());for(const t of e){const e=this.values[t];a.add(t),l.set(t,new Yp("category"===e.valueType?"discrete":"continuous"))}}const u=t=>{var e;for(const i of a)null===(e=l.get(i))||void 0===e||e.extend(t[i])};for(const a of t.data){for(const l of s){if(!(null===(i=null===(e=a.validScopes)||void 0===e?void 0:e.some(t=>{var e;return null===(e=l.matchScopes)||void 0===e?void 0:e.some(e=>t===e)}))||void 0===i||i))continue;const s=null!==(n=c.get(l))&&void 0!==n?n:[],u=null!==(r=null===(o=d.get(l))||void 0===o?void 0:o())&&void 0!==r?r:()=>{};if("grouped"!==t.type)a.values&&u(a.values,s);else for(const t of a.values)t&&u(t,s)}if("grouped"===t.type)for(const t of a.values)u(t);else u(a.values)}for(const[e,i]of l)t.domain.values[e]=[...i.getDomain()]}postProcessProperties(t){const{propertyProcessors:e}=this;if(e)for(const{adjust:i,property:n,scopes:o}of e)i()(t,this.valueIdxLookup(null!=o?o:[],n))}reduceData(t){var e,i,n;const{reducers:o}=this,r=o.map(t=>t.scopes),s=o.map(t=>t.reducer()),a=o.map(t=>t.initialValue);for(const n of t.data){let t=0;for(const o of s){null===(i=null===(e=n.validScopes)||void 0===e?void 0:e.some(e=>{var i;return null===(i=r[t])||void 0===i?void 0:i.some(t=>e===t)}))||void 0===i||i?(a[t]=o(a[t],n),t++):t++}}for(let e=0;e<a.length;e++)null!==(n=t.reduced)&&void 0!==n||(t.reduced={}),t.reduced[o[e].property]=a[e]}postProcessData(t){var e;const{processors:i}=this;for(const n of i)null!==(e=t.reduced)&&void 0!==e||(t.reduced={}),t.reduced[n.property]=n.calculate(t)}initDataDomainProcessor(){var t;const{keys:e,values:i}=this,n=new Set;for(const e of i)for(const i of null!==(t=e.scopes)&&void 0!==t?t:[])n.add(i);const o=n.size,r=new Map,s=new Map;let a=!0;const l=(t,e,i=r)=>{var n;"category"===e?i.set(t,new Yp("discrete")):(i.set(t,new Yp("continuous")),a&&(a=(null!==(n=t.scopes)&&void 0!==n?n:[]).length===o))},c=()=>{e.forEach(t=>l(t,t.valueType)),i.forEach(t=>l(t,t.valueType))};c();const d=this.buildAccessors(...e,...i);return{dataDomain:r,processValue:(t,e,i)=>{var n,o,a,l;let u,h=!1;if(t.property in d){try{u=d[t.property](e)}catch(t){}h=void 0!==u}else h=t.property in e,u=h?e[t.property]:t.missingValue;if(null!=t.forceValue){u=h&&rl(u)?-1*t.forceValue:t.forceValue,h=!0}if(h||"missingValue"in t||t.missing++,r.has(t)||c(),h){if(!(null===(o=null===(n=t.validation)||void 0===n?void 0:n.call(t,u,e))||void 0===o||o)){if(!("invalidValue"in t))return $p;u=t.invalidValue}}return t.processor&&(s.has(t)||s.set(t,t.processor()),u=null===(a=s.get(t))||void 0===a?void 0:a(u,i!==$p?i:void 0)),null===(l=r.get(t))||void 0===l||l.extend(u),u},initDataDomain:c,scopes:n,allScopesHaveSameDefs:a}}buildAccessors(...t){const e={};if("integrated"===this.mode)return e;for(const i of t){if(!(i.property.indexOf(".")>=0||i.property.indexOf("[")>=0))continue;let t;t=i.property.startsWith("[")?`return datum${i.property};`:`return datum.${i.property};`,e[i.property]=new Function("datum",t)}return e}}class Jp{constructor(t){this.mode=t,this.debug=_a.create(!0,"data-model"),this.requested=[],this.status="setup"}request(t,e,i){return xa(this,void 0,void 0,(function*(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");return new Promise((n,o)=>{this.requested.push({id:t,opts:i,data:e,resultCb:n,reject:o})})}))}execute(){return xa(this,void 0,void 0,(function*(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const t=this.mergeRequested();this.debug("DataController.execute() - merged",t);const e=_a.check(!0,"data-model");e&&(window.processedData=[]);for(const{opts:i,data:n,resultCbs:o,rejects:r,ids:s}of t)try{const t=new Zp(Object.assign(Object.assign({},i),{mode:this.mode})),a=t.processData(n);e&&window.processedData.push(a),a&&0===a.partialValidDataCount?o.forEach(e=>e({dataModel:t,processedData:a})):a?this.splitResult(t,a,s,o):r.forEach(t=>t(new Error("AG Charts - no processed data generated")))}catch(t){r.forEach(e=>e(t))}}))}mergeRequested(){const t=[],e=t=>t.filter(t=>"key"===t.type).map(t=>t.property).join(";"),i=({opts:t,data:i})=>n=>n[0].data===i&&n[0].opts.groupByKeys===t.groupByKeys&&n[0].opts.dataVisible===t.dataVisible&&n[0].opts.groupByFn===t.groupByFn&&e(n[0].opts.props)===e(t.props),n=t=>e=>{var i;if(e.type!==t.type)return!1;const n=null!==(i=za(e,t))&&void 0!==i?i:{};return delete n.scopes,delete n.id,delete n.ids,0===Object.keys(n).length},o=t=>Object.assign(Object.assign({},t[0]),{props:t.reduce((t,e)=>{var i,o,r,s,a,l;for(const c of e.props){null!=c.id&&(null!==(i=c.ids)&&void 0!==i||(c.ids=[]),null===(o=c.scopes)||void 0===o||o.forEach(t=>{var e;return null===(e=c.ids)||void 0===e?void 0:e.push([t,c.id])}));const e=t.find(n(c));e?(null!==(r=e.scopes)&&void 0!==r||(e.scopes=[]),e.scopes.push(...null!==(s=c.scopes)&&void 0!==s?s:[]),"key"!==e.type&&"value"!==e.type||null===(a=e.ids)||void 0===a||a.push(...null!==(l=c.ids)&&void 0!==l?l:[])):t.push(c)}return t},[])});for(const e of this.requested){const n=t.find(i(e));n?n.push(e):t.push([e])}return t.map(t=>({ids:t.map(({id:t})=>t),resultCbs:t.map(({resultCb:t})=>t),rejects:t.map(({reject:t})=>t),data:t[0].data,opts:o(t.map(({opts:t})=>t))}))}splitResult(t,e,i,n){for(let o=0;o<i.length;o++){const r=i[o];(0,n[o])({dataModel:t,processedData:Object.assign(Object.assign({},e),{data:e.data.filter(({validScopes:t})=>null==t||t.some(t=>t===r))})})}}}class Qp{constructor(t){this.getSeries=t}}class tf{constructor(){this.listeners=new Au}addListener(t,e,i){return this.listeners.addListener(t,e,i)}removeListener(t){this.listeners.removeListener(t)}}const ef=[!0,"animation"];class nf extends tf{constructor(t,e){super(),this.interactionManager=t,this.chartUpdateMutex=e,this.defaultDuration=1e3,this.batch=new of,this.debug=_a.create(...ef),this.isPlaying=!1,this.requestId=null,this.skipAnimations=!1}animate(t){var e,i,{disableInteractions:n=!0,immutable:o=!0}=t,r=ma(t,["disableInteractions","immutable"]);const{batch:s}=this;try{if(null!=r.id&&s.controllers.has(r.id)){if(!o)return s.controllers.get(r.id).reset(r);s.controllers.get(r.id).stop(),this.debug("Skipping animation batch due to update of existing animation: "+r.id),this.batch.skip()}}catch(t){return void this.failsafeOnError(t)}const a=null!==(e=r.id)&&void 0!==e?e:Math.random().toString(),l=this.isSkipped();return l&&this.debug("AnimationManager - skipping animation"),new Qc(Object.assign(Object.assign({},r),{id:a,skip:l,autoplay:!!this.isPlaying&&r.autoplay,duration:null!==(i=r.duration)&&void 0!==i?i:this.defaultDuration,onPlay:t=>{var e;s.controllers.set(a,t),this.requestAnimation(),n&&this.interactionManager.pause("animation"),null===(e=r.onPlay)||void 0===e||e.call(t,t)},onStop:t=>{var e;s.controllers.delete(a),n&&this.interactionManager.resume("animation"),null===(e=r.onStop)||void 0===e||e.call(t,t)}}))}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");for(const t of this.batch.controllers.values())try{t.play()}catch(t){this.failsafeOnError(t)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");for(const t of this.batch.controllers.values())try{t.pause()}catch(t){this.failsafeOnError(t)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()");for(const t of this.batch.controllers.values())try{t.stop()}catch(t){this.failsafeOnError(t,!1)}}stopByAnimationId(t){var e;try{null!=t&&this.batch.controllers.has(t)&&(null===(e=this.batch.controllers.get(t))||void 0===e||e.stop())}catch(t){return void this.failsafeOnError(t)}}stopByAnimationGroupId(t){for(const e of this.batch.controllers.values())e.groupId===t&&this.stopByAnimationId(e.id)}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(t=!0){this.skipAnimations=t}isSkipped(){return this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){_a.check(...ef)&&this.debug("AnimationManager - skipCurrentBatch()",{stack:(new Error).stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(t){this.requestId=requestAnimationFrame(t)}requestAnimation(){if(!this.batch.isActive()||null!==this.requestId)return;let t;const e=i=>xa(this,void 0,void 0,(function*(){const n=()=>xa(this,void 0,void 0,(function*(){const e=i-(null!=t?t:i);t=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.controllers.size});for(const t of this.batch.controllers.values())try{t.update(e)}catch(t){this.failsafeOnError(t)}this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:e})}));this.isSkippingFrames()?yield this.chartUpdateMutex.acquireImmediately(n):yield this.chartUpdateMutex.acquire(n),this.batch.isActive()&&this.scheduleAnimationFrame(e)}));this.scheduleAnimationFrame(e)}cancelAnimation(){null!==this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(t,e=!0){La.error("Error during animation, skipping animations",t),e&&this.cancelAnimation()}startBatch(t){this.debug(`AnimationManager - startBatch() with skipAnimations=${t}.`),this.reset(),this.batch.destroy(),this.batch=new of,!0===t&&this.batch.skip()}endBatch(){this.debug(`AnimationManager - endBatch() with ${this.batch.controllers.size} animations; skipped: ${this.batch.isSkipped()}.`),this.batch.isSkipped()&&!this.batch.isActive()&&this.batch.skip(!1)}}class of{constructor(){this.controllers=new Map,this.skipAnimations=!1}isActive(){return this.controllers.size>0}skip(t=!0){if(!1===this.skipAnimations&&!0===t){for(const t of this.controllers.values())t.stop();this.controllers.clear()}this.skipAnimations=t}isSkipped(){return this.skipAnimations}destroy(){}}class rf extends tf{legendItemClick(t,e,i,n){const o={type:"legend-item-click",series:t,itemId:e,enabled:i,legendItemName:n};this.listeners.dispatch("legend-item-click",o)}legendItemDoubleClick(t,e,i,n,o){const r={type:"legend-item-double-click",series:t,itemId:e,enabled:i,legendItemName:o,numVisibleItems:n};this.listeners.dispatch("legend-item-double-click",r)}axisHover(t,e){const i={type:"axis-hover",axisId:t,direction:e};this.listeners.dispatch("axis-hover",i)}}class sf{constructor(t){this.states={},this.element=t}updateCursor(t,e){delete this.states[t],null!=e&&(this.states[t]={style:e}),this.applyStates()}applyStates(){let t="default";Object.entries(this.states).reverse().slice(0,1).forEach(([e,{style:i}])=>t=i),this.element.style.cursor=t}getCursor(){return this.element.style.cursor}}class af extends tf{constructor(){super(...arguments),this.highlightStates=new Map,this.pickedStates=new Map}updateHighlight(t,e){this.highlightStates.delete(t),null!=e&&this.highlightStates.set(t,e),this.applyHighlightStates()}getActiveHighlight(){return this.activeHighlight}updatePicked(t,e){this.pickedStates.delete(t),null!=e&&this.pickedStates.set(t,e),this.applyPickedStates()}getActivePicked(){return this.activePicked}applyHighlightStates(){const{activeHighlight:t}=this;this.activeHighlight=Array.from(this.highlightStates.values()).pop(),this.isEqual(this.activeHighlight,t)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:t})}applyPickedStates(){this.activePicked=Array.from(this.pickedStates.values()).pop()}isEqual(t,e){return t===e||(null==t?void 0:t.series)===(null==e?void 0:e.series)&&(null==t?void 0:t.itemId)===(null==e?void 0:e.itemId)&&(null==t?void 0:t.datum)===(null==e?void 0:e.datum)}}const lf=["pagehide","mousemove","mouseup"],cf=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel"];class df extends tf{constructor(t,e,i){super(),this.eventHandler=t=>this.processEvent(t),this.mouseDown=!1,this.touchDown=!1,this.pausers={animation:0,"context-menu":0},this.rootElement=e.body,this.element=t,this.window=i;for(const e of cf)e.startsWith("touch")?t.addEventListener(e,this.eventHandler,{passive:!0}):"wheel"===e?t.addEventListener(e,this.eventHandler,{passive:!1}):t.addEventListener(e,this.eventHandler);for(const t of lf)this.window.addEventListener(t,this.eventHandler);df.interactionDocuments.includes(e)||(sh(e,"\n.ag-chart-wrapper {\n    touch-action: none;\n}\n"),df.interactionDocuments.push(e))}destroy(){for(const t of lf)this.window.removeEventListener(t,this.eventHandler);for(const t of cf)this.element.removeEventListener(t,this.eventHandler)}resume(t){this.pausers[t]--}pause(t){this.pausers[t]++}processEvent(t){const e=this.decideInteractionEventTypes(t);e.length>0&&this.dispatchEvent(t,e).catch(t=>La.errorOnce(t))}dispatchEvent(t,e){return xa(this,void 0,void 0,(function*(){const i=this.calculateCoordinates(t);if(null==i)return;const n=Object.entries(this.pausers).filter(([,t])=>t>0).map(([t])=>t);for(const o of e)this.listeners.dispatchWrapHandlers(o,(t,e,i)=>{var o;n.length>0&&!(null===(o=null==e?void 0:e.bypassPause)||void 0===o?void 0:o.some(t=>n.includes(t)))||i.consumed||t(i)},this.buildEvent(Object.assign({type:o,event:t,pauses:n},i)))}))}decideInteractionEventTypes(t){switch(t.type){case"click":return["click"];case"dblclick":return["dblclick"];case"contextmenu":return["contextmenu"];case"mousedown":return this.mouseDown=!0,this.dragStartElement=t.target,["drag-start"];case"touchstart":return this.touchDown=!0,this.dragStartElement=t.target,["drag-start"];case"touchmove":case"mousemove":return this.mouseDown||this.touchDown||this.isEventOverElement(t)?this.mouseDown||this.touchDown?["drag"]:["hover"]:[];case"mouseup":return this.mouseDown||this.isEventOverElement(t)?(this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"touchend":return this.touchDown||this.isEventOverElement(t)?(this.touchDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"mouseout":case"touchcancel":return["leave"];case"mouseenter":const e=t instanceof MouseEvent&&1==(1&t.buttons);return this.mouseDown!==e?(this.mouseDown=e,[e?"drag-start":"drag-end"]):[];case"pagehide":return["page-left"];case"wheel":return["wheel"]}return[]}isEventOverElement(t){var e;return t.target===this.element||(null===(e=t.target)||void 0===e?void 0:e.parentElement)===this.element}calculateCoordinates(t){var e;if(t instanceof MouseEvent){const{clientX:e,clientY:i,pageX:n,pageY:o,offsetX:r,offsetY:s}=t;return this.fixOffsets(t,{clientX:e,clientY:i,pageX:n,pageY:o,offsetX:r,offsetY:s})}if("undefined"!=typeof TouchEvent&&t instanceof TouchEvent){const i=null!==(e=t.touches[0])&&void 0!==e?e:t.changedTouches[0],{clientX:n,clientY:o,pageX:r,pageY:s}=i;return Object.assign(Object.assign({},df.NULL_COORDS),{clientX:n,clientY:o,pageX:r,pageY:s})}if(t instanceof PageTransitionEvent){if(t.persisted)return;return df.NULL_COORDS}}fixOffsets(t,e){const i=t=>{let e=0,i=0;for(;t;)e+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{x:e,y:i}};if(null!=this.dragStartElement&&t.target!==this.dragStartElement){const n=i(this.dragStartElement),o=i(t.target);e.offsetX-=n.x-o.x,e.offsetY-=n.y-o.y}return e}buildEvent(t){const{type:e,event:i,clientX:n,clientY:o,pauses:r}=t;let{offsetX:s,offsetY:a,pageX:l,pageY:c}=t;if(!iu(s)||!iu(a)){const t=this.element.getBoundingClientRect();s=n-t.left,a=o-t.top}if(!iu(l)||!iu(c)){const t=this.rootElement.getBoundingClientRect();l=n-t.left,c=o-t.top}const d={type:e,offsetX:s,offsetY:a,pageX:l,pageY:c,sourceEvent:i,consumed:!1,pauses:r,consume(){d.consumed=!0}};return d}}df.interactionDocuments=[],df.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};class uf{constructor(t,e){this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=t,this.destroyFns.push(e.addListener("hover",t=>this.checkExclusiveRects(t)))}getRange(){return this.tooltip.range}updateTooltip(t,e,i){var n;null==i&&(i=null===(n=this.states[t])||void 0===n?void 0:n.content),this.states[t]={content:i,meta:e},this.applyStates()}updateExclusiveRect(t,e){e?this.exclusiveAreas[t]=e:delete this.exclusiveAreas[t]}removeTooltip(t){delete this.states[t],this.applyStates()}getTooltipMeta(t){var e;return null===(e=this.states[t])||void 0===e?void 0:e.meta}destroy(){for(const t of this.destroyFns)t()}checkExclusiveRects(t){let e;for(const[i,n]of Object.entries(this.exclusiveAreas))if(n.containsPoint(t.offsetX,t.offsetY)){e=i;break}e!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=e,this.applyStates())}applyStates(){var t;const e=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states);let i,n;if(e.reverse(),e.slice(0,1).forEach(t=>{var e;const{content:o,meta:r}=null!==(e=this.states[t])&&void 0!==e?e:{};i=o,n=r}),void 0===n||void 0===i)return this.appliedState=void 0,void this.tooltip.toggle(!1);if((null===(t=this.appliedState)||void 0===t?void 0:t.content)===i){const t=this.tooltip.isVisible();this.tooltip.show(n,void 0,t)}else this.tooltip.show(n,i);this.appliedState={content:i,meta:n}}static makeTooltipMeta(t,e,i,n){var o,r,s,a;const{pageX:l,pageY:c,offsetX:d,offsetY:u}=t,h={xOffset:i.series.tooltip.position.xOffset,yOffset:i.series.tooltip.position.yOffset},p={pageX:l,pageY:c,offsetX:d,offsetY:u,event:t,showArrow:i.series.tooltip.showArrow,position:h},f=null!==(r=null===(o=i.yBar)||void 0===o?void 0:o.upperPoint)&&void 0!==r?r:i.midPoint;if("node"===i.series.tooltip.position.type&&f){const{x:t,y:o}=f,r=i.series.contentGroup.inverseTransformPoint(t,o),s=e.element.getBoundingClientRect();return Object.assign(Object.assign({},p),{pageX:Math.round(s.left+n.scrollX+r.x),pageY:Math.round(s.top+n.scrollY+r.y),offsetX:Math.round(r.x),offsetY:Math.round(r.y)})}return p.enableInteraction=null!==(a=null===(s=i.series.tooltip.interaction)||void 0===s?void 0:s.enabled)&&void 0!==a&&a,p}}class hf extends tf{constructor(){super(...arguments),this.axes={}}updateAxes(t){var e;const i=new Set(Object.keys(this.axes));t.forEach(t=>{var e,n,o;i.delete(t.id),null!==(e=(n=this.axes)[o=t.id])&&void 0!==e||(n[o]=new pf(t))}),i.forEach(t=>{delete this.axes[t]}),(null===(e=this.initialZoom)||void 0===e?void 0:e.newZoom)&&this.updateZoom(this.initialZoom.callerId,this.initialZoom.newZoom),this.initialZoom=void 0}updateZoom(t,e){0!==Object.keys(this.axes).length?(Object.values(this.axes).forEach(i=>{i.updateZoom(t,null==e?void 0:e[i.getDirection()])}),this.applyStates()):this.initialZoom={callerId:t,newZoom:e}}updateAxisZoom(t,e,i){var n;null===(n=this.axes[e])||void 0===n||n.updateZoom(t,i),this.applyStates()}getZoom(){let t,e;if(Object.values(this.axes).forEach(i=>{i.getDirection()===hc.X?t=i.getZoom():i.getDirection()===hc.Y&&(e=i.getZoom())}),t||e)return{x:t,y:e}}getAxisZoom(t){var e;return null===(e=this.axes[t])||void 0===e?void 0:e.getZoom()}getAxisZooms(){const t={};for(const[e,i]of Object.entries(this.axes))t[e]={direction:i.getDirection(),zoom:i.getZoom()};return t}applyStates(){if(!Object.values(this.axes).map(t=>t.applyStates()).some(Boolean))return;const t=this.getZoom(),e={};for(const[t,i]of Object.entries(this.axes))e[t]=i.getZoom();this.listeners.dispatch("zoom-change",Object.assign(Object.assign({type:"zoom-change"},null!=t?t:{}),{axes:e}))}}class pf{constructor(t){this.states={},this.axis=t;const[e=0,i=1]=t.visibleRange;this.currentZoom={min:e,max:i},this.states.__initial__=this.currentZoom}getDirection(){return this.axis.direction}updateZoom(t,e){delete this.states[t],null!=e&&(this.states[t]=Object.assign({},e))}getZoom(){return this.currentZoom}applyStates(){var t,e;const i=this.currentZoom,n=Object.keys(this.states)[Object.keys(this.states).length-1];return this.currentZoom=Object.assign({},this.states[n]),(null==i?void 0:i.min)!==(null===(t=this.currentZoom)||void 0===t?void 0:t.min)||(null==i?void 0:i.max)!==(null===(e=this.currentZoom)||void 0===e?void 0:e.max)}}class ff extends Au{constructor(){super(...arguments),this.layoutComplete="layout-complete"}addListener(t,e){if(this.isLayoutStage(t)||this.isLayoutComplete(t))return super.addListener(t,e);throw new Error("AG Charts - unsupported listener type: "+t)}dispatchPerformLayout(t,e){return this.isLayoutStage(t)?this.getListenersByType(t).reduce((t,e)=>{try{return e.handler(t)}catch(e){return La.errorOnce(e),t}},e):e}dispatchLayoutComplete(t){this.dispatch(this.layoutComplete,t)}isLayoutStage(t){return t!==this.layoutComplete}isLayoutComplete(t){return t===this.layoutComplete}}function gf({orientation:t,bboxes:e,maxHeight:i,maxWidth:n,itemPaddingY:o=0,itemPaddingX:r=0,forceResult:s=!1}){const a="horizontal"===t,l={max:a?n:i,fn:a?t=>t.width:t=>t.height,padding:a?r:o},c={max:a?i:n,fn:a?t=>t.height:t=>t.width,padding:a?o:r};let d=0;const u=[];for(;d<e.length;){const t=vf(e.slice(d),d,l,c,s);if(!t)return;d+=t.processedBBoxCount,u.push(t.pageIndices)}return function(t,e,i,n,o){let r=0,s=0;return{pages:t.map(t=>{"horizontal"===e&&(t=function(t){const e=[];for(const i of t[0])e.push([]);return t.forEach((t,i)=>{t.forEach((t,n)=>{e[n][i]=t})}),e}(t));let a=0;const l=t.map(t=>{const e=t.map(t=>(a=Math.max(t,a),i[t]));let r=0,s=0;return e.forEach(t=>{r+=t.height+n,s=Math.max(s,t.width+o)}),{indices:t,bboxes:e,columnHeight:Math.ceil(r),columnWidth:Math.ceil(s)}});let c=0,d=0;return l.forEach(t=>{c+=t.columnWidth,d=Math.max(d,t.columnHeight)}),r=Math.max(c,r),s=Math.max(d,s),{columns:l,startIndex:t[0][0],endIndex:a,pageWidth:c,pageHeight:d}}),maxPageWidth:r,maxPageHeight:s}}(u,t,e,o,r)}function vf(t,e,i,n,o){let r=function(t,e){const i=t.length;let n=0;for(let o=0;o<i;o++)if(n+=e.fn(t[o])+e.padding,n>e.max){return i/o<2?Math.ceil(i/2):o}return i}(t,i);if(r<1){if(!o)return;r=1}for(let s=r;s>=1;s--){const r=yf(t,e,s,i,n,o);if(null==r&&s<=1)return;if(null==r)continue;if("number"==typeof r){if(r<=1)return;s=r<s&&r>1?r:s;continue}return{processedBBoxCount:r.length*r[0].length,pageIndices:r}}}function yf(t,e,i,n,o,r){var s;const a=[];let l=0,c=0,d=[];const u=[];for(let h=0;h<t.length;h++){const p=(h+i)%i;0===p&&(l+=c,c=0,d.length>0&&a.push(d),d=[]);const f=n.fn(t[h])+n.padding;u[p]=Math.max(null!==(s=u[p])&&void 0!==s?s:0,f),c=Math.max(c,o.fn(t[h])+o.padding);const g=l+c,v=!r||a.length>0;if(g>o.max&&v){d=[];break}if(u.reduce((t,e)=>t+e,0)>n.max&&!r)return u.length<i?u.length:void 0;d.push(h+e)}return d.length>0&&a.push(d),a.length>0?a:void 0}class mf extends Cu{updatePath(){const t=this.size/4.2;super.applyPath(t,mf.moves)}}mf.className="Cross",mf.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}];class bf extends Cu{updatePath(){const t=this.size/2;super.applyPath(t,bf.moves)}}bf.className="Diamond",bf.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}];class Sf extends Cu{rad(t){return t/180*Math.PI}updatePath(){const{x:t,path:e,size:i,rad:n}=this,o=i/4,r=this.y+o/2;e.clear(),e.arc(t-o,r-o,o,n(130),n(330)),e.arc(t+o,r-o,o,n(220),n(50)),e.lineTo(t,r+o),e.closePath()}}Sf.className="Heart";class xf extends Cu{updatePath(){const t=this.size/3;super.applyPath(t,xf.moves)}}xf.className="Plus",xf.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];class Cf extends Cu{updatePath(){const{path:t,x:e,y:i}=this,n=this.size/2;t.clear(),t.moveTo(this.align(e-n),this.align(i-n)),t.lineTo(this.align(e+n),this.align(i-n)),t.lineTo(this.align(e+n),this.align(i+n)),t.lineTo(this.align(e-n),this.align(i+n)),t.closePath()}}Cf.className="Square";class wf extends Cu{updatePath(){const t=1.1*this.size;super.applyPath(t,wf.moves)}}wf.className="Triangle",wf.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];const Ef={circle:wu,cross:mf,diamond:bf,heart:Sf,plus:xf,square:Cf,triangle:wf},Of=Object.keys(Ef);function Df(t){return Of.includes(t)}function Af(t=Cf){return Df(t)?Ef[t]:"function"==typeof t?t:Cf}class Tf extends kd{constructor(){super({name:"markerLabelGroup"}),this.label=new Nc,this._marker=new Cf,this._markerSize=15,this._spacing=8;const t=this.label;t.textBaseline="middle",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.y=Tc.has.textMetrics?1:0,this.append([this.marker,t]),this.update()}set marker(t){this._marker!==t&&(this.removeChild(this._marker),this._marker=t,this.appendChild(t),this.update())}get marker(){return this._marker}set markerSize(t){this._markerSize!==t&&(this._markerSize=t,this.update())}get markerSize(){return this._markerSize}set spacing(t){this._spacing!==t&&(this._spacing=t,this.update())}get spacing(){return this._spacing}update(){const t=this.marker,e=this.markerSize;t.size=e,this.label.x=e/2+this.spacing}render(t){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,super.render(t)}}Tf.className="MarkerLabel",ba([Vc("label"),Sa("design:type",String)],Tf.prototype,"text",void 0),ba([Vc("label"),Sa("design:type",String)],Tf.prototype,"fontStyle",void 0),ba([Vc("label"),Sa("design:type",String)],Tf.prototype,"fontWeight",void 0),ba([Vc("label"),Sa("design:type",Number)],Tf.prototype,"fontSize",void 0),ba([Vc("label"),Sa("design:type",String)],Tf.prototype,"fontFamily",void 0),ba([Vc("label","fill"),Sa("design:type",String)],Tf.prototype,"color",void 0),ba([Vc("marker","fill"),Sa("design:type",String)],Tf.prototype,"markerFill",void 0),ba([Vc("marker","stroke"),Sa("design:type",String)],Tf.prototype,"markerStroke",void 0),ba([Vc("marker","strokeWidth"),Sa("design:type",Number)],Tf.prototype,"markerStrokeWidth",void 0),ba([Vc("marker","fillOpacity"),Sa("design:type",Number)],Tf.prototype,"markerFillOpacity",void 0),ba([Vc("marker","strokeOpacity"),Sa("design:type",Number)],Tf.prototype,"markerStrokeOpacity",void 0);class kf{constructor(){this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}}ba([dl(Rl),Sa("design:type",String)],kf.prototype,"color",void 0),ba([dl(Kl),Sa("design:type",String)],kf.prototype,"fontStyle",void 0),ba([dl(Xl),Sa("design:type",String)],kf.prototype,"fontWeight",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],kf.prototype,"fontSize",void 0),ba([dl(El),Sa("design:type",String)],kf.prototype,"fontFamily",void 0);class Mf{constructor(){this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}}ba([dl(Fl(0)),Sa("design:type",Object)],Mf.prototype,"size",void 0),ba([dl(Pl),Sa("design:type",String)],Mf.prototype,"fill",void 0),ba([dl(_l(0,1)),Sa("design:type",Number)],Mf.prototype,"fillOpacity",void 0),ba([dl(Pl),Sa("design:type",String)],Mf.prototype,"stroke",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],Mf.prototype,"strokeWidth",void 0),ba([dl(Fl(0,1)),Sa("design:type",Number)],Mf.prototype,"strokeOpacity",void 0);class Rf{constructor(t){this.parent=t,this.shape=wf,this.size=15,this.padding=8}}ba([jc({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}}),Sa("design:type",Object)],Rf.prototype,"shape",void 0),ba([dl(Fl(0)),Sa("design:type",Object)],Rf.prototype,"size",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],Rf.prototype,"padding",void 0);class Pf{constructor(t,e,i,n){this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.interactionManager=i,this.cursorManager=n,this.id=mc(this),this.group=new kd({name:"pagination"}),this.labelNode=new Nc,this.marker=new Rf(this),this.activeStyle=new Mf,this.inactiveStyle=new Mf,this.highlightStyle=new Mf,this.label=new kf,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new wf,this._previousButton=new wf;const{labelNode:o}=this;o.textBaseline="middle",o.fontSize=12,o.fontFamily="Verdana, sans-serif",o.fill="black",o.y=Tc.has.textMetrics?1:0,this.group.append([this.nextButton,this.previousButton,o]),this.interactionManager.addListener("click",t=>this.onPaginationClick(t)),this.interactionManager.addListener("hover",t=>this.onPaginationMouseMove(t)),this.update(),this.updateMarkers()}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(t){switch(this._orientation=t,t){case"horizontal":this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break;case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}set nextButton(t){this._nextButton!==t&&(this.group.removeChild(this._nextButton),this._nextButton=t,this.group.appendChild(t))}get nextButton(){return this._nextButton}set previousButton(t){this._previousButton!==t&&(this.group.removeChild(this._previousButton),this._previousButton=t,this.group.appendChild(t))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:t,padding:e}=this.marker;this.nextButton.size=t,this.previousButton.size=t,this.labelNode.x=t/2+e}updateNextButtonPosition(){const t=this.labelNode.computeBBox();this.nextButton.translationX=t.x+t.width+this.marker.size/2+this.marker.padding}updateLabel(){const{currentPage:t,totalPages:e,labelNode:i,label:{color:n,fontStyle:o,fontWeight:r,fontSize:s,fontFamily:a}}=this;i.text=`${t+1} / ${e}`,i.fill=n,i.fontStyle=o,i.fontWeight=r,i.fontSize=s,i.fontFamily=a}updateMarkers(){const{nextButton:t,previousButton:e,nextButtonDisabled:i,previousButtonDisabled:n,activeStyle:o,inactiveStyle:r,highlightStyle:s,highlightActive:a}=this,l=(t,e)=>e?r:t===a?s:o;this.updateMarker(t,l("next",i)),this.updateMarker(e,l("previous",n))}updateMarker(t,e){var i;const{size:n}=this.marker;t.size=n,t.fill=e.fill,t.fillOpacity=null!==(i=e.fillOpacity)&&void 0!==i?i:1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity}enableOrDisableButtons(){const{currentPage:t,totalPages:e}=this,i=0===e,n=t===e-1,o=0===t;this.nextButtonDisabled=n||i,this.previousButtonDisabled=o||i}nextButtonContainsPoint(t,e){return!this.nextButtonDisabled&&this.nextButton.containsPoint(t,e)}previousButtonContainsPoint(t,e){return!this.previousButtonDisabled&&this.previousButton.containsPoint(t,e)}onPaginationClick(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.incrementPage(),this.onPaginationChanged(),t.consume()):this.previousButtonContainsPoint(e,i)&&(this.decrementPage(),this.onPaginationChanged(),t.consume())}onPaginationMouseMove(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(Kp.SCENE_RENDER)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const t=Af(this.marker.shape||wf);this.previousButton=new t,this.nextButton=new t,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(Kp.SCENE_RENDER)}attachPagination(t){t.append(this.group)}computeBBox(){return this.group.computeBBox()}}Pf.className="Pagination";const Nf=["horizontal","vertical"],Lf=hl((t,e)=>pl(t,e,t=>Nf.includes(t)),"expecting an orientation keyword such as 'horizontal' or 'vertical'");class If{constructor(){this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}}ba([dl(_l(0)),Sa("design:type",Number)],If.prototype,"maxLength",void 0),ba([dl(Rl),Sa("design:type",String)],If.prototype,"color",void 0),ba([dl(Kl),Sa("design:type",String)],If.prototype,"fontStyle",void 0),ba([dl(Xl),Sa("design:type",String)],If.prototype,"fontWeight",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],If.prototype,"fontSize",void 0),ba([dl(El),Sa("design:type",String)],If.prototype,"fontFamily",void 0),ba([dl(xl),Sa("design:type",Function)],If.prototype,"formatter",void 0);class Ff{constructor(){this.size=15,this._shape=void 0,this.padding=8,this.strokeWidth=void 0}set shape(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()}get shape(){return this._shape}}ba([dl(Fl(0)),Sa("design:type",Object)],Ff.prototype,"size",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],Ff.prototype,"padding",void 0),ba([dl(_l(0)),Sa("design:type",Object)],Ff.prototype,"strokeWidth",void 0);class _f{constructor(){this.marker=new Ff,this.label=new If,this.maxWidth=void 0,this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0}}ba([dl(_l(0)),Sa("design:type",Number)],_f.prototype,"maxWidth",void 0),ba([dl(Fl(0)),Sa("design:type",Object)],_f.prototype,"paddingX",void 0),ba([dl(Fl(0)),Sa("design:type",Object)],_f.prototype,"paddingY",void 0),ba([dl(Cl),Sa("design:type",Boolean)],_f.prototype,"toggleSeriesVisible",void 0);class Gf{constructor(){this.legendItemClick=void 0,this.legendItemDoubleClick=void 0}}ba([dl(xl),Sa("design:type",Function)],Gf.prototype,"legendItemClick",void 0);class Bf{set data(t){this._data=t,this.updateGroupVisibility()}get data(){return this._data}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}getOrientation(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}constructor(t){this.ctx=t,this.id=mc(this),this.group=new kd({name:"legend",layer:!0,zIndex:xu.LEGEND_ZINDEX}),this.itemSelection=Md.select(this.group,Tf),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.item=new _f,this.listeners=new Gf,this.truncatedItems=new Set,this._data=[],this._enabled=!0,this.position="bottom",this.maxWidth=void 0,this.maxHeight=void 0,this.reverseOrder=void 0,this.destroyFns=[],this.spacing=20,this.characterWidths=new Map,this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new Pf(e=>t.updateService.update(e),t=>this.updatePageNumber(t),t.interactionManager,t.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;const e={bypassPause:["animation"]};this.destroyFns.push(t.interactionManager.addListener("click",t=>this.checkLegendClick(t),e),t.interactionManager.addListener("dblclick",t=>this.checkLegendDoubleClick(t),e),t.interactionManager.addListener("hover",t=>this.handleLegendMouseMove(t)),t.layoutService.addListener("start-layout",t=>this.positionLegend(t.shrinkRect)),()=>this.detachLegend())}destroy(){this.destroyFns.forEach(t=>t())}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,pc.MINOR)}getCharacterWidths(t){const{characterWidths:e}=this;if(e.has(t))return e.get(t);const i={"...":Tc.getTextSize("...",t).width};return e.set(t,i),i}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.append(this.group)}detachLegend(){var t;null===(t=this.group.parent)||void 0===t||t.removeChild(this.group)}getItemLabel(t){const{ctx:{callbackCache:e}}=this,{formatter:i}=this.item.label;return i?e.call(i,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text}performLayout(t,e){const{paddingX:i,paddingY:n,label:o,maxWidth:r,marker:{size:s,padding:a,shape:l},label:{maxLength:c=1/0,fontStyle:d,fontWeight:u,fontSize:h,fontFamily:p}}=this.item,f=[...this.data];this.reverseOrder&&f.reverse(),this.itemSelection.update(f);const g=[],v=Lc(o),y=null!=r?r:.8*t,m=s+a+i;if(this.itemSelection.each((t,e)=>{var i;const n=Af(null!=l?l:e.marker.shape);t.marker&&t.marker instanceof n||(t.marker=new n),t.markerSize=s,t.spacing=a,t.fontStyle=d,t.fontWeight=u,t.fontSize=h,t.fontFamily=p;const o=null!==(i=e.itemId)&&void 0!==i?i:e.id,r=this.getItemLabel(e),f=(null!=r?r:"<unknown>").replace(/\r?\n/g," ");t.text=this.truncate(f,c,y,m,v,o),g.push(t.computeBBox())}),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return!1;const b=this.size,S=this.oldSize;b[0]=t,b[1]=e,b[0]===S[0]&&b[1]===S[1]||(S[0]=b[0],S[1]=b[1]);const{pages:x,maxPageHeight:C,maxPageWidth:w}=this.updatePagination(g,t,e);this.pages=x,this.maxPageSize=[w-i,C-n];const E=this.pagination.currentPage,O=this.pages[E];this.pages.length<1||!O?this.visible=!1:(this.visible=!0,this.updatePositions(E),this.update())}truncate(t,e,i,n,o,r){const s=t.split("");let a=!1;t.length>e&&(t=""+t.substring(0,e),a=!0);if(Math.floor(n+Tc.getTextSize(t,o).width)>i){let e="";const r=this.getCharacterWidths(o);let l=n+r["..."];for(const t of s){if(r[t]||(r[t]=Tc.getTextSize(t,o).width),l+=r[t],l>i)break;e+=t}t=e,a=!0}return a?(t+="...",this.truncatedItems.add(r)):this.truncatedItems.delete(r),t}updatePagination(t,e,i){const n=this.getOrientation(),o=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=n,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:r,maxPageHeight:s,maxPageWidth:a,paginationBBox:l,paginationVertical:c}=this.calculatePagination(t,e,i),d=r.findIndex(t=>t.endIndex>=o);this.pagination.currentPage=Math.min(Math.max(d,0),r.length-1);const{paddingX:u,paddingY:h}=this.item,p=a-u,f=s-h;let g=0,v=-l.y-this.item.marker.size/2;return c?v+=f+8:(g+=-l.x+p+8,v+=(f-l.height)/2),this.pagination.translationX=g,this.pagination.translationY=v,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:s,maxPageWidth:a,pages:r}}calculatePagination(t,e,i){var n,o,r;const{paddingX:s,paddingY:a}=this.item,l=this.getOrientation(),c=["left","right"].includes(this.position);let d=this.pagination.computeBBox(),u=new Sc(0,0,0,0),h=[],p=0,f=0,g=0;const v=t=>{const{width:e,height:i}=t;return e===d.width&&i===d.height},y=void 0!==this.maxWidth||void 0!==this.maxHeight;do{if(g++>10){La.warn("unable to find stable legend layout.");break}d=u;const v=e-(c?0:d.width),m=gf({orientation:l,bboxes:t,maxHeight:i-(c?d.height:0),maxWidth:v,itemPaddingY:a,itemPaddingX:s,forceResult:y});h=null!==(n=null==m?void 0:m.pages)&&void 0!==n?n:[],p=null!==(o=null==m?void 0:m.maxPageWidth)&&void 0!==o?o:0,f=null!==(r=null==m?void 0:m.maxPageHeight)&&void 0!==r?r:0;const b=h.length;if(this.pagination.visible=b>1,this.pagination.totalPages=b,this.pagination.update(),u=this.pagination.computeBBox(),!this.pagination.visible)break}while(!v(u));return{maxPageWidth:p,maxPageHeight:f,pages:h,paginationBBox:d,paginationVertical:c}}updatePositions(t=0){const{item:{paddingY:e},itemSelection:i,pages:n}=this;if(n.length<1||!n[t])return;const{columns:o,startIndex:r,endIndex:s}=n[t];let a=0,l=0;const c=o.length,d=o[0].indices.length,u="horizontal"===this.getOrientation(),h=o[0].bboxes[0].height+e,p=[];i.each((t,e,i)=>{var n,f;if(i<r||i>s)return void(t.visible=!1);const g=i-r;let v=0,y=0;u?(v=g%c,y=Math.floor(g/c)):(v=Math.floor(g/d),y=g%d),t.visible=!0;const m=o[v];m&&(l=h*y,a=null!==(n=p[y])&&void 0!==n?n:0,p[y]=(null!==(f=p[y])&&void 0!==f?f:0)+m.columnWidth,t.translationX=Math.floor(a),t.translationY=Math.floor(l))})}updatePageNumber(t){const{pages:e}=this,{startIndex:i,endIndex:n}=e[t];0===i?this.paginationTrackingIndex=0:t===e.length-1?this.paginationTrackingIndex=n:this.paginationTrackingIndex=Math.floor((i+n)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.ctx.updateService.update(Kp.SCENE_RENDER)}update(){const{label:{color:t},marker:e}=this.item;this.itemSelection.each((i,n)=>{var o;const r=n.marker;i.markerFill=r.fill,i.markerStroke=r.stroke,i.markerStrokeWidth=null!==(o=e.strokeWidth)&&void 0!==o?o:Math.min(2,r.strokeWidth),i.markerFillOpacity=r.fillOpacity,i.markerStrokeOpacity=r.strokeOpacity,i.opacity=n.enabled?1:.5,i.color=t})}getDatumForPoint(t,e){const i=[],n={dist:1/0,datum:void 0};for(const o of this.group.children){if(!o.visible)continue;if(!(o instanceof Tf))continue;const r=o.computeBBox();if(r.grow(this.item.paddingX/2,"horizontal"),r.grow(this.item.paddingY/2,"vertical"),r.containsPoint(t,e))return o.datum;const s=t-r.x-this.item.paddingX/2,a=e-r.y-this.item.paddingY/2,l=Math.pow(s,2)+Math.pow(a,2);s>=0&&a>=0&&l<n.dist&&(n.dist=l,n.datum=o.datum),i.push(r)}if(Sc.merge(i).containsPoint(t,e))return n.datum}computeBBox(){return this.group.computeBBox()}computePagedBBox(){const t=this.group.computeBBox();if(this.pages.length<=1)return t;const[e,i]=this.maxPageSize;return t.height=Math.max(i,t.height),t.width=Math.max(e,t.width),t}checkLegendClick(t){const{listeners:{legendItemClick:e},ctx:{dataService:i,highlightManager:n},item:{toggleSeriesVisible:o}}=this,{offsetX:r,offsetY:s}=t,a=this.computeBBox(),l=this.group.visible&&a.containsPoint(r,s),c=this.getDatumForPoint(r,s);if(!l||!c)return;const{id:d,itemId:u,enabled:h}=c,p=i.getSeries().find(t=>t.id===d);if(!p)return;t.consume();let f=h;o&&(f=!h,this.ctx.chartEventManager.legendItemClick(p,u,f,c.legendItemName)),f?n.updateHighlight(this.id,{series:p,itemId:u,datum:void 0}):n.updateHighlight(this.id),this.ctx.updateService.update(Kp.PROCESS_DATA,{forceNodeDataRefresh:!0}),null==e||e({type:"click",enabled:f,itemId:u,seriesId:p.id})}checkLegendDoubleClick(t){var e;const{listeners:{legendItemDoubleClick:i},ctx:{dataService:n},item:{toggleSeriesVisible:o}}=this,{offsetX:r,offsetY:s}=t;if("integrated"===this.ctx.mode)return;const a=this.computeBBox(),l=this.group.visible&&a.containsPoint(r,s),c=this.getDatumForPoint(r,s);if(!l||!c)return;const{id:d,itemId:u,seriesId:h}=c,p=n.getSeries(),f=p.find(t=>t.id===d);if(f){if(t.consume(),o){const t={},i=p.flatMap(t=>t.getLegendData("category"));i.forEach(e=>{var i,n;null!==(i=t[n=e.seriesId])&&void 0!==i||(t[n]=0),e.enabled&&t[e.seriesId]++});const n=i.find(t=>t.itemId===u&&t.seriesId===h);this.ctx.chartEventManager.legendItemDoubleClick(f,u,null!==(e=null==n?void 0:n.enabled)&&void 0!==e&&e,t,null==n?void 0:n.legendItemName)}this.ctx.updateService.update(Kp.PROCESS_DATA,{forceNodeDataRefresh:!0}),null==i||i({type:"dblclick",enabled:!0,itemId:u,seriesId:f.id})}}handleLegendMouseMove(t){var e;const{enabled:i,item:{toggleSeriesVisible:n},listeners:o}=this;if(!i)return;const r=this.computeBBox(),{pageX:s,pageY:a,offsetX:l,offsetY:c}=t,d=this.group.visible&&r.containsPoint(l,c);if(!d)return this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),void this.ctx.tooltipManager.removeTooltip(this.id);t.consume();const u=this.getDatumForPoint(l,c);if(!(d&&void 0!==u))return this.ctx.cursorManager.updateCursor(this.id),void this.ctx.highlightManager.updateHighlight(this.id);const h=u?this.ctx.dataService.getSeries().find(t=>t.id===(null==u?void 0:u.id)):void 0;u&&this.truncatedItems.has(null!==(e=u.itemId)&&void 0!==e?e:u.id)?this.ctx.tooltipManager.updateTooltip(this.id,{pageX:s,pageY:a,offsetX:l,offsetY:c,event:t,showArrow:!1},ah({content:this.getItemLabel(u)})):this.ctx.tooltipManager.removeTooltip(this.id),(n||null!=o.legendItemClick||null!=o.legendItemDoubleClick)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),(null==u?void 0:u.enabled)&&h?this.ctx.highlightManager.updateHighlight(this.id,{series:h,itemId:null==u?void 0:u.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}positionLegend(t){const e=t.clone();if(!this.enabled||!this.data.length)return{shrinkRect:e};const[i,n]=this.calculateLegendDimensions(t);this.group.translationX=0,this.group.translationY=0,this.performLayout(i,n);const o=this.computePagedBBox(),r=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return t.height-o.height;case"right":default:return t.width-o.width}};if(this.visible){let i,n;switch(this.position){case"top":case"bottom":i=(t.width-o.width)/2,n=r(),e.shrink(o.height,this.position);break;case"left":case"right":default:i=r(),n=(t.height-o.height)/2,e.shrink(o.width,this.position)}this.group.translationX=Math.floor(-o.x+t.x+i),this.group.translationY=Math.floor(-o.y+t.y+n)}if(this.visible&&this.enabled&&this.data.length){const t=this.spacing;e.shrink(t,this.position);const i=o.clone();i.x+=this.group.translationX,i.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,i)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:e}}calculateLegendDimensions(t){const{width:e,height:i}=t,n=e/i;let o,r;switch(this.position){case"top":case"bottom":const t=n<1?Math.min(.5,1/n*.2):.2;o=this.maxWidth?Math.min(this.maxWidth,e):e,r=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*t);break;case"left":case"right":default:const s=n>1?Math.min(.5,.25*n):.25;o=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*s),r=this.maxHeight?Math.min(this.maxHeight,i):i}return[o,r]}}Bf.className="Legend",ba([dl(Cl),Sa("design:type",Object)],Bf.prototype,"_enabled",void 0),ba([dl(ic),Sa("design:type",String)],Bf.prototype,"position",void 0),ba([dl(_l(0)),Sa("design:type",Number)],Bf.prototype,"maxWidth",void 0),ba([dl(_l(0)),Sa("design:type",Number)],Bf.prototype,"maxHeight",void 0),ba([dl(wl),Sa("design:type",Boolean)],Bf.prototype,"reverseOrder",void 0),ba([dl(Lf),Sa("design:type",String)],Bf.prototype,"orientation",void 0),ba([dl(Fl(0)),Sa("design:type",Object)],Bf.prototype,"spacing",void 0);class Vf{constructor(t,e,i){this.text=void 0,this.className=t,this.parentElement=e,this.document=i}show(t){var e,i;let n=this.element;if(n||(n=this.document.createElement("div"),n.className=this.className,this.element=n),n.style.position="absolute",n.style.left=t.x+"px",n.style.top=t.y+"px",n.style.width=t.width+"px",n.style.height=t.height+"px",this.renderer)n.innerHTML=this.renderer();else{const t=this.document.createElement("div");t.style.alignItems="center",t.style.boxSizing="border-box",t.style.display="flex",t.style.justifyContent="center",t.style.margin="8px",t.style.height="100%",t.style.font="12px Verdana, sans-serif",t.innerText=null!==(e=this.text)&&void 0!==e?e:"No data to display",n.append(t)}null===(i=this.parentElement)||void 0===i||i.append(n)}hide(){var t;null===(t=this.element)||void 0===t||t.remove(),this.element=void 0}}ba([dl(xl),Sa("design:type",Function)],Vf.prototype,"renderer",void 0),ba([dl(Ol),Sa("design:type",String)],Vf.prototype,"text",void 0);class jf{constructor(t){this.noData=new Vf("ag-chart-no-data-overlay",t,t.ownerDocument)}}class Wf{constructor(t){this.groups={},this.series={},this.expectedSeriesCount=1,this.mode="normal",this.rootGroup=t}setSeriesCount(t){this.expectedSeriesCount=t}requestGroup(t){var e,i,n,o;const{id:r,type:s,rootGroup:a,highlightGroup:l,annotationGroup:c,seriesGrouping:d}=t,{groupIndex:u=r}=null!=d?d:{};if(null!=this.series[r])throw new Error("AG Charts - series already has an allocated layer: "+this.series[r]);0===Object.keys(this.series).length&&(this.mode=this.expectedSeriesCount>=30?"aggressive-grouping":"normal"),null!==(e=(n=this.groups)[s])&&void 0!==e||(n[s]={});const h=this.lookupIdx(u);let p=this.groups[s][h];return p||(p=null!==(i=(o=this.groups[s])[h])&&void 0!==i?i:o[h]={seriesIds:[],group:this.rootGroup.appendChild(new kd({name:s+"-content",layer:!0,zIndex:xu.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("data")})),highlight:this.rootGroup.appendChild(new kd({name:s+"-highlight",layer:!0,zIndex:xu.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("highlight")})),annotation:this.rootGroup.appendChild(new kd({name:s+"-annotation",layer:!0,zIndex:xu.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("annotation")}))}),this.series[r]={layerState:p,seriesConfig:t},p.seriesIds.push(r),p.group.appendChild(a),p.highlight.appendChild(l),p.annotation.appendChild(c),p.group}changeGroup(t){var e,i;const{id:n,seriesGrouping:o,type:r,rootGroup:s,highlightGroup:a,annotationGroup:l,oldGrouping:c}=t,{groupIndex:d=n}=null!=o?o:{};(null===(i=null===(e=this.groups[r])||void 0===e?void 0:e[d])||void 0===i?void 0:i.seriesIds.includes(n))||(null!=this.series[n]&&this.releaseGroup({id:n,seriesGrouping:c,type:r,rootGroup:s,highlightGroup:a,annotationGroup:l}),this.requestGroup(t))}releaseGroup(t){var e,i,n,o,r;const{id:s,seriesGrouping:a,rootGroup:l,highlightGroup:c,annotationGroup:d,type:u}=t,{groupIndex:h=s}=null!=a?a:{};if(null==this.series[s])throw new Error("AG Charts - series doesn't have an allocated layer: "+s);const p=this.lookupIdx(h),f=null!==(i=null===(e=this.groups[u])||void 0===e?void 0:e[p])&&void 0!==i?i:null===(n=this.series[s])||void 0===n?void 0:n.layerState;if(f&&(f.seriesIds=f.seriesIds.filter(t=>t!==s),f.group.removeChild(l),f.highlight.removeChild(c),f.annotation.removeChild(d)),0===(null==f?void 0:f.seriesIds.length))this.rootGroup.removeChild(f.group),this.rootGroup.removeChild(f.highlight),this.rootGroup.removeChild(f.annotation),delete this.groups[u][p],delete this.groups[u][s];else if((null==f?void 0:f.seriesIds.length)>0){const t=null===(r=this.series[null===(o=null==f?void 0:f.seriesIds)||void 0===o?void 0:o[0]])||void 0===r?void 0:r.seriesConfig;f.group.zIndexSubOrder=null==t?void 0:t.getGroupZIndexSubOrder("data"),f.highlight.zIndexSubOrder=null==t?void 0:t.getGroupZIndexSubOrder("highlight"),f.annotation.zIndexSubOrder=null==t?void 0:t.getGroupZIndexSubOrder("annotation")}delete this.series[s]}lookupIdx(t){return"normal"===this.mode?t:"string"!=typeof t||(t=Number(t.split("-").slice(-1)[0]))?Math.floor(30*Math.max(Math.min(t/this.expectedSeriesCount,1),0)):0}destroy(){for(const t of Object.values(this.groups))for(const e of Object.values(t))this.rootGroup.removeChild(e.group),this.rootGroup.removeChild(e.highlight),this.rootGroup.removeChild(e.annotation);this.groups={},this.series={}}}class zf{constructor(){this.groups={}}registerSeries({id:t,seriesGrouping:e,visible:i,type:n}){var o,r;e&&(null!==(o=(r=this.groups)[n])&&void 0!==o||(r[n]={}),this.groups[n][t]={grouping:e,visible:i})}deregisterSeries({id:t,type:e}){this.groups[e]&&delete this.groups[e][t],this.groups[e]&&0===Object.keys(this.groups[e]).length&&delete this.groups[e]}getVisiblePeerGroupIndex({type:t,seriesGrouping:e}){var i;if(!e)return{visibleGroupCount:1,index:0};const n=[...Object.entries(null!==(i=this.groups[t])&&void 0!==i?i:{}).filter(([t,e])=>e.visible).reduce((t,[e,i])=>(i.visible&&t.add(i.grouping.groupIndex),t),new Set).values()];return n.sort((t,e)=>t-e),{visibleGroupCount:n.length,index:n.indexOf(e.groupIndex)}}}class Uf{constructor(t,e){this.chartLike=t,this.layoutService=e,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("layout-complete",t=>this.layoutComplete(t)),this.layoutService.addListener("start-layout",t=>this.positionPadding(t.shrinkRect)),this.layoutService.addListener("start-layout",t=>this.positionCaptions(t.shrinkRect)))}destroy(){this.destroyFns.forEach(t=>t())}layoutComplete({clipSeries:t,series:{paddedRect:e}}){const{seriesArea:i,seriesRoot:n}=this.chartLike;i.clip||t?n.setClipRectInGroupCoordinateSpace(e):n.setClipRectInGroupCoordinateSpace()}positionPadding(t){const{padding:e}=this.chartLike;return t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),{shrinkRect:t}}positionCaptions(t){var e,i,n,o;const{title:r,subtitle:s,footnote:a}=this.chartLike,l=t.clone(),c=e=>{var i;const n=t.height/10,o=null!==(i=e.lineHeight)&&void 0!==i?i:e.fontSize*Nc.defaultLineHeightRatio,r=t.width,s=Math.max(o,n);e.computeTextWrap(r,s)},d=(t,e)=>{const i=l.y;t.node.x=l.x+l.width/2,t.node.y=i,t.node.textBaseline="top",c(t);const n=t.node.computeBBox(),o=Math.ceil(n.y-i+n.height+e);l.shrink(o,"top")};if(s&&(s.node.visible=null!==(e=s.enabled)&&void 0!==e&&e),r&&(r.node.visible=r.enabled,r.node.visible)){const t=(null==s?void 0:s.node.visible)?Wc.SMALL_PADDING:Wc.LARGE_PADDING;d(r,null!==(i=r.spacing)&&void 0!==i?i:t)}return s&&s.node.visible&&d(s,null!==(n=s.spacing)&&void 0!==n?n:0),a&&(a.node.visible=a.enabled,a.node.visible&&((t,e)=>{const i=l.y+l.height;t.node.x=l.x+l.width/2,t.node.y=i,t.node.textBaseline="bottom",c(t);const n=t.node.computeBBox(),o=Math.ceil(i-n.y+e);l.shrink(o,"bottom")})(a,null!==(o=a.spacing)&&void 0!==o?o:0)),{shrinkRect:l}}}class Hf extends Au{constructor(t){super(),this.updateCallback=t}update(t=Kp.FULL,{forceNodeDataRefresh:e=!1,skipAnimations:i=!1}={}){this.updateCallback(t,{forceNodeDataRefresh:e,skipAnimations:i})}dispatchUpdateComplete(t){const e={type:"update-complete",minRect:t};this.dispatch("update-complete",e)}}function Kf(t){let e,i;if(null!=t.window)e=t.window;else if("undefined"!=typeof window)e=window;else{if("undefined"==typeof global)throw new Error("AG Charts - unable to resolve global window");e=global.window}if(null!=t.document)i=t.document;else if("undefined"!=typeof document)i=document;else{if("undefined"==typeof global)throw new Error("AG Charts - unable to resolve global document");i=global.document}return{document:i,window:e,overrideDevicePixelRatio:t.overrideDevicePixelRatio,sceneMode:t.sceneMode}}class Yf{constructor(){this.clip=void 0,this.padding=new np(0)}}ba([dl(wl),Sa("design:type",Boolean)],Yf.prototype,"clip",void 0);class Xf extends Tu{getOptions(){var t;const{queuedUserOptions:e}=this;return Ka([null!==(t=e[e.length-1])&&void 0!==t?t:this.userOptions])}autoSizeChanged(t){const{style:e}=this.element;if(t){if(e.display="block",e.width="100%",e.height="100%",!this._lastAutoSize)return;this.resize(void 0,void 0,"autoSize option")}else e.display="inline-block",e.width="auto",e.height="auto"}download(t,e){this.scene.download(t,e)}get destroyed(){return this._destroyed}constructor(t,e){var i;super(),this.id=mc(this),this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this.seriesRoot=new kd({name:this.id+"-Series-root"}),this.debug=_a.create(),this.extraDebugStats={},this.container=void 0,this.data=[],this._firstAutoSize=!0,this.padding=new np(20),this.seriesArea=new Yf,this.title=void 0,this.subtitle=void 0,this.footnote=void 0,this.mode="standalone",this._destroyed=!1,this._destroyFns=[],this.modules={},this.legendModules={},this.processors=[],this.legends=new Map,this._pendingFactoryUpdatesCount=0,this._performUpdateNoRenderCount=0,this._performUpdateType=Kp.NONE,this._performUpdateSkipAnimations=!1,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new Wp,this.updateRequestors={},this.performUpdateTrigger=zp((t,e=0)=>setTimeout(t,e),({count:t})=>xa(this,void 0,void 0,(function*(){this._destroyed||this.updateMutex.acquire(()=>xa(this,void 0,void 0,(function*(){try{yield this.performUpdate(t)}catch(t){this._lastPerformUpdateError=t,La.error("update error",t)}})))}))),this._axes=[],this._series=[],this.lastInteractionEvent=void 0,this.pointerScheduler=function(t){return zp((t,e)=>requestAnimationFrame(t),t)}(()=>{this.lastInteractionEvent&&this.handlePointer(this.lastInteractionEvent),this.lastInteractionEvent=void 0}),this.onSeriesNodeClick=t=>{const e=Object.assign(Object.assign({},t),{type:"seriesNodeClick"});Object.defineProperty(e,"series",{enumerable:!1,get:()=>t.series}),this.fireEvent(e)},this.onSeriesNodeDoubleClick=t=>{const e=Object.assign(Object.assign({},t),{type:"seriesNodeDoubleClick"});this.fireEvent(e)},this.specialOverrides=Kf(t);const{window:n,document:o}=this.specialOverrides,r=null==e?void 0:e.scene,s=null!==(i=null==e?void 0:e.element)&&void 0!==i?i:o.createElement("div"),a=null==e?void 0:e.container,l=new kd({name:"root"});l.visible=!1,l.append(this.seriesRoot),this.axisGridGroup=new kd({name:"Axes-Grids",layer:!0,zIndex:xu.AXIS_GRID_ZINDEX}),l.appendChild(this.axisGridGroup),this.axisGroup=new kd({name:"Axes",layer:!0,zIndex:xu.AXIS_ZINDEX}),l.appendChild(this.axisGroup),this.element=s,s.classList.add("ag-chart-wrapper"),s.style.position="relative",this.scene=null!=r?r:new Bp(this.specialOverrides),this.scene.root=l,this.scene.container=s,this.autoSize=!0,this.chartEventManager=new rf,this.cursorManager=new sf(s),this.highlightManager=new af,this.interactionManager=new df(s,o,n),this.zoomManager=new hf,this.dataService=new Qp(()=>this.series),this.layoutService=new ff,this.updateService=new Hf((t=Kp.FULL,{forceNodeDataRefresh:e,skipAnimations:i})=>this.update(t,{forceNodeDataRefresh:e,skipAnimations:i})),this.seriesStateManager=new zf,this.seriesLayerManager=new Wf(this.seriesRoot),this.callbackCache=new jp,this.animationManager=new nf(this.interactionManager,this.updateMutex),this.animationManager.skip(),this.animationManager.play(),this.processors=[new Uf(this,this.layoutService)],this.tooltip=new uh(this.scene.canvas.element,o,n,o.body),this.tooltipManager=new uf(this.tooltip,this.interactionManager),this.overlays=new jf(this.element),this.highlight=new Hp,this.container=a,Up.observe(this.element,t=>this.rawResize(t)),this._destroyFns.push(this.interactionManager.addListener("click",t=>this.onClick(t)),this.interactionManager.addListener("dblclick",t=>this.onDoubleClick(t)),this.interactionManager.addListener("hover",t=>this.onMouseMove(t)),this.interactionManager.addListener("leave",t=>this.onLeave(t)),this.interactionManager.addListener("page-left",()=>this.destroy()),this.interactionManager.addListener("wheel",()=>this.disablePointer()),this.interactionManager.addListener("drag-start",()=>this.disablePointer()),this.animationManager.addListener("animation-frame",t=>{this.update(Kp.SCENE_RENDER)}),this.highlightManager.addListener("highlight-change",t=>this.changeHighlightDatum(t)),this.zoomManager.addListener("zoom-change",t=>this.update(Kp.PROCESS_DATA,{forceNodeDataRefresh:!0,skipAnimations:!0}))),this.legend=this.attachLegend("category",Bf)}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);const e=new t.instanceConstructor(this.getModuleContext());this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeModule(t){var e;null===(e=this.modules[t.optionsKey])||void 0===e||e.instance.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]}attachLegend(t,e){const i=new e(this.getModuleContext());return this.legends.set(t,i),i.attachLegend(this.scene.root),i}addLegendModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);const e=this.attachLegend(t.identifier,t.instanceConstructor);this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeLegendModule(t){this.legends.delete(t.identifier),this.removeModule(t)}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}getModuleContext(){const{scene:t,animationManager:e,chartEventManager:i,cursorManager:n,highlightManager:o,interactionManager:r,tooltipManager:s,zoomManager:a,dataService:l,layoutService:c,updateService:d,seriesStateManager:u,seriesLayerManager:h,mode:p,callbackCache:f,specialOverrides:{window:g,document:v}}=this;return{window:g,document:v,scene:t,animationManager:e,chartEventManager:i,cursorManager:n,highlightManager:o,interactionManager:r,tooltipManager:s,zoomManager:a,dataService:l,layoutService:c,updateService:d,mode:p,seriesStateManager:u,seriesLayerManager:h,callbackCache:f}}destroy(t){if(this._destroyed)return;const e=null==t?void 0:t.keepTransferableResources;let i;this._performUpdateType=Kp.NONE,this._destroyFns.forEach(t=>t()),this.processors.forEach(t=>t.destroy()),this.tooltipManager.destroy(),this.tooltip.destroy(),Object.values(this.legends).forEach(t=>t.destroy()),this.legends.clear(),this.overlays.noData.hide(),Up.unobserve(this.element);for(const t of Object.keys(this.modules))this.removeModule({optionsKey:t});return this.interactionManager.destroy(),this.animationManager.stop(),e?(this.scene.strip(),i={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.removeAllSeries(),this.seriesLayerManager.destroy(),this.axes.forEach(t=>t.destroy()),this.axes=[],this.callbackCache.invalidateCache(),this._destroyed=!0,i}disablePointer(t=!1){t||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent&&(this.lastInteractionEvent=void 0)}requestFactoryUpdate(t){this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(()=>xa(this,void 0,void 0,(function*(){yield t(),this._pendingFactoryUpdatesCount--})))}get performUpdateType(){return this._performUpdateType}get lastPerformUpdateError(){return this._lastPerformUpdateError}update(t=Kp.FULL,e){var i,n;const{forceNodeDataRefresh:o=!1,skipAnimations:r,seriesToUpdate:s=this.series,newAnimationBatch:a}=null!=e?e:{};o&&this.series.forEach(t=>t.markNodeDataDirty());for(const t of s)this.seriesToUpdate.add(t);if(r&&(this.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),a&&(this.animationManager.isActive()?this._performUpdateSkipAnimations=!0:null!==(i=this._performUpdateSkipAnimations)&&void 0!==i||(this._performUpdateSkipAnimations=!1)),_a.check(!0)){let e=null!==(n=(new Error).stack)&&void 0!==n?n:"<unknown>";e=e.replace(/\([^)]*/g,""),this.updateRequestors[e]=t}t<this._performUpdateType&&(this._performUpdateType=t,this.performUpdateTrigger.schedule(null==e?void 0:e.backOffMs))}performUpdate(t){var e;return xa(this,void 0,void 0,(function*(){const{_performUpdateType:i,extraDebugStats:n}=this,o=[...this.seriesToUpdate];this._performUpdateType=Kp.NONE,this.seriesToUpdate.clear(),0===this.updateShortcutCount&&i<Kp.SCENE_RENDER&&this.animationManager.startBatch(this._performUpdateSkipAnimations),this.debug("Chart.performUpdate() - start",Kp[i]);const r={start:performance.now()};switch(i){case Kp.FULL:case Kp.PROCESS_DATA:yield this.processData(),this.disablePointer(!0),r["\ud83c\udfed"]=performance.now();case Kp.PERFORM_LAYOUT:if(this.checkUpdateShortcut(Kp.PERFORM_LAYOUT))break;if(!this.checkFirstAutoSize(o))break;yield this.processLayout(),r["\u2316"]=performance.now();case Kp.SERIES_UPDATE:if(this.checkUpdateShortcut(Kp.SERIES_UPDATE))break;const{seriesRect:t}=this,s=[...o].map(e=>e.update({seriesRect:t}));yield Promise.all(s),r["\ud83e\udd14"]=performance.now();case Kp.TOOLTIP_RECALCULATION:if(this.checkUpdateShortcut(Kp.TOOLTIP_RECALCULATION))break;const a=this.tooltipManager.getTooltipMeta(this.id),l="hover"===(null===(e=null==a?void 0:a.event)||void 0===e?void 0:e.type);i<=Kp.SERIES_UPDATE&&l&&this.handlePointer(a.event),r["\u2196"]=performance.now();case Kp.SCENE_RENDER:if(this.checkUpdateShortcut(Kp.SCENE_RENDER))break;n.updateShortcutCount=this.updateShortcutCount,yield this.scene.render({debugSplitTimes:r,extraDebugStats:n}),this.extraDebugStats={};case Kp.NONE:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=void 0,this.animationManager.endBatch()}this.updateService.dispatchUpdateComplete(this.getMinRect());const s=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round(100*(s-r.start))/100,count:t,performUpdateType:Kp[i]})}))}checkUpdateShortcut(t){return this.updateShortcutCount>3?(La.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=t&&(this.updateShortcutCount++,!0)}checkFirstAutoSize(t){if(this.autoSize&&!this._lastAutoSize){const e=this._performUpdateNoRenderCount++,i=10*(2^e);if(e<8)return this.update(Kp.PERFORM_LAYOUT,{seriesToUpdate:t,backOffMs:i}),this.debug("Chart.checkFirstAutoSize() - backing off until first size update",i),!1;this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0}set axes(t){const e=new Set;this._axes.forEach(t=>{t.detachAxis(this.axisGroup,this.axisGridGroup),e.add(t)}),this._axes=t.filter(t=>!t.linkedTo).concat(t.filter(t=>t.linkedTo)),this._axes.forEach(t=>{t.attachAxis(this.axisGroup,this.axisGridGroup),e.delete(t)}),this.zoomManager.updateAxes(this._axes),e.forEach(t=>t.destroy())}get axes(){return this._axes}set series(t){this.removeAllSeries(),this.seriesLayerManager.setSeriesCount(t.length),t.forEach(t=>this.addSeries(t))}get series(){return this._series}addSeries(t){const{series:e}=this;return!!(e.indexOf(t)<0)&&(e.push(t),null==t.rootGroup.parent&&this.seriesLayerManager.requestGroup(t),this.initSeries(t),!0)}initSeries(t){const e=this;t.chart={get mode(){return e.mode},get seriesRect(){return e.seriesRect},placeLabels:()=>e.placeLabels()},t.setChartData(this.data),this.addSeriesListeners(t),t.addChartEventListeners()}removeAllSeries(){this.series.forEach(t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),t.destroy(),t.chart=void 0}),this._series=[]}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)}updateAllSeriesListeners(){this.series.forEach(t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(t)})}assignSeriesToAxes(){this.axes.forEach(t=>{t.boundSeries=this.series.filter(e=>e.axes[t.direction]===t)})}assignAxesToSeries(){const t={};this.axes.forEach(e=>{var i;const n=e.direction;(null!==(i=t[n])&&void 0!==i?i:t[n]=[]).push(e)}),this.series.forEach(e=>{e.directions.forEach(i=>{const n=t[i];if(!n)return void La.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);const o=e.getKeys(i),r=this.findMatchingAxis(n,o);r?e.axes[i]=r:La.warnOnce(`no matching axis for direction [${i}] and keys [${o}]; check series and axes configuration.`)})})}findMatchingAxis(t,e){for(const i of t){const t=i.keys;if(!t.length)return i;if(e)for(const n of e)if(t.indexOf(n)>=0)return i}}rawResize(t){var e;let{width:i,height:n}=t;if(i=Math.floor(i),n=Math.floor(n),!this.autoSize)return;if(0===i&&0===n)return;const[o=0,r=0]=null!==(e=this._lastAutoSize)&&void 0!==e?e:[];o===i&&r===n||(this._lastAutoSize=[i,n],this.resize(void 0,void 0,"SizeMonitor"))}resize(t,e,i){var n,o,r,s;if(null!=t||(t=null!==(n=this.width)&&void 0!==n?n:this.autoSize?null===(o=this._lastAutoSize)||void 0===o?void 0:o[0]:this.scene.canvas.width),null!=e||(e=null!==(r=this.height)&&void 0!==r?r:this.autoSize?null===(s=this._lastAutoSize)||void 0===s?void 0:s[1]:this.scene.canvas.height),this.debug("Chart.resize() from "+i,{width:t,height:e,stack:(new Error).stack}),t&&e&&Number.isFinite(t)&&Number.isFinite(e)&&this.scene.resize(t,e)){this.disablePointer(),this.animationManager.reset();let t=!0;this.autoSize&&this._firstAutoSize&&(t=!1,this._firstAutoSize=!1),this.update(Kp.PERFORM_LAYOUT,{forceNodeDataRefresh:!0,skipAnimations:t})}}processData(){return xa(this,void 0,void 0,(function*(){this.series.some(t=>t.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const t=new Jp(this.mode),e=this.series.map(e=>e.processData(t));yield t.execute(),yield Promise.all(e),yield this.updateLegend()}))}placeLabels(){const t=[],e=[];for(const n of this.series){if(!n.visible)continue;const o=n.getLabelData();o&&(null!=(i=o[0])&&"object"==typeof i.point&&"object"==typeof i.label)&&(e.push(o),t.push(n))}var i;const{seriesRect:n}=this,o=n&&e.length>0?function(t,e,i=5){const n=[];t=t.map(t=>t.slice().sort((t,e)=>e.point.size-t.point.size));for(let l=0;l<t.length;l++){const c=n[l]=[],d=t[l];if((null==d?void 0:d.length)&&d[0].label)for(let l=0,u=d.length;l<u;l++){const u=d[l],h=u.label,p=.5*u.point.size,f=u.point.x-.5*h.width,g=u.point.y-p-h.height-i,{width:v,height:y}=h;if(!(!e||(s=g,a=y,(r=f)+v<(o=e).x+o.width&&r>o.x&&s>o.y&&s+a<o.y+o.height)))continue;if(t.some(t=>t.some(t=>sp(t.point,f,g,v,y))))continue;n.some(t=>t.some(t=>ap(t,f,g,v,y)))||c.push({index:l,text:h.text,x:f,y:g,width:v,height:y,datum:u})}}var o,r,s,a;return n}(e,{x:0,y:0,width:n.width,height:n.height}):[];return new Map(o.map((e,i)=>[t[i],e]))}updateLegend(){return xa(this,void 0,void 0,(function*(){this.legends.forEach((t,e)=>{const i=this.series.filter(t=>t.showInLegend).flatMap(t=>t.getLegendData(e));i.every(t=>"category"===t.legendType)&&this.validateCategoryLegendData(i),t.data=i})}))}validateCategoryLegendData(t){const e={};t.forEach(t=>{var i,n,o,r,s;const a=null===(i=this.series.find(e=>e.id===t.seriesId))||void 0===i?void 0:i.type;a&&(null!==(n=e[a])&&void 0!==n||(e[a]={}),null!==(o=(r=e[a])[s=t.label.text])&&void 0!==o||(r[s]=new Set),null!=t.marker.fill&&e[a][t.label.text].add(t.marker.fill))});for(const t of Object.values(e))for(const[e,i]of Object.entries(t))i.size>1&&La.warnOnce(`legend item '${e}' has multiple fill colors, this may cause unexpected behaviour.`)}processLayout(){var t;return xa(this,void 0,void 0,(function*(){const e=this.animationRect;yield this.performLayout(),e&&!(null===(t=this.animationRect)||void 0===t?void 0:t.equals(e))&&this.animationManager.skipCurrentBatch(),this.handleNoDataOverlay(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}))}performLayout(){return xa(this,void 0,void 0,(function*(){this.scene.root&&(this.scene.root.visible=!0);const{width:t,height:e}=this.scene;let i={shrinkRect:new Sc(0,0,t,e)};return i=this.layoutService.dispatchPerformLayout("start-layout",i),i=this.layoutService.dispatchPerformLayout("before-series",i),i.shrinkRect}))}pickSeriesNode(t,e,i){var n,o;const r=performance.now(),s=e?[Lu.EXACT_SHAPE_MATCH]:void 0,a=[...this.series].reverse();let l;for(const e of a){if(!e.visible||!e.rootGroup.visible)continue;const{match:o,distance:r}=null!==(n=e.pickNode(t,s))&&void 0!==n?n:{};if(o&&null!=r&&((!l||l.distance>r)&&r<=(null!=i?i:1/0)&&(l={series:e,distance:r,datum:o}),0===r))break}return this.extraDebugStats.pickSeriesNode=Math.round((null!==(o=this.extraDebugStats.pickSeriesNode)&&void 0!==o?o:0)+(performance.now()-r)),l}onMouseMove(t){this.lastInteractionEvent=t,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=t.offsetX,this.extraDebugStats.mouseY=t.offsetY,this.update(Kp.SCENE_RENDER)}onLeave(t){this.tooltip.pointerLeftOntoTooltip(t)||this.disablePointer()}handlePointer(t){const{lastPick:e,hoverRect:i}=this,{offsetX:n,offsetY:o}=t,r=(t=!1)=>{e&&this.disablePointer(t)};(null==i?void 0:i.containsPoint(n,o))?(this.handlePointerTooltip(t,r),this.handlePointerNode(t)):r()}handlePointerTooltip(t,e){const{lastPick:i,tooltip:n}=this,{range:o}=n,{offsetX:r,offsetY:s}=t;let a;"number"==typeof o&&Number.isFinite(o)&&(a=o);const l=this.pickSeriesNode({x:r,y:s},"exact"===o,a);if(!l)return this.tooltipManager.removeTooltip(this.id),void("tooltip"===this.highlight.range&&e(!0));const c="node"===this.highlight.range||!i||i.datum!==l.datum;let d;c?(d=l.series.getTooltipHtml(l.datum),"tooltip"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,l.datum)):i&&(i.event=t.sourceEvent);const u=null!=a,h=this.tooltip.enabled&&l.series.tooltip.enabled,p="exact"===o&&0===l.distance,f=h&&("nearest"===o||u||p)&&(!c||void 0!==d),g=uf.makeTooltipMeta(t,this.scene.canvas,l.datum,this.specialOverrides.window);f&&this.tooltipManager.updateTooltip(this.id,g,d)}handlePointerNode(t){this.checkSeriesNodeRange(t,(t,e)=>{(t.hasEventListener("nodeClick")||t.hasEventListener("nodeDoubleClick"))&&this.cursorManager.updateCursor("chart","pointer"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,e)})||(this.cursorManager.updateCursor("chart"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id))}onClick(t){this.checkSeriesNodeClick(t)?this.update(Kp.SERIES_UPDATE):this.fireEvent({type:"click",event:t.sourceEvent})}onDoubleClick(t){this.checkSeriesNodeDoubleClick(t)?this.update(Kp.SERIES_UPDATE):this.fireEvent({type:"doubleClick",event:t.sourceEvent})}checkSeriesNodeClick(t){return this.checkSeriesNodeRange(t,(e,i)=>e.fireNodeClickEvent(t.sourceEvent,i))}checkSeriesNodeDoubleClick(t){return this.checkSeriesNodeRange(t,(e,i)=>e.fireNodeDoubleClickEvent(t.sourceEvent,i))}checkSeriesNodeRange(t,e){const i=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1),n=null==i?void 0:i.datum,o=null==n?void 0:n.series.nodeClickRange;let r;"number"==typeof o&&Number.isFinite(o)&&(r=o);let s=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!0);if(s?this.highlightManager.updatePicked(this.id,s.datum):this.highlightManager.updatePicked(this.id),n&&"nearest"===o)return e(n.series,n),!0;if("exact"!==o&&(s=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1,r)),!s)return!1;const a=null!=r,l="exact"===o&&0===s.distance;return!(!a&&!l)&&(e(s.series,s.datum),!0)}changeHighlightDatum(t){var e,i;const n=new Set,{series:o,datum:r}=null!==(e=t.currentHighlight)&&void 0!==e?e:{},{series:s,datum:a}=null!==(i=t.previousHighlight)&&void 0!==i?i:{};s&&n.add(s),o&&n.add(o),(null==s?void 0:s.cursor)&&a&&this.cursorManager.updateCursor(s.id),(null==o?void 0:o.cursor)&&r&&this.cursorManager.updateCursor(o.id,o.cursor),this.lastPick=t.currentHighlight?{datum:t.currentHighlight}:void 0;null==o||null==s?this.update(Kp.SERIES_UPDATE):this.update(Kp.SERIES_UPDATE,{seriesToUpdate:n})}waitForUpdate(t=5e3){return xa(this,void 0,void 0,(function*(){const e=performance.now();for(this._pendingFactoryUpdatesCount>0&&(yield this.updateMutex.waitForClearAcquireQueue());this._performUpdateType!==Kp.NONE;){if(performance.now()-e>t)throw new Error("waitForUpdate() timeout reached.");yield Vp(5)}yield this.updateMutex.waitForClearAcquireQueue()}))}handleNoDataOverlay(){!this.series.some(t=>t.hasData())&&this.seriesRect?this.overlays.noData.show(this.seriesRect):this.overlays.noData.hide()}getMinRect(){const t=this.series.map(t=>t.getMinRect()).filter(t=>void 0!==t);if(t.length)return new Sc(0,0,t.reduce((t,e)=>Math.max(t,e.width),0),t.reduce((t,e)=>Math.max(t,e.height),0))}}var qf;ba([jc({newValue(t){this.destroyed||t.appendChild(this.element)},oldValue(t){t.removeChild(this.element)}}),Sa("design:type",Object)],Xf.prototype,"container",void 0),ba([jc({newValue(t){var e;null===(e=this.series)||void 0===e||e.forEach(e=>{e.setChartData(t)})}}),Sa("design:type",Object)],Xf.prototype,"data",void 0),ba([jc({newValue(t){this.resize(t,void 0,"width option")}}),Sa("design:type",Number)],Xf.prototype,"width",void 0),ba([jc({newValue(t){this.resize(void 0,t,"height option")}}),Sa("design:type",Number)],Xf.prototype,"height",void 0),ba([jc({changeValue(t){this.autoSizeChanged(t)}}),dl(Cl),Sa("design:type",Object)],Xf.prototype,"autoSize",void 0),ba([jc({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}}),Sa("design:type",Function)],Xf.prototype,"title",void 0),ba([jc({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}}),Sa("design:type",Function)],Xf.prototype,"subtitle",void 0),ba([jc({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}}),Sa("design:type",Function)],Xf.prototype,"footnote",void 0),ba([dl(Wl("standalone","integrated")),Sa("design:type",String)],Xf.prototype,"mode",void 0),function(t){t[t.Open=0]="Open",t[t.Chord=1]="Chord",t[t.Round=2]="Round"}(qf||(qf={}));class $f extends Wd{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=qf.Open,this.restoreOwnStyles()}get fullPie(){return ol(Ja(this.startAngle),Ja(this.endAngle))}updatePath(){const t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===qf.Chord?t.closePath():this.type!==qf.Round||this.fullPie||(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new Sc(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(t,e){const i=this.transformPoint(t,e),n=this.computeBBox();return this.type!==qf.Open&&n.containsPoint(i.x,i.y)&&this.path.isPointInPath(i.x,i.y)}}$f.className="Arc",$f.defaultStyles=Object.assign({},Rc.defaultStyles,{lineWidth:1,fillStyle:null}),ba([jd(),Sa("design:type",Number)],$f.prototype,"centerX",void 0),ba([jd(),Sa("design:type",Number)],$f.prototype,"centerY",void 0),ba([jd(),Sa("design:type",Number)],$f.prototype,"radius",void 0),ba([jd(),Sa("design:type",Number)],$f.prototype,"startAngle",void 0),ba([jd(),Sa("design:type",Number)],$f.prototype,"endAngle",void 0),ba([jd(),Sa("design:type",Boolean)],$f.prototype,"counterClockwise",void 0),ba([jd(),Sa("design:type",Number)],$f.prototype,"type",void 0);const Zf=t=>{const e=cl.fromString(t),[i,n,o]=cl.RGBtoHSL(e.r,e.g,e.b);return{h:i,s:n,l:o,a:e.a}};class Jf{constructor(){this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(Zf)}update(){const{domain:t,range:e}=this;t.length<2&&(La.warnOnce("`colorDomain` should have at least 2 values."),0===t.length?t.push(0,1):1===t.length&&t.push(t[0]+1));for(let e=1;e<t.length;e++){if(t[e-1]>=t[e]){La.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort((t,e)=>t-e);break}}if(e.length<t.length)for(let i=e.length;i<t.length;i++)e.push(e.length>0?e[0]:"black");this.parsedRange=this.range.map(Zf)}convert(t){const{domain:e,range:i,parsedRange:n}=this,o=e[0],r=e[e.length-1],s=i[0],a=i[i.length-1];if(t<=o)return s;if(t>=r)return a;let l,c;if(2===e.length){const e=(t-o)/(r-o),n=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(e*(i.length-1)),i.length-2),c=(e-l*n)/n}else{for(l=0;l<e.length-2&&!(t<e[l+1]);l++);const i=e[l];c=(t-i)/(e[l+1]-i)}return((t,e,i)=>{let n,o;if(i=Math.min(Math.max(i,0),1),Number.isNaN(t.h)&&Number.isNaN(e.h))n=0,o=0;else if(Number.isNaN(t.h))n=e.h,o=e.s;else if(Number.isNaN(e.h))n=t.h,o=t.s;else{const r=t.h;let s=e.h;const a=e.h-t.h;a>180?s-=360:a<-180&&(s+=360),n=r*(1-i)+s*i,o=t.s*(1-i)+e.s*i}const r=t.l*(1-i)+e.l*i,s=t.a*(1-i)+e.a*i;return cl.fromHSL(n,o,r,s)})(n[l],n[l+1],c).toRgbaString()}}class Qf extends Rc{constructor(){super(...arguments),this.direction="to-right",this.stops=void 0,this._mask=void 0}get mask(){return this._mask}set mask(t){null!=this._mask&&this.removeChild(this._mask),null!=t&&this.appendChild(t),this._mask=t}isPointInPath(t,e){var i,n;return null!==(n=null===(i=this.mask)||void 0===i?void 0:i.isPointInPath(t,e))&&void 0!==n&&n}computeBBox(){var t;return null===(t=this.mask)||void 0===t?void 0:t.computeBBox()}render(t){const{mask:e,stops:i}=this,{ctx:n,devicePixelRatio:o}=t,r=1/o,s=null==e?void 0:e.computeTransformedBBox();if(null==e||null==i||null==s)return;e.dirtyPath&&(e.updatePath(),e.dirtyPath=!1),n.save(),n.beginPath(),e.path.draw(n),n.clip(),n.resetTransform();const a=Math.floor(s.x),l=Math.ceil(s.x+s.width),c=Math.floor(s.y),d=Math.ceil(s.y+s.height),u=new Jf,[h,p]="to-right"===this.direction?[a,l]:[c,d];if(u.domain=i.map((t,e)=>h+(p-h)*e/(i.length-1)),u.range=i,u.update(),"to-right"===this.direction){const t=d-c;for(let e=a;e<=l;e+=r)n.fillStyle=u.convert(e),n.fillRect(e,c,r,t)}else{const t=l-a;for(let e=c;e<=d;e+=r)n.fillStyle=u.convert(e),n.fillRect(a,e,t,r)}n.restore()}}ba([gc({redraw:pc.MAJOR}),Sa("design:type",String)],Qf.prototype,"direction",void 0),ba([gc({redraw:pc.MAJOR}),Sa("design:type",Array)],Qf.prototype,"stops",void 0),ba([gc({redraw:pc.MAJOR}),Sa("design:type",Function)],Qf.prototype,"_mask",void 0);class tg extends Wd{constructor(){super(...arguments),this.borderPath=new Vd,this.x=0,this.y=0,this.width=10,this.height=10,this.radius=0,this.crisp=!1,this.lastUpdatePathStrokeWidth=Rc.defaultStyles.strokeWidth,this.effectiveStrokeWidth=Rc.defaultStyles.strokeWidth,this.microPixelEffectOpacity=1}isDirtyPath(){var t;return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty()||(null===(t=this.clipPath)||void 0===t?void 0:t.isDirty()))}updatePath(){var t,e,i;const{path:n,borderPath:o,crisp:r}=this;let{x:s,y:a,width:l,height:c,strokeWidth:d}=this;const u=1/(null!==(e=null===(t=this.layerManager)||void 0===t?void 0:t.canvas.pixelRatio)&&void 0!==e?e:1);let h=1;if(n.clear({trackChanges:!0}),o.clear({trackChanges:!0}),r&&(l<=u&&(h*=l/u),c<=u&&(h*=c/u),l=this.align(s,l),c=this.align(a,c),s=this.align(s),a=this.align(a)),d)if(l<u){const t=s+u/2;o.moveTo(t,a),o.lineTo(t,a+c),d=u,this.borderClipPath=void 0}else if(c<u){const t=a+u/2;o.moveTo(s,t),o.lineTo(s+l,t),d=u,this.borderClipPath=void 0}else if(d<l&&d<c){const t=d/2;s+=t,a+=t,l-=d,c-=d,this.borderClipPath=void 0,n.rect(s,a,l,c),o.rect(s,a,l,c)}else this.borderClipPath=null!==(i=this.borderClipPath)&&void 0!==i?i:new Vd,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(s,a,l,c),o.rect(s,a,l,c);else this.borderClipPath=void 0,n.rect(s,a,l,c);this.effectiveStrokeWidth=d,this.lastUpdatePathStrokeWidth=d,this.microPixelEffectOpacity=h}computeBBox(){const{x:t,y:e,width:i,height:n}=this;return new Sc(t,e,i,n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}applyFillAlpha(t){const{fillOpacity:e,microPixelEffectOpacity:i,opacity:n}=this,{globalAlpha:o}=t;t.globalAlpha=o*n*e*i}renderStroke(t){const{stroke:e,effectiveStrokeWidth:i,borderPath:n,borderClipPath:o,opacity:r,microPixelEffectOpacity:s}=this;if(!!e&&!!i){const{strokeOpacity:a,lineDash:l,lineDashOffset:c,lineCap:d,lineJoin:u}=this;o&&(o.draw(t),t.clip()),n.draw(t);const{globalAlpha:h}=t;t.strokeStyle=e,t.globalAlpha=h*r*a*s,t.lineWidth=i,l&&t.setLineDash(l),c&&(t.lineDashOffset=c),d&&(t.lineCap=d),u&&(t.lineJoin=u),t.stroke(),t.globalAlpha=h}}}tg.className="Rect",ba([jd(),Sa("design:type",Number)],tg.prototype,"x",void 0),ba([jd(),Sa("design:type",Number)],tg.prototype,"y",void 0),ba([jd(),Sa("design:type",Number)],tg.prototype,"width",void 0),ba([jd(),Sa("design:type",Number)],tg.prototype,"height",void 0),ba([jd(),Sa("design:type",Number)],tg.prototype,"radius",void 0),ba([jd(),Sa("design:type",Boolean)],tg.prototype,"crisp",void 0);class eg extends Ec{constructor(t){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=t}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===pc.NONE&&!i)return void(n&&n.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const o=this.sourceImage;e.globalAlpha=this.opacity,e.drawImage(o,0,0,o.width,o.height,this.x,this.y,this.width,this.height),super.render(t)}}ba([gc({redraw:pc.MAJOR}),Sa("design:type",Number)],eg.prototype,"x",void 0),ba([gc({redraw:pc.MAJOR}),Sa("design:type",Number)],eg.prototype,"y",void 0),ba([gc({redraw:pc.MAJOR}),Sa("design:type",Number)],eg.prototype,"width",void 0),ba([gc({redraw:pc.MAJOR}),Sa("design:type",Number)],eg.prototype,"height",void 0),ba([gc({redraw:pc.MAJOR}),Sa("design:type",Number)],eg.prototype,"opacity",void 0);const ig=Object.assign(Object.assign({},od),mh);var ng=Object.freeze({__proto__:null,motion:ig,Caption:Wc,DropShadow:Oc,Group:kd,Scene:Bp,Node:Ec,get PointerEvents(){return Cc},get RedrawType(){return pc},SceneChangeDetection:gc,Selection:Md,Arc:$f,Line:Rd,LinearGradientFill:Qf,Path:Wd,ScenePathChangeDetection:jd,Rect:tg,Sector:zd,Shape:Rc,Text:Nc,getFont:Lc,ContinuousScale:Od,BandScale:il,LinearScale:Dd,toRadians:tl,Label:yu,Marker:Cu,getMarker:Af,Circle:wu,Diamond:bf,Square:Cf,Triangle:wf,Tooltip:uh,toTooltipHtml:ah,BBox:Sc,nearestSquared:bc,nearestSquaredInContainer:function(t,e,i=1/0){const n=e.transformPoint(t.x,t.y),o={nearest:void 0,distanceSquared:i};for(const t of e.children){const{nearest:e,distanceSquared:i}=t.nearestSquared(n,o.distanceSquared);if(0===i)return{nearest:e,distanceSquared:i};i<o.distanceSquared&&(o.nearest=e,o.distanceSquared=i)}return o},HdpiCanvas:Tc,Image:eg,Path2D:Vd,easing:qc});const og={[hc.X]:["xKey"],[hc.Y]:["yKey"]},rg={[hc.X]:["xName"],[hc.Y]:["yName"]};class sg extends Wu{constructor(t,e,i,n){super(t,e,i,n),this.xKey=n.xKey,this.yKey=n.yKey}}class ag extends Sh{get contextNodeData(){return this._contextNodeData.slice()}constructor(t){var{pathsPerSeries:e=1,hasMarkers:i=!1,hasHighlightedLabels:n=!1,pathsZIndexSubOrderOffset:o=[],directionKeys:r=og,directionNames:s=rg,datumSelectionGarbageCollection:a=!0,markerSelectionGarbageCollection:l=!0,animationResetFns:c}=t,d=ma(t,["pathsPerSeries","hasMarkers","hasHighlightedLabels","pathsZIndexSubOrderOffset","directionKeys","directionNames","datumSelectionGarbageCollection","markerSelectionGarbageCollection","animationResetFns"]);super(Object.assign({directionKeys:r,directionNames:s,useSeriesGroupLayer:!0,canHaveAxes:!0},d)),this.legendItemName=void 0,this._contextNodeData=[],this.NodeClickEvent=sg,this.highlightSelection=Md.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=Md.select(this.highlightLabel,Nc),this.annotationSelections=new Set,this.subGroups=[],this.subGroupId=0,this.debug=_a.create(),this.opts={pathsPerSeries:e,hasMarkers:i,hasHighlightedLabels:n,pathsZIndexSubOrderOffset:o,directionKeys:r,directionNames:s,animationResetFns:c,datumSelectionGarbageCollection:a,markerSelectionGarbageCollection:l},this.animationState=new bh("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)}},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),highlightMarkers:t=>this.animateReadyHighlightMarkers(t),resize:t=>this.animateReadyResize(t)},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)}},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)}}},()=>this.checkProcessedDataAnimatable())}addChartEventListeners(){this.ctx.chartEventManager.addListener("legend-item-click",t=>this.onLegendItemClick(t)),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t))}destroy(){super.destroy(),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)}update({seriesRect:t}){var e,i;return xa(this,void 0,void 0,(function*(){const{visible:n,_contextNodeData:o}=this,{series:r}=null!==(i=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight())&&void 0!==i?i:{},s=r?r===this:void 0,a=this.checkResize(t),l=yield this.updateHighlightSelection(s);yield this.updateSelections(n),yield this.updateNodes(l,s,n);const c=this.getAnimationData(t,o);a&&this.animationState.transition("resize",c),this.animationState.transition("update",c)}))}updateSelections(t){return xa(this,void 0,void 0,(function*(){if((t||!this.ctx.animationManager.isSkipped())&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this._contextNodeData=yield this.createNodeData();const t=this.isProcessedDataAnimatable();this._contextNodeData.forEach(e=>{var i;null!==(i=e.animationValid)&&void 0!==i||(e.animationValid=t)}),yield this.updateSeriesGroups();const{dataModel:e,processedData:i}=this;void 0!==e&&void 0!==i&&this.dispatch("data-update",{dataModel:e,processedData:i})}yield Promise.all(this.subGroups.map((t,e)=>this.updateSeriesGroupSelections(t,e)))}}))}updateSeriesGroupSelections(t,e,i){return xa(this,void 0,void 0,(function*(){const{datumSelection:n,labelSelection:o,markerSelection:r,paths:s}=t,a=this._contextNodeData[e],{nodeData:l,labelData:c,itemId:d}=a;yield this.updatePaths({seriesHighlighted:i,itemId:d,contextData:a,paths:s,seriesIdx:e}),t.datumSelection=yield this.updateDatumSelection({nodeData:l,datumSelection:n,seriesIdx:e}),t.labelSelection=yield this.updateLabelSelection({labelData:c,labelSelection:o,seriesIdx:e}),r&&(t.markerSelection=yield this.updateMarkerSelection({nodeData:l,markerSelection:r,seriesIdx:e}))}))}markerFactory(){return new(Af())}updateSeriesGroups(){return xa(this,void 0,void 0,(function*(){const{_contextNodeData:t,contentGroup:e,subGroups:i,opts:{pathsPerSeries:n,hasMarkers:o,datumSelectionGarbageCollection:r,markerSelectionGarbageCollection:s}}=this;if(t.length===i.length)return;t.length<i.length&&i.splice(t.length).forEach(({dataNodeGroup:t,markerGroup:i,labelGroup:n,paths:o})=>{e.removeChild(t),i&&e.removeChild(i),n&&e.removeChild(n);for(const t of o)e.removeChild(t)});const a=t.length;for(;a>i.length;){const t=!1,a=this.subGroupId++,l=new kd({name:`${this.id}-series-sub${a}-dataNodes`,layer:t,zIndex:xu.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("data",a)}),c=o?new kd({name:`${this.id}-series-sub${this.subGroupId++}-markers`,layer:t,zIndex:xu.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("marker",a)}):void 0,d=new kd({name:`${this.id}-series-sub${this.subGroupId++}-labels`,layer:t,zIndex:xu.SERIES_LABEL_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("labels",a)});e.appendChild(l),e.appendChild(d),c&&e.appendChild(c);const u=[];for(let t=0;t<n;t++)u[t]=new Wd,u[t].zIndex=xu.SERIES_LAYER_ZINDEX,u[t].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",t),e.appendChild(u[t]);i.push({paths:u,dataNodeGroup:l,markerGroup:c,labelGroup:d,labelSelection:Md.select(d,Nc),datumSelection:Md.select(l,()=>this.nodeFactory(),r),markerSelection:c?Md.select(c,()=>this.markerFactory(),s):void 0})}}))}getGroupZIndexSubOrder(t,e=0){var i;const n=super.getGroupZIndexSubOrder(t,e);if("paths"===t){const t=null!==(i=this.opts.pathsZIndexSubOrderOffset[e])&&void 0!==i?i:0,o=n[0];n[0]="function"==typeof o?()=>+o()+t:+o+t}return n}updateNodes(t,e,i){var n;return xa(this,void 0,void 0,(function*(){const{highlightSelection:o,highlightLabelSelection:r,opts:{hasMarkers:s,hasHighlightedLabels:a}}=this,l=!this.ctx.animationManager.isSkipped(),c=this.visible&&(null===(n=this._contextNodeData)||void 0===n?void 0:n.length)>0&&i;this.rootGroup.visible=l||c,this.contentGroup.visible=l||c,this.highlightGroup.visible=(l||c)&&!!e;const d=this.getOpacity();s?(yield this.updateMarkerNodes({markerSelection:o,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlightMarkers",o)):(yield this.updateDatumNodes({datumSelection:o,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlight",o)),a&&(yield this.updateLabelNodes({labelSelection:r,seriesIdx:-1})),yield Promise.all(this.subGroups.map((i,n)=>xa(this,void 0,void 0,(function*(){const{dataNodeGroup:o,markerGroup:r,datumSelection:a,labelSelection:u,markerSelection:h,paths:p,labelGroup:f}=i,{itemId:g}=this.contextNodeData[n],v=c;o.opacity=d,o.visible=l||v,f.visible=v,r&&(r.opacity=d,r.zIndex=o.zIndex>=xu.SERIES_LAYER_ZINDEX?o.zIndex:o.zIndex+1,r.visible=v),f&&(f.opacity=d),yield this.updatePathNodes({seriesHighlighted:e,itemId:g,paths:p,seriesIdx:n,opacity:d,visible:v,animationEnabled:l}),o.visible&&(yield this.updateDatumNodes({datumSelection:a,highlightedItems:t,isHighlight:!1,seriesIdx:n}),yield this.updateLabelNodes({labelSelection:u,seriesIdx:n}),s&&h&&(yield this.updateMarkerNodes({markerSelection:h,isHighlight:!1,seriesIdx:n})))}))))}))}getHighlightLabelData(t,e){const i=t.find(t=>t.datum===e.datum&&t.itemId===e.itemId);return i?[i]:void 0}getHighlightData(t,e){return e?[e]:void 0}updateHighlightSelection(t){var e;return xa(this,void 0,void 0,(function*(){const{highlightSelection:i,highlightLabelSelection:n,_contextNodeData:o}=this,r=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),s=t&&(null==r?void 0:r.datum)?r:void 0;let a,l;if(null!=s){const t=this.isLabelEnabled();for(const{labelData:e,nodeData:i}of o)if(l=this.getHighlightData(i,s),a=t?this.getHighlightLabelData(e,s):void 0,(!t||null!=a)&&null!=l)break}return this.highlightSelection=yield this.updateHighlightSelectionItem({items:l,highlightSelection:i}),this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({items:a,highlightLabelSelection:n}),l}))}pickNodeExactShape(t){var e;const i=super.pickNodeExactShape(t);if(i)return i;const{x:n,y:o}=t,{opts:{hasMarkers:r}}=this;for(const{dataNodeGroup:t,markerGroup:e}of this.subGroups){let i=t.pickNode(n,o);if(!i&&r&&(i=null==e?void 0:e.pickNode(n,o)),i)break}for(const i of this.moduleMap){const{datum:n}=null!==(e=i.pickNodeExact(t))&&void 0!==e?e:{};if(void 0!==n)return{datum:n,distance:0}}}pickNodeClosestDatum(t){var e,i;const{x:n,y:o}=t,{axes:r,rootGroup:s,_contextNodeData:a}=this,l=r[hc.X],c=r[hc.Y],d=s.transformPoint(n,o);let u,h=1/0;for(const t of a)for(const e of t.nodeData){const{point:{x:t=NaN,y:i=NaN}={}}=e;if(isNaN(t)||isNaN(i))continue;if(!((null==l?void 0:l.inRange(t))&&(null==c?void 0:c.inRange(i))))continue;const n=Math.max(Math.pow(d.x-t,2)+Math.pow(d.y-i,2),0);n<h&&(h=n,u=e)}for(const e of this.moduleMap){const i=e.pickNodeNearest(t);if(void 0!==i&&i.distanceSquared<h){h=i.distanceSquared,u=i.datum;break}}if(u){return{datum:u,distance:Math.max(Math.sqrt(h)-(null!==(i=null===(e=u.point)||void 0===e?void 0:e.size)&&void 0!==i?i:0),0)}}}pickNodeMainAxisFirst(t,e){var i,n;const{x:o,y:r}=t,{axes:s,rootGroup:a,_contextNodeData:l}=this,c=s[hc.X],d=s[hc.Y],u=[c,d].filter(t=>t instanceof Dp).map(t=>t.direction);if(e&&0===u.length)return;const[h=hc.X]=u,p=a.transformPoint(o,r),f=h===hc.X?[p.x,p.y]:[p.y,p.x],g=[1/0,1/0];let v;for(const t of l)for(const e of t.nodeData){const{point:{x:t=NaN,y:i=NaN}={}}=e;if(isNaN(t)||isNaN(i))continue;if(!((null==c?void 0:c.inRange(t))&&(null==d?void 0:d.inRange(i))))continue;const n=h===hc.X?[t,i]:[i,t];let o=!0;for(let t=0;t<n.length;t++){const e=Math.abs(n[t]-f[t]);if(e>g[t]){o=!1;break}e<g[t]&&(g[t]=e,g.fill(1/0,t+1,g.length))}o&&(v=e)}if(v){let e=Math.max(Math.pow(g[0],2)+Math.pow(g[1],2)-(null!==(n=null===(i=v.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0),0);for(const i of this.moduleMap){const n=i.pickNodeMainAxisFirst(t);if(void 0!==n&&n.distanceSquared<e){v=n.datum,e=n.distanceSquared;break}}return{datum:v,distance:Math.sqrt(e)}}}onLegendItemClick(t){const{enabled:e,itemId:i,series:n,legendItemName:o}=t,r=null!=this.legendItemName&&this.legendItemName===o;(n.id===this.id||r)&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:n,numVisibleItems:o,legendItemName:r}=t,s=Object.values(o).reduce((t,e)=>t+e,0),a=null!=this.legendItemName&&this.legendItemName===r;n.id===this.id||a||e&&1===s?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}shouldFlipXY(){return!1}getMinRect(){const[t]=this._contextNodeData;if(!t||0==t.nodeData.length)return;const e=t.nodeData.map(({midPoint:t})=>{var e;return null!==(e=null==t?void 0:t.x)&&void 0!==e?e:0}).sort((t,e)=>t-e).reduce((t,e,i,n)=>i>0?Math.max(t,e-n[i-1]):t,0),i=t.nodeData.map(({midPoint:t})=>{var e;return null!==(e=null==t?void 0:t.y)&&void 0!==e?e:0}).sort((t,e)=>t-e).reduce((t,e,i,n)=>i>0?Math.max(t,e-n[i-1]):t,0);return new Sc(0,0,e,i)}updateHighlightSelectionItem(t){return xa(this,void 0,void 0,(function*(){const{opts:{hasMarkers:e}}=this,{items:i,highlightSelection:n}=t,o=null!=i?i:[];if(e){const t=n;return this.updateMarkerSelection({nodeData:o,markerSelection:t,seriesIdx:-1})}return this.updateDatumSelection({nodeData:o,datumSelection:n,seriesIdx:-1})}))}updateHighlightSelectionLabel(t){return xa(this,void 0,void 0,(function*(){const{items:e,highlightLabelSelection:i}=t,n=null!=e?e:[];return this.updateLabelSelection({labelData:n,labelSelection:i,seriesIdx:-1})}))}updateDatumSelection(t){return xa(this,void 0,void 0,(function*(){return t.datumSelection}))}updateDatumNodes(t){return xa(this,void 0,void 0,(function*(){}))}updateMarkerSelection(t){return xa(this,void 0,void 0,(function*(){return t.markerSelection}))}updateMarkerNodes(t){return xa(this,void 0,void 0,(function*(){}))}updatePaths(t){return xa(this,void 0,void 0,(function*(){t.paths.forEach(t=>t.visible=!1)}))}updatePathNodes(t){return xa(this,void 0,void 0,(function*(){const{paths:e,opacity:i,visible:n}=t;for(const t of e)t.opacity=i,t.visible=n}))}resetAllAnimation(t){var e,i;const{path:n,datum:o,label:r,marker:s}=null!==(i=null===(e=this.opts)||void 0===e?void 0:e.animationResetFns)&&void 0!==i?i:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),n&&t.paths.forEach(t=>{vh(t,n)}),o&&vh(t.datumSelections,o),r&&vh(t.labelSelections,r),s&&vh(t.markerSelections,s),t.contextData.some(t=>!1===t.animationValid)&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e,i;const{datum:n}=null!==(i=null===(e=this.opts)||void 0===e?void 0:e.animationResetFns)&&void 0!==i?i:{};n&&vh([t],n)}animateReadyHighlightMarkers(t){var e,i;const{marker:n}=null!==(i=null===(e=this.opts)||void 0===e?void 0:e.animationResetFns)&&void 0!==i?i:{};n&&vh([t],n)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t,e){return{datumSelections:this.subGroups.map(({datumSelection:t})=>t),markerSelections:this.subGroups.filter(({markerSelection:t})=>void 0!==t).map(({markerSelection:t})=>t),labelSelections:this.subGroups.map(({labelSelection:t})=>t),annotationSelections:[...this.annotationSelections],contextData:this._contextNodeData,previousContextData:e,paths:this.subGroups.map(({paths:t})=>t),seriesRect:t}}calculateScaling(){const t={},e=e=>{const i=this.axes[e];if(i)if(i.scale instanceof Jh){const{range:n,domain:o}=i.scale;t[e]={type:"log",convert:t=>i.scale.convert(t),domain:[o[0],o[1]],range:[n[0],n[1]]}}else if(i.scale instanceof Od){const{range:n}=i.scale,o=i.scale.getDomain();t[e]={type:"continuous",domain:[o[0],o[1]],range:[n[0],n[1]]}}else if(i.scale){const{domain:n}=i.scale;t[e]={type:"category",domain:n,range:n.map(t=>i.scale.convert(t))}}};return e(hc.X),e(hc.Y),t}}ba([dl(Ol),Sa("design:type",String)],ag.prototype,"legendItemName",void 0);const lg=["top","right","bottom","left"];class cg extends Xf{constructor(t,e){super(t,e),this.paired=!0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastVisibility={crossLines:!0,series:!0}}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return xa(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),{animationRect:i,seriesRect:n,visibility:o,clipSeries:r}=this.updateAxes(e);this.seriesRoot.visible=o.series,this.seriesRect=n,this.animationRect=i,this.seriesRoot.translationX=Math.floor(n.x),this.seriesRoot.translationY=Math.floor(n.y);const{seriesArea:{padding:s}}=this,a=n.clone().grow({top:s.top,right:s.right,bottom:s.bottom,left:s.left});return this.hoverRect=a,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:r,series:{rect:n,paddedRect:a,visible:o.series,shouldFlipXY:this.shouldFlipXY()},axes:this.axes.map(t=>Object.assign({id:t.id},t.getLayoutState()))}),e}))}updateAxes(t){var e;const i=Object.assign({},this._lastAxisWidths),n=Object.assign({},this._lastVisibility),o=new Set(this._axes.map(t=>t.position));for(const t of Object.keys(i))o.has(t)||delete i[t];const r=(t,e)=>!Object.keys(t).some(t=>null==i[t])&&(n.crossLines===e.crossLines&&n.series===e.series&&Object.entries(i).every(([e,i])=>{const n=t[e];return null==i&&null==n||i===n}));let s={},a={},l=!1,c=null===(e=this.seriesRect)||void 0===e?void 0:e.clone(),d=0,u={};do{Object.assign(i,s),Object.assign(n,a);const e=this.updateAxesPass(i,t.clone(),c);if(h=e.axisWidths,s=Object.entries(h).reduce((t,[e,i])=>(i&&Math.abs(i)===1/0&&(i=0),t[e]=null!=i?Math.ceil(i):i,t),{}),a=e.visibility,l=e.clipSeries,c=e.seriesRect,u=e.primaryTickCounts,d++>10){La.warn("unable to find stable axis layout.");break}}while(!r(s,a));var h;this.axes.forEach(t=>{const{direction:e}=t,i=u[e];t.update(i)});return this.axes.forEach(e=>{if(e.setCrossLinesVisible(n.crossLines),c)switch(e.clipGrid(c.x,c.y,c.width+5,c.height+5),e.position){case"left":case"right":e.clipTickLines(t.x,c.y,t.width+5,c.height+5);break;case"top":case"bottom":e.clipTickLines(c.x,t.y,c.width+5,t.height+5)}}),this._lastAxisWidths=i,this._lastVisibility=n,{seriesRect:c,animationRect:t,visibility:n,clipSeries:l}}updateAxesPass(t,e,i){const{axes:n}=this,o={},r={},s={series:!0,crossLines:!0};let a=!1;const l={},c=this.applySeriesPadding(e),d=i?this.buildCrossLinePadding(t):{},u=this.buildAxisBound(c,t,d,s),h=this.buildSeriesRect(u,t);return n.forEach(e=>{var i,n;const{position:s="left"}=e,{clipSeries:d,axisThickness:p,axisOffset:f}=this.calculateAxisDimensions({axis:e,seriesRect:h,paddedBounds:c,axisWidths:t,newAxisWidths:r,primaryTickCounts:l,clipSeries:a,addInterAxisPadding:(null!==(i=o[s])&&void 0!==i?i:0)>0});o[s]=(null!==(n=o[s])&&void 0!==n?n:0)+1,a=a||d,this.positionAxis({axis:e,axisBound:u,axisOffset:f,axisThickness:p,axisWidths:t,primaryTickCounts:l,seriesRect:h})}),{clipSeries:a,seriesRect:h,axisWidths:r,visibility:s,primaryTickCounts:l}}buildCrossLinePadding(t){var e;const i={};this.axes.forEach(t=>{t.crossLines&&t.crossLines.forEach(t=>{t.calculatePadding(i)})});for(const[n,o=0]of Object.entries(i))i[n]=Math.max(o-(null!==(e=t[n])&&void 0!==e?e:0),0);return i}applySeriesPadding(t){const e=t.clone(),i=this.axes.slice().reverse();return lg.forEach(t=>{const n=this.seriesArea.padding[t],o=i.find(e=>e.position===t);o?o.seriesAreaPadding=n:e.shrink(n,t)}),e}buildAxisBound(t,e,i,n){var o,r,s,a;const l=t.clone(),{top:c=0,right:d=0,bottom:u=0,left:h=0}=i,p=h+d,f=c+u,g=(null!==(o=e.left)&&void 0!==o?o:0)+(null!==(r=e.right)&&void 0!==r?r:0)+p,v=(null!==(s=e.top)&&void 0!==s?s:0)+(null!==(a=e.bottom)&&void 0!==a?a:0)+f;return l.width<=g||l.height<=v?(n.crossLines=!1,n.series=!1,l):(l.x+=h,l.y+=c,l.width-=p,l.height-=f,l)}buildSeriesRect(t,e){const i=t.clone(),{top:n,bottom:o,left:r,right:s}=e;return i.x+=null!=r?r:0,i.y+=null!=n?n:0,i.width-=(null!=r?r:0)+(null!=s?s:0),i.height-=(null!=n?n:0)+(null!=o?o:0),i.width=Math.max(0,i.width),i.height=Math.max(0,i.height),i}clampToOutsideSeriesRect(t,e,i,n){const{x:o,y:r,width:s,height:a}=t,l=[o,r,o+s,r+a];return(1===n?Math.min:Math.max)(e,l[("x"===i?0:1)+(1===n?0:2)])}calculateAxisDimensions(t){var e,i,n,o,r;const{axis:s,seriesRect:a,paddedBounds:l,axisWidths:c,newAxisWidths:d,primaryTickCounts:u,addInterAxisPadding:h}=t;let{clipSeries:p}=t;const{position:f="left",direction:g}=s,v=null!==(e=d[f])&&void 0!==e?e:0;switch(f){case"top":case"bottom":s.range=[0,a.width],s.gridLength=a.height;break;case"right":case"left":s.range=(t=>t instanceof Dp||t instanceof Fp?[0,a.height]:[a.height,0])(s),s.gridLength=a.width}const y=this.zoomManager.getAxisZoom(s.id),{min:m=0,max:b=1}=null!=y?y:{};s.visibleRange=[m,b];const S=s.dataDomain.clipped||s.visibleRange[0]>0||s.visibleRange[1]<1;p||(p=S);let x=s.nice?u[g]:void 0;null!=s.thickness&&s.thickness>0?s.maxThickness=s.thickness:g===hc.Y?s.maxThickness=.3*l.width:s.maxThickness=.3*l.height;const C=s.calculateLayout(x);x=C.primaryTickCount,u[g]=null!==(i=u[g])&&void 0!==i?i:x;let w=0;if(null!=s.thickness&&s.thickness>0)w=s.thickness;else{const{bbox:t}=C;w=g===hc.X?t.height:t.width}return h&&(w+=15),w=Math.ceil(w),d[f]=(null!==(n=d[f])&&void 0!==n?n:0)+w,s.gridPadding=(null!==(o=c[f])&&void 0!==o?o:0)-(null!==(r=d[f])&&void 0!==r?r:0),{clipSeries:p,axisThickness:w,axisOffset:v,primaryTickCount:x}}positionAxis(t){var e,i,n,o;const{axis:r,axisBound:s,axisWidths:a,seriesRect:l,axisOffset:c,axisThickness:d}=t,{position:u}=r;switch(u){case"top":r.translation.x=s.x+(null!==(e=a.left)&&void 0!==e?e:0),r.translation.y=this.clampToOutsideSeriesRect(l,s.y+1+c+d,"y",1);break;case"bottom":r.translation.x=s.x+(null!==(i=a.left)&&void 0!==i?i:0),r.translation.y=this.clampToOutsideSeriesRect(l,s.y+s.height+1-d-c,"y",-1);break;case"left":r.translation.y=s.y+(null!==(n=a.top)&&void 0!==n?n:0),r.translation.x=this.clampToOutsideSeriesRect(l,s.x+c+d,"x",1);break;case"right":r.translation.y=s.y+(null!==(o=a.top)&&void 0!==o?o:0),r.translation.x=this.clampToOutsideSeriesRect(l,s.x+s.width-d-c,"x",-1)}r.updatePosition({rotation:tl(r.rotation),sideFlag:r.label.getSideFlag()})}shouldFlipXY(){return!this.series.some(t=>!(t instanceof ag&&t.shouldFlipXY()))}}cg.className="CartesianChart",cg.type="cartesian";class dg{static isInstance(t){var e;return t instanceof dg||("AgChartInstanceProxy"===(null===(e=t.constructor)||void 0===e?void 0:e.name)&&null!=t.chart||null!=t.chart&&this.validateImplementation(t))}static validateImplementation(t){var e,i;const n=Object.keys(null!==(i=null===(e=t.constructor)||void 0===e?void 0:e.prototype)&&void 0!==i?i:{});return["getOptions","destroy"].every(t=>n.includes(t))}constructor(t){this.chart=t}getOptions(){return this.chart.getOptions()}destroy(){this.chart.destroy()}}function ug(t,e){let i=Math.floor(t[0]),n=t[1];i=function(t,e,i){const n=Math.abs(e-t)/(i-1),o=Math.floor(Math.log10(n)),r=Math.pow(10,o);return Math.floor(t/r)*r}(i,n,e);const o=function(t,e,i){return function(t){const e=Math.floor(Math.log10(t)),i=Math.pow(10,e),n=t/i*10;if(n>0&&n<=1)return i/10;if(n>1&&n<=2)return 2*i/10;if(n>1&&n<=5)return 5*i/10;if(n>5&&n<=10)return 10*i/10;if(n>10&&n<=20)return 20*i/10;if(n>20&&n<=40)return 40*i/10;if(n>40&&n<=50)return 50*i/10;if(n>50&&n<=100)return 100*i/10;return n}((e-t)/(i-1))}(i,n,e);n=i+(e-1)*o;return[[i,n],function(t,e,i){const n=Math.floor(Math.log10(e)),o=e>0&&e<1?Math.abs(n):0,r=Math.pow(10,o),s=new wd(o);for(let n=0;n<i;n++){const i=t+e*n;s[n]=Math.round(i*r)/r}return s}(i,o,e)]}class hg extends gp{constructor(){super(...arguments),this.maxSpacing=NaN}}ba([dl(vl(Gl(1),bl("minSpacing"))),up(NaN),Sa("design:type",Number)],hg.prototype,"maxSpacing",void 0);class pg extends Op{constructor(t,e=new Dd){super(t,e),this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:n,clipped:o}=ka(t,e,i);return{domain:n,clipped:o}}formatDatum(t){return"number"==typeof t?t.toFixed(2):(La.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(t))}createTick(){return new hg}updateSecondaryAxisTicks(t){if(null==this.dataDomain)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");if(0===this.dataDomain.domain.length)return[];const[e,i]=ug(this.dataDomain.domain,null!=t?t:0);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),i}}function fg(){return hl(t=>"number"==typeof t&&0!==t,"expecting a non-zero Number")}pg.className="NumberAxis",pg.type="number",ba([dl(vl(Gl(),ml("max"))),up(NaN),Sa("design:type",Number)],pg.prototype,"min",void 0),ba([dl(vl(Gl(),bl("min"))),up(NaN),Sa("design:type",Number)],pg.prototype,"max",void 0);class gg extends pg{normaliseDataDomain(t){const{min:e,max:i}=this,{extent:n,clipped:o}=ka(t,e,i),r=n[0]>n[1],s=n[0]<0&&n[1]>0,a=0===n[0]&&0===n[1];return(r||s||a)&&(t=[],s?La.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):a&&La.warn("the data domain has 0 extent, no data is rendered.")),0===n[0]&&(n[0]=1),0===n[1]&&(n[1]=-1),{domain:n,clipped:o}}set base(t){this.scale.base=t}get base(){return this.scale.base}constructor(t){super(t,new Jh),this.min=NaN,this.max=NaN}}gg.className="LogAxis",gg.type="log",ba([dl(vl(Gl(),ml("max"),fg())),up(NaN),Sa("design:type",Number)],gg.prototype,"min",void 0),ba([dl(vl(Gl(),bl("min"),fg())),up(NaN),Sa("design:type",Number)],gg.prototype,"max",void 0);class vg extends gp{constructor(){super(...arguments),this.maxSpacing=NaN}}ba([dl(vl(Gl(1),bl("minSpacing"))),up(NaN),Sa("design:type",Number)],vg.prototype,"maxSpacing",void 0);class yg extends Op{constructor(t){super(t,new ip),this.datumFormat="%m/%d/%y, %H:%M:%S",this.min=void 0,this.max=void 0;const{scale:e}=this;this.refreshScale(),this.datumFormatter=e.tickFormat({specifier:this.datumFormat})}normaliseDataDomain(t){var e;let{min:i,max:n}=this,o=!1;return"number"==typeof i&&(i=new Date(i)),"number"==typeof n&&(n=new Date(n)),t.length>2&&(t=(null!==(e=Ta(t))&&void 0!==e?e:[0,1e3]).map(t=>new Date(t))),i instanceof Date&&(o||(o=i>t[0]),t=[i,t[1]]),n instanceof Date&&(o||(o=n<t[1]),t=[t[0],n]),t[0]>t[1]&&(t=[]),{domain:t,clipped:o}}createTick(){return new vg}onLabelFormatChange(t,e){e?super.onLabelFormatChange(t,e):this.labelFormatter=this.scale.tickFormat({ticks:t})}formatDatum(t){var e;return null!==(e=this.moduleCtx.callbackCache.call(this.datumFormatter,t))&&void 0!==e?e:String(t)}calculatePadding(t,e){return[0,1]}}yg.className="TimeAxis",yg.type="time",ba([dl(vl(kl,ml("max"))),Sa("design:type",Object)],yg.prototype,"min",void 0),ba([dl(vl(kl,bl("min"))),Sa("design:type",Object)],yg.prototype,"max",void 0);const mg={[pg.type]:pg,[Dp.type]:Dp,[yg.type]:yg,[Fp.type]:Fp,[gg.type]:gg};function bg(t,e){const i=mg[t];if(i)return new i(e);throw new Error("AG Charts - unknown axis type: "+t)}const Sg={has:t=>Object.prototype.hasOwnProperty.call(mg,t),get axesTypes(){return Object.keys(mg)}},xg={};function Cg(t,e){xg[t]=e}function wg(t){var e;return null!==(e=xg[t])&&void 0!==e?e:{}}const Eg=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy"],optionsInnerKey:"image"},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy"],identifier:"gradient"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bullet"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"}];function Og(t){return Eg.some(e=>"series"===e.type&&e.identifier===t)}function Dg(t){var e;return null===(e=Eg.find(e=>"series"===e.type&&e.identifier===t))||void 0===e?void 0:e.chartTypes}function Ag(t){var e,i;return(null!==(i=null===(e=Eg.find(e=>"series"===e.type&&e.identifier===t))||void 0===e?void 0:e.useCount)&&void 0!==i?i:0)>0}function Tg(t){var e;if("enterprise"!==t.packageType)throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const i=Eg.find(e=>e.type===t.type&&e.optionsKey===t.optionsKey&&e.identifier===t.identifier&&t.chartTypes.every(t=>e.chartTypes.includes(t)));return i&&(null!==(e=i.useCount)&&void 0!==e||(i.useCount=0),i.useCount++),null!=i}const kg={category:"legend"};const Mg={};class Rg extends wa{constructor(t){var e;super(),this.node=new kd({name:"background",zIndex:xu.SERIES_BACKGROUND_ZINDEX}),this.rectNode=new tg,this.visible=!0,this.fill="white",this.image=void 0,this.node.appendChild(this.rectNode),null===(e=t.scene.root)||void 0===e||e.appendChild(this.node),this.destroyFns.push(()=>{var e;return null===(e=t.scene.root)||void 0===e?void 0:e.removeChild(this.node)},t.layoutService.addListener("layout-complete",t=>this.onLayoutComplete(t)))}onLayoutComplete(t){const{width:e,height:i}=t.chart;this.rectNode.width=e,this.rectNode.height=i}}ba([dl(Cl),Vc("node","visible"),Sa("design:type",Boolean)],Rg.prototype,"visible",void 0),ba([dl(Pl),Vc("rectNode","fill"),Sa("design:type",String)],Rg.prototype,"fill",void 0);const Pg={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:Rg};class Ng{set fill(t){this.rh.fill=t}get fill(){return this.rh.fill}set stroke(t){this.rh.stroke=t}get stroke(){return this.rh.stroke}set strokeWidth(t){this.rh.strokeWidth=t}get strokeWidth(){return this.rh.strokeWidth}set width(t){this.rh.width=t}get width(){return this.rh.width}set height(t){this.rh.height=t}get height(){return this.rh.height}set gripLineGap(t){this.rh.gripLineGap=t}get gripLineGap(){return this.rh.gripLineGap}set gripLineLength(t){this.rh.gripLineLength=t}get gripLineLength(){return this.rh.gripLineLength}constructor(t){this.rh=t}}class Lg{set fill(t){this.rm.fill=t}get fill(){return this.rm.fill}set stroke(t){this.rm.stroke=t}get stroke(){return this.rm.stroke}set strokeWidth(t){this.rm.strokeWidth=t}get strokeWidth(){return this.rm.strokeWidth}set fillOpacity(t){this.rm.fillOpacity=t}get fillOpacity(){return this.rm.fillOpacity}constructor(t){this.rm=t}}class Ig extends Wd{constructor(){super(...arguments),this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(t){this._centerX!==t&&(this._centerX=t,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(t){this._centerY!==t&&(this._centerY=t,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(t){this._gripLineGap!==t&&(this._gripLineGap=t,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(t){this._gripLineLength!==t&&(this._gripLineLength=t,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)}get height(){return this._height}computeBBox(){const{centerX:t,centerY:e,width:i,height:n}=this;return new Sc(t-i/2,e-n/2,i,n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}updatePath(){const{path:t,centerX:e,centerY:i,width:n,height:o}=this;t.clear();const r=e-n/2,s=i-o/2,a=this.align(r),l=this.align(s),c=a+this.align(r,n),d=l+this.align(s,o);t.moveTo(a,l),t.lineTo(c,l),t.lineTo(c,d),t.lineTo(a,d),t.lineTo(a,l);const u=this.gripLineGap/2,h=this.gripLineLength/2;t.moveTo(this.align(e-u),this.align(i-h)),t.lineTo(this.align(e-u),this.align(i+h)),t.moveTo(this.align(e+u),this.align(i-h)),t.lineTo(this.align(e+u),this.align(i+h))}}function Fg(t,e){t!==e&&(this.dirtyPath=!0)}Ig.className="RangeHandle",ba([dl(Rl),Sa("design:type",Object)],Ig.prototype,"_fill",void 0),ba([dl(Rl),Sa("design:type",Object)],Ig.prototype,"_stroke",void 0),ba([dl(Fl(0)),Sa("design:type",Object)],Ig.prototype,"_strokeWidth",void 0),ba([dl(Jl),Sa("design:type",Object)],Ig.prototype,"_lineCap",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],Ig.prototype,"_width",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],Ig.prototype,"_gripLineGap",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],Ig.prototype,"_gripLineLength",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],Ig.prototype,"_height",void 0);class _g extends Wd{constructor(){super(...arguments),this.x=0,this.y=0,this.width=200,this.height=30,this.minRange=.05,this._min=0,this._max=1}set min(t){var e;t=nl(0,t,this.max-this.minRange),this._min===t||isNaN(t)||(this._min=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get min(){return this._min}set max(t){var e;t=nl(this.min+this.minRange,t,1),this._max===t||isNaN(t)||(this._max=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get max(){return this._max}computeBBox(){const{x:t,y:e,width:i,height:n}=this;return new Sc(t,e,i,n)}computeVisibleRangeBBox(){const{x:t,y:e,width:i,height:n,min:o,max:r}=this,s=t+i*o;return new Sc(s,e,t+i*r-s,n)}updatePath(){const{path:t,x:e,y:i,width:n,height:o,min:r,max:s}=this;t.clear();const a=this.align(e),l=this.align(i),c=a+this.align(e,n),d=l+this.align(i,o);t.moveTo(a,l),t.lineTo(c,l),t.lineTo(c,d),t.lineTo(a,d),t.lineTo(a,l);const u=this.align(e+n*r),h=this.align(e+n*s);t.moveTo(u,l),t.lineTo(u,d),t.lineTo(h,d),t.lineTo(h,l),t.lineTo(u,l)}}_g.className="RangeMask",ba([jc({changeValue:Fg}),dl(Fl(0)),Sa("design:type",Object)],_g.prototype,"x",void 0),ba([jc({changeValue:Fg}),dl(Fl(0)),Sa("design:type",Object)],_g.prototype,"y",void 0),ba([jc({changeValue:Fg}),dl(Fl(0)),Sa("design:type",Object)],_g.prototype,"width",void 0),ba([jc({changeValue:Fg}),dl(Fl(0)),Sa("design:type",Object)],_g.prototype,"height",void 0),ba([dl(Fl()),Sa("design:type",Number)],_g.prototype,"_min",void 0),ba([dl(Fl()),Sa("design:type",Number)],_g.prototype,"_max",void 0);class Gg extends kd{set x(t){this.mask.x=t,this.updateHandles()}get x(){return this.mask.x}set y(t){this.mask.y=t,this.updateHandles()}get y(){return this.mask.y}set width(t){this.mask.width=t,this.updateHandles()}get width(){return this.mask.width}set height(t){this.mask.height=t,this.updateHandles()}get height(){return this.mask.height}set min(t){this.mask.min=t}get min(){return this.mask.min}set max(t){this.mask.max=t}get max(){return this.mask.max}constructor(){super({name:"rangeSelectorGroup"}),this.minHandle=new Ig,this.maxHandle=new Ig,this.mask=(()=>{const{x:t,y:e,width:i,height:n,min:o,max:r}=Gg.defaults,s=new _g;s.x=t,s.y=e,s.width=i,s.height=n,s.min=o,s.max=r;const{minHandle:a,maxHandle:l}=this;return a.centerX=t,l.centerX=t+i,a.centerY=l.centerY=e+n/2,this.append([s,a,l]),s.onRangeChange=()=>{var t;this.updateHandles(),null===(t=this.onRangeChange)||void 0===t||t.call(this)},s})(),this._x=Gg.defaults.x,this._y=Gg.defaults.y,this._width=Gg.defaults.width,this._height=Gg.defaults.height,this._min=Gg.defaults.min,this._max=Gg.defaults.max,this.isContainerNode=!0}updateHandles(){const{minHandle:t,maxHandle:e,x:i,y:n,width:o,height:r,mask:s}=this;t.centerX=i+o*s.min,e.centerX=i+o*s.max,t.centerY=e.centerY=n+r/2}computeBBox(){return this.mask.computeBBox()}computeVisibleRangeBBox(){return this.mask.computeVisibleRangeBBox()}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===pc.NONE&&!i)return void(n&&n.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const{mask:o,minHandle:r,maxHandle:s}=this;[o,r,s].forEach(n=>{n.visible&&(i||n.dirty>pc.NONE)&&(e.save(),n.render(Object.assign(Object.assign({},t),{ctx:e,forceRender:i})),e.restore())}),this.markClean({force:!0}),n&&n.nodesRendered++}}Gg.className="Range",Gg.defaults={x:0,y:0,width:200,height:30,min:0,max:1};class Bg extends wa{set width(t){this.rs.width=t}get width(){return this.rs.width}set height(t){this.rs.height=t}get height(){return this.rs.height}set min(t){this.rs.min=t}get min(){return this.rs.min}set max(t){this.rs.max=t}get max(){return this.rs.max}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){const t=this.enabled&&this.visible;this.rs.visible=t,t?this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max},y:{min:0,max:1}}):this.ctx.zoomManager.updateZoom("navigator")}constructor(t){var e;super(),this.ctx=t,this.rs=new Gg,this.mask=new Lg(this.rs.mask),this.minHandle=new Ng(this.rs.minHandle),this.maxHandle=new Ng(this.rs.maxHandle),this.minHandleDragging=!1,this.maxHandleDragging=!1,this.panHandleOffset=NaN,this.enabled=!1,this.margin=10,this._visible=!0,this.rs.onRangeChange=()=>t.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max},y:{min:0,max:1}}),null===(e=t.scene.root)||void 0===e||e.appendChild(this.rs);const i={bypassPause:["animation"]};this.destroyFns.push(t.interactionManager.addListener("drag-start",t=>this.onDragStart(t),i),t.interactionManager.addListener("drag",t=>this.onDrag(t),i),t.interactionManager.addListener("hover",t=>this.onDrag(t),i),t.interactionManager.addListener("drag-end",()=>this.onDragStop(),i),t.layoutService.addListener("before-series",t=>this.layout(t)),t.layoutService.addListener("layout-complete",t=>this.layoutComplete(t)),()=>{var e;return null===(e=t.scene.root)||void 0===e?void 0:e.removeChild(this.rs)},()=>this.ctx.zoomManager.updateZoom("navigator")),this.updateGroupVisibility()}layout({shrinkRect:t}){if(this.enabled){const e=this.rs.height+this.margin;t.shrink(e,"bottom"),this.rs.y=t.y+t.height+this.margin}return{shrinkRect:t}}layoutComplete({series:{rect:t,visible:e}}){this.enabled&&e&&(this.rs.x=t.x,this.rs.width=t.width),this.visible=e}onDragStart(t){if(!this.enabled)return;const{offsetX:e,offsetY:i}=t,{rs:n}=this,{minHandle:o,maxHandle:r,x:s,width:a,min:l}=n,c=n.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(o.containsPoint(e,i)?this.minHandleDragging=!0:r.containsPoint(e,i)?this.maxHandleDragging=!0:c.containsPoint(e,i)&&(this.panHandleOffset=(e-s)/a-l))}onDrag(t){if(!this.enabled)return;const{rs:e,panHandleOffset:i}=this,{x:n,y:o,width:r,height:s,minHandle:a,maxHandle:l}=e,{offsetX:c,offsetY:d}=t,u=n+r*e.min,h=n+r*e.max,p=new Sc(u,o,h-u,s),f=()=>Math.min(Math.max((c-n)/r,0),1);if(a.containsPoint(c,d)||l.containsPoint(c,d)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):p.containsPoint(c,d)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)e.min=f();else if(this.maxHandleDragging)e.max=f();else if(!isNaN(i)){const t=e.max-e.min,n=Math.min(f()-i,1-t);n<=e.min?(e.min=n,e.max=e.min+t):(e.max=n+t,e.min=e.max-t)}}onDragStop(){this.stopHandleDragging()}stopHandleDragging(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN}}ba([jc({changeValue(t){t&&(this.min=0,this.max=1),this.updateGroupVisibility()}}),dl(Cl),Sa("design:type",Object)],Bg.prototype,"enabled",void 0),ba([dl(Fl(0)),Sa("design:type",Object)],Bg.prototype,"margin",void 0);const Vg={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:Bg,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}},jg=({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}},Wg=t=>{const{fill:e,stroke:i}=jg(t);return{marker:{fill:e,stroke:i}}},zg={SMALL:12,MEDIUM:13,LARGE:17},Ug={BOTTOM:"bottom",LEFT:"left",TOP:"top"},Hg={CATEGORY:"category",NUMBER:"number",TIME:"time",LOG:"log"},Kg={ANGLE_CATEGORY:"angle-category",ANGLE_NUMBER:"angle-number",RADIUS_CATEGORY:"radius-category",RADIUS_NUMBER:"radius-number"},Yg={},Xg={},qg={has:t=>Object.prototype.hasOwnProperty.call(Yg,t),isCartesian:t=>"cartesian"===Yg[t],isPolar:t=>"polar"===Yg[t],isHierarchy:t=>"hierarchy"===Yg[t],get seriesTypes(){return Object.keys(Yg)},get cartesianTypes(){return this.seriesTypes.filter(t=>this.isCartesian(t))},get polarTypes(){return this.seriesTypes.filter(t=>this.isPolar(t))},get hierarchyTypes(){return this.seriesTypes.filter(t=>this.isHierarchy(t))}};function $g(t,e){var i;Xg[t]=Ka([null!==(i=Xg[t])&&void 0!==i?i:{},e])}function Zg(t){var e;return null!==(e=Xg[t])&&void 0!==e?e:{}}function Jg(t){var e,i,n,o;return null!==(o=null!==(e=t.type)&&void 0!==e?e:null===(n=null===(i=t.series)||void 0===i?void 0:i[0])||void 0===n?void 0:n.type)&&void 0!==o?o:"line"}function Qg(t){const e=Jg(t);return null==e||("cartesian"===e?(La.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):qg.isCartesian(e)||"cartesian"===(null===(i=Dg(e))||void 0===i?void 0:i.find(t=>"cartesian"===t)));var i}function tv(t){const e=Jg(t);return null!=e&&("hierarchy"===e?(La.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):qg.isHierarchy(e)||"hierarchy"===(null===(i=Dg(e))||void 0===i?void 0:i.find(t=>"hierarchy"===t)));var i}function ev(t){const e=Jg(t);return null!=e&&("polar"===e?(La.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):qg.isPolar(e)||"polar"===(null===(i=Dg(e))||void 0===i?void 0:i.find(t=>"polar"===t)));var i}const iv={axes:[{type:Hg.NUMBER,position:Ug.LEFT},{type:Hg.CATEGORY,position:Ug.BOTTOM}]};const nv=Symbol("extends-chart-defaults"),ov=Symbol("extends-legend-defaults"),rv=Symbol("extends-legend-item-defaults"),sv=Symbol("extends-legend-item-marker-defaults"),av=Symbol("extends-axes-defaults"),lv=Symbol("extends-axes-label-defaults"),cv=Symbol("extends-axes-line-defaults"),dv=Symbol("extends-axes-tick-defaults"),uv=Symbol("extends-axes-grid-line-defaults"),hv=Symbol("extends-series-defaults"),pv=Symbol("extends-cartesian-marker-defaults"),fv=Symbol("override-series-label-defaults"),gv=Symbol("default-font"),vv=Symbol("default-label-colour"),yv=Symbol("default-inverted-label-colour"),mv=Symbol("default-inside-series-label-colour"),bv=Symbol("default-muted-label-colour"),Sv=Symbol("default-axis-grid-colour"),xv=Symbol("default-axis-line-colour"),Cv=Symbol("default-cross-lines-colour"),wv=Symbol("default-background-colour"),Ev=Symbol("default-shadow-colour"),Ov=Symbol("default-waterfall-series-positive-colors"),Dv=Symbol("default-waterfall-series-negative-colors"),Av=Symbol("default-waterfall-series-total-colors"),Tv=Symbol("default-waterfall-series-connector-line-stroke"),kv=Symbol("default-polar-series-stroke"),Mv=Symbol("default-diverging-series-colour-range"),Rv=Symbol("default-hierarchy-fills"),Pv=Symbol("default-hierarchy-strokes");function Nv(t,e,i,n,o){const{defaultDuration:r}=i,{addPhaseFn:s,updatePhaseFn:a,removePhaseFn:l}=o,c=(n,o,s)=>{i.animate({id:`${t}_${e}_${o.id}_${n}`,groupId:t,from:0,to:1,ease:Yc,onUpdate(t,e){e&&"removed"!==n||(o.path.clear({trackChanges:!0}),s(t,o),o.checkPathDirty())},onStop(){"added"===n&&(o.path.clear({trackChanges:!0}),s(1,o),o.checkPathDirty())},duration:td[n].animationDuration*r,delay:td[n].animationDelay*r})};for(const t of n)i.isSkipped()||(c("removed",t,l),c("updated",t,a)),c("added",t,s)}const Lv=hl(t=>Df(t)||Object.getPrototypeOf(t)===Cu,"expecting a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class");class Iv extends vc{constructor(){super(...arguments),this.enabled=!0,this.shape=wu,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){const{size:t,fill:e,fillOpacity:i,stroke:n,strokeWidth:o,strokeOpacity:r}=this;return{size:t,fill:e,fillOpacity:i,stroke:n,strokeWidth:o,strokeOpacity:r}}getDiameter(){return this.size+this.strokeWidth}}function Fv({id:t},e,i){id(t,"markers",e,i,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1}),i.forEach(t=>t.cleanup())}function _v({id:t},e,i,n){ed(t,"markers",e,i,{fromFn:(t,e)=>{var i,o;const r=null!==(o=null===(i=e.midPoint)||void 0===i?void 0:i.x)&&void 0!==o?o:n,s=Xc(r/n)-.1;return{scalingX:0,scalingY:0,animationDelay:Math.max(Math.min(s,1),0),animationDuration:.2}},toFn:()=>({scalingX:1,scalingY:1})})}function Gv(t){return{opacity:1,scalingX:1,scalingY:1}}function Bv(t,e){var i,n,o,r;return{translationX:null!==(n=null===(i=e.point)||void 0===i?void 0:i.x)&&void 0!==n?n:NaN,translationY:null!==(r=null===(o=e.point)||void 0===o?void 0:o.y)&&void 0!==r?r:NaN}}function Vv(t,e){const i=(e,i)=>{const n=t[i][e];return Array.isArray(n)?n[0]:n},n=e=>{const{xValue:n}=e;return t.moved[n]?{point:i(n,"moved"),status:"updated"}:t.removed[n]?{point:i(n,"removed"),status:"removed"}:t.added[n]?{point:i(n,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(t,i)=>{var o,r,s,a,l,c;const{status:d,point:u}=n(i);if("unknown"===d)return{opacity:0};const h=Object.assign({translationX:null!==(r=null===(o=null==u?void 0:u.from)||void 0===o?void 0:o.x)&&void 0!==r?r:t.translationX,translationY:null!==(a=null===(s=null==u?void 0:u.from)||void 0===s?void 0:s.y)&&void 0!==a?a:t.translationY,opacity:t.opacity},td[d]);return"added"===e?Object.assign(Object.assign(Object.assign({},h),{opacity:0,translationX:null===(l=null==u?void 0:u.to)||void 0===l?void 0:l.x,translationY:null===(c=null==u?void 0:u.to)||void 0===c?void 0:c.y}),td.added):("added"===d&&(h.opacity=0),h)},toFn:(t,i)=>{var o,r;const{status:s,point:a}=n(i);if("unknown"===s)return{opacity:0};const l=Object.assign({translationX:i.point.x,translationY:i.point.y,opacity:1},td[s]);return"removed"===s||"removed"===e?Object.assign(Object.assign(Object.assign({},l),{translationX:null===(o=null==a?void 0:a.to)||void 0===o?void 0:o.x,translationY:null===(r=null==a?void 0:a.to)||void 0===r?void 0:r.y,opacity:0}),td.removed):l}}}function jv(t){return t.reduce(({min:t,max:e},i)=>((null==t||t.point.x>i.point.x)&&(t=i),(null==e||e.point.x<i.point.x)&&(e=i),{min:t,max:e}),{})}function Wv(t,e,i){const n=(e.y-t.y)/(e.x-t.x);return{x:i,y:(i-t.x)*n+t.y}}function zv(t,e,i,n){let o=-1,r=0;const s=[];for(;r<t.length;)t[r].change!==e?t[r].change!==i?(s.length>0&&(n(s,o,r),s.length=0),o=r,r++):r++:(s.push(t[r]),r++);s.length>0&&n(s,o,r)}function Uv(t,e){zv(t,"out","in",(i,n,o)=>{var r,s;-1===n&&t[o]?i.forEach(e=>e.to=t[o].from):o===t.length&&t[n]?i.forEach(e=>e.to=t[n].from):"intersect"===e&&(null===(r=t[n])||void 0===r?void 0:r.from)&&(null===(s=t[o])||void 0===s?void 0:s.from)?i.forEach(e=>e.to=Wv(t[n].from,t[o].from,e.from.x)):i.forEach(t=>t.to=t.from)}),zv(t,"in","out",(i,n,o)=>{var r,s;-1===n&&t[o]?i.forEach(e=>e.from=t[o].to):o===t.length&&t[n]?i.forEach(e=>e.from=t[n].to):"intersect"===e&&(null===(r=t[n])||void 0===r?void 0:r.to)&&(null===(s=t[o])||void 0===s?void 0:s.to)?i.forEach(e=>e.from=Wv(t[n].to,t[o].to,e.to.x)):i.forEach(t=>t.from=t.to)})}function Hv(t,e,i){const n=isNaN(t.x)?e.x:t.x,o=isNaN(t.y)?e.y:t.y,r=e.x-t.x,s=e.y-t.y;return{x:n+(isNaN(r)?0:r*i),y:o+(isNaN(s)?0:s*i)}}function Kv(t,e,i){const{path:n}=i;let o;for(const i of t){const t=e[i.change];if(null==t)continue;const{from:r,to:s}=i;if(null==r||null==s)continue;const{x:a,y:l}=Hv(r,s,t);if(!1===i.moveTo)n.lineTo(a,l);else if(!0!==i.moveTo&&o){if(o){const e="in"===i.moveTo?t:1-t,{x:r,y:s}=Hv(o,{x:a,y:l},e);n.lineTo(r,s),n.moveTo(a,l)}}else n.moveTo(a,l);o={x:a,y:l}}}function Yv({id:t},e,i){id(t,"path_properties",e,i,{clipScalingX:0},{clipScalingX:1},{start:{clipMode:"normal"},finish:{clipMode:void 0}})}function Xv(t){return e=>({opacity:t.getOpacity(),clipScalingX:1,clipMode:void 0})}function qv(t,e){if(!e)return NaN;if(t instanceof Date&&(t=t.getTime()),"continuous"===e.type&&"number"==typeof t){return(t-e.domain[0])/(e.domain[1]-e.domain[0])*(e.range[1]-e.range[0])+e.range[0]}if("log"===e.type&&"number"==typeof t)return e.convert(t);const i=e.domain.findIndex(e=>e===t);return i>=0?e.range[i]:NaN}function $v(t,e){const i=Number(t),n=Number(e);return isNaN(i)||isNaN(n)?t===e:Math.abs(n-i)<.25}function Zv(t=!1,e=!1){return t===e?!!t:t?"in":"out"}function Jv(t,e,i={}){var n,o,r,s;const{backfillSplitMode:a="intersect"}=i,l=e=>{var i,n;return{x:qv(null!==(i=e.xValue)&&void 0!==i?i:NaN,t.scales.x),y:qv(null!==(n=e.yValue)&&void 0!==n?n:NaN,t.scales.y)}},c=t=>{var i,n;return{x:qv(null!==(i=t.xValue)&&void 0!==i?i:NaN,e.scales.x),y:qv(null!==(n=t.yValue)&&void 0!==n?n:NaN,e.scales.y)}},d=[],u={added:{},moved:{},removed:{}},h=(t,e,i,n="move")=>{t&&(isNaN(t.point.x)||isNaN(t.point.y))&&(t=e);const o={from:null==t?void 0:t.point,to:null==e?void 0:e.point,moveTo:Zv(null==t?void 0:t.point.moveTo,null==e?void 0:e.point.moveTo),change:n};"move"===n?(u.moved[i]=o,y++,m++):"in"===n?(u.added[i]=o,m++):"out"===n&&(u.removed[i]=o,y++),d.push(o)},{min:p,max:f}=jv(e.nodeData),{min:g,max:v}=jv(t.nodeData);let y=0,m=0;for(;y<e.nodeData.length||m<t.nodeData.length;){const i=e.nodeData[y],a=t.nodeData[m],d=i?l(i):void 0,u=a?c(a):void 0,b=void 0;if(d&&$v(d.x,null==a?void 0:a.point.x))h(i,a,a.xValue,"move");else if(d&&d.x<(null!==(n=null==g?void 0:g.point.x)&&void 0!==n?n:-1/0))h(i,b,i.xValue,"out");else if(d&&d.x>(null!==(o=null==v?void 0:v.point.x)&&void 0!==o?o:1/0))h(i,b,i.xValue,"out");else if(u&&u.x<(null!==(r=null==p?void 0:p.point.x)&&void 0!==r?r:-1/0))h(b,a,a.xValue,"in");else if(u&&u.x>(null!==(s=null==f?void 0:f.point.x)&&void 0!==s?s:1/0))h(b,a,a.xValue,"in");else if(d&&d.x<(null==a?void 0:a.point.x))h(i,b,i.xValue,"out");else if(u&&u.x<(null==i?void 0:i.point.x))h(b,a,a.xValue,"in");else if(i)h(i,b,i.xValue,"out");else{if(!a)throw new Error("Unable to process points");h(b,a,a.xValue,"in")}}return Uv(d,a),{result:d,resultMap:u}}function Qv(t,e,i,n={}){var o,r,s;const{backfillSplitMode:a="intersect",multiDatum:l=!1}=n,c=[],d={added:{},moved:{},removed:{}},u={added:{},moved:{},removed:{}};let h=void 0,p=void 0;const f=(t,e)=>{var i,n;const o="move"===e.change?"moved":"in"===e.change?"added":"removed";l?(null!==(i=(n=u[o])[t])&&void 0!==i||(n[t]=[]),u[o][t].push(e)):d[o][t]=e,h=e,p=t};let g=0,v=0,y=!1;for(;g<e.nodeData.length||v<t.nodeData.length;){const n=e.nodeData[g],a=t.nodeData[v];let d;if((null==n?void 0:n.xValue)===(null==a?void 0:a.xValue))d={change:"move",moveTo:Zv(null!==(o=n.point.moveTo)&&void 0!==o&&o,a.point.moveTo),from:n.point,to:a.point},f(n.xValue,d),g++,v++;else if(i.removed.indexOf(null==n?void 0:n.xValue)>=0)d={change:"out",moveTo:null!==(r=n.point.moveTo)&&void 0!==r&&r,from:n.point},f(n.xValue,d),g++;else if(i.added.indexOf(null==a?void 0:a.xValue)>=0)d={change:"in",moveTo:null!==(s=a.point.moveTo)&&void 0!==s&&s,to:a.point},f(a.xValue,d),v++;else if(l&&h&&p===(null==n?void 0:n.xValue))d=Object.assign({},h),f(n.xValue,d),g++;else{if(!l||!h||p!==(null==a?void 0:a.xValue)){y=!0;break}d=Object.assign({},h),f(a.xValue,d),v++}c.push(d)}let m=-1/0;return y||(y=c.some(t=>{const{change:e,to:{x:i=-1/0}={}}=t;if("out"===e)return;const n=i<m;return m=i,n})),y?{result:void 0,resultMap:void 0}:(Uv(c,a),l?{result:c,resultMap:u}:{result:c,resultMap:d})}function ty(t,e,i,n,o){const r=function(t,e){let i="updated";const n=t=>t.visible;return!n(e)&&n(t)?i="added":n(e)&&!n(t)&&(i="removed"),i}(t,e);return{status:r,path:{addPhaseFn:(t,e)=>{o(i,{move:1,in:t},e)},updatePhaseFn:(t,e)=>{o(i,{move:t},e)},removePhaseFn:(t,e)=>{o(i,{move:0,out:t},e)}},pathProperties:function(t,e){const i="none"===e?"updated":t,n={fromFn:e=>{let n;return n="removed"===t?{finish:{visible:!1}}:"added"===t?{start:{visible:!0}}:{},Object.assign(Object.assign({},td[i]),n)},toFn:t=>Object.assign({},td[i])};return"fade"===e?{fromFn:e=>{const i="added"===t?0:e.opacity;return Object.assign({opacity:i},n.fromFn(e))},toFn:e=>{const i="removed"===t?0:1;return Object.assign({opacity:i},n.toFn(e))}}:n}(r,n)}}var ey;function iy(t){const{points:e}=t.fillData;return{top:e.slice(0,e.length/2),bottom:e.slice(e.length/2).reverse()}}function ny(t,e,i){return{scales:e.scales,nodeData:i[t],visible:e.visible}}function oy(t,e,i){var n;const o="category"===(null===(n=t.scales.x)||void 0===n?void 0:n.type);let r="updated";e.visible&&!t.visible?r="removed":!e.visible&&t.visible&&(r="added");const{resultMap:s}=o&&i?Qv(t,e,i,{backfillSplitMode:"static",multiDatum:!0}):Jv(t,e,{backfillSplitMode:"static"}),{top:a,bottom:l}=o&&i?function(t,e,i){const n=iy(e),o=iy(t),r={multiDatum:!0};return{top:Qv(ny("top",t,o),ny("top",e,n),i,r),bottom:Qv(ny("bottom",t,o),ny("bottom",e,n),i,r)}}(t,e,i):function(t,e){const i=iy(e),n=iy(t);return{top:Jv(ny("top",t,n),ny("top",e,i)),bottom:Jv(ny("bottom",t,n),ny("bottom",e,i))}}(t,e);if(void 0===s||void 0===a.result||void 0===l.result)return;const c=[...a.result,...l.result.reverse()];return{fill:ty(t,e,c,"none",Kv),marker:Vv(s,r)}}ba([dl(Cl),gc({redraw:pc.MAJOR}),Sa("design:type",Object)],Iv.prototype,"enabled",void 0),ba([dl(Lv),gc({redraw:pc.MAJOR}),Sa("design:type",Object)],Iv.prototype,"shape",void 0),ba([dl(Fl(0)),gc({redraw:pc.MAJOR}),Sa("design:type",Number)],Iv.prototype,"size",void 0),ba([dl(Pl),gc({redraw:pc.MAJOR}),Sa("design:type",String)],Iv.prototype,"fill",void 0),ba([dl(_l(0,1)),gc({redraw:pc.MAJOR}),Sa("design:type",Number)],Iv.prototype,"fillOpacity",void 0),ba([dl(Pl),gc({redraw:pc.MAJOR}),Sa("design:type",String)],Iv.prototype,"stroke",void 0),ba([dl(_l(0)),gc({redraw:pc.MAJOR}),Sa("design:type",Number)],Iv.prototype,"strokeWidth",void 0),ba([dl(_l(0,1)),gc({redraw:pc.MAJOR}),Sa("design:type",Number)],Iv.prototype,"strokeOpacity",void 0),ba([dl(xl),gc({redraw:pc.MAJOR}),Sa("design:type",Function)],Iv.prototype,"formatter",void 0),function(t){t[t.Fill=0]="Fill",t[t.Stroke=1]="Stroke",t[t.Marker=2]="Marker",t[t.Label=3]="Label"}(ey||(ey={}));class ry extends ag{constructor(t){super({moduleCtx:t,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[Lu.NEAREST_BY_MAIN_AXIS_FIRST,Lu.EXACT_SHAPE_MATCH],animationResetFns:{path:Xv({getOpacity:()=>this.getOpacity()}),label:$u,marker:(t,e)=>Object.assign(Object.assign({},{opacity:1,scalingX:1,scalingY:1}),Bv(0,e))}}),this.tooltip=new ph,this.marker=new Iv,this.label=new yu,this.fill="#c16068",this.stroke="#874349",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.xName=void 0,this.strokeWidth=2,this.shadow=void 0}processData(t){return xa(this,void 0,void 0,(function*(){const{xKey:e,yKey:i,normalizedTo:n,data:o,visible:r,seriesGrouping:{groupIndex:s=this.id}={}}=this;if(null==e||null==i||null==o)return;const a=!this.ctx.animationManager.isSkipped(),{isContinuousX:l,isContinuousY:c}=this.isContinuous(),d=[`area-stack-${s}-yValues`,`area-stack-${s}-yValues-trailing`,`area-stack-${s}-yValues-prev`,`area-stack-${s}-yValues-trailing-prev`,`area-stack-${s}-yValues-marker`],u=[],h=n&&isFinite(n)?n:void 0;h&&(u.push(lu(this,[d[0],d[1],d[4]],h,"range")),u.push(lu(this,[d[2],d[3]],h,"range"))),!l&&a&&this.processedData&&u.push(gu(this.processedData)),a&&u.push(uu(this));const p={invalidValue:null};r||(p.forceValue=0),yield this.requestDataModel(t,o,{props:[Gu(this,e,l,{id:"xValue"}),Bu(this,i,c,Object.assign({id:"yValueRaw"},p)),...ju(this,i,c,"window","current",Object.assign(Object.assign({id:"yValueEnd"},p),{groupId:d[0]})),...ju(this,i,c,"window-trailing","current",Object.assign(Object.assign({id:"yValueStart"},p),{groupId:d[1]})),...ju(this,i,c,"window","last",Object.assign(Object.assign({id:"yValuePreviousEnd"},p),{groupId:d[2]})),...ju(this,i,c,"window-trailing","last",Object.assign(Object.assign({id:"yValuePreviousStart"},p),{groupId:d[3]})),...ju(this,i,c,"normal","current",Object.assign(Object.assign({id:"yValueCumulative"},p),{groupId:d[4]})),...u],groupByKeys:!0}),this.animationState.transition("updateData")}))}getSeriesDomain(t){const{processedData:e,dataModel:i,axes:n}=this;if(!e||!i)return[];const o=n[hc.X],r=n[hc.Y],s=i.resolveProcessedDataDefById(this,"xValue"),a=i.getDomain(this,"xValue","key",e),l=i.getDomain(this,"yValueEnd","value",e);if(t===hc.X)return"key"===(null==s?void 0:s.def.type)&&"category"===s.def.valueType?a:qp(Ta(a),o);if(r instanceof gg||r instanceof yg)return qp(l,r);return qp([l[0]>0?0:l[0],l[1]<0?0:l[1]],r)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e;return xa(this,void 0,void 0,(function*(){const{axes:i,data:n,processedData:{data:o}={},dataModel:r}=this,s=i[hc.X],a=i[hc.Y];if(!(s&&a&&n&&r))return[];const{yKey:l="",xKey:c="",marker:d,label:u,fill:h,stroke:p}=this,{scale:f}=s,{scale:g}=a,v=Od.is(g),y=(null!==(e=f.bandwidth)&&void 0!==e?e:0)/2,m=r.resolveProcessedDataDefsByIds(this,["yValueStart","yValueEnd","yValueRaw","yValuePreviousStart","yValuePreviousEnd","yValueCumulative"]),b=t=>{const{point:e}=t,i=ma(t,["point"]);return Object.assign(Object.assign({},i),{point:Object.assign(Object.assign({},e),{moveTo:!0})})},S=(t,e,i)=>{const n=f.convert(t)+y,o=g.convert(e);return[{point:{x:n,y:g.convert(i)},yValue:i,xValue:t},{point:{x:n,y:o},yValue:e,xValue:t}]},x=(t,e,i)=>{let n;const o=this.normalizedTo&&isFinite(this.normalizedTo),r=o&&v&&tu(i);(!o&&!isNaN(i)||r)&&(n=e);return{x:f.convert(t)+y,y:g.convert(n),size:d.size}},C=l,w=[],E=[],O={itemId:C,fillData:{itemId:C,points:[]},strokeData:{itemId:C,points:[]},labelData:w,nodeData:E,scales:t.calculateScaling.call(this),visible:this.visible},D=O.fillData.points,A=[],T=O.strokeData.points;let k,M=-1,R=-1/0;return null==o||o.forEach(t=>{const{keys:e,keys:[i],datum:n,values:o}=t;o.forEach((t,o)=>{var s,a,f;M++;const g=n[o],v=r.resolveProcessedDataDefsValues(m,{keys:e,values:t}),{yValueRaw:y,yValueCumulative:O}=v;let{yValueStart:P,yValueEnd:N,yValuePreviousStart:L,yValuePreviousEnd:I}=v;const F=null!=y,_=x(i,+O,y);if(F&&d&&E.push({index:M,series:this,itemId:C,datum:g,midPoint:{x:_.x,y:_.y},cumulativeValue:N,yValue:y,xValue:i,yKey:l,xKey:c,point:_,fill:null!==(s=d.fill)&&void 0!==s?s:h,stroke:null!==(a=d.stroke)&&void 0!==a?a:p,strokeWidth:null!==(f=d.strokeWidth)&&void 0!==f?f:this.getStrokeWidth(this.strokeWidth)}),F&&u){const t=this.getLabelText(u,{value:y,datum:g,xKey:c,yKey:l,xName:this.xName,yName:this.yName},t=>iu(t)?t.toFixed(2):String(t));w.push({index:M,series:this,itemId:l,datum:g,x:_.x,y:_.y,label:t?{text:t,fontStyle:u.fontStyle,fontWeight:u.fontWeight,fontSize:u.fontSize,fontFamily:u.fontFamily,textAlign:"center",textBaseline:"bottom",fill:u.color}:void 0})}null!=R&&null!=y||(P=null!=P?P:0,N=null!=P?P:0,L=null!=L?L:0,I=null!=L?L:0);const[G,B]=S(k,L,I),[V,j]=S(i,P,N);null!=k&&null!=i&&(D.push(G),A.push(B),D.push(V),A.push(j)),F&&null!=R&&M>0&&(T.push(b(G)),T.push(V)),k=i,R=y})}),T.length>0&&(T[0]=b(T[0])),A.reverse(),D.push(...A),[O]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(Af(t))}updatePathNodes(t){return xa(this,void 0,void 0,(function*(){const{opacity:e,visible:i,animationEnabled:n}=t,[o,r]=t.paths,{seriesRectHeight:s,seriesRectWidth:a}=this.nodeDataDependencies,l=this.getStrokeWidth(this.strokeWidth);r.setProperties({tag:ey.Stroke,fill:void 0,lineJoin:r.lineCap="round",pointerEvents:Cc.None,stroke:this.stroke,strokeWidth:l,strokeOpacity:this.strokeOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,opacity:e,visible:i}),o.setProperties({tag:ey.Fill,stroke:void 0,lineJoin:"round",pointerEvents:Cc.None,fill:this.fill,fillOpacity:this.fillOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,strokeOpacity:this.strokeOpacity,fillShadow:this.shadow,opacity:e,visible:i||n,strokeWidth:l});const c=t=>{var e,i;null==t.clipPath&&(t.clipPath=new Vd,t.clipScalingX=1,t.clipScalingY=1),null===(e=t.clipPath)||void 0===e||e.clear({trackChanges:!0}),null===(i=t.clipPath)||void 0===i||i.rect(-25,-25,(null!=a?a:0)+50,(null!=s?s:0)+50)};c(r),c(o)}))}updatePaths(t){return xa(this,void 0,void 0,(function*(){this.updateAreaPaths([t.paths],[t.contextData])}))}updateAreaPaths(t,e){this.updateFillPath(t,e),this.updateStrokePath(t,e)}updateFillPath(t,e){e.forEach(({fillData:e},i)=>{const[n]=t[i],{path:o}=n;o.clear({trackChanges:!0});for(const{point:t}of e.points)t.moveTo?o.moveTo(t.x,t.y):o.lineTo(t.x,t.y);o.closePath(),n.checkPathDirty()})}updateStrokePath(t,e){e.forEach(({strokeData:e},i)=>{const[,n]=t[i],{path:o}=n;o.clear({trackChanges:!0});for(const{point:t}of e.points)t.moveTo?o.moveTo(t.x,t.y):o.lineTo(t.x,t.y);n.checkPathDirty()})}updateMarkerSelection(t){return xa(this,void 0,void 0,(function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:n}}=this,o=n&&e?e:[];return this.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(o)}))}updateMarkerNodes(t){return xa(this,void 0,void 0,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:n="",yKey:o="",marker:r,fill:s,stroke:a,strokeWidth:l,fillOpacity:c,strokeOpacity:d}=this,u=Xd(i&&this.highlightStyle.item,r.getStyle(),{fill:s,stroke:a,strokeWidth:l,fillOpacity:c,strokeOpacity:d});e.each((t,e)=>{this.updateMarkerStyle(t,r,{datum:e,highlighted:i,xKey:n,yKey:o},u)}),i||this.marker.markClean()}))}updateLabelSelection(t){return xa(this,void 0,void 0,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,t=>{t.tag=ey.Label})}))}updateLabelNodes(t){return xa(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:n,fontWeight:o,fontSize:r,fontFamily:s,color:a}=this.label;e.each((t,e)=>{const{x:l,y:c,label:d}=e;d&&i&&this.visible?(t.fontStyle=n,t.fontWeight=o,t.fontSize=r,t.fontFamily=s,t.textAlign=d.textAlign,t.textBaseline=d.textBaseline,t.text=d.text,t.x=l,t.y=c-10,t.fill=a,t.visible=!0):t.visible=!1})}))}getTooltipHtml(t){const{xKey:e,id:i,axes:n,xName:o,yName:r,tooltip:s,marker:a,dataModel:l}=this,{yKey:c,xValue:d,yValue:u,datum:h}=t,p=n[hc.X],f=n[hc.Y];if(!(e&&c&&p&&f&&iu(u)&&l))return"";const g=p.formatDatum(d),v=f.formatDatum(u),y=$d(r),m=$d(g+": "+v),b=Xd({fill:this.fill},a.getStyle(),{stroke:this.stroke,strokeWidth:this.strokeWidth}),{fill:S}=this.getMarkerStyle(a,{datum:t,xKey:e,yKey:c,highlighted:!1},b);return s.toTooltipHtml({title:y,content:m,backgroundColor:S},{datum:h,xKey:e,xName:o,yKey:c,yName:r,color:S,title:y,seriesId:i})}getLegendData(t){var e,i,n,o,r;const{data:s,id:a,xKey:l,yKey:c,yName:d,marker:u,fill:h,stroke:p,fillOpacity:f,strokeOpacity:g,visible:v}=this;return(null==s?void 0:s.length)&&l&&c&&"category"===t?[{legendType:t,id:a,itemId:c,seriesId:a,enabled:v,label:{text:null!=d?d:c},marker:{shape:u.shape,fill:null!==(e=u.fill)&&void 0!==e?e:h,stroke:null!==(i=u.stroke)&&void 0!==i?i:p,fillOpacity:null!==(n=u.fillOpacity)&&void 0!==n?n:f,strokeOpacity:null!==(o=u.strokeOpacity)&&void 0!==o?o:g,strokeWidth:null!==(r=u.strokeWidth)&&void 0!==r?r:0}}]:[]}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,contextData:n,paths:o}=t,{animationManager:r}=this.ctx,{seriesRectWidth:s=0}=this.nodeDataDependencies;this.updateAreaPaths(o,n),Yv(this,r,o.flat()),vh(e,Bv),_v(this,r,e,s),Xu(this,"labels",r,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:n}=this.ctx,{markerSelections:o,labelSelections:r,contextData:s,paths:a,previousContextData:l}=t;if(super.resetAllAnimation(t),0===s.length||!l||0===l.length)return n.skipCurrentBatch(),void this.updateAreaPaths(a,s);const[[c,d]]=a,[u]=s,[h]=l,p=oy(u,h,null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff);if(void 0===p)return n.skipCurrentBatch(),void this.updateAreaPaths(a,s);ed(this.id,"marker_update",n,o,p.marker),ed(this.id,"fill_path_properties",n,[c],p.fill.pathProperties),Nv(this.id,"fill_path_update",n,[c],p.fill.path),this.updateStrokePath(a,s),function({id:t},e,i,n){id(t,e,i,n,{opacity:0},{opacity:1},$c)}(this,"stroke",n,[d]),Xu(this,"labels",n,r)}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new kd}}ry.className="AreaSeries",ry.type="area",ba([dl(Rl),Sa("design:type",String)],ry.prototype,"fill",void 0),ba([dl(Rl),Sa("design:type",String)],ry.prototype,"stroke",void 0),ba([dl(Fl(0,1)),Sa("design:type",Object)],ry.prototype,"fillOpacity",void 0),ba([dl(Fl(0,1)),Sa("design:type",Object)],ry.prototype,"strokeOpacity",void 0),ba([dl($l),Sa("design:type",Array)],ry.prototype,"lineDash",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],ry.prototype,"lineDashOffset",void 0),ba([dl(Ol),Sa("design:type",String)],ry.prototype,"xKey",void 0),ba([dl(Ol),Sa("design:type",String)],ry.prototype,"xName",void 0),ba([dl(Ol),Sa("design:type",String)],ry.prototype,"yKey",void 0),ba([dl(Ol),Sa("design:type",String)],ry.prototype,"yName",void 0),ba([dl(_l(0)),Sa("design:type",Number)],ry.prototype,"normalizedTo",void 0),ba([dl(Fl(0)),Sa("design:type",Object)],ry.prototype,"strokeWidth",void 0);const sy={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",instanceConstructor:ry,stackable:!0,seriesDefaults:iv,themeTemplate:{__extends__:hv,nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:Ev,xOffset:3,yOffset:3,blur:5},marker:{__extends__:pv,enabled:!1,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:gv,color:vv,formatter:void 0}},paletteFactory:t=>{const{marker:e}=Wg(t);return{fill:e.fill,stroke:e.stroke,marker:e}}};class ay extends ag{constructor(){super(...arguments),this.direction="vertical"}getBandScalePadding(){return{inner:.2,outer:.1}}shouldFlipXY(){return"horizontal"===this.direction}getBarDirection(){return this.shouldFlipXY()?hc.X:hc.Y}getCategoryDirection(){return this.shouldFlipXY()?hc.Y:hc.X}getValueAxis(){const t=this.getBarDirection();return this.axes[t]}getCategoryAxis(){const t=this.getCategoryDirection();return this.axes[t]}}function ly(t,e){const{startingX:i,startingY:n}=function(t,e){const i=e[t?hc.Y:hc.X];let n=1/0,o=0;if(!i)return{startingX:n,startingY:o};t?o=i.scale.convert(Od.is(i.scale)?0:Math.max(...i.range)):n=i.scale.convert(Od.is(i.scale)?0:Math.min(...i.range));return{startingX:n,startingY:o}}(t,e),o=t=>{var e;return rl(null!==(e=t.yValue)&&void 0!==e?e:0)};return{isVertical:t,calculate:(e,r)=>{let s=t?e.x:i,a=t?n:e.y,l=t?e.width:0,c=t?0:e.height;return r&&(isNaN(s)||isNaN(a))&&(({x:s,y:a}=r),l=t?r.width:0,c=t?0:r.height,t&&!o(r)?a+=r.height:!t&&o(r)&&(s+=r.width)),{x:s,y:a,width:l,height:c}}}}function cy(t){const e=t=>null==t||isNaN(t.x)||isNaN(t.y);return{toFn:(i,n,o)=>"removed"===o||e(n)?t.calculate(n,i.previousDatum):{x:n.x,y:n.y,width:n.width,height:n.height},fromFn:(i,n,o)=>{"updated"===o&&e(n)?o="removed":"updated"===o&&e(i.previousDatum)&&(o="added");let r={x:i.x,y:i.y,width:i.width,height:i.height};return"unknown"!==o&&"added"!==o||(r=t.calculate(n,i.previousDatum)),Object.assign(Object.assign({},r),td[o])}}}function dy(t,{x:e,y:i,width:n,height:o}){return{x:e,y:i,width:n,height:o}}var uy;ba([dl(uc),Sa("design:type",String)],ay.prototype,"direction",void 0),function(t){t[t.Bar=0]="Bar",t[t.Label=1]="Label"}(uy||(uy={}));class hy extends yu{constructor(){super(...arguments),this.placement="inside"}}ba([dl(Wl("inside","outside")),Sa("design:type",String)],hy.prototype,"placement",void 0);class py extends ay{constructor(t){super({moduleCtx:t,pickModes:[Lu.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationResetFns:{datum:dy,label:$u}}),this.label=new hy,this.tooltip=new ph,this.fill="#c16068",this.stroke="#874349",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.stackGroup=void 0,this.strokeWidth=1,this.shadow=void 0,this.groupScale=new il,this.smallestDataInterval=void 0}resolveKeyDirection(t){return this.getBarDirection()===hc.X?t===hc.X?hc.Y:hc.X:t}processData(t){var e,i,n,o;return xa(this,void 0,void 0,(function*(){const{xKey:r,yKey:s,normalizedTo:a,seriesGrouping:{groupIndex:l=this.id}={},data:c=[]}=this;if(null==r||null==s||null==c)return;const d=!this.ctx.animationManager.isSkipped(),u=Math.abs(null!=a?a:NaN),h=Od.is(null===(e=this.getCategoryAxis())||void 0===e?void 0:e.scale),p=Od.is(null===(i=this.getValueAxis())||void 0===i?void 0:i.scale),f=`bar-stack-${l}-yValues`,g=f+"-trailing",v=u&&isFinite(u)?u:void 0,y=[];v&&y.push(lu(this,[f,g],v,"range")),d&&this.processedData&&y.push(gu(this.processedData)),d&&y.push(uu(this));const m=this.visible?{}:{forceValue:0},{processedData:b}=yield this.requestDataModel(t,c,{props:[Gu(this,r,h,{id:"xValue"}),Bu(this,s,p,Object.assign({id:"yValue-raw",invalidValue:null},m)),...ju(this,s,p,"normal","current",Object.assign({id:"yValue-end",invalidValue:null,missingValue:0,groupId:f,separateNegative:!0},m)),...ju(this,s,p,"trailing","current",Object.assign({id:"yValue-start",invalidValue:null,missingValue:0,groupId:g,separateNegative:!0},m)),...h?[ru]:[],...y],groupByKeys:!0});this.smallestDataInterval={x:null!==(o=null===(n=b.reduced)||void 0===n?void 0:n.smallestKeyInterval)&&void 0!==o?o:1/0,y:1/0},this.animationState.transition("updateData")}))}getSeriesDomain(t){var e;const{processedData:i,dataModel:n}=this;if(!i||!n)return[];const{reduced:{[ru.property]:o}={}}=i,r=this.getCategoryAxis(),s=this.getValueAxis(),a=n.resolveProcessedDataDefById(this,"xValue"),l=n.getDomain(this,"xValue","key",i),c=n.getDomain(this,"yValue-end","value",i);if(t===this.getCategoryDirection()){if("key"===(null==a?void 0:a.def.type)&&"category"===(null==a?void 0:a.def.valueType))return l;const i=null!=o&&isFinite(o)?o:0,n=null!==(e=Ta(l))&&void 0!==e?e:[NaN,NaN];return t===hc.Y?qp([n[0]+-i,n[1]],r):qp([n[0],n[1]+i],r)}if(this.getValueAxis()instanceof gg)return qp(c,s);return qp([c[0]>0?0:c[0],c[1]<0?0:c[1]],s)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});return xa(this,void 0,void 0,(function*(){const{dataModel:e}=this,i=this.getCategoryAxis(),n=this.getValueAxis();if(!(e&&i&&n))return[];const o=i.scale,r=n.scale,{groupScale:s,yKey:a="",xKey:l="",fill:c,stroke:d,strokeWidth:u,label:h,processedData:p,ctx:{seriesStateManager:f},smallestDataInterval:g}=this,v=Od.is(o)?o.calcBandwidth(null==g?void 0:g.x):o.bandwidth,y=[],{index:m,visibleGroupCount:b}=f.getVisiblePeerGroupIndex(this);for(let t=0;t<b;t++)y.push(String(t));s.domain=y,s.range=[0,null!=v?v:0],i instanceof Dp?s.paddingInner=i.groupPaddingInner:s.padding=i instanceof Fp?.1:0,s.round=0!==s.padding;const S=s.bandwidth>=1?s.bandwidth:s.rawBandwidth,x=e.resolveProcessedDataIndexById(this,"xValue").index,C=e.resolveProcessedDataIndexById(this,"yValue-raw").index,w=e.resolveProcessedDataIndexById(this,"yValue-start").index,E=e.resolveProcessedDataIndexById(this,"yValue-end").index,O=!this.ctx.animationManager.isSkipped(),D={itemId:a,nodeData:[],labelData:[],scales:t.calculateScaling.call(this),visible:this.visible||O};return null==p||p.data.forEach(({keys:t,datum:e,values:i})=>{const n=t[x],p=o.convert(n),f=+i[0][E],g=+i[0][w],v=i[0][C],y=p+s.convert(String(m));if(isNaN(f))return;const b=r.convert(f),O=r.convert(g),A=this.getBarDirection()===hc.X,T={x:A?Math.min(b,O):y,y:A?y:Math.min(b,O),width:A?Math.abs(O-b):S,height:A?S:Math.abs(O-b)},{fontStyle:k,fontWeight:M,fontSize:R,fontFamily:P,color:N,placement:L}=h,I=this.getLabelText(this.label,{datum:e[0],value:v,xKey:l,yKey:a,xName:this.xName,yName:this.yName,legendItemName:this.legendItemName},t=>iu(t)?t.toFixed(2):""),F=I?Object.assign({text:I,fill:N,fontStyle:k,fontWeight:M,fontSize:R,fontFamily:P},function({isPositive:t,isVertical:e,placement:i,padding:n=0,rect:o}){let r=o.x+o.width/2,s=o.y+o.height/2,a="center",l="middle";switch(i){case"start":e?(s=t?o.y+o.height+n:o.y-n,l=t?"top":"bottom"):(r=t?o.x-n:o.x+o.width+n,a=t?"start":"end");break;case"outside":case"end":e?(s=t?o.y-n:o.y+o.height+n,l=t?"bottom":"top"):(r=t?o.x+o.width+n:o.x-n,a=t?"start":"end")}return{x:r,y:s,textAlign:a,textBaseline:l}}({isPositive:v>=0,isVertical:!A,placement:L,rect:T})):void 0,_=this.shouldFlipXY()?T.height:T.width,G={series:this,itemId:a,datum:e[0],cumulativeValue:f,xValue:n,yValue:v,yKey:a,xKey:l,capDefaults:{lengthRatioMultiplier:_,lengthMax:_},x:T.x,y:T.y,width:T.width,height:T.height,midPoint:{x:T.x+T.width/2,y:T.y+T.height/2},fill:c,stroke:d,strokeWidth:u,label:F};D.nodeData.push(G),D.labelData.push(G)}),[D]}))}nodeFactory(){return new tg}updateDatumSelection(t){return xa(this,void 0,void 0,(function*(){return t.datumSelection.update(t.nodeData,t=>{t.tag=uy.Bar},t=>t.xValue)}))}updateDatumNodes(t){return xa(this,void 0,void 0,(function*(){const{datumSelection:e,isHighlight:i}=t,{yKey:n="",fill:o,stroke:r,fillOpacity:s,strokeOpacity:a,lineDash:l,lineDashOffset:c,shadow:d,formatter:u,id:h,highlightStyle:{item:p},ctx:f,stackGroup:g}=this,v=this.axes[hc.X],y=function(t=[]){const[e,i]=t;return!(0!==e||1!==i)}(null==v?void 0:v.visibleRange),m=this.getCategoryDirection()===hc.X;e.each((t,e)=>{const v={fill:o,stroke:r,fillOpacity:s,strokeOpacity:a,lineDash:l,lineDashOffset:c,fillShadow:d,strokeWidth:this.getStrokeWidth(this.strokeWidth)},b=m?e.width>0:e.height>0,S=function(t){var e,i,n,o,r,{datum:s,isHighlighted:a,style:l,highlightStyle:c,formatter:d,seriesId:u,ctx:{callbackCache:h}}=t,p=ma(t,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","ctx"]);const{fill:f,fillOpacity:g,stroke:v,strokeWidth:y}=Xd(a&&c,l),{strokeOpacity:m,fillShadow:b,lineDash:S,lineDashOffset:x}=l;let C;return d&&(C=h.call(d,Object.assign({datum:s.datum,xKey:s.xKey,fill:f,stroke:v,strokeWidth:y,highlighted:a,seriesId:u},p))),{fill:null!==(e=null==C?void 0:C.fill)&&void 0!==e?e:f,stroke:null!==(i=null==C?void 0:C.stroke)&&void 0!==i?i:v,strokeWidth:null!==(n=null==C?void 0:C.strokeWidth)&&void 0!==n?n:y,fillOpacity:null!==(o=null==C?void 0:C.fillOpacity)&&void 0!==o?o:g,strokeOpacity:null!==(r=null==C?void 0:C.strokeOpacity)&&void 0!==r?r:m,lineDash:S,lineDashOffset:x,fillShadow:b}}({datum:e,isHighlighted:i,style:v,highlightStyle:p,formatter:u,seriesId:h,stackGroup:g,ctx:f,yKey:n});S.crisp=y,S.visible=b,function({rect:t,config:e}){const{crisp:i=!0,fill:n,stroke:o,strokeWidth:r,fillOpacity:s,strokeOpacity:a,lineDash:l,lineDashOffset:c,fillShadow:d,visible:u=!0}=e;t.crisp=i,t.fill=n,t.stroke=o,t.strokeWidth=r,t.fillOpacity=s,t.strokeOpacity=a,t.lineDash=l,t.lineDashOffset=c,t.fillShadow=d,t.visible=u}({rect:t,config:S})})}))}updateLabelSelection(t){return xa(this,void 0,void 0,(function*(){const e=this.label.enabled?t.labelData:[];return t.labelSelection.update(e,t=>{t.tag=uy.Label,t.pointerEvents=Cc.None})}))}updateLabelNodes(t){return xa(this,void 0,void 0,(function*(){t.labelSelection.each((t,e)=>{!function(t,e,i){if(e.enabled&&i){const{x:n,y:o,text:r,textAlign:s,textBaseline:a}=i,{color:l,fontStyle:c,fontWeight:d,fontSize:u,fontFamily:h}=e;t.setProperties({visible:!0,x:n,y:o,text:r,fill:l,fontStyle:c,fontWeight:d,fontSize:u,fontFamily:h,textAlign:s,textBaseline:a})}else t.visible=!1}(t,this.label,e.label)})}))}getTooltipHtml(t){var e;const{xKey:i,yKey:n,processedData:o,ctx:{callbackCache:r}}=this,s=this.getCategoryAxis(),a=this.getValueAxis(),{xValue:l,yValue:c,datum:d}=t;if(!(o&&i&&n&&s&&a))return"";const{xName:u,yName:h,fill:p,stroke:f,tooltip:g,formatter:v,id:y,stackGroup:m}=this,b=this.getStrokeWidth(this.strokeWidth),S=s.formatDatum(l),x=a.formatDatum(c),C=$d(h),w=$d(S+": "+x);let E;v&&(E=r.call(v,{datum:d,fill:p,stroke:f,strokeWidth:b,highlighted:!1,xKey:i,yKey:n,seriesId:y,stackGroup:m}));const O=null!==(e=null==E?void 0:E.fill)&&void 0!==e?e:p;return g.toTooltipHtml({title:C,content:w,backgroundColor:O},Object.assign({datum:d,xKey:i,xName:u,yKey:n,yName:h,color:O,title:C,seriesId:y,stackGroup:m},this.getModuleTooltipParams(d)))}getLegendData(t){var e;const{id:i,data:n,xKey:o,yKey:r,yName:s,legendItemName:a,fill:l,stroke:c,strokeWidth:d,fillOpacity:u,strokeOpacity:h,visible:p,showInLegend:f}=this;return"category"===t&&f&&(null==n?void 0:n.length)&&o&&r?[{legendType:"category",id:i,itemId:r,seriesId:i,enabled:p,label:{text:null!==(e=null!=a?a:s)&&void 0!==e?e:r},marker:{fill:l,stroke:c,fillOpacity:u,strokeOpacity:h,strokeWidth:d},legendItemName:a}]:[]}animateEmptyUpdateReady({datumSelections:t,labelSelections:e,annotationSelections:i}){const n=cy(ly("vertical"===this.direction,this.axes));ed(this.id,"nodes",this.ctx.animationManager,t,n),Xu(this,"labels",this.ctx.animationManager,e),Xu(this,"annotations",this.ctx.animationManager,i)}animateWaitingUpdateReady(t){var e,i;const{datumSelections:n,labelSelections:o,annotationSelections:r}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);const s=null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff,a=cy(ly("vertical"===this.direction,this.axes));ed(this.id,"nodes",this.ctx.animationManager,n,a,(t,e)=>String(e.xValue),s),Xu(this,"labels",this.ctx.animationManager,o),Xu(this,"annotations",this.ctx.animationManager,r)}isLabelEnabled(){return this.label.enabled}}py.className="BarSeries",py.type="bar",ba([dl(Pl),Sa("design:type",String)],py.prototype,"fill",void 0),ba([dl(Pl),Sa("design:type",String)],py.prototype,"stroke",void 0),ba([dl(Fl(0,1)),Sa("design:type",Object)],py.prototype,"fillOpacity",void 0),ba([dl(Fl(0,1)),Sa("design:type",Object)],py.prototype,"strokeOpacity",void 0),ba([dl($l),Sa("design:type",Array)],py.prototype,"lineDash",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],py.prototype,"lineDashOffset",void 0),ba([dl(xl),Sa("design:type",Function)],py.prototype,"formatter",void 0),ba([dl(Ol),Sa("design:type",String)],py.prototype,"xKey",void 0),ba([dl(Ol),Sa("design:type",String)],py.prototype,"xName",void 0),ba([dl(Ol),Sa("design:type",String)],py.prototype,"yKey",void 0),ba([dl(Ol),Sa("design:type",String)],py.prototype,"yName",void 0),ba([dl(Ol),Sa("design:type",String)],py.prototype,"stackGroup",void 0),ba([dl(_l()),Sa("design:type",Number)],py.prototype,"normalizedTo",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],py.prototype,"strokeWidth",void 0);const fy={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",instanceConstructor:py,stackable:!0,groupable:!0,seriesDefaults:{axes:[{type:Hg.NUMBER,position:Ug.LEFT},{type:Hg.CATEGORY,position:Ug.BOTTOM}]},swapDefaultAxesCondition:t=>"horizontal"===(null==t?void 0:t.direction),themeTemplate:{__extends__:hv,fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:"normal",fontSize:12,fontFamily:gv,color:mv,formatter:void 0,placement:"inside"},shadow:{enabled:!1,color:Ev,xOffset:3,yOffset:3,blur:5}},enterpriseThemeTemplate:{errorBar:{cap:{lengthRatio:.3}}},paletteFactory:jg};class gy extends sg{constructor(t,e,i,n){super(t,e,i,n),this.sizeKey=n.sizeKey}}class vy extends Iv{constructor(){super(...arguments),this.maxSize=30,this.domain=void 0}}ba([dl(Fl(0)),gc({redraw:pc.MAJOR}),Sa("design:type",Object)],vy.prototype,"maxSize",void 0),ba([dl(Vl),gc({redraw:pc.MAJOR}),Sa("design:type",Array)],vy.prototype,"domain",void 0);class yy extends ag{constructor(t){super({moduleCtx:t,pickModes:[Lu.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,Lu.NEAREST_NODE,Lu.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:$u,marker:Gv}}),this.NodeClickEvent=gy,this.sizeScale=new Dd,this.marker=new vy,this.label=new yu,this.title=void 0,this.labelKey=void 0,this.xName=void 0,this.yName=void 0,this.sizeName="Size",this.labelName="Label",this.xKey=void 0,this.yKey=void 0,this.sizeKey=void 0,this.colorKey=void 0,this.colorName="Color",this.colorRange=["#ffff00","#00ff00","#0000ff"],this.colorScale=new Jf,this.tooltip=new ph}processData(t){var e,i;return xa(this,void 0,void 0,(function*(){const{xKey:n,yKey:o,sizeKey:r,labelKey:s,colorScale:a,colorDomain:l,colorRange:c,colorKey:d,marker:u,data:h}=this;if(null==n||null==o||null==r||null==h)return;const{isContinuousX:p,isContinuousY:f}=this.isContinuous(),{dataModel:g,processedData:v}=yield this.requestDataModel(t,h,{props:[Gu(this,n,p,{id:"xKey-raw"}),Gu(this,o,f,{id:"yKey-raw"}),...s?[Gu(this,s,!1,{id:"labelKey-raw"})]:[],Bu(this,n,p,{id:"xValue"}),Bu(this,o,f,{id:"yValue"}),Bu(this,r,!0,{id:"sizeValue"}),...d?[Bu(this,d,!0,{id:"colorValue"})]:[],...s?[Bu(this,s,!1,{id:"labelValue"})]:[]],dataVisible:this.visible}),y=g.resolveProcessedDataIndexById(this,"sizeValue").index,m=null!==(e=v.domain.values[y])&&void 0!==e?e:[];if(this.sizeScale.domain=u.domain?u.domain:m,d){const t=g.resolveProcessedDataIndexById(this,"colorValue").index;a.domain=null!==(i=null!=l?l:v.domain.values[t])&&void 0!==i?i:[],a.range=c,a.update()}this.animationState.transition("updateData")}))}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const n=t===hc.X?"xValue":"yValue",o=e.resolveProcessedDataDefById(this,n),r=e.getDomain(this,n,"value",i);if("value"===(null==o?void 0:o.def.type)&&"category"===(null==o?void 0:o.def.valueType))return r;const s=this.axes[t];return qp(Ta(r),s)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e,i,n,o;return xa(this,void 0,void 0,(function*(){const{visible:r,axes:s,yKey:a="",xKey:l="",label:c,labelKey:d,dataModel:u,processedData:h,colorScale:p,sizeKey:f="",colorKey:g}=this,v=s[hc.X],y=s[hc.Y];if(!(u&&h&&r&&v&&y))return[];const m=u.resolveProcessedDataIndexById(this,"xValue").index,b=u.resolveProcessedDataIndexById(this,"yValue").index,S=f?u.resolveProcessedDataIndexById(this,"sizeValue").index:-1,x=g?u.resolveProcessedDataIndexById(this,"colorValue").index:-1,C=d?u.resolveProcessedDataIndexById(this,"labelValue").index:-1,w=v.scale,E=y.scale,O=(null!==(e=w.bandwidth)&&void 0!==e?e:0)/2,D=(null!==(i=E.bandwidth)&&void 0!==i?i:0)/2,{sizeScale:A,marker:T}=this,k=[];A.range=[T.size,T.maxSize];const M=c.getFont();for(const{values:t,datum:e}of null!==(n=h.data)&&void 0!==n?n:[]){const i=t[m],n=t[b],o=w.convert(i)+O,r=E.convert(n)+D,s=this.getLabelText(c,{value:d?t[C]:n,datum:e,xKey:l,yKey:a,sizeKey:f,labelKey:d,xName:this.xName,yName:this.yName,sizeName:this.sizeName,labelName:this.labelName}),u=Tc.getTextSize(String(s),M),h=f?A.convert(t[S]):T.size,v=g?p.convert(t[x]):void 0;k.push({series:this,itemId:a,yKey:a,xKey:l,datum:e,xValue:i,yValue:n,sizeValue:t[S],point:{x:o,y:r,size:h},midPoint:{x:o,y:r},fill:v,label:Object.assign({text:s},u)})}return[{itemId:null!==(o=this.yKey)&&void 0!==o?o:this.id,nodeData:k,labelData:k,scales:t.calculateScaling.call(this),visible:this.visible}]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}getLabelData(){var t;return null===(t=this.contextNodeData)||void 0===t?void 0:t.reduce((t,e)=>t.concat(e.labelData),[])}markerFactory(){const{shape:t}=this.marker;return new(Af(t))}updateMarkerSelection(t){return xa(this,void 0,void 0,(function*(){const{nodeData:e,markerSelection:i}=t;this.marker.isDirty()&&(i.clear(),i.cleanup());const n=this.marker.enabled?e:[];return i.update(n,void 0,t=>this.getDatumId(t))}))}updateMarkerNodes(t){return xa(this,void 0,void 0,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:n="",yKey:o="",sizeKey:r="",labelKey:s,marker:a}=this,l=Xd(i&&this.highlightStyle.item,a.getStyle());this.sizeScale.range=[a.size,a.maxSize],e.each((t,e)=>{this.updateMarkerStyle(t,a,{datum:e,highlighted:i,xKey:n,yKey:o,sizeKey:r,labelKey:s},l)}),i||this.marker.markClean()}))}updateLabelSelection(t){var e,i;return xa(this,void 0,void 0,(function*(){const{labelSelection:n}=t,{label:{enabled:o}}=this,r=(o&&null!==(i=null===(e=this.chart)||void 0===e?void 0:e.placeLabels().get(this))&&void 0!==i?i:[]).map(t=>Object.assign(Object.assign({},t.datum),{point:{x:t.x,y:t.y,size:t.datum.point.size}}));return n.update(r)}))}updateLabelNodes(t){return xa(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{label:i}=this;e.each((t,e)=>{var n,o,r,s;t.text=e.label.text,t.fill=i.color,t.x=null!==(o=null===(n=e.point)||void 0===n?void 0:n.x)&&void 0!==o?o:0,t.y=null!==(s=null===(r=e.point)||void 0===r?void 0:r.y)&&void 0!==s?s:0,t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.fontSize=i.fontSize,t.fontFamily=i.fontFamily,t.textAlign="left",t.textBaseline="top"})}))}getTooltipHtml(t){var e;const{xKey:i,yKey:n,sizeKey:o,axes:r}=this,s=r[hc.X],a=r[hc.Y];if(!(i&&n&&s&&a&&o))return"";const{marker:l,tooltip:c,xName:d,yName:u,sizeName:h,labelKey:p,labelName:f,id:g}=this,v=Xd({fill:t.fill,strokeWidth:this.getStrokeWidth(l.strokeWidth)},l.getStyle()),{fill:y="gray"}=this.getMarkerStyle(l,{datum:t,highlighted:!1,xKey:i,yKey:n,sizeKey:o,labelKey:p},v),m=null!==(e=this.title)&&void 0!==e?e:u,{datum:b,xValue:S,yValue:x,sizeValue:C,label:{text:w}}=t,E=$d(s.formatDatum(S)),O=$d(a.formatDatum(x));let D=`<b>${$d(null!=d?d:i)}</b>: ${E}<br><b>${$d(null!=u?u:n)}</b>: ${O}`;return o&&(D+=`<br><b>${$d(null!=h?h:o)}</b>: ${$d(String(C))}`),p&&(D=`<b>${$d(null!=f?f:p)}</b>: ${$d(w)}<br>`+D),c.toTooltipHtml({title:m,content:D,backgroundColor:y},{datum:b,xKey:i,xName:d,yKey:n,yName:u,sizeKey:o,sizeName:h,labelKey:p,labelName:f,title:m,color:y,seriesId:g})}getLegendData(){var t;const{id:e,data:i,xKey:n,yKey:o,sizeKey:r,yName:s,title:a,visible:l,marker:c}=this,{shape:d,fill:u,stroke:h,fillOpacity:p,strokeOpacity:f,strokeWidth:g}=c;return(null==i?void 0:i.length)&&n&&o&&r?[{legendType:"category",id:e,itemId:o,seriesId:e,enabled:l,label:{text:null!==(t=null!=a?a:s)&&void 0!==t?t:o},marker:{shape:d,fill:null!=u?u:"rgba(0, 0, 0, 0)",stroke:null!=h?h:"rgba(0, 0, 0, 0)",fillOpacity:null!=p?p:1,strokeOpacity:null!=f?f:1,strokeWidth:null!=g?g:0}}]:[]}animateEmptyUpdateReady({markerSelections:t,labelSelections:e}){Fv(this,this.ctx.animationManager,t),Xu(this,"labels",this.ctx.animationManager,e)}getDatumId(t){return vu([""+t.xValue,""+t.yValue,t.label.text])}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new kd}}yy.className="BubbleSeries",yy.type="bubble",ba([dl(Ol),Sa("design:type",String)],yy.prototype,"title",void 0),ba([dl(Ol),Sa("design:type",String)],yy.prototype,"labelKey",void 0),ba([dl(Ol),Sa("design:type",String)],yy.prototype,"xName",void 0),ba([dl(Ol),Sa("design:type",String)],yy.prototype,"yName",void 0),ba([dl(Ol),Sa("design:type",String)],yy.prototype,"sizeName",void 0),ba([dl(Ol),Sa("design:type",String)],yy.prototype,"labelName",void 0),ba([dl(Ol),Sa("design:type",String)],yy.prototype,"xKey",void 0),ba([dl(Ol),Sa("design:type",String)],yy.prototype,"yKey",void 0),ba([dl(Ol),Sa("design:type",String)],yy.prototype,"sizeKey",void 0),ba([dl(Ol),Sa("design:type",String)],yy.prototype,"colorKey",void 0),ba([dl(Ol),Sa("design:type",String)],yy.prototype,"colorName",void 0),ba([dl(Vl),Sa("design:type",Array)],yy.prototype,"colorDomain",void 0),ba([dl(Nl),Sa("design:type",Array)],yy.prototype,"colorRange",void 0);const my={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",instanceConstructor:yy,seriesDefaults:{axes:[{type:Hg.NUMBER,position:Ug.BOTTOM},{type:Hg.NUMBER,position:Ug.LEFT}]},themeTemplate:{__extends__:hv,tooltip:{position:{type:"node"}},marker:{__extends__:pv,maxSize:30,fillOpacity:.8},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:gv,color:vv}},paletteFactory:Wg},by=["count","sum","mean"],Sy=hl(t=>by.includes(t),"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean");var xy;!function(t){t[t.Bin=0]="Bin",t[t.Label=1]="Label"}(xy||(xy={}));class Cy extends ag{constructor(t){super({moduleCtx:t,pickModes:[Lu.EXACT_SHAPE_MATCH],datumSelectionGarbageCollection:!1,animationResetFns:{datum:dy,label:$u}}),this.label=new yu,this.tooltip=new ph,this.fill=void 0,this.stroke=void 0,this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.areaPlot=!1,this.aggregation="sum",this.binCount=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.strokeWidth=1,this.shadow=void 0,this.calculatedBins=[]}deriveBins(t){if(void 0===this.binCount){const e=Sd(t[0],t[1],10),i=Cd(t[0],t[1],10),n=e[0],o=t=>[t,t+i];return[[n-i,n],...e.map(o)]}return this.calculateNiceBins(t,this.binCount)}calculateNiceBins(t,e){const i=Math.floor(t[0]),n=t[1],o=e||1,{start:r,binSize:s}=this.calculateNiceStart(i,n,o);return this.getBins(r,n,s,o)}getBins(t,e,i,n){const o=[];for(let r=0;r<n;r++){const s=Math.round(10*(t+r*i))/10;let a=Math.round(10*(t+(r+1)*i))/10;r===n-1&&(a=Math.max(a,e)),o[r]=[s,a]}return o}calculateNiceStart(t,e,i){const n=Math.abs(e-t)/i,o=Math.floor(Math.log10(n)),r=Math.pow(10,o);return{start:Math.floor(t/r)*r,binSize:n}}processData(t){return xa(this,void 0,void 0,(function*(){const{xKey:e,yKey:i,data:n,areaPlot:o,aggregation:r}=this,s=[Gu(this,e,!0),su];if(i){let t=Ru(this,"groupCount");"count"===r||("sum"===r?t={id:"groupAgg",scopes:[this.id],type:"aggregate",matchGroupIds:a?[a]:void 0,aggregateFunction:t=>Mu(t),groupAggregateFunction:(t,e=[0,0])=>{var i,n;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e}}:"mean"===r&&(t=function(t,e,i){return{id:e,scopes:[t.id],matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:t=>Mu(t),groupAggregateFunction:(t,e=[0,0,-1])=>{var i,n;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e[2]++,e},finalFunction:(t=[0,0,0])=>{const e=t[0]+t[1];return e>=0?[0,e/t[2]]:[e/t[2],0]}}}(this,"groupAgg"))),o&&(t=Pu(this,"groupAgg",t)),s.push(Bu(this,i,!0,{invalidValue:void 0}),t)}else{let t=Ru(this,"groupAgg");o&&(t=Pu(this,"groupAgg",t)),s.push(t)}var a;!this.ctx.animationManager.isSkipped()&&this.processedData&&s.push(gu(this.processedData,!1)),yield this.requestDataModel(t,null!=n?n:[],{props:s,dataVisible:this.visible,groupByFn:t=>{var e;const i=qp(t.domain.keys[0]);if(0===i.length)return t.domain.groups=[],()=>[];const n=null!==(e=this.bins)&&void 0!==e?e:this.deriveBins(i),o=n.length;return this.calculatedBins=[...n],t=>{const e=t.keys[0];for(let t=0;t<o;t++){const i=n[t];if(e>=i[0]&&e<i[1])return i;if(t===o-1&&e<=i[1])return i}return[]}}}),this.animationState.transition("updateData")}))}getSeriesDomain(t){var e,i,n,o;const{processedData:r,dataModel:s}=this;if(!r||!s||!this.calculatedBins.length)return[];const a=s.getDomain(this,"groupAgg","aggregate",r),l=null===(e=this.calculatedBins)||void 0===e?void 0:e[0][0],c=null===(i=this.calculatedBins)||void 0===i?void 0:i[(null!==(o=null===(n=this.calculatedBins)||void 0===n?void 0:n.length)&&void 0!==o?o:0)-1][1];return t===hc.X?qp([l,c]):qp(a)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e;return xa(this,void 0,void 0,(function*(){const{axes:i,processedData:n,ctx:{callbackCache:o}}=this,r=i[hc.X],s=i[hc.Y];if(!(this.visible&&r&&s&&n&&"grouped"===n.type))return[];const{scale:a}=r,{scale:l}=s,{fill:c,stroke:d,strokeWidth:u,id:h,yKey:p="",xKey:f=""}=this,g=[],{label:{formatter:v=(t=>String(t.value)),fontStyle:y,fontWeight:m,fontSize:b,fontFamily:S,color:x}}=this;return n.data.forEach(t=>{var e;const{aggValues:[[i,n]]=[[0,0]],datum:r,datum:{length:s},keys:C,keys:[w,E]}=t,O=a.convert(w),D=a.convert(E),A=i+n,T=l.convert(0),k=l.convert(A),M=D-O,R=Math.abs(k-T),P=0!==A?{text:null!==(e=o.call(v,{value:A,datum:r,seriesId:h,xKey:f,yKey:p,xName:this.xName,yName:this.yName}))&&void 0!==e?e:String(A),fontStyle:y,fontWeight:m,fontSize:b,fontFamily:S,fill:x,x:O+M/2,y:k+R/2}:void 0,N={x:O+M/2,y:k+R/2};g.push({series:this,datum:r,aggregatedValue:A,frequency:s,domain:C,yKey:p,xKey:f,x:O,y:k,xValue:O,yValue:k,width:M,height:R,midPoint:N,fill:c,stroke:d,strokeWidth:u,label:P})}),[{itemId:null!==(e=this.yKey)&&void 0!==e?e:this.id,nodeData:g,labelData:g,scales:t.calculateScaling.call(this),animationValid:!0,visible:this.visible}]}))}nodeFactory(){return new tg}updateDatumSelection(t){return xa(this,void 0,void 0,(function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,t=>{t.tag=xy.Bin,t.crisp=!0},t=>t.domain.join("_"))}))}updateDatumNodes(t){return xa(this,void 0,void 0,(function*(){const{datumSelection:e,isHighlight:i}=t,{fillOpacity:n,strokeOpacity:o,shadow:r,highlightStyle:{item:{fill:s,fillOpacity:a=n,stroke:l,strokeWidth:c}}}=this;e.each((t,e,d)=>{var u,h;const p=i&&void 0!==c?c:e.strokeWidth,f=i?a:n;t.fill=null!==(u=i?s:void 0)&&void 0!==u?u:e.fill,t.stroke=null!==(h=i?l:void 0)&&void 0!==h?h:e.stroke,t.fillOpacity=f,t.strokeOpacity=o,t.strokeWidth=p,t.lineDash=this.lineDash,t.lineDashOffset=this.lineDashOffset,t.fillShadow=r,t.zIndex=i?Yu.highlightedZIndex:d,t.visible=e.height>0})}))}updateLabelSelection(t){return xa(this,void 0,void 0,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,t=>{t.tag=xy.Label,t.pointerEvents=Cc.None,t.textAlign="center",t.textBaseline="middle"})}))}updateLabelNodes(t){return xa(this,void 0,void 0,(function*(){const{labelSelection:e}=t,i=this.label.enabled;e.each((t,e)=>{const n=e.label;n&&i?(t.text=n.text,t.x=n.x,t.y=n.y,t.fontStyle=n.fontStyle,t.fontWeight=n.fontWeight,t.fontSize=n.fontSize,t.fontFamily=n.fontFamily,t.fill=n.fill,t.visible=!0):t.visible=!1})}))}getTooltipHtml(t){const{xKey:e,yKey:i="",axes:n}=this,o=n[hc.X],r=n[hc.Y];if(!e||!o||!r)return"";const{xName:s,yName:a,fill:l,tooltip:c,aggregation:d,id:u}=this,{aggregatedValue:h,frequency:p,domain:[f,g]}=t,v=`${$d(null!=s?s:e)}: ${o.formatDatum(f)} - ${o.formatDatum(g)}`;let y=i?`<b>${$d(null!=a?a:i)} (${d})</b>: ${r.formatDatum(h)}<br>`:"";y+="<b>Frequency</b>: "+p;const m={title:v,backgroundColor:l,content:y};return c.toTooltipHtml(m,{datum:{data:t.datum,aggregatedValue:t.aggregatedValue,domain:t.domain,frequency:t.frequency},xKey:e,xName:s,yKey:i,yName:a,color:l,title:v,seriesId:u})}getLegendData(t){var e;const{id:i,data:n,xKey:o,yName:r,visible:s,fill:a,stroke:l,fillOpacity:c,strokeOpacity:d,strokeWidth:u}=this;return n&&0!==n.length&&"category"===t?[{legendType:"category",id:i,itemId:o,seriesId:i,enabled:s,label:{text:null!==(e=null!=r?r:o)&&void 0!==e?e:"Frequency"},marker:{fill:null!=a?a:"rgba(0, 0, 0, 0)",stroke:null!=l?l:"rgba(0, 0, 0, 0)",fillOpacity:c,strokeOpacity:d,strokeWidth:u}}]:[]}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){const i=cy(ly(!0,this.axes));ed(this.id,"datums",this.ctx.animationManager,t,i),Xu(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(t){var e,i;const n=null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff,o=cy(ly(!0,this.axes));ed(this.id,"datums",this.ctx.animationManager,t.datumSelections,o,(t,e)=>this.getDatumId(e),n),Xu(this,"labels",this.ctx.animationManager,t.labelSelections)}getDatumId(t){return vu(t.domain.map(t=>""+t))}isLabelEnabled(){return this.label.enabled}}Cy.className="HistogramSeries",Cy.type="histogram",ba([dl(Pl),Sa("design:type",String)],Cy.prototype,"fill",void 0),ba([dl(Pl),Sa("design:type",String)],Cy.prototype,"stroke",void 0),ba([dl(Fl(0,1)),Sa("design:type",Object)],Cy.prototype,"fillOpacity",void 0),ba([dl(Fl(0,1)),Sa("design:type",Object)],Cy.prototype,"strokeOpacity",void 0),ba([dl($l),Sa("design:type",Array)],Cy.prototype,"lineDash",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],Cy.prototype,"lineDashOffset",void 0),ba([dl(Ol),Sa("design:type",String)],Cy.prototype,"xKey",void 0),ba([dl(Cl),Sa("design:type",Boolean)],Cy.prototype,"areaPlot",void 0),ba([dl(gl()),Sa("design:type",Array)],Cy.prototype,"bins",void 0),ba([dl(Sy),Sa("design:type",String)],Cy.prototype,"aggregation",void 0),ba([dl(_l(0)),Sa("design:type",Number)],Cy.prototype,"binCount",void 0),ba([dl(Ol),Sa("design:type",String)],Cy.prototype,"xName",void 0),ba([dl(Ol),Sa("design:type",String)],Cy.prototype,"yKey",void 0),ba([dl(Ol),Sa("design:type",String)],Cy.prototype,"yName",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],Cy.prototype,"strokeWidth",void 0);const wy={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",instanceConstructor:Cy,seriesDefaults:{axes:[{type:Hg.NUMBER,position:Ug.BOTTOM},{type:Hg.NUMBER,position:Ug.LEFT}]},themeTemplate:{__extends__:hv,strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:gv,color:mv,formatter:void 0},shadow:{enabled:!1,color:Ev,xOffset:3,yOffset:3,blur:5}},paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}}};class Ey extends ag{constructor(t){super({moduleCtx:t,hasMarkers:!0,pickModes:[Lu.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,Lu.NEAREST_NODE,Lu.EXACT_SHAPE_MATCH],markerSelectionGarbageCollection:!1,animationResetFns:{path:Xv({getOpacity:()=>this.getOpacity()}),label:$u,marker:(t,e)=>Object.assign(Object.assign({},{opacity:1,scalingX:1,scalingY:1}),Bv(0,e))}}),this.label=new yu,this.marker=new Iv,this.tooltip=new ph,this.title=void 0,this.stroke="#874349",this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2,this.strokeOpacity=1,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0}processData(t){return xa(this,void 0,void 0,(function*(){const{xKey:e,yKey:i,data:n}=this;if(null==e||null==i||null==n)return;const o=!this.ctx.animationManager.isSkipped(),{isContinuousX:r,isContinuousY:s}=this.isContinuous(),a=[];r||(a.push(Gu(this,e,r,{id:"xKey"})),o&&this.processedData&&a.push(gu(this.processedData))),o&&a.push(uu(this,r?["xValue"]:[])),a.push(Bu(this,e,r,{id:"xValue"}),Bu(this,i,s,{id:"yValue",invalidValue:void 0})),yield this.requestDataModel(t,n,{props:a}),this.animationState.transition("updateData")}))}getSeriesDomain(t){const{axes:e,dataModel:i,processedData:n}=this;if(!n||!i)return[];const o=e[hc.X],r=e[hc.Y],s=i.resolveProcessedDataDefById(this,"xValue");if(t===hc.X){const t=i.getDomain(this,"xValue","value",n);return"value"===(null==s?void 0:s.def.type)&&"category"===s.def.valueType?t:qp(Ta(t),o)}return qp(i.getDomain(this,"yValue","value",n),r)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e,i,n;return xa(this,void 0,void 0,(function*(){const{processedData:o,dataModel:r,axes:s}=this,a=s[hc.X],l=s[hc.Y];if(!(o&&r&&a&&l))return[];const{label:c,yKey:d="",xKey:u=""}=this,h=a.scale,p=l.scale,f=(null!==(e=h.bandwidth)&&void 0!==e?e:0)/2,g=(null!==(i=p.bandwidth)&&void 0!==i?i:0)/2,v=[],y=this.marker.enabled?this.marker.size:0,m=r.resolveProcessedDataIndexById(this,"xValue").index,b=r.resolveProcessedDataIndexById(this,"yValue").index;let S,x=!0;for(let t=0;t<o.data.length;t++){const{datum:e,values:i}=null!=S?S:o.data[t],r=i[m],s=i[b];if(void 0===s)x=!0;else{const i=h.convert(r)+f;if(isNaN(i)){x=!0,S=void 0;continue}S=void 0===(null===(n=o.data[t+1])||void 0===n?void 0:n.values[b])?void 0:o.data[t+1];const a=p.convert(s)+g,l=this.getLabelText(c,{value:s,datum:e,xKey:u,yKey:d,xName:this.xName,yName:this.yName},t=>iu(t)?t.toFixed(2):String(t));v.push({series:this,datum:e,yKey:d,xKey:u,point:{x:i,y:a,moveTo:x,size:y},midPoint:{x:i,y:a},yValue:s,xValue:r,capDefaults:{lengthRatioMultiplier:this.marker.getDiameter(),lengthMax:1/0},label:l?{text:l,fontStyle:c.fontStyle,fontWeight:c.fontWeight,fontSize:c.fontSize,fontFamily:c.fontFamily,textAlign:"center",textBaseline:"bottom",fill:c.color}:void 0}),x=!1}}return[{itemId:d,nodeData:v,labelData:v,scales:t.calculateScaling.call(this),visible:this.visible}]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(Af(t))}updatePathNodes(t){var e,i;return xa(this,void 0,void 0,(function*(){const{paths:[n],opacity:o,visible:r,animationEnabled:s}=t,{seriesRectHeight:a,seriesRectWidth:l}=this.nodeDataDependencies;n.setProperties({fill:void 0,lineJoin:"round",pointerEvents:Cc.None,opacity:o,stroke:this.stroke,strokeWidth:this.getStrokeWidth(this.strokeWidth),strokeOpacity:this.strokeOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset}),s||(n.visible=r),null==n.clipPath&&(n.clipPath=new Vd,n.clipScalingX=1,n.clipScalingY=1),null===(e=n.clipPath)||void 0===e||e.clear({trackChanges:!0}),null===(i=n.clipPath)||void 0===i||i.rect(-25,-25,(null!=l?l:0)+50,(null!=a?a:0)+50)}))}updateMarkerSelection(t){return xa(this,void 0,void 0,(function*(){let{nodeData:e}=t;const{markerSelection:i}=t,{shape:n,enabled:o}=this.marker;return e=n&&o?e:[],this.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(e,void 0,t=>this.getDatumId(t))}))}updateMarkerNodes(t){return xa(this,void 0,void 0,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:n="",yKey:o="",marker:r,stroke:s,strokeWidth:a,strokeOpacity:l}=this,c=Xd(i&&this.highlightStyle.item,r.getStyle(),{stroke:s,strokeWidth:a,strokeOpacity:l}),d=this.ctx.animationManager.isSkipped();e.each((t,e)=>{this.updateMarkerStyle(t,r,{datum:e,highlighted:i,xKey:n,yKey:o},c,{applyTranslation:d})}),i||this.marker.markClean()}))}updateLabelSelection(t){return xa(this,void 0,void 0,(function*(){let{labelData:e}=t;const{labelSelection:i}=t,{shape:n,enabled:o}=this.marker;return e=n&&o?e:[],i.update(e)}))}updateLabelNodes(t){return xa(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:n,fontWeight:o,fontSize:r,fontFamily:s,color:a}=this.label;e.each((t,e)=>{const{point:l,label:c}=e;e&&c&&i?(t.fontStyle=n,t.fontWeight=o,t.fontSize=r,t.fontFamily=s,t.textAlign=c.textAlign,t.textBaseline=c.textBaseline,t.text=c.text,t.x=l.x,t.y=l.y-10,t.fill=a,t.visible=!0):t.visible=!1})}))}getTooltipHtml(t){var e;const{xKey:i,yKey:n,axes:o}=this,r=o[hc.X],s=o[hc.Y];if(!(i&&n&&r&&s))return"";const{xName:a,yName:l,tooltip:c,marker:d,id:u}=this,{datum:h,xValue:p,yValue:f}=t,g=r.formatDatum(p),v=s.formatDatum(f),y=$d(null!==(e=this.title)&&void 0!==e?e:l),m=$d(g+": "+v),b=Xd({fill:d.stroke},d.getStyle(),{strokeWidth:this.strokeWidth}),{fill:S}=this.getMarkerStyle(d,{datum:t,xKey:i,yKey:n,highlighted:!1},b);return c.toTooltipHtml({title:y,content:m,backgroundColor:S},Object.assign({datum:h,xKey:i,xName:a,yKey:n,yName:l,title:y,color:S,seriesId:u},this.getModuleTooltipParams(h)))}getLegendData(t){var e,i,n,o,r,s,a,l;const{id:c,data:d,xKey:u,yKey:h,yName:p,visible:f,title:g,marker:v,stroke:y,strokeOpacity:m}=this;return(null==d?void 0:d.length)&&u&&h&&"category"===t?[{legendType:"category",id:c,itemId:h,seriesId:c,enabled:f,label:{text:null!==(e=null!=g?g:p)&&void 0!==e?e:h},marker:{shape:v.shape,fill:null!==(i=v.fill)&&void 0!==i?i:"rgba(0, 0, 0, 0)",stroke:null!==(o=null!==(n=v.stroke)&&void 0!==n?n:y)&&void 0!==o?o:"rgba(0, 0, 0, 0)",fillOpacity:null!==(r=v.fillOpacity)&&void 0!==r?r:1,strokeOpacity:null!==(a=null!==(s=v.strokeOpacity)&&void 0!==s?s:m)&&void 0!==a?a:1,strokeWidth:null!==(l=v.strokeWidth)&&void 0!==l?l:0}}]:[]}updatePaths(t){return xa(this,void 0,void 0,(function*(){this.updateLinePaths([t.paths],[t.contextData])}))}updateLinePaths(t,e){e.forEach(({nodeData:e},i)=>{const[n]=t[i],{path:o}=n;o.clear({trackChanges:!0});for(const t of e)t.point.moveTo?o.moveTo(t.point.x,t.point.y):o.lineTo(t.point.x,t.point.y);n.checkPathDirty()})}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,annotationSelections:n,contextData:o,paths:r}=t,{animationManager:s}=this.ctx,{seriesRectWidth:a=0}=this.nodeDataDependencies;this.updateLinePaths(r,o),Yv(this,s,r.flat()),vh(e,Bv),_v(this,s,e,a),Xu(this,"labels",s,i),Xu(this,"annotations",s,n)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateLinePaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:n}=this.ctx,{markerSelections:o,labelSelections:r,annotationSelections:s,contextData:a,paths:l,previousContextData:c}=t;if(super.resetAllAnimation(t),0===a.length||!c||0===c.length)return n.skipCurrentBatch(),void this.updateLinePaths(l,a);const[d]=l,[u]=a,[h]=c,p=function(t,e,i){var n;const o="category"===(null===(n=t.scales.x)||void 0===n?void 0:n.type),{result:r,resultMap:s}=o&&i?Qv(t,e,i):Jv(t,e);let a="updated";if(e.visible&&!t.visible?a="removed":!e.visible&&t.visible&&(a="added"),void 0===r||void 0===s)return;const l=ty(t,e,r,"fade",Kv),c=Vv(s,a);return Object.assign(Object.assign({},l),{marker:c})}(u,h,null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff);if(void 0===p)return n.skipCurrentBatch(),void this.updateLinePaths(l,a);ed(this.id,"marker",n,o,p.marker),ed(this.id,"path_properties",n,d,p.pathProperties),Nv(this.id,"path_update",n,d,p.path),Xu(this,"labels",n,r),Xu(this,"annotations",n,s)}getDatumId(t){return vu([""+t.xValue])}isLabelEnabled(){return this.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new kd}}Ey.className="LineSeries",Ey.type="line",ba([dl(Ol),Sa("design:type",String)],Ey.prototype,"title",void 0),ba([dl(Pl),Sa("design:type",String)],Ey.prototype,"stroke",void 0),ba([dl($l),Sa("design:type",Array)],Ey.prototype,"lineDash",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],Ey.prototype,"lineDashOffset",void 0),ba([dl(Fl(0)),Sa("design:type",Number)],Ey.prototype,"strokeWidth",void 0),ba([dl(Fl(0,1)),Sa("design:type",Number)],Ey.prototype,"strokeOpacity",void 0),ba([dl(Ol),Sa("design:type",String)],Ey.prototype,"xKey",void 0),ba([dl(Ol),Sa("design:type",String)],Ey.prototype,"xName",void 0),ba([dl(Ol),Sa("design:type",String)],Ey.prototype,"yKey",void 0),ba([dl(Ol),Sa("design:type",String)],Ey.prototype,"yName",void 0);const Oy={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",instanceConstructor:Ey,seriesDefaults:iv,themeTemplate:{__extends__:hv,tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:{__extends__:pv,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:gv,color:vv,formatter:void 0}},enterpriseThemeTemplate:{errorBar:{cap:{lengthRatio:1}}},paletteFactory:t=>{const{marker:e}=Wg(t);return{stroke:e.fill,marker:e}}};class Dy extends ag{constructor(t){super({moduleCtx:t,pickModes:[Lu.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,Lu.NEAREST_NODE,Lu.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:Gv,label:$u}}),this.marker=new Iv,this.label=new yu,this.title=void 0,this.labelKey=void 0,this.xName=void 0,this.yName=void 0,this.labelName="Label",this.xKey=void 0,this.yKey=void 0,this.colorKey=void 0,this.colorName="Color",this.colorRange=["#ffff00","#00ff00","#0000ff"],this.colorScale=new Jf,this.tooltip=new ph}processData(t){var e;return xa(this,void 0,void 0,(function*(){const{xKey:i,yKey:n,labelKey:o,data:r}=this;if(null==i||null==n||null==r)return;const{isContinuousX:s,isContinuousY:a}=this.isContinuous(),{colorScale:l,colorDomain:c,colorRange:d,colorKey:u}=this,{dataModel:h,processedData:p}=yield this.requestDataModel(t,r,{props:[Gu(this,i,s,{id:"xKey-raw"}),Gu(this,n,a,{id:"yKey-raw"}),...o?[Gu(this,o,!1,{id:"labelKey-raw"})]:[],Bu(this,i,s,{id:"xValue"}),Bu(this,n,a,{id:"yValue"}),...u?[Bu(this,u,!0,{id:"colorValue"})]:[],...o?[Bu(this,o,!1,{id:"labelValue"})]:[]],dataVisible:this.visible});if(u){const t=h.resolveProcessedDataIndexById(this,"colorValue").index;l.domain=null!==(e=null!=c?c:p.domain.values[t])&&void 0!==e?e:[],l.range=d,l.update()}this.animationState.transition("updateData")}))}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const n=t===hc.X?"xValue":"yValue",o=e.resolveProcessedDataDefById(this,n),r=e.getDomain(this,n,"value",i);if("value"===(null==o?void 0:o.def.type)&&"category"===(null==o?void 0:o.def.valueType))return r;const s=this.axes[t];return qp(Ta(r),s)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e,i,n,o;return xa(this,void 0,void 0,(function*(){const{visible:r,axes:s,yKey:a="",xKey:l="",label:c,labelKey:d,dataModel:u,processedData:h}=this,p=s[hc.X],f=s[hc.Y];if(!(u&&h&&r&&p&&f))return[];const g=u.resolveProcessedDataIndexById(this,"xValue").index,v=u.resolveProcessedDataIndexById(this,"yValue").index,y=this.colorKey?u.resolveProcessedDataIndexById(this,"colorValue").index:-1,m=this.labelKey?u.resolveProcessedDataIndexById(this,"labelValue").index:-1,{colorScale:b,colorKey:S}=this,x=p.scale,C=f.scale,w=(null!==(e=x.bandwidth)&&void 0!==e?e:0)/2,E=(null!==(i=C.bandwidth)&&void 0!==i?i:0)/2,{marker:O}=this,D=[],A=c.getFont();for(const{values:t,datum:e}of null!==(n=h.data)&&void 0!==n?n:[]){const i=t[g],n=t[v],o=x.convert(i)+w,r=C.convert(n)+E,s=this.getLabelText(this.label,{value:d?t[m]:n,datum:e,xKey:l,yKey:a,labelKey:d,xName:this.xName,yName:this.yName,labelName:this.labelName}),c=Tc.getTextSize(s,A),u=S?b.convert(t[y]):void 0;D.push({series:this,itemId:a,yKey:a,xKey:l,datum:e,xValue:i,yValue:n,capDefaults:{lengthRatioMultiplier:this.marker.getDiameter(),lengthMax:1/0},point:{x:o,y:r,size:O.size},midPoint:{x:o,y:r},fill:u,label:Object.assign({text:s},c)})}return[{itemId:null!==(o=this.yKey)&&void 0!==o?o:this.id,nodeData:D,labelData:D,scales:t.calculateScaling.call(this),visible:this.visible}]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}getLabelData(){var t;return null===(t=this.contextNodeData)||void 0===t?void 0:t.reduce((t,e)=>t.concat(e.labelData),[])}markerFactory(){const{shape:t}=this.marker;return new(Af(t))}updateMarkerSelection(t){return xa(this,void 0,void 0,(function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:n}}=this;this.marker.isDirty()&&(i.clear(),i.cleanup());const o=n?e:[];return i.update(o)}))}updateMarkerNodes(t){return xa(this,void 0,void 0,(function*(){const{xKey:e="",yKey:i="",labelKey:n,marker:o}=this,{markerSelection:r,isHighlight:s}=t,a=Xd(s&&this.highlightStyle.item,o.getStyle());r.each((t,r)=>{this.updateMarkerStyle(t,o,{datum:r,highlighted:s,xKey:e,yKey:i,labelKey:n},a)}),s||this.marker.markClean()}))}updateLabelSelection(t){var e,i;return xa(this,void 0,void 0,(function*(){const{labelSelection:n}=t,{label:{enabled:o}}=this,r=(o&&null!==(i=null===(e=this.chart)||void 0===e?void 0:e.placeLabels().get(this))&&void 0!==i?i:[]).map(t=>Object.assign(Object.assign({},t.datum),{point:{x:t.x,y:t.y,size:t.datum.point.size}}));return n.update(r)}))}updateLabelNodes(t){return xa(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{label:i}=this;e.each((t,e)=>{var n,o,r,s;t.text=e.label.text,t.fill=i.color,t.x=null!==(o=null===(n=e.point)||void 0===n?void 0:n.x)&&void 0!==o?o:0,t.y=null!==(s=null===(r=e.point)||void 0===r?void 0:r.y)&&void 0!==s?s:0,t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.fontSize=i.fontSize,t.fontFamily=i.fontFamily,t.textAlign="left",t.textBaseline="top"})}))}getTooltipHtml(t){const{xKey:e,yKey:i,axes:n}=this,o=n[hc.X],r=n[hc.Y];if(!(e&&i&&o&&r))return"";const{marker:s,tooltip:a,xName:l,yName:c,labelKey:d,labelName:u,id:h,title:p=c}=this,f=Xd({fill:t.fill,strokeWidth:this.getStrokeWidth(s.strokeWidth)},s.getStyle()),{fill:g="gray"}=this.getMarkerStyle(s,{datum:t,highlighted:!1,xKey:e,yKey:i,labelKey:d},f),{datum:v,xValue:y,yValue:m,label:b}=t,S=$d(o.formatDatum(y)),x=$d(r.formatDatum(m));let C=`<b>${$d(null!=l?l:e)}</b>: ${S}<br><b>${$d(null!=c?c:i)}</b>: ${x}`;return d&&(C=`<b>${$d(null!=u?u:d)}</b>: ${$d(b.text)}<br>`+C),a.toTooltipHtml({title:p,content:C,backgroundColor:g},Object.assign({datum:v,xKey:e,xName:l,yKey:i,yName:c,labelKey:d,labelName:u,title:p,color:g,seriesId:h},this.getModuleTooltipParams(v)))}getLegendData(t){var e,i,n,o,r;const{id:s,data:a,xKey:l,yKey:c,yName:d,title:u,visible:h,marker:p}=this,{fill:f,stroke:g,fillOpacity:v,strokeOpacity:y,strokeWidth:m}=p;return(null==a?void 0:a.length)&&l&&c&&"category"===t?[{legendType:"category",id:s,itemId:c,seriesId:s,enabled:h,label:{text:null!==(e=null!=u?u:d)&&void 0!==e?e:c},marker:{shape:p.shape,fill:null!==(n=null!==(i=p.fill)&&void 0!==i?i:f)&&void 0!==n?n:"rgba(0, 0, 0, 0)",stroke:null!==(r=null!==(o=p.stroke)&&void 0!==o?o:g)&&void 0!==r?r:"rgba(0, 0, 0, 0)",fillOpacity:null!=v?v:1,strokeOpacity:null!=y?y:1,strokeWidth:null!=m?m:0}}]:[]}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,annotationSelections:n}=t;Fv(this,this.ctx.animationManager,e),Xu(this,"labels",this.ctx.animationManager,i),Xu(this,"annotations",this.ctx.animationManager,n)}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new kd}}Dy.className="ScatterSeries",Dy.type="scatter",ba([dl(Ol),Sa("design:type",String)],Dy.prototype,"title",void 0),ba([dl(Ol),Sa("design:type",String)],Dy.prototype,"labelKey",void 0),ba([dl(Ol),Sa("design:type",String)],Dy.prototype,"xName",void 0),ba([dl(Ol),Sa("design:type",String)],Dy.prototype,"yName",void 0),ba([dl(Ol),Sa("design:type",String)],Dy.prototype,"labelName",void 0),ba([dl(Ol),Sa("design:type",String)],Dy.prototype,"xKey",void 0),ba([dl(Ol),Sa("design:type",String)],Dy.prototype,"yKey",void 0),ba([dl(Ol),Sa("design:type",String)],Dy.prototype,"colorKey",void 0),ba([dl(Ol),Sa("design:type",String)],Dy.prototype,"colorName",void 0),ba([dl(Vl),Sa("design:type",Array)],Dy.prototype,"colorDomain",void 0),ba([dl(Nl),Sa("design:type",Array)],Dy.prototype,"colorRange",void 0);const Ay={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",instanceConstructor:Dy,seriesDefaults:{axes:[{type:Hg.NUMBER,position:Ug.BOTTOM},{type:Hg.NUMBER,position:Ug.LEFT}]},themeTemplate:{__extends__:hv,tooltip:{position:{type:"node"}},marker:{__extends__:pv,fillOpacity:.8},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:gv,color:vv}},enterpriseThemeTemplate:{errorBar:{cap:{lengthRatio:1}}},paletteFactory:Wg},Ty={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",instanceConstructor:kh,seriesDefaults:{},themeTemplate:{__extends__:hv,title:{enabled:!0,fontStyle:void 0,fontWeight:"normal",fontSize:14,fontFamily:gv,color:bv,spacing:5},calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:gv,color:vv,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:"normal",fontSize:12,fontFamily:gv,color:mv,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,outerRadiusOffset:0,innerRadiusOffset:0,shadow:{enabled:!1,color:Ev,xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:gv,color:vv,margin:2}},paletteFactory:({takeColors:t,colorsCount:e,userPalette:i})=>{const{fills:n,strokes:o}=t(e);return{fills:n,strokes:i?o:[kv],calloutLine:{colors:o}}}};class ky{constructor(t,e,i,n,o,r,s,a,l,c,d){this.series=t,this.index=e,this.datum=i,this.size=n,this.colorValue=o,this.fill=r,this.stroke=s,this.sumSize=a,this.depth=l,this.parent=c,this.children=d,this.midPoint={x:0,y:0}}contains(t){let e=t;for(;null!=e&&e.index>=this.index;){if(e===this)return!0;e=e.parent}return!1}walk(t,e=ky.Walk.PreOrder){e===ky.Walk.PreOrder&&t(this),this.children.forEach(i=>{i.walk(t,e)}),e===ky.Walk.PostOrder&&t(this)}*[Symbol.iterator](){yield this;for(const t of this.children)yield*t}}ky.Walk={PreOrder:0,PostOrder:1};class My extends Yu{constructor(t){super({moduleCtx:t,pickModes:[Lu.EXACT_SHAPE_MATCH],contentGroupVirtual:!1}),this.childrenKey="children",this.sizeKey=void 0,this.colorKey=void 0,this.colorName=void 0,this.fills=Object.values(Eu),this.strokes=Object.values(Ou),this.colorRange=void 0,this.rootNode=new ky(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.animationState=new bh("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)}},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),resize:t=>this.animateReadyResize(t)},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)}},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)}}},()=>this.checkProcessedDataAnimatable())}hasData(){return Array.isArray(this.data)&&this.data.length>0}processData(){var t,e;return xa(this,void 0,void 0,(function*(){const{childrenKey:i,sizeKey:n,colorKey:o,fills:r,strokes:s,colorRange:a}=this;let l=0;const c=()=>(l+=1,l);let d=0,u=1/0,h=-1/0;const p=new Array((null!==(e=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==e?e:0)+1).fill(void 0),f=(t,e)=>{const r=c(),s=null!=e.depth?e.depth+1:0,a=null!=i?t[i]:void 0,l=null==a||0===a.length;let f=null!=n?t[n]:void 0;f=Number.isFinite(f)?Math.max(f,0):l?1:0;const v=f;d=Math.max(d,s);const y=null!=o?t[o]:void 0;return"number"==typeof y&&(p[r]=y,u=Math.min(u,y),h=Math.max(h,y)),g(new ky(this,r,t,f,y,void 0,void 0,v,s,e,[]),a)},g=(t,e)=>(null==e||e.forEach(e=>{const i=f(e,t);t.children.push(i),t.sumSize+=i.sumSize}),t),v=g(new ky(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.data),y=[u,h];let m;null!=a&&Number.isFinite(u)&&Number.isFinite(h)&&(m=new Jf,m.domain=y,m.range=a,m.update()),v.children.forEach((t,e)=>{t.walk(t=>{let i;const n=p[t.index];null!=n&&(i=null==m?void 0:m.convert(n)),null!=i||(i=null==r?void 0:r[e%r.length]),t.fill=i,t.stroke=null==m?null==s?void 0:s[e%s.length]:"rgba(0, 0, 0, 0.2)"})}),this.rootNode=v,this.maxDepth=d,this.colorDomain=y}))}update({seriesRect:t}){return xa(this,void 0,void 0,(function*(){yield this.updateSelections(),yield this.updateNodes();const e=this.getAnimationData();this.checkResize(t)&&this.animationState.transition("resize",e),this.animationState.transition("update",e)}))}resetAllAnimation(t){var e;const i=null===(e=this.animationResetFns)||void 0===e?void 0:e.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),null!=i&&vh(t.datumSelections,i)}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e;const i=null===(e=this.animationResetFns)||void 0===e?void 0:e.datum;null!=i&&vh([t],i)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(){return{datumSelections:[this.groupSelection]}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(t){return"gradient"===t&&null!=this.colorKey&&null!=this.colorRange?[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.colorName,colorDomain:this.colorDomain,colorRange:this.colorRange}]:[]}getDatumIdFromData(t){return""+t.index}getDatumId(t){return this.getDatumIdFromData(t)}}ba([dl(Ol),Sa("design:type",String)],My.prototype,"childrenKey",void 0),ba([dl(Ol),Sa("design:type",String)],My.prototype,"sizeKey",void 0),ba([dl(Ol),Sa("design:type",String)],My.prototype,"colorKey",void 0),ba([dl(Ol),Sa("design:type",String)],My.prototype,"colorName",void 0),ba([dl(Ll),Sa("design:type",Array)],My.prototype,"fills",void 0),ba([dl(Ll),Sa("design:type",Array)],My.prototype,"strokes",void 0),ba([dl(Ll),Sa("design:type",Array)],My.prototype,"colorRange",void 0);class Ry extends wp{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(t,e){return null}}ba([dl(Fl(0,1)),Sa("design:type",Number)],Ry.prototype,"innerRadiusRatio",void 0);const Py={},Ny={},Ly={},Iy={},Fy={},_y=new Set,Gy=new Set,By=new Set,Vy=new Set,jy={},Wy={};function zy(t,e,i,n,o,r,s,a,l,c,d,u,h){Py[t]=i,Ny[t]=n,Uy(t,o,r),s&&function(t,e){Fy[t]=e}(t,s),a&&function(t){_y.add(t)}(t),l&&function(t){Gy.add(t)}(t),c&&function(t){By.add(t)}(t),d&&function(t){Vy.add(t)}(t),u&&function(t,e){jy[t]=e}(t,u),h&&function(t,e){Wy[t]=e}(t,h),function(t,e){Yg[t]=e}(t,e)}function Uy(t,e,i={}){const n=Ly[t];Ly[t]=Ka([n,e]),Iy[t]=Ka([n,e,i])}function Hy(t,e){const i=Py[t];if(i)return new i(e);throw new Error("AG Charts - unknown series type: "+t)}function Ky(t){return Ny[t]}function Yy(t){return Da()?Iy[t]:Ly[t]}function Xy(t){return _y.has(t)}function qy(t){return Gy.has(t)}function $y(t){return By.has(t)}function Zy(){var t,e,i,n,o,r,s,a;for(const l of Ea){if("enterprise"!==l.packageType||Tg(l)||La.errorOnce("Unexpected enterprise module registered: "+l.identifier),null!=Mh.constructors&&null!=l.optionConstructors&&Object.assign(Mh.constructors,l.optionConstructors),"root"===l.type&&l.themeTemplate)for(const t of l.chartTypes)$g(t,l.themeTemplate);if("root"===l.type&&(null===(t=l.conflicts)||void 0===t?void 0:t.length)&&(s=l.optionsKey,a=l.conflicts,Aa.set(s,a)),"series"===l.type){if(l.chartTypes.length>1)throw new Error("AG Charts - Module definition error: "+l.identifier);zy(l.identifier,l.chartTypes[0],l.instanceConstructor,l.seriesDefaults,l.themeTemplate,l.enterpriseThemeTemplate,l.paletteFactory,l.solo,l.stackable,l.groupable,l.stackedByDefault,l.swapDefaultAxesCondition,l.customDefaultsFunction)}if("series-option"===l.type&&l.themeTemplate)for(const t of l.seriesTypes)Uy(t,l.themeTemplate);if("axis-option"===l.type&&l.themeTemplate)for(const t of l.axisTypes){const e=l.themeTemplate[t],i=Object.assign(Object.assign({},l.themeTemplate),"object"==typeof e?e:{});for(const t of l.axisTypes)delete i[t];Cg(t,i)}"axis"===l.type&&(o=l.identifier,r=l.instanceConstructor,mg[o]=r,l.themeTemplate&&Cg(l.identifier,l.themeTemplate)),"legend"===l.type&&(e=l.identifier,i=l.optionsKey,l.instanceConstructor,n=l.themeTemplate,kg[e]=i,Mg[i]=n)}if(Da()){const t=Eg.filter(({useCount:t})=>null==t||0===t);t.length>0&&La.errorOnce("Enterprise modules expected but not registered: ",t)}}class Jy extends Xf{constructor(t,e){super(t,e),this._data={}}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return xa(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),{seriesArea:{padding:i},seriesRoot:n}=this,o=e.clone();return e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e,this.animationRect=e,this.hoverRect=e,n.translationX=Math.floor(e.x),n.translationY=Math.floor(e.y),yield Promise.all(this.series.map(t=>xa(this,void 0,void 0,(function*(){yield t.update({seriesRect:e})})))),n.visible=this.series[0].visible,n.setClipRectInGroupCoordinateSpace(new Sc(e.x,e.y,e.width,e.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:o,paddedRect:e,visible:!0},axes:[]}),e}))}}function Qy(t){var e,i,n,o;const r=[],s=function(t){var e;return null!==(e=Yg[t])&&void 0!==e?e:"unknown"}(Jg(t));for(const{type:a,chartTypes:l,optionsKey:c,optionsInnerKey:d,identifier:u}of Eg)if("unknown"===s||l.includes(s))if("root"===a||"legend"===a){const e=t[c];if(null==e)continue;d?e[d]&&(r.push(`${c}.${d}`),delete e[d]):(r.push(c),delete t[c])}else if("axis"===a){if(!("axes"in t)||!(null===(e=t.axes)||void 0===e?void 0:e.some(t=>t.type===u)))continue;r.push(`axis[type=${u}]`),t.axes=t.axes.filter(t=>t.type!==u)}else if("axis-option"===a){if(!("axes"in t)||!(null===(i=t.axes)||void 0===i?void 0:i.some(t=>t[c])))continue;r.push("axis."+c),t.axes.forEach(t=>{t[c]&&delete t[c]})}else if("series"===a){if(!(null===(n=t.series)||void 0===n?void 0:n.some(t=>t.type===u)))continue;r.push(`series[type=${u}]`),t.series=t.series.filter(t=>t.type!==u)}else if("series-option"===a){if(!(null===(o=t.series)||void 0===o?void 0:o.some(t=>t[c])))continue;r.push("series."+c),t.series.forEach(t=>{t[c]&&delete t[c]})}r.length>0&&La.warnOnce(["unable to use these enterprise features as 'ag-charts-enterprise' has not been loaded:","",...r,"","See: https://charts.ag-grid.com/javascript/installation/"].join("\n"))}function tm(t,e){var i;const n=[],o=function(t){var e,i,n,o;const r={},s={},a={},l=[];for(const c of t){const t=null!==(e=c.type)&&void 0!==e?e:"line",d=qy(t),u=$y(t);if(!d&&!u){l.push({type:"ungrouped",opts:[c]});continue}const{stacked:h,stackGroup:p,grouped:f,xKey:g}=c,v=null!=p||!0===h;null!==(i=a[t])&&void 0!==i||(a[t]=!1),a[t]||(a[t]=v&&d);const y=!0===f;let m=[null!=p?p:!0===h?"stacked":void 0,y?"grouped":void 0].filter(t=>null!=t).join("-");m||(m="default-ag-charts-group");const b=`${t}-${g}-${m}`;if(v&&d){const t=null!==(n=s[b])&&void 0!==n?n:s[b]={type:"stack",opts:[]};0===t.opts.length&&l.push(t),t.opts.push(c)}else if(y&&u){const t=null!==(o=r[b])&&void 0!==o?o:r[b]={type:"group",opts:[]};0===t.opts.length&&l.push(t),t.opts.push(c)}else l.push({type:"ungrouped",opts:[c]})}return Object.values(a).some(t=>t),l}(e.map(t=>{var e;const i=null!==(e=t.type)&&void 0!==e?e:"line",n=$y(i),o=qy(i),r=(s=i,Vy.has(s));var s;if(t.grouped&&!n&&La.warnOnce("unsupported grouping of series type: "+i),t.stacked&&!o&&La.warnOnce("unsupported stacking of series type: "+i),!n&&!o)return t;let a=!1,l=!1;return void 0===t.stacked&&void 0===t.grouped?(a=o&&r,l=n&&!a):void 0===t.stacked?(a=o&&r&&!(t.grouped&&n),l=n&&!a&&!!t.grouped):void 0===t.grouped?(a=o&&t.stacked,l=n&&!a):(a=o&&t.stacked,l=n&&!a&&t.grouped),Object.assign(Object.assign({},t),{stacked:a,grouped:l})})),r=o.reduce((t,e)=>{var i,n;if("ungrouped"===e.type)return t;const o=null!==(i=e.opts[0].type)&&void 0!==i?i:"line";return null!==(n=t[o])&&void 0!==n||(t[o]=0),t[o]+="stack"===e.type?1:e.opts.length,t},{}),s={},a=t=>{var e,i;let n=0;const o=null!==(e=t.opts[0].type)&&void 0!==e?e:"line";if(null!==(i=s[o])&&void 0!==i||(s[o]=0),"stack"===t.type){for(const e of t.opts)e.seriesGrouping={groupIndex:s[o],groupCount:r[o],stackIndex:n++,stackCount:t.opts.length};s[o]++}else if("group"===t.type)for(const e of t.opts)e.seriesGrouping={groupIndex:s[o],groupCount:r[o],stackIndex:0,stackCount:0},s[o]++;else for(const e of t.opts)e.seriesGrouping=void 0;return t.opts};_a.create(!0,"opts")("processSeriesOptions() - series grouping: ",o);for(const t of o){const e=null!==(i=t.opts[0].type)&&void 0!==i?i:"line";$y(e)||qy(e)?n.push(...a(t)):n.push(...t.opts)}return n}Jy.className="HierarchyChart",Jy.type="hierarchy";const em={fills:Array.from(Object.values(Eu)),strokes:Array.from(Object.values(Ou))},im={get cartesian(){return{seriesTypes:qg.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:qg.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:qg.hierarchyTypes,commonOptions:[]}}},nm=Object.values(im).reduce((t,{commonOptions:e})=>[...t,...e],[]);class om{getPalette(){return em}static getAxisDefaults(){return{top:{},right:{},bottom:{},left:{},title:{enabled:!1,text:"Axis Title",spacing:25,fontStyle:void 0,fontWeight:"normal",fontSize:zg.MEDIUM,fontFamily:gv,color:vv},label:{fontStyle:void 0,fontWeight:void 0,fontSize:zg.SMALL,fontFamily:gv,padding:5,rotation:void 0,color:vv,formatter:void 0,avoidCollisions:!0},line:{enabled:!0,width:1,color:xv},tick:{enabled:!1,width:1,color:xv},gridLine:{enabled:!0,style:[{stroke:Sv,lineDash:[]}]},crossLines:{enabled:!1,fill:Cv,stroke:Cv,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:zg.SMALL,fontFamily:gv,padding:5,color:vv}}}}static getSeriesDefaults(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:7,strokeWidth:1,formatter:void 0}}static getLegendItemMarkerDefaults(){return{shape:void 0,size:15,padding:8}}static getCaptionWrappingDefaults(){return"hyphenate"}static getChartDefaults(){return{background:{visible:!0,fill:wv},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontStyle:void 0,fontWeight:"normal",fontSize:zg.LARGE,fontFamily:gv,color:vv,wrapping:om.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontStyle:void 0,fontWeight:void 0,fontSize:zg.MEDIUM,fontFamily:gv,color:bv,wrapping:om.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",spacing:20,fontStyle:void 0,fontWeight:void 0,fontSize:zg.MEDIUM,fontFamily:gv,color:"rgb(140, 140, 140)",wrapping:om.getCaptionWrappingDefaults()},legend:{position:"bottom",spacing:30,listeners:{},item:{paddingX:16,paddingY:8,marker:om.getLegendItemMarkerDefaults(),label:{color:vv,fontStyle:void 0,fontWeight:void 0,fontSize:zg.SMALL,fontFamily:gv,formatter:void 0}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:vv},inactiveStyle:{fill:bv},highlightStyle:{fill:vv},label:{color:vv}}},tooltip:{enabled:!0,range:"nearest",delay:0},listeners:{}}}constructor(t){t=Ud({},null!=t?t:{});const{overrides:e=null,palette:i=null}=t,n=this.createChartConfigPerChartType(this.getDefaults());if(e){const{common:t}=e,i=(t,e)=>{if(e)for(const i of t){const t=i;n[t]=Ud(n[t],e)}};for(const[,{seriesTypes:e,commonOptions:n}]of Object.entries(im)){const o=Object.assign({},t);for(const t of nm)n.includes(t)||delete o[t];i(e,o)}qg.seriesTypes.forEach(t=>{const i=t;e[i]&&(n[i]=Ud(n[i],e[i]))})}this.palette=null!=i?i:this.getPalette(),this.config=Object.freeze(this.templateTheme(n))}createChartConfigPerChartType(t){return Object.entries(im).forEach(([e,{seriesTypes:i}])=>{const n=Zg(e);i.forEach(e=>{const i=e;t[i]||(t[i]={},Ud(t[i],n))})}),t}getDefaults(){let t={};const e=t=>Object.assign(Object.assign(Object.assign({},Mg),om.getChartDefaults()),Zg(t)),i=(t,i)=>{var n,o,r,s;const a=e(t),l={};for(const e of i){null!==(n=l[e])&&void 0!==n||(l[e]=Ud({},a));const i=null!==(o=(s=l[e]).axes)&&void 0!==o?o:s.axes={},c=Yy(e);c&&(l[e].series=Ud(l[e].series,c));for(const e of Sg.axesTypes){const n=wg(e);"cartesian"===t&&(i[e]=Ud(i[e],null!==(r=om.cartesianAxisDefault[e])&&void 0!==r?r:{})),n&&(i[e]=Ud(i[e],n))}}return l};return t=Ud(t,i("cartesian",qg.cartesianTypes)),t=Ud(t,i("polar",qg.polarTypes)),t=Ud(t,i("hierarchy",qg.hierarchyTypes)),t}templateTheme(t){const e=Ka([t]),{extensions:i,properties:n}=this.getTemplateParameters();return Xa(e,(t,e)=>{if(e.__extends__){const t=e.__extends__,n=i.get(t);if(null==n)throw new Error("AG Charts - no template variable provided for: "+t);Object.keys(n).forEach(t=>{t in e||(e[t]=n[t])}),delete e.__extends__}if(e.__overrides__){const t=e.__overrides__,n=i.get(t);if(null==n)throw new Error("AG Charts - no template variable provided for: "+t);Object.assign(e,n),delete e.__overrides__}if(Array.isArray(e))for(let t=0;t<e.length;t++){const i=e[t];n.has(i)&&(e[t]=n.get(i))}else for(const[t,i]of Object.entries(e))n.has(i)&&(e[t]=n.get(i))}),e}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Eu.BLUE,stroke:Ou.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Eu.ORANGE,stroke:Ou.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Eu.GRAY,stroke:Ou.GRAY}}getTemplateParameters(){const t=new Map;t.set(nv,om.getChartDefaults()),t.set(av,om.getAxisDefaults()),t.set(ov,om.getChartDefaults().legend),t.set(rv,om.getChartDefaults().legend.item),t.set(sv,om.getLegendItemMarkerDefaults()),t.set(lv,om.getAxisDefaults().label),t.set(cv,om.getAxisDefaults().line),t.set(dv,om.getAxisDefaults().tick),t.set(uv,om.getAxisDefaults().gridLine),t.set(hv,om.getSeriesDefaults()),t.set(fv,{}),t.set(pv,om.getCartesianSeriesMarkerDefaults());const e=new Map;return e.set(gv,"Verdana, sans-serif"),e.set(vv,"rgb(70, 70, 70)"),e.set(yv,"white"),e.set(bv,"rgb(140, 140, 140)"),e.set(Sv,"rgb(224,234,241)"),e.set(xv,"rgb(195, 195, 195)"),e.set(Cv,"rgb(70, 70, 70)"),e.set(mv,"white"),e.set(wv,"white"),e.set(Ev,"rgba(0, 0, 0, 0.5)"),e.set(Mv,[Eu.ORANGE,Eu.YELLOW,Eu.GREEN]),e.set(Rv,["#ffffff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),e.set(Pv,["#ffffff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),e.set(kv,"white"),e.set(Ov,om.getWaterfallSeriesDefaultPositiveColors()),e.set(Dv,om.getWaterfallSeriesDefaultNegativeColors()),e.set(Av,om.getWaterfallSeriesDefaultTotalColors()),e.set(Tv,om.getWaterfallSeriesDefaultTotalColors().stroke),{extensions:t,properties:e}}}om.cartesianAxisDefault={number:Object.assign(Object.assign({},om.getAxisDefaults()),{line:Object.assign(Object.assign({},om.getAxisDefaults().line),{enabled:!1})}),log:Object.assign(Object.assign({},om.getAxisDefaults()),{base:10,line:Object.assign(Object.assign({},om.getAxisDefaults().line),{enabled:!1})}),category:Object.assign(Object.assign({},om.getAxisDefaults()),{groupPaddingInner:.1,label:Object.assign(Object.assign({},om.getAxisDefaults().label),{autoRotate:!0}),gridLine:Object.assign(Object.assign({},om.getAxisDefaults().gridLine),{enabled:!1})}),"grouped-category":Object.assign({},om.getAxisDefaults()),time:Object.assign(Object.assign({},om.getAxisDefaults()),{gridLine:Object.assign(Object.assign({},om.getAxisDefaults().gridLine),{enabled:!1})})};const rm={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},sm={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},am={fills:Array.from(Object.values(rm)),strokes:Array.from(Object.values(sm))};class lm extends om{static getWaterfallSeriesDefaultPositiveColors(){return{fill:rm.BLUE,stroke:sm.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:rm.ORANGE,stroke:sm.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:rm.GRAY,stroke:sm.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Ov,lm.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Dv,lm.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(Av,lm.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Tv,lm.getWaterfallSeriesDefaultTotalColors().stroke),t.properties.set(kv,"#182732"),t.properties.set(vv,"white"),t.properties.set(bv,"#7D91A0"),t.properties.set(Sv,"#545A6E"),t.properties.set(Cv,"white"),t.properties.set(Mv,[rm.ORANGE,rm.YELLOW,rm.GREEN]),t.properties.set(Rv,["#192834","#253746","#324859","#3f596c","#4d6a80"]),t.properties.set(Pv,["#192834","#3b5164","#496275","#577287","#668399"]),t.properties.set(wv,"#182732"),t.properties.set(mv,"#182732"),t}getPalette(){return am}constructor(t){super(t)}}const cm={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},dm={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},um={fills:Array.from(Object.values(cm)),strokes:Array.from(Object.values(dm))};class hm extends lm{static getWaterfallSeriesDefaultPositiveColors(){return{fill:cm.BLUE,stroke:dm.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:cm.RED,stroke:dm.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:cm.GRAY,stroke:dm.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Ov,hm.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Dv,hm.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(Av,hm.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Mv,[cm.ORANGE,cm.YELLOW,cm.GREEN]),t.properties.set(Tv,hm.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return um}}const pm={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},fm={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},gm={fills:Array.from(Object.values(pm)),strokes:Array.from(Object.values(fm))};class vm extends om{static getWaterfallSeriesDefaultPositiveColors(){return{fill:pm.BLUE,stroke:fm.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:pm.RED,stroke:fm.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:pm.GRAY,stroke:fm.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Ov,vm.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Dv,vm.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(Av,vm.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Mv,[pm.ORANGE,pm.YELLOW,pm.GREEN]),t.properties.set(Tv,vm.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return gm}}const ym={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},mm={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff"},bm={fills:Array.from(Object.values(ym)),strokes:Array.from(Object.values(mm))};class Sm extends lm{static getWaterfallSeriesDefaultPositiveColors(){return{fill:ym.BLUE,stroke:mm.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:ym.RED,stroke:mm.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#eeeeee"}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Ov,Sm.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Dv,Sm.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(Av,Sm.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Mv,[ym.BLUE,ym.RED]),t.properties.set(Tv,Sm.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return bm}}const xm={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},Cm={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb"},wm={fills:Array.from(Object.values(xm)),strokes:Array.from(Object.values(Cm))};class Em extends om{static getWaterfallSeriesDefaultPositiveColors(){return{fill:xm.BLUE,stroke:Cm.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:xm.RED,stroke:Cm.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#888888"}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Ov,Em.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Dv,Em.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(Av,Em.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Mv,[xm.BLUE,xm.RED]),t.properties.set(Tv,Em.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return wm}}const Om={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},Dm={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},Am={fills:Array.from(Object.values(Om)),strokes:Array.from(Object.values(Dm))};class Tm extends lm{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Om.BLUE,stroke:Dm.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Om.ORANGE,stroke:Dm.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Om.GRAY,stroke:Dm.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Ov,Tm.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Dv,Tm.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(Av,Tm.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Mv,[Om.ORANGE,Om.YELLOW,Om.GREEN]),t.properties.set(Tv,Tm.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Am}}const km={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},Mm={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},Rm={fills:Array.from(Object.values(km)),strokes:Array.from(Object.values(Mm))};class Pm extends om{static getWaterfallSeriesDefaultPositiveColors(){return{fill:km.BLUE,stroke:Mm.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:km.ORANGE,stroke:Mm.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:km.GRAY,stroke:Mm.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Ov,Pm.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Dv,Pm.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(Av,Pm.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Mv,[km.ORANGE,km.YELLOW,km.GREEN]),t.properties.set(Tv,Pm.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Rm}}const Nm={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Lm={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#c18aff",YELLOW:"#fff653",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},Im={fills:Array.from(Object.values(Nm)),strokes:Array.from(Object.values(Lm))};class Fm extends lm{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Nm.BLUE,stroke:Lm.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Nm.ORANGE,stroke:Lm.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Nm.GRAY,stroke:Lm.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Ov,Fm.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Dv,Fm.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(Av,Fm.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Mv,[Nm.ORANGE,Nm.YELLOW,Nm.GREEN]),t.properties.set(Tv,Fm.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Im}}const _m={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Gm={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},Bm={fills:Array.from(Object.values(_m)),strokes:Array.from(Object.values(Gm))};class Vm extends om{static getWaterfallSeriesDefaultPositiveColors(){return{fill:_m.BLUE,stroke:Gm.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:_m.ORANGE,stroke:Gm.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:_m.GRAY,stroke:Gm.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Ov,Vm.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Dv,Vm.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(Av,Vm.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Mv,[_m.ORANGE,_m.YELLOW,_m.GREEN]),t.properties.set(Tv,Vm.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Bm}}const jm=()=>new om,Wm=()=>new lm,zm={undefined:jm,null:jm,"ag-default":jm,"ag-sheets":()=>new Pm,"ag-polychroma":()=>new Em,"ag-vivid":()=>new Vm,"ag-material":()=>new vm},Um={undefined:Wm,null:Wm,"ag-default-dark":Wm,"ag-sheets-dark":()=>new Tm,"ag-polychroma-dark":()=>new Sm,"ag-vivid-dark":()=>new Fm,"ag-material-dark":()=>new hm},Hm=Object.assign(Object.assign({},Um),zm);function Km(t){return void 0===t||"string"==typeof t||t instanceof om?t:"object"==typeof t?function(t){if(null===t)return;let e=!0;const{baseTheme:i,palette:n,overrides:o}=t;if(void 0!==i&&"string"!=typeof i&&"object"!=typeof i&&(La.warn(`invalid theme.baseTheme type ${typeof i}, expected (string | object).`),e=!1),void 0!==o&&"object"!=typeof o&&(La.warn(`invalid theme.overrides type ${typeof o}, expected object.`),e=!1),"object"==typeof n){if(null!==n){const{fills:t,strokes:i}=n;Array.isArray(t)||(La.warn("theme.overrides.fills must be a defined array"),e=!1),Array.isArray(i)||(La.warn("theme.overrides.strokes must be a defined array"),e=!1)}}else void 0!==n&&(La.warn(`invalid theme.palette type ${typeof n}, expected object.`),e=!1);return e?t:void 0}(t):void La.warn(`invalid theme value type ${typeof t}, expected object.`)}function Ym(t){var e;let i=Km(t);if(i instanceof om)return i;if(void 0===i||"string"==typeof i){const t=Hm[i];return t?t():(La.warnOnce(`the theme [${i}] is invalid, using [ag-default] instead.`),jm())}const n=[];let o;for(;"object"==typeof i;)n.push(null!==(e=i.overrides)&&void 0!==e?e:{}),i.palette&&null==o&&(o=i.palette),i=i.baseTheme;n.reverse();const r=Object.assign({baseTheme:i,overrides:Ka(n)},o?{palette:o}:{});return new((r.baseTheme?Ym(r.baseTheme):jm()).constructor)(r)}function Xm(t,e,i){const n=[];for(let o=0;o<i;o++)n.push(e[(o+t.colourIndex)%e.length]);return n}const qm={avoidDeepClone:["data"]};function $m(t){var e,i,n,o;!function(t){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach(([e,i])=>{var n;(null===(n=t.series)||void 0===n?void 0:n.some(t=>null!=t[e]))&&La.warnOnce(`Property [series.${e}] is deprecated, please use [series.${i}] and multiple series instead.`)})}(t);const r=Jg(t),s=function(t){if(void 0===t||"object"!=typeof t||null===t)return{};const{type:e,xOffset:i,yOffset:n}=t,o={},r={pointer:!0,node:!0};var s;return"string"==typeof e&&(s=e,Object.keys(r).includes(s))&&(o.type=e),"number"==typeof i&&!isNaN(i)&&isFinite(i)&&(o.xOffset=i),"number"==typeof n&&!isNaN(n)&&isFinite(n)&&(o.yOffset=n),o}(null===(e=t.tooltip)||void 0===e?void 0:e.position),a=t=>{if(null!=t&&!(null!=(e=t)&&qg.has(e)||Og(t)||Ky(t)))throw new Error(`AG Charts - unknown series type: ${t}; expected one of: ${qg.seriesTypes}`);var e};a(r);for(const{type:e}of null!==(i=t.series)&&void 0!==i?i:[])null!=e&&a(e);t=function(t){if(void 0===t.series||t.series.length<=1||!function(t){for(const e of t)if(Xy(e.type))return!0;return!1}(t.series))return t;let e=[...t.series];if(Xy(e[0].type))La.warn(`series[0] of type '${e[0].type}' is incompatible with other series types. Only processing series[0]`),e=e.slice(0,1);else{const t=Array.from(new Set(e.filter(t=>Xy(t.type)).map(t=>t.type)));La.warnOnce("Unable to mix these series types with the lead series type: "+t),e=e.filter(t=>!Xy(t.type))}return Object.assign(Object.assign({},t),{series:e})}(Object.assign(Object.assign({},t),{type:r}));let l="line";Qg(t)?l="line":tv(t)?l="treemap":ev(t)&&(l="pie");let c=Ky(r);(function(t){var e,i;let n;for(const o of null!==(e=t.series)&&void 0!==e?e:[]){const{type:t="line"}=o,e=null===(i=jy[t])||void 0===i?void 0:i.call(jy,o);if(null!=e){if(null!=n&&n!=e)throw new Error("AG Charts - The provided series have incompatible directions");n=e}}return n})(t)&&(c=function(t){var e;if(!Qg(t))return t;const[i,n]=null!==(e=t.axes)&&void 0!==e?e:[];return Object.assign(Object.assign({},t),{axes:[Object.assign(Object.assign({},i),{position:n.position}),Object.assign(Object.assign({},n),{position:i.position})]})}(c)),c=function(t,e){var i;let n=e;for(const e of null!==(i=t.series)&&void 0!==i?i:[]){const{type:t}=e,i=null!=t?Wy[t]:void 0;void 0!==i&&(n=Object.assign(Object.assign({},n),i(e)))}return n}(t,c);const d=function(t){var e,i,n,o;const r={};for(const[s,a]of Aa.entries())if(null!=t[s]&&a.length){null!==(e=r[s])&&void 0!==e||(r[s]={});for(const e of a)(null===(i=t[s])||void 0===i?void 0:i.enabled)&&(null===(n=t[e])||void 0===n?void 0:n.enabled)?(La.warnOnce(`the [${s}] module can not be used at the same time as [${e}], it will be disabled.`),r[s].enabled=!1):r[s].enabled=null===(o=t[s])||void 0===o?void 0:o.enabled}return r}(t);!function(t){Xa(t,(t,e)=>{!1===e.enabled&&Object.keys(e).forEach(t=>{"enabled"!==t&&delete e[t]})},{skip:["data","theme"]})}(t);const{context:u,mergedOptions:h,axesThemes:p,seriesThemes:f,theme:g}=function(t,e,i){const{theme:n,cleanedTheme:o,axesThemes:r,seriesThemes:s,userPalette:a}=function(t){var e;const i=Ym(t.theme),n=i.config[Jg(t)],o=Object.entries(i.config).reduce((t,[e,{series:i}])=>(t[e]=i,t),{}),r=t.theme,s="object"==typeof r&&r.palette?r.palette:null;return{theme:i,axesThemes:null!==(e=null==n?void 0:n.axes)&&void 0!==e?e:{},seriesThemes:o,cleanedTheme:Ka([null!=n?n:{},{axes:Ua,series:Ua}]),userPalette:s}}(e),l={colourIndex:0,palette:n.palette,userPalette:a,theme:n},c=Ka([t=n.templateTheme(t),o,e,i],qm);Ca.isEnterprise||Qy(c);return{context:l,mergedOptions:c,axesThemes:r,seriesThemes:s,theme:n}}(c,t,d);h.series=tm(0,(null!==(n=h.series)&&void 0!==n?n:[]).map(t=>{var e;const i=null!==(e=t.type)&&void 0!==e?e:l,n=function(t,e,i,n){var o,r;const s=Ka([Object.assign({},n),null===(o=t.tooltip)||void 0===o?void 0:o.position],qm);return Ka([null!==(r=i[e])&&void 0!==r?r:{},Object.assign(Object.assign({},t),{type:e,tooltip:Object.assign(Object.assign({},t.tooltip),{position:s})})],qm)}(t,i,f,s);return"pie"===i&&function(t,e,i){Array.isArray(e.innerLabels)?i.innerLabels=e.innerLabels.map(e=>Ka([t.innerLabels,e])):i.innerLabels=Ua}(f.pie,t,n),n})).map(t=>function(t,e,...i){const n=function(t,e){const i=(n=e.type,Fy[n]);var n;if(!i)return{};const{palette:{fills:o,strokes:r},userPalette:s,theme:a}=t,l=Math.max(o.length,r.length);return i({userPalette:s,themeTemplateParameters:a.getTemplateParameters(),colorsCount:l,takeColors:e=>{const i={fills:Xm(t,o,e),strokes:Xm(t,r,e)};return t.colourIndex+=e,i}})}(t,e);return Ka([...i,n,e,{stacked:Ua,grouped:Ua}],qm)}(u,t)).map(t=>g.templateTheme(t));const v=t=>{const e=null!=(i=t)&&Sg.has(i);var i;return e||La.warnOnce(`unknown axis type: ${t}; expected one of: ${Sg.axesTypes}, ignoring.`),e};if("axes"in h){let e=!0;for(const{type:t}of null!==(o=h.axes)&&void 0!==o?o:[])e&&(e=v(t));const i=e?h.axes:c.axes;h.axes=null==i?void 0:i.map(t=>{var i,n,o,r,s;const a=t.type;let l;e&&(l=null===(i=c.axes)||void 0===i?void 0:i.find(({type:t})=>t===a));return function(t,e){const i={top:Ua,bottom:Ua,left:Ua,right:Ua};if(t.crossLines){Array.isArray(t.crossLines)||(La.warn("axis[].crossLines should be an array."),t.crossLines=[]);const{crossLines:i}=e;t.crossLines=t.crossLines.map(t=>Ka([i,t]))}return Ka([e,{crossLines:Ua},t,i],qm)}(t,Ka([null!==(n=p[a])&&void 0!==n?n:{},null!==(s=null===(o=p[a])||void 0===o?void 0:o[null!==(r=t.position)&&void 0!==r?r:"unknown"])&&void 0!==s?s:{},l]))}),function(t,e){var i,n,o,r;if(void 0!==(null===(i=t.legend)||void 0===i?void 0:i.enabled)||void 0!==(null===(n=e.legend)||void 0===n?void 0:n.enabled))return;if(null!==(o=e.legend)&&void 0!==o||(e.legend={}),(null!==(r=t.series)&&void 0!==r?r:[]).length>1)return void(e.legend.enabled=!0);e.legend.enabled=!1}(t,h)}return function(t,e){Xa(t,(t,e,i)=>{if(!i)return;const{_enabledFromTheme:n}=i;null!=n&&delete i._enabledFromTheme,"enabled"in i&&(n||null==e.enabled&&(i.enabled=!0))},{skip:["data","theme"]},e),Xa(e,(t,e)=>{null!=e._enabledFromTheme&&delete e._enabledFromTheme},{skip:["data","theme"]})}(t,h),h}class Zm extends Xf{constructor(t,e){super(t,e),this.padding=new np(40),this.axisGroup.zIndex=xu.AXIS_FOREGROUND_ZINDEX}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return xa(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),i=e.clone();return this.computeSeriesRect(e),yield this.computeCircle(e),this.axes.forEach(t=>t.update()),this.hoverRect=e,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:i,paddedRect:e,visible:!0},axes:[]}),e}))}updateAxes(t,e,i){var n,o;const r=this.axes.find(t=>t.direction===hc.X),s=this.axes.find(t=>t.direction===hc.Y);if(!(r instanceof Ry&&s instanceof Ry))return;const a=r.scale,l=null===(n=a.ticks)||void 0===n?void 0:n.call(a).map(t=>a.convert(t)),c=s.innerRadiusRatio;r.innerRadiusRatio=c,null===(o=r.computeRange)||void 0===o||o.call(r),r.gridLength=i,s.gridAngles=l,s.gridRange=r.range,s.range=[i,i*c],[r,s].forEach(i=>{i.translation.x=t,i.translation.y=e,i.calculateLayout()})}computeSeriesRect(t){const{seriesArea:{padding:e}}=this;t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),this.seriesRect=t,this.animationRect=t}computeCircle(t){return xa(this,void 0,void 0,(function*(){const e=this.series.filter(t=>t instanceof xh),i=this.axes.filter(t=>t instanceof Ry),n=(t,i,n)=>{this.updateAxes(t,i,n),e.forEach(e=>{e.centerX=t,e.centerY=i,e.radius=n});const o=e.filter(t=>t instanceof kh);if(o.length>1){const t=o.map(t=>{const e=t.getInnerRadius();return{series:t,innerRadius:e}}).sort((t,e)=>t.innerRadius-e.innerRadius);t[t.length-1].series.surroundingRadius=void 0;for(let e=0;e<t.length-1;e++)t[e].series.surroundingRadius=t[e+1].innerRadius}},o=t.x+t.width/2,r=t.y+t.height/2,s=Math.max(0,Math.min(t.width,t.height)/2);let a=s;n(o,r,a);const l=({hideWhenNecessary:l=!1}={})=>xa(this,void 0,void 0,(function*(){const c=[];for(const n of[...i,...e]){const e=yield n.computeLabelsBBox({hideWhenNecessary:l},t);e&&c.push(e)}if(0===c.length)return void n(o,r,s);const d=Sc.merge(c),u=this.refineCircle(d,a,t);n(u.centerX,u.centerY,u.radius),u.radius!==a&&(a=u.radius)}));return yield l(),yield l(),yield l(),yield l({hideWhenNecessary:!0}),yield l({hideWhenNecessary:!0}),{radius:a,centerX:o,centerY:r}}))}refineCircle(t,e,i){const n=-e,o=-e,r=e,s=e;let a=Math.max(0,n-t.x),l=Math.max(0,o-t.y),c=Math.max(0,t.x+t.width-r),d=Math.max(0,t.y+t.height-s);a=c=Math.max(a,c),l=d=Math.max(l,d);const u=i.width-a-c,h=i.height-l-d;let p=Math.min(u,h)/2;const f=.5*i.width/2,g=.5*i.height/2,v=Math.min(f,g);if(p<v){p=v;const t=a+c;if(2*p+(l+d)>i.height){const t=i.height-2*p;2*Math.min(l,d)>t?(l=t/2,d=t/2):l>d?l=t-d:d=t-l}if(2*p+t>i.width){const t=i.width-2*p;2*Math.min(a,c)>t?(a=t/2,c=t/2):a>c?a=t-c:c=t-a}}const y=a+2*p+c,m=l+2*p+d;return{centerX:i.x+(i.width-y)/2+a+p,centerY:i.y+(i.height-m)/2+l+p,radius:p}}}Zm.className="PolarChart",Zm.type="polar";const Jm=_a.create(!0,"opts");function Qm(t){if(Qg(t))return"cartesian";if(ev(t))return"polar";if(tv(t))return"hierarchy";throw new Error("AG Chart - unknown type of chart for options with type: "+t.type)}class tb{static licenseCheck(t){var e,i,n;this.licenseChecked||(this.licenseManager=null===(e=Ca.licenseManager)||void 0===e?void 0:e.call(Ca,t),null===(i=this.licenseManager)||void 0===i||i.setLicenseKey(this.licenseKey),null===(n=this.licenseManager)||void 0===n||n.validateLicense(),this.licenseChecked=!0)}static setLicenseKey(t){this.licenseKey=t}static create(t){var e,i,n;this.licenseCheck(t);const o=ib.createOrUpdate(t);return(null===(e=this.licenseManager)||void 0===e?void 0:e.isDisplayWatermark())&&(null===(i=Ca.injectWatermark)||void 0===i||i.call(Ca,null!==(n=t.document)&&void 0!==n?n:document,o.chart.element,this.licenseManager.getWatermarkMessage())),o}static update(t,e){if(!dg.isInstance(t))throw new Error(tb.INVALID_CHART_REF_MESSAGE);ib.createOrUpdate(e,t)}static updateDelta(t,e){if(!dg.isInstance(t))throw new Error(tb.INVALID_CHART_REF_MESSAGE);ib.updateUserDelta(t,e)}static download(t,e){if(!(t instanceof dg))throw new Error(tb.INVALID_CHART_REF_MESSAGE);ib.download(t,e)}static getImageDataURL(t,e){if(!(t instanceof dg))throw new Error(tb.INVALID_CHART_REF_MESSAGE);return ib.getImageDataURL(t,e)}}tb.INVALID_CHART_REF_MESSAGE="AG Charts - invalid chart reference passed",tb.licenseChecked=!1;class eb{static warnDeprecated(t){((t,e)=>{const i=[`Property [${t}] is deprecated.`,e].filter(t=>null!=t).join(" ");La.warnOnce(i)})("AgChart."+t,`Use AgCharts.${t} instead`)}static create(t){return eb.warnDeprecated("create"),tb.create(t)}static update(t,e){return eb.warnDeprecated("update"),tb.update(t,e)}static updateDelta(t,e){return eb.warnDeprecated("updateDelta"),tb.updateDelta(t,e)}static download(t,e){return eb.warnDeprecated("download"),tb.download(t,e)}static getImageDataURL(t,e){return eb.warnDeprecated("getImageDataURL"),tb.getImageDataURL(t,e)}}class ib{static initialiseModules(){ib.initialised||(Oa(Pg),Oa(Vg),Oa(sy),Oa(fy),Oa(my),Oa(Oy),Oa(Ay),Oa(Ty),Oa(wy),Zy(),ib.initialised=!0)}static createOrUpdate(t,e){var i,n;ib.initialiseModules(),Jm(">>> AgChartV2.createOrUpdate() user options",t);const{overrideDevicePixelRatio:o,document:r,window:s}=t,a=ma(t,["overrideDevicePixelRatio","document","window"]),l={overrideDevicePixelRatio:o,document:r,window:s},c=$m(a);let d=null==e?void 0:e.chart;null!=d&&Qm(a)===Qm(d.processedOptions)||(d=ib.createChartInstance(c,l,d)),null==e?e=new dg(d):e.chart=d,_a.check()&&"undefined"!=typeof window&&(null!==(i=(n=window).agChartInstances)&&void 0!==i||(n.agChartInstances={}),window.agChartInstances[d.id]=d);const u=d;u.queuedUserOptions.push(a);const h=()=>{const t=u.queuedUserOptions.indexOf(a);u.queuedUserOptions.splice(0,t)};return u.requestFactoryUpdate(()=>xa(this,void 0,void 0,(function*(){if(u.destroyed)return;const t=za(u.processedOptions,c);null!=t?(yield ib.updateDelta(u,t,a),h()):h()}))),e}static updateUserDelta(t,e){var i;const{chart:n,chart:{queuedUserOptions:o}}=t,r=null!==(i=o[o.length-1])&&void 0!==i?i:n.userOptions,s=Ka([r,e]);Jm(">>> AgChartV2.updateUserDelta() user delta",e),Jm("AgChartV2.updateUserDelta() - base options",r),ib.createOrUpdate(s,t)}static download(t,e){(()=>xa(this,void 0,void 0,(function*(){const i=yield ib.prepareResizedChart(t,e),{chart:n}=i;n.scene.download(null==e?void 0:e.fileName,null==e?void 0:e.fileFormat),i!==t&&i.destroy()})))().catch(t=>La.errorOnce(t))}static getImageDataURL(t,e){return xa(this,void 0,void 0,(function*(){const i=yield ib.prepareResizedChart(t,e),{chart:n}=i,o=n.scene.canvas.getDataURL(null==e?void 0:e.fileFormat);return i!==t&&i.destroy(),o}))}static prepareResizedChart(t,e){var i;return xa(this,void 0,void 0,(function*(){const{chart:n}=t;let{width:o,height:r}=null!=e?e:{};const s=n.width,a=n.height;if(void 0===o&&void 0===r||1===n.scene.canvas.pixelRatio&&s===o&&a===r)return t;null!=o||(o=s),null!=r||(r=a);const l=Object.assign(Object.assign({},n.userOptions),{container:document.createElement("div"),width:o,height:r,autoSize:!1,overrideDevicePixelRatio:1});Da()&&(null!==(i=l.animation)&&void 0!==i||(l.animation={}),l.animation.enabled=!1);const c=ib.createOrUpdate(l);return yield c.chart.waitForUpdate(),c}))}static createChartInstance(t,e,i){const n=null==i?void 0:i.destroy({keepTransferableResources:!0});if(Qg(t))return new cg(e,n);if(tv(t))return new Jy(e,n);if(ev(t))return new Zm(e,n);throw new Error("AG Charts - couldn't apply configuration, check options are correctly structured and series types are specified")}static updateDelta(t,e,i){var n;return xa(this,void 0,void 0,(function*(){null==e.type&&(e=Object.assign(Object.assign({},e),{type:null!==(n=t.processedOptions.type)&&void 0!==n?n:Jg(e)})),t.destroyed||(Jm("AgChartV2.updateDelta() - applying delta",e),function(t,e,i){var n,o,r,s;const a=Ka([null!==(n=t.processedOptions)&&void 0!==n?n:{},e],qm),l=function(t,e){let i=!1;const n=(n,o,r)=>{const s=Ea.filter(t=>t.type===n);for(const n of s){const s=(a=n,(t instanceof cg&&a.chartTypes.includes("cartesian")||t instanceof Zm&&a.chartTypes.includes("polar")||t instanceof Jy&&a.chartTypes.includes("hierarchy"))&&null!=e[n.optionsKey]);s!==t.isModuleEnabled(n)&&(i=!0,s?o(n):r(n))}var a};return n("root",e=>t.addModule(e),e=>t.removeModule(e)),n("legend",e=>t.addLegendModule(e),e=>t.removeLegendModule(e)),i}(t,a),c=["type","data","series","listeners","theme","legend.listeners"];if(Qg(e)||ev(e))c.push("axes");else if(!tv(e))throw new Error("AG Charts - couldn't apply configuration, check type of options and chart: "+e.type);e.listeners&&rb(t,e.listeners);sb(t,e,{skip:c});let d=!1,u=!1;e.series&&e.series.length>0&&(u=function(t,e){const i=e.series;if(!i)return!1;const n=["type","direction","xKey","yKey","sizeKey","angleKey","stacked","stackGroup"];let o=t.series.length===i.length;for(let e=0;e<t.series.length&&o;e++)for(const r of n)o&&(o=t.series[e][r]===i[e][r]);if(o)return t.series.forEach((e,n)=>{var o,r,s,a;const l=za(null!==(s=null===(r=null===(o=t.processedOptions)||void 0===o?void 0:o.series)||void 0===r?void 0:r[n])&&void 0!==s?s:{},null!==(a=i[n])&&void 0!==a?a:{});l&&(Jm("AgChartV2.applySeries() - applying series diff idx "+n,l),ab(e,l,{path:`series[${n}]`,index:n}),e.markNodeDataDirty())}),!1;return Jm("AgChartV2.applySeries() - creating new series instances"),t.series=function(t,e){var i;const n=[],o=t.getModuleContext();let r=0;for(const t of null!=e?e:[]){const e=`series[${r++}]`,s=null!==(i=t.type)&&void 0!==i?i:"unknown";if(Og(s)&&!Ag(s))continue;const a=Hy(s,o);nb(a,t),ab(a,t,{path:e,index:r}),n.push(a)}return n}(t,i),!0}(t,e),d=!0);if("axes"in a&&Array.isArray(a.axes)){(function(t,e,i){const n=e.axes;if(!n)return!1;if(!i&&t.axes.length===n.length&&t.axes.every((t,e)=>t.type===n[e].type)){const e=t.processedOptions;if(Qg(e))return t.axes.forEach((t,i)=>{var o,r;const s=za(null!==(r=null===(o=e.axes)||void 0===o?void 0:o[i])&&void 0!==r?r:{},n[i]);Jm("AgChartV2.applyAxes() - applying axis diff idx "+i,s);sb(t,s,{path:`axes[${i}]`,skip:["axes[].type"]})}),!0}return t.axes=function(t,e){const i=[],n=["axes[].type"],o=t.getModuleContext();let r=0;for(const t of null!=e?e:[]){const e=bg(t.type,o),s=`axes[${r++}]`;ob(e,t),sb(e,t,{path:s,skip:n}),i.push(e)}return i}(t,n),!0})(t,a,u)&&(d=!0)}const h=e.series,p=!!e.data||(null==h?void 0:h.some(t=>null!=t.data)),f=kg,g=Object.values(f).some(t=>null!=e[t]),v=null!=e.title&&null!=e.subtitle;d=d||p||g||v,e.data&&(t.data=e.data);(null===(o=e.legend)||void 0===o?void 0:o.listeners)&&Object.assign(t.legend.listeners,null!==(r=e.legend.listeners)&&void 0!==r?r:{});e.listeners&&t.updateAllSeriesListeners();t.processedOptions=a,t.userOptions=Ka([null!==(s=t.userOptions)&&void 0!==s?s:{},i],qm);const y=d||l?Kp.PROCESS_DATA:Kp.PERFORM_LAYOUT;Jm("AgChartV2.applyChartOptions() - update type",Kp[y]),t.update(y,{forceNodeDataRefresh:d,newAnimationBatch:!0})}(t,e,i))}))}}function nb(t,e){const i=Ea.filter(t=>"series-option"===t.type);for(const n of i){const i=n.seriesTypes;n.optionsKey in e&&i.includes(t.type)&&t.getModuleMap().addModule(n)}}function ob(t,e){let i=!1;const n=Ea.filter(t=>"axis-option"===t.type);for(const o of n){const n=null!=e[o.optionsKey],r=t.getModuleMap();n!==r.isModuleEnabled(o)&&(i=!0,n?r.addModule(o):r.removeModule(o))}return i}function rb(t,e){t.clearEventListeners();const i=Object.entries(null!=e?e:{});for(const[e,n]of i)"function"==typeof n&&t.addEventListener(e,n)}function sb(t,e,{skip:i,path:n}={}){return Ya(t,e,Object.assign(Object.assign(Object.assign({},Ph()),{skip:i}),n?{path:n}:{}))}function ab(t,e,{path:i,index:n}={}){var o,r;const s=["series[].listeners","series[].seriesGrouping"],a=Ph(),l=null!==(o=a.constructors)&&void 0!==o?o:{},c={constructors:Object.assign(Object.assign({},l),{title:"pie"===t.type?Dh:l.title})},d=Ya(t,e,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a),c),{skip:["series[].type",...null!=s?s:[]]}),i?{path:i}:{}),{idx:null!=n?n:-1}));null!=(null==e?void 0:e.listeners)&&rb(t,e.listeners);const{seriesGrouping:u}=e;return"seriesGrouping"in(null!=e?e:{})&&(t.seriesGrouping=u?Object.freeze(Object.assign(Object.assign({},null!==(r=t.seriesGrouping)&&void 0!==r?r:{}),u)):u),d}ib.initialised=!1;const lb=Object.entries(Hm).reduce((t,[e,i])=>(t[e]=i(),t),{});var cb=Object.freeze({__proto__:null,themes:lb,getChartTheme:Ym,ChartTheme:om,EXTENDS_CHART_DEFAULTS:nv,EXTENDS_LEGEND_DEFAULTS:ov,EXTENDS_LEGEND_ITEM_DEFAULTS:rv,EXTENDS_LEGEND_ITEM_MARKER_DEFAULTS:sv,EXTENDS_AXES_DEFAULTS:av,EXTENDS_AXES_LABEL_DEFAULTS:lv,EXTENDS_AXES_LINE_DEFAULTS:cv,EXTENDS_AXES_TICK_DEFAULTS:dv,EXTENDS_AXES_GRID_LINE_DEFAULTS:uv,EXTENDS_SERIES_DEFAULTS:hv,EXTENDS_CARTESIAN_MARKER_DEFAULTS:pv,OVERRIDE_SERIES_LABEL_DEFAULTS:fv,DEFAULT_FONT_FAMILY:gv,DEFAULT_LABEL_COLOUR:vv,DEFAULT_INVERTED_LABEL_COLOUR:yv,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:mv,DEFAULT_MUTED_LABEL_COLOUR:bv,DEFAULT_AXIS_GRID_COLOUR:Sv,DEFAULT_AXIS_LINE_COLOUR:xv,DEFAULT_CROSS_LINES_COLOUR:Cv,DEFAULT_BACKGROUND_COLOUR:wv,DEFAULT_SHADOW_COLOUR:Ev,DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS:Ov,DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS:Dv,DEFAULT_WATERFALL_SERIES_TOTAL_COLOURS:Av,DEFAULT_WATERFALL_SERIES_CONNECTOR_LINE_STROKE:Tv,DEFAULT_POLAR_SERIES_STROKE:kv,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:Mv,DEFAULT_HIERARCHY_FILLS:Rv,DEFAULT_HIERARCHY_STROKES:Pv,FONT_SIZE:zg,BOLD:"bold",NORMAL:"normal",BOTTOM:"bottom",CARTESIAN_AXIS_POSITIONS:Ug,CARTESIAN_AXIS_TYPES:Hg,POLAR_AXIS_TYPES:Kg,CIRCLE:"circle"}),db=["area","bar","column","histogram","line","pie","scatter","bubble"],ub=new Set(["bar","groupedBar","stackedBar","normalizedBar"]);function hb(t){return ub.has(t)}var pb=new Set(["stackedColumn","normalizedColumn","stackedBar","normalizedBar"]);function fb(t){return pb.has(t)}function gb(t){switch(t){case"bar":case"groupedBar":case"stackedBar":case"normalizedBar":return"bar";case"column":case"groupedColumn":case"stackedColumn":case"normalizedColumn":return"bar";case"line":return"line";case"area":case"stackedArea":case"normalizedArea":return"area";case"bubble":return"bubble";case"scatter":return"scatter";case"histogram":return"histogram";case"pie":case"doughnut":return"pie";default:return"cartesian"}}var vb=["number","category","grouped-category","log","time"];var yb=function(){return(yb=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function mb(t,e){var i,n,o,r,s,a,l,d=t.chartOptionsToRestore,u=t.chartPaletteToRestore,h=t.chartThemeToRestore,p=function(t){var e=t.getChartThemeName(),i=t.getChartThemes();c.includes(i,e)||(e=i[0]);return e}(t),f=bb(p),g=f?{baseTheme:p}:null!==(i=xb(t,p))&&void 0!==i?i:{},v=t.getGridOptionsChartThemeOverrides(),y=t.apiChartThemeOverrides,m="pie"===gb(t.chartType)?"pie":"cartesian",b=t.crossFiltering?function(t,e,i){var n;return(n={})[i]={tooltip:{delay:500},legend:{listeners:{legendItemClick:function(e){t.getChart().series.forEach((function(t){t.toggleSeriesItem(e.itemId,e.enabled),t.toggleSeriesItem("".concat(e.itemId,"-filtered-out"),e.enabled)}))}}},listeners:{click:function(t){return e.crossFilterCallback(t,!0)}},series:{}},n}(e,t,m):void 0,S=yb({},null!=d?d:{}),x=[f?(n=t,o=function(){var t=function(t){return!!t&&Object.keys(t).some((function(e){return c.get(t[e],"title.enabled",!1)}))};return t(v)||t(y)}(),r=n.getExtraPaddingDirections(),{common:{axes:Sb,padding:{top:!o&&r.includes("top")?40:20,right:r.includes("right")?30:20,bottom:r.includes("bottom")?40:20,left:r.includes("left")?30:20}},pie:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}}}):void 0,b,v,y,S].filter((function(t){return!!t})).reduce((function(t,e){return{baseTheme:t,overrides:e}}),g);if(u&&p===h){var C=cb.getChartTheme(g).palette;a=C,(l=function(t,e){return t.length===e.length&&t.every((function(t,i){return t===e[i]}))})((s=u).fills,a.fills)&&l(s.strokes,a.strokes)||(x.palette=u)}return x}function bb(t){return c.includes(Object.keys(cb.themes),t)}var Sb=vb.reduce((function(t,e){var i;return yb(yb({},t),((i={})[e]={title:{_enabledFromTheme:!0}},i))}),{});function xb(t,e){var i=t.customChartThemes,n=i&&i[e];return n||console.warn("AG Grid: no stock theme exists with the name '".concat(e,"' and no ")+"custom chart theme with that name was supplied to 'customChartThemes'"),n}var Cb=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},wb=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},Eb=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ob=function(t){return function(e){return void 0===e||t(e)}},Db=function(t){return"string"==typeof t},Ab=function(t){return"boolean"==typeof t},Tb=function(t){return"object"==typeof t},kb=function(t,e){return function(i){return"AG Grid - unable to update chart as invalid params supplied:  `".concat(t,": ").concat(i,"`, expected ").concat(e,".")}},Mb=function(){function t(){}return t.validateChartParams=function(e){switch(e.type){case"rangeChartUpdate":return t.validateUpdateRangeChartParams(e);case"pivotChartUpdate":return t.validateUpdatePivotChartParams(e);case"crossFilterChartUpdate":return t.validateUpdateCrossFilterChartParams(e);default:return console.warn("AG Grid - Invalid value supplied for 'type': ".concat(e.type,". It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.")),!1}},t.validateUpdateRangeChartParams=function(e){var i=wb(wb(wb([],Cb(t.commonValidations),!1),Cb(t.cellRangeValidations),!1),[{property:"seriesChartTypes",validationFn:function(t){return void 0===t||Array.isArray(t)&&t.every(Tb)},warnMessage:kb("seriesChartTypes","Array of SeriesChartType")}],!1);return t.validateProperties(e,i,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc","seriesChartTypes"],"UpdateRangeChartParams")},t.validateUpdatePivotChartParams=function(e){var i=wb([],Cb(t.commonValidations),!1);return t.validateProperties(e,i,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart"],"UpdatePivotChartParams")},t.validateUpdateCrossFilterChartParams=function(e){var i=wb(wb([],Cb(t.commonValidations),!1),Cb(t.cellRangeValidations),!1);return t.validateProperties(e,i,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc"],"UpdateCrossFilterChartParams")},t.validateProperties=function(t,e,i,n){var o,r;try{for(var s=Eb(e),a=s.next();!a.done;a=s.next()){var l=a.value,c=l.property,d=l.validationFn,u=l.warnMessage;if(c in t){var h=t[c];if(!d(h))return console.warn(u(h)),!1}}}catch(t){o={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}for(var c in t)if(!i.includes(c))return console.warn("AG Grid - Unexpected property supplied. ".concat(n," does not contain: `").concat(c,"`.")),!1;return!0},t.validChartTypes=["column","groupedColumn","stackedColumn","normalizedColumn","bar","groupedBar","stackedBar","normalizedBar","line","scatter","bubble","pie","doughnut","area","stackedArea","normalizedArea","histogram","columnLineCombo","areaColumnCombo","customCombo"],t.validateChartType=Ob((function(e){return t.validChartTypes.includes(e)})),t.validateAgChartThemeOverrides=Ob((function(t){return"object"==typeof t})),t.validateChartParamsCellRange=Ob((function(t){return"object"==typeof t})),t.validateAggFunc=Ob((function(t){return"string"==typeof t||"function"==typeof t})),t.commonValidations=[{property:"chartId",validationFn:Db,warnMessage:kb("chartId","string")},{property:"chartType",validationFn:t.validateChartType,warnMessage:kb("chartType",t.validChartTypes.join(", "))},{property:"chartThemeName",validationFn:Db,warnMessage:kb("chartThemeName","string")},{property:"chartThemeOverrides",validationFn:t.validateAgChartThemeOverrides,warnMessage:kb("chartThemeOverrides","AgChartThemeOverrides")},{property:"unlinkChart",validationFn:Ab,warnMessage:kb("unlinkChart","boolean")}],t.cellRangeValidations=[{property:"cellRange",validationFn:t.validateChartParamsCellRange,warnMessage:kb("cellRange","ChartParamsCellRange")},{property:"suppressChartRanges",validationFn:Ab,warnMessage:kb("suppressChartRanges","boolean")},{property:"aggFunc",validationFn:t.validateAggFunc,warnMessage:kb("aggFunc","string or IAggFunc")}],t}(),Rb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Pb=function(){return(Pb=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Nb=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Lb=["ag-default","ag-material","ag-sheets","ag-polychroma","ag-vivid"],Ib=function(t){function e(e){var i=t.call(this)||this;return i.model=e,i}return Rb(e,t),e.prototype.init=function(){var t=this;this.setChartRange(),this.addManagedListener(this.eventService,l.EVENT_RANGE_SELECTION_CHANGED,(function(e){e.id&&e.id===t.model.chartId&&t.updateForRangeChange()})),this.model.unlinked&&this.rangeService&&this.rangeService.setCellRanges([]),this.addManagedListener(this.eventService,l.EVENT_COLUMN_MOVED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PINNED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,l.EVENT_COLUMN_VISIBLE,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,l.EVENT_COLUMN_ROW_GROUP_CHANGED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,l.EVENT_MODEL_UPDATED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,l.EVENT_CELL_VALUE_CHANGED,this.updateForDataChange.bind(this))},e.prototype.update=function(t){var e,i,n,o,r,s,a;if(!this.validUpdateType(t)||!Mb.validateChartParams(t))return!1;var l=t.chartId,c=t.chartType,d=t.chartThemeName,u=t.unlinkChart,h={chartId:l,pivotChart:this.model.pivotChart,chartType:null!=c?c:this.model.chartType,chartThemeName:null!=d?d:this.model.chartThemeName,unlinkChart:null!=u?u:this.model.unlinked,cellRange:this.model.suppliedCellRange,aggFunc:this.model.aggFunc,seriesChartTypes:void 0,suppressChartRanges:!1,crossFiltering:!1},p=Pb({},h);switch(t.type){case"rangeChartUpdate":p.cellRange=null!==(e=this.createCellRange(t))&&void 0!==e?e:this.model.suppliedCellRange,p.aggFunc=null!==(i=t.aggFunc)&&void 0!==i?i:this.model.aggFunc,p.seriesChartTypes=t.seriesChartTypes,p.suppressChartRanges=null!==(n=t.suppressChartRanges)&&void 0!==n?n:this.model.suppressChartRanges;break;case"crossFilterChartUpdate":p.cellRange=null!==(o=this.createCellRange(t))&&void 0!==o?o:this.model.suppliedCellRange,p.aggFunc=null!==(r=t.aggFunc)&&void 0!==r?r:this.model.aggFunc,p.crossFiltering=!0,p.suppressChartRanges=null!==(s=t.suppressChartRanges)&&void 0!==s?s:this.model.suppressChartRanges}return this.model.updateModel(p),p.unlinkChart||p.suppressChartRanges?null===(a=this.rangeService)||void 0===a||a.setCellRanges([]):this.setChartRange(),!0},e.prototype.updateForGridChange=function(){this.model.unlinked||(this.model.updateCellRanges(),this.model.updateData(),this.setChartRange())},e.prototype.updateForDataChange=function(){this.model.unlinked||(this.model.updateData(),this.raiseChartModelUpdateEvent())},e.prototype.updateForRangeChange=function(){this.updateForGridChange(),this.raiseChartRangeSelectionChangedEvent()},e.prototype.updateForPanelChange=function(t){this.model.updateCellRanges(t),this.model.updateData(),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()},e.prototype.getChartUpdateParams=function(t){var e=this.getSelectedValueColState().map((function(t){return{colId:t.colId,displayName:t.displayName}})),i=this.getChartData(),n=this.getSelectedDimension();return{data:i,grouping:this.isGrouping(),category:{id:n.colId,name:n.displayName,chartDataType:this.model.getChartDataType(n.colId)},fields:e,chartId:this.getChartId(),getCrossFilteringContext:function(){return{lastSelectedChartId:"xxx"}},seriesChartTypes:this.getSeriesChartTypes(),updatedOverrides:t}},e.prototype.getChartModel=function(){var t=this.model.pivotChart?"pivot":"range",e=this.isComboChart()?this.model.comboChartModel.seriesChartTypes:void 0;return{modelType:t,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides(),chartPalette:this.chartProxy.getChartPalette(),cellRange:this.getCellRangeParams(),suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:e}},e.prototype.getChartId=function(){return this.model.chartId},e.prototype.getChartData=function(){return this.model.chartData},e.prototype.getChartType=function(){return this.model.chartType},e.prototype.setChartType=function(t){this.model.chartType=t,this.model.comboChartModel.updateSeriesChartTypes(),this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()},e.prototype.setChartThemeName=function(t,e){this.model.chartThemeName=t,e||(this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent())},e.prototype.getChartThemeName=function(){return this.model.chartThemeName},e.prototype.isPivotChart=function(){return this.model.pivotChart},e.prototype.isPivotMode=function(){return this.model.isPivotMode()},e.prototype.isGrouping=function(){return this.model.isGrouping()},e.prototype.isCrossFilterChart=function(){return this.model.crossFiltering},e.prototype.getThemes=function(){return this.gridOptionsService.get("chartThemes")||Lb},e.prototype.getPalettes=function(){var t=this;return this.getThemes().map((function(e){var i=bb(e)?e:t.chartProxy.lookupCustomChartTheme(e);return cb.getChartTheme(i).palette}))},e.prototype.getValueColState=function(){return this.model.valueColState.map(this.displayNameMapper.bind(this))},e.prototype.getSelectedValueColState=function(){return this.getValueColState().filter((function(t){return t.selected}))},e.prototype.getSelectedDimension=function(){return this.model.getSelectedDimension()},e.prototype.displayNameMapper=function(t){var e=this.model.columnNames[t.colId];return t.displayName=e?e.join(" - "):this.model.getColDisplayName(t.column),t},e.prototype.getColStateForMenu=function(){return{dimensionCols:this.model.dimensionColState,valueCols:this.getValueColState()}},e.prototype.setChartRange=function(t){void 0===t&&(t=!1),!this.rangeService||this.model.suppressChartRanges||this.model.unlinked||this.rangeService.setCellRanges(this.getCellRanges()),t||this.raiseChartModelUpdateEvent()},e.prototype.detachChartRange=function(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeService&&this.rangeService.setCellRanges([]):this.updateForGridChange()},e.prototype.setChartProxy=function(t){this.chartProxy=t},e.prototype.getChartProxy=function(){return this.chartProxy},e.prototype.isActiveXYChart=function(){return c.includes(["scatter","bubble"],this.getChartType())},e.prototype.isChartLinked=function(){return!this.model.unlinked},e.prototype.customComboExists=function(){var t=this.model.comboChartModel.savedCustomSeriesChartTypes;return t&&t.length>0},e.prototype.getSeriesChartTypes=function(){return this.model.comboChartModel.seriesChartTypes},e.prototype.isComboChart=function(){return this.model.isComboChart()},e.prototype.updateSeriesChartType=function(t,i,n){var o=this.model.comboChartModel.seriesChartTypes.find((function(e){return e.colId===t}));if(o){var r="customCombo"!==this.model.chartType;r&&(this.model.chartType="customCombo");var s=o.chartType;null!=i&&(o.chartType=i),null!=n&&(o.secondaryAxis=n),this.model.comboChartModel.savedCustomSeriesChartTypes=this.model.comboChartModel.seriesChartTypes,this.model.comboChartModel.updateSeriesChartTypes(),this.updateForDataChange(),r&&this.dispatchEvent({type:e.EVENT_CHART_TYPE_CHANGED}),s!==i&&this.dispatchEvent({type:e.EVENT_CHART_SERIES_CHART_TYPE_CHANGED}),this.raiseChartOptionsChangedEvent()}},e.prototype.getActiveSeriesChartTypes=function(){var t=this.getSelectedValueColState().map((function(t){return t.colId}));return this.getSeriesChartTypes().filter((function(e){return t.includes(e.colId)}))},e.prototype.getChartSeriesTypes=function(){return this.isComboChart()?["line","column","area"]:[gb(this.getChartType())]},e.prototype.getCellRanges=function(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter((function(t){return t}))},e.prototype.createCellRange=function(t){var e;return t.cellRange&&(null===(e=this.rangeService)||void 0===e?void 0:e.createCellRangeFromCellRangeParams(t.cellRange))},e.prototype.validUpdateType=function(t){var e,i=this;if(!t.type)return console.warn("AG Grid - Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'."),!1;var n={"Range Chart":function(){return!i.isPivotChart()&&!i.isCrossFilterChart()},"Pivot Chart":function(){return i.isPivotChart()},"Cross Filter Chart":function(){return i.isCrossFilterChart()}},o=null!==(e=Object.keys(n).find((function(t){return n[t]()})))&&void 0!==e?e:"Range Chart",r=t.type==="".concat(o[0].toLowerCase()).concat(o.slice(1).replace(/ /g,""),"Update");return r||console.warn("AG Grid - Unable to update chart as a '".concat(t.type,"' update type is not permitted on a ").concat(o,".")),r},e.prototype.getCellRangeParams=function(){var t=this.getCellRanges(),e=t[0],i=e&&e.startRow||null,n=e&&e.endRow||null;return{rowStartIndex:i&&i.rowIndex,rowStartPinned:i&&i.rowPinned,rowEndIndex:n&&n.rowIndex,rowEndPinned:n&&n.rowPinned,columns:t.reduce((function(t,e){return t.concat(e.columns.map((function(t){return t.getId()})))}),[])}},e.prototype.raiseChartModelUpdateEvent=function(){var t={type:e.EVENT_CHART_MODEL_UPDATE};this.dispatchEvent(t)},e.prototype.raiseChartUpdatedEvent=function(){var t={type:e.EVENT_CHART_UPDATED};this.dispatchEvent(t)},e.prototype.raiseChartApiUpdateEvent=function(){var t={type:e.EVENT_CHART_API_UPDATE};this.dispatchEvent(t)},e.prototype.raiseChartOptionsChangedEvent=function(){var t=this.getChartModel(),e=t.chartId,i=t.chartType,n={type:l.EVENT_CHART_OPTIONS_CHANGED,chartId:e,chartType:i,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides()};this.eventService.dispatchEvent(n)},e.prototype.raiseChartRangeSelectionChangedEvent=function(){var t={type:l.EVENT_CHART_RANGE_SELECTION_CHANGED,id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams()};this.eventService.dispatchEvent(t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.rangeService&&this.rangeService.setCellRanges([])},e.EVENT_CHART_UPDATED="chartUpdated",e.EVENT_CHART_API_UPDATE="chartApiUpdate",e.EVENT_CHART_MODEL_UPDATE="chartModelUpdate",e.EVENT_CHART_TYPE_CHANGED="chartTypeChanged",e.EVENT_CHART_SERIES_CHART_TYPE_CHANGED="chartSeriesChartTypeChanged",Nb([n("rangeService")],e.prototype,"rangeService",void 0),Nb([r],e.prototype,"init",null),e}(i),Fb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_b=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Gb=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},Bb=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},Vb=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jb={groups:[{type:"categories",isOpen:!0},{type:"series",isOpen:!0},{type:"seriesChartType",isOpen:!0}]},Wb=function(t){function e(i,n){var o=t.call(this,e.TEMPLATE)||this;return o.chartController=i,o.chartOptionsService=n,o.columnComps=new Map,o}return Fb(e,t),e.prototype.init=function(){this.updatePanels(),this.addManagedListener(this.chartController,Ib.EVENT_CHART_MODEL_UPDATE,this.updatePanels.bind(this)),this.addManagedListener(this.chartController,Ib.EVENT_CHART_API_UPDATE,this.updatePanels.bind(this)),this.createAutoScrollService()},e.prototype.destroy=function(){this.clearComponents(),t.prototype.destroy.call(this)},e.prototype.updatePanels=function(){var t,e,i=this,n=this.chartType,o=this.chartController.getColStateForMenu(),r=o.dimensionCols,s=o.valueCols,a=r.map((function(t){return t.colId})).concat(s.map((function(t){return t.colId})));this.chartType=this.chartController.getChartType();var l=this.getGroupExpandedState();if(c.areEqual(c.keys(this.columnComps),a)&&this.chartType===n){if(Bb(Bb([],Gb(r),!1),Gb(s),!1).forEach((function(t){i.columnComps.get(t.colId).setValue(t.selected,!0)})),this.chartController.isActiveXYChart()){var d=this.generateGetSeriesLabel();s.forEach((function(t){i.columnComps.get(t.colId).setLabel(d(t))}))}c.removeFromParent(this.getGui().querySelector("#seriesChartTypeGroup")),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp);var u=null===(t=this.getDataPanelDef().groups)||void 0===t?void 0:t.reduce((function(t,e,i){return"seriesChartType"===e.type?i:t}),-1);-1!==u&&this.createSeriesChartTypeGroup(s,u)}else this.clearComponents(),null===(e=this.getDataPanelDef().groups)||void 0===e||e.forEach((function(t){var e=t.type;"categories"===e?i.createCategoriesGroup(r):"series"===e?i.createSeriesGroup(s):"seriesChartType"===e?i.createSeriesChartTypeGroup(s):console.warn("AG Grid: invalid charts data panel group name supplied: '".concat(e,"'"))}));this.restoreGroupExpandedState(l)},e.prototype.getGroupExpandedState=function(){var t=this;return[{groupType:"categories",comp:this.categoriesGroupComp},{groupType:"series",comp:this.seriesGroupComp},{groupType:"seriesChartType",comp:this.seriesChartTypeGroupComp}].map((function(e){var i,n,o=e.groupType,r=e.comp,s=Boolean(null===(n=null===(i=t.getDataPanelDef().groups)||void 0===i?void 0:i.find((function(t){return t.type===o})))||void 0===n?void 0:n.isOpen);return r?r.isExpanded():s}))},e.prototype.restoreGroupExpandedState=function(t){[this.categoriesGroupComp,this.seriesGroupComp,this.seriesChartTypeGroupComp].forEach((function(e,i){e&&e.toggleGroupExpand(t[i])}))},e.prototype.createAutoScrollService=function(){var t=this.getGui();this.autoScrollService=new $({scrollContainer:t,scrollAxis:"y",getVerticalPosition:function(){return t.scrollTop},setVerticalPosition:function(e){return t.scrollTop=e}})},e.prototype.createComponent=function(t,e){var i=document.createElement("div");return i.id=e,i.className="ag-chart-data-section",i.appendChild(t.getGui()),i},e.prototype.addComponent=function(t,e,i){var n=this.createComponent(e,i);t.appendChild(n)},e.prototype.addComponentAtIndex=function(t,e,i,n){var o=this.createComponent(e,i);t.insertBefore(o,t.children[n])},e.prototype.addChangeListener=function(t,e){var i=this;this.addManagedListener(t,l.EVENT_FIELD_VALUE_CHANGED,(function(){e.selected=t.getValue(),i.chartController.updateForPanelChange(e)}))},e.prototype.createCategoriesGroup=function(t){var e=this;this.categoriesGroupComp=this.createBean(new q({title:this.getCategoryGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));var i="chartDimension".concat(this.getCompId());t.forEach((function(t){var n=e.categoriesGroupComp.createManagedBean(new Z);n.setLabel(c.escapeString(t.displayName)),n.setValue(t.selected),n.setInputName(i),e.addChangeListener(n,t),e.categoriesGroupComp.addItem(n),e.columnComps.set(t.colId,n)})),this.addComponent(this.getGui(),this.categoriesGroupComp,"categoriesGroup")},e.prototype.createSeriesGroup=function(t){var e=this;if(this.seriesGroupComp=this.createManagedBean(new q({title:this.getSeriesGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"})),this.chartController.isActiveXYChart()){var i=this.seriesGroupComp.createManagedBean(new J);i.setLabel(this.chartTranslationService.translate("paired")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth("flex").setValue(this.chartOptionsService.getPairedMode()).onValueChange((function(t){e.chartOptionsService.setPairedMode(!!t),e.chartController.updateForGridChange()})),this.seriesGroupComp.addItem(i)}var n=this.generateGetSeriesLabel();t.forEach((function(t){var i=e.seriesGroupComp.createManagedBean(new Q);i.addCssClass("ag-data-select-checkbox");var o=n(t);i.setLabel(o),i.setValue(t.selected),e.addChangeListener(i,t),e.seriesGroupComp.addItem(i),e.columnComps.set(t.colId,i),e.addDragHandle(i,t)}));var o=this.getGui(),r=this.seriesGroupComp.getGui();this.addComponent(o,this.seriesGroupComp,"seriesGroup");var s={getIconName:function(){return m.ICON_MOVE},getContainer:function(){return r},onDragging:function(t){return e.onDragging(t)},onDragLeave:function(){return e.onDragLeave()},isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(s),this.addDestroyFunc((function(){return e.dragAndDropService.removeDropTarget(s)}))},e.prototype.createSeriesChartTypeGroup=function(t,e){var i=this;if(this.chartController.isComboChart()){this.seriesChartTypeGroupComp=this.createManagedBean(new q({title:this.chartTranslationService.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));var n=this.chartController.getSeriesChartTypes();t.forEach((function(t){if(t.selected){var e=n.filter((function(e){return e.colId===t.colId}))[0];if(e){var o=i.seriesChartTypeGroupComp.createManagedBean(new q({title:t.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),r=i.seriesChartTypeGroupComp.createManagedBean(new Q).setLabel(i.chartTranslationService.translate("secondaryAxis")).setLabelWidth("flex").setDisabled(["groupedColumn","stackedColumn","stackedArea"].includes(e.chartType)).setValue(!!e.secondaryAxis).onValueChange((function(e){return i.chartController.updateSeriesChartType(t.colId,void 0,e)}));o.addItem(r);var s=function(t,e){return i.chartTranslationService.translate(t,e)},a=[{value:"line",text:s("line","Line")},{value:"area",text:s("area","Area")},{value:"stackedArea",text:s("stackedArea","StackedArea")},{value:"groupedColumn",text:s("groupedColumn","Grouped Column")},{value:"stackedColumn",text:s("stackedColumn","Stacked Column")}],l=o.createManagedBean(new _);l.setLabelAlignment("left").setLabelWidth("flex").addOptions(a).setValue(e.chartType).onValueChange((function(e){return i.chartController.updateSeriesChartType(t.colId,e)})),o.addItem(l),i.seriesChartTypeGroupComp.addItem(o)}}})),void 0===e?this.addComponent(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup"):this.addComponentAtIndex(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup",e)}},e.prototype.addDragHandle=function(t,e){var i=this,n=c.createIconNoSpan("columnDrag",this.gridOptionsService);n.classList.add("ag-drag-handle","ag-chart-data-column-drag-handle"),t.getGui().insertAdjacentElement("beforeend",n);var o={type:p.ChartPanel,eElement:n,dragItemName:e.displayName,getDragItem:function(){return{columns:[e.column]}},onDragStopped:function(){return i.onDragStop()}};this.dragAndDropService.addDragSource(o,!0),this.addDestroyFunc((function(){return i.dragAndDropService.removeDragSource(o)}))},e.prototype.generateGetSeriesLabel=function(){if(!this.chartController.isActiveXYChart())return function(t){return c.escapeString(t.displayName)};var t="bubble"===this.chartType,e=this.isInPairedMode(),i=0,n=new Map;return n.set(0,"X"),n.set(1,"Y"),n.set(2,"size"),function(o){var r,s=c.escapeString(o.displayName);return o.selected?(r=e?n.get(i%(t?3:2)):0===i?"X":t&&i%2==0?"size":"Y",i++,"".concat(s," (").concat(r,")")):s}},e.prototype.getCategoryGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"labels":"categories")},e.prototype.getSeriesGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"xyValues":"series")},e.prototype.getDataPanelDef=function(){var t,e=null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.dataPanel;return e||jb},e.prototype.isInPairedMode=function(){return this.chartController.isActiveXYChart()&&this.chartOptionsService.getSeriesOption("paired","scatter")},e.prototype.clearComponents=function(){c.clearElement(this.getGui()),this.categoriesGroupComp=this.destroyBean(this.categoriesGroupComp),this.seriesGroupComp=this.destroyBean(this.seriesGroupComp),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),this.columnComps.clear()},e.prototype.onDragging=function(t){var e=this.checkHoveredItem(t);if(e){this.lastDraggedColumn=t.dragItem.columns[0];var i=e.comp,n=e.position,o=this.lastHoveredItem||{},r=o.comp,s=o.position;if(i!==r||n!==s)this.autoScrollService.check(t.event),this.clearHoveredItems(),this.lastHoveredItem={comp:i,position:n},i.getGui().classList.add("ag-list-item-hovered","ag-item-highlight-".concat(n))}},e.prototype.checkHoveredItem=function(t){var e,i;if(c.missing(t.vDirection))return null;var n=t.event;try{for(var o=Vb(this.columnComps.values()),r=o.next();!r.done;r=o.next()){var s=r.value,a=s.getGui();if(a.querySelector(".ag-chart-data-column-drag-handle")){var l=a.getBoundingClientRect();if(n.clientY>=l.top&&n.clientY<=l.bottom){var d=a.clientHeight;return{comp:s,position:n.clientY>l.top+d/2?"bottom":"top"}}}}}catch(t){e={error:t}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}return null},e.prototype.onDragLeave=function(){this.clearHoveredItems()},e.prototype.onDragStop=function(){var t=this;if(this.lastHoveredItem){var e=this.chartController.getColStateForMenu(),i=e.dimensionCols,n=e.valueCols,o=Bb(Bb([],Gb(i),!1),Gb(n),!1).find((function(e){return e.column===t.lastDraggedColumn}));if(o){var r=Array.from(this.columnComps.values()).indexOf(this.lastHoveredItem.comp);"bottom"===this.lastHoveredItem.position&&r++,o.order=r,this.chartController.updateForPanelChange(o)}}this.clearHoveredItems(),this.lastDraggedColumn=void 0,this.autoScrollService.ensureCleared()},e.prototype.clearHoveredItems=function(){this.columnComps.forEach((function(t){t.getGui().classList.remove("ag-list-item-hovered","ag-item-highlight-top","ag-item-highlight-bottom")})),this.lastHoveredItem=void 0},e.prototype.isInterestedIn=function(t){return t===p.ChartPanel},e.TEMPLATE='<div class="ag-chart-data-wrapper ag-scrollable-container"></div>',_b([n("dragAndDropService")],e.prototype,"dragAndDropService",void 0),_b([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),_b([r],e.prototype,"init",null),e}(s),zb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ub=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Hb=function(t){function e(e){var i=t.call(this)||this;return i.activeComps=[],i.params=e,i}return zb(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{fontGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initGroup(),this.initFontFamilySelect(),this.initFontWeightStyleSelect(),this.initFontSizeSelect(),this.initFontColorPicker()},e.prototype.addCompToPanel=function(t){this.fontGroup.addItem(t),this.activeComps.push(t)},e.prototype.setEnabled=function(t){this.fontGroup.setEnabled(t)},e.prototype.initGroup=function(){var t=this;this.fontGroup.setTitle(this.params.name||this.chartTranslationService.translate("font")).setEnabled(this.params.enabled).hideEnabledCheckbox(!!this.params.suppressEnabledCheckbox).hideOpenCloseIcons(!0).onEnableChange((function(e){t.params.setEnabled&&t.params.setEnabled(e)}))},e.prototype.initFontFamilySelect=function(){var t=this,e=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],i=this.params.initialFont.family,n=e[0];if(i){var o=e.map((function(t){return t.toLowerCase()})).indexOf(i.toLowerCase());if(o>=0)n=e[o];else{var r=c.capitalise(i);e.push(r),n=r}}var s=e.sort().map((function(t){return{value:t,text:t}}));this.familySelect.addOptions(s).setInputWidth("flex").setValue("".concat(n)).onValueChange((function(e){return t.params.setFont({family:e})}))},e.prototype.initFontSizeSelect=function(){var t=this,e=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],i=this.params.initialFont.size;c.includes(e,i)||e.push(i);var n=e.sort((function(t,e){return t-e})).map((function(t){return{value:"".concat(t),text:"".concat(t)}}));this.sizeSelect.addOptions(n).setInputWidth("flex").setValue("".concat(i)).onValueChange((function(e){return t.params.setFont({size:parseInt(e,10)})})),this.sizeSelect.setLabel(this.chartTranslationService.translate("size"))},e.prototype.initFontWeightStyleSelect=function(){var t=this,e=this.params.initialFont,i=e.weight,n=void 0===i?"normal":i,o=e.style,r=void 0===o?"normal":o,s=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}],a=s.find((function(t){return t.weight===n&&t.style===r}));a||(a={name:"predefined",weight:n,style:r},s.unshift(a));var l=s.map((function(e){return{value:e.name,text:t.chartTranslationService.translate(e.name)}}));this.weightStyleSelect.addOptions(l).setInputWidth("flex").setValue(a.name).onValueChange((function(e){var i=s.find((function(t){return t.name===e}));t.params.setFont({weight:i.weight,style:i.style})}))},e.prototype.initFontColorPicker=function(){var t=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setInputWidth("flex").setValue("".concat(this.params.initialFont.color)).onValueChange((function(e){return t.params.setFont({color:e})}))},e.prototype.addItemToPanel=function(t){this.fontGroup.addItem(t),this.activeComps.push(t)},e.prototype.destroyActiveComps=function(){var t=this;this.activeComps.forEach((function(e){c.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActiveComps(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-font-panel">\n            <ag-group-component ref="fontGroup">\n                <ag-select ref="familySelect"></ag-select>\n                <ag-select ref="weightStyleSelect"></ag-select>\n                <div class="ag-charts-font-size-color">\n                    <ag-select ref="sizeSelect"></ag-select>\n                    <ag-color-picker ref="colorPicker"></ag-color-picker>\n                </div>\n            </ag-group-component>\n        </div>',Ub([o("fontGroup")],e.prototype,"fontGroup",void 0),Ub([o("familySelect")],e.prototype,"familySelect",void 0),Ub([o("weightStyleSelect")],e.prototype,"weightStyleSelect",void 0),Ub([o("sizeSelect")],e.prototype,"sizeSelect",void 0),Ub([o("colorPicker")],e.prototype,"colorPicker",void 0),Ub([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),Ub([r],e.prototype,"init",null),e}(s),Kb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yb=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Xb=function(t){function e(e){var i=e.chartOptionsService,n=e.isExpandedOnInit,o=void 0!==n&&n,r=t.call(this)||this;return r.activePanels=[],r.chartOptionsService=i,r.isExpandedOnInit=o,r}return Kb(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{legendGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initLegendGroup(),this.initLegendPosition(),this.initLegendPadding(),this.initLegendItems(),this.initLabelPanel()},e.prototype.initLegendGroup=function(){var t=this;this.legendGroup.setTitle(this.chartTranslationService.translate("legend")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("legend.enabled")||!1).toggleGroupExpand(this.isExpandedOnInit).onEnableChange((function(e){t.chartOptionsService.setChartOption("legend.enabled",e),t.legendGroup.toggleGroupExpand(!0)}))},e.prototype.initLegendPosition=function(){var t=this;this.legendPositionSelect.setLabel(this.chartTranslationService.translate("position")).setLabelWidth("flex").setInputWidth("flex").addOptions(["top","right","bottom","left"].map((function(e){return{value:e,text:t.chartTranslationService.translate(e)}}))).setValue(this.chartOptionsService.getChartOption("legend.position")).onValueChange((function(e){return t.chartOptionsService.setChartOption("legend.position",e)}))},e.prototype.initLegendPadding=function(){var t=this,e=this.chartOptionsService.getChartOption("legend.spacing");this.legendPaddingSlider.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(LS(e,200)).setValue("".concat(e)).setTextFieldWidth(45).onValueChange((function(e){return t.chartOptionsService.setChartOption("legend.spacing",e)}))},e.prototype.initLegendItems=function(){var t=this,e=function(e,i,n,o){var r=t.chartOptionsService.getChartOption("legend.".concat(e));n.setLabel(t.chartTranslationService.translate(i)).setMaxValue(LS(r,o)).setValue("".concat(r)).setTextFieldWidth(45).onValueChange((function(i){t.chartOptionsService.setChartOption("legend.".concat(e),i)}))};e("item.marker.size","markerSize",this.markerSizeSlider,40),e("item.marker.strokeWidth","markerStroke",this.markerStrokeSlider,10),e("item.marker.padding","itemSpacing",this.markerPaddingSlider,20),e("item.paddingX","layoutHorizontalSpacing",this.itemPaddingXSlider,50),e("item.paddingY","layoutVerticalSpacing",this.itemPaddingYSlider,50)},e.prototype.initLabelPanel=function(){var t=this,e=this.chartOptionsService,i={enabled:!0,suppressEnabledCheckbox:!0,initialFont:{family:e.getChartOption("legend.item.label.fontFamily"),style:e.getChartOption("legend.item.label.fontStyle"),weight:e.getChartOption("legend.item.label.fontWeight"),size:e.getChartOption("legend.item.label.fontSize"),color:e.getChartOption("legend.item.label.color")},setFont:function(e){var i=t.chartOptionsService;e.family&&i.setChartOption("legend.item.label.fontFamily",e.family),e.weight&&i.setChartOption("legend.item.label.fontWeight",e.weight),e.style&&i.setChartOption("legend.item.label.fontStyle",e.style),e.size&&i.setChartOption("legend.item.label.fontSize",e.size),e.color&&i.setChartOption("legend.item.label.color",e.color)}},n=this.createBean(new Hb(i));this.legendGroup.addItem(n),this.activePanels.push(n)},e.prototype.destroyActivePanels=function(){var t=this;this.activePanels.forEach((function(e){c.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActivePanels(),t.prototype.destroy.call(this)},e.TEMPLATE='<div>\n            <ag-group-component ref="legendGroup">\n                <ag-select ref="legendPositionSelect"></ag-select>\n                <ag-slider ref="legendPaddingSlider"></ag-slider>\n                <ag-slider ref="markerSizeSlider"></ag-slider>\n                <ag-slider ref="markerStrokeSlider"></ag-slider>\n                <ag-slider ref="markerPaddingSlider"></ag-slider>\n                <ag-slider ref="itemPaddingXSlider"></ag-slider>\n                <ag-slider ref="itemPaddingYSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Yb([o("legendGroup")],e.prototype,"legendGroup",void 0),Yb([o("legendPositionSelect")],e.prototype,"legendPositionSelect",void 0),Yb([o("legendPaddingSlider")],e.prototype,"legendPaddingSlider",void 0),Yb([o("markerSizeSlider")],e.prototype,"markerSizeSlider",void 0),Yb([o("markerStrokeSlider")],e.prototype,"markerStrokeSlider",void 0),Yb([o("markerPaddingSlider")],e.prototype,"markerPaddingSlider",void 0),Yb([o("itemPaddingXSlider")],e.prototype,"itemPaddingXSlider",void 0),Yb([o("itemPaddingYSlider")],e.prototype,"itemPaddingYSlider",void 0),Yb([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),Yb([r],e.prototype,"init",null),e}(s),qb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$b=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Zb=function(t){function e(e){var i=t.call(this)||this;return i.chartOptionsService=e,i}return qb(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{axisTicksGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initAxisTicks()},e.prototype.initAxisTicks=function(){var t=this;this.axisTicksGroup.setTitle(this.chartTranslationService.translate("ticks")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0),this.axisTicksColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth("flex").setValue(this.chartOptionsService.getAxisProperty("tick.color")).onValueChange((function(e){return t.chartOptionsService.setAxisProperty("tick.color",e)}));var e=function(e,i,n,o){var r=t.chartOptionsService.getAxisProperty(e);i.setLabel(n).setMaxValue(LS(r,o)).setValue("".concat(r)).setTextFieldWidth(45).onValueChange((function(i){return t.chartOptionsService.setAxisProperty(e,i)}))};e("tick.width",this.axisTicksWidthSlider,this.chartTranslationService.translate("width"),10),e("tick.size",this.axisTicksSizeSlider,this.chartTranslationService.translate("length"),30)},e.TEMPLATE='<div>\n            <ag-group-component ref="axisTicksGroup">\n                <ag-color-picker ref="axisTicksColorPicker"></ag-color-picker>\n                <ag-slider ref="axisTicksWidthSlider"></ag-slider>\n                <ag-slider ref="axisTicksSizeSlider"></ag-slider>\n            </ag-group-component>\n        </div>',$b([o("axisTicksGroup")],e.prototype,"axisTicksGroup",void 0),$b([o("axisTicksColorPicker")],e.prototype,"axisTicksColorPicker",void 0),$b([o("axisTicksWidthSlider")],e.prototype,"axisTicksWidthSlider",void 0),$b([o("axisTicksSizeSlider")],e.prototype,"axisTicksSizeSlider",void 0),$b([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),$b([r],e.prototype,"init",null),e}(s),Jb=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Qb=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},tS=function(t){function e(i){var n=t.call(this,i,e.TEMPLATE)||this;return n.radius=0,n.offsetX=0,n.offsetY=0,n}return Jb(e,t),e.prototype.postConstruct=function(){var e=this;t.prototype.postConstruct.call(this),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:function(t){e.parentCircleRect=e.eParentCircle.getBoundingClientRect()},onDragging:function(t){return e.calculateAngleDrag(t)},onDragStop:function(){}},this.dragService.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue("".concat(this.degrees)).onValueChange((function(t){null!=t&&""!==t||(t="0"),t=e.eAngleValue.normalizeValue(t);var i=parseFloat(t);i>180&&(i-=360),e.setValue(i)})),this.updateNumberInput(),c.exists(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListener(this,l.EVENT_FIELD_VALUE_CHANGED,(function(){var t=e.gridOptionsService.getDocument();e.eAngleValue.getInputElement().contains(t.activeElement)||e.updateNumberInput()}))},e.prototype.updateNumberInput=function(){var t=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(t.toString())},e.prototype.positionChildCircle=function(t){var e=this.parentCircleRect||{width:24,height:24},i=this.eChildCircle,n=e.width/2,o=e.height/2;i.style.left="".concat(n+8*Math.cos(t),"px"),i.style.top="".concat(o+8*Math.sin(t),"px")},e.prototype.calculatePolar=function(){var t=this.offsetX,e=this.offsetY,i=Math.atan2(e,t);this.degrees=this.toDegrees(i),this.radius=Math.sqrt(t*t+e*e),this.positionChildCircle(i)},e.prototype.calculateCartesian=function(){var t=this.toRadians(this.getValue()),e=this.getRadius();this.setOffsetX(Math.cos(t)*e).setOffsetY(Math.sin(t)*e)},e.prototype.setOffsetX=function(t){return this.offsetX!==t&&(this.offsetX=t,this.calculatePolar()),this},e.prototype.setOffsetY=function(t){return this.offsetY!==t&&(this.offsetY=t,this.calculatePolar()),this},e.prototype.calculateAngleDrag=function(t){var e=this.parentCircleRect,i=e.width/2,n=e.height/2,o=t.clientX-e.left-i,r=t.clientY-e.top-n,s=Math.atan2(r,o);this.setValue(s,!0)},e.prototype.toDegrees=function(t){return t/Math.PI*180},e.prototype.toRadians=function(t){return t/180*Math.PI},e.prototype.normalizeNegativeValue=function(t){return t<0?360+t:t},e.prototype.normalizeAngle180=function(t){return(t%=2*Math.PI)<-Math.PI?t+=2*Math.PI:t>=Math.PI&&(t-=2*Math.PI),t},e.prototype.getRadius=function(){return this.radius},e.prototype.setRadius=function(t){return this.radius===t||(this.radius=t,this.calculateCartesian()),this},e.prototype.onValueChange=function(t){var e=this;return this.addManagedListener(this,l.EVENT_FIELD_VALUE_CHANGED,(function(){t(e.degrees)})),this},e.prototype.getValue=function(t){return t?this.toRadians(this.degrees):this.degrees},e.prototype.setValue=function(t,e){var i;return i=e?t:this.normalizeAngle180(this.toRadians(t)),t=this.toDegrees(i),this.degrees!==t&&(this.degrees=Math.floor(t),this.calculateCartesian(),this.positionChildCircle(i),this.dispatchEvent({type:l.EVENT_FIELD_VALUE_CHANGED})),this},e.prototype.setWidth=function(t){return c.setFixedWidth(this.getGui(),t),this},e.prototype.setDisabled=function(e){return t.prototype.setDisabled.call(this,e),this.eAngleValue.setDisabled(e),this},e.prototype.destroy=function(){this.dragService.removeDragSource(this.dragListener),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-angle-select">\n            <div ref="eLabel"></div>\n            <div class="ag-wrapper ag-angle-select-wrapper">\n                <div ref="eAngleSelectField" class="ag-angle-select-field">\n                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">\n                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>\n                    </div>\n                </div>\n                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>\n            </div>\n        </div>',Qb([o("eLabel")],e.prototype,"eLabel",void 0),Qb([o("eParentCircle")],e.prototype,"eParentCircle",void 0),Qb([o("eChildCircle")],e.prototype,"eChildCircle",void 0),Qb([o("eAngleValue")],e.prototype,"eAngleValue",void 0),Qb([n("dragService")],e.prototype,"dragService",void 0),e}(tt),eS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),iS=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},nS=function(t){function e(e){var i=e.chartController,n=e.chartOptionsService,o=e.isExpandedOnInit,r=void 0!==o&&o,s=t.call(this)||this;return s.activePanels=[],s.axisLabelUpdateFuncs=[],s.prevXRotation=0,s.prevYRotation=0,s.chartController=i,s.chartOptionsService=n,s.isExpandedOnInit=r,s}return eS(e,t),e.prototype.init=function(){var t=this;this.setTemplate(e.TEMPLATE,{axisGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initAxis(),this.initAxisTicks(),this.initAxisLabels();this.addManagedListener(this.chartController,Ib.EVENT_CHART_UPDATED,(function(){return t.axisLabelUpdateFuncs.forEach((function(t){return t()}))}))},e.prototype.initAxis=function(){var t=this;this.axisGroup.setTitle(this.translate("axis")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.axisColorInput.setLabel(this.translate("color")).setLabelWidth("flex").setInputWidth("flex").setValue(this.chartOptionsService.getAxisProperty("line.color")).onValueChange((function(e){return t.chartOptionsService.setAxisProperty("line.color",e)}));var e=this.chartOptionsService.getAxisProperty("line.width");this.axisLineWidthSlider.setMaxValue(LS(e,10)).setLabel(this.translate("thickness")).setTextFieldWidth(45).setValue("".concat(e)).onValueChange((function(e){return t.chartOptionsService.setAxisProperty("line.width",e)}))},e.prototype.initAxisTicks=function(){var t=this.createBean(new Zb(this.chartOptionsService));this.axisGroup.addItem(t),this.activePanels.push(t)},e.prototype.initAxisLabels=function(){var t=this,e={family:this.chartOptionsService.getAxisProperty("label.fontFamily"),style:this.chartOptionsService.getAxisProperty("label.fontStyle"),weight:this.chartOptionsService.getAxisProperty("label.fontWeight"),size:this.chartOptionsService.getAxisProperty("label.fontSize"),color:this.chartOptionsService.getAxisProperty("label.color")},i={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,initialFont:e,setFont:function(e){e.family&&t.chartOptionsService.setAxisProperty("label.fontFamily",e.family),e.weight&&t.chartOptionsService.setAxisProperty("label.fontWeight",e.weight),e.style&&t.chartOptionsService.setAxisProperty("label.fontStyle",e.style),e.size&&t.chartOptionsService.setAxisProperty("label.fontSize",e.size),e.color&&t.chartOptionsService.setAxisProperty("label.color",e.color)}},n=this.createBean(new Hb(i));this.axisGroup.addItem(n),this.activePanels.push(n),this.addAdditionalLabelComps(n)},e.prototype.addAdditionalLabelComps=function(t){this.addLabelPadding(t);var e=this.createRotationWidgets(),i=e.xRotationComp,n=e.yRotationComp,o=this.initLabelRotations(i,n);t.addCompToPanel(o),t.addCompToPanel(i),t.addCompToPanel(n)},e.prototype.initLabelRotations=function(t,e){var i,n,o=this,r=function(t){return o.chartOptionsService.getLabelRotation(t)},s=function(t,e){o.chartOptionsService.setLabelRotation(t,e)},a=(i=r("xAxis"),n=r("yAxis"),null==i&&null==n&&o.chartOptionsService.getAxisProperty("label.autoRotate")),l=this.createBean(new Q).setLabel(this.translate("autoRotate")).setValue(a).onValueChange((function(i){o.chartOptionsService.setAxisProperty("label.autoRotate",i),i?(o.prevXRotation=r("xAxis"),o.prevYRotation=r("yAxis"),s("xAxis",void 0),s("yAxis",void 0)):(s("xAxis",o.prevXRotation),s("yAxis",o.prevYRotation)),t.setDisabled(i),e.setDisabled(i)}));return t.setDisabled(a),e.setDisabled(a),l},e.prototype.createRotationWidgets=function(){var t=this,e=String.fromCharCode(176),i=function(i,n){var o="".concat(t.chartTranslationService.translate(i)," ").concat(e),r=t.chartOptionsService.getLabelRotation(n),s=(new tS).setLabel(o).setLabelWidth("flex").setValue(r||0).onValueChange((function(e){return t.chartOptionsService.setLabelRotation(n,e)}));return t.axisLabelUpdateFuncs.push((function(){var e=t.chartOptionsService.getLabelRotation(n);s.setValue(e||0)})),t.createBean(s)};return{xRotationComp:i("xRotation","xAxis"),yRotationComp:i("yRotation","yAxis")}},e.prototype.addLabelPadding=function(t){var e=this,i=this.createBean(new et),n=this.chartOptionsService.getAxisProperty("label.padding");i.setLabel(this.chartTranslationService.translate("padding")).setMaxValue(LS(n,30)).setValue("".concat(n)).setTextFieldWidth(45).onValueChange((function(t){return e.chartOptionsService.setAxisProperty("label.padding",t)})),t.addCompToPanel(i)},e.prototype.translate=function(t,e){return this.chartTranslationService.translate(t,e)},e.prototype.destroyActivePanels=function(){var t=this;this.activePanels.forEach((function(e){c.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActivePanels(),t.prototype.destroy.call(this)},e.TEMPLATE='<div>\n            <ag-group-component ref="axisGroup">\n                <ag-color-picker ref="axisColorInput"></ag-color-picker>\n                <ag-slider ref="axisLineWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',iS([o("axisGroup")],e.prototype,"axisGroup",void 0),iS([o("axisColorInput")],e.prototype,"axisColorInput",void 0),iS([o("axisLineWidthSlider")],e.prototype,"axisLineWidthSlider",void 0),iS([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),iS([r],e.prototype,"init",null),e}(s),oS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),rS=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},sS=function(t){function e(e){var i=e.chartOptionsService,n=e.isExpandedOnInit,o=void 0!==n&&n,r=t.call(this)||this;return r.chartOptionsService=i,r.isExpandedOnInit=o,r}return oS(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{navigatorGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initNavigator()},e.prototype.initNavigator=function(){var t=this,e=this.chartTranslationService;this.navigatorGroup.setTitle(e.translate("navigator")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("navigator.enabled")||!1).onEnableChange((function(e){t.chartOptionsService.setChartOption("navigator.enabled",e),t.navigatorGroup.toggleGroupExpand(!0)})).toggleGroupExpand(this.isExpandedOnInit);var i=this.chartOptionsService.getChartOption("navigator.height");this.navigatorHeightSlider.setLabel(e.translate("height")).setMinValue(10).setMaxValue(LS(i,60)).setTextFieldWidth(45).setValue("".concat(i||30)).onValueChange((function(e){return t.chartOptionsService.setChartOption("navigator.height",e)}))},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.TEMPLATE='<div>\n            <ag-group-component ref="navigatorGroup">\n                <ag-slider ref="navigatorHeightSlider"></ag-slider>\n            </ag-group-component>\n        </div>',rS([o("navigatorGroup")],e.prototype,"navigatorGroup",void 0),rS([o("navigatorHeightSlider")],e.prototype,"navigatorHeightSlider",void 0),rS([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),rS([r],e.prototype,"init",null),e}(s),aS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lS=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},cS=function(t){function e(e,i){var n=t.call(this)||this;return n.chartOptionsService=e,n.chartController=i,n}return aS(e,t),e.prototype.init=function(){var t=this;this.setTemplate(e.TEMPLATE,{chartPaddingGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.addManagedListener(this.eventService,l.EVENT_CHART_OPTIONS_CHANGED,(function(e){t.updateTopPadding(e.chartOptions)})),this.initGroup(),this.initChartPaddingItems()},e.prototype.initGroup=function(){this.chartPaddingGroup.setTitle(this.chartTranslationService.translate("padding")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0)},e.prototype.initChartPaddingItems=function(){var t=this,e=function(e,i){var n=t.chartOptionsService.getChartOption("padding."+e);i.setLabel(t.chartTranslationService.translate(e)).setMaxValue(LS(n,200)).setValue("".concat(n)).setTextFieldWidth(45).onValueChange((function(i){return t.chartOptionsService.setChartOption("padding."+e,i)}))};e("top",this.paddingTopSlider),e("right",this.paddingRightSlider),e("bottom",this.paddingBottomSlider),e("left",this.paddingLeftSlider)},e.prototype.updateTopPadding=function(t){var e,i,n=null===(i=null===(e=t[this.chartController.getChartSeriesTypes()[0]])||void 0===e?void 0:e.padding)||void 0===i?void 0:i.top;null!=n&&this.paddingTopSlider.setValue(n)},e.TEMPLATE='<div>\n            <ag-group-component ref="chartPaddingGroup">\n                <ag-slider ref="paddingTopSlider"></ag-slider>\n                <ag-slider ref="paddingRightSlider"></ag-slider>\n                <ag-slider ref="paddingBottomSlider"></ag-slider>\n                <ag-slider ref="paddingLeftSlider"></ag-slider>\n            </ag-group-component>\n        <div>',lS([o("chartPaddingGroup")],e.prototype,"chartPaddingGroup",void 0),lS([o("paddingTopSlider")],e.prototype,"paddingTopSlider",void 0),lS([o("paddingRightSlider")],e.prototype,"paddingRightSlider",void 0),lS([o("paddingBottomSlider")],e.prototype,"paddingBottomSlider",void 0),lS([o("paddingLeftSlider")],e.prototype,"paddingLeftSlider",void 0),lS([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),lS([r],e.prototype,"init",null),e}(s),dS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),uS=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},hS=function(t){function e(e){var i=t.call(this)||this;return i.chartOptionsService=e,i}return dS(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{chartBackgroundGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initGroup(),this.initColorPicker()},e.prototype.initGroup=function(){var t=this;this.group.setTitle(this.chartTranslationService.translate("background")).setEnabled(this.chartOptionsService.getChartOption("background.visible")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange((function(e){return t.chartOptionsService.setChartOption("background.visible",e)}))},e.prototype.initColorPicker=function(){var t=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth("flex").setValue(this.chartOptionsService.getChartOption("background.fill")).onValueChange((function(e){return t.chartOptionsService.setChartOption("background.fill",e)}))},e.TEMPLATE='<div>\n            <ag-group-component ref="chartBackgroundGroup">\n                <ag-color-picker ref="colorPicker"></ag-color-picker>\n            </ag-group-component>\n        <div>',uS([o("chartBackgroundGroup")],e.prototype,"group",void 0),uS([o("colorPicker")],e.prototype,"colorPicker",void 0),uS([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),uS([r],e.prototype,"init",null),e}(s),pS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fS=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},gS=function(t){function e(i){var n=t.call(this,e.TEMPLATE)||this;return n.chartOptionsService=i,n.activePanels=[],n}return pS(e,t),e.prototype.init=function(){this.initFontPanel(),this.titlePlaceholder=this.chartTranslationService.translate("titlePlaceholder")},e.prototype.hasTitle=function(){var t=this.getOption("title");return t&&t.enabled&&t.text&&t.text.length>0},e.prototype.initFontPanel=function(){var t=this,e=this.hasTitle(),i=function(e,i){e.family&&t.setOption("title.fontFamily",e.family,i),e.weight&&t.setOption("title.fontWeight",e.weight,i),e.style&&t.setOption("title.fontStyle",e.style,i),e.size&&t.setOption("title.fontSize",e.size,i),e.color&&t.setOption("title.color",e.color,i)},n={family:this.getOption("title.fontFamily"),style:this.getOption("title.fontStyle"),weight:this.getOption("title.fontWeight"),size:this.getOption("title.fontSize"),color:this.getOption("title.color")};e||i(n,!0);var o={name:this.chartTranslationService.translate("title"),enabled:e,suppressEnabledCheckbox:!1,initialFont:n,setFont:i,setEnabled:function(e){if(t.toolbarExists()){var i=t.getOption("padding.top");t.setOption("padding.top",e?i-20:i+20)}t.setOption("title.enabled",e);var n=t.getOption("title.text"),o="Title"===n||0===(null==n?void 0:n.trim().length);e&&o&&t.setOption("title.text",t.titlePlaceholder)}},r=this.createBean(new Hb(o));r.addItemToPanel(this.createSpacingSlicer()),this.getGui().appendChild(r.getGui()),this.activePanels.push(r),this.addManagedListener(this.eventService,"chartTitleEdit",(function(){r.setEnabled(t.hasTitle())}))},e.prototype.createSpacingSlicer=function(){var t=this,e=this.createBean(new et),i=this.chartOptionsService.getChartOption("title.spacing")||10;return e.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(Math.max(i,100)).setValue("".concat(i)).setTextFieldWidth(45).onValueChange((function(e){return t.chartOptionsService.setChartOption("title.spacing",e)})),e},e.prototype.toolbarExists=function(){var t=this.gridOptionsService.getCallback("getChartToolbarItems");if(!t)return!0;var e={defaultItems:["chartUnlink","chartDownload"]};return["chartLink","chartUnlink","chartDownload"].some((function(i){var n;return null===(n=t&&t(e))||void 0===n?void 0:n.includes(i)}))},e.prototype.getOption=function(t){return this.chartOptionsService.getChartOption(t)},e.prototype.setOption=function(t,e,i){this.chartOptionsService.setChartOption(t,e,i)},e.prototype.destroyActivePanels=function(){var t=this;this.activePanels.forEach((function(e){c.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActivePanels(),t.prototype.destroy.call(this)},e.TEMPLATE="<div></div>",fS([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),fS([r],e.prototype,"init",null),e}(s),vS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),yS=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},mS=function(t){function e(e){var i=e.chartController,n=e.chartOptionsService,o=e.isExpandedOnInit,r=void 0!==o&&o,s=t.call(this)||this;return s.activePanels=[],s.chartController=i,s.chartOptionsService=n,s.isExpandedOnInit=r,s}return vS(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{chartGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initGroup(),this.initTitles(),this.initPaddingPanel(),this.initBackgroundPanel()},e.prototype.initGroup=function(){this.chartGroup.setTitle(this.chartTranslationService.translate("chart")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0)},e.prototype.initTitles=function(){var t=this.createBean(new gS(this.chartOptionsService));this.chartGroup.addItem(t),this.activePanels.push(t)},e.prototype.initPaddingPanel=function(){var t=this.createBean(new cS(this.chartOptionsService,this.chartController));this.chartGroup.addItem(t),this.activePanels.push(t)},e.prototype.initBackgroundPanel=function(){var t=this.createBean(new hS(this.chartOptionsService));this.chartGroup.addItem(t),this.activePanels.push(t)},e.prototype.destroyActivePanels=function(){var t=this;this.activePanels.forEach((function(e){c.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActivePanels(),t.prototype.destroy.call(this)},e.TEMPLATE='<div>\n            <ag-group-component ref="chartGroup"></ag-group-component>\n        </div>',yS([o("chartGroup")],e.prototype,"chartGroup",void 0),yS([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),yS([r],e.prototype,"init",null),e}(s),bS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),SS=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},xS=function(t){function e(e,i){var n=t.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=i,n}return bS(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{shadowGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.shadowBlurSlider.setTextFieldWidth(45),this.shadowXOffsetSlider.setTextFieldWidth(45),this.shadowYOffsetSlider.setTextFieldWidth(45),this.initSeriesShadow()},e.prototype.initSeriesShadow=function(){var t=this;this.shadowGroup.setTitle(this.chartTranslationService.translate("shadow")).setEnabled(this.chartOptionsService.getSeriesOption("shadow.enabled",this.getSelectedSeries())).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange((function(e){return t.chartOptionsService.setSeriesOption("shadow.enabled",e,t.getSelectedSeries())})),this.shadowColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth("flex").setValue(this.chartOptionsService.getSeriesOption("shadow.color",this.getSelectedSeries())).onValueChange((function(e){return t.chartOptionsService.setSeriesOption("shadow.color",e,t.getSelectedSeries())}));var e=function(e,i,n,o){var r=t.chartOptionsService.getSeriesOption("shadow.".concat(i),t.getSelectedSeries());e.setLabel(t.chartTranslationService.translate(i)).setMinValue(n).setMaxValue(LS(r,o)).setValue("".concat(r)).onValueChange((function(e){return t.chartOptionsService.setSeriesOption("shadow.".concat(i),e,t.getSelectedSeries())}))};e(this.shadowBlurSlider,"blur",0,20),e(this.shadowXOffsetSlider,"xOffset",-10,10),e(this.shadowYOffsetSlider,"yOffset",-10,10)},e.TEMPLATE='<div>\n            <ag-group-component ref="shadowGroup">\n                <ag-color-picker ref="shadowColorPicker"></ag-color-picker>\n                <ag-slider ref="shadowBlurSlider"></ag-slider>\n                <ag-slider ref="shadowXOffsetSlider"></ag-slider>\n                <ag-slider ref="shadowYOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',SS([o("shadowGroup")],e.prototype,"shadowGroup",void 0),SS([o("shadowColorPicker")],e.prototype,"shadowColorPicker",void 0),SS([o("shadowBlurSlider")],e.prototype,"shadowBlurSlider",void 0),SS([o("shadowXOffsetSlider")],e.prototype,"shadowXOffsetSlider",void 0),SS([o("shadowYOffsetSlider")],e.prototype,"shadowYOffsetSlider",void 0),SS([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),SS([r],e.prototype,"init",null),e}(s);function CS(t){var e=t.labelName,i=t.chartOptionsService,n=t.getSelectedSeries,o=t.seriesOptionLabelProperty,r=function(t){return"".concat(o,".").concat(t)},s=function(t){var e=r(t);return i.getSeriesOption(e,n())},a=function(t,e){var o=r(t);i.setSeriesOption(o,e,n())},l={family:s("fontFamily"),style:s("fontStyle"),weight:s("fontWeight"),size:s("fontSize"),color:s("color")};return{name:e,enabled:s("enabled")||!1,setEnabled:function(t){return a("enabled",t)},suppressEnabledCheckbox:!1,initialFont:l,setFont:function(t){t.family&&a("fontFamily",t.family),t.weight&&a("fontWeight",t.weight),t.style&&a("fontStyle",t.style),t.size&&a("fontSize",t.size),t.color&&a("color",t.color)}}}var wS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ES=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},OS=function(t){function e(e,i){var n=t.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=i,n}return wS(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{seriesMarkersGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical"}}),this.initMarkers()},e.prototype.initMarkers=function(){var t=this;this.seriesMarkerShapeSelect.addOptions([{value:"square",text:"Square"},{value:"circle",text:"Circle"},{value:"cross",text:"Cross"},{value:"diamond",text:"Diamond"},{value:"plus",text:"Plus"},{value:"triangle",text:"Triangle"},{value:"heart",text:"Heart"}]).setLabel(this.chartTranslationService.translate("shape")).setValue(this.getSeriesOption("marker.shape")).onValueChange((function(e){return t.setSeriesOption("marker.shape",e)}));var e=this.chartOptionsService.getChartType(),i=c.includes(["scatter","bubble"],e);this.seriesMarkersGroup.setTitle(this.chartTranslationService.translate("markers")).hideEnabledCheckbox(i).setEnabled(this.getSeriesOption("marker.enabled")||!1).hideOpenCloseIcons(!0).onEnableChange((function(e){return t.setSeriesOption("marker.enabled",e)}));var n=function(e,i,n,o){var r=t.getSeriesOption(e);i.setLabel(t.chartTranslationService.translate(n)).setMaxValue(LS(r,o)).setValue("".concat(r)).setTextFieldWidth(45).onValueChange((function(i){return t.setSeriesOption(e,i)}))};"bubble"===e?(n("marker.maxSize",this.seriesMarkerMinSizeSlider,"maxSize",60),n("marker.size",this.seriesMarkerSizeSlider,"minSize",60)):(this.seriesMarkerMinSizeSlider.setDisplayed(!1),n("marker.size",this.seriesMarkerSizeSlider,"size",60)),n("marker.strokeWidth",this.seriesMarkerStrokeWidthSlider,"strokeWidth",10)},e.prototype.getSeriesOption=function(t){return this.chartOptionsService.getSeriesOption(t,this.getSelectedSeries())},e.prototype.setSeriesOption=function(t,e){this.chartOptionsService.setSeriesOption(t,e,this.getSelectedSeries())},e.TEMPLATE='<div>\n            <ag-group-component ref="seriesMarkersGroup">\n                <ag-select ref="seriesMarkerShapeSelect"></ag-select>\n                <ag-slider ref="seriesMarkerMinSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerStrokeWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',ES([o("seriesMarkersGroup")],e.prototype,"seriesMarkersGroup",void 0),ES([o("seriesMarkerShapeSelect")],e.prototype,"seriesMarkerShapeSelect",void 0),ES([o("seriesMarkerSizeSlider")],e.prototype,"seriesMarkerSizeSlider",void 0),ES([o("seriesMarkerMinSizeSlider")],e.prototype,"seriesMarkerMinSizeSlider",void 0),ES([o("seriesMarkerStrokeWidthSlider")],e.prototype,"seriesMarkerStrokeWidthSlider",void 0),ES([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),ES([r],e.prototype,"init",null),e}(s),DS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),AS=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},TS=function(t){function e(e,i){var n=t.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=i,n}return DS(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{calloutGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical"}}),this.initCalloutOptions()},e.prototype.initCalloutOptions=function(){var t=this;this.calloutGroup.setTitle(this.chartTranslationService.translate("callout")).setEnabled(!0).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0);var e=function(e,i,n,o){var r=t.chartOptionsService.getSeriesOption(e,t.getSelectedSeries());i.setLabel(t.chartTranslationService.translate(n)).setMaxValue(LS(r,o)).setValue("".concat(r)).setTextFieldWidth(45).onValueChange((function(i){return t.chartOptionsService.setSeriesOption(e,i,t.getSelectedSeries())}))};e("calloutLine.length",this.calloutLengthSlider,"length",40),e("calloutLine.strokeWidth",this.calloutStrokeWidthSlider,"strokeWidth",10),e("calloutLabel.offset",this.labelOffsetSlider,"offset",30)},e.TEMPLATE='<div>\n            <ag-group-component ref="calloutGroup">\n                <ag-slider ref="calloutLengthSlider"></ag-slider>\n                <ag-slider ref="calloutStrokeWidthSlider"></ag-slider>\n                <ag-slider ref="labelOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',AS([o("calloutGroup")],e.prototype,"calloutGroup",void 0),AS([o("calloutLengthSlider")],e.prototype,"calloutLengthSlider",void 0),AS([o("calloutStrokeWidthSlider")],e.prototype,"calloutStrokeWidthSlider",void 0),AS([o("labelOffsetSlider")],e.prototype,"labelOffsetSlider",void 0),AS([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),AS([r],e.prototype,"init",null),e}(s),kS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),MS=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},RS=function(t){function e(e){var i=e.chartController,n=e.chartOptionsService,o=e.seriesType,r=e.isExpandedOnInit,s=void 0!==r&&r,a=t.call(this)||this;return a.activePanels=[],a.widgetFuncs={lineWidth:function(){return a.initLineWidth()},strokeWidth:function(){return a.initStrokeWidth()},lineDash:function(){return a.initLineDash()},lineOpacity:function(){return a.initLineOpacity()},fillOpacity:function(){return a.initFillOpacity()},markers:function(){return a.initMarkers()},labels:function(){return a.initLabels()},shadow:function(){return a.initShadow()},tooltips:function(){return a.initTooltips()},bins:function(){return a.initBins()}},a.seriesWidgetMappings={area:["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],bar:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],column:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],line:["tooltips","lineWidth","lineDash","lineOpacity","markers","labels"],histogram:["tooltips","bins","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],scatter:["tooltips","markers","labels"],bubble:["tooltips","markers","labels"],pie:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"]},a.chartController=i,a.chartOptionsService=n,a.seriesType=o||a.getChartSeriesType(),a.isExpandedOnInit=s,a}return kS(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{seriesGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.seriesGroup.setTitle(this.translate("series")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.addManagedListener(this.chartController,Ib.EVENT_CHART_SERIES_CHART_TYPE_CHANGED,this.refreshWidgets.bind(this)),this.refreshWidgets()},e.prototype.refreshWidgets=function(){var t=this;this.destroyActivePanels(),this.chartController.getChartProxy().getChart().waitForUpdate().then((function(){t.chartController.isComboChart()&&(t.updateSeriesType(),t.initSeriesSelect()),t.seriesWidgetMappings[t.seriesType].forEach((function(e){return t.widgetFuncs[e]()}))})).catch((function(t){return console.error("AG Grid - chart rendering failed",t)}))},e.prototype.initSeriesSelect=function(){var t=this,e=this.seriesGroup.createManagedBean(new _);e.setLabel(this.translate("seriesType")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth("flex").addOptions(this.getSeriesSelectOptions()).setValue("".concat(this.seriesType)).onValueChange((function(e){t.seriesType=e,t.refreshWidgets()})),this.seriesGroup.addItem(e),this.activePanels.push(e)},e.prototype.initTooltips=function(){var t=this,e=this.createBean(new J);e.setLabel(this.translate("tooltips")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth("flex").setValue(this.getSeriesOption("tooltip.enabled")||!1).onValueChange((function(e){return t.setSeriesOption("tooltip.enabled",e)})),this.addWidget(e)},e.prototype.initStrokeWidth=function(){var t=this,e=this.getSeriesOption("strokeWidth"),i=this.createBean(new et);i.setLabel(this.translate("strokeWidth")).setMaxValue(LS(e,10)).setTextFieldWidth(45).setValue("".concat(e)).onValueChange((function(e){return t.setSeriesOption("strokeWidth",e)})),this.addWidget(i)},e.prototype.initLineWidth=function(){var t=this,e=this.getSeriesOption("strokeWidth"),i=this.createBean(new et);i.setLabel(this.translate("lineWidth")).setMaxValue(LS(e,10)).setTextFieldWidth(45).setValue("".concat(e)).onValueChange((function(e){return t.setSeriesOption("strokeWidth",e)})),this.addWidget(i)},e.prototype.initLineDash=function(){var t=this,e=this.getSeriesOption("lineDash"),i=e?e[0]:0,n=this.createBean(new et);n.setLabel(this.translate("lineDash")).setMaxValue(LS(i,30)).setTextFieldWidth(45).setValue("".concat(i)).onValueChange((function(e){return t.setSeriesOption("lineDash",[e])})),this.addWidget(n)},e.prototype.initLineOpacity=function(){var t=this,e=this.getSeriesOption("strokeOpacity"),i=this.createBean(new et);i.setLabel(this.translate("strokeOpacity")).setStep(.05).setMaxValue(LS(e,1)).setTextFieldWidth(45).setValue("".concat(e)).onValueChange((function(e){return t.setSeriesOption("strokeOpacity",e)})),this.addWidget(i)},e.prototype.initFillOpacity=function(){var t=this,e=this.getSeriesOption("fillOpacity"),i=this.createBean(new et);i.setLabel(this.translate("fillOpacity")).setStep(.05).setMaxValue(LS(e,1)).setTextFieldWidth(45).setValue("".concat(e)).onValueChange((function(e){return t.setSeriesOption("fillOpacity",e)})),this.addWidget(i)},e.prototype.initLabels=function(){var t=this,e="pie"===this.seriesType?"calloutLabel":"label",i=CS({labelName:"pie"===this.seriesType?this.chartTranslationService.translate("calloutLabels"):this.chartTranslationService.translate("labels"),chartOptionsService:this.chartOptionsService,getSelectedSeries:function(){return t.seriesType},seriesOptionLabelProperty:e}),n=this.createBean(new Hb(i));if("pie"===this.seriesType){var o=this.createBean(new TS(this.chartOptionsService,(function(){return t.seriesType})));n.addCompToPanel(o),this.activePanels.push(o)}if(this.addWidget(n),"pie"===this.seriesType){var r=CS({labelName:this.chartTranslationService.translate("sectorLabels"),chartOptionsService:this.chartOptionsService,getSelectedSeries:function(){return t.seriesType},seriesOptionLabelProperty:"sectorLabel"}),s=this.createBean(new Hb(r)),a=this.getSectorLabelPositionRatio();s.addCompToPanel(a),this.addWidget(s)}},e.prototype.getSectorLabelPositionRatio=function(){var t=this,e=this.chartOptionsService.getSeriesOption("sectorLabel.positionRatio",this.seriesType);return this.createBean(new et).setLabel(this.translate("positionRatio")).setStep(.05).setMaxValue(LS(e,1)).setTextFieldWidth(45).setValue("".concat(e)).onValueChange((function(e){return t.chartOptionsService.setSeriesOption("sectorLabel.positionRatio",e,t.seriesType)}))},e.prototype.initShadow=function(){var t=this,e=this.createBean(new xS(this.chartOptionsService,(function(){return t.seriesType})));this.addWidget(e)},e.prototype.initMarkers=function(){var t=this,e=this.createBean(new OS(this.chartOptionsService,(function(){return t.seriesType})));this.addWidget(e)},e.prototype.initBins=function(){var t,e=this,i=(null!==(t=this.getSeriesOption("bins"))&&void 0!==t?t:this.getSeriesOption("calculatedBins")).length,n=this.createBean(new et);n.setLabel(this.translate("histogramBinCount")).setMinValue(0).setMaxValue(LS(i,20)).setTextFieldWidth(45).setValue("".concat(i)).onValueChange((function(t){return e.setSeriesOption("binCount",t)})),this.addWidget(n)},e.prototype.addWidget=function(t){this.seriesGroup.addItem(t),this.activePanels.push(t)},e.prototype.getSeriesOption=function(t){return this.chartOptionsService.getSeriesOption(t,this.seriesType)},e.prototype.setSeriesOption=function(t,e){this.chartOptionsService.setSeriesOption(t,e,this.seriesType)},e.prototype.getChartSeriesType=function(){if(0===this.chartController.getSeriesChartTypes().length)return"column";var t=this.chartController.getSeriesChartTypes()[0].chartType;return"columnLineCombo"===t?"column":"areaColumnCombo"===t?"area":gb(t)},e.prototype.getSeriesSelectOptions=function(){var t=this;this.seriesSelectOptions||(this.seriesSelectOptions=new Map([["area",{value:"area",text:this.translate("area","Area")}],["bar",{value:"bar",text:this.translate("bar","Bar")}],["column",{value:"column",text:this.translate("column","Column")}],["line",{value:"line",text:this.translate("line","Line")}],["scatter",{value:"scatter",text:this.translate("scatter","Scatter")}],["histogram",{value:"histogram",text:this.translate("histogram","Histogram")}],["pie",{value:"pie",text:this.translate("pie","Pie")}]]));var e=new Set;return this.chartController.getActiveSeriesChartTypes().forEach((function(i){var n=gb(i.chartType);e.add(t.seriesSelectOptions.get(n))})),Array.from(e)},e.prototype.updateSeriesType=function(){var t=this.chartController.getActiveSeriesChartTypes().map((function(t){return gb(t.chartType)}));!t.includes(this.seriesType)&&t.length>0&&(this.seriesType=t[0])},e.prototype.translate=function(t,e){return this.chartTranslationService.translate(t,e)},e.prototype.destroyActivePanels=function(){var t=this;this.activePanels.forEach((function(e){c.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActivePanels(),t.prototype.destroy.call(this)},e.TEMPLATE='<div>\n            <ag-group-component ref="seriesGroup">\n            </ag-group-component>\n        </div>',MS([o("seriesGroup")],e.prototype,"seriesGroup",void 0),MS([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),MS([r],e.prototype,"init",null),e}(s),PS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),NS=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};function LS(t,e){return Math.max(t,e)}var IS={groups:[{type:"chart"},{type:"legend"},{type:"series"},{type:"axis"},{type:"navigator"}]},FS=function(t){function e(i,n){var o=t.call(this,e.TEMPLATE)||this;return o.chartController=i,o.chartOptionsService=n,o.panels=[],o.isGroupPanelShownInSeries=function(t,e){if(["chart","legend","series"].includes(t))return!0;return!(!["axis","navigator"].includes(t)||!["bar","column","line","area","scatter","bubble","histogram","cartesian"].includes(e))},o}return PS(e,t),e.prototype.init=function(){var t=this;this.createPanels(),this.addManagedListener(this.chartController,Ib.EVENT_CHART_UPDATED,(function(){return t.createPanels(!0)})),this.addManagedListener(this.chartController,Ib.EVENT_CHART_API_UPDATE,(function(){return t.createPanels(!1)}))},e.prototype.createPanels=function(t){var e,i=this,n=this.chartController.getChartType(),o=this.chartController.isGrouping(),r=gb(n);t&&n===this.chartType&&o===this.isGrouping||(this.destroyPanels(),null===(e=this.getFormatPanelDef().groups)||void 0===e||e.forEach((function(t){var e=t.type;if(i.isGroupPanelShownInSeries(e,r)){var n={chartController:i.chartController,chartOptionsService:i.chartOptionsService,isExpandedOnInit:t.isOpen,seriesType:r};"chart"===e?i.addComponent(new mS(n)):"legend"===e?i.addComponent(new Xb(n)):"axis"===e?i.addComponent(new nS(n)):"series"===e?i.addComponent(new RS(n)):"navigator"===e?i.addComponent(new sS(n)):console.warn("AG Grid: invalid charts format panel group name supplied: '".concat(t.type,"'"))}})),this.chartType=n,this.isGrouping=o)},e.prototype.getFormatPanelDef=function(){var t,e=null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.formatPanel;return e||IS},e.prototype.addComponent=function(t){this.createBean(t),this.panels.push(t),t.addCssClass("ag-chart-format-section"),this.getGui().appendChild(t.getGui())},e.prototype.destroyPanels=function(){var t=this;this.panels.forEach((function(e){c.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyPanels(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-chart-format-wrapper"></div>',NS([r],e.prototype,"init",null),e}(s),_S=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),GS=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},BS=function(t){function e(e,i){var n=t.call(this)||this;n.size=58,n.padding=5,n.root=new ng.Group;var o=new ng.Scene({window:window,document:window.document,width:n.size,height:n.size});return o.canvas.element.classList.add("ag-chart-mini-thumbnail-canvas"),o.root=n.root,o.container=e,n.scene=o,n.tooltipName=i,n}return _S(e,t),e.prototype.init=function(){this.scene.canvas.element.title=this.chartTranslationService.translate(this.tooltipName),this.scene.render().catch((function(t){console.error("".concat("AG Grid - chart update failed"),t)}))},GS([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),GS([r],e.prototype,"init",null),e}(s),VS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),jS=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},WS=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.stroke="gray",n.axisOvershoot=3,n}return VS(e,t),e.prototype.addAxes=function(){var t=this.size,e=this.padding,i=new ng.Line;i.x1=e,i.y1=e,i.x2=e,i.y2=t-e+this.axisOvershoot,i.stroke=this.stroke;var n=new ng.Line;n.x1=e-this.axisOvershoot+1,n.y1=t-e,n.x2=t-e+1,n.y2=t-e,n.stroke=this.stroke;var o=this.root;o.append(i),o.append(n)},jS([r],e.prototype,"addAxes",null),e}(BS);function zS(t){var e=t.stacked,i=t.size,n=t.padding,o=t.xScalePadding,r=t.xScaleDomain,s=t.yScaleDomain,a=new ng.BandScale;a.domain=r,a.range=[n,i-n],a.paddingInner=o,a.paddingOuter=o;var l=new ng.LinearScale;l.domain=s,l.range=[i-n,n];var c=function(t,e,i){return t.map((function(t,n){var o=i.convert(t),r=new ng.Rect;return r.x=e.convert(n),r.y=o,r.width=e.bandwidth,r.height=i.convert(0)-o,r.strokeWidth=1,r.crisp=!0,r}))};return e?t.data.map((function(t){return c(t,a,l)})):c(t.data,a,l)}function US(t,e,i,n){var o=new ng.LinearScale;o.domain=[0,4],o.range=[n,i-n];var r=new ng.LinearScale;r.domain=[0,10],r.range=[i-n,n];var s=e.map((function(t){var e=new ng.Path;return e.strokeWidth=3,e.lineCap="round",e.fill=void 0,t.forEach((function(t,i){e.path[i>0?"lineTo":"moveTo"](o.convert(i),r.convert(t))})),e})),a=new ng.Group;return a.setClipRectInGroupCoordinateSpace(new ng.BBox(n,n,i-2*n,i-2*n)),a.append(s),t.append(a),s}var HS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),KS=function(t){function e(e,i,n){var o=t.call(this,e,"groupedColumnTooltip")||this;o.columnData=[2,3,4];var r=o,s=r.root,a=r.columnData,l=r.size,c=r.padding;return o.columns=zS({stacked:!1,root:s,data:a,size:l,padding:c,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3}),s.append(o.columns),o.updateColors(i,n),o}return HS(e,t),e.prototype.updateColors=function(t,e){this.columns.forEach((function(i,n){i.fill=t[n],i.stroke=e[n]}))},e.chartType="groupedColumn",e}(WS),YS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),XS=function(t){function e(i,n,o,r,s,a){void 0===r&&(r=e.data),void 0===s&&(s=[0,16]),void 0===a&&(a="stackedColumnTooltip");var l=t.call(this,i,a)||this,c=l,d=c.root,u=c.size,h=c.padding;return l.stackedColumns=zS({stacked:!0,root:d,data:r,size:u,padding:h,xScaleDomain:[0,1,2],yScaleDomain:s,xScalePadding:.3}),d.append([].concat.apply([],l.stackedColumns)),l.updateColors(n,o),l}return YS(e,t),e.prototype.updateColors=function(t,e){this.stackedColumns.forEach((function(i,n){return i.forEach((function(i){i.fill=t[n],i.stroke=e[n]}))}))},e.chartType="stackedColumn",e.data=[[8,12,16],[6,9,12],[2,3,4]],e}(WS),qS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$S=function(t){function e(i,n,o){return t.call(this,i,n,o,e.data,[0,10],"normalizedColumnTooltip")||this}return qS(e,t),e.chartType="normalizedColumn",e.data=[[10,10,10],[6,7,8],[2,4,6]],e}(XS),ZS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),JS=function(t){function e(e,i,n){var o=t.call(this,e,"groupedBarTooltip")||this,r=o.padding,s=o.size,a=new ng.BandScale;a.domain=[0,1,2],a.range=[r,s-r],a.paddingInner=.3,a.paddingOuter=.3;var l=new ng.LinearScale;l.domain=[0,4],l.range=[s-r,r];var c=l.convert(0),d=a.bandwidth;return o.bars=[2,3,4].map((function(t,e){var i=new ng.Rect;return i.x=r,i.y=a.convert(e),i.width=c-l.convert(t),i.height=d,i.strokeWidth=1,i.crisp=!0,i})),o.updateColors(i,n),o.root.append(o.bars),o}return ZS(e,t),e.prototype.updateColors=function(t,e){this.bars.forEach((function(i,n){i.fill=t[n],i.stroke=e[n]}))},e.chartType="groupedBar",e}(WS),QS=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tx=function(t){function e(i,n,o,r,s,a){void 0===r&&(r=e.data),void 0===s&&(s=[0,16]),void 0===a&&(a="stackedBarTooltip");var l=t.call(this,i,a)||this,c=l.size,d=l.padding,u=new ng.BandScale;u.domain=[0,1,2],u.range=[d,c-d],u.paddingInner=.3,u.paddingOuter=.3;var h=new ng.LinearScale;h.domain=s,h.range=[c-d,d];var p=h.convert(0),f=u.bandwidth;return l.bars=r.map((function(t){return t.map((function(t,e){var i=new ng.Rect;return i.x=d,i.y=u.convert(e),i.width=p-h.convert(t),i.height=f,i.strokeWidth=1,i.crisp=!0,i}))})),l.updateColors(n,o),l.root.append([].concat.apply([],l.bars)),l}return QS(e,t),e.prototype.updateColors=function(t,e){this.bars.forEach((function(i,n){return i.forEach((function(i){i.fill=t[n],i.stroke=e[n]}))}))},e.chartType="stackedBar",e.data=[[8,12,16],[6,9,12],[2,3,4]],e}(WS),ex=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ix=function(t){function e(i,n,o){return t.call(this,i,n,o,e.data,[0,10],"normalizedBarTooltip")||this}return ex(e,t),e.chartType="normalizedBar",e.data=[[10,10,10],[6,7,8],[2,4,6]],e}(tx),nx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ox=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},rx=ng.toRadians,sx=function(t){function e(e,i,n,o,r){void 0===o&&(o=.6),void 0===r&&(r="doughnutTooltip");var s=t.call(this,e,r)||this,a=(s.size-2*s.padding)/2,l=a+s.padding,c=[[rx(-90),rx(30)],[rx(30),rx(120)],[rx(120),rx(180)],[rx(180),rx(210)],[rx(210),rx(240)],[rx(240),rx(270)]];return s.sectors=c.map((function(t){var e=ox(t,2),i=e[0],n=e[1],r=new ng.Sector;return r.centerX=l,r.centerY=l,r.innerRadius=a*o,r.outerRadius=a,r.startAngle=i,r.endAngle=n,r.stroke=void 0,r.strokeWidth=1,r})),s.updateColors(i,n),s.root.append(s.sectors),s}return nx(e,t),e.prototype.updateColors=function(t,e){this.sectors.forEach((function(i,n){i.fill=t[n%t.length],i.stroke=e[n%e.length]}))},e.chartType="doughnut",e}(BS),ax=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lx=function(t){function e(e,i,n){return t.call(this,e,i,n,0,"pieTooltip")||this}return ax(e,t),e.chartType="pie",e}(sx),cx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dx=function(t){function e(e,i,n){var o=t.call(this,e,"lineTooltip")||this;return o.data=[[9,7,8,5,6],[5,6,3,4,1],[1,3,4,8,7]],o.lines=US(o.root,o.data,o.size,o.padding),o.updateColors(i,n),o}return cx(e,t),e.prototype.updateColors=function(t,e){this.lines.forEach((function(e,i){e.stroke=t[i]}))},e.chartType="line",e}(WS),ux=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hx=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},px=function(t){function e(e,i,n){var o=t.call(this,e,"scatterTooltip")||this,r=o.size,s=o.padding,a=new ng.LinearScale;a.domain=[-.5,4],a.range=[2*s,r-s];var l=new ng.LinearScale;l.domain=[-.5,3.5],l.range=[r-s,s];var c=[];[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]].forEach((function(t){t.forEach((function(t){var e=hx(t,2),i=e[0],n=e[1],o=new ng.Arc;o.strokeWidth=1,o.centerX=a.convert(i),o.centerY=l.convert(n),o.radius=2.5,c.push(o)}))})),o.points=c,o.updateColors(i,n);var d=new ng.Group;return d.setClipRectInGroupCoordinateSpace(new ng.BBox(s,s,r-2*s,r-2*s)),d.append(o.points),o.root.append(d),o}return ux(e,t),e.prototype.updateColors=function(t,e){this.points.forEach((function(i,n){i.stroke=e[n%e.length],i.fill=t[n%t.length]}))},e.chartType="scatter",e}(WS),fx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gx=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},vx=function(t){function e(e,i,n){var o=t.call(this,e,"bubbleTooltip")||this,r=o.size,s=o.padding,a=new ng.LinearScale;a.domain=[0,1],a.range=[2*s,r-s];var l=new ng.LinearScale;l.domain=[0,1],l.range=[r-s,s];var c=[];[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]].forEach((function(t){t.forEach((function(t){var e=gx(t,3),i=e[0],n=e[1],o=e[2],r=new ng.Arc;r.strokeWidth=1,r.centerX=a.convert(i),r.centerY=l.convert(n),r.radius=o,r.fillOpacity=.7,c.push(r)}))})),o.points=c,o.updateColors(i,n);var d=new ng.Group;return d.setClipRectInGroupCoordinateSpace(new ng.BBox(s,s,r-2*s,r-2*s)),d.append(o.points),o.root.append(d),o}return fx(e,t),e.prototype.updateColors=function(t,e){this.points.forEach((function(i,n){i.stroke=e[n%e.length],i.fill=t[n%t.length]}))},e.chartType="bubble",e}(WS),yx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),mx=function(t){function e(i,n,o,r){void 0===r&&(r=e.data);var s=t.call(this,i,"groupedAreaTooltip")||this,a=s.size,l=s.padding,c=new ng.BandScale;c.domain=[0,1,2],c.paddingInner=1,c.paddingOuter=0,c.range=[l+.5,a-l-.5];var d=new ng.LinearScale;d.domain=[0,6],d.range=[a-l+.5,l];var u=2*r.length-1,h=[],p=d.convert(0);return r.forEach((function(t,e){var i=c.convert(e);t.forEach((function(t,n){var o=d.convert(t),r=h[n]||(h[n]=[]);r[e]={x:i,y:o},r[u-e]={x:i,y:p}}))})),s.areas=h.reverse().map((function(t){var e=new ng.Path;e.strokeWidth=1,e.fillOpacity=.7;var i=e.path;return i.clear(),t.forEach((function(t,e){return i[e>0?"lineTo":"moveTo"](t.x,t.y)})),i.closePath(),e})),s.updateColors(n,o),s.root.append(s.areas),s}return yx(e,t),e.prototype.updateColors=function(t,e){this.areas.forEach((function(i,n){i.fill=t[n],i.stroke=e[n]}))},e.chartType="area",e.data=[[1,3,5],[2,6,4],[5,3,1]],e}(WS),bx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Sx=function(t){function e(i,n,o,r,s){void 0===r&&(r=e.data),void 0===s&&(s="stackedAreaTooltip");var a=t.call(this,i,s)||this,l=a.size,c=a.padding,d=new ng.BandScale;d.domain=[0,1,2],d.paddingInner=1,d.paddingOuter=0,d.range=[c+.5,l-c-.5];var u=new ng.LinearScale;u.domain=[0,16],u.range=[l-c+.5,c+.5];var h=2*r.length-1,p=[];return r.forEach((function(t,e){var i=d.convert(e),n=0;t.forEach((function(t,o){var r=u.convert(n+t),s=p[o]||(p[o]=[]);s[e]={x:i,y:r},s[h-e]={x:i,y:u.convert(n)},n+=t}))})),a.areas=p.map((function(t){var e=new ng.Path;e.strokeWidth=1;var i=e.path;return i.clear(),t.forEach((function(t,e){return i[e>0?"lineTo":"moveTo"](t.x,t.y)})),i.closePath(),e})),a.updateColors(n,o),a.root.append(a.areas),a}return bx(e,t),e.prototype.updateColors=function(t,e){this.areas.forEach((function(i,n){i.fill=t[n],i.stroke=e[n]}))},e.chartType="stackedArea",e.data=[[2,3,2],[3,6,5],[6,2,2]],e}(WS),xx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cx=function(t){function e(i,n,o,r){return void 0===r&&(r=e.data),t.call(this,i,n,o,r,"normalizedAreaTooltip")||this}return xx(e,t),e.chartType="normalizedArea",e.data=Sx.data.map((function(t){var e=t.reduce((function(t,e){return t+e}),0);return t.map((function(t){return t/e*16}))})),e}(Sx),wx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ex=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},Ox=function(t){function e(e,i,n){var o=t.call(this,e,"histogramTooltip")||this,r=o.padding,s=o.size,a=[2,5,11,13,10,6,1],l=new ng.LinearScale;l.domain=[0,a.length],l.range=[r,s-r];var c=new ng.LinearScale;c.domain=[0,a.reduce((function(t,e){return Math.max(t,e)}),0)],c.range=[s-r,r];var d=c.convert(0);return o.bars=a.map((function(t,e){var i=c.convert(t),n=l.convert(e),o=l.convert(e+1),r=new ng.Rect;return r.x=n,r.y=i,r.width=o-n,r.height=d-i,r.strokeWidth=1,r.crisp=!0,r})),o.updateColors(i,n),o.root.append(o.bars),o}return wx(e,t),e.prototype.updateColors=function(t,e){var i=Ex(t,1)[0],n=Ex(e,1)[0];this.bars.forEach((function(t){t.fill=i,t.stroke=n}))},e.chartType="histogram",e}(WS),Dx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ax=function(t){function e(e,i,n){var o=t.call(this,e,"columnLineComboTooltip")||this;o.columnData=[3,4],o.lineData=[[5,4,6,5,4]];var r=o,s=r.root,a=r.columnData,l=r.lineData,c=r.size,d=r.padding;return o.columns=zS({stacked:!1,root:s,data:a,size:c,padding:d,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(o.columns),o.lines=US(s,l,c,d),o.updateColors(i,n),o}return Dx(e,t),e.prototype.updateColors=function(t,e){this.columns.forEach((function(i,n){i.fill=t[n],i.stroke=e[n]})),this.lines.forEach((function(e,i){e.stroke=t[i+2]}))},e.chartType="columnLineCombo",e}(WS),Tx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),kx=function(t){function e(e,i,n){var o=t.call(this,e,"areaColumnComboTooltip")||this;o.columnData=[3,4.5],o.areaData=[[5,4,6,5,4]];var r=o,s=r.root,a=r.columnData,l=r.areaData,c=r.size,d=r.padding;o.columns=zS({stacked:!1,root:s,data:a,size:c,padding:d,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5});var u=new ng.BandScale;u.range=[d,c-d],u.domain=[0,1,2,3,4],u.paddingInner=1,u.paddingOuter=0;var h=new ng.LinearScale;h.range=[c-d,d],h.domain=[0,6];var p=[],f=h.convert(0),g=u.convert(0);return l.forEach((function(t,e){var i=p[e]||(p[e]=[]);t.forEach((function(t,e){var n=t,o=e,r=u.convert(o),s=h.convert(n);i[e]={x:r,y:s}}));var n=u.convert(t.length-1);p[e].push({x:n,y:f},{x:g,y:f})})),o.areas=p.map((function(t){var e=new ng.Path;e.strokeWidth=1,e.fillOpacity=.8;var i=e.path;return t.forEach((function(t,e){return i[e>0?"lineTo":"moveTo"](t.x,t.y)})),e})),s.append(o.areas),s.append([].concat.apply([],o.columns)),o.updateColors(i,n),o}return Tx(e,t),e.prototype.updateColors=function(t,e){this.areas.forEach((function(i,n){i.fill=t[n],i.stroke=e[n]})),this.columns.forEach((function(i,n){i.fill=t[n+1],i.stroke=e[n+1]}))},e.chartType="areaColumnCombo",e}(WS),Mx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Rx=function(t){function e(e,i,n){var o=t.call(this,e,"customComboTooltip")||this;o.columnData=[3,4],o.lineData=[[5,4,6,5,4]];var r=o,s=r.root,a=r.columnData,l=r.lineData,c=r.size,d=r.padding;o.columns=zS({stacked:!1,root:s,data:a,size:c,padding:d,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(o.columns),o.lines=US(s,l,c,d);var u=new ng.Line;u.x1=d,u.y1=d,u.x2=d,u.y2=c-d+3,u.stroke="grey";var h=new ng.Line;h.x1=d-3+1,h.y1=c-d,h.x2=c-d+1,h.y2=c-d,h.stroke="grey";var p=new ng.Path;return o.buildPenIconPath(p),p.fill="whitesmoke",p.stroke="darkslategrey",p.strokeWidth=1,s.append([h,u,p]),o.updateColors(i,n),o}return Mx(e,t),e.prototype.updateColors=function(t,e){this.columns.forEach((function(i,n){i.fill=t[n],i.stroke=e[n]})),this.lines.forEach((function(e,i){e.stroke=t[i+2]}))},e.prototype.buildPenIconPath=function(t){var e=t.path;e.moveTo(25.76,43.46),e.lineTo(31.27,48.53),e.moveTo(49.86,22),e.lineTo(49.86,22),e.cubicCurveTo(49.01994659053345,21.317514933510974,47.89593834348529,21.09645997825817,46.86,21.41),e.lineTo(46.86,21.41),e.cubicCurveTo(45.55460035985361,21.77260167850787,44.38777081121966,22.517979360321792,43.51,23.55),e.lineTo(25.51,43.8),e.lineTo(25.43,43.89),e.lineTo(23.01,51.89),e.lineTo(22.83,52.46),e.lineTo(31.02,48.86),e.lineTo(49.02,28.52),e.lineTo(49.02,28.52),e.cubicCurveTo(49.940716461596224,27.521914221246085,50.54302631059587,26.2720342455763,50.75,24.93),e.lineTo(50.75,24.93),e.cubicCurveTo(50.95363374988308,23.866379846512814,50.62080640232334,22.77066734274871,49.86,22),e.closePath(),e.moveTo(41.76,25.5),e.lineTo(47.34,30.5),e.moveTo(40.74,26.65),e.lineTo(46.25,31.71)},e.chartType="customCombo",e}(BS),Px=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Nx=function(){return(Nx=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Lx=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ix={columnGroup:{column:KS,stackedColumn:XS,normalizedColumn:$S},barGroup:{bar:JS,stackedBar:tx,normalizedBar:ix},pieGroup:{pie:lx,doughnut:sx},lineGroup:{line:dx},scatterGroup:{scatter:px,bubble:vx},areaGroup:{area:mx,stackedArea:Sx,normalizedArea:Cx},histogramGroup:{histogram:Ox},combinationGroup:{columnLineCombo:Ax,areaColumnCombo:kx,customCombo:Rx}},Fx=function(t){function e(i,n,o,r){void 0===r&&(r=it);var s=t.call(this,e.TEMPLATE)||this;return s.wrappers={},s.chartController=i,s.fills=n,s.strokes=o,s.chartGroups=Nx({},r),s}return Px(e,t),e.prototype.init=function(){var t=this;!this.chartController.customComboExists()&&this.chartGroups.combinationGroup&&(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter((function(t){return"customCombo"!==t})));var e=this.getGui();Object.keys(this.chartGroups).forEach((function(i){var n=t.chartGroups[i],o=t.createBean(new q({title:t.chartTranslationService.translate(i),suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal"}));n.forEach((function(e){var n,r=null===(n=Ix[i])||void 0===n?void 0:n[e];if(r){var s=document.createElement("div");s.classList.add("ag-chart-mini-thumbnail");var a=r.chartType;t.addManagedListener(s,"click",(function(){t.chartController.setChartType(a),t.updateSelectedMiniChart()})),t.wrappers[a]=s,t.createBean(new r(s,t.fills,t.strokes)),o.addItem(s)}else c.warnOnce("invalid chartGroupsDef config '".concat(i).concat(Ix[i]?".".concat(e):"","'"))})),e.appendChild(o.getGui())})),this.updateSelectedMiniChart()},e.prototype.updateSelectedMiniChart=function(){var t=this.chartController.getChartType();for(var e in this.wrappers){var i=e===t;this.wrappers[e].classList.toggle("ag-selected",i)}},e.TEMPLATE='<div class="ag-chart-settings-mini-wrapper"></div>',Lx([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),Lx([r],e.prototype,"init",null),e}(s),_x=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Gx=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Bx=function(t){function e(i){var n=t.call(this,e.TEMPLATE)||this;return n.miniChartsContainers=[],n.cardItems=[],n.activePaletteIndex=0,n.palettes=[],n.themes=[],n.chartController=i,n}return _x(e,t),e.prototype.postConstruct=function(){var t=this;this.resetPalettes(),this.ePrevBtn.insertAdjacentElement("afterbegin",c.createIconNoSpan("previous",this.gridOptionsService)),this.eNextBtn.insertAdjacentElement("afterbegin",c.createIconNoSpan("next",this.gridOptionsService)),this.addManagedListener(this.ePrevBtn,"click",(function(){return t.setActivePalette(t.getPrev(),"left")})),this.addManagedListener(this.eNextBtn,"click",(function(){return t.setActivePalette(t.getNext(),"right")})),this.addManagedListener(this.chartController,Ib.EVENT_CHART_TYPE_CHANGED,(function(){return t.resetPalettes(!0)})),this.addManagedListener(this.chartController,Ib.EVENT_CHART_API_UPDATE,(function(){return t.resetPalettes(!0)})),this.scrollSelectedIntoView()},e.prototype.scrollSelectedIntoView=function(){var t=this;setTimeout((function(){var e=t.miniChartsContainers.find((function(t){return!t.getGui().classList.contains("ag-hidden")})).getGui().querySelector(".ag-selected");if(e){var i=e.offsetParent;i&&t.eMiniChartsContainer.scrollTo(0,i.offsetTop)}}),250)},e.prototype.resetPalettes=function(t){var e,i,n=this,o=this.chartController.getPalettes(),r=null===(i=null===(e=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===e?void 0:e.settingsPanel)||void 0===i?void 0:i.chartGroupsDef;c.shallowCompare(o,this.palettes)&&!t||this.isAnimating||(this.palettes=o,this.themes=this.chartController.getThemes(),this.activePaletteIndex=this.themes.findIndex((function(t){return t===n.chartController.getChartThemeName()})),this.cardItems=[],c.clearElement(this.eCardSelector),this.destroyMiniCharts(),this.palettes.forEach((function(t,e){var i=n.activePaletteIndex===e,o=t.fills,s=t.strokes,a=n.createBean(new Fx(n.chartController,o,s,r));n.miniChartsContainers.push(a),n.eMiniChartsContainer.appendChild(a.getGui()),n.addCardLink(e),i?a.updateSelectedMiniChart():a.setDisplayed(!1)})),c.setDisplayed(this.eNavBar,this.palettes.length>1),c.radioCssClass(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected"))},e.prototype.addCardLink=function(t){var e=this,i=document.createElement("div");i.classList.add("ag-chart-settings-card-item"),this.addManagedListener(i,"click",(function(){e.setActivePalette(t,t<e.activePaletteIndex?"left":"right")})),this.eCardSelector.appendChild(i),this.cardItems.push(i)},e.prototype.getPrev=function(){var t=this.activePaletteIndex-1;return t<0&&(t=this.palettes.length-1),t},e.prototype.getNext=function(){var t=this.activePaletteIndex+1;return t>=this.palettes.length&&(t=0),t},e.prototype.setActivePalette=function(t,e){var i=this;if(!this.isAnimating&&this.activePaletteIndex!==t){c.radioCssClass(this.cardItems[t],"ag-selected","ag-not-selected");var n=this.miniChartsContainers[this.activePaletteIndex],o=n.getGui(),r=this.miniChartsContainers[t],s=r.getGui();n.updateSelectedMiniChart(),r.updateSelectedMiniChart();var a="left"===e?-1:1,l=s.style.left="".concat(c.getAbsoluteWidth(this.getGui())*a,"px");this.activePaletteIndex=t,this.isAnimating=!0;r.setDisplayed(!0),n.addCssClass("ag-animating"),r.addCssClass("ag-animating"),this.chartController.setChartThemeName(this.themes[t]),window.setTimeout((function(){o.style.left="".concat(-parseFloat(l),"px"),s.style.left="0px"}),0),window.setTimeout((function(){i.isAnimating=!1,n.removeCssClass("ag-animating"),r.removeCssClass("ag-animating"),n.setDisplayed(!1)}),300)}},e.prototype.destroyMiniCharts=function(){c.clearElement(this.eMiniChartsContainer),this.miniChartsContainers=this.destroyBeans(this.miniChartsContainers)},e.prototype.destroy=function(){this.destroyMiniCharts(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-chart-settings-wrapper">\n            <div ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>\n            <div ref="eNavBar" class="ag-chart-settings-nav-bar">\n                <div ref="ePrevBtn" class="ag-chart-settings-prev">\n                    <button type="button" class="ag-button ag-chart-settings-prev-button"></button>\n                </div>\n                <div ref="eCardSelector" class="ag-chart-settings-card-selector"></div>\n                <div ref="eNextBtn" class="ag-chart-settings-next">\n                    <button type="button" class="ag-button ag-chart-settings-next-button"></button>\n                </div>\n            </div>\n        </div>',Gx([n("resizeObserverService")],e.prototype,"resizeObserverService",void 0),Gx([o("eMiniChartsContainer")],e.prototype,"eMiniChartsContainer",void 0),Gx([o("eNavBar")],e.prototype,"eNavBar",void 0),Gx([o("eCardSelector")],e.prototype,"eCardSelector",void 0),Gx([o("ePrevBtn")],e.prototype,"ePrevBtn",void 0),Gx([o("eNextBtn")],e.prototype,"eNextBtn",void 0),Gx([r],e.prototype,"postConstruct",null),e}(s),Vx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),jx=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Wx=function(t){function e(e){var i=t.call(this)||this;i.tabs=[];var n=e.controller,o=e.panels,r=e.chartOptionsService;return i.chartController=n,i.chartOptionsService=r,i.panels=o,i}return Vx(e,t),e.prototype.init=function(){var t=this;this.panels.forEach((function(e){var i=e.replace("chart","").toLowerCase(),n=t.createTab(e,i,t.getPanelClass(i)),o=n.comp,r=n.tab;t.tabs.push(r),t.addDestroyFunc((function(){return t.destroyBean(o)}))})),this.tabbedLayout=new nt({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0}),this.getContext().createBean(this.tabbedLayout)},e.prototype.createTab=function(t,e,i){var n=document.createElement("div");n.classList.add("ag-chart-tab","ag-chart-".concat(e));var o=new i(this.chartController,this.chartOptionsService);this.getContext().createBean(o),n.appendChild(o.getGui());var r=document.createElement("div"),s=this.chartTranslationService.translate(e);return r.innerText=s,{comp:o,tab:{title:r,titleLabel:s,bodyPromise:G.resolve(n),getScrollableContainer:function(){return n.querySelector(".ag-scrollable-container")||n},name:t}}},e.prototype.showTab=function(t){var e=this.tabs[t];this.tabbedLayout.showItem(e)},e.prototype.getGui=function(){return this.tabbedLayout&&this.tabbedLayout.getGui()},e.prototype.destroy=function(){this.parentComponent&&this.parentComponent.isAlive()&&this.destroyBean(this.parentComponent),t.prototype.destroy.call(this)},e.prototype.getPanelClass=function(t){switch(t){case e.TAB_DATA:return Wb;case e.TAB_FORMAT:return FS;default:return Bx}},e.TAB_DATA="data",e.TAB_FORMAT="format",jx([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),jx([r],e.prototype,"init",null),e}(s),zx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ux=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Hx=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},Kx=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},Yx=function(t){function e(i,n,o,r){var s=t.call(this,e.TEMPLATE)||this;return s.eChartContainer=i,s.eMenuPanelContainer=n,s.chartController=o,s.chartOptionsService=r,s.buttons={chartSettings:["menu",function(){return s.showMenu(s.defaultPanel)}],chartData:["menu",function(){return s.showMenu("chartData")}],chartFormat:["menu",function(){return s.showMenu("chartFormat")}],chartLink:["linked",function(t){return s.toggleDetached(t)}],chartUnlink:["unlinked",function(t){return s.toggleDetached(t)}],chartDownload:["save",function(){return s.saveChart()}]},s.panels=[],s.buttonListenersDestroyFuncs=[],s.menuVisible=!1,s}return zx(e,t),e.prototype.postConstruct=function(){var t=this;this.createButtons(),this.addManagedListener(this.eventService,l.EVENT_CHART_CREATED,(function(e){var i;e.chartId===t.chartController.getChartId()&&(Boolean(null===(i=t.gridOptionsService.get("chartToolPanelsDef"))||void 0===i?void 0:i.defaultToolPanel)&&t.showMenu(t.defaultPanel,!1))})),this.refreshMenuClasses(),!this.gridOptionsService.get("suppressChartToolPanelsButton")&&this.panels.length>0&&(this.getGui().classList.add("ag-chart-tool-panel-button-enable"),this.addManagedListener(this.eHideButton,"click",this.toggleMenu.bind(this))),this.addManagedListener(this.chartController,Ib.EVENT_CHART_API_UPDATE,this.createButtons.bind(this))},e.prototype.isVisible=function(){return this.menuVisible},e.prototype.getExtraPaddingDirections=function(){var t=this,e=[];return["chartLink","chartUnlink","chartDownload"].some((function(e){return t.chartToolbarOptions.includes(e)}))&&e.push("top"),["chartSettings","chartData","chartFormat"].some((function(e){return t.chartToolbarOptions.includes(e)}))&&e.push(this.gridOptionsService.get("enableRtl")?"left":"right"),e},e.prototype.getToolbarOptions=function(){var t,e,i,n=this;if(Boolean(this.gridOptionsService.get("chartToolPanelsDef"))){var o=[this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"],r={defaultItems:o},s=(c=this.gridOptionsService.getCallback("getChartToolbarItems"))?c(r).filter((function(t){if(!ot.includes(t)){var e=rt.includes(t)?"AG Grid: '".concat(t,"' is a Chart Tool Panel option and will be ignored since 'chartToolPanelsDef' is used. Please use 'chartToolPanelsDef.panels' grid option instead"):"AG Grid: '".concat(t,"' is not a valid Chart Toolbar Option");return console.warn(e),!1}return!0})):o,a=null===(e=null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.panels)||void 0===e?void 0:e.map((function(t){var e=st[t];return e||console.warn("AG Grid - invalid panel in chartToolPanelsDef.panels: '".concat(t,"'")),e})).filter((function(t){return Boolean(t)}));this.panels=a||Object.values(st),this.chartController.isPivotChart()&&(this.panels=this.panels.filter((function(t){return"chartData"!==t})));var l=null===(i=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===i?void 0:i.defaultToolPanel;return this.defaultPanel=l&&st[l]||this.panels[0],this.panels.length>0?Kx([this.panels[0]],Hx(s),!1):s}var c,d=["chartSettings","chartData","chartFormat",this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"];if(c=this.gridOptionsService.getCallback("getChartToolbarItems")){var u=this.gridOptionsService.get("suppressChartToolPanelsButton");d=c(r={defaultItems:u?d:ot}).filter((function(t){if(!n.buttons[t])return console.warn("AG Grid: '".concat(t,"' is not a valid Chart Toolbar Option")),!1;if(!u&&rt.includes(t)){var e="AG Grid: '".concat(t,"' is a Chart Tool Panel option and will be ignored. Please use 'chartToolPanelsDef.panels' grid option instead");return console.warn(e),!1}return!0})),u||(d=d.concat(rt))}this.chartController.isPivotChart()&&(d=d.filter((function(t){return"chartData"!==t})));var h=["chartUnlink","chartLink","chartDownload"];return this.panels=d.filter((function(t){return-1===h.indexOf(t)})),this.defaultPanel=this.panels[0],d.filter((function(t){return-1!==h.indexOf(t)||n.panels.length&&t===n.panels[0]}))},e.prototype.toggleDetached=function(t){var e=t.target,i=e.classList.contains("ag-icon-linked");e.classList.toggle("ag-icon-linked",!i),e.classList.toggle("ag-icon-unlinked",i);var n=i?"chartUnlinkToolbarTooltip":"chartLinkToolbarTooltip",o=this.chartTranslationService.translate(n);o&&(e.title=o),this.chartController.detachChartRange()},e.prototype.createButtons=function(){var t=this;this.buttonListenersDestroyFuncs.forEach((function(t){return t()})),this.buttonListenersDestroyFuncs=[],this.chartToolbarOptions=this.getToolbarOptions();var e=this.eMenu;c.clearElement(e),this.chartToolbarOptions.forEach((function(i){var n=t.buttons[i],o=Hx(n,2),r=o[0],s=o[1],a=c.createIconNoSpan(r,t.gridOptionsService,void 0,!0);a.classList.add("ag-chart-menu-icon");var l=t.chartTranslationService.translate(i+"ToolbarTooltip");l&&a instanceof HTMLElement&&(a.title=l),t.buttonListenersDestroyFuncs.push(t.addManagedListener(a,"click",s)),e.appendChild(a)}))},e.prototype.saveChart=function(){var t={type:e.EVENT_DOWNLOAD_CHART};this.dispatchEvent(t)},e.prototype.createMenuPanel=function(t){var e=this,i=this.environment.chartMenuPanelWidth(),n=this.menuPanel=this.createBean(new at({minWidth:i,width:i,height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return n.setParentComponent(this),this.eMenuPanelContainer.appendChild(n.getGui()),this.tabbedMenu=this.createBean(new Wx({controller:this.chartController,type:this.chartController.getChartType(),panels:this.panels,chartOptionsService:this.chartOptionsService})),this.addManagedListener(n,s.EVENT_DESTROYED,(function(){return e.destroyBean(e.tabbedMenu)})),new G((function(i){window.setTimeout((function(){n.setBodyComponent(e.tabbedMenu),e.tabbedMenu.showTab(t),i(n),e.addManagedListener(e.eChartContainer,"click",(function(t){e.getGui().contains(t.target)||e.menuVisible&&e.hideMenu()}))}),100)}))},e.prototype.showContainer=function(){this.menuPanel&&(this.menuVisible=!0,this.showParent(this.menuPanel.getWidth()),this.refreshMenuClasses())},e.prototype.toggleMenu=function(){this.menuVisible?this.hideMenu():this.showMenu()},e.prototype.showMenu=function(t,e){var i=this;if(void 0===e&&(e=!0),e||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.menuPanel&&!t)this.showContainer();else{var n=t||this.defaultPanel,o=this.panels.indexOf(n);o<0&&(console.warn("AG Grid: '".concat(t,"' is not a valid Chart Tool Panel name")),o=this.panels.indexOf(this.defaultPanel)),this.menuPanel?(this.tabbedMenu.showTab(o),this.showContainer()):this.createMenuPanel(o).then(this.showContainer.bind(this))}e||setTimeout((function(){i.isAlive()&&i.eMenuPanelContainer.classList.remove("ag-no-transition")}),500)},e.prototype.hideMenu=function(){var t=this;this.hideParent(),window.setTimeout((function(){t.menuVisible=!1,t.refreshMenuClasses()}),500)},e.prototype.refreshMenuClasses=function(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible),this.gridOptionsService.get("suppressChartToolPanelsButton")||(this.eHideButtonIcon.classList.toggle("ag-icon-contracted",this.menuVisible),this.eHideButtonIcon.classList.toggle("ag-icon-expanded",!this.menuVisible))},e.prototype.showParent=function(t){this.eMenuPanelContainer.style.minWidth="".concat(t,"px")},e.prototype.hideParent=function(){this.eMenuPanelContainer.style.minWidth="0"},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.menuPanel&&this.menuPanel.isAlive()&&this.destroyBean(this.menuPanel),this.tabbedMenu&&this.tabbedMenu.isAlive()&&this.destroyBean(this.tabbedMenu)},e.EVENT_DOWNLOAD_CHART="downloadChart",e.TEMPLATE='<div>\n        <div class="ag-chart-menu" ref="eMenu"></div>\n        <button class="ag-button ag-chart-menu-close" ref="eHideButton">\n            <span class="ag-icon ag-icon-contracted" ref="eHideButtonIcon"></span>\n        </button>\n    </div>',Ux([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),Ux([o("eMenu")],e.prototype,"eMenu",void 0),Ux([o("eHideButton")],e.prototype,"eHideButton",void 0),Ux([o("eHideButtonIcon")],e.prototype,"eHideButtonIcon",void 0),Ux([r],e.prototype,"postConstruct",null),e}(s),Xx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qx=function(){return(qx=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},$x=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Zx=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jx=function(t){function e(i){var n=t.call(this,e.TEMPLATE)||this;return n.chartMenu=i,n.destroyableChartListeners=[],n.editing=!1,n}return Xx(e,t),e.prototype.init=function(){var t=this;this.addManagedListener(this.getGui(),"keydown",(function(e){t.editing&&"Enter"===e.key&&!e.shiftKey&&(t.handleEndEditing(),e.preventDefault())})),this.addManagedListener(this.getGui(),"input",(function(){t.editing&&t.updateHeight()})),this.addManagedListener(this.getGui(),"blur",(function(){return t.endEditing()}))},e.prototype.refreshTitle=function(t,e){var i,n,o=this;this.chartController=t,this.chartOptionsService=e;try{for(var r=Zx(this.destroyableChartListeners),s=r.next();!s.done;s=r.next()){(0,s.value)()}}catch(t){i={error:t}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}this.destroyableChartListeners=[];var a=this.chartController.getChartProxy().getChart(),l=a.scene.canvas.element,c=this.addManagedListener(l,"dblclick",(function(t){var e=a.title;if(e&&e.node.containsPoint(t.offsetX,t.offsetY)){var i=e.node.computeBBox(),n=e.node.inverseTransformPoint(i.x,i.y);o.startEditing(qx(qx({},i),n),l.width)}})),d=!1,u=this.addManagedListener(l,"mousemove",(function(t){var e=a.title,i=!!(e&&e.enabled&&e.node.containsPoint(t.offsetX,t.offsetY));d!==i&&(l.style.cursor=i?"pointer":""),d=i}));this.destroyableChartListeners=[c,u]},e.prototype.startEditing=function(t,e){if(!(this.chartMenu&&this.chartMenu.isVisible()||this.editing)){this.editing=!0;var i=Math.max(Math.min(t.width+20,e),300),n=this.getGui();n.classList.add("currently-editing");var o=n.style;o.fontFamily=this.chartOptionsService.getChartOption("title.fontFamily"),o.fontWeight=this.chartOptionsService.getChartOption("title.fontWeight"),o.fontStyle=this.chartOptionsService.getChartOption("title.fontStyle"),o.fontSize=this.chartOptionsService.getChartOption("title.fontSize")+"px",o.color=this.chartOptionsService.getChartOption("title.color");var r=this.chartOptionsService.getChartOption("title.text"),s=r===this.chartTranslationService.translate("titlePlaceholder");n.value=s?"":r;var a=r.split(/\r?\n/g).length;o.left=Math.round(t.x+t.width/2-i/2-1)+"px",o.top=Math.round(t.y+t.height/2-a*this.getLineHeight()/2-2)+"px",o.width=Math.round(i)+"px",o.lineHeight=this.getLineHeight()+"px",this.updateHeight(),n.focus()}},e.prototype.updateHeight=function(){var t=this.getGui(),e=this.chartOptionsService.getChartOption("title.text").split(/\r?\n/g).length,i=t.value.split(/\r?\n/g).length;t.style.height=Math.round(Math.max(e,i)*this.getLineHeight())+4+"px"},e.prototype.getLineHeight=function(){var t=this.chartOptionsService.getChartOption("title.lineHeight");return t?parseInt(t):Math.round(1.2*parseInt(this.chartOptionsService.getChartOption("title.fontSize")))},e.prototype.handleEndEditing=function(){var t=this,e=this.chartOptionsService.getChartOption("title.color");this.chartOptionsService.setChartOption("title.color","rgba(0, 0, 0, 0)"),this.chartOptionsService.awaitChartOptionUpdate((function(){return t.endEditing()})),this.chartOptionsService.awaitChartOptionUpdate((function(){t.chartOptionsService.setChartOption("title.color",e)}))},e.prototype.endEditing=function(){var t=this;if(this.editing){this.editing=!1;var e=this.getGui().value;e&&""!==e.trim()?(this.chartOptionsService.setChartOption("title.text",e),this.chartOptionsService.setChartOption("title.enabled",!0)):(this.chartOptionsService.setChartOption("title.text",""),this.chartOptionsService.setChartOption("title.enabled",!1)),this.getGui().classList.remove("currently-editing"),this.chartOptionsService.awaitChartOptionUpdate((function(){t.eventService.dispatchEvent({type:"chartTitleEdit"})}))}},e.TEMPLATE='<textarea\n             class="ag-chart-title-edit"\n             style="padding:0; border:none; border-radius: 0; min-height: 0; text-align: center; resize: none;" />\n        ',$x([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),$x([r],e.prototype,"init",null),e}(s),Qx=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tC=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},eC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qx(e,t),e.prototype.getData=function(t){if(t.crossFiltering){if(t.grouping)return console.warn("AG Grid: crossing filtering with row grouping is not supported."),{chartData:[],columnNames:{}};if(!this.gridOptionsService.isRowModelType("clientSide"))return console.warn("AG Grid: crossing filtering is only supported in the client side row model."),{chartData:[],columnNames:{}}}this.gridOptionsService.isRowModelType("serverSide")&&t.pivoting&&this.updatePivotKeysForSSRM();var e=this.extractRowsFromGridRowModel(t);return e.chartData=this.aggregateRowsByDimension(t,e.chartData),e},e.prototype.extractRowsFromGridRowModel=function(t){var i,n=this,o=[],r={},s={},a={},l={},d=[];if(t.crossFiltering)l=this.getFilteredRowNodes(),i=(d=this.getAllRowNodes()).length;else{var u=this.gridRowModel.getRowCount()-1;i=(t.endRow>=0?Math.min(t.endRow,u):u)-t.startRow+1}for(var h=function(i){var c={},u=t.crossFiltering?d[i]:p.gridRowModel.getRow(i+t.startRow);t.dimensionCols.forEach((function(o){var r=o.colId,l=n.columnModel.getGridColumn(r);if(l){var d=n.valueService.getValue(l,u);if(t.grouping){var h=d&&d.toString?String(d.toString()):"",p=e.getGroupLabels(u,h);c[r]={labels:p,toString:function(){return this.labels.filter((function(t){return!!t})).reverse().join(" - ")}},u.group&&(s[p.toString()]=i);var f=p.slice(1,p.length).toString();f&&(a[f]=s[f])}else c[r]=d}else c[pC.DEFAULT_CATEGORY]=i+1})),t.valueCols.forEach((function(e){var i=[],o=e.getColDef().pivotKeys;o&&(i=o.slice());var s=e.getColDef().headerName;s&&i.push(s),i.length>0&&(r[e.getId()]=i);var a=e.getColId();if(t.crossFiltering){var d=a+"-filtered-out",h=null!=(p=n.valueService.getValue(e,u))&&"function"==typeof p.toNumber?p.toNumber():p;l[u.id]?(c[a]=h,c[d]=t.aggFunc||t.isScatter?void 0:0):(c[a]=t.aggFunc||t.isScatter?void 0:0,c[d]=h)}else{var p;(p=n.valueService.getValue(e,u))&&p.hasOwnProperty("toString")&&(p=parseFloat(p.toString())),c[a]=null!=p&&"function"==typeof p.toNumber?p.toNumber():p}})),u.footer&&(c.footer=!0),o.push(c)},p=this,f=0;f<i;f++)h(f);if(t.grouping){var g=c.values(a);o=o.filter((function(t,e){return!t.footer&&!c.includes(g,e)}))}return{chartData:o,columnNames:r}},e.prototype.aggregateRowsByDimension=function(t,e){var i=this,n=t.dimensionCols;if(!t.aggFunc||0===n.length)return e;var o=c.last(n),r=o&&o.colId,s={},l=[];return e.forEach((function(t){var e=s;n.forEach((function(i){var o=i.colId,s=t[o];if(o===r){var a=e[s];a||(a={__children:[]},n.forEach((function(e){var i=e.colId;a[i]=t[i]})),e[s]=a,l.push(a)),a.__children.push(t)}else e[s]||(e[s]={}),e=e[s]}))})),B.__assertRegistered(a.RowGroupingModule,"Charting Aggregation",this.context.getGridId())&&l.forEach((function(e){return t.valueCols.forEach((function(n){if(t.crossFiltering)t.valueCols.forEach((function(n){var o=n.getColId(),r=e.__children.filter((function(t){return void 0!==t[o]})).map((function(t){return t[o]})),s=i.aggregationStage.aggregateValues(r,t.aggFunc);e[n.getId()]=s&&void 0!==s.value?s.value:s;var a="".concat(o,"-filtered-out"),l=e.__children.filter((function(t){return void 0!==t[a]})).map((function(t){return t[a]})),c=i.aggregationStage.aggregateValues(l,t.aggFunc);e[a]=c&&void 0!==c.value?c.value:c}));else{var o=e.__children.map((function(t){return t[n.getId()]})),r=0;B.__assertRegistered(a.RowGroupingModule,"Charting Aggregation",i.context.getGridId())&&(r=i.aggregationStage.aggregateValues(o,t.aggFunc)),e[n.getId()]=r&&void 0!==r.value?r.value:r}}))})),l},e.prototype.updatePivotKeysForSSRM=function(){var t=this.columnModel.getSecondaryColumns();if(t){var e=this.extractPivotKeySeparator(t);t.forEach((function(t){if(""===e)t.getColDef().pivotKeys=[];else{var i=t.getColId().split(e);t.getColDef().pivotKeys=i.slice(0,i.length-1)}}))}},e.prototype.extractPivotKeySeparator=function(t){if(0===t.length)return"";var e=function(t,i){var n=t.getGroupId();return t.getParent()?e(t.getParent(),n):i.split(n)[1][0]},i=t[0];return null==i.getParent()?"":e(i.getParent(),i.getColId())},e.getGroupLabels=function(t,e){for(var i=[e];t&&0!==t.level;)(t=t.parent)&&i.push(t.key);return i},e.prototype.getFilteredRowNodes=function(){var t={};return this.gridRowModel.forEachNodeAfterFilterAndSort((function(e){t[e.id]=e})),t},e.prototype.getAllRowNodes=function(){var t=[];return this.gridRowModel.forEachNode((function(e){t.push(e)})),this.sortRowNodes(t)},e.prototype.sortRowNodes=function(t){var e=this.sortController.getSortOptions();return!e||0==e.length?t:this.rowNodeSorter.doFullSort(t,e)},tC([n("rowModel")],e.prototype,"gridRowModel",void 0),tC([n("valueService")],e.prototype,"valueService",void 0),tC([n("columnModel")],e.prototype,"columnModel",void 0),tC([n("rowNodeSorter")],e.prototype,"rowNodeSorter",void 0),tC([n("sortController")],e.prototype,"sortController",void 0),tC([E("aggregationStage")],e.prototype,"aggregationStage",void 0),e}(i),iC=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),nC=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},oC=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return iC(i,t),i.prototype.getColumn=function(t){return this.columnModel.getPrimaryColumn(t)},i.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},i.prototype.getColDisplayName=function(t){return this.columnModel.getDisplayNameForColumn(t,"chart")},i.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},i.prototype.getGroupDisplayColumns=function(){return this.columnModel.getGroupDisplayColumns()},i.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},i.prototype.isPivotActive=function(){return this.columnModel.isPivotActive()},i.prototype.getChartColumns=function(){var t=this,e=this.columnModel.getAllDisplayedColumns(),i=new Set,n=new Set;return e.forEach((function(e){var o=e.getColDef(),r=o.chartDataType;if(r)switch(r){case"category":case"time":return void i.add(e);case"series":return void n.add(e);case"excluded":return;default:console.warn("AG Grid: unexpected chartDataType value '".concat(r,"' supplied, instead use 'category', 'series' or 'excluded'"))}"ag-Grid-AutoColumn"!==o.colId?e.isPrimary()?(t.isNumberCol(e)?n:i).add(e):n.add(e):i.add(e)})),{dimensionCols:i,valueCols:n}},i.prototype.isNumberCol=function(t){if("ag-Grid-AutoColumn"===t.getColId())return!1;var e=this.rowRenderer.getRowNode({rowIndex:0,rowPinned:null});if(!e)return!1;var i=this.valueService.getValue(t,e);return null==i&&(i=this.extractLeafData(e,t)),null!=i&&"function"==typeof i.toNumber&&(i=i.toNumber()),"number"==typeof i},i.prototype.extractLeafData=function(t,e){if(!t.allLeafChildren)return null;for(var i=0;i<t.allLeafChildren.length;i++){var n=t.allLeafChildren[i],o=this.valueService.getValue(e,n);if(null!=o)return o}return null},nC([n("columnModel")],i.prototype,"columnModel",void 0),nC([n("valueService")],i.prototype,"valueService",void 0),nC([n("rowRenderer")],i.prototype,"rowRenderer",void 0),i=nC([e("chartColumnService")],i)}(i),rC=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sC=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},aC=function(t){function e(e){var i,n=this;return(n=t.call(this)||this).suppressComboChartWarnings=!1,n.chartDataModel=e,n.seriesChartTypes=null!==(i=e.params.seriesChartTypes)&&void 0!==i?i:[],n}return rC(e,t),e.prototype.init=function(){this.initComboCharts()},e.prototype.update=function(t){this.seriesChartTypes=null!=t?t:this.seriesChartTypes,this.initComboCharts(),this.updateSeriesChartTypes()},e.prototype.initComboCharts=function(){var t=this.seriesChartTypes&&this.seriesChartTypes.length>0;("customCombo"===this.chartDataModel.chartType||t)&&(this.chartDataModel.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])},e.prototype.updateSeriesChartTypes=function(){this.chartDataModel.isComboChart()&&(this.seriesChartTypes=this.seriesChartTypes.map((function(t){var e=["groupedColumn","stackedColumn","stackedArea"].includes(t.chartType);return t.secondaryAxis=!e&&t.secondaryAxis,t})),"customCombo"!==this.chartDataModel.chartType?this.updateChartSeriesTypesForBuiltInCombos():this.updateSeriesChartTypesForCustomCombo())},e.prototype.updateSeriesChartTypesForCustomCombo=function(){var t=this;this.seriesChartTypes&&this.seriesChartTypes.length>0||this.suppressComboChartWarnings||console.warn("AG Grid: 'seriesChartTypes' are required when the 'customCombo' chart type is specified."),this.seriesChartTypes=this.seriesChartTypes.map((function(t){return e.SUPPORTED_COMBO_CHART_TYPES.includes(t.chartType)||(console.warn("AG Grid: invalid chartType '".concat(t.chartType,"' supplied in 'seriesChartTypes', converting to 'line' instead.")),t.chartType="line"),t}));var i=this.chartDataModel.valueColState.map((function(e){t.savedCustomSeriesChartTypes&&0!==t.savedCustomSeriesChartTypes.length||(t.savedCustomSeriesChartTypes=t.seriesChartTypes);var i=t.savedCustomSeriesChartTypes.find((function(t){return t.colId===e.colId}));return i||(e.selected&&!t.suppressComboChartWarnings&&console.warn("AG Grid: no 'seriesChartType' found for colId = '".concat(e.colId,"', defaulting to 'line'.")),{colId:e.colId,chartType:"line",secondaryAxis:!1})}));this.seriesChartTypes=i,this.savedCustomSeriesChartTypes=i,this.suppressComboChartWarnings=!0},e.prototype.updateChartSeriesTypesForBuiltInCombos=function(){var t=this.chartDataModel,e=t.chartType,i=t.valueColState,n="columnLineCombo"===e?"groupedColumn":"stackedArea",o="columnLineCombo"===e?"line":"groupedColumn",r=i.filter((function(t){return t.selected})),s=Math.ceil(r.length/2);this.seriesChartTypes=r.map((function(t,e){var i=e>=s?o:n;return{colId:t.colId,chartType:i,secondaryAxis:!1}}))},e.SUPPORTED_COMBO_CHART_TYPES=["line","groupedColumn","stackedColumn","area","stackedArea"],sC([r],e.prototype,"init",null),e}(i),lC=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cC=function(){return(cC=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},dC=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},uC=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},hC=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},pC=function(t){function e(e){var i=t.call(this)||this;return i.unlinked=!1,i.chartData=[],i.valueColState=[],i.dimensionColState=[],i.columnNames={},i.crossFiltering=!1,i.grouping=!1,i.params=e,i.chartId=e.chartId,i.chartType=e.chartType,i.pivotChart=e.pivotChart,i.chartThemeName=e.chartThemeName,i.aggFunc=e.aggFunc,i.referenceCellRange=e.cellRange,i.suppliedCellRange=e.cellRange,i.suppressChartRanges=e.suppressChartRanges,i.unlinked=!!e.unlinkChart,i.crossFiltering=!!e.crossFiltering,i}return lC(e,t),e.prototype.init=function(){this.datasource=this.createManagedBean(new eC),this.chartColumnService=this.createManagedBean(new oC),this.comboChartModel=this.createManagedBean(new aC(this)),this.updateCellRanges(),this.updateData()},e.prototype.updateModel=function(t){var e=t.cellRange,i=t.chartType,n=t.pivotChart,o=t.chartThemeName,r=t.aggFunc,s=t.suppressChartRanges,a=t.unlinkChart,l=t.crossFiltering,c=t.seriesChartTypes;e!==this.suppliedCellRange&&(this.dimensionCellRange=void 0,this.valueCellRange=void 0),this.chartType=i,this.pivotChart=n,this.chartThemeName=o,this.aggFunc=r,this.referenceCellRange=e,this.suppliedCellRange=e,this.suppressChartRanges=s,this.unlinked=!!a,this.crossFiltering=!!l,this.updateSelectedDimension(null==e?void 0:e.columns),this.updateCellRanges(),(this.isComboChart()||c)&&this.comboChartModel.update(c),this.unlinked||this.updateData()},e.prototype.updateCellRanges=function(t){this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);var e=this.chartColumnService.getChartColumns(),i=e.dimensionCols,n=e.valueCols,o=this.getAllColumnsFromRanges();t&&this.updateColumnState(t),this.setDimensionCellRange(i,o,t),this.setValueCellRange(n,o,t),t||(this.resetColumnState(),this.syncDimensionCellRange()),this.comboChartModel.updateSeriesChartTypes()},e.prototype.updateData=function(){var t=this.getRowIndexes(),e=t.startRow,i=t.endRow;this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();var n={aggFunc:this.aggFunc,dimensionCols:[this.getSelectedDimension()],grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,valueCols:this.getSelectedValueCols(),startRow:e,endRow:i,isScatter:c.includes(["scatter","bubble"],this.chartType)},o=this.datasource.getData(n),r=o.chartData,s=o.columnNames;this.chartData=r,this.columnNames=s},e.prototype.isGrouping=function(){var t=this.gridOptionsService.get("treeData"),e=t?null:this.chartColumnService.getRowGroupColumns(),i=t||e&&e.length>0,n=this.getSelectedDimension().colId,o=this.chartColumnService.getGroupDisplayColumns().map((function(t){return t.getColId()})).some((function(t){return t===n}));return!!i&&o},e.prototype.getSelectedValueCols=function(){return this.valueColState.filter((function(t){return t.selected})).map((function(t){return t.column}))},e.prototype.getSelectedDimension=function(){return this.dimensionColState.filter((function(t){return t.selected}))[0]},e.prototype.getColDisplayName=function(t){return this.chartColumnService.getColDisplayName(t)},e.prototype.isPivotMode=function(){return this.chartColumnService.isPivotMode()},e.prototype.getChartDataType=function(t){var e=this.chartColumnService.getColumn(t);return e?e.getColDef().chartDataType:void 0},e.prototype.isPivotActive=function(){return this.chartColumnService.isPivotActive()},e.prototype.createCellRange=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:e,startColumn:t===lt.DIMENSION?e[0]:this.referenceCellRange.startColumn,type:t}},e.prototype.getAllColumnsFromRanges=function(){if(this.pivotChart)return c.convertToSet(this.chartColumnService.getAllDisplayedColumns());var t=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&t.push.apply(t,hC([],uC(this.dimensionCellRange.columns),!1)),this.valueCellRange&&t.push.apply(t,hC([],uC(this.valueCellRange.columns),!1)),c.convertToSet(t)},e.prototype.getRowIndexes=function(){var t=0,e=0,i=this.rangeService,n=this.valueCellRange;if(i&&n){t=i.getRangeStartRow(n).rowIndex;var o=i.getRangeEndRow(n);e="bottom"===o.rowPinned?-1:o.rowIndex}return{startRow:t,endRow:e}},e.prototype.resetColumnState=function(){var t=this,i=this.chartColumnService.getChartColumns(),n=i.dimensionCols,o=i.valueCols,r=this.getAllColumnsFromRanges(),s=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];var a=!1,l=1,d=this.suppliedCellRange.columns[0];n.forEach((function(e){var i="ag-Grid-AutoColumn"===e.getColId(),n=!1;t.crossFiltering&&t.aggFunc?d.getColId()===e.getColId()&&(n=!0):n=!!i||!a&&r.has(e),t.dimensionColState.push({column:e,colId:e.getColId(),displayName:t.getColDisplayName(e),selected:n,order:l++}),n&&(a=!0)}));var u={colId:e.DEFAULT_CATEGORY,displayName:this.chartTranslationService.translate("defaultCategory"),selected:!a,order:0};this.dimensionColState.unshift(u);var h=this.referenceCellRange.columns.filter((function(t){return o.has(t)}));o.forEach((function(e){s&&c.includes(t.referenceCellRange.columns,e)&&(e=h.shift()),t.valueColState.push({column:e,colId:e.getColId(),displayName:t.getColDisplayName(e),selected:r.has(e),order:l++})}))},e.prototype.updateColumnState=function(t){var e=function(e){return e.colId===t.colId},i=this.dimensionColState,n=this.valueColState;i.filter(e).length>0?i.forEach((function(t){return t.selected=e(t)})):n.filter(e).forEach((function(e){return e.selected=t.selected}));var o=hC(hC([],uC(i),!1),uC(n),!1),r=[];o.forEach((function(e,i){i===t.order&&r.push(t.colId),e.colId!==t.colId&&r.push(e.colId)})),o.forEach((function(t){var e=r.indexOf(t.colId);t.order=e>=0?r.indexOf(t.colId):o.length-1})),this.reorderColState()},e.prototype.reorderColState=function(){var t=function(t,e){return t.order-e.order};this.dimensionColState.sort(t),this.valueColState.sort(t)},e.prototype.setDimensionCellRange=function(t,i,n){var o=this;if(this.dimensionCellRange=void 0,n||this.dimensionColState.length){var r=n;if(this.crossFiltering&&this.aggFunc){var s=this.suppliedCellRange.columns[0];r=this.dimensionColState.filter((function(t){return t.colId===s.getColId()}))[0]}else r&&t.has(r.column)||(r=this.dimensionColState.filter((function(t){return t.selected}))[0]);r&&r.colId!==e.DEFAULT_CATEGORY&&(this.dimensionCellRange=this.createCellRange(lt.DIMENSION,r.column))}else t.forEach((function(t){!o.dimensionCellRange&&i.has(t)&&(o.dimensionCellRange=o.createCellRange(lt.DIMENSION,t))}))},e.prototype.setValueCellRange=function(t,e,i){this.valueCellRange=void 0;var n=[];if(t.forEach((function(t){i&&i.colId===t.getColId()?i.selected&&n.push(i.column):e.has(t)&&n.push(t)})),n.length>0){var o=[];this.valueColState.length>0?o=this.valueColState.map((function(t){return t.colId})):e.forEach((function(t){return o.push(t.getColId())})),n.sort((function(t,e){return o.indexOf(t.getColId())-o.indexOf(e.getColId())})),this.valueCellRange=this.createCellRange.apply(this,hC([lt.VALUE],uC(n),!1))}},e.prototype.updateSelectedDimension=function(t){var e=new Set(t.map((function(t){return t.getColId()}))),i=this.dimensionColState.find((function(t){return e.has(t.colId)}))||this.dimensionColState[0];this.dimensionColState=this.dimensionColState.map((function(t){return cC(cC({},t),{selected:t.colId===i.colId})}))},e.prototype.syncDimensionCellRange=function(){var t=this.getSelectedDimension();t&&t.column&&(this.dimensionCellRange=this.createCellRange(lt.DIMENSION,t.column))},e.prototype.isComboChart=function(){return["columnLineCombo","areaColumnCombo","customCombo"].includes(this.chartType)},e.DEFAULT_CATEGORY="AG-GRID-DEFAULT-CATEGORY",dC([n("rangeService")],e.prototype,"rangeService",void 0),dC([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),dC([r],e.prototype,"init",null),e}(i);function fC(t){return null!=t.chart?t.chart:t}var gC=function(){return(gC=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},vC=function(){function t(t){this.chartProxyParams=t,this.clearThemeOverrides=!1,this.chart=t.chartInstance,this.chartType=t.chartType,this.crossFiltering=t.crossFiltering,this.crossFilterCallback=t.crossFilterCallback,this.standaloneChartType=gb(this.chartType),null==this.chart?this.chart=tb.create(this.getCommonChartOptions()):this.clearThemeOverrides=!0}return t.prototype.getChart=function(){return fC(this.chart)},t.prototype.getChartRef=function(){return this.chart},t.prototype.downloadChart=function(t,e,i){var n=this.chart,o=fC(n),r=e||(o.title?o.title.text:"chart"),s=t||{},a=s.width,l=s.height;tb.download(n,{width:a,height:l,fileName:r,fileFormat:i})},t.prototype.getChartImageDataURL=function(t){return this.getChart().scene.getDataURL(t)},t.prototype.getChartOptions=function(){return this.chart.getOptions()},t.prototype.getChartThemeOverrides=function(){var t;return null!==(t=this.getChartOptions().theme.overrides)&&void 0!==t?t:{}},t.prototype.getChartPalette=function(){return cb.getChartTheme(this.getChartOptions().theme).palette},t.prototype.setPaired=function(t){var e,i=gb(this.chartProxyParams.chartType);tb.updateDelta(this.chart,{theme:{overrides:(e={},e[i]={paired:t},e)}})},t.prototype.isPaired=function(){var t=gb(this.chartProxyParams.chartType);return c.get(this.getChartThemeOverrides(),"".concat(t,".paired"),!0)},t.prototype.lookupCustomChartTheme=function(t){return xb(this.chartProxyParams,t)},t.prototype.transformData=function(t,e,i){return i?t.map((function(t,i){var n=t[e],o=n&&n.toString?n.toString():"",r=gC({},t);return r[e]={id:i,value:n,toString:function(){return o}},r})):t},t.prototype.getCommonChartOptions=function(t){var e,i,n=this.clearThemeOverrides?{}:null!==(i=null===(e=this.chart)||void 0===e?void 0:e.getOptions())&&void 0!==i?i:{},o=null!=this.chart?{overrides:this.getActiveFormattingPanelOverrides()}:{};return this.clearThemeOverrides=!1,gC(gC({},n),{theme:gC(gC({},mb(this.chartProxyParams,this)),t?{overrides:t}:o),container:this.chartProxyParams.parentElement,mode:"integrated"})},t.prototype.getActiveFormattingPanelOverrides=function(){var t,e;if(this.clearThemeOverrides)return{};var i=null===(t=this.chart)||void 0===t?void 0:t.getOptions().theme;return null!==(e=null==i?void 0:i.overrides)&&void 0!==e?e:{}},t.prototype.destroy=function(t){var e=(void 0===t?{}:t).keepChartInstance;if(void 0!==e&&e)return this.chart;this.destroyChart()},t.prototype.destroyChart=function(){this.chart&&(this.chart.destroy(),this.chart=void 0)},t}(),yC=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),mC=function(){return(mC=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},bC=function(t){function e(e){var i=t.call(this,e)||this;return i.crossFilteringAllPoints=new Set,i.crossFilteringSelectedPoints=[],i}return yC(e,t),e.prototype.update=function(t){var e=this.getAxes(t),i=mC(mC({},this.getCommonChartOptions(t.updatedOverrides)),{data:this.getData(t,e),axes:e,series:this.getSeries(t)});tb.update(this.getChartRef(),i)},e.prototype.getData=function(t,e){var i,n=["area","line"].includes(this.standaloneChartType),o="category"===(null===(i=e.filter((function(t){return"bottom"===t.position}))[0])||void 0===i?void 0:i.type);return this.crossFiltering&&n?this.getCrossFilterData(t):this.getDataTransformedData(t,o)},e.prototype.getDataTransformedData=function(t,e){return this.transformData(t.data,t.category.id,e)},e.prototype.getXAxisType=function(t){return t.grouping?"grouped-category":e.isTimeAxis(t)?"time":"category"},e.isTimeAxis=function(t){if(t.category&&t.category.chartDataType)return"time"===t.category.chartDataType;var e=t.data[0];return(e&&e[t.category.id])instanceof Date},e.prototype.crossFilteringReset=function(){this.crossFilteringSelectedPoints=[],this.crossFilteringAllPoints.clear()},e.prototype.crossFilteringPointSelected=function(t){return 0==this.crossFilteringSelectedPoints.length||this.crossFilteringSelectedPoints.includes(t)},e.prototype.crossFilteringDeselectedPoints=function(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length},e.prototype.extractLineAreaCrossFilterSeries=function(t,e){var i=this;return t.map((function(t){var n;return t.yKey=(n=t.yKey,"area"===i.standaloneChartType?e.getCrossFilteringContext().lastSelectedChartId===e.chartId?n+"-total":n:n+"-total"),t.listeners={nodeClick:function(e){var n=e.datum[t.xKey],o=e.event.metaKey||e.event.ctrlKey;i.crossFilteringAddSelectedPoint(o,n),i.crossFilterCallback(e)}},t.marker={formatter:function(t){var n=t.datum[e.category.id];return{fill:t.highlighted?"yellow":t.fill,size:t.highlighted?14:i.crossFilteringPointSelected(n)?8:0}}},"area"===i.standaloneChartType&&(t.fillOpacity=i.crossFilteringDeselectedPoints()?.3:1),"line"===i.standaloneChartType&&(t.strokeOpacity=i.crossFilteringDeselectedPoints()?.3:1),t}))},e.prototype.getCrossFilterData=function(t){var e=this;this.crossFilteringAllPoints.clear();var i=t.fields[0].colId,n="".concat(i,"-filtered-out"),o=t.getCrossFilteringContext().lastSelectedChartId;return t.data.map((function(r){var s=r[t.category.id];e.crossFilteringAllPoints.add(s);var a=e.crossFilteringPointSelected(s);return"area"===e.standaloneChartType&&o===t.chartId&&(r["".concat(i,"-total")]=a?r[i]:r[i]+r[n]),"line"===e.standaloneChartType&&(r["".concat(i,"-total")]=a?r[i]:r[i]+r[n]),r}))},e.prototype.crossFilteringAddSelectedPoint=function(t,e){t?this.crossFilteringSelectedPoints.push(e):this.crossFilteringSelectedPoints=[e]},e}(vC);function SC(t,e){return!1!==e.clone&&e.isMergeableObject(t)?DC(function(t){return Array.isArray(t)?[]:{}}(t),t,e):t}function xC(t,e,i){return t.concat(e).map((function(t){return SC(t,i)}))}function CC(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function wC(t,e){try{return e in t}catch(t){return!1}}function EC(t,e,i){void 0===t&&(t={}),void 0===e&&(e={});var n={};return i.isMergeableObject(t)&&CC(t).forEach((function(e){n[e]=SC(t[e],i)})),CC(e).forEach((function(o){(function(t,e){return wC(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,o)||(wC(t,o)&&i.isMergeableObject(e[o])?n[o]=function(t,e){if(!e.customMerge)return DC;var i=e.customMerge(t);return"function"==typeof i?i:DC}(o,i)(t[o],e[o],i):n[o]=SC(e[o],i))})),n}function OC(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e}(t)}function DC(t,e,i){(i=i||{}).arrayMerge=i.arrayMerge||xC,i.isMergeableObject=i.isMergeableObject||OC,i.cloneUnlessOtherwiseSpecified=SC;var n=Array.isArray(e);return n===Array.isArray(t)?n?i.arrayMerge(t,e,i):EC(t,e,i):SC(e,i)}function AC(t,e){var i=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),o=parseInt(t.slice(5,7),16);return e?"rgba(".concat(i,", ").concat(n,", ").concat(o,", ").concat(e,")"):"rgba(".concat(i,", ").concat(n,", ").concat(o,")")}function TC(t,e){return t.map((function(t){var i=op.Color.fromString(t);return new op.Color(i.r,i.g,i.b,e).toHexString()}))}var kC=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),MC=function(){return(MC=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},RC=function(t){function e(e){return t.call(this,e)||this}return kC(e,t),e.prototype.getAxes=function(t){var e=[{type:this.getXAxisType(t),position:hb(this.chartType)?"left":"bottom"},{type:"number",position:hb(this.chartType)?"bottom":"left"}];if(this.isNormalised()){var i=e[1];i.label=MC(MC({},i.label),{formatter:function(t){return Math.round(t.value)+"%"}})}return e},e.prototype.getSeries=function(t){var e=this,i=t.fields.map((function(i){return{type:e.standaloneChartType,direction:hb(e.chartType)?"horizontal":"vertical",stacked:e.crossFiltering||fb(e.chartType),normalizedTo:e.isNormalised()?100:void 0,xKey:t.category.id,xName:t.category.name,yKey:i.colId,yName:i.displayName}}));return this.crossFiltering?this.extractCrossFilterSeries(i):i},e.prototype.extractCrossFilterSeries=function(t){for(var e,i,n=this,o=this.getChartPalette(),r=function(t,e){return MC(MC({},t),{highlightStyle:{item:{fill:void 0}},fill:null==o?void 0:o.fills[e],stroke:null==o?void 0:o.strokes[e],listeners:{nodeClick:n.crossFilterCallback}})},s=[],a=0;a<t.length;a++){var l=r(t[a],a);s.push(l),s.push((i=void 0,i=(e=l).yKey+"-filtered-out",MC(MC({},DC({},e)),{yKey:i,fill:AC(e.fill,"0.3"),stroke:AC(e.stroke,"0.3"),showInLegend:!1})))}return s},e.prototype.isNormalised=function(){return!this.crossFiltering&&c.includes(["normalizedColumn","normalizedBar"],this.chartType)},e}(bC),PC=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),NC=function(){return(NC=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},LC=function(t){function e(e){return t.call(this,e)||this}return PC(e,t),e.prototype.getAxes=function(t){var e=[{type:this.getXAxisType(t),position:"bottom"},{type:"number",position:"left"}];if(this.isNormalised()){var i=e[1];i.label=NC(NC({},i.label),{formatter:function(t){return Math.round(t.value)+"%"}})}return e},e.prototype.getSeries=function(t){var e=this,i=t.fields.map((function(i){return{type:e.standaloneChartType,xKey:t.category.id,xName:t.category.name,yKey:i.colId,yName:i.displayName,normalizedTo:"normalizedArea"===e.chartType?100:void 0,stacked:["normalizedArea","stackedArea"].includes(e.chartType)}}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(i,t):i},e.prototype.isNormalised=function(){return!this.crossFiltering&&"normalizedArea"===this.chartType},e}(bC),IC=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),FC=function(t){function e(e){return t.call(this,e)||this}return IC(e,t),e.prototype.getAxes=function(t){return[{type:this.getXAxisType(t),position:"bottom"},{type:"number",position:"left"}]},e.prototype.getSeries=function(t){var e=this,i=t.fields.map((function(i){return{type:e.standaloneChartType,xKey:t.category.id,xName:t.category.name,yKey:i.colId,yName:i.displayName}}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(i,t):i},e}(bC),_C=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),GC=function(){return(GC=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},BC=function(t){function e(e){return t.call(this,e)||this}return _C(e,t),e.prototype.update=function(t){var e=t.data,i=t.category,n=GC(GC({},this.getCommonChartOptions(t.updatedOverrides)),{data:this.crossFiltering?this.getCrossFilterData(t):this.transformData(e,i.id),series:this.getSeries(t)});tb.update(this.getChartRef(),n)},e.prototype.getSeries=function(t){var i=this,n=t.fields.length,o={currentOffset:0,offsetAmount:n>1?20:40},r=this.getFields(t).map((function(r){var s,a={type:i.standaloneChartType,angleKey:r.colId,angleName:r.displayName,sectorLabelKey:r.colId,legendItemKey:t.category.id,calloutLabelName:t.category.name,calloutLabelKey:t.category.id};if("doughnut"===i.chartType){var l=e.calculateOffsets(o),c=l.outerRadiusOffset,d=l.innerRadiusOffset,u=r.displayName?{title:{text:r.displayName,showInLegend:n>1}}:void 0;return GC(GC(GC(GC({},a),{outerRadiusOffset:c,innerRadiusOffset:d}),u),{calloutLine:{colors:null===(s=i.getChartPalette())||void 0===s?void 0:s.strokes}})}return a}));return this.crossFiltering?this.extractCrossFilterSeries(r):r},e.prototype.getCrossFilterData=function(t){var e=t.fields[0].colId,i="".concat(e,"-filtered-out");return t.data.map((function(t){var n=t[e]+t[i];return t["".concat(e,"-total")]=n,t[i]=1,t[e]=t[e]/n,t}))},e.prototype.extractCrossFilterSeries=function(t){var e,i=this,n=this.getChartPalette(),o=t[0],r=o.angleKey,s=GC(GC({},e=o),{calloutLabel:{enabled:!1},highlightStyle:{item:{fill:void 0}},radiusKey:e.angleKey,angleKey:e.angleKey+"-total",radiusMin:0,radiusMax:1,listeners:{nodeClick:i.crossFilterCallback}});return[function(t,e){var i,o;return GC(GC({},DC({},s)),{radiusKey:e+"-filtered-out",fills:TC(null!==(i=t.fills)&&void 0!==i?i:n.fills,.3),strokes:TC(null!==(o=t.strokes)&&void 0!==o?o:n.strokes,.3),showInLegend:!1})}(o,r),s]},e.calculateOffsets=function(t){var e=t.currentOffset;t.currentOffset-=t.offsetAmount;var i=t.currentOffset;return t.currentOffset-=t.offsetAmount,{outerRadiusOffset:e,innerRadiusOffset:i}},e.prototype.getFields=function(t){return"pie"===this.chartType?t.fields.slice(0,1):t.fields},e.prototype.crossFilteringReset=function(){},e}(vC),VC=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),jC=function(){return(jC=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},WC=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zC=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},UC=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},HC=function(t){function e(e){return t.call(this,e)||this}return VC(e,t),e.prototype.getAxes=function(t){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]},e.prototype.getSeries=function(t){var e=this.isPaired(),i=this.getSeriesDefinitions(t.fields,e),n=t.category.id===pC.DEFAULT_CATEGORY?void 0:t.category,o=i.map((function(t){var e,i,o,r,s;return(null==t?void 0:t.sizeField)?{type:"bubble",xKey:t.xField.colId,xName:null!==(e=t.xField.displayName)&&void 0!==e?e:void 0,yKey:t.yField.colId,yName:null!==(i=t.yField.displayName)&&void 0!==i?i:void 0,title:"".concat(t.yField.displayName," vs ").concat(t.xField.displayName),sizeKey:t.sizeField.colId,sizeName:null!==(o=t.sizeField.displayName)&&void 0!==o?o:"",labelKey:n?n.id:t.yField.colId,labelName:n?n.name:void 0}:{type:"scatter",xKey:t.xField.colId,xName:null!==(r=t.xField.displayName)&&void 0!==r?r:void 0,yKey:t.yField.colId,yName:null!==(s=t.yField.displayName)&&void 0!==s?s:void 0,title:"".concat(t.yField.displayName," vs ").concat(t.xField.displayName),labelKey:n?n.id:t.yField.colId,labelName:n?n.name:void 0}}));return this.crossFiltering?this.extractCrossFilterSeries(o,t):o},e.prototype.extractCrossFilterSeries=function(t,e){var i=this,n=e.data,o=this.getChartPalette(),r=function(t){return"".concat(t,"-filtered-out")},s=t.map((function(t,e){var s=null==o?void 0:o.fills[e],a=null==o?void 0:o.strokes[e],l=void 0;if("bubble"===t.type){var c=t.sizeKey;l=function(t,e){var i,n,o,s=[1/0,-1/0];if(null!=e)try{for(var a=WC(t),l=a.next();!l.done;l=a.next()){var c=l.value,d=null!==(o=c[e])&&void 0!==o?o:c[r(e)];d<s[0]&&(s[0]=d),d>s[1]&&(s[1]=d)}}catch(t){i={error:t}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}if(s[0]<=s[1])return s}(n,c)}var d=jC(jC({},t.marker),{fill:s,stroke:a,domain:l});return jC(jC({},t),{marker:d,highlightStyle:{item:{fill:"yellow"}},listeners:jC(jC({},t.listeners),{nodeClick:i.crossFilterCallback})})}));return UC(UC([],zC(s),!1),zC(s.map((function(t){var e=t.yKey,n=t.xKey,o={};return"bubble"===t.type&&(o={sizeKey:r(t.sizeKey)}),jC(jC(jC({},t),o),{yKey:r(e),xKey:r(n),marker:jC(jC({},t.marker),{fillOpacity:.3,strokeOpacity:.3}),showInLegend:!1,listeners:jC(jC({},t.listeners),{nodeClick:function(t){var e,o=t.datum[r(n)],s=jC(jC({},t),{xKey:n,datum:jC(jC({},t.datum),(e={},e[n]=o,e))});i.crossFilterCallback(s)}})})}))),!1)},e.prototype.getSeriesDefinitions=function(t,e){if(t.length<2)return[];var i="bubble"===this.chartType;if(e)return i?t.map((function(e,i){return i%3==0?{xField:e,yField:t[i+1],sizeField:t[i+2]}:null})).filter((function(t){return t&&t.yField&&t.sizeField})):t.map((function(e,i){return i%2==0?{xField:e,yField:t[i+1]}:null})).filter((function(t){return t&&t.yField}));var n=t[0];return i?t.map((function(e,i){return i%2==1?{xField:n,yField:e,sizeField:t[i+1]}:null})).filter((function(t){return t&&t.sizeField})):t.filter((function(t,e){return e>0})).map((function(t){return{xField:n,yField:t}}))},e}(bC),KC=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),YC=function(t){function e(e){return t.call(this,e)||this}return KC(e,t),e.prototype.getSeries=function(t){var e=t.fields[0];return[{type:this.standaloneChartType,xKey:e.colId,xName:e.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:!1}]},e.prototype.getAxes=function(t){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]},e}(bC),XC=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qC=function(t){function e(e){var i=t.call(this)||this;return i.chartController=e,i}return XC(e,t),e.prototype.getChartOption=function(t){return c.get(this.getChart(),t,void 0)},e.prototype.setChartOption=function(t,e,i){var n=this,o=this.chartController.getChartSeriesTypes();this.chartController.isComboChart()&&o.push("cartesian");var r={};o.forEach((function(i){r=DC(r,n.createChartOptions({seriesType:i,expression:t,value:e}))})),this.updateChart(r),i||this.raiseChartOptionsChangedEvent()},e.prototype.awaitChartOptionUpdate=function(t){this.chartController.getChartProxy().getChart().waitForUpdate().then((function(){return t()})).catch((function(t){return console.error("AG Grid - chart update failed",t)}))},e.prototype.getAxisProperty=function(t){var e;return c.get(null===(e=this.getChart().axes)||void 0===e?void 0:e[0],t,void 0)},e.prototype.setAxisProperty=function(t,e){var i,n=this,o=this.getChart(),r={};null===(i=o.axes)||void 0===i||i.forEach((function(i){r=DC(r,n.getUpdateAxisOptions(i,t,e))})),this.updateChart(r),this.raiseChartOptionsChangedEvent()},e.prototype.getLabelRotation=function(t){var e=this.getAxis(t);return c.get(e,"label.rotation",void 0)},e.prototype.setLabelRotation=function(t,e){var i=this.getAxis(t);if(i){var n=this.getUpdateAxisOptions(i,"label.rotation",e);this.updateChart(n),this.raiseChartOptionsChangedEvent()}},e.prototype.getSeriesOption=function(t,i){var n=this.getChart().series.find((function(t){return e.isMatchingSeries(i,t)}));return c.get(n,t,void 0)},e.prototype.setSeriesOption=function(t,e,i){var n=this.createChartOptions({seriesType:i,expression:"series.".concat(t),value:e});this.updateChart(n),this.raiseChartOptionsChangedEvent()},e.prototype.getPairedMode=function(){return this.chartController.getChartProxy().isPaired()},e.prototype.setPairedMode=function(t){this.chartController.getChartProxy().setPaired(t)},e.prototype.getAxis=function(t){var e=this.getChart();if(e.axes&&!(e.axes.length<1))return"xAxis"===t?e.axes&&"x"===e.axes[0].direction?e.axes[0]:e.axes[1]:e.axes&&"y"===e.axes[1].direction?e.axes[1]:e.axes[0]},e.prototype.getUpdateAxisOptions=function(t,e,i){var n=gb(this.getChartType());return["number","category","time","grouped-category"].includes(t.type)?this.createChartOptions({seriesType:n,expression:"axes.".concat(t.type,".").concat(e),value:i}):{}},e.prototype.getChartType=function(){return this.chartController.getChartType()},e.prototype.getChart=function(){return this.chartController.getChartProxy().getChart()},e.prototype.updateChart=function(t){var e=this.chartController.getChartProxy().getChartRef();tb.updateDelta(e,t)},e.prototype.createChartOptions=function(t){var e=t.seriesType,i=t.expression,n=t.value,o={},r={theme:{overrides:o}};return c.set(o,"".concat(e,".").concat(i),n),r},e.prototype.raiseChartOptionsChangedEvent=function(){var t=this.chartController.getChartModel(),e={type:l.EVENT_CHART_OPTIONS_CHANGED,chartId:t.chartId,chartType:t.chartType,chartThemeName:this.chartController.getChartThemeName(),chartOptions:t.chartOptions};this.eventService.dispatchEvent(e)},e.isMatchingSeries=function(t,e){return db.includes(t)&&e.type===t},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(i),$C=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ZC=function(){return(ZC=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},JC=function(t){function e(e){return t.call(this,e)||this}return $C(e,t),e.prototype.getAxes=function(t){var e=t?t.fields:[],i=new Map(e.map((function(t){return[t.colId,t]}))),n=this.getYKeys(e,t.seriesChartTypes),o=n.primaryYKeys,r=n.secondaryYKeys,s=[{type:this.getXAxisType(t),position:"bottom"}];return o.length>0&&s.push({type:"number",keys:o,position:"left"}),r.length>0&&r.forEach((function(t){var e=i.get(t);if(e&&e.colId===t){var n={type:"number",keys:[t],position:"right"};s.push(n)}})),s},e.prototype.getSeries=function(t){var e=t.fields,i=t.category,n=t.seriesChartTypes;return e.map((function(t){var e=n.find((function(e){return e.colId===t.colId}));if(e){var o=e.chartType,r=["groupedColumn","groupedBar"].includes(o)?{grouped:!0}:{};return ZC({type:gb(o),xKey:i.id,yKey:t.colId,yName:t.displayName,stacked:["stackedArea","stackedColumn"].includes(o)},r)}}))},e.prototype.getYKeys=function(t,e){var i=[],n=[];return t.forEach((function(t){var o=t.colId,r=e.find((function(t){return t.colId===o}));r&&(r.secondaryAxis?n.push(o):i.push(o))})),{primaryYKeys:i,secondaryYKeys:n}},e}(bC),QC=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tw=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ew=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},iw=function(t){function e(i){var n=t.call(this,e.TEMPLATE)||this;return n.params=i,n}return QC(e,t),e.prototype.init=function(){var t=this,e={chartId:this.params.chartId,pivotChart:this.params.pivotChart,chartType:this.params.chartType,chartThemeName:this.getThemeName(),aggFunc:this.params.aggFunc,cellRange:this.params.cellRange,suppressChartRanges:this.params.suppressChartRanges,unlinkChart:this.params.unlinkChart,crossFiltering:this.params.crossFiltering,seriesChartTypes:this.params.seriesChartTypes},i=this.gridOptionsService.get("enableRtl");this.addCssClass(i?"ag-rtl":"ag-ltr");var n=this.createBean(new pC(e));this.chartController=this.createManagedBean(new Ib(n)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog&&this.addDialog(),this.addMenu(),this.addTitleEditComp(),this.addManagedListener(this.getGui(),"focusin",this.setActiveChartCellRange.bind(this)),this.addManagedListener(this.chartController,Ib.EVENT_CHART_MODEL_UPDATE,this.update.bind(this)),this.addManagedPropertyListeners(["chartThemeOverrides","chartThemes"],this.reactivePropertyUpdate.bind(this)),this.chartMenu&&this.addManagedListener(this.chartMenu,Yx.EVENT_DOWNLOAD_CHART,(function(){return t.downloadChart()})),this.update(),this.raiseChartCreatedEvent()},e.prototype.createChart=function(){var t=this,i=void 0;this.chartProxy&&(i=this.chartProxy.destroy({keepChartInstance:!0}));var n=this.chartController.getChartType(),o={chartType:n,chartInstance:i,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gridOptionsService.get("customChartThemes"),getGridOptionsChartThemeOverrides:function(){return t.getGridOptionsChartThemeOverrides()},getExtraPaddingDirections:function(){var e,i;return null!==(i=null===(e=t.chartMenu)||void 0===e?void 0:e.getExtraPaddingDirections())&&void 0!==i?i:[]},apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:this.params.crossFiltering,crossFilterCallback:function(e,i){t.params.crossFilteringContext.lastSelectedChartId=i?"":t.chartController.getChartId(),i&&t.params.crossFilteringResetCallback(),t.crossFilterService.filter(e,i)},parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartThemeToRestore:this.params.chartThemeName,chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:function(e,i){return t.chartTranslationService.translate(e,i)}};if(this.params.chartOptionsToRestore=void 0,this.chartType=n,this.chartProxy=e.createChartProxy(o),this.chartProxy){var r=this.eChart.querySelector("canvas");r&&r.classList.add("ag-charts-canvas"),this.chartController.setChartProxy(this.chartProxy),this.chartOptionsService=this.createBean(new qC(this.chartController)),this.titleEdit&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}else console.warn("AG Grid: invalid chart type supplied: ",o.chartType)},e.prototype.getChartThemeName=function(){return this.chartController.getChartThemeName()},e.prototype.getChartThemes=function(){return this.chartController.getThemes()},e.prototype.getGridOptionsChartThemeOverrides=function(){return this.gridOptionsService.get("chartThemeOverrides")},e.createChartProxy=function(t){switch(t.chartType){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new RC(t);case"pie":case"doughnut":return new BC(t);case"area":case"stackedArea":case"normalizedArea":return new LC(t);case"line":return new FC(t);case"scatter":case"bubble":return new HC(t);case"histogram":return new YC(t);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new JC(t);default:throw"AG Grid: Unable to create chart as an invalid chartType = '".concat(t.chartType,"' was supplied.")}},e.prototype.addDialog=function(){var t=this,e=this.chartTranslationService.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),i=this.getBestDialogSize(),n=i.width,o=i.height;this.chartDialog=new x({resizable:!0,movable:!0,maximizable:!0,title:e,width:n,height:o,component:this,centered:!0,closable:!0}),this.getContext().createBean(this.chartDialog),this.chartDialog.addEventListener(x.EVENT_DESTROYED,(function(){return t.destroy()}))},e.prototype.getBestDialogSize=function(){var t=this.popupService.getPopupParent(),e=.75*c.getAbsoluteWidth(t),i=.75*c.getAbsoluteHeight(t),n=this.chartProxy.getChart(),o=this.params.insideDialog?850:n.width,r=this.params.insideDialog?470:n.height;return(o>e||r>i)&&(o=Math.min(o,e),(r=Math.round(.553*o))>i&&(r=i,o=Math.min(o,Math.round(r/.553)))),{width:o,height:r}},e.prototype.addMenu=function(){this.params.crossFiltering||(this.chartMenu=this.createBean(new Yx(this.eChartContainer,this.eMenuContainer,this.chartController,this.chartOptionsService)),this.eChartContainer.appendChild(this.chartMenu.getGui()))},e.prototype.addTitleEditComp=function(){this.titleEdit=this.createBean(new Jx(this.chartMenu)),this.eTitleEditContainer.appendChild(this.titleEdit.getGui()),this.chartProxy&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)},e.prototype.update=function(t){var e=this;if((null==t?void 0:t.chartId)&&!this.chartController.update(t))return;this.chartTypeChanged(t)&&this.createChart(),this.updateChart(null==t?void 0:t.chartThemeOverrides),(null==t?void 0:t.chartId)&&this.chartProxy.getChart().waitForUpdate().then((function(){e.chartController.raiseChartApiUpdateEvent()}))},e.prototype.updateChart=function(t){var e=this,i=this.chartProxy,n=this.chartController.getSelectedValueColState().map((function(t){return{colId:t.colId,displayName:t.displayName}})),o=this.chartController.getChartData();if(!this.handleEmptyChart(o,n)){var r=this.chartController.getChartUpdateParams(t);i.update(r),this.chartProxy.getChart().waitForUpdate().then((function(){e.chartController.raiseChartUpdatedEvent()})),this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}},e.prototype.chartTypeChanged=function(t){var e=ew([this.chartController.getChartType(),null==t?void 0:t.chartType],2),i=e[0],n=e[1];return this.chartType!==i||!!n&&this.chartType!==n},e.prototype.getChartModel=function(){return this.chartController.getChartModel()},e.prototype.getChartImageDataURL=function(t){return this.chartProxy.getChartImageDataURL(t)},e.prototype.handleEmptyChart=function(t,e){var i=this.chartController.isPivotChart()&&!this.chartController.isPivotMode(),n=1;this.chartController.isActiveXYChart()&&(n="bubble"===this.chartController.getChartType()?3:2);var o=e.length<n||0===t.length;if(this.eChart){var r=i||o;c.setDisplayed(this.eChart,!r),c.setDisplayed(this.eEmpty,r)}return i?(this.eEmpty.innerText=this.chartTranslationService.translate("pivotChartRequiresPivotMode"),!0):!!o&&(this.eEmpty.innerText=this.chartTranslationService.translate("noDataToChart"),!0)},e.prototype.downloadChart=function(t,e,i){this.chartProxy.downloadChart(t,e,i)},e.prototype.openChartToolPanel=function(t){var e=t?st[t]:t;this.chartMenu.showMenu(e)},e.prototype.closeChartToolPanel=function(){this.chartMenu.hideMenu()},e.prototype.getChartId=function(){return this.chartController.getChartId()},e.prototype.getUnderlyingChart=function(){return this.chartProxy.getChartRef()},e.prototype.crossFilteringReset=function(){this.chartProxy.crossFilteringReset()},e.prototype.setActiveChartCellRange=function(t){this.getGui().contains(t.relatedTarget)||(this.chartController.setChartRange(!0),this.gridApi.focusService.clearFocusedCell())},e.prototype.getThemeName=function(){var t=this.gridOptionsService.get("chartThemes")||Lb;if(0===t.length)throw new Error("Cannot create chart: no chart themes available.");var e=this.params.chartThemeName;return c.includes(t,e)?e:t[0]},e.prototype.validateCustomThemes=function(){var t=this.getChartThemes(),e=this.gridOptionsService.get("customChartThemes");e&&c.getAllKeysInObjects([e]).forEach((function(e){c.includes(t,e)||console.warn("AG Grid: a custom chart theme with the name '"+e+"' has been supplied but not added to the 'chartThemes' list")}))},e.prototype.reactivePropertyUpdate=function(){this.chartController.setChartThemeName(this.getThemeName(),!0);var t=this.getChartId(),e=this.chartController.isCrossFilterChart()?"crossFilter":this.getChartModel().modelType,i=this.gridOptionsService.get("chartThemeOverrides")||{};this.update({type:"".concat(e,"ChartUpdate"),chartId:t,chartThemeOverrides:i})},e.prototype.raiseChartCreatedEvent=function(){var t=this,e={type:l.EVENT_CHART_CREATED,chartId:this.chartController.getChartId()};this.chartProxy.getChart().waitForUpdate().then((function(){t.eventService.dispatchEvent(e)}))},e.prototype.raiseChartDestroyedEvent=function(){var t={type:l.EVENT_CHART_DESTROYED,chartId:this.chartController.getChartId()};this.eventService.dispatchEvent(t)},e.prototype.destroy=function(){var e;t.prototype.destroy.call(this),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.destroyBean(this.titleEdit),this.chartDialog&&this.chartDialog.isAlive()&&this.destroyBean(this.chartDialog),null===(e=this.onDestroyColorSchemeChangeListener)||void 0===e||e.call(this);var i=this.getGui();c.clearElement(i),c.removeFromParent(i),this.raiseChartDestroyedEvent()},e.TEMPLATE='<div class="ag-chart" tabindex="-1">\n            <div ref="eChartContainer" tabindex="-1" class="ag-chart-components-wrapper">\n                <div ref="eChart" class="ag-chart-canvas-wrapper"></div>\n                <div ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>\n            </div>\n            <div ref="eTitleEditContainer"></div>\n            <div ref="eMenuContainer" class="ag-chart-docked-container" style="min-width: 0px;"></div>\n        </div>',tw([o("eChart")],e.prototype,"eChart",void 0),tw([o("eChartContainer")],e.prototype,"eChartContainer",void 0),tw([o("eMenuContainer")],e.prototype,"eMenuContainer",void 0),tw([o("eEmpty")],e.prototype,"eEmpty",void 0),tw([o("eTitleEditContainer")],e.prototype,"eTitleEditContainer",void 0),tw([n("chartCrossFilterService")],e.prototype,"crossFilterService",void 0),tw([n("chartTranslationService")],e.prototype,"chartTranslationService",void 0),tw([n("gridApi")],e.prototype,"gridApi",void 0),tw([n("popupService")],e.prototype,"popupService",void 0),tw([r],e.prototype,"init",null),e}(s),nw=function(){return(nw=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ow=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]])}return i},rw=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},sw=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function aw(t){return t.version,null==t.version&&(t.version=function(t){var e,i,n=t;if(null!=t.version)return t.version;var o=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return Object.keys(t||{}).some((function(t){return e.includes(t)}))},r=n.chartOptions,s=o(r,"seriesDefaults")?null==r?void 0:r.seriesDefaults:null==r?void 0:r[Object.keys(r)[0]],a={"27.0.0":o(n,"seriesChartTypes"),"26.2.0":!o(r,"seriesDefaults"),"26.1.0":o(null==s?void 0:s.highlightStyle,"item"),"26.0.0":o(null==s?void 0:s.highlightStyle,"series"),"25.1.0":o(null==s?void 0:s.label,"minAngle"),"25.0.0":o(n,"modelType","aggFunc","unlinkChart","suppressChartRanges")||o(s,"lineDash","lineDashOffset"),"24.0.0":o(n,"chartThemeName","chart")||o(r,"series"),"23.2.0":o(r,"navigator"),"23.0.0":o(null===(i=null===(e=null==r?void 0:r.legend)||void 0===e?void 0:e.item)||void 0===i?void 0:i.marker,"shape"),"22.1.0":o(n,"chartPalette","chartType")},l=Object.entries(a).filter((function(t){var e=rw(t,2);return e[0],e[1]})),c=rw(l[0],1)[0];return void 0===c?"27.1.0":c}(t)),t=xw("23.0.0",t,lw),t=xw("24.0.0",t,cw),t=xw("25.1.0",t,dw),t=xw("26.0.0",t,uw),t=xw("26.1.0",t,hw),t=xw("26.2.0",t,pw),t=xw("28.0.0",t,fw),t=xw("28.2.0",t,gw),t=xw("29.0.0",t,vw),t=xw("29.1.0",t,yw),t=xw("29.2.0",t,mw),t=xw("30.0.0",t,bw),t=xw("31.0.0",t,Sw),t=xw("31.0.1",t=function(t){return t=Tw("chartOptions.*.width",t),t=Ew("chartOptions.*.axes.category.label.autoRotate",!0,t=Tw("chartOptions.*.height",t))}(t),(function(t){return t}))}function lw(t){return t=Aw("chartOptions.legend.item.marker.type","shape",t),t=Aw("chartOptions.seriesDefaults.marker.type","shape",t),t=Aw("chartOptions.legend.padding","spacing",t)}function cw(t){var e,i=t=Tw("chartOptions.seriesDefaults.marker.minSize",t),n=i.chartType,o=i.chartPalette,r=i.chartOptions,s=r.xAxis,a=r.yAxis,l=ow(r,["xAxis","yAxis"]),c=ow(i,["chartType","chartPalette","chartOptions"]),d=function(t){switch(t){case"bar":case"stackedBar":case"normalizedBar":return["number","category"];case"groupedBar":return["number","grouped-category"];case"column":case"stackedColumn":case"normalizedColumn":case"line":case"area":case"stackedArea":case"normalizedArea":case"histogram":return["category","number"];case"groupedColumn":return["grouped-category","number"];case"scatter":case"bubble":return["number","number"];default:return}}(n),u=null==d?void 0:d.map((function(t,e){return nw({type:t},0===e?s:a)}));return nw({chartType:n,chartThemeName:null!==(e={borneo:"ag-default",material:"ag-material",bright:"ag-vivid"}[o])&&void 0!==e?e:"ag-default",chartOptions:nw(nw({},l),{axes:u,xAxis:s,yAxis:a})},c)}function dw(t){return t=Aw("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",t)}function uw(t){return t=Tw("chart",t=Mw("chartOptions.seriesDefaults.highlightStyle",t,(function(t){var e=t.dimOpacity,i=ow(t,["dimOpacity"]);return nw(nw({},i),null!=e?{series:{dimOpacity:e}}:{})}))),t=Tw("chartOptions.seriesDefaults.tooltipClass",t),t=ww("chartOptions.axes[].label.rotation",0,t=Tw("chartOptions.seriesDefaults.tooltipTracking",t)),t=ww("chartOptions.axes[].label.rotation",335,t)}function hw(t){var e=function(t){var e=t.item,i=t.series,n=ow(t,["item","series"]);return nw({item:nw(nw({},n),e)},i?{series:i}:{})};return t=Mw("chartOptions.seriesDefaults.highlightStyle",t,e),t=Mw("chartOptions.series[].highlightStyle",t,e)}function pw(t){t=Ow("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",t),t=Ow("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",t),t=Tw("chartOptions.seriesDefaults.fill",t=Ow("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",t)),t=Tw("chartOptions.seriesDefaults.stroke",t),t=Tw("chartOptions.seriesDefaults.callout.colors",t),t=Tw("chartOptions.xAxis",t);var e=t=Tw("chartOptions.yAxis",t),i=e.chartType,n=e.chartOptions,o=n.axes;n.series;var r=n.seriesDefaults,s=ow(n,["axes","series","seriesDefaults"]),a=ow(e,["chartType","chartOptions"]),l=[gb(i)],c={};if(!l.includes("pie")){var d={top:{},bottom:{},left:{},right:{}},u=o.map((function(t){var e,i=t.type,n=ow(t,["type"]);return(e={})[i]=nw(nw({},d),n),e})).reduce(Rw,{});vb.filter((function(t){return null==u[t]})).forEach((function(t){u[t]=nw({},d)})),c.axes=u}var h=l.map((function(t){var e;return(e={})[t]=nw(nw(nw({},c),{series:r}),s),e})).reduce(Rw,{});return t=nw(nw({},a),{chartType:i,chartOptions:h})}function fw(t){return t=Tw("chartOptions.*.title.padding",t),t=Tw("chartOptions.*.subtitle.padding",t),t=Ew("chartOptions.*.axes.*.title.enabled",!1,t=Tw("chartOptions.*.axes.*.title.padding",t))}function gw(t){return t=Aw("chartOptions.pie.series.callout","calloutLine",t),t=Aw("chartOptions.pie.series.label","calloutLabel",t),t=Aw("chartOptions.pie.series.labelKey","sectorLabelKey",t),t=Aw("chartOptions.pie.series.labelName","sectorLabelName",t)}function vw(t){return t=Dw("chartOptions.scatter.series.fill","chartOptions.scatter.series.marker.fill",t),t=Dw("chartOptions.scatter.series.fillOpacity","chartOptions.scatter.series.marker.fillOpacity",t),t=Dw("chartOptions.scatter.series.stroke","chartOptions.scatter.series.marker.stroke",t),t=Dw("chartOptions.scatter.series.strokeOpacity","chartOptions.scatter.series.marker.strokeOpacity",t),t=Ow("chartOptions.scatter.series.paired","chartOptions.scatter.paired",t=Dw("chartOptions.scatter.series.strokeWidth","chartOptions.scatter.series.marker.strokeWidth",t))}function yw(t){return t=Tw("chartOptions.axes[].tick.count",t)}function mw(t){return t=Mw("chartOptions.*.tooltip",t,(function(t){var e,i,n,o,r=t.tracking,s=ow(t,["tracking"]),a=nw({},s);return!1===r?(null!==(e=a.position)&&void 0!==e||(a.position={type:"pointer"}),null!==(i=a.range)&&void 0!==i||(a.range="nearest")):!0===r&&(null!==(n=a.position)&&void 0!==n||(a.position={type:"node"}),null!==(o=a.range)&&void 0!==o||(a.range="nearest")),a}))}function bw(t){return t=Aw("chartOptions.pie.series.labelKey","sectorLabelKey",t),t=Ew("chartOptions.common.legend.position","right",t=function t(e,i,n){var o;"string"==typeof e&&(e=e.split("."));var r=e[0];e.length>1&&(n[r]=t(e.slice(1),i,null!==(o=n[r])&&void 0!==o?o:{}));Object.keys(n).includes(r)||(n[r]=i);return n}("chartOptions.common.legend.enabled",!0,t=Tw("chartOptions.*.series.flipXY",t=mw(t=yw(t=Aw("chartOptions.pie.series.labelName","sectorLabelName",t))))))}function Sw(t){var e=Aw("chartOptions.column","bar",t),i={"ag-pastel":"ag-sheets","ag-solar":"ag-polychroma"}[e.chartThemeName]||e.chartThemeName;return nw(nw({},e),{chartThemeName:i})}function xw(t,e,i){if(Cw(t)>Cw(e.version)){var n=i(e);return n.version=t,n}return e}function Cw(t){var e=function(t){var e="string"==typeof t?t.split(".").map((function(t){return Number(t)})):[];if(3!==e.length||e.some((function(t){return isNaN(t)})))throw new Error("AG Grid - Illegal version string: "+t);return{major:e[0],minor:e[1],patch:e[2]}}(t);return 1e4*e.major+100*e.minor+e.patch}function ww(t,e,i){return kw(t,!0,i,(function(t,i){t[i]===e&&delete t[i]}))}function Ew(t,e,i){return kw(t,!1,i,(function(t,i){null==t[i]&&(t[i]=e)}))}function Ow(t,e,i){var n=void 0,o=!1;return i=kw(t,!0,i,(function(t,e){o=!0,n=t[e],delete t[e]})),o?kw(e,!1,i,(function(t,e){t[e]=n})):i}function Dw(t,e,i){var n=void 0,o=!1;return i=kw(t,!0,i,(function(t,e){o=!0,n=t[e],delete t[e]})),o?kw(e,!1,i,(function(t,e){void 0===t[e]&&(t[e]=n)})):i}function Aw(t,e,i){return kw(t,!0,i,(function(t,i){t[e]=t[i],delete t[i]}))}function Tw(t,e){return kw(t,!0,e,(function(t,e){return delete t[e]}))}function kw(t,e,i,n){var o=t instanceof Array?t:t.split("."),r=o.slice(0,o.length-1),s=o[o.length-1];return Mw(r,i,(function(t){var i=Object.keys(t).includes(s);if(e&&!i)return t;var o=nw({},t);return n(o,s),o}))}function Mw(t,e,i){var n,o,r=t instanceof Array?t:t.split(".");if(e=nw({},e),0===r.length)return i(e);if(r[0].startsWith("{")){var s=r[0].substring(1,r[0].lastIndexOf("}")).split(",");try{for(var a=sw(s),l=a.next();!l.done;l=a.next()){var c=l.value;null!=e[c]&&(e[c]=Mw(r.slice(1),e[c],i))}}catch(t){n={error:t}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}}else if(r[0].endsWith("[]")){var d=r[0].substring(0,t[0].indexOf("["));e[d]instanceof Array&&(e[d]=e[d].map((function(t){return Mw(r.slice(1),t,i)})))}else if("*"===r[0])for(var u in e)e[u]=Mw(r.slice(1),e[u],i);else null!=e[r[0]]&&(e[r[0]]=Mw(r.slice(1),e[r[0]],i));return e}var Rw=function(t,e){return nw(nw({},t),e)},Pw=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Nw=function(){return(Nw=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Lw=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Iw=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},Fw=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},_w=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.activeCharts=new Set,e.activeChartComps=new Set,e.crossFilteringContext={lastSelectedChartId:""},e}return Pw(i,t),i.prototype.updateChart=function(t){if(0!==this.activeChartComps.size){var e=Fw([],Iw(this.activeChartComps),!1).find((function(e){return e.getChartId()===t.chartId}));e?e.update(t):console.warn("AG Grid - Unable to update chart. No active chart found with ID: ".concat(t.chartId,"."))}else console.warn("AG Grid - No active charts to update.")},i.prototype.getChartModels=function(){var t=[];return this.activeChartComps.forEach((function(e){return t.push(function(t){return Nw(Nw({},t),{version:"31.0.1"})}(e.getChartModel()))})),t},i.prototype.getChartRef=function(t){var e;return this.activeCharts.forEach((function(i){i.chartId===t&&(e=i)})),e},i.prototype.getChartComp=function(t){var e;return this.activeChartComps.forEach((function(i){i.getChartId()===t&&(e=i)})),e},i.prototype.getChartImageDataURL=function(t){var e;return this.activeChartComps.forEach((function(i){i.getChartId()===t.chartId&&(e=i.getChartImageDataURL(t.fileFormat))})),e},i.prototype.downloadChart=function(t){var e=Array.from(this.activeChartComps).find((function(e){return e.getChartId()===t.chartId}));null==e||e.downloadChart(t.dimensions,t.fileName,t.fileFormat)},i.prototype.openChartToolPanel=function(t){var e=Array.from(this.activeChartComps).find((function(e){return e.getChartId()===t.chartId}));null==e||e.openChartToolPanel(t.panel)},i.prototype.closeChartToolPanel=function(t){var e=Array.from(this.activeChartComps).find((function(e){return e.getChartId()===t}));null==e||e.closeChartToolPanel()},i.prototype.createChartFromCurrentRange=function(t){void 0===t&&(t="groupedColumn");var e=this.getSelectedRange();return this.createChart(e,t)},i.prototype.restoreChart=function(t,e){var i=this;if(t){"31.0.1"!==t.version&&(t=aw(t));var n={cellRange:t.cellRange,chartType:t.chartType,chartThemeName:t.chartThemeName,chartContainer:e,suppressChartRanges:t.suppressChartRanges,aggFunc:t.aggFunc,unlinkChart:t.unlinkChart,seriesChartTypes:t.seriesChartTypes},o=function(t){return i.rangeService?i.rangeService.createCellRangeFromCellRangeParams(t):void 0};if("pivot"===t.modelType){this.gridOptionsService.updateGridOptions({options:{pivotMode:!0},source:"pivotChart"});var r=o({rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map((function(t){return t.getColId()}))});return r?this.createChart(r,n.chartType,n.chartThemeName,!0,!0,n.chartContainer,void 0,void 0,n.unlinkChart,!1,t.chartOptions):void console.warn("AG Grid - unable to create chart as there are no columns in the grid.")}var s=o(n.cellRange);if(s)return this.createChart(s,n.chartType,n.chartThemeName,!1,n.suppressChartRanges,n.chartContainer,n.aggFunc,void 0,n.unlinkChart,!1,t.chartOptions,t.chartPalette,n.seriesChartTypes);console.warn("AG Grid - unable to create chart as no range is selected")}else console.warn("AG Grid - unable to restore chart as no chart model is provided")},i.prototype.createRangeChart=function(t){var e,i=null===(e=this.rangeService)||void 0===e?void 0:e.createCellRangeFromCellRangeParams(t.cellRange);if(i)return this.createChart(i,t.chartType,t.chartThemeName,!1,t.suppressChartRanges,t.chartContainer,t.aggFunc,t.chartThemeOverrides,t.unlinkChart,void 0,void 0,void 0,t.seriesChartTypes);console.warn("AG Grid - unable to create chart as no range is selected")},i.prototype.createPivotChart=function(t){this.gridOptionsService.updateGridOptions({options:{pivotMode:!0},source:"pivotChart"});var e={rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map((function(t){return t.getColId()}))},i=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(e):void 0;if(i)return this.createChart(i,t.chartType,t.chartThemeName,!0,!0,t.chartContainer,void 0,t.chartThemeOverrides,t.unlinkChart);console.warn("AG Grid - unable to create chart as there are no columns in the grid.")},i.prototype.createCrossFilterChart=function(t){var e,i=null===(e=this.rangeService)||void 0===e?void 0:e.createCellRangeFromCellRangeParams(t.cellRange);if(i){var n=!(void 0!==t.suppressChartRanges&&null!==t.suppressChartRanges)||t.suppressChartRanges;return this.createChart(i,t.chartType,t.chartThemeName,!1,n,t.chartContainer,t.aggFunc,t.chartThemeOverrides,t.unlinkChart,!0)}console.warn("AG Grid - unable to create chart as no range is selected")},i.prototype.createChart=function(t,e,i,n,o,r,s,a,l,c,d,u,h){var p=this;void 0===n&&(n=!1),void 0===o&&(o=!1),void 0===l&&(l=!1),void 0===c&&(c=!1);var f=this.gridOptionsService.getCallback("createChartContainer"),g={chartId:this.generateId(),pivotChart:n,cellRange:t,chartType:e,chartThemeName:i,insideDialog:!(r||f),suppressChartRanges:o,aggFunc:s,chartThemeOverrides:a,unlinkChart:l,crossFiltering:c,crossFilteringContext:this.crossFilteringContext,chartOptionsToRestore:d,chartPaletteToRestore:u,seriesChartTypes:h,crossFilteringResetCallback:function(){return p.activeChartComps.forEach((function(t){return t.crossFilteringReset()}))}},v=new iw(g);this.context.createBean(v);var y=this.createChartRef(v);if(r){r.appendChild(v.getGui());var m=this.environment.getTheme();m.el&&!m.el.contains(r)&&r.classList.add(m.theme)}else f?f(y):v.addEventListener(iw.EVENT_DESTROYED,(function(){p.activeChartComps.delete(v),p.activeCharts.delete(y)}));return y},i.prototype.createChartRef=function(t){var e=this,i={destroyChart:function(){e.activeCharts.has(i)&&(e.context.destroyBean(t),e.activeChartComps.delete(t),e.activeCharts.delete(i))},chartElement:t.getGui(),chart:t.getUnderlyingChart(),chartId:t.getChartModel().chartId};return this.activeCharts.add(i),this.activeChartComps.add(t),i},i.prototype.getSelectedRange=function(){var t=this.rangeService.getCellRanges();return t.length>0?t[0]:{}},i.prototype.generateId=function(){return"id-".concat(Math.random().toString(36).substring(2,18))},i.prototype.destroyAllActiveCharts=function(){this.activeCharts.forEach((function(t){return t.destroyChart()}))},i.CHARTS_VERSION="9.0.1",Lw([E("rangeService")],i.prototype,"rangeService",void 0),Lw([n("columnModel")],i.prototype,"columnModel",void 0),Lw([N],i.prototype,"destroyAllActiveCharts",null),i=Lw([e("chartService")],i)}(i),Gw=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Bw=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Vw=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}var n;return Gw(i,t),n=i,i.prototype.translate=function(t,e){return this.localeService.getLocaleTextFunc()(t,n.DEFAULT_TRANSLATIONS[t]||e)},i.DEFAULT_TRANSLATIONS={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Settings",data:"Data",format:"Format",categories:"Categories",defaultCategory:"(None)",series:"Series",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",navigator:"Navigator",color:"Color",thickness:"Thickness",xType:"X Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",autoRotate:"Auto Rotate",xRotation:"X Rotation",yRotation:"Y Rotation",ticks:"Ticks",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chart:"Chart",title:"Title",titlePlaceholder:"Chart title - double click to edit",background:"Background",font:"Font",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",calloutLabels:"Callout Labels",sectorLabels:"Sector Labels",positionRatio:"Position Ratio",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeOpacity:"Line Opacity",histogramBinCount:"Bin count",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",histogramGroup:"Histogram",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",doughnutTooltip:"Doughnut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis"},i=n=Bw([e("chartTranslationService")],i)}(i),jw=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ww=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},zw=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}var o;return jw(i,t),o=i,i.prototype.filter=function(t,e){void 0===e&&(e=!1);var i=this.gridApi.getFilterModel();if(e)this.resetFilters(i);else{var n=o.extractFilterColId(t);this.isValidColumnFilter(n)?this.updateFilters(i,t,n):console.warn("AG Grid: cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: '"+n+"'")}},i.prototype.resetFilters=function(t){Object.keys(t).length>0&&(this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged())},i.prototype.updateFilters=function(t,e,i){var n,r=o.extractFilterColId(e),s=e.datum[r];if(void 0!==s){var a=s.toString();if(e.event.metaKey||e.event.ctrlKey){var l=this.getCurrentGridValuesForCategory(i),d=void 0;c.includes(l,a)?d=l.filter((function(t){return t!==a})):(d=l).push(a),t[i]=this.getUpdatedFilterModel(i,d)}else{d=[a];(n={})[i]=this.getUpdatedFilterModel(i,d),t=n}this.gridApi.setFilterModel(t)}},i.prototype.getUpdatedFilterModel=function(t,e){return"agMultiColumnFilter"===this.getColumnFilterType(t)?{filterType:"multi",filterModels:[null,{filterType:"set",values:e}]}:{filterType:"set",values:e}},i.prototype.getCurrentGridValuesForCategory=function(t){var e=this,i=[],n=this.getColumnById(t);return this.gridApi.forEachNodeAfterFilter((function(t){if(n&&!t.group){var o=e.valueService.getValue(n,t)+"";i.includes(o)||i.push(o)}})),i},i.extractFilterColId=function(t){return t.xKey||t.calloutLabelKey},i.prototype.isValidColumnFilter=function(t){t.indexOf("-filtered-out")&&(t=t.replace("-filtered-out",""));var e=this.getColumnFilterType(t);return"boolean"==typeof e?e:c.includes(["agSetColumnFilter","agMultiColumnFilter"],e)},i.prototype.getColumnFilterType=function(t){var e=this.getColumnById(t);if(e)return e.getColDef().filter},i.prototype.getColumnById=function(t){return this.columnModel.getGridColumn(t)},Ww([n("gridApi")],i.prototype,"gridApi",void 0),Ww([n("columnModel")],i.prototype,"columnModel",void 0),Ww([n("valueService")],i.prototype,"valueService",void 0),i=o=Ww([e("chartCrossFilterService")],i)}(i),Uw=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Hw=function(){return(Hw=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Kw=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Yw=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},Xw=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},qw=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$w=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.cellRanges=[],e.bodyScrollListener=e.onBodyScroll.bind(e),e.dragging=!1,e.intersectionRange=!1,e}return Uw(i,t),i.prototype.init=function(){var t=this;this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,(function(){return t.onColumnsChanged()})),this.addManagedListener(this.eventService,l.EVENT_COLUMN_VISIBLE,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,l.EVENT_COLUMN_VALUE_CHANGED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PIVOT_MODE_CHANGED,(function(){return t.removeAllCellRanges()})),this.addManagedListener(this.eventService,l.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return t.removeAllCellRanges()})),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PIVOT_CHANGED,(function(){return t.removeAllCellRanges()})),this.addManagedListener(this.eventService,l.EVENT_COLUMN_GROUP_OPENED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,l.EVENT_COLUMN_MOVED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PINNED,this.refreshLastRangeStart.bind(this)),this.ctrlsService.whenReady((function(){var e=t.ctrlsService.getGridBodyCtrl();t.autoScrollService=new $({scrollContainer:e.getBodyViewportElement(),scrollAxis:"xy",getVerticalPosition:function(){return e.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(t){return e.getScrollFeature().setVerticalScrollPosition(t)},getHorizontalPosition:function(){return e.getScrollFeature().getHScrollPosition().left},setHorizontalPosition:function(t){return e.getScrollFeature().setHorizontalScrollPosition(t)},shouldSkipVerticalScroll:function(){return!t.gridOptionsService.isDomLayout("normal")},shouldSkipHorizontalScroll:function(){return!e.getScrollFeature().isHorizontalScrollShowing()}})}))},i.prototype.onColumnsChanged=function(){var t=this;this.refreshLastRangeStart();var e=this.columnModel.getAllDisplayedColumns();this.cellRanges.forEach((function(i){var n=i.columns;i.columns=i.columns.filter((function(t){return t.isVisible()&&-1!==e.indexOf(t)})),!c.areEqual(n,i.columns)&&t.dispatchChangedEvent(!1,!0,i.id)}));var i=this.cellRanges.length;this.cellRanges=this.cellRanges.filter((function(t){return t.columns.length>0})),i>this.cellRanges.length&&this.dispatchChangedEvent(!1,!0)},i.prototype.refreshLastRangeStart=function(){var t=c.last(this.cellRanges);t&&this.refreshRangeStart(t)},i.prototype.isContiguousRange=function(t){var e=t.columns;if(!e.length)return!1;var i=this.columnModel.getAllDisplayedColumns(),n=e.map((function(t){return i.indexOf(t)})).sort((function(t,e){return t-e}));return c.last(n)-n[0]+1===e.length},i.prototype.getRangeStartRow=function(t){return t.startRow&&t.endRow?this.rowPositionUtils.before(t.startRow,t.endRow)?t.startRow:t.endRow:{rowIndex:0,rowPinned:this.pinnedRowModel.getPinnedTopRowCount()>0?"top":null}},i.prototype.getRangeEndRow=function(t){if(t.startRow&&t.endRow)return this.rowPositionUtils.before(t.startRow,t.endRow)?t.endRow:t.startRow;var e=this.pinnedRowModel.getPinnedBottomRowCount();return e>0?{rowIndex:e-1,rowPinned:"bottom"}:{rowIndex:this.rowModel.getRowCount()-1,rowPinned:null}},i.prototype.setRangeToCell=function(t,e){if(void 0===e&&(e=!1),this.gridOptionsService.get("enableRangeSelection")){var i=this.calculateColumnsBetween(t.column,t.column);if(i){(this.gridOptionsService.get("suppressMultiRangeSelection")||!e||c.missing(this.cellRanges))&&this.removeAllCellRanges(!0);var n={rowIndex:t.rowIndex,rowPinned:t.rowPinned},o={startRow:n,endRow:n,columns:i,startColumn:t.column};this.cellRanges.push(o),this.setNewestRangeStartCell(t),this.onDragStop(),this.dispatchChangedEvent(!0,!0)}}},i.prototype.extendLatestRangeToCell=function(t){if(!this.isEmpty()&&this.newestRangeStartCell){var e=c.last(this.cellRanges);this.updateRangeEnd(e,t)}},i.prototype.updateRangeEnd=function(t,e,i){void 0===i&&(i=!1);var n=e.column,o=this.calculateColumnsBetween(t.startColumn,n);o&&!this.isLastCellOfRange(t,e)&&(t.columns=o,t.endRow={rowIndex:e.rowIndex,rowPinned:e.rowPinned},i||this.dispatchChangedEvent(!0,!0,t.id))},i.prototype.refreshRangeStart=function(t){var e=t.startColumn,i=t.columns,n=function(e,i){var n=t.columns.filter((function(t){return t!==e}));e?(t.startColumn=e,t.columns=i?Xw([e],Yw(n),!1):Xw(Xw([],Yw(n),!1),[e],!1)):t.columns=n},o=this.getRangeEdgeColumns(t),r=o.left,s=o.right;e===i[0]&&e!==r?n(r,!0):e===c.last(i)&&e===s&&n(s,!1)},i.prototype.getRangeEdgeColumns=function(t){var e=this.columnModel.getAllDisplayedColumns(),i=t.columns.map((function(t){return e.indexOf(t)})).filter((function(t){return t>-1})).sort((function(t,e){return t-e}));return{left:e[i[0]],right:e[c.last(i)]}},i.prototype.extendLatestRangeInDirection=function(t){if(!this.isEmpty()&&this.newestRangeStartCell){var e=t.key,i=t.ctrlKey||t.metaKey,n=c.last(this.cellRanges),o=this.newestRangeStartCell,r=n.columns[0],s=c.last(n.columns),a=n.endRow.rowIndex,l=n.endRow.rowPinned,d={column:o.column===r?s:r,rowIndex:a,rowPinned:l},u=this.cellNavigationService.getNextCellToFocus(e,d,i);if(u)return this.setCellRange({rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:u.rowIndex,rowEndPinned:u.rowPinned,columnStart:o.column,columnEnd:u.column}),u}},i.prototype.setCellRange=function(t){this.gridOptionsService.get("enableRangeSelection")&&(this.removeAllCellRanges(!0),this.addCellRange(t))},i.prototype.setCellRanges=function(t){var e=this;c.shallowCompare(this.cellRanges,t)||(this.removeAllCellRanges(!0),t.forEach((function(t){t.columns&&t.startRow&&e.setNewestRangeStartCell({rowIndex:t.startRow.rowIndex,rowPinned:t.startRow.rowPinned,column:t.columns[0]}),e.cellRanges.push(t)})),this.dispatchChangedEvent(!1,!0))},i.prototype.setNewestRangeStartCell=function(t){this.newestRangeStartCell=t},i.prototype.clearCellRangeCellValues=function(t){var e=this,i=t.cellRanges,n=t.cellEventSource,o=void 0===n?"rangeService":n,r=t.dispatchWrapperEvents,s=t.wrapperEventSource,a=void 0===s?"deleteKey":s;if(r){var c={type:l.EVENT_RANGE_DELETE_START,source:a};this.eventService.dispatchEvent(c)}if(i||(i=this.cellRanges),i.forEach((function(t){e.forEachRowInRange(t,(function(i){var n=e.rowPositionUtils.getRowNode(i);if(n)for(var r=0;r<t.columns.length;r++){var s=e.columnModel.getGridColumn(t.columns[r]);if(!s||!s.isCellEditable(n))return;n.setDataValue(s,null,o)}}))})),r){var d={type:l.EVENT_RANGE_DELETE_END,source:a};this.eventService.dispatchEvent(d)}},i.prototype.createCellRangeFromCellRangeParams=function(t){var e,i=this,n=!1;if(t.columns)e=t.columns.map((function(t){return i.columnModel.getColumnWithValidation(t)})).filter((function(t){return t}));else{var o=this.columnModel.getColumnWithValidation(t.columnStart),r=this.columnModel.getColumnWithValidation(t.columnEnd);if(!o||!r)return;(e=this.calculateColumnsBetween(o,r))&&e.length&&(n=e[0]!==o)}if(e)return{startRow:null!=t.rowStartIndex?{rowIndex:t.rowStartIndex,rowPinned:t.rowStartPinned||null}:void 0,endRow:null!=t.rowEndIndex?{rowIndex:t.rowEndIndex,rowPinned:t.rowEndPinned||null}:void 0,columns:e,startColumn:n?c.last(e):e[0]}},i.prototype.addCellRange=function(t){if(this.gridOptionsService.get("enableRangeSelection")){var e=this.createCellRangeFromCellRangeParams(t);e&&(e.startRow&&this.setNewestRangeStartCell({rowIndex:e.startRow.rowIndex,rowPinned:e.startRow.rowPinned,column:e.startColumn}),this.cellRanges.push(e),this.dispatchChangedEvent(!1,!0,e.id))}},i.prototype.getCellRanges=function(){return this.cellRanges},i.prototype.isEmpty=function(){return 0===this.cellRanges.length},i.prototype.isMoreThanOneCell=function(){var t=this.cellRanges.length;if(0===t)return!1;if(t>1)return!0;var e=this.cellRanges[0],i=this.getRangeStartRow(e),n=this.getRangeEndRow(e);return i.rowPinned!==n.rowPinned||i.rowIndex!==n.rowIndex||1!==e.columns.length},i.prototype.areAllRangesAbleToMerge=function(){var t,e,i,n=this,o=new Map;if(this.cellRanges.length<=1)return!0;this.cellRanges.forEach((function(t){n.forEachRowInRange(t,(function(e){var i="".concat(e.rowPinned||"normal","_").concat(e.rowIndex),n=o.get(i),r=t.columns.map((function(t){return t.getId()}));if(n){var s=r.filter((function(t){return-1===n.indexOf(t)}));n.push.apply(n,Xw([],Yw(s),!1))}else o.set(i,r)}))}));try{for(var r=qw(o.values()),s=r.next();!s.done;s=r.next()){var a=s.value.sort().join();if(void 0!==i){if(i!==a)return!1}else i=a}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return!0},i.prototype.forEachRowInRange=function(t,e){for(var i=this.getRangeStartRow(t),n=this.getRangeEndRow(t),o=i;o&&(e(o),!this.rowPositionUtils.sameRow(o,n));)o=this.cellNavigationService.getRowBelow(o)},i.prototype.removeAllCellRanges=function(t){this.isEmpty()||(this.onDragStop(),this.cellRanges.length=0,t||this.dispatchChangedEvent(!1,!0))},i.prototype.onBodyScroll=function(){this.dragging&&this.lastMouseEvent&&this.onDragging(this.lastMouseEvent)},i.prototype.isCellInAnyRange=function(t){return this.getCellRangeCount(t)>0},i.prototype.isCellInSpecificRange=function(t,e){var i=null!==e.columns&&c.includes(e.columns,t.column),n=this.isRowInRange(t.rowIndex,t.rowPinned,e);return i&&n},i.prototype.isLastCellOfRange=function(t,e){var i=t.startRow,n=t.endRow,o=this.rowPositionUtils.before(i,n)?n:i,r=e.rowIndex===o.rowIndex&&e.rowPinned===o.rowPinned,s=t.columns[0],a=c.last(t.columns),l=t.startColumn===s?a:s;return e.column===l&&r},i.prototype.isBottomRightCell=function(t,e){var i=this.columnModel.getAllDisplayedColumns(),n=t.columns.map((function(t){return i.indexOf(t)})).sort((function(t,e){return t-e})),o=t.startRow,r=t.endRow,s=this.rowPositionUtils.before(o,r)?r:o,a=i.indexOf(e.column)===c.last(n),l=e.rowIndex===s.rowIndex&&c.makeNull(e.rowPinned)===c.makeNull(s.rowPinned);return a&&l},i.prototype.getCellRangeCount=function(t){var e=this;return this.isEmpty()?0:this.cellRanges.filter((function(i){return e.isCellInSpecificRange(t,i)})).length},i.prototype.isRowInRange=function(t,e,i){var n=this.getRangeStartRow(i),o=this.getRangeEndRow(i),r={rowIndex:t,rowPinned:e||null},s=r.rowIndex===n.rowIndex&&r.rowPinned==n.rowPinned,a=r.rowIndex===o.rowIndex&&r.rowPinned==o.rowPinned;if(s||a)return!0;var l=!this.rowPositionUtils.before(r,n),c=this.rowPositionUtils.before(r,o);return l&&c},i.prototype.getDraggingRange=function(){return this.draggingRange},i.prototype.onDragStart=function(t){if(this.gridOptionsService.get("enableRangeSelection")){var e=t.ctrlKey,i=t.metaKey,n=t.shiftKey,o=e||i,r=!!!this.gridOptionsService.get("suppressMultiRangeSelection")&&o,s=n&&c.existsAndNotEmpty(this.cellRanges);r||s&&!c.exists(c.last(this.cellRanges).type)||this.removeAllCellRanges(!0);var a=this.dragService.getStartTarget();if(a&&this.updateValuesOnMove(a),this.lastCellHovered){if(this.dragging=!0,this.lastMouseEvent=t,this.intersectionRange=r&&this.getCellRangeCount(this.lastCellHovered)>1,s||this.setNewestRangeStartCell(this.lastCellHovered),this.cellRanges.length>0)this.draggingRange=c.last(this.cellRanges);else{var l={rowIndex:this.lastCellHovered.rowIndex,rowPinned:this.lastCellHovered.rowPinned};this.draggingRange={startRow:l,endRow:l,columns:[this.lastCellHovered.column],startColumn:this.newestRangeStartCell.column},this.cellRanges.push(this.draggingRange)}this.ctrlsService.getGridBodyCtrl().addScrollEventListener(this.bodyScrollListener),this.dispatchChangedEvent(!0,!1,this.draggingRange.id)}}},i.prototype.intersectLastRange=function(t){var e=this;if(!(t&&this.dragging||this.gridOptionsService.get("suppressMultiRangeSelection")||this.isEmpty())){var i=c.last(this.cellRanges),n=this.getRangeStartRow(i),o=this.getRangeEndRow(i),r=[];this.cellRanges.slice(0,-1).forEach((function(t){var s=e.getRangeStartRow(t),a=e.getRangeEndRow(t),l=t.columns,d=l.filter((function(t){return-1===i.columns.indexOf(t)}));if(d.length!==l.length)if(e.rowPositionUtils.before(o,s)||e.rowPositionUtils.before(a,n))r.push(t);else{var u=r.length;if(e.rowPositionUtils.before(s,n)){var h={columns:Xw([],Yw(l),!1),startColumn:i.startColumn,startRow:Hw({},s),endRow:e.cellNavigationService.getRowAbove(n)};r.push(h)}if(d.length>0){var p={columns:d,startColumn:c.includes(d,i.startColumn)?i.startColumn:d[0],startRow:e.rowPositionUtils.rowMax([Hw({},n),Hw({},s)]),endRow:e.rowPositionUtils.rowMin([Hw({},o),Hw({},a)])};r.push(p)}e.rowPositionUtils.before(o,a)&&r.push({columns:Xw([],Yw(l),!1),startColumn:i.startColumn,startRow:e.cellNavigationService.getRowBelow(o),endRow:Hw({},a)}),r.length-u==1&&(r[r.length-1].id=t.id)}else r.push(t)})),this.cellRanges=r,t&&this.dispatchChangedEvent(!1,!0)}},i.prototype.updateValuesOnMove=function(t){var e=c.getCtrlForEventTarget(this.gridOptionsService,t,ct.DOM_DATA_KEY_CELL_CTRL),i=null==e?void 0:e.getCellPosition();this.cellHasChanged=!1,!i||this.lastCellHovered&&this.cellPositionUtils.equals(i,this.lastCellHovered)||(this.lastCellHovered&&(this.cellHasChanged=!0),this.lastCellHovered=i)},i.prototype.onDragging=function(t){var e=this;if(this.dragging&&t){this.updateValuesOnMove(t.target),this.lastMouseEvent=t;var i=this.lastCellHovered,n=function(t){return i&&i.rowPinned===t&&e.newestRangeStartCell.rowPinned===t},o=n("top")||n("bottom");if(this.autoScrollService.check(t,o),this.cellHasChanged){var r=this.calculateColumnsBetween(this.newestRangeStartCell.column,i.column);r&&(this.draggingRange.endRow={rowIndex:i.rowIndex,rowPinned:i.rowPinned},this.draggingRange.columns=r,this.dispatchChangedEvent(!1,!1,this.draggingRange.id))}}},i.prototype.onDragStop=function(){if(this.dragging){var t=this.draggingRange.id;this.autoScrollService.ensureCleared(),this.ctrlsService.getGridBodyCtrl().removeScrollEventListener(this.bodyScrollListener),this.lastMouseEvent=null,this.dragging=!1,this.draggingRange=void 0,this.lastCellHovered=void 0,this.intersectionRange&&(this.intersectionRange=!1,this.intersectLastRange()),this.dispatchChangedEvent(!1,!0,t)}},i.prototype.dispatchChangedEvent=function(t,e,i){var n={type:l.EVENT_RANGE_SELECTION_CHANGED,started:t,finished:e,id:i};this.eventService.dispatchEvent(n)},i.prototype.calculateColumnsBetween=function(t,e){var i=this.columnModel.getAllDisplayedColumns(),n=t===e,o=i.indexOf(t);if(o<0)console.warn("AG Grid: column ".concat(t.getId()," is not visible"));else{var r=n?o:i.indexOf(e);if(!(r<0)){if(n)return[t];for(var s=Math.min(o,r),a=s===o?r:o,l=[],c=s;c<=a;c++)l.push(i[c]);return l}console.warn("AG Grid: column ".concat(e.getId()," is not visible"))}},Kw([n("rowModel")],i.prototype,"rowModel",void 0),Kw([n("dragService")],i.prototype,"dragService",void 0),Kw([n("columnModel")],i.prototype,"columnModel",void 0),Kw([n("cellNavigationService")],i.prototype,"cellNavigationService",void 0),Kw([n("pinnedRowModel")],i.prototype,"pinnedRowModel",void 0),Kw([n("rowPositionUtils")],i.prototype,"rowPositionUtils",void 0),Kw([n("cellPositionUtils")],i.prototype,"cellPositionUtils",void 0),Kw([n("ctrlsService")],i.prototype,"ctrlsService",void 0),Kw([r],i.prototype,"init",null),i=Kw([e("rangeService")],i)}(i),Zw=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Jw=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Qw=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.changedCalculatedValues=!1,e.dragging=!1,e.shouldDestroyOnEndDragging=!1,e}return Zw(e,t),e.prototype.init=function(){var t=this;this.dragService.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragStart:this.onDragStart.bind(this),onDragging:function(e){t.dragging=!0,t.rangeService.autoScrollService.check(e),t.changedCalculatedValues&&(t.onDrag(e),t.changedCalculatedValues=!1)},onDragStop:function(e){t.dragging=!1,t.onDragEnd(e),t.clearValues(),t.rangeService.autoScrollService.ensureCleared(),document.body.classList.remove(t.getDraggingCssClass()),t.shouldDestroyOnEndDragging&&t.destroy()}}),this.addManagedListener(this.getGui(),"mousedown",this.preventRangeExtension.bind(this))},e.prototype.isDragging=function(){return this.dragging},e.prototype.getCellCtrl=function(){return this.cellCtrl},e.prototype.setCellCtrl=function(t){this.cellCtrl=t},e.prototype.getCellRange=function(){return this.cellRange},e.prototype.setCellRange=function(t){this.cellRange=t},e.prototype.getRangeStartRow=function(){return this.rangeStartRow},e.prototype.setRangeStartRow=function(t){this.rangeStartRow=t},e.prototype.getRangeEndRow=function(){return this.rangeEndRow},e.prototype.setRangeEndRow=function(t){this.rangeEndRow=t},e.prototype.getLastCellHovered=function(){return this.lastCellHovered},e.prototype.preventRangeExtension=function(t){t.stopPropagation()},e.prototype.onDragStart=function(t){this.cellHoverListener=this.addManagedListener(this.ctrlsService.getGridCtrl().getGui(),"mousemove",this.updateValuesOnMove.bind(this)),document.body.classList.add(this.getDraggingCssClass())},e.prototype.getDraggingCssClass=function(){return"ag-dragging-".concat(this.type===dt.FILL?"fill":"range","-handle")},e.prototype.updateValuesOnMove=function(t){var e=this.mouseEventService.getCellPositionForEvent(t);!e||this.lastCellHovered&&this.cellPositionUtils.equals(e,this.lastCellHovered)||(this.lastCellHovered=e,this.changedCalculatedValues=!0)},e.prototype.getType=function(){return this.type},e.prototype.refresh=function(t){var e=this.getCellCtrl(),i=this.getGui(),n=c.last(this.rangeService.getCellRanges()),o=n.startRow,r=n.endRow;o&&r&&(this.rowPositionUtils.before(r,o)?(this.setRangeStartRow(r),this.setRangeEndRow(o)):(this.setRangeStartRow(o),this.setRangeEndRow(r)));if(e!==t||!c.isVisible(i)){this.setCellCtrl(t);var s=t.getComp().getParentOfValue();s&&s.appendChild(i)}this.setCellRange(n)},e.prototype.clearValues=function(){this.lastCellHovered=void 0,this.removeListeners()},e.prototype.removeListeners=function(){this.cellHoverListener&&(this.cellHoverListener(),this.cellHoverListener=void 0)},e.prototype.destroy=function(){if(!this.shouldDestroyOnEndDragging&&this.isDragging())return c.setDisplayed(this.getGui(),!1),void(this.shouldDestroyOnEndDragging=!0);this.shouldDestroyOnEndDragging=!1,t.prototype.destroy.call(this),this.removeListeners();var e=this.getGui();e.parentElement&&e.parentElement.removeChild(e)},Jw([n("rowRenderer")],e.prototype,"rowRenderer",void 0),Jw([n("dragService")],e.prototype,"dragService",void 0),Jw([n("rangeService")],e.prototype,"rangeService",void 0),Jw([n("mouseEventService")],e.prototype,"mouseEventService",void 0),Jw([n("columnModel")],e.prototype,"columnModel",void 0),Jw([n("cellNavigationService")],e.prototype,"cellNavigationService",void 0),Jw([n("navigationService")],e.prototype,"navigationService",void 0),Jw([n("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),Jw([n("cellPositionUtils")],e.prototype,"cellPositionUtils",void 0),Jw([n("ctrlsService")],e.prototype,"ctrlsService",void 0),Jw([r],e.prototype,"init",null),e}(s);function tE(t){var e=t.length,i=0;if(e<=1)return t;for(var n=0;n<t.length;n++){var o=t[n],r=o.toString().split("e-");r.length>1?i=Math.max(i,parseInt(r[1],10)):Math.floor(o)!==o&&(i=Math.max(i,o.toString().split(".")[1].length))}for(var s=0,a=0,l=0,c=0,d=0,u=0;u<e;u++)s+=u,a+=d=t[u],c+=u*u,l+=u*d;var h=(e*l-s*a)/(e*c-s*s),p=a/e-h*s/e,f=[];for(u=0;u<=e;u++)f.push(parseFloat((u*h+p).toFixed(i)));return f}var eE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),iE=function(){return(iE=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},nE=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},oE=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},rE=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},sE=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.markedCells=[],i.cellValues=[],i.isUp=!1,i.isLeft=!1,i.isReduce=!1,i.type=dt.FILL,i}return eE(e,t),e.prototype.updateValuesOnMove=function(e){t.prototype.updateValuesOnMove.call(this,e),this.initialXY||(this.initialXY=this.mouseEventService.getNormalisedPosition(e));var i,n=this.initialXY,o=n.x,r=n.y,s=this.mouseEventService.getNormalisedPosition(e),a=s.x,l=s.y,c=Math.abs(o-a),d=Math.abs(r-l),u=this.getFillHandleDirection();(i="xy"===u?c>d?"x":"y":u)!==this.dragAxis&&(this.dragAxis=i,this.changedCalculatedValues=!0)},e.prototype.onDrag=function(t){if(!this.initialPosition){var e=this.getCellCtrl();if(!e)return;this.initialPosition=e.getCellPosition()}var i=this.getLastCellHovered();i&&this.markPathFrom(this.initialPosition,i)},e.prototype.onDragEnd=function(t){if(this.initialXY=null,this.markedCells.length){var e,i="x"===this.dragAxis,n=this.getCellRange(),o=n.columns.length,r=this.getRangeStartRow(),s=this.getRangeEndRow();if(this.isUp||this.isLeft){var a=i?r:this.lastCellMarked;e=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:a.rowIndex,rowStartPinned:a.rowPinned,columnStart:i?this.lastCellMarked.column:n.columns[0],rowEndIndex:s.rowIndex,rowEndPinned:s.rowPinned,columnEnd:n.columns[o-1]})}else e=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:r.rowIndex,rowStartPinned:r.rowPinned,columnStart:n.columns[0],rowEndIndex:i?s.rowIndex:this.lastCellMarked.rowIndex,rowEndPinned:i?s.rowPinned:this.lastCellMarked.rowPinned,columnEnd:i?this.lastCellMarked.column:n.columns[o-1]});e&&(this.raiseFillStartEvent(),this.handleValueChanged(n,e,t),this.rangeService.setCellRanges([e]),this.raiseFillEndEvent(n,e))}},e.prototype.getFillHandleDirection=function(){var t=this.gridOptionsService.get("fillHandleDirection");return t?"x"!==t&&"y"!==t&&"xy"!==t?(c.warnOnce("valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'."),"xy"):t:"xy"},e.prototype.raiseFillStartEvent=function(){var t={type:l.EVENT_FILL_START};this.eventService.dispatchEvent(t)},e.prototype.raiseFillEndEvent=function(t,e){var i={type:l.EVENT_FILL_END,initialRange:t,finalRange:e};this.eventService.dispatchEvent(i)},e.prototype.handleValueChanged=function(t,e,i){var n=this,o=this.rangeService.getRangeEndRow(t),r=this.rangeService.getRangeStartRow(t),s=this.rangeService.getRangeEndRow(e),a=this.rangeService.getRangeStartRow(e),l="y"===this.dragAxis;if(!this.isReduce||this.gridOptionsService.get("suppressClearOnFillReduction")){var d=!0,u=[],h=[],p=0,f=function(){u.length=0,h.length=0,p=0},g=function(e,i){var h=n.isUp?o:r,p=!1;l&&(d=!0,f());for(var g=function(){var g=n.rowPositionUtils.getRowNode(h);if(!g)return"break";l&&e?v(u,e,g,(function(){return!n.rowPositionUtils.sameRow(h,n.isUp?r:o)})):i&&(d=!0,f(),i.forEach((function(e){return v(u,e,g,(function(){return e!==(n.isLeft?t.columns[0]:c.last(t.columns))}))}))),p=n.rowPositionUtils.sameRow(h,n.isUp?a:s),h=n.isUp?n.cellNavigationService.getRowAbove(h):n.cellNavigationService.getRowBelow(h)};!p&&h;){if("break"===g())break}},v=function(t,e,o,r){var s,a,l,u=!1;if(d)l=n.valueService.getValue(e,o),h.push(l),d=r();else{var f=n.processValues(i,t,h,e,o,p++),g=f.value,v=f.fromUserFunction,y=f.sourceCol,m=f.sourceRowNode;if(l=g,e.isCellEditable(o)){var b=n.valueService.getValue(e,o);v||(y&&!1!==(null===(s=y.getColDef())||void 0===s?void 0:s.useValueFormatterForExport)&&(l=null!==(a=n.valueFormatterService.formatValue(y,m,l))&&void 0!==a?a:l),!1!==e.getColDef().useValueParserForImport&&(l=n.valueParserService.parseValue(e,o,y?l:c.toStringOrNull(l),b))),v&&b===l?u=!0:o.setDataValue(e,l,"rangeService")}}u||t.push({value:l,column:e,rowNode:o})};if(l)t.columns.forEach((function(t){g(t)}));else{y=this.isLeft?rE([],oE(e.columns),!1).reverse():e.columns;g(void 0,y)}}else{var y=l?t.columns:t.columns.filter((function(t){return e.columns.indexOf(t)<0})),m=l?this.cellNavigationService.getRowBelow(s):a;m&&this.clearCellsInRange(m,o,y)}},e.prototype.clearCellsInRange=function(t,e,i){var n={startRow:t,endRow:e,columns:i,startColumn:i[0]};this.rangeService.clearCellRangeCellValues({cellRanges:[n]})},e.prototype.processValues=function(t,e,i,n,o,r){var s,a=this.gridOptionsService.getCallback("fillOperation");if(s="y"===this.dragAxis?this.isUp?"up":"down":this.isLeft?"left":"right",a){var l=a({event:t,values:e.map((function(t){return t.value})),initialValues:i,currentIndex:r,currentCellValue:this.valueService.getValue(n,o),direction:s,column:n,rowNode:o});if(!1!==l)return{value:l,fromUserFunction:!0}}var d=!e.some((function(t){var e=t.value,i=parseFloat(e);return isNaN(i)||i.toString()!==e.toString()}));if(t.altKey||!d){if(d&&1===i.length){var u=this.isUp||this.isLeft?-1:1;return{value:parseFloat(c.last(e).value)+1*u,fromUserFunction:!1}}var h=e[r%e.length];return{value:h.value,fromUserFunction:!1,sourceCol:h.column,sourceRowNode:h.rowNode}}return{value:c.last(tE(e.map((function(t){var e=t.value;return Number(e)})))),fromUserFunction:!1}},e.prototype.clearValues=function(){this.clearMarkedPath(),this.clearCellValues(),this.lastCellMarked=void 0,t.prototype.clearValues.call(this)},e.prototype.clearMarkedPath=function(){this.markedCells.forEach((function(t){if(t.isAlive()){var e=t.getComp();e.addOrRemoveCssClass("ag-selection-fill-top",!1),e.addOrRemoveCssClass("ag-selection-fill-right",!1),e.addOrRemoveCssClass("ag-selection-fill-bottom",!1),e.addOrRemoveCssClass("ag-selection-fill-left",!1)}})),this.markedCells.length=0,this.isUp=!1,this.isLeft=!1,this.isReduce=!1},e.prototype.clearCellValues=function(){this.cellValues.length=0},e.prototype.markPathFrom=function(t,e){if(this.clearMarkedPath(),this.clearCellValues(),"y"===this.dragAxis){if(this.rowPositionUtils.sameRow(e,t))return;var i=this.rowPositionUtils.before(e,t),n=this.getRangeStartRow(),o=this.getRangeEndRow();i&&(e.rowPinned==n.rowPinned&&e.rowIndex>=n.rowIndex||n.rowPinned!=o.rowPinned&&e.rowPinned==o.rowPinned&&e.rowIndex<=o.rowIndex)?(this.reduceVertical(t,e),this.isReduce=!0):(this.extendVertical(t,e,i),this.isReduce=!1)}else{var r=t.column,s=e.column;if(r===s)return;var a=this.columnModel.getAllDisplayedColumns(),l=a.indexOf(r),c=a.indexOf(s);c<=l&&c>=a.indexOf(this.getCellRange().columns[0])?(this.reduceHorizontal(t,e),this.isReduce=!0):(this.extendHorizontal(t,e,c<l),this.isReduce=!1)}this.lastCellMarked=e},e.prototype.extendVertical=function(t,e,i){var n=this.navigationService,o=this.rangeService,r=t;do{for(var s=this.getCellRange(),a=s.columns.length,l=0;l<a;l++){var c=s.columns[l],d={rowIndex:r.rowIndex,rowPinned:r.rowPinned},u=iE(iE({},d),{column:c}),h=o.isCellInSpecificRange(u,s),p=this.rowPositionUtils.sameRow(r,t);if(i&&(this.isUp=!0),!p){var f=n.getCellByPosition(u);if(f){this.markedCells.push(f);var g=f.getComp();h||(g.addOrRemoveCssClass("ag-selection-fill-left",0===l),g.addOrRemoveCssClass("ag-selection-fill-right",l===a-1)),g.addOrRemoveCssClass(i?"ag-selection-fill-top":"ag-selection-fill-bottom",this.rowPositionUtils.sameRow(r,e))}}}if(this.rowPositionUtils.sameRow(r,e))break}while(r=i?this.cellNavigationService.getRowAbove(r):this.cellNavigationService.getRowBelow(r))},e.prototype.reduceVertical=function(t,e){var i=t;do{for(var n=this.getCellRange(),o=n.columns.length,r=this.rowPositionUtils.sameRow(i,e),s=0;s<o;s++){var a={rowIndex:i.rowIndex,rowPinned:i.rowPinned},l=iE(iE({},a),{column:n.columns[s]}),c=this.navigationService.getCellByPosition(l);if(c)this.markedCells.push(c),c.getComp().addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(i,e))}if(r)break}while(i=this.cellNavigationService.getRowAbove(i))},e.prototype.extendHorizontal=function(t,e,i){var n=this,o=this.columnModel.getAllDisplayedColumns(),r=o.indexOf(i?e.column:t.column),s=o.indexOf(i?this.getCellRange().columns[0]:e.column),a=i?0:1,l=o.slice(r+a,s+a),d=this.getRangeStartRow(),u=this.getRangeEndRow();l.forEach((function(t){var e=d,o=!1;do{o=n.rowPositionUtils.sameRow(e,u);var r=n.navigationService.getCellByPosition({rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t});if(r){n.markedCells.push(r);var s=r.getComp();s.addOrRemoveCssClass("ag-selection-fill-top",n.rowPositionUtils.sameRow(e,d)),s.addOrRemoveCssClass("ag-selection-fill-bottom",n.rowPositionUtils.sameRow(e,u)),i?(n.isLeft=!0,s.addOrRemoveCssClass("ag-selection-fill-left",t===l[0])):s.addOrRemoveCssClass("ag-selection-fill-right",t===c.last(l))}e=n.cellNavigationService.getRowBelow(e)}while(!o)}))},e.prototype.reduceHorizontal=function(t,e){var i=this,n=this.columnModel.getAllDisplayedColumns(),o=n.indexOf(e.column),r=n.indexOf(t.column),s=n.slice(o,r),a=this.getRangeStartRow(),l=this.getRangeEndRow();s.forEach((function(t){var e=a,n=!1;do{n=i.rowPositionUtils.sameRow(e,l);var o=i.navigationService.getCellByPosition({rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t});if(o)i.markedCells.push(o),o.getComp().addOrRemoveCssClass("ag-selection-fill-right",t===s[0]);e=i.cellNavigationService.getRowBelow(e)}while(!n)}))},e.prototype.refresh=function(e){var i=this.rangeService.getCellRanges()[0];i.startRow&&i.endRow?t.prototype.refresh.call(this,e):this.destroy()},e.TEMPLATE='<div class="ag-fill-handle"></div>',nE([n("valueService")],e.prototype,"valueService",void 0),nE([n("valueParserService")],e.prototype,"valueParserService",void 0),nE([n("valueFormatterService")],e.prototype,"valueFormatterService",void 0),e}(Qw),aE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lE=function(){return(lE=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},cE=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.type=dt.RANGE,i.rangeFixed=!1,i}return aE(e,t),e.prototype.onDrag=function(t){var e=this.getLastCellHovered();if(e){var i=this.rangeService.getCellRanges(),n=c.last(i);if(this.rangeFixed||(this.fixRangeStartEnd(n),this.rangeFixed=!0),this.endPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column},2===i.length&&i[0].type===lt.DIMENSION&&n.type===lt.VALUE)!this.rowPositionUtils.sameRow(this.endPosition,this.rangeService.getRangeEndRow(n))&&this.rangeService.updateRangeEnd(i[0],lE(lE({},this.endPosition),{column:i[0].columns[0]}),!0);this.rangeService.extendLatestRangeToCell(this.endPosition)}},e.prototype.onDragEnd=function(t){var e=c.last(this.rangeService.getCellRanges());this.fixRangeStartEnd(e),this.rangeFixed=!1},e.prototype.fixRangeStartEnd=function(t){var e=this.rangeService.getRangeStartRow(t),i=this.rangeService.getRangeEndRow(t),n=t.columns[0];t.startRow=e,t.endRow=i,t.startColumn=n},e.TEMPLATE='<div class="ag-range-handle"></div>',e}(Qw),dE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),uE=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},hE=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return dE(i,t),i.prototype.createSelectionHandle=function(t){return this.createBean(t===dt.RANGE?new cE:new sE)},i=uE([e("selectionHandleFactory")],i)}(i),pE={version:"31.0.1",moduleName:a.RangeSelectionModule,beans:[$w,hE],agStackComponents:[{componentName:"AgFillHandle",componentClass:sE},{componentName:"AgRangeHandle",componentClass:cE}],dependantModules:[Ft]},fE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gE=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},vE=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},yE=function(t){function e(i){var n=t.call(this,e.TEMPLATE)||this;return n.H=1,n.S=1,n.B=1,n.A=1,n.isSpectrumDragging=!1,n.isSpectrumHueDragging=!1,n.isSpectrumAlphaDragging=!1,n.colorChanged=!1,n.picker=i.picker,n}return fE(e,t),e.prototype.postConstruct=function(){var t=this;this.initTabIndex(),this.initRecentColors(),this.addGuiEventListener("focus",(function(){return t.spectrumColor.focus()})),this.addGuiEventListener("keydown",(function(e){e.key!==d.ENTER||e.defaultPrevented||t.destroy()})),this.addManagedListener(this.spectrumColor,"keydown",(function(e){return t.moveDragger(e)})),this.addManagedListener(this.spectrumAlphaSlider,"keydown",(function(e){return t.moveAlphaSlider(e)})),this.addManagedListener(this.spectrumHueSlider,"keydown",(function(e){return t.moveHueSlider(e)})),this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this)),this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this)),this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this)),this.addGuiEventListener("mousemove",(function(e){t.onSpectrumDraggerMove(e),t.onSpectrumHueMove(e),t.onSpectrumAlphaMove(e)})),this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this)),this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this)),this.addManagedListener(this.recentColors,"keydown",(function(e){e.key!==d.ENTER&&e.key!==d.SPACE||(e.preventDefault(),t.onRecentColorClick(e))}))},e.prototype.initTabIndex=function(){var t=this.tabIndex=this.gridOptionsService.get("tabIndex").toString();this.spectrumColor.setAttribute("tabindex",t),this.spectrumHueSlider.setAttribute("tabindex",t),this.spectrumAlphaSlider.setAttribute("tabindex",t)},e.prototype.refreshSpectrumRect=function(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()},e.prototype.refreshHueRect=function(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()},e.prototype.refreshAlphaRect=function(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()},e.prototype.onSpectrumDraggerDown=function(t){this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(t)},e.prototype.onSpectrumDraggerMove=function(t){this.isSpectrumDragging&&this.moveDragger(t)},e.prototype.onSpectrumHueDown=function(t){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(t)},e.prototype.onSpectrumHueMove=function(t){this.isSpectrumHueDragging&&this.moveHueSlider(t)},e.prototype.onSpectrumAlphaDown=function(t){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(t)},e.prototype.onSpectrumAlphaMove=function(t){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(t)},e.prototype.onMouseUp=function(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1},e.prototype.moveDragger=function(t){var e=this.spectrumValRect;if(e){var i,n;if(t instanceof MouseEvent)i=t.clientX-e.left,n=t.clientY-e.top;else{var o=t.key===d.LEFT,r=t.key===d.RIGHT,s=t.key===d.UP,a=t.key===d.DOWN,l=s||a,c=o||r;if(!l&&!c)return;t.preventDefault();var u=this.getSpectrumValue();i=u.x+(c?o?-5:5:0),n=u.y+(l?s?-5:5:0)}i=Math.max(i,0),i=Math.min(i,e.width),n=Math.max(n,0),n=Math.min(n,e.height),this.setSpectrumValue(i/e.width,1-n/e.height)}},e.prototype.moveHueSlider=function(t){var e=this.spectrumHueRect;if(e){var i=this.moveSlider(this.spectrumHueSlider,t);null!=i&&(this.H=1-i/e.width,this.update())}},e.prototype.moveAlphaSlider=function(t){var e=this.spectrumAlphaRect;if(e){var i=this.moveSlider(this.spectrumAlphaSlider,t);null!=i&&(this.A=i/e.width,this.update())}},e.prototype.moveSlider=function(t,e){var i,n,o=t.getBoundingClientRect(),r=null===(i=t.parentElement)||void 0===i?void 0:i.getBoundingClientRect();if(!t||!r)return null;if(e instanceof MouseEvent)n=e.clientX-r.left;else{var s=e.key===d.LEFT,a=e.key===d.RIGHT;if(!s&&!a)return null;e.preventDefault();var l=s?-5:5;n=parseFloat(t.style.left)-o.width/2+l}return n=Math.max(n,0),n=Math.min(n,r.width),t.style.left=n+o.width/2+"px",n},e.prototype.update=function(){var t=op.Color.fromHSB(360*this.H,this.S,this.B,this.A),e=op.Color.fromHSB(360*this.H,1,1),i=t.toRgbaString(),n=this.picker;op.Color.fromString(n.getValue()).toRgbaString()!==i&&(this.colorChanged=!0),n.setValue(i),this.spectrumColor.style.backgroundColor=e.toRgbaString(),this.spectrumDragger.style.backgroundColor=i},e.prototype.setSpectrumValue=function(t,e){var i=this.spectrumValRect||this.refreshSpectrumRect();if(null!=i){var n=this.spectrumDragger,o=n.getBoundingClientRect();t=Math.max(0,t),t=Math.min(1,t),e=Math.max(0,e),e=Math.min(1,e),this.S=t,this.B=e,n.style.left=t*i.width-o.width/2+"px",n.style.top=(1-e)*i.height-o.height/2+"px",this.update()}},e.prototype.getSpectrumValue=function(){var t=this.spectrumDragger,e=t.getBoundingClientRect();return{x:parseFloat(t.style.left)+e.width/2,y:parseFloat(t.style.top)+e.height/2}},e.prototype.initRecentColors=function(){var t=this,i=e.recentColors.map((function(e,i){return'<div class="ag-recent-color" id='.concat(i,' style="background-color: ').concat(e,'; width: 15px; height: 15px;" recent-color="').concat(e,'" tabIndex="').concat(t.tabIndex,'"></div>')}));this.recentColors.innerHTML=i.join("")},e.prototype.setValue=function(t){var e=op.Color.fromString(t),i=vE(e.toHSB(),3),n=i[0],o=i[1],r=i[2];this.H=(isNaN(n)?0:n)/360,this.A=e.a;var s=this.spectrumHueRect||this.refreshHueRect(),a=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left="".concat((this.H-1)*-s.width,"px"),this.spectrumAlphaSlider.style.left="".concat(this.A*a.width,"px"),this.setSpectrumValue(o,r)},e.prototype.onRecentColorClick=function(t){var i=t.target;if(c.exists(i.id)){var n=parseInt(i.id,10);this.setValue(e.recentColors[n]),this.destroy()}},e.prototype.addRecentColor=function(){var t=op.Color.fromHSB(360*this.H,this.S,this.B,this.A).toRgbaString(),i=e.recentColors;this.colorChanged&&i[0]!==t&&(i=i.filter((function(e){return e!=t})),(i=[t].concat(i)).length>e.maxRecentColors&&(i=i.slice(0,e.maxRecentColors)),e.recentColors=i)},e.prototype.destroy=function(){this.addRecentColor(),t.prototype.destroy.call(this)},e.maxRecentColors=8,e.recentColors=[],e.TEMPLATE='<div class="ag-color-panel" tabindex="-1">\n            <div ref="spectrumColor" class="ag-spectrum-color">\n                <div class="ag-spectrum-sat ag-spectrum-fill">\n                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">\n                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="ag-spectrum-tools">\n                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">\n                    <div class="ag-spectrum-hue-background"></div>\n                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">\n                    <div class="ag-spectrum-alpha-background"></div>\n                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="recentColors" class="ag-recent-colors"></div>\n            </div>\n        </div>',gE([o("spectrumColor")],e.prototype,"spectrumColor",void 0),gE([o("spectrumVal")],e.prototype,"spectrumVal",void 0),gE([o("spectrumDragger")],e.prototype,"spectrumDragger",void 0),gE([o("spectrumHue")],e.prototype,"spectrumHue",void 0),gE([o("spectrumHueSlider")],e.prototype,"spectrumHueSlider",void 0),gE([o("spectrumAlpha")],e.prototype,"spectrumAlpha",void 0),gE([o("spectrumAlphaSlider")],e.prototype,"spectrumAlphaSlider",void 0),gE([o("recentColors")],e.prototype,"recentColors",void 0),gE([r],e.prototype,"postConstruct",null),e}(s),mE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),bE=function(){return(bE=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},SE=function(t){function e(e){var i=t.call(this,bE({pickerAriaLabelKey:"ariaLabelColorPicker",pickerAriaLabelValue:"Color Picker",pickerType:"ag-list",className:"ag-color-picker",pickerIcon:"colorPicker"},e))||this;return e&&e.color&&(i.value=e.color),i}return mE(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this),this.value&&this.setValue(this.value)},e.prototype.createPickerComponent=function(){var t=this.getGui().getBoundingClientRect();return this.createBean(new x({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:t.right-190,y:t.top-250}))},e.prototype.renderAndPositionPicker=function(){var t=this,e=this.pickerComponent,i=this.createBean(new yE({picker:this}));return e.addCssClass("ag-color-dialog"),i.addDestroyFunc((function(){e.isAlive()&&t.destroyBean(e)})),e.setParentComponent(this),e.setBodyComponent(i),i.setValue(this.getValue()),i.getGui().focus(),e.addDestroyFunc((function(){t.isDestroyingPicker?t.isDestroyingPicker=!1:(t.beforeHidePicker(),t.isDestroyingPicker=!0,i.isAlive()&&t.destroyBean(i),t.isAlive()&&t.getFocusableElement().focus())})),function(){var e;return null===(e=t.pickerComponent)||void 0===e?void 0:e.close()}},e.prototype.setValue=function(e){return this.value===e?this:(this.eDisplayField.style.backgroundColor=e,t.prototype.setValue.call(this,e))},e.prototype.getValue=function(){return this.value},e}(ut),xE=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s};function CE(t){return t&&t.match(/\d+\.\d+\.\d+/)}function wE(t){var e=t.type,i=t.gridVersion,n=t.chartsVersion,o="AG Grid: AG Grid version is incompatible. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.";if(!i)return o;var r=function(t){if(t&&CE(t)){var e=xE(t.split(".")||[],2),i=e[0],n=e[1],o="".concat(i,".").concat(n,".x"),r=parseInt(i,10)-28+6;if(!(r<0)){var s=n;return{gridMajorMinor:o,chartsMajorMinor:"".concat(r,".").concat(s,".x")}}}}(i);if(!r)return o;var s=r.gridMajorMinor,a=r.chartsMajorMinor;return"incompatible"===e?"AG Grid version ".concat(i," and AG Charts version ").concat(n," is not supported. AG Grid version ").concat(s," should be used with AG Chart ").concat(a,". Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information."):"invalidCharts"===e?"AG Grid version ".concat(s," should be used with AG Chart ").concat(a,". Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information."):o}function EE(t){var e=t.gridVersion,i=t.chartsVersion;if(!CE(i))return{isValid:!1,message:wE({type:"invalidCharts",gridVersion:e,chartsVersion:i})};if(!CE(e))return{isValid:!1,message:wE({type:"invalidGrid",gridVersion:e,chartsVersion:i})};var n=xE(e.split(".")||[],2),o=n[0],r=n[1],s=xE(i.split(".")||[],2),a=s[0],l=s[1],c=function(t){var e=t.gridMajorVersion,i=t.chartsMajorVersion,n=parseInt(e,10)-28;return n===parseInt(i,10)-6&&n>=0}({gridMajorVersion:o,chartsMajorVersion:a});return c&&r===l?{isValid:!0}:c&&r===l?{isValid:!1,message:wE({type:"invalid",gridVersion:e,chartsVersion:i})}:{isValid:!1,message:wE({type:"incompatible",gridVersion:e,chartsVersion:i})}}var OE,DE={version:"31.0.1",validate:function(){return EE({gridVersion:"31.0.1",chartsVersion:_w.CHARTS_VERSION})},moduleName:a.GridChartsModule,beans:[_w,Vw,zw],agStackComponents:[{componentName:"AgColorPicker",componentClass:SE},{componentName:"AgAngleSelect",componentClass:tS}],dependantModules:[pE,Ft]},AE=0,TE={time:ya,AgChart:eb},kE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ME=function(){return(ME=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},RE=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},PE=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadRowDataVersion=0,e}return kE(e,t),e.prototype.init=function(t,e){this.params=e,this.comp=t,null!=e.pinned||(this.setAutoHeightClasses(),this.setupRefreshStrategy(),this.addThemeToDetailGrid(),this.createDetailGrid(),this.loadRowData(),this.addManagedListener(this.eventService,l.EVENT_FULL_WIDTH_ROW_FOCUSED,this.onFullWidthRowFocused.bind(this)))},e.prototype.onFullWidthRowFocused=function(t){var e=this.params,i={rowIndex:e.node.rowIndex,rowPinned:e.node.rowPinned},n={rowIndex:t.rowIndex,rowPinned:t.rowPinned};this.rowPositionUtils.sameRow(i,n)&&this.focusService.focusInto(this.comp.getGui(),t.fromBelow)},e.prototype.setAutoHeightClasses=function(){var t=this.gridOptionsService.get("detailRowAutoHeight"),e=t?"ag-details-row-auto-height":"ag-details-row-fixed-height",i=t?"ag-details-grid-auto-height":"ag-details-grid-fixed-height";this.comp.addOrRemoveCssClass(e,!0),this.comp.addOrRemoveDetailGridCssClass(i,!0)},e.prototype.setupRefreshStrategy=function(){var t=this.params.refreshStrategy;"everything"==t||"nothing"==t||"rows"==t?this.refreshStrategy=t:(null!=t&&console.warn("AG Grid: invalid cellRendererParams.refreshStrategy = '"+t+"' supplied, defaulting to refreshStrategy = 'rows'."),this.refreshStrategy="rows")},e.prototype.addThemeToDetailGrid=function(){var t=this.environment.getTheme().theme;t&&this.comp.addOrRemoveDetailGridCssClass(t,!0)},e.prototype.createDetailGrid=function(){if(c.missing(this.params.detailGridOptions))console.warn("AG Grid: could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions");else{var t=this.gridOptionsService.get("detailRowAutoHeight"),e=ME({},this.params.detailGridOptions);t&&(e.domLayout="autoHeight"),this.comp.setDetailGrid(e)}},e.prototype.registerDetailWithMaster=function(t,e){var i=this.params.node.id,n=this.params.api,o={id:i,api:t,columnApi:e},r=this.params.node;n.addDetailGridInfo(i,o),r.detailGridInfo=o,this.addDestroyFunc((function(){r.detailGridInfo===o&&(n.removeDetailGridInfo(i),r.detailGridInfo=null)}))},e.prototype.loadRowData=function(){var t=this;this.loadRowDataVersion++;var e=this.loadRowDataVersion,i=this.params.getDetailRowData;if(i){i({node:this.params.node,data:this.params.node.data,successCallback:function(i){t.loadRowDataVersion===e&&t.comp.setRowData(i)},context:this.gridOptionsService.context})}else console.warn("AG Grid: could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData")},e.prototype.refresh=function(){switch(this.refreshStrategy){case"nothing":return!0;case"everything":return!1}return this.loadRowData(),!0},RE([n("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),RE([n("focusService")],e.prototype,"focusService",void 0),e}(i),NE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),LE=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},IE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return NE(e,t),e.prototype.init=function(t){var e=this;this.params=t,this.selectAndSetTemplate();var i={addOrRemoveCssClass:function(t,i){return e.addOrRemoveCssClass(t,i)},addOrRemoveDetailGridCssClass:function(t,i){return e.eDetailGrid.classList.toggle(t,i)},setDetailGrid:function(t){return e.setDetailGrid(t)},setRowData:function(t){return e.setRowData(t)},getGui:function(){return e.eDetailGrid}};this.ctrl=this.createManagedBean(new PE),this.ctrl.init(i,t)},e.prototype.refresh=function(){return this.ctrl&&this.ctrl.refresh()},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.selectAndSetTemplate=function(){var t=this;if(this.params.pinned)this.setTemplate('<div class="ag-details-row"></div>');else{var i=function(){t.setTemplate(e.TEMPLATE)};if(c.missing(this.params.template))i();else if("string"==typeof this.params.template)this.setTemplate(this.params.template);else if("function"==typeof this.params.template){var n=(0,this.params.template)(this.params);this.setTemplate(n)}else console.warn("AG Grid: detailCellRendererParams.template should be function or string"),i();null==this.eDetailGrid&&console.warn('AG Grid: reference to eDetailGrid was missing from the details template. Please add ref="eDetailGrid" to the template.')}},e.prototype.setDetailGrid=function(t){if(this.eDetailGrid){var e=this.context.getBean("agGridReact"),i=e?c.cloneObject(e):void 0,n=this.context.getBean("frameworkComponentWrapper"),o=this.getFrameworkOverrides(),r=ht(this.eDetailGrid,t,{frameworkOverrides:o,providedBeanInstances:{agGridReact:i,frameworkComponentWrapper:n},modules:B.__getGridRegisteredModules(this.params.api.getGridId())});this.detailApi=r,this.ctrl.registerDetailWithMaster(r,new pt(r)),this.addDestroyFunc((function(){null==r||r.destroy()}))}},e.prototype.setRowData=function(t){this.detailApi&&this.detailApi.setGridOption("rowData",t)},e.TEMPLATE='<div class="ag-details-row" role="gridcell">\n            <div ref="eDetailGrid" class="ag-details-grid" role="presentation"></div>\n        </div>',LE([o("eDetailGrid")],e.prototype,"eDetailGrid",void 0),e}(s),FE={version:"31.0.1",moduleName:a.MasterDetailModule,beans:[],userComponents:[{componentName:"agDetailCellRenderer",componentClass:IE}],controllers:[{controllerName:"detailCellRenderer",controllerClass:PE}],dependantModules:[Ft]},_E=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),GE=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},BE=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return _E(o,t),o.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},o.prototype.showMenuAfterMouseEvent=function(t,e,i){var n=this;this.showMenu(t,(function(o){var r=o.getGui();n.popupService.positionPopupUnderMouseEvent({type:"columnMenu",column:t,mouseEvent:e,ePopup:r}),i&&o.showTab(i)}),"columnMenu",i,void 0,e.target)},o.prototype.showMenuAfterButtonClick=function(t,e,i,n,o){var r=this,s=-1,a="left";this.gridOptionsService.get("enableRtl")&&(s=1,a="right"),this.showMenu(t,(function(o){var l=o.getGui();r.popupService.positionPopupByComponent({type:i,column:t,eventSource:e,ePopup:l,alignSide:a,nudgeX:9*s,nudgeY:-23,position:"under",keepWithinBounds:!0}),n&&o.showTab(n)}),i,n,o,e)},o.prototype.showMenu=function(t,e,n,o,r,s){var a=this,l=this.getMenuParams(t,r,s),c=l.menu,d=l.eMenuGui,u=l.currentHeaderPosition,h=l.currentColumnIndex,p=l.anchorToElement,f=[];f.push(this.getClosedCallback(t,c,u,h,s));var g=this.localeService.getLocaleTextFunc();this.popupService.addPopup({modal:!0,eChild:d,closeOnEsc:!0,closedCallback:function(t){f.forEach((function(e){return e(t)}))},afterGuiAttached:function(t){return c.afterGuiAttached(Object.assign({},{container:n},t))},positionCallback:o?function(){return e(c)}:void 0,ariaLabel:g("ariaLabelColumnMenu","Column Menu")}),o||(c.showTabBasedOnPreviousSelection(),e(c));var v=this.popupService.setPopupPositionRelatedToElement(d,p);v&&this.addStopAnchoring(v,t,f),c.addEventListener(VE.EVENT_TAB_SELECTED,(function(t){a.lastSelectedTab=t.key})),t.setMenuVisible(!0,"contextMenu"),this.activeMenu=c,c.addEventListener(i.EVENT_DESTROYED,(function(){a.activeMenu===c&&(a.activeMenu=null)}))},o.prototype.addStopAnchoring=function(t,e,i){t.then((function(t){e.addEventListener("leftChanged",t),e.addEventListener("visibleChanged",t),i.push((function(){e.removeEventListener("leftChanged",t),e.removeEventListener("visibleChanged",t)}))}))},o.prototype.getClosedCallback=function(t,e,i,n,o){var r=this;return function(s){if(r.destroyBean(e),t.setMenuVisible(!1,"contextMenu"),s instanceof KeyboardEvent&&o)if(r.columnModel.getAllDisplayedColumns().some((function(e){return e===t}))&&c.isVisible(o)){var a=r.focusService.findTabbableParent(o);a&&(t&&r.headerNavigationService.scrollToColumn(t),a.focus())}else if(i&&-1!==n){var l=r.columnModel.getAllDisplayedColumns(),d=l[n]||c.last(l);d&&r.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:i.headerRowIndex,column:d}})}}},o.prototype.getMenuParams=function(t,e,i){var n=this.createBean(new VE(t,this.lastSelectedTab,e));return{menu:n,eMenuGui:n.getGui(),currentHeaderPosition:this.focusService.getFocusedHeader(),currentColumnIndex:this.columnModel.getAllDisplayedColumns().indexOf(t),anchorToElement:i||this.ctrlsService.getGridBodyCtrl().getGui()}},o.prototype.isMenuEnabled=function(t){var e=!this.filterManager.isFilterAllowed(t),i=t.getMenuTabs(VE.TABS_DEFAULT);return(e&&i.includes(VE.TAB_FILTER)?i.length-1:i.length)>0},GE([n("popupService")],o.prototype,"popupService",void 0),GE([n("focusService")],o.prototype,"focusService",void 0),GE([n("headerNavigationService")],o.prototype,"headerNavigationService",void 0),GE([n("ctrlsService")],o.prototype,"ctrlsService",void 0),GE([n("columnModel")],o.prototype,"columnModel",void 0),GE([n("filterManager")],o.prototype,"filterManager",void 0),o=GE([e("menuFactory")],o)}(i),VE=function(t){function e(i,n,o){var r=t.call(this)||this;return r.tabFactories={},r.includeChecks={},r.column=i,r.initialSelection=n,r.tabFactories[e.TAB_GENERAL]=r.createMainPanel.bind(r),r.tabFactories[e.TAB_FILTER]=r.createFilterPanel.bind(r),r.tabFactories[e.TAB_COLUMNS]=r.createColumnsPanel.bind(r),r.includeChecks[e.TAB_GENERAL]=function(){return!0},r.includeChecks[e.TAB_FILTER]=function(){return r.filterManager.isFilterAllowed(i)},r.includeChecks[e.TAB_COLUMNS]=function(){return!0},r.restrictTo=o,r}return _E(e,t),e.prototype.init=function(){var t=this,e=this.getTabsToCreate().map((function(e){return t.createTab(e)}));this.tabbedLayout=new nt({items:e,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)}),this.createBean(this.tabbedLayout),this.mainMenuList&&this.mainMenuList.setParentComponent(this.tabbedLayout),this.addDestroyFunc((function(){return t.destroyBean(t.tabbedLayout)}))},e.prototype.getTabsToCreate=function(){var t=this;return this.restrictTo?this.restrictTo:this.column.getMenuTabs(e.TABS_DEFAULT).filter((function(e){return t.isValidMenuTabItem(e)})).filter((function(e){return t.isNotSuppressed(e)})).filter((function(e){return t.isModuleLoaded(e)}))},e.prototype.isModuleLoaded=function(t){return t!==e.TAB_COLUMNS||B.__isRegistered(a.ColumnsToolPanelModule,this.context.getGridId())},e.prototype.isValidMenuTabItem=function(t){var i=!0,n=e.TABS_DEFAULT;return null!=this.restrictTo&&(i=this.restrictTo.indexOf(t)>-1,n=this.restrictTo),(i=i&&e.TABS_DEFAULT.indexOf(t)>-1)||console.warn("AG Grid: Trying to render an invalid menu item '".concat(t,"'. Check that your 'menuTabs' contains one of [").concat(n,"]")),i},e.prototype.isNotSuppressed=function(t){return this.includeChecks[t]()},e.prototype.createTab=function(t){return this.tabFactories[t]()},e.prototype.showTabBasedOnPreviousSelection=function(){this.showTab(this.initialSelection)},e.prototype.showTab=function(t){this.tabItemColumns&&t===e.TAB_COLUMNS?this.tabbedLayout.showItem(this.tabItemColumns):this.tabItemFilter&&t===e.TAB_FILTER?this.tabbedLayout.showItem(this.tabItemFilter):this.tabItemGeneral&&t===e.TAB_GENERAL?this.tabbedLayout.showItem(this.tabItemGeneral):this.tabbedLayout.showFirstItem()},e.prototype.onTabItemClicked=function(t){var i=null;switch(t.item){case this.tabItemColumns:i=e.TAB_COLUMNS;break;case this.tabItemFilter:i=e.TAB_FILTER;break;case this.tabItemGeneral:i=e.TAB_GENERAL}i&&this.activateTab(i)},e.prototype.activateTab=function(t){var i={type:e.EVENT_TAB_SELECTED,key:t};this.dispatchEvent(i)},e.prototype.getMenuItems=function(){var t,i=this.getDefaultMenuOptions(),n=this.gridOptionsService.getCallback("getMainMenuItems");return t=n?n({column:this.column,defaultItems:i}):i,c.removeRepeatsFromArray(t,e.MENU_ITEM_SEPARATOR),t},e.prototype.getDefaultMenuOptions=function(){var t=[],i=!this.column.getColDef().lockPinned,n=this.columnModel.getRowGroupColumns().length,o=n>0,r=this.column.isAllowValue(),s=this.column.isAllowRowGroup(),a=this.column.isPrimary(),l=this.columnModel.isPivotMode(),c="clientSide"===this.rowModel.getType(),d=this.gridOptionsService.get("treeData"),u=a&&o&&r||!a;if(i&&t.push("pinSubMenu"),u&&t.push("valueAggSubMenu"),(i||u)&&t.push(e.MENU_ITEM_SEPARATOR),t.push("autoSizeThis"),t.push("autoSizeAll"),t.push(e.MENU_ITEM_SEPARATOR),this.column.getColDef().showRowGroup)t.push("rowUnGroup");else if(s&&this.column.isPrimary()){if(this.column.isRowGroupActive())this.columnModel.isColumnGroupingLocked(this.column)||t.push("rowUnGroup");else t.push("rowGroup")}return t.push(e.MENU_ITEM_SEPARATOR),t.push("resetColumns"),c&&(d||n>(l?1:0))&&(t.push("expandAll"),t.push("contractAll")),t},e.prototype.createMainPanel=function(){this.mainMenuList=this.createManagedBean(new k);var t=this.getMenuItems(),i=this.menuItemMapper.mapWithStockItems(t,this.column);return this.mainMenuList.addMenuItems(i),this.mainMenuList.addEventListener(M.EVENT_MENU_ITEM_SELECTED,this.onHidePopup.bind(this)),this.tabItemGeneral={title:c.createIconNoSpan("menu",this.gridOptionsService,this.column),titleLabel:e.TAB_GENERAL.replace("MenuTab",""),bodyPromise:G.resolve(this.mainMenuList.getGui()),name:e.TAB_GENERAL},this.tabItemGeneral},e.prototype.onHidePopup=function(t){var e;t&&t.event&&t.event instanceof KeyboardEvent&&(e=t.event),this.hidePopupFunc(e&&{keyboardEvent:e});var i=this.focusService.getFocusedCell(),n=this.gridOptionsService.getDocument();if(n.activeElement===n.body&&i){var o=i.rowIndex,r=i.rowPinned,s=i.column;this.focusService.setFocusedCell({rowIndex:o,column:s,rowPinned:r,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}},e.prototype.createFilterPanel=function(){var t=this.filterManager.getOrCreateFilterWrapper(this.column,"COLUMN_MENU");if(!t)throw new Error("AG Grid - Unable to instantiate filter");return this.tabItemFilter={title:c.createIconNoSpan("filter",this.gridOptionsService,this.column),titleLabel:e.TAB_FILTER.replace("MenuTab",""),bodyPromise:null==t?void 0:t.guiPromise,afterAttachedCallback:function(e){(null==t?void 0:t.filterPromise)&&t.filterPromise.then((function(t){t&&t.afterGuiAttached&&t.afterGuiAttached(e)}))},afterDetachedCallback:function(){var e;return null===(e=null==t?void 0:t.filterPromise)||void 0===e?void 0:e.then((function(t){var e;return null===(e=null==t?void 0:t.afterGuiDetached)||void 0===e?void 0:e.call(t)}))},name:e.TAB_FILTER},this.tabItemFilter},e.prototype.createColumnsPanel=function(){var t=document.createElement("div");t.classList.add("ag-menu-column-select-wrapper");var i=this.createManagedBean(new Yn),n=this.column.getColDef().columnsMenuParams;n||(n={});var o=n.contractColumnSelection,r=n.suppressColumnExpandAll,s=n.suppressColumnFilter,a=n.suppressColumnSelectAll,l=n.suppressSyncLayoutWithGrid,d=n.columnLayout;i.init(!1,{suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!o,suppressColumnExpandAll:!!r,suppressColumnFilter:!!s,suppressColumnSelectAll:!!a,suppressSyncLayoutWithGrid:!!d||!!l,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,onStateUpdated:function(){}},"columnMenu"),d&&i.setColumnLayout(d);var u=i.getGui();return u.classList.add("ag-menu-column-select"),t.appendChild(u),this.tabItemColumns={title:c.createIconNoSpan("columns",this.gridOptionsService,this.column),titleLabel:e.TAB_COLUMNS.replace("MenuTab",""),bodyPromise:G.resolve(t),name:e.TAB_COLUMNS},this.tabItemColumns},e.prototype.afterGuiAttached=function(t){var e=t.container,i=t.hidePopup;this.tabbedLayout.setAfterAttachedParams({container:e,hidePopup:i}),i&&(this.hidePopupFunc=i,this.addDestroyFunc(i))},e.prototype.getGui=function(){return this.tabbedLayout.getGui()},e.EVENT_TAB_SELECTED="tabSelected",e.TAB_FILTER="filterMenuTab",e.TAB_GENERAL="generalMenuTab",e.TAB_COLUMNS="columnsMenuTab",e.TABS_DEFAULT=[e.TAB_GENERAL,e.TAB_FILTER,e.TAB_COLUMNS],e.MENU_ITEM_SEPARATOR="separator",GE([n("columnModel")],e.prototype,"columnModel",void 0),GE([n("filterManager")],e.prototype,"filterManager",void 0),GE([n("menuItemMapper")],e.prototype,"menuItemMapper",void 0),GE([n("rowModel")],e.prototype,"rowModel",void 0),GE([n("focusService")],e.prototype,"focusService",void 0),GE([r],e.prototype,"init",null),e}(i),jE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),WE=function(){return(WE=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},zE=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},UE=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return jE(o,t),o.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},o.prototype.getMenuItems=function(t,e,i){var n=[];if(c.exists(t)&&B.__isRegistered(a.ClipboardModule,this.context.getGridId())&&e&&(this.gridOptionsService.get("suppressCutToClipboard")||n.push("cut"),n.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),this.gridOptionsService.get("enableCharts")&&B.__isRegistered(a.GridChartsModule,this.context.getGridId())&&(this.columnModel.isPivotMode()&&n.push("pivotChart"),this.rangeService&&!this.rangeService.isEmpty()&&n.push("chartRange")),c.exists(t)){var o=!B.__isRegistered(a.CsvExportModule,this.context.getGridId()),r=!B.__isRegistered(a.ExcelExportModule,this.context.getGridId()),s=this.gridOptionsService.get("suppressExcelExport")||r,l=this.gridOptionsService.get("suppressCsvExport")||o;!(c.isIOSUserAgent()||s&&l)&&n.push("export")}var d=this.gridOptionsService.getCallback("getContextMenuItems");return d?d({node:t,column:e,value:i,defaultItems:n.length?n:void 0}):n},o.prototype.onContextMenu=function(t,e,i,n,o,r){if((this.gridOptionsService.get("allowContextMenuWithControlKey")||!t||!t.ctrlKey&&!t.metaKey)&&(t&&this.blockMiddleClickScrollsIfNeeded(t),!this.gridOptionsService.get("suppressContextMenu"))){var s=t||e.touches[0];if(this.showMenu(i,n,o,s,r))(t||e).preventDefault()}},o.prototype.blockMiddleClickScrollsIfNeeded=function(t){var e=this.gridOptionsService,i=t.which;e.get("suppressMiddleClickScrolls")&&2===i&&t.preventDefault()},o.prototype.showMenu=function(t,e,n,o,r){var s=this,a=this.getMenuItems(t,e,n),l=this.ctrlsService.getGridBodyCtrl().getGui();if(void 0===a||c.missingOrEmpty(a))return!1;var d=new HE(a);this.createBean(d);var u=d.getGui(),h={column:e,rowNode:t,type:"contextMenu",mouseEvent:o,ePopup:u,nudgeY:1},p=this.localeService.getLocaleTextFunc(),f=this.popupService.addPopup({modal:!0,eChild:u,closeOnEsc:!0,closedCallback:function(){l.classList.remove("ag-context-menu-open"),s.destroyBean(d)},click:o,positionCallback:function(){var t=s.gridOptionsService.get("enableRtl");s.popupService.positionPopupUnderMouseEvent(WE(WE({},h),{nudgeX:t?-1*(u.offsetWidth+1):1}))},anchorToElement:r,ariaLabel:p("ariaLabelContextMenu","Context Menu")});return f&&(l.classList.add("ag-context-menu-open"),d.afterGuiAttached({container:"contextMenu",hidePopup:f.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=d,d.addEventListener(i.EVENT_DESTROYED,(function(){s.activeMenu===d&&(s.activeMenu=null)})),f&&d.addEventListener(M.EVENT_MENU_ITEM_SELECTED,f.hideFunc),!0},zE([n("popupService")],o.prototype,"popupService",void 0),zE([E("rangeService")],o.prototype,"rangeService",void 0),zE([n("ctrlsService")],o.prototype,"ctrlsService",void 0),zE([n("columnModel")],o.prototype,"columnModel",void 0),o=zE([e("contextMenuFactory")],o)}(i),HE=function(t){function e(e){var i=t.call(this,'<div class="'.concat("ag-menu",'" role="presentation"></div>'))||this;return i.menuList=null,i.focusedCell=null,i.menuItems=e,i}return jE(e,t),e.prototype.addMenuItems=function(){var t=this,e=this.createManagedBean(new k),i=this.menuItemMapper.mapWithStockItems(this.menuItems,null);e.addMenuItems(i),this.appendChild(e),this.menuList=e,e.addEventListener(M.EVENT_MENU_ITEM_SELECTED,(function(e){return t.dispatchEvent(e)}))},e.prototype.afterGuiAttached=function(t){t.hidePopup&&this.addDestroyFunc(t.hidePopup),this.focusedCell=this.focusService.getFocusedCell(),this.menuList&&this.focusService.focusInto(this.menuList.getGui())},e.prototype.restoreFocusedCell=function(){var t=this.focusService.getFocusedCell();if(t&&this.focusedCell&&this.cellPositionUtils.equals(t,this.focusedCell)){var e=this.focusedCell,i=e.rowIndex,n=e.rowPinned,o=e.column,r=this.gridOptionsService.getDocument();r.activeElement===r.body&&this.focusService.setFocusedCell({rowIndex:i,column:o,rowPinned:n,forceBrowserFocus:!0})}},e.prototype.destroy=function(){this.restoreFocusedCell(),t.prototype.destroy.call(this)},zE([n("menuItemMapper")],e.prototype,"menuItemMapper",void 0),zE([n("focusService")],e.prototype,"focusService",void 0),zE([n("cellPositionUtils")],e.prototype,"cellPositionUtils",void 0),zE([r],e.prototype,"addMenuItems",null),e}(s),KE=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),YE=function(){return(YE=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},XE=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},qE=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return KE(i,t),i.prototype.mapWithStockItems=function(t,e){var i=this;if(!t)return[];var n=[];return t.forEach((function(t){var o;if(o="string"==typeof t?i.getStockMenuItem(t,e):YE({},t)){var r=o,s=r.subMenu;s&&s instanceof Array&&(r.subMenu=i.mapWithStockItems(s,e)),null!=o&&n.push(o)}})),n},i.prototype.getStockMenuItem=function(t,e){var i,n=this,o=this.localeService.getLocaleTextFunc(),r=this.gridOptionsService.get("skipHeaderOnAutoSize");switch(t){case"pinSubMenu":return{name:o("pinColumn","Pin Column"),icon:c.createIconNoSpan("menuPin",this.gridOptionsService,null),subMenu:["clearPinned","pinLeft","pinRight"]};case"pinLeft":return{name:o("pinLeft","Pin Left"),action:function(){return n.columnModel.setColumnPinned(e,"left","contextMenu")},checked:!!e&&e.isPinnedLeft()};case"pinRight":return{name:o("pinRight","Pin Right"),action:function(){return n.columnModel.setColumnPinned(e,"right","contextMenu")},checked:!!e&&e.isPinnedRight()};case"clearPinned":return{name:o("noPin","No Pin"),action:function(){return n.columnModel.setColumnPinned(e,null,"contextMenu")},checked:!!e&&!e.isPinned()};case"valueAggSubMenu":return B.__assertRegistered(a.RowGroupingModule,"Aggregation from Menu",this.context.getGridId())&&((null==e?void 0:e.isPrimary())||(null==e?void 0:e.getColDef().pivotValueColumn))?{name:o("valueAggregation","Value Aggregation"),icon:c.createIconNoSpan("menuValue",this.gridOptionsService,null),subMenu:this.createAggregationSubMenu(e)}:null;case"autoSizeThis":return{name:o("autosizeThiscolumn","Autosize This Column"),action:function(){return n.columnModel.autoSizeColumn(e,r,"contextMenu")}};case"autoSizeAll":return{name:o("autosizeAllColumns","Autosize All Columns"),action:function(){return n.columnModel.autoSizeAllColumns(r,"contextMenu")}};case"rowGroup":return{name:o("groupBy","Group by")+" "+c.escapeString(this.columnModel.getDisplayNameForColumn(e,"header")),disabled:(null==e?void 0:e.isRowGroupActive())||!(null==e?void 0:e.getColDef().enableRowGroup),action:function(){return n.columnModel.addRowGroupColumn(e,"contextMenu")},icon:c.createIconNoSpan("menuAddRowGroup",this.gridOptionsService,null)};case"rowUnGroup":var s=c.createIconNoSpan("menuRemoveRowGroup",this.gridOptionsService,null),l=null==e?void 0:e.getColDef().showRowGroup,d=this.gridOptionsService.get("groupLockGroupColumns");if(!0===l)return{name:o("ungroupAll","Un-Group All"),disabled:-1===d||d>=this.columnModel.getRowGroupColumns().length,action:function(){return n.columnModel.setRowGroupColumns(n.columnModel.getRowGroupColumns().slice(0,d),"contextMenu")},icon:s};if("string"==typeof l){var u=this.columnModel.getPrimaryColumn(l),h=null!=u?c.escapeString(this.columnModel.getDisplayNameForColumn(u,"header")):l;return{name:o("ungroupBy","Un-Group by")+" "+h,disabled:null!=u&&this.columnModel.isColumnGroupingLocked(u),action:function(){return n.columnModel.removeRowGroupColumn(l,"contextMenu")},icon:s}}return{name:o("ungroupBy","Un-Group by")+" "+c.escapeString(this.columnModel.getDisplayNameForColumn(e,"header")),disabled:!(null==e?void 0:e.isRowGroupActive())||!(null==e?void 0:e.getColDef().enableRowGroup)||this.columnModel.isColumnGroupingLocked(e),action:function(){return n.columnModel.removeRowGroupColumn(e,"contextMenu")},icon:s};case"resetColumns":return{name:o("resetColumns","Reset Columns"),action:function(){return n.columnModel.resetColumnState("contextMenu")}};case"expandAll":return{name:o("expandAll","Expand All Row Groups"),action:function(){return n.gridApi.expandAll()}};case"contractAll":return{name:o("collapseAll","Collapse All Row Groups"),action:function(){return n.gridApi.collapseAll()}};case"copy":return B.__assertRegistered(a.ClipboardModule,"Copy from Menu",this.context.getGridId())?{name:o("copy","Copy"),shortcut:o("ctrlC","Ctrl+C"),icon:c.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return n.clipboardService.copyToClipboard()}}:null;case"copyWithHeaders":return B.__assertRegistered(a.ClipboardModule,"Copy with Headers from Menu",this.context.getGridId())?{name:o("copyWithHeaders","Copy with Headers"),icon:c.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return n.clipboardService.copyToClipboard({includeHeaders:!0})}}:null;case"copyWithGroupHeaders":return B.__assertRegistered(a.ClipboardModule,"Copy with Group Headers from Menu",this.context.getGridId())?{name:o("copyWithGroupHeaders","Copy with Group Headers"),icon:c.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return n.clipboardService.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}}:null;case"cut":if(B.__assertRegistered(a.ClipboardModule,"Cut from Menu",this.context.getGridId())){var p=this.focusService.getFocusedCell(),f=p?this.rowPositionUtils.getRowNode(p):null,g=!!f&&(null==p?void 0:p.column.isCellEditable(f));return{name:o("cut","Cut"),shortcut:o("ctrlX","Ctrl+X"),icon:c.createIconNoSpan("clipboardCut",this.gridOptionsService,null),disabled:!g||this.gridOptionsService.get("suppressCutToClipboard"),action:function(){return n.clipboardService.cutToClipboard(void 0,"contextMenu")}}}return null;case"paste":return B.__assertRegistered(a.ClipboardModule,"Paste from Clipboard",this.context.getGridId())?{name:o("paste","Paste"),shortcut:o("ctrlV","Ctrl+V"),disabled:!0,icon:c.createIconNoSpan("clipboardPaste",this.gridOptionsService,null),action:function(){return n.clipboardService.pasteFromClipboard()}}:null;case"export":var v=[],y=B.__isRegistered(a.CsvExportModule,this.context.getGridId()),m=B.__isRegistered(a.ExcelExportModule,this.context.getGridId());return!this.gridOptionsService.get("suppressCsvExport")&&y&&v.push("csvExport"),!this.gridOptionsService.get("suppressExcelExport")&&m&&v.push("excelExport"),{name:o("export","Export"),subMenu:v,icon:c.createIconNoSpan("save",this.gridOptionsService,null)};case"csvExport":return{name:o("csvExport","CSV Export"),icon:c.createIconNoSpan("csvExport",this.gridOptionsService,null),action:function(){return n.gridApi.exportDataAsCsv({})}};case"excelExport":return{name:o("excelExport","Excel Export"),icon:c.createIconNoSpan("excelExport",this.gridOptionsService,null),action:function(){return n.gridApi.exportDataAsExcel()}};case"separator":return"separator";case"pivotChart":case"chartRange":return null!==(i=this.chartMenuItemMapper.getChartItems(t))&&void 0!==i?i:null;default:return console.warn("AG Grid: unknown menu item type ".concat(t)),null}},i.prototype.createAggregationSubMenu=function(t){var e,i=this,n=this.localeService.getLocaleTextFunc();if(t.isPrimary())e=t;else{var o=t.getColDef().pivotValueColumn;e=c.exists(o)?o:void 0}var r=[];if(e){var s=e.isValueActive(),a=this.aggFuncService.getFuncNames(e);r.push({name:n("noAggregation","None"),action:function(){i.columnModel.removeValueColumn(e,"contextMenu"),i.columnModel.setColumnAggFunc(e,void 0,"contextMenu")},checked:!s}),a.forEach((function(t){r.push({name:n(t,i.aggFuncService.getDefaultFuncLabel(t)),action:function(){i.columnModel.setColumnAggFunc(e,t,"contextMenu"),i.columnModel.addValueColumn(e,"contextMenu")},checked:s&&e.getAggFunc()===t})}))}return r},XE([n("columnModel")],i.prototype,"columnModel",void 0),XE([n("gridApi")],i.prototype,"gridApi",void 0),XE([E("clipboardService")],i.prototype,"clipboardService",void 0),XE([E("aggFuncService")],i.prototype,"aggFuncService",void 0),XE([n("focusService")],i.prototype,"focusService",void 0),XE([n("rowPositionUtils")],i.prototype,"rowPositionUtils",void 0),XE([n("chartMenuItemMapper")],i.prototype,"chartMenuItemMapper",void 0),i=XE([e("menuItemMapper")],i)}(i),$E=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ZE=function(){return(ZE=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},JE=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},QE=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},tO=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}var n;return $E(i,t),n=i,i.prototype.getChartItems=function(t){var e,i;if(this.chartService){var o="pivotChart"===t?new eO(this.gridOptionsService,this.chartService,this.localeService):new iO(this.gridOptionsService,this.chartService,this.localeService),r=o.getMenuItem(),s=null===(i=null===(e=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===e?void 0:e.settingsPanel)||void 0===i?void 0:i.chartGroupsDef;return s&&(r=n.filterAndOrderChartMenu(r,s,o.getConfigLookup())),this.cleanInternals(r)}B.__assertRegistered(a.GridChartsModule,'the Context Menu key "'.concat(t,'"'),this.context.getGridId())},i.prototype.cleanInternals=function(t){if(!t)return t;var e=function(t){var i;return null==t||delete t._key,null===(i=null==t?void 0:t.subMenu)||void 0===i||i.forEach((function(t){return e(t)})),t};return e(t)},i.buildLookup=function(t){var e={},i=function(t){e[t._key]=t,t.subMenu&&t.subMenu.forEach((function(t){return i(t)}))};return i(t),e},i.filterAndOrderChartMenu=function(t,e,i){var n,o=this.buildLookup(t),r=ZE(ZE({},t),{subMenu:[]});if(Object.entries(e).forEach((function(t){var e,n,s=QE(t,2),a=s[0],l=s[1],d=i[a];if(null!=d){var u=o[d._key];if(u)if(u.subMenu){var h=l.map((function(t){var e=d[t];if(null!=e)return o[e];c.warnOnce("invalid chartGroupsDef config '".concat(a,".").concat(t,"'"))})).filter((function(t){return void 0!==t}));h.length>0&&(u.subMenu=h,null===(e=r.subMenu)||void 0===e||e.push(u))}else null===(n=r.subMenu)||void 0===n||n.push(u)}else c.warnOnce("invalid chartGroupsDef config '".concat(a,"'"))})),0!=(null===(n=r.subMenu)||void 0===n?void 0:n.length))return r},JE([E("chartService")],i.prototype,"chartService",void 0),i=n=JE([e("chartMenuItemMapper")],i)}(i),eO=function(){function t(t,e,i){this.gridOptionsService=t,this.chartService=e,this.localeService=i}return t.prototype.getMenuItem=function(){var t=this,e=this.localeService.getLocaleTextFunc(),i=function(i,n,o,r){return{name:e(i,n),action:function(){return t.chartService.createPivotChart({chartType:o})},_key:r}};return{name:e("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:e("columnChart","Column"),subMenu:[i("groupedColumn","Grouped&lrm;","groupedColumn","pivotGroupedColumn"),i("stackedColumn","Stacked&lrm;","stackedColumn","pivotStackedColumn"),i("normalizedColumn","100% Stacked&lrm;","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:e("barChart","Bar"),subMenu:[i("groupedBar","Grouped&lrm;","groupedBar","pivotGroupedBar"),i("stackedBar","Stacked&lrm;","stackedBar","pivotStackedBar"),i("normalizedBar","100% Stacked&lrm;","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:e("pieChart","Pie"),subMenu:[i("pie","Pie&lrm;","pie","pivotPie"),i("doughnut","Doughnut&lrm;","doughnut","pivotDoughnut")]},i("line","Line&lrm;","line","pivotLineChart"),{_key:"pivotXYChart",name:e("xyChart","X Y (Scatter)"),subMenu:[i("scatter","Scatter&lrm;","scatter","pivotScatter"),i("bubble","Bubble&lrm;","bubble","pivotBubble")]},{_key:"pivotAreaChart",name:e("areaChart","Area"),subMenu:[i("area","Area&lrm;","area","pivotArea"),i("stackedArea","Stacked&lrm;","stackedArea","pivotStackedArea"),i("normalizedArea","100% Stacked&lrm;","normalizedArea","pivotNormalizedArea")]},i("histogramChart","Histogram&lrm;","histogram","pivotHistogramChart"),{_key:"pivotCombinationChart",name:e("combinationChart","Combination"),subMenu:[i("columnLineCombo","Column & Line&lrm;","columnLineCombo","pivotColumnLineCombo"),i("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","pivotAreaColumnCombo")]}],icon:c.createIconNoSpan("chart",this.gridOptionsService,void 0)}},t.prototype.getConfigLookup=function(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",doughnut:"pivotDoughnut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},histogramGroup:{_key:"pivotHistogramChart",histogram:"pivotHistogramChart"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:""}}},t}(),iO=function(){function t(t,e,i){this.gridOptionsService=t,this.chartService=e,this.localeService=i}return t.prototype.getMenuItem=function(){var t=this,e=this.localeService.getLocaleTextFunc(),i=function(i,n,o,r){return{name:e(i,n),action:function(){return t.chartService.createChartFromCurrentRange(o)},_key:r}};return{name:e("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:e("columnChart","Column"),subMenu:[i("groupedColumn","Grouped&lrm;","groupedColumn","rangeGroupedColumn"),i("stackedColumn","Stacked&lrm;","stackedColumn","rangeStackedColumn"),i("normalizedColumn","100% Stacked&lrm;","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:e("barChart","Bar"),subMenu:[i("groupedBar","Grouped&lrm;","groupedBar","rangeGroupedBar"),i("stackedBar","Stacked&lrm;","stackedBar","rangeStackedBar"),i("normalizedBar","100% Stacked&lrm;","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:e("pieChart","Pie"),subMenu:[i("pie","Pie&lrm;","pie","rangePie"),i("doughnut","Doughnut&lrm;","doughnut","rangeDoughnut")],_key:"rangePieChart"},i("line","Line&lrm;","line","rangeLineChart"),{name:e("xyChart","X Y (Scatter)"),subMenu:[i("scatter","Scatter&lrm;","scatter","rangeScatter"),i("bubble","Bubble&lrm;","bubble","rangeBubble")],_key:"rangeXYChart"},{name:e("areaChart","Area"),subMenu:[i("area","Area&lrm;","area","rangeArea"),i("stackedArea","Stacked&lrm;","stackedArea","rangeStackedArea"),i("normalizedArea","100% Stacked&lrm;","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},i("histogramChart","Histogram&lrm;","histogram","rangeHistogramChart"),{name:e("combinationChart","Combination"),subMenu:[i("columnLineCombo","Column & Line&lrm;","columnLineCombo","rangeColumnLineCombo"),i("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:c.createIconNoSpan("chart",this.gridOptionsService,void 0)}},t.prototype.getConfigLookup=function(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",doughnut:"rangeDoughnut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},histogramGroup:{_key:"rangeHistogramChart",histogram:"rangeHistogramChart"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:""}}},t}(),nO={version:"31.0.1",moduleName:a.MenuModule,beans:[BE,UE,qE,tO],dependantModules:[Ft]},oO=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),rO=function(){return(rO=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},sO=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},aO=function(t){function e(){var e=t.call(this,'<div class="ag-multi-filter ag-menu-list-compact"></div>')||this;return e.filterDefs=[],e.filters=[],e.guiDestroyFuncs=[],e.activeFilterIndices=[],e.lastActivatedMenuItem=null,e.afterFiltersReadyFuncs=[],e}return oO(e,t),e.prototype.postConstruct=function(){var t=this;this.initialiseTabGuard({onFocusIn:function(e){return t.onFocusIn(e)}})},e.getFilterDefs=function(t){var e=t.filters;return e&&e.length>0?e:[{filter:"agTextColumnFilter"},{filter:"agSetColumnFilter"}]},e.prototype.init=function(t){var i=this;this.params=t,this.filterDefs=e.getFilterDefs(t);var n=t.column,o=t.filterChangedCallback;this.column=n,this.filterChangedCallback=o;var r=[];return this.filterDefs.forEach((function(t,e){var n=i.createFilter(t,e);null!=n&&r.push(n)})),G.all(r).then((function(t){i.filters=t,i.refreshGui("columnMenu"),i.afterFiltersReadyFuncs.forEach((function(t){return t()})),i.afterFiltersReadyFuncs.length=0}))},e.prototype.refreshGui=function(t){var e=this;t!==this.lastOpenedInContainer&&(this.removeAllChildrenExceptTabGuards(),this.destroyChildren(),this.filters.forEach((function(i,n){n>0&&e.appendChild(c.loadTemplate('<div class="ag-filter-separator"></div>'));var o,r=e.filterDefs[n],s=e.getFilterTitle(i,r);if("subMenu"===r.display&&"toolPanel"!==t)o=e.insertFilterMenu(i,s).getGui();else if("subMenu"===r.display||"accordion"===r.display){o=e.insertFilterGroup(i,s).getGui()}else o=i.getGui();e.appendChild(o)})),this.lastOpenedInContainer=t)},e.prototype.getFilterTitle=function(t,e){if(null!=e.title)return e.title;var i=t;return"function"==typeof i.getFilterTitle?i.getFilterTitle():"Filter"},e.prototype.destroyChildren=function(){this.guiDestroyFuncs.forEach((function(t){return t()})),this.guiDestroyFuncs.length=0},e.prototype.insertFilterMenu=function(t,e){var i=this,n=this.createBean(new M({name:e,subMenu:t,cssClasses:["ag-multi-filter-menu-item"],isCompact:!0,isAnotherSubMenuOpen:function(){return!1}}));return n.setParentComponent(this),this.guiDestroyFuncs.push((function(){return i.destroyBean(n)})),this.addManagedListener(n,M.EVENT_MENU_ITEM_ACTIVATED,(function(t){i.lastActivatedMenuItem&&i.lastActivatedMenuItem!==t.menuItem&&i.lastActivatedMenuItem.deactivate(),i.lastActivatedMenuItem=t.menuItem})),n.addGuiEventListener("focusin",(function(){return n.activate()})),n.addGuiEventListener("focusout",(function(){n.isSubMenuOpen()||n.deactivate()})),n},e.prototype.insertFilterGroup=function(t,e){var i=this,n=this.createBean(new q({title:e,cssIdentifier:"multi-filter"}));return this.guiDestroyFuncs.push((function(){return i.destroyBean(n)})),n.addItem(t.getGui()),n.toggleGroupExpand(!1),t.afterGuiAttached&&n.addManagedListener(n,q.EVENT_EXPANDED,(function(){return t.afterGuiAttached({container:i.lastOpenedInContainer,suppressFocus:!0,hidePopup:i.hidePopup})})),n},e.prototype.isFilterActive=function(){return this.filters.some((function(t){return t.isFilterActive()}))},e.prototype.getLastActiveFilterIndex=function(){return this.activeFilterIndices.length>0?this.activeFilterIndices[this.activeFilterIndices.length-1]:null},e.prototype.doesFilterPass=function(t,e){var i=!0;return this.filters.forEach((function(n){i&&n!==e&&n.isFilterActive()&&(i=n.doesFilterPass(t))})),i},e.prototype.getFilterType=function(){return"multi"},e.prototype.getModelFromUi=function(){return{filterType:this.getFilterType(),filterModels:this.filters.map((function(t){var e=t;return"function"==typeof e.getModelFromUi?e.getModelFromUi():null}))}},e.prototype.getModel=function(){return this.isFilterActive()?{filterType:this.getFilterType(),filterModels:this.filters.map((function(t){return t.isFilterActive()?t.getModel():null}))}:null},e.prototype.setModel=function(t){var e=this,i=function(t,e){return new G((function(i){var n=t.setModel(e);n?n.then((function(){return i()})):i()}))},n=[];return null==t?n=this.filters.map((function(t,n){return i(t,null).then((function(){e.updateActiveList(n)}))})):this.filters.forEach((function(o,r){var s=t.filterModels.length>r?t.filterModels[r]:null,a=i(o,s).then((function(){e.updateActiveList(r)}));n.push(a)})),G.all(n).then((function(){}))},e.prototype.applyModel=function(t){void 0===t&&(t="api");var e=!1;return this.filters.forEach((function(i){i instanceof ft&&(e=i.applyModel(t)||e)})),e},e.prototype.getChildFilterInstance=function(t){return this.filters[t]},e.prototype.afterGuiAttached=function(t){t?(this.hidePopup=t.hidePopup,this.refreshGui(t.container)):this.hidePopup=void 0;var e=this.params.filters,i=e&&e.some((function(t){return t.display&&"inline"!==t.display}));this.executeFunctionIfExists("afterGuiAttached",rO(rO({},t||{}),{suppressFocus:i}));var n=this.gridOptionsService.getDocument(),o=n.activeElement;i&&(o===n.body||this.getGui().contains(o))&&this.forceFocusOutOfContainer(!0)},e.prototype.afterGuiDetached=function(){this.executeFunctionIfExists("afterGuiDetached")},e.prototype.onAnyFilterChanged=function(){this.executeFunctionIfExists("onAnyFilterChanged")},e.prototype.onNewRowsLoaded=function(){this.executeFunctionIfExists("onNewRowsLoaded")},e.prototype.destroy=function(){var e=this;this.filters.forEach((function(t){t.setModel(null),e.destroyBean(t)})),this.filters.length=0,this.destroyChildren(),this.hidePopup=void 0,t.prototype.destroy.call(this)},e.prototype.executeFunctionIfExists=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.forEachReverse(this.filters,(function(i){var n=i[t];"function"==typeof n&&n.apply(i,e)}))},e.prototype.createFilter=function(t,e){var i,n=this,o=this.params,r=o.filterModifiedCallback,s=o.doesRowPassOtherFilter,a=rO(rO({},this.filterManager.createFilterParams(this.column,this.column.getColDef())),{filterModifiedCallback:r,filterChangedCallback:function(t){n.executeWhenAllFiltersReady((function(){return n.filterChanged(e,t)}))},doesRowPassOtherFilter:function(t){return s(t)&&n.doesFilterPass({node:t,data:t.data},i)}}),l=this.userComponentFactory.getFilterDetails(t,a,"agTextColumnFilter");if(!l)return null;var c=l.newAgStackInstance();return c&&c.then((function(t){return i=t})),c},e.prototype.executeWhenAllFiltersReady=function(t){this.filters&&this.filters.length>0?t():this.afterFiltersReadyFuncs.push(t)},e.prototype.updateActiveList=function(t){var e=this.filters[t];c.removeFromArray(this.activeFilterIndices,t),e.isFilterActive()&&this.activeFilterIndices.push(t)},e.prototype.filterChanged=function(t,e){this.updateActiveList(t),this.filterChangedCallback(e);var i=this.filters[t];this.filters.forEach((function(t){t!==i&&"function"==typeof t.onAnyFilterChanged&&t.onAnyFilterChanged()}))},e.prototype.onFocusIn=function(t){return null==this.lastActivatedMenuItem||this.lastActivatedMenuItem.getGui().contains(t.target)||(this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=null),!0},e.prototype.getModelAsString=function(t){var e,i,n,o;if(!this.filters||!(null===(e=null==t?void 0:t.filterModels)||void 0===e?void 0:e.length))return"";var r=null!==(i=this.getLastActiveFilterIndex())&&void 0!==i?i:0,s=this.filters[r];return null!==(o=null===(n=s.getModelAsString)||void 0===n?void 0:n.call(s,t.filterModels[r]))&&void 0!==o?o:""},sO([n("filterManager")],e.prototype,"filterManager",void 0),sO([n("userComponentFactory")],e.prototype,"userComponentFactory",void 0),sO([r],e.prototype,"postConstruct",null),e}(b),lO=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cO=function(){return(cO=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},dO=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},uO=function(t){function e(){var e=t.call(this,'<div class="ag-multi-floating-filter ag-floating-filter-input"></div>')||this;return e.floatingFilters=[],e.compDetailsList=[],e}return lO(e,t),e.prototype.init=function(t){this.params=t;var e=this.getCompDetailsList(t).compDetailsList;return this.setParams(e)},e.prototype.setParams=function(t){var e=this,i=[];return t.forEach((function(t){var n=null==t?void 0:t.newAgStackInstance();null!=n&&(e.compDetailsList.push(t),i.push(n))})),G.all(i).then((function(t){t.forEach((function(t,i){e.floatingFilters.push(t);var n=t.getGui();e.appendChild(n),i>0&&c.setDisplayed(n,!1)}))}))},e.prototype.onParamsUpdated=function(t){var e=this;this.params=t;var i=this.getCompDetailsList(t),n=i.compDetailsList,o=i.floatingFilterParamsList;n.length===this.compDetailsList.length&&n.every((function(t,i){return!e.filterManager.areFilterCompsDifferent(e.compDetailsList[i],t)}))?o.forEach((function(t,i){var n,o=e.floatingFilters[i];null===(n=o.onParamsUpdated)||void 0===n||n.call(o,t)})):(c.clearElement(this.getGui()),this.destroyBeans(this.floatingFilters),this.floatingFilters=[],this.compDetailsList=[],this.setParams(n))},e.prototype.getCompDetailsList=function(t){var e=this,i=[],n=[],o=t.filterParams;return aO.getFilterDefs(o).forEach((function(o,r){var s=cO(cO({},t),{parentFilterInstance:function(t){e.parentMultiFilterInstance((function(e){var i=e.getChildFilterInstance(r);null!=i&&t(i)}))}});c.mergeDeep(s.filterParams,o.filterParams);var a=e.getCompDetails(o,s);a&&(i.push(a),n.push(s))})),{compDetailsList:i,floatingFilterParamsList:n}},e.prototype.onParentModelChanged=function(t,e){var i=this;e&&e.afterFloatingFilter||this.parentMultiFilterInstance((function(n){if(null==t)i.floatingFilters.forEach((function(t,i){t.onParentModelChanged(null,e),c.setDisplayed(t.getGui(),0===i)}));else{var o=n.getLastActiveFilterIndex();i.floatingFilters.forEach((function(i,n){var r=t.filterModels.length>n?t.filterModels[n]:null;i.onParentModelChanged(r,e);var s=null==o?0===n:n===o;c.setDisplayed(i.getGui(),s)}))}}))},e.prototype.destroy=function(){this.destroyBeans(this.floatingFilters),this.floatingFilters.length=0,t.prototype.destroy.call(this)},e.prototype.getCompDetails=function(t,e){var i,n=this,o=null!==(i=this.userComponentFactory.getDefaultFloatingFilterType(t,(function(){return n.filterManager.getDefaultFloatingFilter(n.params.column)})))&&void 0!==i?i:"agReadOnlyFloatingFilter";return this.userComponentFactory.getFloatingFilterCompDetails(t,e,o)},e.prototype.parentMultiFilterInstance=function(t){this.params.parentFilterInstance((function(e){if(!(e instanceof aO))throw new Error("AG Grid - MultiFloatingFilterComp expects MultiFilter as its parent");t(e)}))},dO([n("userComponentFactory")],e.prototype,"userComponentFactory",void 0),dO([n("filterManager")],e.prototype,"filterManager",void 0),e}(s),hO={version:"31.0.1",moduleName:a.MultiFilterModule,beans:[],userComponents:[{componentName:"agMultiColumnFilter",componentClass:aO},{componentName:"agMultiColumnFloatingFilter",componentClass:uO}],dependantModules:[Ft]},pO=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fO=function(t){function e(){return t.call(this,'<div class="ag-cell-edit-wrapper"></div>')||this}return pO(e,t),e.prototype.init=function(t){var e=this;this.params=t;var i=t.cellStartedEdit,n=t.cellHeight,o=t.values;c.missing(o)&&console.warn("AG Grid: agRichSelectCellEditor requires cellEditorParams.values to be set");var r=this.buildRichSelectParams(),s=r.params,a=r.valuesPromise;this.richSelect=this.createManagedBean(new u(s)),this.richSelect.addCssClass("ag-cell-editor"),this.appendChild(this.richSelect),a&&a.then((function(t){e.richSelect.setValueList({valueList:t,refresh:!0});var i=e.getSearchStringCallback(t);i&&e.richSelect.setSearchStringCreator(i)})),this.addManagedListener(this.richSelect,l.EVENT_FIELD_PICKER_VALUE_SELECTED,this.onEditorPickerValueSelected.bind(this)),this.addManagedListener(this.richSelect.getGui(),"focusout",this.onEditorFocusOut.bind(this)),this.focusAfterAttached=i,c.exists(n)&&this.richSelect.setRowHeight(n)},e.prototype.onEditorPickerValueSelected=function(t){this.params.stopEditing(!t.fromEnterKey)},e.prototype.onEditorFocusOut=function(t){this.richSelect.getGui().contains(t.relatedTarget)||this.params.stopEditing(!0)},e.prototype.buildRichSelectParams=function(){var t,e,i=this.params,n=i.cellRenderer,o=i.value,r=i.values,s=i.formatValue,a=i.searchDebounceDelay,l=i.valueListGap,c=i.valueListMaxHeight,d=i.valueListMaxWidth,u=i.allowTyping,h=i.filterList,p=i.searchType,f=i.highlightMatch,g=i.valuePlaceholder,v=i.eventKey,y={value:o,cellRenderer:n,searchDebounceDelay:a,valueFormatter:s,pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"virtual-list",pickerGap:l,allowTyping:u,filterList:h,searchType:p,highlightMatch:f,maxPickerHeight:c,maxPickerWidth:d,placeholder:g,initialInputValue:1===(null==v?void 0:v.length)?v:void 0};return t="function"==typeof r?r(this.params):null!=r?r:[],Array.isArray(t)?(y.valueList=t,y.searchStringCreator=this.getSearchStringCallback(t)):e=t,{params:y,valuesPromise:e}},e.prototype.getSearchStringCallback=function(t){var e=this,i=this.params.colDef;if("object"==typeof t[0]&&i.keyCreator)return function(t){return t.map((function(t){var n={value:t,colDef:e.params.colDef,column:e.params.column,node:e.params.node,data:e.params.data,api:e.gridOptionsService.api,columnApi:e.gridOptionsService.columnApi,context:e.gridOptionsService.context};return i.keyCreator(n)}))}},e.prototype.afterGuiAttached=function(){var t=this,e=this.focusAfterAttached,i=this.params;setTimeout((function(){if(t.isAlive()){if(e){var n=t.richSelect.getFocusableElement();n.focus();var o=t.params,r=o.allowTyping,s=o.eventKey;!r||s&&1===s.length||n.select()}t.richSelect.showPicker();var a=i.eventKey;a&&1===(null==a?void 0:a.length)&&t.richSelect.searchTextFromString(a)}}))},e.prototype.getValue=function(){return this.richSelect.getValue()},e.prototype.isPopup=function(){return!1},e}(gt),gO={version:"31.0.1",moduleName:a.RichSelectModule,beans:[],userComponents:[{componentName:"agRichSelect",componentClass:fO},{componentName:"agRichSelectCellEditor",componentClass:fO}],dependantModules:[Ft]},vO=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),yO=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},mO=function(t){function e(e,i,n){var o=t.call(this,0)||this;return o.nodeIdSequence=new vt,o.info={},o.ssrmParams=e,o.parentRowNode=n,o.level=n.level+1,o.groupLevel=e.rowGroupCols?o.level<e.rowGroupCols.length:void 0,o.leafGroup=!!e.rowGroupCols&&o.level===e.rowGroupCols.length-1,o}return vO(e,t),e.prototype.postConstruct=function(){var t=this;if(this.usingTreeData=this.gridOptionsService.get("treeData"),this.nodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.parentRowNode),!this.usingTreeData&&this.groupLevel){var e=this.ssrmParams.rowGroupCols[this.level];this.groupField=e.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}var i=1,n=-1===this.parentRowNode.level,o=this.storeUtils.getServerSideInitialRowCount();n&&null!=o&&(i=o),this.initialiseRowNodes(i),this.rowNodeBlockLoader.addBlock(this),this.addDestroyFunc((function(){return t.rowNodeBlockLoader.removeBlock(t)})),this.postSortFunc=this.gridOptionsService.getCallback("postSortRows"),null!=o&&this.eventService.dispatchEventOnce({type:l.EVENT_ROW_COUNT_READY})},e.prototype.destroyRowNodes=function(){this.blockUtils.destroyRowNodes(this.allRowNodes),this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={}},e.prototype.initialiseRowNodes=function(t,e){void 0===e&&(e=!1),this.destroyRowNodes();for(var i=0;i<t;i++){var n=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});e&&(n.failedLoad=!0),this.allRowNodes.push(n),this.nodesAfterFilter.push(n),this.nodesAfterSort.push(n)}},e.prototype.getBlockStateJson=function(){return{id:this.nodeIdPrefix?this.nodeIdPrefix:"",state:this.getState()}},e.prototype.loadFromDatasource=function(){this.storeUtils.loadFromDatasource({startRow:void 0,endRow:void 0,parentBlock:this,parentNode:this.parentRowNode,storeParams:this.ssrmParams,success:this.success.bind(this,this.getVersion()),fail:this.pageLoadFailed.bind(this,this.getVersion())})},e.prototype.getStartRow=function(){return 0},e.prototype.getEndRow=function(){return this.nodesAfterSort.length},e.prototype.createDataNode=function(t,e){var i=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});null!=e?c.insertIntoArray(this.allRowNodes,i,e):this.allRowNodes.push(i);var n=this.prefixId(this.nodeIdSequence.next());return this.blockUtils.setDataIntoRowNode(i,t,n,void 0),this.nodeManager.addRowNode(i),this.blockUtils.checkOpenByDefault(i),this.allNodesMap[i.id]=i,i},e.prototype.prefixId=function(t){return this.nodeIdPrefix?this.nodeIdPrefix+"-"+t:t.toString()},e.prototype.processServerFail=function(){this.initialiseRowNodes(1,!0),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()},e.prototype.processServerResult=function(t){if(this.isAlive()){var e=t.groupLevelInfo;e&&Object.assign(this.info,e),t.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(t.pivotResultFields);var i=this.allRowNodes.length>0?this.allNodesMap:void 0;this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={},t.rowData||c.warnOnce('"params.data" is missing from Server-Side Row Model success() callback. Please use the "data" attribute. If no data is returned, set an empty list.'),this.createOrRecycleNodes(i,t.rowData),i&&this.blockUtils.destroyRowNodes(c.getAllValuesInObject(i)),0===this.level&&this.eventService.dispatchEventOnce({type:l.EVENT_ROW_COUNT_READY}),this.filterAndSortNodes(),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()}},e.prototype.createOrRecycleNodes=function(t,e){var i=this;if(e){e.forEach((function(e){var n=function(e){if(t){var n=i.gridOptionsService.getCallback("getRowId");if(n){var o=i.parentRowNode.getGroupKeys(),r=i.level,s=n({data:e,parentKeys:o.length>0?o:void 0,level:r}),a=t[s];if(a)return delete t[s],a}}}(e);n?function(t,e){i.allNodesMap[t.id]=t,i.blockUtils.updateDataIntoRowNode(t,e),i.allRowNodes.push(t)}(n,e):i.createDataNode(e)}))}},e.prototype.flushAsyncTransactions=function(){var t=this;window.setTimeout((function(){return t.transactionManager.flushAsyncTransactions()}),0)},e.prototype.filterAndSortNodes=function(){this.filterRowNodes(),this.sortRowNodes()},e.prototype.sortRowNodes=function(){var t=this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerSideSortOnServer(),e=this.sortController.getSortOptions(),i=!e||0==e.length;if(t||i)this.nodesAfterSort=this.nodesAfterFilter;else if(this.nodesAfterSort=this.rowNodeSorter.doFullSort(this.nodesAfterFilter,e),this.postSortFunc){var n={nodes:this.nodesAfterSort};this.postSortFunc(n)}},e.prototype.filterRowNodes=function(){var t=this,e=!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerSideFilterOnServer(),i=this.groupLevel;this.nodesAfterFilter=e||i?this.allRowNodes:this.allRowNodes.filter((function(e){return t.filterManager.doesRowPassFilter({rowNode:e})}))},e.prototype.clearDisplayIndexes=function(){var t=this;this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.allRowNodes.forEach((function(e){return t.blockUtils.clearDisplayIndex(e)}))},e.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},e.prototype.isDisplayIndexInStore=function(t){return 0!==this.getRowCount()&&(t>=this.displayIndexStart&&t<this.displayIndexEnd)},e.prototype.setDisplayIndexes=function(t,e){var i=this;this.displayIndexStart=t.peek(),this.topPx=e.value;var n={};this.nodesAfterSort.forEach((function(o){i.blockUtils.setDisplayIndex(o,t,e),n[o.id]=!0})),this.allRowNodes.forEach((function(t){n[t.id]||i.blockUtils.clearDisplayIndex(t)})),this.displayIndexEnd=t.peek(),this.heightPx=e.value-this.topPx},e.prototype.forEachStoreDeep=function(t,e){void 0===e&&(e=new vt),t(this,e.next()),this.allRowNodes.forEach((function(i){var n=i.childStore;n&&n.forEachStoreDeep(t,e)}))},e.prototype.forEachNodeDeep=function(t,e){void 0===e&&(e=new vt),this.allRowNodes.forEach((function(i){t(i,e.next());var n=i.childStore;n&&n.forEachNodeDeep(t,e)}))},e.prototype.forEachNodeDeepAfterFilterAndSort=function(t,e,i){void 0===e&&(e=new vt),void 0===i&&(i=!1),this.nodesAfterSort.forEach((function(n){t(n,e.next());var o=n.childStore;o&&o.forEachNodeDeepAfterFilterAndSort(t,e,i)})),i&&this.parentRowNode.sibling&&t(this.parentRowNode.sibling,e.next())},e.prototype.getRowUsingDisplayIndex=function(t){if(this.isDisplayIndexInStore(t))return this.blockUtils.binarySearchForDisplayIndex(t,this.nodesAfterSort)},e.prototype.getRowBounds=function(t){for(var e=0;e<this.nodesAfterSort.length;e++){var i=this.nodesAfterSort[e],n=this.blockUtils.extractRowBounds(i,t);if(n)return n}return null},e.prototype.isPixelInRange=function(t){return t>=this.topPx&&t<this.topPx+this.heightPx},e.prototype.getRowIndexAtPixel=function(t){var e=this;if(t<=this.topPx)return this.nodesAfterSort[0].rowIndex;if(t>=this.topPx+this.heightPx){var i=this.nodesAfterSort[this.nodesAfterSort.length-1],n=i.rowTop+i.rowHeight;if(t>=n&&i.expanded){if(i.childStore&&i.childStore.getRowCount()>0)return i.childStore.getRowIndexAtPixel(t);if(i.detailNode)return i.detailNode.rowIndex}return i.rowIndex}var o=null;return this.nodesAfterSort.forEach((function(i){var n=e.blockUtils.getIndexAtPixel(i,t);null!=n&&(o=n)})),null==o?this.displayIndexEnd-1:o},e.prototype.getChildStore=function(t){var e=this;return this.storeUtils.getChildStore(t,this,(function(t){return e.allRowNodes.find((function(e){return e.key==t}))}))},e.prototype.forEachChildStoreShallow=function(t){this.allRowNodes.forEach((function(e){var i=e.childStore;i&&t(i)}))},e.prototype.refreshAfterFilter=function(t){var e=this.storeUtils.isServerSideFilterOnServer(),i=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,t);if(!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||e&&i)return this.refreshStore(!0),void this.sortRowNodes();this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow((function(e){return e.refreshAfterFilter(t)}))},e.prototype.refreshAfterSort=function(t){var e=this.storeUtils.isServerSideSortOnServer(),i=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,t);if(this.storeUtils.isServerSideSortAllLevels()||e&&i)return this.refreshStore(!0),void this.filterRowNodes();this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow((function(e){return e.refreshAfterSort(t)}))},e.prototype.applyTransaction=function(t){switch(this.getState()){case yt.STATE_FAILED:return{status:mt.StoreLoadingFailed};case yt.STATE_LOADING:return{status:mt.StoreLoading};case yt.STATE_WAITING_TO_LOAD:return{status:mt.StoreWaitingToLoad}}var e=this.gridOptionsService.getCallback("isApplyServerSideTransaction");if(e&&!e({transaction:t,parentNode:this.parentRowNode,groupLevelInfo:this.info}))return{status:mt.Cancelled};var i={status:mt.Applied,remove:[],update:[],add:[]},n=[];return this.executeAdd(t,i),this.executeRemove(t,i,n),this.executeUpdate(t,i,n),this.filterAndSortNodes(),this.updateSelection(n),i},e.prototype.updateSelection=function(t){if(t.length>0){this.selectionService.setNodesSelected({newValue:!1,nodes:t,suppressFinishActions:!0,clearSelection:!1,source:"rowDataChanged"});var e={type:l.EVENT_SELECTION_CHANGED,source:"rowDataChanged"};this.eventService.dispatchEvent(e)}},e.prototype.executeAdd=function(t,e){var i=this,n=t.add,o=t.addIndex;c.missingOrEmpty(n)||("number"==typeof o&&o>=0?n.reverse().forEach((function(t){var n=i.createDataNode(t,o);e.add.push(n)})):n.forEach((function(t){var n=i.createDataNode(t);e.add.push(n)})))},e.prototype.executeRemove=function(t,e,i){var n=this,o=t.remove;if(null!=o){var r={};o.forEach((function(t){var o=n.lookupRowNode(t);o&&(o.isSelected()&&i.push(o),o.clearRowTopAndRowIndex(),r[o.id]=!0,delete n.allNodesMap[o.id],e.remove.push(o),n.nodeManager.removeNode(o))})),this.allRowNodes=this.allRowNodes.filter((function(t){return!r[t.id]}))}},e.prototype.executeUpdate=function(t,e,i){var n=this,o=t.update;null!=o&&o.forEach((function(t){var o=n.lookupRowNode(t);o&&(n.blockUtils.updateDataIntoRowNode(o,t),!o.selectable&&o.isSelected()&&i.push(o),e.update.push(o))}))},e.prototype.lookupRowNode=function(t){var e,i=this.gridOptionsService.getCallback("getRowId");if(null!=i){var n=this.level,o=this.parentRowNode.getGroupKeys(),r=i({data:t,parentKeys:o.length>0?o:void 0,level:n});if(!(e=this.allNodesMap[r]))return console.error("AG Grid: could not find row id=".concat(r,", data item was not found for this id")),null}else if(!(e=this.allRowNodes.find((function(e){return e.data===t}))))return console.error("AG Grid: could not find data item as object was not found",t),null;return e},e.prototype.addStoreStates=function(t){t.push({suppressInfiniteScroll:!0,route:this.parentRowNode.getGroupKeys(),rowCount:this.allRowNodes.length,info:this.info}),this.forEachChildStoreShallow((function(e){return e.addStoreStates(t)}))},e.prototype.refreshStore=function(t){if(t){var e=this.nodesAfterSort?this.nodesAfterSort.length:1;this.initialiseRowNodes(e)}this.scheduleLoad(),this.fireStoreUpdatedEvent()},e.prototype.retryLoads=function(){this.getState()===yt.STATE_FAILED&&(this.initialiseRowNodes(1),this.scheduleLoad()),this.forEachChildStoreShallow((function(t){return t.retryLoads()}))},e.prototype.scheduleLoad=function(){this.setStateWaitingToLoad(),this.rowNodeBlockLoader.checkBlockToLoad()},e.prototype.fireStoreUpdatedEvent=function(){var t={type:l.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(t)},e.prototype.getRowCount=function(){return this.nodesAfterSort.length},e.prototype.getTopLevelRowDisplayedIndex=function(t){return this.nodesAfterSort[t].rowIndex},e.prototype.isLastRowIndexKnown=function(){return this.getState()==yt.STATE_LOADED},e.prototype.getRowNodesInRange=function(t,e){var i=[],n=!1;return c.missing(t)&&(n=!0),this.nodesAfterSort.forEach((function(o){var r=o===t||o===e;(n||r)&&i.push(o),r&&(n=!n)})),n?[]:i},e.prototype.getStoreBounds=function(){return{topPx:this.topPx,heightPx:this.heightPx}},yO([n("ssrmStoreUtils")],e.prototype,"storeUtils",void 0),yO([n("ssrmBlockUtils")],e.prototype,"blockUtils",void 0),yO([n("columnModel")],e.prototype,"columnModel",void 0),yO([n("rowNodeBlockLoader")],e.prototype,"rowNodeBlockLoader",void 0),yO([n("rowNodeSorter")],e.prototype,"rowNodeSorter",void 0),yO([n("sortController")],e.prototype,"sortController",void 0),yO([n("selectionService")],e.prototype,"selectionService",void 0),yO([n("ssrmNodeManager")],e.prototype,"nodeManager",void 0),yO([n("filterManager")],e.prototype,"filterManager",void 0),yO([n("ssrmTransactionManager")],e.prototype,"transactionManager",void 0),yO([n("rowModel")],e.prototype,"serverSideRowModel",void 0),yO([r],e.prototype,"postConstruct",null),yO([N],e.prototype,"destroyRowNodes",null),e}(yt),bO=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),SO=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},xO=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},CO=function(t){function e(e,i,n){var o=t.call(this)||this;return o.loadingNodes=new Set,o.checkForLoadQueued=!1,o.loaderTimeout=void 0,o.nextBlockToLoad=void 0,o.parentNode=i,o.cache=e,o.storeParams=n,o}return bO(e,t),e.prototype.init=function(){var t=this;this.addManagedListener(this.rowNodeBlockLoader,bt.BLOCK_LOADED_EVENT,(function(){return t.queueLoadAction()}))},e.prototype.isRowLoading=function(t){return this.loadingNodes.has(t)},e.prototype.getBlockToLoad=function(){for(var t,e=this,i=this.api.getFirstDisplayedRow(),n=this.api.getLastDisplayedRow(),o=i;o<=n;o++){var r=this.cache.getNodeCachedByDisplayIndex(o);if(r){var s=this.cache.getNodes().getBy("node",r);if(s&&!this.isRowLoading(s.index)&&(r.__needsRefreshWhenVisible||r.stub&&!r.failedLoad))return this.getBlockStartIndexForIndex(s.index)}}var a=this.cache.getNodesToRefresh(),l=null,c=Number.MAX_SAFE_INTEGER;a.forEach((function(t){if(null!=t.rowIndex){if(!e.isRowLoading(t.rowIndex)){var o=Math.abs(i-t.rowIndex),r=Math.abs(t.rowIndex-n);o<c&&(l=t,c=o),r<c&&(l=t,c=r)}}else l=t}));var d=null===(t=this.cache.getNodes().getBy("node",l))||void 0===t?void 0:t.index;return null==d?void 0:this.getBlockStartIndexForIndex(d)},e.prototype.reset=function(){this.loadingNodes.clear(),clearTimeout(this.loaderTimeout),this.loaderTimeout=void 0},e.prototype.executeLoad=function(t,e){var i,n=this,o=this.cache.getSsrmParams(),r={startRow:t,endRow:e,rowGroupCols:o.rowGroupCols,valueCols:o.valueCols,pivotCols:o.pivotCols,pivotMode:o.pivotMode,groupKeys:this.parentNode.getGroupKeys(),filterModel:o.filterModel,sortModel:o.sortModel},s=function(){for(var i=0;i<e-t;i++)n.loadingNodes.delete(t+i)},a={request:r,success:function(i){n.rowNodeBlockLoader.loadComplete(),n.cache.onLoadSuccess(t,e-t,i),s(),n.queueLoadAction()},fail:function(){n.rowNodeBlockLoader.loadComplete(),n.cache.onLoadFailed(t,e-t),s(),n.queueLoadAction()},parentNode:this.parentNode,api:this.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};!function(){for(var i=0;i<e-t;i++)n.loadingNodes.add(t+i)}(),null===(i=this.cache.getSsrmParams().datasource)||void 0===i||i.getRows(a)},e.prototype.getNextBlockToLoad=function(){var t=this.getBlockToLoad();return null!=t?[String(t),t+this.getBlockSize()]:null},e.prototype.queueLoadCheck=function(){var t=this;this.checkForLoadQueued||(this.checkForLoadQueued=!0,window.queueMicrotask((function(){t.checkForLoadQueued=!1,t.queueLoadAction()})))},e.prototype.queueLoadAction=function(){var t=this,e=this.getNextBlockToLoad();if(!e)return window.clearTimeout(this.loaderTimeout),this.loaderTimeout=void 0,void(this.nextBlockToLoad=void 0);if(!this.nextBlockToLoad||this.nextBlockToLoad[0]!==e[0]&&this.nextBlockToLoad[1]!==e[1]){this.nextBlockToLoad=e,window.clearTimeout(this.loaderTimeout);var i=xO(this.nextBlockToLoad,2),n=i[0],o=i[1],r=Number(n);this.loaderTimeout=window.setTimeout((function(){t.cache.isAlive()&&(t.loaderTimeout=void 0,t.attemptLoad(r,o),t.nextBlockToLoad=void 0)}),this.gridOptionsService.get("blockLoadDebounceMillis"))}},e.prototype.attemptLoad=function(t,e){var i=this.rowNodeBlockLoader.getAvailableLoadingCount();null!=i&&0===i||(this.rowNodeBlockLoader.registerLoads(1),this.executeLoad(t,e),this.queueLoadAction())},e.prototype.getBlockSize=function(){return this.storeParams.cacheBlockSize||e.DEFAULT_BLOCK_SIZE},e.prototype.getBlockStartIndexForIndex=function(t){return t-t%this.getBlockSize()},e.prototype.getBlockBoundsForIndex=function(t){var e=this.getBlockStartIndexForIndex(t);return[e,e+this.getBlockSize()]},e.DEFAULT_BLOCK_SIZE=100,SO([n("gridApi")],e.prototype,"api",void 0),SO([n("rowNodeBlockLoader")],e.prototype,"rowNodeBlockLoader",void 0),SO([r],e.prototype,"init",null),e}(i),wO=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length<1)throw new Error("AG Grid: At least one index must be provided.");this.indexes=t,this.maps=new Map(this.indexes.map((function(t){return[t,new Map]})))}return t.prototype.getBy=function(t,e){var i=this.maps.get(t);if(!i)throw new Error("AG Grid: ".concat(String(t)," not found"));return i.get(e)},t.prototype.set=function(t){var e=this;this.indexes.forEach((function(i){var n=e.maps.get(i);if(!n)throw new Error("AG Grid: ".concat(String(i)," not found"));n.set(t[i],t)}))},t.prototype.delete=function(t){var e=this;this.indexes.forEach((function(i){var n=e.maps.get(i);if(!n)throw new Error("AG Grid: ".concat(String(i)," not found"));n.delete(t[i])}))},t.prototype.clear=function(){this.maps.forEach((function(t){return t.clear()}))},t.prototype.getIterator=function(t){var e=this.maps.get(t);if(!e)throw new Error("AG Grid: ".concat(String(t)," not found"));return e.values()},t.prototype.forEach=function(t){for(var e,i=this.getIterator(this.indexes[0]);(e=i.next())&&!e.done;)t(e.value)},t.prototype.find=function(t){for(var e,i=this.getIterator(this.indexes[0]);(e=i.next())&&!e.done;)if(t(e.value))return e.value},t.prototype.filter=function(t){for(var e,i=this.getIterator(this.indexes[0]),n=[];(e=i.next())&&!e.done;)t(e.value)&&n.push(e.value);return n},t}(),EO=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),OO=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},DO=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},AO=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},TO=function(t){function e(e,i,n){var o=t.call(this)||this;return o.live=!0,o.removedNodeCache=new Map,o.store=e,o.numberOfRows=i,o.isLastRowKnown=!1,o.storeParams=n,o}return EO(e,t),e.prototype.init=function(){this.nodeMap=new wO("index","id","node"),this.nodeDisplayIndexMap=new Map,this.nodesToRefresh=new Set,this.defaultNodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),this.rowLoader=this.createManagedBean(new CO(this,this.store.getParentNode(),this.storeParams)),this.getRowIdFunc=this.gridOptionsService.getCallback("getRowId"),this.isMasterDetail=this.gridOptionsService.get("masterDetail")},e.prototype.destroyRowNodes=function(){var t=this;this.numberOfRows=0,this.nodeMap.forEach((function(e){return t.blockUtils.destroyRowNode(e.node)})),this.nodeMap.clear(),this.nodeDisplayIndexMap.clear(),this.nodesToRefresh.clear(),this.live=!1},e.prototype.getRowByDisplayIndex=function(t){var e,i,n,o;if(this.store.isDisplayIndexInStore(t)){var r=this.nodeDisplayIndexMap.get(t);if(r)return(r.stub||r.__needsRefreshWhenVisible)&&this.rowLoader.queueLoadCheck(),r;if(t===this.store.getDisplayIndexStart())return this.createStubNode(0,t);var s=this.nodeDisplayIndexMap.get(t-1);if(s){if(this.isMasterDetail&&s.master&&s.expanded)return s.detailNode;if(s.expanded&&(null===(e=s.childStore)||void 0===e?void 0:e.isDisplayIndexInStore(t)))return null===(i=s.childStore)||void 0===i?void 0:i.getRowUsingDisplayIndex(t);var a=this.nodeMap.getBy("node",s);return this.createStubNode(a.index+1,t)}var l=this.getSurroundingNodesByDisplayIndex(t);if(null==l){var c=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-t);return this.createStubNode(c,t)}var d=l.previousNode,u=l.nextNode;if(d&&d.node.expanded&&(null===(n=d.node.childStore)||void 0===n?void 0:n.isDisplayIndexInStore(t)))return null===(o=d.node.childStore)||void 0===o?void 0:o.getRowUsingDisplayIndex(t);if(u){var h=u.node.rowIndex-t,p=u.index-h;return this.createStubNode(p,t)}var f=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-t);return this.createStubNode(f,t)}},e.prototype.createStubNode=function(t,e){var i=this,n=this.store.getRowBounds(e),o=this.createRowAtIndex(t,null,(function(t){t.setRowIndex(e),t.setRowTop(n.rowTop),i.nodeDisplayIndexMap.set(e,t)}));return this.rowLoader.queueLoadCheck(),o},e.prototype.getRowByStoreIndex=function(t){var e;return null===(e=this.nodeMap.getBy("index",t))||void 0===e?void 0:e.node},e.prototype.skipDisplayIndexes=function(t,e,i){if(0!==t){var n=this.gridOptionsService.getRowHeightAsNumber();e.skip(t),i.value+=t*n}},e.prototype.setDisplayIndexes=function(t,e){this.nodeDisplayIndexMap.clear();var i={};this.nodeMap.forEach((function(t){i[t.index]=t.node}));var n=-1;for(var o in i){var r=i[o],s=Number(o),a=s-1-n;this.skipDisplayIndexes(a,t,e),this.blockUtils.setDisplayIndex(r,t,e),this.nodeDisplayIndexMap.set(r.rowIndex,r),n=s}var l=this.numberOfRows-1-n;this.skipDisplayIndexes(l,t,e),this.purgeExcessRows()},e.prototype.getRowCount=function(){return this.numberOfRows},e.prototype.setRowCount=function(t,e){if(t<0)throw new Error("AG Grid: setRowCount can only accept a positive row count.");this.numberOfRows=t,null!=e&&(this.isLastRowKnown=e,!1===e&&(this.numberOfRows+=1)),this.fireStoreUpdatedEvent()},e.prototype.getNodes=function(){return this.nodeMap},e.prototype.getNodeCachedByDisplayIndex=function(t){var e;return null!==(e=this.nodeDisplayIndexMap.get(t))&&void 0!==e?e:null},e.prototype.getNodesToRefresh=function(){return this.nodesToRefresh},e.prototype.getSurroundingNodesByDisplayIndex=function(t){var e,i;return this.nodeMap.forEach((function(n){t>n.node.rowIndex?(null==i||i.node.rowIndex<n.node.rowIndex)&&(i=n):(null==e||e.node.rowIndex>n.node.rowIndex)&&(e=n)})),i||e?{previousNode:i,nextNode:e}:null},e.prototype.getDisplayIndexFromStoreIndex=function(t){var e,i,n,o,r=this.nodeMap.getBy("index",t);if(r)return r.node.rowIndex;if(this.nodeMap.forEach((function(e){t>e.index?(null==o||o.index<e.index)&&(o=e):(null==n||n.index>e.index)&&(n=e)})),!n)return this.store.getDisplayIndexEnd()-(this.numberOfRows-t);if(!o)return this.store.getDisplayIndexStart()+t;var s=t-o.index;return(null!==(i=null===(e=o.node.childStore)||void 0===e?void 0:e.getDisplayIndexEnd())&&void 0!==i?i:o.node.rowIndex)+s},e.prototype.createRowAtIndex=function(t,e,i){var n,o,r=this.nodeMap.getBy("index",t);if(r){if((c=r.node).__needsRefreshWhenVisible=!1,this.doesNodeMatch(e,c))return this.blockUtils.updateDataIntoRowNode(c,e),this.nodesToRefresh.delete(c),c;if(null==this.getRowIdFunc&&c.hasChildren()&&c.expanded)return this.nodesToRefresh.delete(c),c;this.destroyRowAtIndex(t)}if(e&&null!=this.getRowIdFunc){var s=this.getRowId(e),a=s&&(null===(n=this.removedNodeCache)||void 0===n?void 0:n.get(s));if(a)return null===(o=this.removedNodeCache)||void 0===o||o.delete(s),this.blockUtils.updateDataIntoRowNode(a,e),this.nodeMap.set({id:a.id,node:a,index:t}),a;var l=this.nodeMap.getBy("id",s);if(l){this.nodeMap.delete(l);var c=l.node,d=l.index;return this.blockUtils.updateDataIntoRowNode(c,e),this.nodeMap.set({id:c.id,node:c,index:t}),this.nodesToRefresh.delete(c),this.rowLoader.getBlockStartIndexForIndex(d)===this.rowLoader.getBlockStartIndexForIndex(t)?c:(this.markBlockForVerify(d),c)}}var u=this.blockUtils.createRowNode(this.store.getRowDetails());if(null!=e){var h=this.getPrefixedId(this.store.getIdSequence().next());this.blockUtils.setDataIntoRowNode(u,e,h,void 0),this.blockUtils.checkOpenByDefault(u),this.nodeManager.addRowNode(u)}return this.nodeMap.set({id:u.id,node:u,index:t}),i&&i(u),u},e.prototype.getBlockStates=function(){var t=this,e={},i={};this.nodeMap.forEach((function(n){var o,r=n.node,s=n.index,a=t.rowLoader.getBlockStartIndexForIndex(s);r.stub||r.failedLoad||(e[a]=(null!==(o=e[a])&&void 0!==o?o:0)+1);var l="loaded";r.failedLoad?l="failed":t.rowLoader.isRowLoading(a)?l="loading":(t.nodesToRefresh.has(r)||r.stub)&&(l="needsLoading"),i[a]||(i[a]=new Set),i[a].add(l)}));var n={loading:4,failed:3,needsLoading:2,loaded:1},o=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),r={};return Object.entries(i).forEach((function(i){var s,a=DO(i,2),l=a[0],c=a[1],d=AO([],DO(c),!1).sort((function(t,e){var i,o;return(null!==(i=n[t])&&void 0!==i?i:0)-(null!==(o=n[e])&&void 0!==o?o:0)}))[0],u=Number(l)/t.rowLoader.getBlockSize(),h=o?"".concat(o,"-").concat(u):String(u);r[h]={blockNumber:u,startRow:Number(l),endRow:Number(l)+t.rowLoader.getBlockSize(),pageStatus:d,loadedRowCount:null!==(s=e[l])&&void 0!==s?s:0}})),r},e.prototype.destroyRowAtIndex=function(t){var e=this.nodeMap.getBy("index",t);e&&(this.nodeMap.delete(e),this.nodeDisplayIndexMap.delete(e.node.rowIndex),e.node.hasChildren()&&this.nodesToRefresh.size>0?this.removedNodeCache.set(e.node.id,e.node):this.blockUtils.destroyRowNode(e.node),this.nodesToRefresh.delete(e.node))},e.prototype.getSsrmParams=function(){return this.store.getSsrmParams()},e.prototype.getPrefixedId=function(t){return this.defaultNodeIdPrefix?this.defaultNodeIdPrefix+"-"+t:t.toString()},e.prototype.markBlockForVerify=function(t){var e=DO(this.rowLoader.getBlockBoundsForIndex(t),2),i=e[0],n=e[1];this.nodeMap.filter((function(t){return t.index>=i&&t.index<n})).forEach((function(t){t.node.__needsRefreshWhenVisible=!0}))},e.prototype.doesNodeMatch=function(t,e){if(e.stub)return!1;if(null!=this.getRowIdFunc){var i=this.getRowId(t);return e.id===i}return e.data===t},e.prototype.purgeStubsOutsideOfViewport=function(){var t=this,e=this.api.getFirstDisplayedRow(),i=this.api.getLastDisplayedRow(),n=this.rowLoader.getBlockStartIndexForIndex(e),o=DO(this.rowLoader.getBlockBoundsForIndex(i),2);o[0];var r=o[1];this.nodeMap.forEach((function(e){t.rowLoader.isRowLoading(e.index)||e.node.failedLoad||e.node.stub&&(e.index<n||e.index>r)&&t.destroyRowAtIndex(e.index)}))},e.prototype.getBlocksDistanceFromRow=function(t,e){var i=this,n={};return t.forEach((function(t){var o=t.node,r=t.index,s=DO(i.rowLoader.getBlockBoundsForIndex(r),2),a=s[0],l=s[1];if(!(a in n)){var c,d=Math.abs(o.rowIndex-e),u=i.nodeMap.getBy("index",[l-1]);u&&(c=Math.abs(u.node.rowIndex-e));var h=null==c||d<c?d:c;n[a]=h}})),Object.entries(n)},e.prototype.purgeExcessRows=function(){var t,e=this;if(this.purgeStubsOutsideOfViewport(),null!=this.store.getDisplayIndexEnd()&&null!=this.storeParams.maxBlocksInCache){var i=this.api.getFirstDisplayedRow(),n=this.api.getLastDisplayedRow(),o=new Set,r=new Set;this.nodeMap.forEach((function(t){var s=t.index,a=t.node,l=e.rowLoader.getBlockStartIndexForIndex(s);o.add(l),a.rowIndex>=i&&a.rowIndex<=n&&r.add(l)}));var s=Math.max(r.size,null!==(t=this.storeParams.maxBlocksInCache)&&void 0!==t?t:0),a=o.size-s;if(!(a<=0)){var l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;r.forEach((function(t){l>t&&(l=t),c<t&&(c=t)}));var d=this.nodeMap.filter((function(t){var i=t.node,n=t.index,o=e.rowLoader.getBlockStartIndexForIndex(n);return!(o>=l&&o<=c)&&!e.isNodeCached(i)}));if(0!==d.length){var u=i+(n-i)/2,h=this.getBlocksDistanceFromRow(d,u),p=this.rowLoader.getBlockSize();h.sort((function(t,e){return Math.sign(e[1]-t[1])}));for(var f=0;f<Math.min(a,h.length);f++)for(var g=Number(h[f][0]),v=g;v<g+p;v++){var y=this.nodeMap.getBy("index",v);y&&!this.isNodeCached(y.node)&&this.destroyRowAtIndex(v)}}}}},e.prototype.isNodeFocused=function(t){var e=this.focusService.getFocusCellToUseAfterRefresh();return!!e&&(null==e.rowPinned&&e.rowIndex===t.rowIndex)},e.prototype.isNodeCached=function(t){return t.isExpandable()&&t.expanded||this.isNodeFocused(t)},e.prototype.extractDuplicateIds=function(t){var e=this;if(null!=this.getRowIdFunc)return[];var i=new Set,n=new Set;return t.forEach((function(t){var o=e.getRowId(t);i.has(o)?n.add(o):i.add(o)})),AO([],DO(n),!1)},e.prototype.onLoadSuccess=function(t,e,i){var n=this;if(this.live){var o=i.groupLevelInfo;if(this.store.setStoreInfo(o),null!=this.getRowIdFunc){var r=this.extractDuplicateIds(i.rowData);if(r.length>0){var s=r.join(", ");return console.warn("AG Grid: Unable to display rows as duplicate row ids (".concat(s,") were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.")),void this.onLoadFailed(t,e)}}i.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(i.pivotResultFields);var a=this.nodesToRefresh.size>0;i.rowData.forEach((function(e,i){var o,r=t+i,s=n.nodeMap.getBy("index",r);if(!(null===(o=null==s?void 0:s.node)||void 0===o?void 0:o.stub))return s&&n.doesNodeMatch(e,s.node)?(n.blockUtils.updateDataIntoRowNode(s.node,e),n.nodesToRefresh.delete(s.node),void(s.node.__needsRefreshWhenVisible=!1)):void n.createRowAtIndex(r,e);n.createRowAtIndex(r,e)}));var l=0===this.nodesToRefresh.size;if(a&&l&&this.fireRefreshFinishedEvent(),null!=i.rowCount&&-1!==i.rowCount)this.numberOfRows=i.rowCount,this.isLastRowKnown=!0;else if(e>i.rowData.length)this.numberOfRows=t+i.rowData.length,this.isLastRowKnown=!0;else if(!this.isLastRowKnown){var c=t+i.rowData.length+1;c>this.numberOfRows&&(this.numberOfRows=c)}if(this.isLastRowKnown)this.nodeMap.filter((function(t){return t.index>=n.numberOfRows})).forEach((function(t){return n.destroyRowAtIndex(t.index)}));this.fireStoreUpdatedEvent()}},e.prototype.fireRefreshFinishedEvent=function(){var t=this;0===this.nodesToRefresh.size&&(this.removedNodeCache.forEach((function(e){t.blockUtils.destroyRowNode(e)})),this.removedNodeCache=new Map,this.store.fireRefreshFinishedEvent())},e.prototype.isLastRowIndexKnown=function(){return this.isLastRowKnown},e.prototype.onLoadFailed=function(t,e){var i;if(this.live){for(var n=this.nodesToRefresh.size>0,o=t;o<t+e&&o<this.getRowCount();o++){var r=(null!==(i=this.nodeMap.getBy("index",o))&&void 0!==i?i:{}).node;r&&this.nodesToRefresh.delete(r),r&&r.stub||(r&&!r.stub&&this.destroyRowAtIndex(o),r=this.createRowAtIndex(o)),r.__needsRefreshWhenVisible=!1,r.failedLoad=!0}var s=0===this.nodesToRefresh.size;n&&s&&this.fireRefreshFinishedEvent(),this.fireStoreUpdatedEvent()}},e.prototype.markNodesForRefresh=function(){var t=this;this.nodeMap.forEach((function(e){e.node.stub&&!e.node.failedLoad||t.nodesToRefresh.add(e.node)})),this.rowLoader.queueLoadCheck(),this.isLastRowKnown&&0===this.numberOfRows&&(this.numberOfRows=1,this.isLastRowKnown=!1,this.fireStoreUpdatedEvent())},e.prototype.isNodeInCache=function(t){return!!this.nodeMap.getBy("id",t)},e.prototype.fireStoreUpdatedEvent=function(){this.live&&this.store.fireStoreUpdatedEvent()},e.prototype.getRowId=function(t){if(null==this.getRowIdFunc)return null;var e=this.store.getRowDetails().level,i=this.store.getParentNode().getGroupKeys(),n=this.getRowIdFunc({data:t,parentKeys:i.length>0?i:void 0,level:e});return String(n)},e.prototype.updateRowNodes=function(t){var e=this;if(null==this.getRowIdFunc)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");var i=[];return t.forEach((function(t){var n=e.getRowId(t),o=e.nodeMap.getBy("id",n);o&&(e.blockUtils.updateDataIntoRowNode(o.node,t),i.push(o.node))})),i},e.prototype.insertRowNodes=function(t,e){var i=this,n=this.store.getRowCount()-(this.store.getParentNode().sibling?1:0),o=null==e&&this.isLastRowKnown?n:e;if(null==o||n<o)return[];if(null==this.getRowIdFunc)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");var r={};t.forEach((function(t){var e=i.getRowId(t);e&&i.isNodeInCache(e)||(r[e]=t)}));var s=Object.values(r),a=s.length;if(0===a)return[];var l=this.nodeMap.filter((function(t){return t.index>=o}));return l.forEach((function(t){return i.nodeMap.delete(t)})),l.forEach((function(t){i.nodeMap.set({node:t.node,index:t.index+a,id:t.id})})),this.numberOfRows+=a,s.map((function(t,e){return i.createRowAtIndex(o+e,t)}))},e.prototype.getOrderedNodeMap=function(){var t={};return this.nodeMap.forEach((function(e){return t[e.index]=e})),t},e.prototype.clearDisplayIndexes=function(){this.nodeDisplayIndexMap.clear()},e.prototype.removeRowNodes=function(t){if(null==this.getRowIdFunc)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");var e=[],i=[],n=0,o=AO([],DO(t),!1),r=this.getOrderedNodeMap(),s=-1,a=function(t){s+=1;var a=r[t],c=o.findIndex((function(t){return t===a.id}));if(-1!==c)return o.splice(c,1),l.destroyRowAtIndex(Number(t)),e.push(a.node),n+=1,"continue";if(0===n)return"continue";var d=Number(t);s!==d&&i.push(a.node),l.nodeMap.delete(r[t]),l.nodeMap.set({id:a.id,node:a.node,index:d-n})},l=this;for(var c in r)a(c);return this.numberOfRows-=this.isLastRowIndexKnown()?t.length:n,o.length>0&&i.length>0&&(i.forEach((function(t){return t.__needsRefreshWhenVisible=!0})),this.rowLoader.queueLoadCheck()),e},OO([n("gridApi")],e.prototype,"api",void 0),OO([n("ssrmBlockUtils")],e.prototype,"blockUtils",void 0),OO([n("focusService")],e.prototype,"focusService",void 0),OO([n("ssrmNodeManager")],e.prototype,"nodeManager",void 0),OO([n("rowModel")],e.prototype,"serverSideRowModel",void 0),OO([r],e.prototype,"init",null),OO([N],e.prototype,"destroyRowNodes",null),e}(i),kO=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),MO=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},RO=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},PO=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},NO=function(t){function e(e,i,n){var o=t.call(this)||this;return o.idSequence=new vt,o.ssrmParams=e,o.parentRowNode=n,o.storeParams=i,o.level=n.level+1,o.group=!!e.rowGroupCols&&o.level<e.rowGroupCols.length,o.leafGroup=!!e.rowGroupCols&&o.level===e.rowGroupCols.length-1,o.info={},o}return kO(e,t),e.prototype.init=function(){var t,e=1;if(0===this.level&&(e=null!==(t=this.storeUtils.getServerSideInitialRowCount())&&void 0!==t?t:1,this.eventService.dispatchEventOnce({type:l.EVENT_ROW_COUNT_READY})),this.cache=this.createManagedBean(new TO(this,e,this.storeParams)),!this.gridOptionsService.get("treeData")&&this.group){var i=this.ssrmParams.rowGroupCols[this.level];this.groupField=i.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}},e.prototype.destroyRowNodes=function(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.destroyBean(this.cache)},e.prototype.applyRowData=function(t,e,i){this.cache.onLoadSuccess(e,i,t)},e.prototype.applyTransaction=function(t){var e,i,n,o=this,r=this.gridOptionsService.getCallback("getRowId");if(!r)return console.warn("AG Grid: getRowId callback must be implemented for transactions to work. Transaction was ignored."),{status:mt.Cancelled};var s=this.gridOptionsService.getCallback("isApplyServerSideTransaction");if(s&&!s({transaction:t,parentNode:this.parentRowNode,groupLevelInfo:this.info}))return{status:mt.Cancelled};var a=void 0;(null===(e=t.update)||void 0===e?void 0:e.length)&&(a=this.cache.updateRowNodes(t.update));var l=void 0;if(null===(i=t.add)||void 0===i?void 0:i.length){var c=t.addIndex;null!=c&&c<0&&(c=void 0),l=this.cache.insertRowNodes(t.add,c)}var d=void 0;if(null===(n=t.remove)||void 0===n?void 0:n.length){var u=t.remove.map((function(t){return r({level:o.level,parentKeys:o.parentRowNode.getGroupKeys(),data:t})})),h=PO([],RO(new Set(u)),!1);d=this.cache.removeRowNodes(h)}return this.updateSelectionAfterTransaction(a,d),{status:mt.Applied,update:a,add:l,remove:d}},e.prototype.updateSelectionAfterTransaction=function(t,e){var i=[];null==t||t.forEach((function(t){t.isSelected()&&!t.selectable&&i.push(t)})),null==e||e.forEach((function(t){t.isSelected()&&i.push(t)})),i.length&&this.selectionService.setNodesSelected({newValue:!1,clearSelection:!1,nodes:i,source:"rowDataChanged"})},e.prototype.clearDisplayIndexes=function(){var t=this;this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.cache.getNodes().forEach((function(e){return t.blockUtils.clearDisplayIndex(e.node)})),this.parentRowNode.sibling&&this.blockUtils.clearDisplayIndex(this.parentRowNode.sibling),this.cache.clearDisplayIndexes()},e.prototype.getDisplayIndexStart=function(){return this.displayIndexStart},e.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},e.prototype.getRowCount=function(){return this.parentRowNode.sibling?this.cache.getRowCount()+1:this.cache.getRowCount()},e.prototype.setRowCount=function(t,e){this.cache.setRowCount(t,e)},e.prototype.isDisplayIndexInStore=function(t){return 0!==this.cache.getRowCount()&&(this.displayIndexStart<=t&&t<this.getDisplayIndexEnd())},e.prototype.setDisplayIndexes=function(t,e){this.displayIndexStart=t.peek(),this.topPx=e.value,this.cache.setDisplayIndexes(t,e),this.parentRowNode.sibling&&this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,t,e),this.displayIndexEnd=t.peek(),this.heightPx=e.value-this.topPx},e.prototype.forEachStoreDeep=function(t,e){void 0===e&&(e=new vt),t(this,e.next()),this.cache.getNodes().forEach((function(i){var n=i.node.childStore;n&&n.forEachStoreDeep(t,e)}))},e.prototype.forEachNodeDeep=function(t,e){void 0===e&&(e=new vt),this.cache.getNodes().forEach((function(i){t(i.node,e.next());var n=i.node.childStore;n&&n.forEachNodeDeep(t,e)}))},e.prototype.forEachNodeDeepAfterFilterAndSort=function(t,e,i){void 0===e&&(e=new vt),void 0===i&&(i=!1);var n=this.cache.getOrderedNodeMap();for(var o in n){var r=n[o];t(r.node,e.next());var s=r.node.childStore;s&&s.forEachNodeDeepAfterFilterAndSort(t,e,i)}i&&this.parentRowNode.sibling&&t(this.parentRowNode.sibling,e.next())},e.prototype.retryLoads=function(){this.cache.getNodes().forEach((function(t){var e=t.node;e.failedLoad&&(e.failedLoad=!1,e.__needsRefreshWhenVisible=!0,e.stub=!0)})),this.forEachChildStoreShallow((function(t){return t.retryLoads()})),this.fireStoreUpdatedEvent()},e.prototype.getRowUsingDisplayIndex=function(t){return this.parentRowNode.sibling&&t===this.parentRowNode.sibling.rowIndex?this.parentRowNode.sibling:this.cache.getRowByDisplayIndex(t)},e.prototype.getRowBounds=function(t){var e;if(!this.isDisplayIndexInStore(t))return null;var i=this.cache.getNodeCachedByDisplayIndex(t);if(i&&(n=this.blockUtils.extractRowBounds(i,t)))return n;var n,o=null!==(e=this.cache.getSurroundingNodesByDisplayIndex(t))&&void 0!==e?e:{},r=o.previousNode,s=o.nextNode;if(r&&null!=(n=this.blockUtils.extractRowBounds(r.node,t)))return n;var a=this.gridOptionsService.getRowHeightAsNumber();if(s){var l=(s.node.rowIndex-t)*a;return{rowTop:s.node.rowTop-l,rowHeight:a}}return{rowTop:this.topPx+this.heightPx-(this.getDisplayIndexEnd()-t)*a,rowHeight:a}},e.prototype.isPixelInRange=function(t){return t>=this.topPx&&t<this.topPx+this.heightPx},e.prototype.getRowIndexAtPixel=function(t){if(t<this.topPx)return this.getDisplayIndexStart();if(t>=this.topPx+this.heightPx)return this.getDisplayIndexEnd()-1;var e=Number.MAX_SAFE_INTEGER,i=null,n=Number.MAX_SAFE_INTEGER,o=null;if(this.cache.getNodes().forEach((function(r){var s=r.node,a=Math.abs(t-s.rowTop);s.rowTop<t?a<e&&(e=a,i=s):a<n&&(n=a,o=s)})),o=o,i=i){var r=this.blockUtils.getIndexAtPixel(i,t);if(null!=r)return r}var s=this.gridOptionsService.getRowHeightAsNumber();if(o){var a=o.rowTop,l=Math.ceil((a-t)/s);return o.rowIndex-l}var c=this.topPx+this.heightPx,d=Math.floor((c-t)/s);return this.getDisplayIndexEnd()-d},e.prototype.getChildStore=function(t){var e=this;return this.storeUtils.getChildStore(t,this,(function(t){var i=e.cache.getNodes().find((function(e){return e.node.key==t}));return i?i.node:null}))},e.prototype.forEachChildStoreShallow=function(t){this.cache.getNodes().forEach((function(e){var i=e.node;i.childStore&&t(i.childStore)}))},e.prototype.refreshAfterSort=function(t){if(this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,t)){var e=this.cache.getRowCount();return this.destroyBean(this.cache),this.cache=this.createManagedBean(new TO(this,e,this.storeParams)),void this.fireStoreUpdatedEvent()}this.forEachChildStoreShallow((function(e){return e.refreshAfterSort(t)}))},e.prototype.refreshAfterFilter=function(t){!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,t)?this.refreshStore(!0):this.forEachChildStoreShallow((function(e){return e.refreshAfterFilter(t)}))},e.prototype.refreshStore=function(t){if(t)return this.destroyBean(this.cache),this.cache=this.createManagedBean(new TO(this,1,this.storeParams)),void this.fireStoreUpdatedEvent();this.cache.markNodesForRefresh()},e.prototype.getTopLevelRowDisplayedIndex=function(t){var e=this.cache.getDisplayIndexFromStoreIndex(t);return null!=e?e:t},e.prototype.isLastRowIndexKnown=function(){return this.cache.isLastRowIndexKnown()},e.prototype.getRowNodesInRange=function(t,e){return c.missing(t),this.cache.getNodes().filter((function(i){var n=i.node;return n.rowIndex>=t.rowIndex&&n.rowIndex<=e.rowIndex})).map((function(t){return t.node}))},e.prototype.addStoreStates=function(t){t.push({suppressInfiniteScroll:!1,route:this.parentRowNode.getGroupKeys(),rowCount:this.getRowCount(),lastRowIndexKnown:this.isLastRowIndexKnown(),info:this.info,maxBlocksInCache:this.storeParams.maxBlocksInCache,cacheBlockSize:this.storeParams.cacheBlockSize}),this.forEachChildStoreShallow((function(e){return e.addStoreStates(t)}))},e.prototype.getIdSequence=function(){return this.idSequence},e.prototype.getParentNode=function(){return this.parentRowNode},e.prototype.getRowDetails=function(){return{field:this.groupField,group:this.group,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn}},e.prototype.getSsrmParams=function(){return this.ssrmParams},e.prototype.setStoreInfo=function(t){t&&Object.assign(this.info,t)},e.prototype.fireStoreUpdatedEvent=function(){var t={type:l.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(t)},e.prototype.fireRefreshFinishedEvent=function(){var t={type:l.EVENT_STORE_REFRESHED,route:this.parentRowNode.getRoute()};this.eventService.dispatchEvent(t)},e.prototype.getBlockStates=function(){return this.cache.getBlockStates()},e.prototype.getStoreBounds=function(){return{topPx:this.topPx,heightPx:this.heightPx}},MO([n("ssrmBlockUtils")],e.prototype,"blockUtils",void 0),MO([n("ssrmStoreUtils")],e.prototype,"storeUtils",void 0),MO([n("columnModel")],e.prototype,"columnModel",void 0),MO([n("selectionService")],e.prototype,"selectionService",void 0),MO([r],e.prototype,"init",null),MO([N],e.prototype,"destroyRowNodes",null),e}(i),LO=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),IO=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},FO=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},_O=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.onRowHeightChanged_debounced=c.debounce(e.onRowHeightChanged.bind(e),100),e.pauseStoreUpdateListening=!1,e.started=!1,e.managingPivotResultColumns=!1,e}return LO(i,t),i.prototype.ensureRowHeightsValid=function(){return!1},i.prototype.start=function(){this.started=!0,this.updateDatasource()},i.prototype.destroyDatasource=function(){this.datasource&&(this.datasource.destroy&&this.datasource.destroy(),this.rowRenderer.datasourceChanged(),this.datasource=void 0)},i.prototype.addEventListeners=function(){var t=this;this.addManagedListener(this.eventService,l.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,l.EVENT_STORE_UPDATED,this.onStoreUpdated.bind(this));var e=this.resetRootStore.bind(this);this.addManagedListener(this.eventService,l.EVENT_COLUMN_VALUE_CHANGED,e),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PIVOT_CHANGED,e),this.addManagedListener(this.eventService,l.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,l.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedPropertyListeners(["masterDetail","treeData","removePivotHeaderRowWhenSingleValueColumn","suppressServerSideInfiniteScroll","cacheBlockSize"],e),this.addManagedPropertyListener("rowHeight",(function(){return t.resetRowHeights()})),this.verifyProps(),this.addManagedPropertyListener("serverSideDatasource",(function(){return t.updateDatasource()}))},i.prototype.updateDatasource=function(){var t=this.gridOptionsService.get("serverSideDatasource");t&&this.setDatasource(t)},i.prototype.verifyProps=function(){this.gridOptionsService.exists("initialGroupOrderComparator")&&c.warnOnce("initialGroupOrderComparator cannot be used with Server Side Row Model."),this.gridOptionsService.isRowSelection()&&!this.gridOptionsService.exists("getRowId")&&c.warnOnce("getRowId callback must be provided for Server Side Row Model selection to work correctly.")},i.prototype.setDatasource=function(t){this.started&&(this.destroyDatasource(),this.datasource=t,this.resetRootStore())},i.prototype.applyRowData=function(t,e,i){var n=this.getRootStore();if(n){var o=n.getChildStore(i);o&&(o instanceof NO?o.applyRowData(t,e,t.rowData.length):o instanceof mO&&o.processServerResult(t))}},i.prototype.isLastRowIndexKnown=function(){var t=this.getRootStore();return!!t&&t.isLastRowIndexKnown()},i.prototype.onColumnEverything=function(){if(this.storeParams){var t=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),e=this.columnsToValueObjects(this.columnModel.getValueColumns()),i=this.columnsToValueObjects(this.columnModel.getPivotColumns()),n=function(t){var e={};t.oldCols.forEach((function(t){return e[t.id]=t}));var i=t.newCols.every((function(t){var i=e[t.id];return i&&delete e[t.id],i&&i.field===t.field&&i.aggFunc===t.aggFunc})),n=!t.allowRemovedColumns&&!!Object.values(e).length;return i&&!n},o=!c.jsonEquals(this.storeParams.sortModel,this.sortController.getSortModel()),r=!n({oldCols:this.storeParams.rowGroupCols,newCols:t}),s=!n({oldCols:this.storeParams.pivotCols,newCols:i}),a=!!(null==t?void 0:t.length)&&!n({oldCols:this.storeParams.valueCols,newCols:e,allowRemovedColumns:!0});if(o||r||s||a)this.resetRootStore();else{var l=this.createStoreParams();this.storeParams.rowGroupCols=l.rowGroupCols,this.storeParams.pivotCols=l.pivotCols,this.storeParams.valueCols=l.valueCols}}else this.resetRootStore()},i.prototype.destroyRootStore=function(){this.rootNode&&this.rootNode.childStore&&(this.rootNode.childStore=this.destroyBean(this.rootNode.childStore),this.nodeManager.clear())},i.prototype.refreshAfterSort=function(t,e){this.storeParams&&(this.storeParams.sortModel=t);var i=this.getRootStore();i&&(i.refreshAfterSort(e),this.onStoreUpdated())},i.prototype.generateSecondaryColumns=function(t){var e=this.pivotColDefService.createColDefsFromFields(t);this.managingPivotResultColumns=!0,this.columnModel.setSecondaryColumns(e,"rowModelUpdated")},i.prototype.resetRowHeights=function(){var t=this.resetRowHeightsForAllRowNodes(),e=this.gridOptionsService.getRowHeightForNode(this.rootNode);if(this.rootNode.setRowHeight(e.height,e.estimated),this.rootNode.sibling){var i=this.gridOptionsService.getRowHeightForNode(this.rootNode.sibling);this.rootNode.sibling.setRowHeight(i.height,i.estimated)}t&&this.onRowHeightChanged()},i.prototype.resetRowHeightsForAllRowNodes=function(){var t=this,e=!1;return this.forEachNode((function(i){var n=t.gridOptionsService.getRowHeightForNode(i);i.setRowHeight(n.height,n.estimated);var o=i.detailNode;if(o){var r=t.gridOptionsService.getRowHeightForNode(o);o.setRowHeight(r.height,r.estimated)}if(i.sibling){var s=t.gridOptionsService.getRowHeightForNode(i.sibling);o.setRowHeight(s.height,s.estimated)}e=!0})),e},i.prototype.resetRootStore=function(){this.destroyRootStore(),this.rootNode=new L(this.beans),this.rootNode.group=!0,this.rootNode.level=-1,this.datasource&&(this.storeParams=this.createStoreParams(),this.rootNode.childStore=this.createBean(this.storeFactory.createStore(this.storeParams,this.rootNode)),this.updateRowIndexesAndBounds()),this.managingPivotResultColumns&&(this.columnModel.setSecondaryColumns(null),this.managingPivotResultColumns=!1),this.dispatchModelUpdated(!0)},i.prototype.columnsToValueObjects=function(t){var e=this;return t.map((function(t){return{id:t.getId(),aggFunc:t.getAggFunc(),displayName:e.columnModel.getDisplayNameForColumn(t,"model"),field:t.getColDef().field}}))},i.prototype.createStoreParams=function(){var t=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),e=this.columnsToValueObjects(this.columnModel.getValueColumns()),i=this.columnsToValueObjects(this.columnModel.getPivotColumns()),n=this.gridOptionsService.isGetRowHeightFunction();return{valueCols:e,rowGroupCols:t,pivotCols:i,pivotMode:this.columnModel.isPivotMode(),filterModel:this.filterManager.isAdvancedFilterEnabled()?this.filterManager.getAdvancedFilterModel():this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),datasource:this.datasource,lastAccessedSequence:new vt,dynamicRowHeight:n}},i.prototype.getParams=function(){return this.storeParams},i.prototype.dispatchModelUpdated=function(t){void 0===t&&(t=!1);var e={type:l.EVENT_MODEL_UPDATED,animate:!t,keepRenderedRows:!t,newPage:!1,newData:!1};this.eventService.dispatchEvent(e)},i.prototype.onStoreUpdated=function(){this.pauseStoreUpdateListening||(this.updateRowIndexesAndBounds(),this.dispatchModelUpdated())},i.prototype.onRowHeightChangedDebounced=function(){this.onRowHeightChanged_debounced()},i.prototype.onRowHeightChanged=function(){this.updateRowIndexesAndBounds(),this.dispatchModelUpdated()},i.prototype.updateRowIndexesAndBounds=function(){var t=this.getRootStore();t&&t.setDisplayIndexes(new vt,{value:0})},i.prototype.retryLoads=function(){var t=this.getRootStore();t&&(t.retryLoads(),this.onStoreUpdated())},i.prototype.getRow=function(t){var e=this.getRootStore();if(e)return e.getRowUsingDisplayIndex(t)},i.prototype.expandAll=function(t){this.pauseStoreUpdateListening=!0,this.forEachNode((function(e){e.stub||e.hasChildren()&&e.setExpanded(t)})),this.pauseStoreUpdateListening=!1,this.onStoreUpdated()},i.prototype.refreshAfterFilter=function(t,e){this.storeParams&&(this.storeParams.filterModel=t);var i=this.getRootStore();i&&(i.refreshAfterFilter(e),this.onStoreUpdated())},i.prototype.getRootStore=function(){if(this.rootNode&&this.rootNode.childStore)return this.rootNode.childStore},i.prototype.getRowCount=function(){var t=this.getRootStore();return t?t.getDisplayIndexEnd():0},i.prototype.getTopLevelRowCount=function(){var t=this.getRootStore();return t?t.getRowCount():1},i.prototype.getTopLevelRowDisplayedIndex=function(t){var e=this.getRootStore();return e?e.getTopLevelRowDisplayedIndex(t):t},i.prototype.getRowBounds=function(t){var e=this.getRootStore();return e?e.getRowBounds(t):{rowTop:0,rowHeight:this.gridOptionsService.getRowHeightAsNumber()}},i.prototype.getBlockStates=function(){var t=this.getRootStore();if(t){var e={};return t.forEachStoreDeep((function(t){if(t instanceof mO){var i=t.getBlockStateJson(),n=i.id,o=i.state;e[n]=o}else{if(!(t instanceof NO))throw new Error("AG Grid: Unsupported store type");Object.entries(t.getBlockStates()).forEach((function(t){var i=FO(t,2),n=i[0],o=i[1];e[n]=o}))}})),e}},i.prototype.getRowIndexAtPixel=function(t){var e=this.getRootStore();return t<=0||!e?0:e.getRowIndexAtPixel(t)},i.prototype.isEmpty=function(){return!1},i.prototype.isRowsToRender=function(){return null!=this.getRootStore()&&this.getRowCount()>0},i.prototype.getType=function(){return"serverSide"},i.prototype.forEachNode=function(t){var e=this.getRootStore();e&&e.forEachNodeDeep(t)},i.prototype.forEachNodeAfterFilterAndSort=function(t,e){void 0===e&&(e=!1);var i=this.getRootStore();i&&i.forEachNodeDeepAfterFilterAndSort(t,void 0,e)},i.prototype.executeOnStore=function(t,e){if(!this.started)return!1;var i=this.getRootStore();if(!i)return!0;var n=i.getChildStore(t);return n&&e(n),!0},i.prototype.refreshStore=function(t){void 0===t&&(t={});var e=t.route?t.route:[];this.executeOnStore(e,(function(e){return e.refreshStore(1==t.purge)}))},i.prototype.getStoreState=function(){var t=[],e=this.getRootStore();return e&&e.addStoreStates(t),t},i.prototype.getNodesInRangeForSelection=function(t,e){if(!c.exists(t))return[];if(!e)return[t];var i=t.rowIndex,n=e.rowIndex;if(null===i||null===n)return[t];var o=[],r=FO([i,n].sort((function(t,e){return t-e})),2),s=r[0],a=r[1];return this.forEachNode((function(t){var e=t.rowIndex;null==e||t.stub||e>=s&&e<=a&&o.push(t)})),o.length!==a-s+1?[t]:o},i.prototype.getRowNode=function(t){var e;return this.forEachNode((function(i){i.id===t&&(e=i),i.detailNode&&i.detailNode.id===t&&(e=i.detailNode)})),e},i.prototype.isRowPresent=function(t){return!!this.getRowNode(t.id)},i.prototype.setRowCount=function(t,e){var i=this.getRootStore();if(i){if(i instanceof NO)return void i.setRowCount(t,e);console.error("AG Grid: Infinite scrolling must be enabled in order to set the row count.")}},IO([n("columnModel")],i.prototype,"columnModel",void 0),IO([n("filterManager")],i.prototype,"filterManager",void 0),IO([n("sortController")],i.prototype,"sortController",void 0),IO([n("rowRenderer")],i.prototype,"rowRenderer",void 0),IO([n("ssrmSortService")],i.prototype,"sortListener",void 0),IO([n("ssrmNodeManager")],i.prototype,"nodeManager",void 0),IO([n("ssrmStoreFactory")],i.prototype,"storeFactory",void 0),IO([n("beans")],i.prototype,"beans",void 0),IO([E("pivotColDefService")],i.prototype,"pivotColDefService",void 0),IO([N],i.prototype,"destroyDatasource",null),IO([r],i.prototype,"addEventListeners",null),IO([N],i.prototype,"destroyRootStore",null),i=IO([e("rowModel")],i)}(i),GO=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),BO=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},VO=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return GO(i,t),i.prototype.loadFromDatasource=function(t){var e=t.storeParams,i=t.parentBlock,n=t.parentNode.getGroupKeys();if(e.datasource){var o={startRow:t.startRow,endRow:t.endRow,rowGroupCols:e.rowGroupCols,valueCols:e.valueCols,pivotCols:e.pivotCols,pivotMode:e.pivotMode,groupKeys:n,filterModel:e.filterModel,sortModel:e.sortModel},r={success:t.success,fail:t.fail,request:o,parentNode:t.parentNode,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};window.setTimeout((function(){e.datasource&&i.isAlive()?e.datasource.getRows(r):t.fail()}),0)}},i.prototype.getChildStore=function(t,e,i){if(c.missingOrEmpty(t))return e;var n=i(t[0]);if(n){if(1===t.length&&!n.childStore){var o=this.serverSideRowModel.getParams();n.childStore=this.createBean(this.storeFactory.createStore(o,n))}var r=t.slice(1,t.length),s=n.childStore;return s?s.getChildStore(r):null}return null},i.prototype.isServerRefreshNeeded=function(t,e,i){if(i.valueColChanged||i.secondaryColChanged)return!0;var n=t.level+1;if(!(n<e.length))return!0;var o=e[n].id;return i.changedColumns.indexOf(o)>-1||this.columnModel.getAllGridColumns().filter((function(t){return t.getColDef().showRowGroup&&i.changedColumns.includes(t.getId())})).map((function(t){return t.getColDef().showRowGroup})).some((function(t){return!0===t||t===o}))},i.prototype.getServerSideInitialRowCount=function(){return this.gridOptionsService.get("serverSideInitialRowCount")},i.prototype.assertRowModelIsServerSide=function(t){return!!this.gridOptionsService.isRowModelType("serverSide")||(c.warnOnce("The '".concat(t,"' property can only be used with the Server Side Row Model.")),!1)},i.prototype.assertNotTreeData=function(t){return!this.gridOptionsService.get("treeData")||(c.warnOnce("The '".concat(t,"' property cannot be used while using tree data.")),!1)},i.prototype.isServerSideSortAllLevels=function(){return this.gridOptionsService.get("serverSideSortAllLevels")&&this.assertRowModelIsServerSide("serverSideSortAllLevels")},i.prototype.isServerSideOnlyRefreshFilteredGroups=function(){return this.gridOptionsService.get("serverSideOnlyRefreshFilteredGroups")&&this.assertRowModelIsServerSide("serverSideOnlyRefreshFilteredGroups")},i.prototype.isServerSideSortOnServer=function(){return this.gridOptionsService.get("serverSideSortOnServer")&&this.assertRowModelIsServerSide("serverSideSortOnServer")&&this.assertNotTreeData("serverSideSortOnServer")},i.prototype.isServerSideFilterOnServer=function(){return this.gridOptionsService.get("serverSideFilterOnServer")&&this.assertRowModelIsServerSide("serverSideFilterOnServer")&&this.assertNotTreeData("serverSideFilterOnServer")},BO([n("columnModel")],i.prototype,"columnModel",void 0),BO([n("rowModel")],i.prototype,"serverSideRowModel",void 0),BO([n("ssrmStoreFactory")],i.prototype,"storeFactory",void 0),i=BO([e("ssrmStoreUtils")],i)}(i),jO=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),WO=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},zO=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return jO(i,t),i.prototype.createRowNode=function(t){var e=new L(this.beans),i=null!=t.rowHeight?t.rowHeight:this.gridOptionsService.getRowHeightAsNumber();return e.setRowHeight(i),e.group=t.group,e.leafGroup=t.leafGroup,e.level=t.level,e.uiLevel=t.level,e.parent=t.parent,e.stub=!0,e.__needsRefreshWhenVisible=!1,e.group&&(e.expanded=!1,e.field=t.field,e.rowGroupColumn=t.rowGroupColumn),e},i.prototype.destroyRowNodes=function(t){var e=this;t&&t.forEach((function(t){return e.destroyRowNode(t)}))},i.prototype.destroyRowNode=function(t,e){void 0===e&&(e=!1),t.childStore&&!e&&(this.destroyBean(t.childStore),t.childStore=null),t.sibling&&!t.footer&&this.destroyRowNode(t.sibling,!1),t.clearRowTopAndRowIndex(),null!=t.id&&this.nodeManager.removeNode(t)},i.prototype.setTreeGroupInfo=function(t){t.updateHasChildren();var e=this.gridOptionsService.get("getServerSideGroupKey");t.hasChildren()&&null!=e&&(t.key=e(t.data)),t.hasChildren()||null==t.childStore||(this.destroyBean(t.childStore),t.childStore=null,t.expanded=!1)},i.prototype.setRowGroupInfo=function(t){t.key=this.valueService.getValue(t.rowGroupColumn,t),null!==t.key&&void 0!==t.key||c.doOnce((function(){console.warn("AG Grid: null and undefined values are not allowed for server side row model keys"),t.rowGroupColumn&&console.warn("column = ".concat(t.rowGroupColumn.getId())),console.warn("data is ",t.data)}),"ServerSideBlock-CannotHaveNullOrUndefinedForKey"),this.beans.gridOptionsService.getGroupIncludeFooter()({node:t})&&(t.createFooter(),t.sibling&&(t.sibling.uiLevel=t.uiLevel+1))},i.prototype.setMasterDetailInfo=function(t){var e=this.gridOptionsService.get("isRowMaster");t.master=null==e||e(t.data)},i.prototype.updateDataIntoRowNode=function(t,e){if(t.updateData(e),this.gridOptionsService.get("treeData"))this.setTreeGroupInfo(t),this.setChildCountIntoRowNode(t);else if(t.group){if(this.setChildCountIntoRowNode(t),!t.footer)this.beans.gridOptionsService.getGroupIncludeFooter()({node:t})?t.sibling?t.sibling.updateData(e):t.createFooter():t.sibling&&t.destroyFooter()}else this.gridOptionsService.get("masterDetail")},i.prototype.setDataIntoRowNode=function(t,e,i,n){var o;t.stub=!1;var r=this.gridOptionsService.get("treeData");c.exists(e)?(t.setDataAndId(e,i),r?this.setTreeGroupInfo(t):t.group?this.setRowGroupInfo(t):this.gridOptionsService.get("masterDetail")&&this.setMasterDetailInfo(t)):(t.setDataAndId(void 0,void 0),t.key=null),(r||t.group)&&(this.setGroupDataIntoRowNode(t),this.setChildCountIntoRowNode(t)),c.exists(e)&&(t.setRowHeight(this.gridOptionsService.getRowHeightForNode(t,!1,n).height),null===(o=t.sibling)||void 0===o||o.setRowHeight(this.gridOptionsService.getRowHeightForNode(t.sibling,!1,n).height))},i.prototype.setChildCountIntoRowNode=function(t){var e=this.gridOptionsService.get("getChildCount");e&&t.setAllChildrenCount(e(t.data))},i.prototype.setGroupDataIntoRowNode=function(t){var e=this,i=this.columnModel.getGroupDisplayColumns(),n=this.gridOptionsService.get("treeData");i.forEach((function(i){if(null==t.groupData&&(t.groupData={}),n)t.groupData[i.getColId()]=t.key;else if(i.isRowGroupDisplayed(t.rowGroupColumn.getId())){var o=e.valueService.getValue(t.rowGroupColumn,t);t.groupData[i.getColId()]=o}}))},i.prototype.clearDisplayIndex=function(t){(t.clearRowTopAndRowIndex(),t.hasChildren()&&c.exists(t.childStore))&&t.childStore.clearDisplayIndexes();t.master&&t.detailNode&&t.detailNode.clearRowTopAndRowIndex()},i.prototype.setDisplayIndex=function(t,e,i){if((t.setRowIndex(e.next()),t.setRowTop(i.value),i.value+=t.rowHeight,!t.footer)&&(t.master&&(t.expanded&&t.detailNode?(t.detailNode.setRowIndex(e.next()),t.detailNode.setRowTop(i.value),i.value+=t.detailNode.rowHeight):t.detailNode&&t.detailNode.clearRowTopAndRowIndex()),t.hasChildren()&&c.exists(t.childStore))){var n=t.childStore;t.expanded?n.setDisplayIndexes(e,i):n.clearDisplayIndexes()}},i.prototype.binarySearchForDisplayIndex=function(t,e){var i=0,n=e.length-1;if(c.missing(n)||c.missing(i))console.warn("AG Grid: error: topPointer = ".concat(n,", bottomPointer = ").concat(i));else for(;;){var o=Math.floor((i+n)/2),r=e[o];if(r.rowIndex===t)return r;var s=r.master&&r.expanded,a=r.detailNode;if(s&&a&&a.rowIndex===t)return r.detailNode;var l=r.childStore;if(r.expanded&&l&&l.isDisplayIndexInStore(t))return l.getRowUsingDisplayIndex(t);if(r.rowIndex<t)i=o+1;else{if(!(r.rowIndex>t))return void console.warn("AG Grid: error: unable to locate rowIndex = ".concat(t," in cache"));n=o-1}}},i.prototype.extractRowBounds=function(t,e){var i=function(t){return{rowHeight:t.rowHeight,rowTop:t.rowTop}};if(t.rowIndex===e)return i(t);if(t.hasChildren()&&t.expanded&&c.exists(t.childStore)){var n=t.childStore;if(n.isDisplayIndexInStore(e))return n.getRowBounds(e)}else if(t.master&&t.expanded&&c.exists(t.detailNode)&&t.detailNode.rowIndex===e)return i(t.detailNode)},i.prototype.getIndexAtPixel=function(t,e){if(t.isPixelInRange(e))return t.rowIndex;var i=t.master&&t.expanded,n=t.detailNode;if(i&&n&&n.isPixelInRange(e))return t.detailNode.rowIndex;if(t.hasChildren()&&t.expanded&&c.exists(t.childStore)){var o=t.childStore;if(o.isPixelInRange(e))return o.getRowIndexAtPixel(e)}return null},i.prototype.createNodeIdPrefix=function(t){for(var e=[],i=t;i&&i.level>=0;)""===i.key?e.push("ag-Grid-MissingKey"):e.push(i.key),i=i.parent;if(e.length>0)return e.reverse().join("-")},i.prototype.checkOpenByDefault=function(t){return this.expansionService.checkOpenByDefault(t)},WO([n("valueService")],i.prototype,"valueService",void 0),WO([n("columnModel")],i.prototype,"columnModel",void 0),WO([n("ssrmNodeManager")],i.prototype,"nodeManager",void 0),WO([n("beans")],i.prototype,"beans",void 0),WO([n("expansionService")],i.prototype,"expansionService",void 0),i=WO([e("ssrmBlockUtils")],i)}(i),UO=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},HO=function(){function t(){this.rowNodes={}}return t.prototype.addRowNode=function(t){var e=t.id;this.rowNodes[e]&&(console.warn("AG Grid: Duplicate node id ".concat(t.id,". Row ID's are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.")),console.warn("first instance",this.rowNodes[e].data),console.warn("second instance",t.data)),this.rowNodes[e]=t},t.prototype.removeNode=function(t){var e=t.id;this.rowNodes[e]&&(this.rowNodes[e]=void 0)},t.prototype.clear=function(){this.rowNodes={}},UO([N],t.prototype,"clear",null),t=UO([e("ssrmNodeManager")],t)}(),KO=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),YO=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},XO=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.asyncTransactions=[],e}return KO(i,t),i.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")},i.prototype.applyTransactionAsync=function(t,e){null==this.asyncTransactionsTimeout&&this.scheduleExecuteAsync(),this.asyncTransactions.push({transaction:t,callback:e})},i.prototype.scheduleExecuteAsync=function(){var t=this,e=this.gridOptionsService.getAsyncTransactionWaitMillis();this.asyncTransactionsTimeout=window.setTimeout((function(){t.executeAsyncTransactions()}),e)},i.prototype.executeAsyncTransactions=function(){var t=this;if(this.asyncTransactions){var e=[],i=[],n=[],o=!1;if(this.asyncTransactions.forEach((function(r){var s;t.serverSideRowModel.executeOnStore(r.transaction.route,(function(t){s=t.applyTransaction(r.transaction)}))?null==s&&(s={status:mt.StoreNotFound}):s={status:mt.StoreNotStarted},i.push(s),s.status==mt.StoreLoading?n.push(r):(r.callback&&e.push((function(){return r.callback(s)})),s.status===mt.Applied&&(o=!0))})),e.length>0&&window.setTimeout((function(){e.forEach((function(t){return t()}))}),0),this.asyncTransactionsTimeout=void 0,this.asyncTransactions=n,o&&(this.valueCache.onDataChanged(),this.eventService.dispatchEvent({type:l.EVENT_STORE_UPDATED})),i.length>0){var r={type:l.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:i};this.eventService.dispatchEvent(r)}}},i.prototype.flushAsyncTransactions=function(){null!=this.asyncTransactionsTimeout&&clearTimeout(this.asyncTransactionsTimeout),this.executeAsyncTransactions()},i.prototype.applyTransaction=function(t){var e;if(this.serverSideRowModel.executeOnStore(t.route,(function(i){e=i.applyTransaction(t)}))){if(e){if(this.valueCache.onDataChanged(),e.remove){var i=e.remove.map((function(t){return t.id}));this.selectionService.deleteSelectionStateFromParent(t.route||[],i)}return this.eventService.dispatchEvent({type:l.EVENT_STORE_UPDATED}),e}return{status:mt.StoreNotFound}}return{status:mt.StoreNotStarted}},YO([n("rowNodeBlockLoader")],i.prototype,"rowNodeBlockLoader",void 0),YO([n("valueCache")],i.prototype,"valueCache",void 0),YO([n("rowModel")],i.prototype,"serverSideRowModel",void 0),YO([n("rowRenderer")],i.prototype,"rowRenderer",void 0),YO([n("selectionService")],i.prototype,"selectionService",void 0),YO([r],i.prototype,"postConstruct",null),i=YO([e("ssrmTransactionManager")],i)}(i),qO=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$O=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ZO=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return qO(i,t),i.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,l.EVENT_ROW_GROUP_OPENED,this.onRowGroupOpened.bind(this))},i.prototype.onRowGroupOpened=function(t){var e=t.node;if(e.expanded){if(e.master)this.createDetailNode(e);else if(c.missing(e.childStore)){var i=this.serverSideRowModel.getParams();e.childStore=this.createBean(this.storeFactory.createStore(i,e))}}else this.gridOptionsService.get("purgeClosedRowNodes")&&c.exists(e.childStore)&&(e.childStore=this.destroyBean(e.childStore));var n={type:l.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(n)},i.prototype.createDetailNode=function(t){if(c.exists(t.detailNode))return t.detailNode;var e=new L(this.beans);e.detail=!0,e.selectable=!1,e.parent=t,c.exists(t.id)&&(e.id="detail_"+t.id),e.data=t.data,e.level=t.level+1;var i=this.gridOptionsService.getRowHeightForNode(e).height;return e.rowHeight=i||200,t.detailNode=e,e},$O([n("rowModel")],i.prototype,"serverSideRowModel",void 0),$O([n("ssrmStoreFactory")],i.prototype,"storeFactory",void 0),$O([n("beans")],i.prototype,"beans",void 0),$O([r],i.prototype,"postConstruct",null),i=$O([e("ssrmExpandListener")],i)}(i),JO=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),QO=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},tD=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return JO(i,t),i.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,l.EVENT_SORT_CHANGED,this.onSortChanged.bind(this))},i.prototype.onSortChanged=function(){var t=this.serverSideRowModel.getParams();if(t){var e=this.sortController.getSortModel(),i=t.sortModel,n=this.findChangedColumnsInSort(e,i),o={valueColChanged:this.listenerUtils.isSortingWithValueColumn(n),secondaryColChanged:this.listenerUtils.isSortingWithSecondaryColumn(n),changedColumns:n};this.serverSideRowModel.refreshAfterSort(e,o)}},i.prototype.findChangedColumnsInSort=function(t,e){var i=[];[t,e].forEach((function(t){if(t){var e=t.map((function(t){return t.colId}));i=i.concat(e)}}));return i.filter((function(i){var n=e.find((function(t){return t.colId===i})),o=t.find((function(t){return t.colId===i}));return function(t,e){return(t?t.sort:null)!==(e?e.sort:null)}(n,o)||function(i,n){return(i?e.indexOf(i):-1)!==(n?t.indexOf(n):-1)}(n,o)}))},QO([n("sortController")],i.prototype,"sortController",void 0),QO([n("rowModel")],i.prototype,"serverSideRowModel",void 0),QO([n("ssrmListenerUtils")],i.prototype,"listenerUtils",void 0),QO([r],i.prototype,"postConstruct",null),i=QO([e("ssrmSortService")],i)}(i),eD=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),iD=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},nD=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return eD(i,t),i.prototype.postConstruct=function(){var t=this;this.gridOptionsService.isRowModelType("serverSide")&&(this.addManagedListener(this.eventService,l.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,(function(){return t.onFilterChanged(!0)})),this.addManagedListener(this.eventService,l.EVENT_FILTER_CHANGED,(function(){return t.onFilterChanged()})))},i.prototype.onFilterChanged=function(t){var e=this.serverSideRowModel.getParams();if(e){var i,n,o=e.filterModel;if(this.filterManager.isAdvancedFilterEnabled()){i=this.filterManager.getAdvancedFilterModel();var r=t?Object.keys(null!=o?o:{}):this.getAdvancedFilterColumns(o),s=this.getAdvancedFilterColumns(i);r.forEach((function(t){return s.add(t)})),n=Array.from(s)}else if(i=this.filterManager.getFilterModel(),t){var a=this.getAdvancedFilterColumns(o);Object.keys(i).forEach((function(t){return a.add(t)})),n=Array.from(a)}else n=this.findChangedColumns(o,i);var l={valueColChanged:this.listenerUtils.isSortingWithValueColumn(n),secondaryColChanged:this.listenerUtils.isSortingWithSecondaryColumn(n),changedColumns:n};this.serverSideRowModel.refreshAfterFilter(i,l)}},i.prototype.findChangedColumns=function(t,e){var i={};Object.keys(t).forEach((function(t){return i[t]=!0})),Object.keys(e).forEach((function(t){return i[t]=!0}));var n=[];return Object.keys(i).forEach((function(i){JSON.stringify(t[i])!=JSON.stringify(e[i])&&n.push(i)})),n},i.prototype.getAdvancedFilterColumns=function(t){var e=new Set;if(!t)return e;var i=function(t){"join"===t.filterType?t.conditions.forEach((function(t){return i(t)})):e.add(t.colId)};return i(t),e},iD([n("rowModel")],i.prototype,"serverSideRowModel",void 0),iD([n("filterManager")],i.prototype,"filterManager",void 0),iD([n("ssrmListenerUtils")],i.prototype,"listenerUtils",void 0),iD([r],i.prototype,"postConstruct",null),i=iD([e("ssrmFilterListener")],i)}(i),oD=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},rD=function(){function t(){}return t.prototype.createStore=function(t,e){var i=this.getStoreParams(t,e);return new(i.suppressInfiniteScroll?mO:NO)(t,i,e)},t.prototype.getStoreParams=function(t,e){var i=this.getLevelSpecificParams(e),n=this.isInfiniteScroll(i);return{suppressInfiniteScroll:!n,cacheBlockSize:this.getBlockSize(n,i),maxBlocksInCache:this.getMaxBlocksInCache(n,t,i)}},t.prototype.getMaxBlocksInCache=function(t,e,i){if(t){var n=i&&null!=i.maxBlocksInCache?i.maxBlocksInCache:this.gridOptionsService.get("maxBlocksInCache");if(null!=n&&n>=0)if(e.dynamicRowHeight){var o="Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.";c.warnOnce(o)}else{if(!this.columnModel.isAutoRowHeightActive())return n;o="Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.";c.warnOnce(o)}}},t.prototype.getBlockSize=function(t,e){if(t){var i=e&&null!=e.cacheBlockSize?e.cacheBlockSize:this.gridOptionsService.get("cacheBlockSize");return null!=i&&i>0?i:100}},t.prototype.getLevelSpecificParams=function(t){var e=this.gridOptionsService.getCallback("getServerSideGroupLevelParams");if(e)return e({level:t.level+1,parentRowNode:t.level>=0?t:void 0,rowGroupColumns:this.columnModel.getRowGroupColumns(),pivotColumns:this.columnModel.getPivotColumns(),pivotMode:this.columnModel.isPivotMode()})},t.prototype.isInfiniteScroll=function(t){return!(t&&null!=t.suppressInfiniteScroll?t.suppressInfiniteScroll:this.isSuppressServerSideInfiniteScroll())},t.prototype.isSuppressServerSideInfiniteScroll=function(){return this.gridOptionsService.get("suppressServerSideInfiniteScroll")},oD([n("gridOptionsService")],t.prototype,"gridOptionsService",void 0),oD([n("columnModel")],t.prototype,"columnModel",void 0),t=oD([e("ssrmStoreFactory")],t)}(),sD=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},aD=function(){function t(){}return t.prototype.isSortingWithValueColumn=function(t){for(var e=this.columnModel.getValueColumns().map((function(t){return t.getColId()})),i=0;i<t.length;i++)if(e.indexOf(t[i])>-1)return!0;return!1},t.prototype.isSortingWithSecondaryColumn=function(t){if(!this.columnModel.getSecondaryColumns())return!1;for(var e=this.columnModel.getSecondaryColumns().map((function(t){return t.getColId()})),i=0;i<t.length;i++)if(e.indexOf(t[i])>-1)return!0;return!1},sD([n("columnModel")],t.prototype,"columnModel",void 0),t=sD([e("ssrmListenerUtils")],t)}(),lD=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cD=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},dD=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},uD=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},hD=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectedState={selectAll:!1,toggledNodes:new Set},e.lastSelected=null,e.selectAllUsed=!1,e.selectedNodes={},e}return lD(e,t),e.prototype.init=function(){var t=this;this.rowSelection=this.gridOptionsService.get("rowSelection"),this.addManagedPropertyListener("rowSelection",(function(e){t.rowSelection=e.currentValue}))},e.prototype.getSelectedState=function(){return{selectAll:this.selectedState.selectAll,toggledNodes:uD([],dD(this.selectedState.toggledNodes),!1)}},e.prototype.setSelectedState=function(t){var e={selectAll:!1,toggledNodes:new Set};"object"==typeof t?"selectAll"in t&&"boolean"==typeof t.selectAll?(e.selectAll=t.selectAll,"toggledNodes"in t&&Array.isArray(t.toggledNodes)?(t.toggledNodes.forEach((function(t){"string"==typeof t?e.toggledNodes.add(t):console.warn("AG Grid: Provided ids must be of string type. Invalid id provided: ".concat(t))})),this.selectedState=e):console.error("AG Grid: `toggledNodes` must be an array of string ids.")):console.error("AG Grid: Select all status should be of boolean type."):console.error("AG Grid: The provided selection state should be an object.")},e.prototype.deleteSelectionStateFromParent=function(t,e){var i=this;if(0===this.selectedState.toggledNodes.size)return!1;var n=!1;return e.forEach((function(t){i.selectedState.toggledNodes.delete(t)&&(n=!0)})),n},e.prototype.setNodesSelected=function(t){var e,i=this;if(0===t.nodes.length)return 0;var n=t.clearSelection&&t.newValue&&!t.rangeSelect;if("multiple"!==this.rowSelection||n){if(t.nodes.length>1)throw new Error("AG Grid: cannot select multiple rows when rowSelection is set to 'single'");var o=t.nodes[0];return t.newValue?(this.selectedNodes=((e={})[o.id]=o,e),this.selectedState={selectAll:!1,toggledNodes:new Set([o.id])}):(this.selectedNodes={},this.selectedState={selectAll:!1,toggledNodes:new Set}),this.lastSelected=o.id,1}var r=function(e){t.newValue?i.selectedNodes[e.id]=e:delete i.selectedNodes[e.id];var n=e.selectable;t.newValue===i.selectedState.selectAll||!n?i.selectedState.toggledNodes.delete(e.id):i.selectedState.toggledNodes.add(e.id)};if(t.rangeSelect&&this.lastSelected){if(t.nodes.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");o=t.nodes[0];var s=this.rowModel.getRowNode(this.lastSelected);return this.rowModel.getNodesInRangeForSelection(o,null!=s?s:null).forEach(r),this.lastSelected=o.id,1}return t.nodes.forEach(r),this.lastSelected=t.nodes[t.nodes.length-1].id,1},e.prototype.processNewRow=function(t){this.selectedNodes[t.id]&&(this.selectedNodes[t.id]=t)},e.prototype.isNodeSelected=function(t){var e=this.selectedState.toggledNodes.has(t.id);return this.selectedState.selectAll?!e:e},e.prototype.getSelectedNodes=function(){return this.selectAllUsed&&console.warn("AG Grid: getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model.\n                Use `api.getServerSideSelectionState()` instead."),Object.values(this.selectedNodes)},e.prototype.getSelectedRows=function(){return this.getSelectedNodes().map((function(t){return t.data}))},e.prototype.getSelectionCount=function(){return this.selectedState.selectAll?-1:this.selectedState.toggledNodes.size},e.prototype.clearOtherNodes=function(t,e){var i=this.selectedState.selectAll?1:this.selectedState.toggledNodes.size-1;this.selectedState={selectAll:!1,toggledNodes:new Set([t.id])},this.rowModel.forEachNode((function(i){i!==t&&i.selectThisNode(!1,void 0,e)}));var n={type:l.EVENT_SELECTION_CHANGED,source:e};return this.eventService.dispatchEvent(n),i},e.prototype.isEmpty=function(){var t;return!this.selectedState.selectAll&&!(null===(t=this.selectedState.toggledNodes)||void 0===t?void 0:t.size)},e.prototype.selectAllRowNodes=function(t){this.selectedState={selectAll:!0,toggledNodes:new Set},this.selectedNodes={},this.selectAllUsed=!0},e.prototype.deselectAllRowNodes=function(t){this.selectedState={selectAll:!1,toggledNodes:new Set},this.selectedNodes={}},e.prototype.getSelectAllState=function(t,e){return this.selectedState.selectAll?!(this.selectedState.toggledNodes.size>0)||null:this.selectedState.toggledNodes.size>0&&null},cD([n("rowModel")],e.prototype,"rowModel",void 0),cD([r],e.prototype,"init",null),e}(i),pD=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fD=function(){return(fD=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},gD=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},vD=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]])}return i},yD=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},mD=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},bD=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectedState={selectAllChildren:!1,toggledNodes:new Map},e.lastSelected=null,e}return pD(e,t),e.prototype.init=function(){var t=this;this.addManagedListener(this.eventService,l.EVENT_MODEL_UPDATED,(function(){return t.removeRedundantState()})),this.addManagedListener(this.eventService,l.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return t.selectionService.reset("rowGroupChanged")}))},e.prototype.getSelectedState=function(){var t=this,e=function(i,n,o){var r={nodeId:o};if(n<=t.columnModel.getRowGroupColumns().length&&(r.selectAllChildren=i.selectAllChildren),i.toggledNodes.size){var s=[];i.toggledNodes.forEach((function(t,i){var o=e(t,n+1,i);s.push(o)})),r.toggledNodes=s}return r};return e(this.selectedState,0)},e.prototype.setSelectedState=function(t){var e=function(t,i){var n,o;if("object"!=typeof t)throw new Error("AG Grid: Each provided state object must be an object.");if("selectAllChildren"in t&&"boolean"!=typeof t.selectAllChildren)throw new Error("AG Grid: `selectAllChildren` must be a boolean value or undefined.");if("toggledNodes"in t){if(!Array.isArray(t.toggledNodes))throw new Error("AG Grid: `toggledNodes` must be an array.");if(!t.toggledNodes.every((function(t){return"object"==typeof t&&"nodeId"in t&&"string"==typeof t.nodeId})))throw new Error("AG Grid: Every `toggledNode` requires an associated string id.")}var r=null!==(n=t.selectAllChildren)&&void 0!==n?n:!i,s=null===(o=t.toggledNodes)||void 0===o?void 0:o.map((function(t){return[t.nodeId,e(t,r)]}));if(null==s?void 0:s.some((function(t){var e=yD(t,2);e[0];var i=e[1];return r===i.selectAllChildren&&0===i.toggledNodes.size})))throw new Error("\n                    AG Grid: AG Grid: Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule.\n                    Please rebuild the selection state and reapply it.\n                ");return{selectAllChildren:r,toggledNodes:new Map(s)}};try{this.selectedState=e(t,!!t.selectAllChildren)}catch(t){console.error(t.message)}},e.prototype.deleteSelectionStateFromParent=function(t,e){for(var i=this.selectedState,n=mD([],yD(t),!1);i&&n.length;)i=i.toggledNodes.get(n.pop());if(!i)return!1;var o=!1;return e.forEach((function(t){(null==i?void 0:i.toggledNodes.delete(t))&&(o=!0)})),o&&this.removeRedundantState(),o},e.prototype.setNodesSelected=function(t){var e=this,i=t.nodes,n=vD(t,["nodes"]);if(0===i.length)return 0;if(t.rangeSelect){if(i.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");var o=i[0],r=this.rowModel.getNodesInRangeForSelection(o,this.lastSelected).map(this.getRouteToNode).sort((function(t,e){return e.length-t.length})),s=new Set;return r.forEach((function(t){s.has(t[t.length-1])||(t.forEach((function(t){return s.add(t)})),e.recursivelySelectNode(t,e.selectedState,fD({node:o},n)))})),this.removeRedundantState(),this.lastSelected=o,1}return t.nodes.forEach((function(t){var i=e.getRouteToNode(t);e.recursivelySelectNode(i,e.selectedState,fD(fD({},n),{node:t}))})),this.removeRedundantState(),this.lastSelected=t.nodes[t.nodes.length-1],1},e.prototype.isNodeSelected=function(t){var e=this.getRouteToNode(t);return this.isNodePathSelected(e,this.selectedState)},e.prototype.isNodePathSelected=function(t,e){var i=yD(t),n=i[0],o=i.slice(1);if(0===o.length){var r=e.toggledNodes.has(n.id);if(n.hasChildren()){var s=e.toggledNodes.get(n.id);if(s&&s.toggledNodes.size)return}return e.selectAllChildren?!r:r}if(e.toggledNodes.has(n.id)){var a=e.toggledNodes.get(n.id);if(a)return this.isNodePathSelected(o,a)}return!!e.selectAllChildren},e.prototype.getRouteToNode=function(t){for(var e=[],i=t;i.parent;)e.push(i),i=i.parent;return e.reverse()},e.prototype.removeRedundantState=function(){var t=this;if(!this.filterManager.isAnyFilterPresent()){var e=function(i,n,o){void 0===i&&(i=t.selectedState),void 0===n&&(n=t.serverSideRowModel.getRootStore());var r=!0,s=!0;return i.toggledNodes.forEach((function(n,o){var a=t.rowModel.getRowNode(o);a||(r=!1);var l=null==a?void 0:a.childStore;l?(e(n,l,a)&&i.selectAllChildren===n.selectAllChildren&&i.toggledNodes.delete(o),n.toggledNodes.size>0&&(s=!1)):n.toggledNodes.size>0&&(s=!1)})),!(!n||!n.isLastRowIndexKnown()||n.getRowCount()!==i.toggledNodes.size)&&(!(!s||!r)&&(i.toggledNodes.clear(),i.selectAllChildren=!i.selectAllChildren,o&&(null==o?void 0:o.isSelected())!==i.selectAllChildren&&o.selectThisNode(i.selectAllChildren,void 0,"api"),!0))};e()}},e.prototype.recursivelySelectNode=function(t,e,i){var n=yD(t),o=n[0],r=n.slice(1);if(o)if(!r.length){var s=o.selectable;if(e.selectAllChildren===i.newValue||!s)return void e.toggledNodes.delete(o.id);var a={selectAllChildren:i.newValue,toggledNodes:new Map};e.toggledNodes.set(o.id,a)}else{var l=e.toggledNodes.has(o.id),c=l?e.toggledNodes.get(o.id):{selectAllChildren:e.selectAllChildren,toggledNodes:new Map};l||e.toggledNodes.set(o.id,c),this.recursivelySelectNode(r,c,i),e.selectAllChildren===c.selectAllChildren&&0===c.toggledNodes.size&&e.toggledNodes.delete(o.id)}},e.prototype.getSelectedNodes=function(){console.warn("AG Grid: `getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model.\n            Use `api.getServerSideSelectionState()` instead.");var t=[];return this.rowModel.forEachNode((function(e){e.isSelected()&&t.push(e)})),t},e.prototype.processNewRow=function(t){},e.prototype.getSelectedRows=function(){return this.getSelectedNodes().map((function(t){return t.data}))},e.prototype.getSelectionCount=function(){return-1},e.prototype.isEmpty=function(){var t;return!this.selectedState.selectAllChildren&&!(null===(t=this.selectedState.toggledNodes)||void 0===t?void 0:t.size)},e.prototype.selectAllRowNodes=function(t){this.selectedState={selectAllChildren:!0,toggledNodes:new Map}},e.prototype.deselectAllRowNodes=function(t){this.selectedState={selectAllChildren:!1,toggledNodes:new Map}},e.prototype.getSelectAllState=function(t,e){return this.selectedState.selectAllChildren?!(this.selectedState.toggledNodes.size>0)||null:this.selectedState.toggledNodes.size>0&&null},gD([n("rowModel")],e.prototype,"rowModel",void 0),gD([n("columnModel")],e.prototype,"columnModel",void 0),gD([n("filterManager")],e.prototype,"filterManager",void 0),gD([n("rowModel")],e.prototype,"serverSideRowModel",void 0),gD([n("selectionService")],e.prototype,"selectionService",void 0),gD([r],e.prototype,"init",null),e}(i),SD=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xD=function(){return(xD=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},CD=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},wD=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]])}return i},ED=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return SD(i,t),i.prototype.init=function(){var t=this,e=this.gridOptionsService.get("groupSelectsChildren");this.addManagedPropertyListener("groupSelectsChildren",(function(e){t.destroyBean(t.selectionStrategy);var i=e.currentValue?bD:hD;t.selectionStrategy=t.createManagedBean(new i),t.shotgunResetNodeSelectionState();var n={type:l.EVENT_SELECTION_CHANGED,source:"api"};t.eventService.dispatchEvent(n)})),this.addManagedPropertyListener("rowSelection",(function(){return t.deselectAllRowNodes({source:"api"})}));var i=e?bD:hD;this.selectionStrategy=this.createManagedBean(new i)},i.prototype.getSelectionState=function(){return this.selectionStrategy.getSelectedState()},i.prototype.setSelectionState=function(t,e){if(!Array.isArray(t)){this.selectionStrategy.setSelectedState(t),this.shotgunResetNodeSelectionState();var i={type:l.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(i)}},i.prototype.setNodesSelected=function(t){var e=t.nodes,i=wD(t,["nodes"]),n=this.gridOptionsService.get("rowSelection");if(e.length>1&&"multiple"!==n)return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;if(e.length>1&&t.rangeSelect)return console.warn("AG Grid: cannot use range selection when multi selecting rows"),0;var o=xD({nodes:e.filter((function(t){return t.selectable}))},i);if(!o.nodes.length)return 0;var r=this.selectionStrategy.setNodesSelected(o);this.shotgunResetNodeSelectionState(o.source);var s={type:l.EVENT_SELECTION_CHANGED,source:o.source};return this.eventService.dispatchEvent(s),r},i.prototype.deleteSelectionStateFromParent=function(t,e){if(this.selectionStrategy.deleteSelectionStateFromParent(t,e)){this.shotgunResetNodeSelectionState();var i={type:l.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(i)}},i.prototype.shotgunResetNodeSelectionState=function(t){var e=this;this.rowModel.forEachNode((function(i){if(!i.stub){var n=e.selectionStrategy.isNodeSelected(i);n!==i.isSelected()&&i.selectThisNode(n,void 0,t)}}))},i.prototype.getSelectedNodes=function(){return this.selectionStrategy.getSelectedNodes()},i.prototype.getSelectedRows=function(){return this.selectionStrategy.getSelectedRows()},i.prototype.getSelectionCount=function(){return this.selectionStrategy.getSelectionCount()},i.prototype.syncInRowNode=function(t,e){this.selectionStrategy.processNewRow(t);var i=this.selectionStrategy.isNodeSelected(t);if(0==i||t.selectable)t.setSelectedInitialValue(i);else{this.selectionStrategy.setNodesSelected({nodes:[t],newValue:!1,source:"api"}),this.shotgunResetNodeSelectionState();var n={type:l.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(n)}},i.prototype.reset=function(){this.selectionStrategy.deselectAllRowNodes({source:"api"})},i.prototype.isEmpty=function(){return this.selectionStrategy.isEmpty()},i.prototype.selectAllRowNodes=function(t){(t.justCurrentPage||t.justFiltered)&&console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'"),this.selectionStrategy.selectAllRowNodes(t),this.rowModel.forEachNode((function(e){e.stub||e.selectThisNode(!0,void 0,t.source)}));var e={type:l.EVENT_SELECTION_CHANGED,source:t.source};this.eventService.dispatchEvent(e)},i.prototype.deselectAllRowNodes=function(t){(t.justCurrentPage||t.justFiltered)&&console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'"),this.selectionStrategy.deselectAllRowNodes(t),this.rowModel.forEachNode((function(e){e.stub||e.selectThisNode(!1,void 0,t.source)}));var e={type:l.EVENT_SELECTION_CHANGED,source:t.source};this.eventService.dispatchEvent(e)},i.prototype.getSelectAllState=function(t,e){return this.selectionStrategy.getSelectAllState(t,e)},i.prototype.updateGroupsFromChildrenSelections=function(t,e){return!1},i.prototype.getBestCostNodeSelection=function(){console.warn("AG Grid: calling gridApi.getBestCostNodeSelection() is only possible when using rowModelType=`clientSide`.")},i.prototype.filterFromSelection=function(){},CD([n("rowModel")],i.prototype,"rowModel",void 0),CD([r],i.prototype,"init",null),i=CD([e("selectionService")],i)}(i),OD=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),DD=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},AD=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.queuedRowIds=new Set,e}return OD(i,t),i.prototype.postConstruct=function(){var e=this;t.prototype.postConstruct.call(this),this.addManagedListener(this.eventService,l.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){e.queuedRowIds.clear()}))},i.prototype.checkOpenByDefault=function(t){if(t.isExpandable()){var e=function(){window.setTimeout((function(){return t.setExpanded(!0)}),0)};if(this.queuedRowIds.has(t.id))return this.queuedRowIds.delete(t.id),void e();var i=this.gridOptionsService.getCallback("isServerSideGroupOpenByDefault");if(i)i({data:t.data,rowNode:t})&&e()}},i.prototype.expandRows=function(t){var e=this;t.forEach((function(t){var i=e.serverSideRowModel.getRowNode(t);i?i.setExpanded(!0):e.queuedRowIds.add(t)}))},i.prototype.expandAll=function(t){this.serverSideRowModel.expandAll(t)},i.prototype.onGroupExpandedOrCollapsed=function(){},DD([n("rowModel")],i.prototype,"serverSideRowModel",void 0),i=DD([e("expansionService")],i)}(St),TD={version:"31.0.1",moduleName:a.ServerSideRowModelModule,rowModel:"serverSide",beans:[_O,ZO,tD,VO,zO,HO,XO,nD,rD,aD,ED,AD],dependantModules:[Ft]},kD=function(){function t(t,e,i,n,o,r,s,a,l,c,d){this.rowModel=t,this.filterParams=e,this.createKey=i,this.caseFormat=n,this.columnModel=o,this.valueService=r,this.treeDataOrGrouping=s,this.treeData=a,this.getDataPath=l,this.groupAllowUnbalanced=c,this.addManagedListener=d}return t.prototype.extractUniqueValuesAsync=function(t,e){var i=this;return new G((function(n){if(i.rowModel.isRowDataLoaded())n(i.extractUniqueValues(t,e));else var o=i.addManagedListener(l.EVENT_ROW_COUNT_READY,(function(){null==o||o(),n(i.extractUniqueValues(t,e))}))}))},t.prototype.extractUniqueValues=function(t,e){var i=this,n=new Map,o=this.extractExistingFormattedKeys(e),r=new Set,s=this.treeData&&!!this.getDataPath,a=this.columnModel.getRowGroupColumns(),l=function(t,s){var a=i.caseFormat(t);if(!r.has(a)){r.add(a);var l=t,d=c.makeNull(s),u=null==o?void 0:o.get(a);null!=u&&(l=u,d=e.get(u)),n.set(l,d)}};return this.rowModel.forEachLeafNode((function(e){if(e.data&&t(e))if(i.treeDataOrGrouping)i.addValueForTreeDataOrGrouping(e,s,a,l);else{var n=i.getValue(e);i.filterParams.convertValuesToStrings?i.addValueForConvertValuesToString(e,n,l):null!=n&&Array.isArray(n)?(n.forEach((function(t){l(i.createKey(t,e),t)})),0===n.length&&l(null,null)):l(i.createKey(n,e),n)}})),n},t.prototype.addValueForConvertValuesToString=function(t,e,i){var n=this.createKey(e,t);null!=n&&Array.isArray(n)?(n.forEach((function(t){var e=c.toStringOrNull(c.makeNull(t));i(e,e)})),0===n.length&&i(null,null)):i(n,n)},t.prototype.addValueForTreeDataOrGrouping=function(t,e,i,n){var o,r,s=this;if(e){if(null===(o=t.childrenAfterGroup)||void 0===o?void 0:o.length)return;r=this.getDataPath(t.data)}else(r=i.map((function(e){return s.valueService.getKeyForNode(e,t)}))).push(this.getValue(t));r&&(r=r.map((function(t){return c.toStringOrNull(c.makeNull(t))}))),!e&&this.groupAllowUnbalanced&&(null==r?void 0:r.some((function(t){return null==t})))&&(r=r.filter((function(t){return null!=t}))),n(this.createKey(r),r)},t.prototype.getValue=function(t){return this.filterParams.getValue(t)},t.prototype.extractExistingFormattedKeys=function(t){var e=this;if(!t)return null;var i=new Map;return t.forEach((function(t,n){i.set(e.caseFormat(n),n)})),i},t}(),MD=function(){function t(){}return t.SELECT_ALL="__AG_SELECT_ALL__",t.ADD_SELECTION_TO_FILTER="__AG_ADD_SELECTION_TO_FILTER__",t}(),RD=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PD=function(){function t(t,e,i,n){this.valueFormatterService=t,this.valueFormatter=e,this.formatter=i,this.column=n,this.displayedKeys=[]}return t.prototype.updateDisplayedValuesToAllAvailable=function(t,e,i){this.displayedKeys=Array.from(i)},t.prototype.updateDisplayedValuesToMatchMiniFilter=function(t,e,i,n,o){var r,s;this.displayedKeys=[];try{for(var a=RD(i),l=a.next();!l.done;l=a.next()){var c=l.value;if(null==c)o&&this.displayedKeys.push(c);else{var d=t(c),u=this.valueFormatterService.formatValue(this.column,null,d,this.valueFormatter,!1);n(this.formatter(u))&&this.displayedKeys.push(c)}}}catch(t){r={error:t}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(r)throw r.error}}},t.prototype.getDisplayedValueCount=function(){return this.displayedKeys.length},t.prototype.getDisplayedItem=function(t){return this.displayedKeys[t]},t.prototype.getSelectAllItem=function(){return MD.SELECT_ALL},t.prototype.getAddSelectionToFilterItem=function(){return MD.ADD_SELECTION_TO_FILTER},t.prototype.getDisplayedKeys=function(){return this.displayedKeys},t.prototype.forEachDisplayedKey=function(t){this.displayedKeys.forEach(t)},t.prototype.someDisplayedKey=function(t){return this.displayedKeys.some(t)},t.prototype.hasGroups=function(){return!1},t.prototype.refresh=function(){},t}(),ND=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},LD=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},ID=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FD=function(){function t(t,e,i,n){this.formatter=t,this.treeListPathGetter=e,this.treeListFormatter=i,this.treeDataOrGrouping=n,this.allDisplayedItemsTree=[],this.activeDisplayedItemsFlat=[],this.selectAllItem={depth:0,filterPasses:!0,available:!0,treeKey:MD.SELECT_ALL,children:this.allDisplayedItemsTree,expanded:!0,key:MD.SELECT_ALL,parentTreeKeys:[]},this.addSelectionToFilterItem={depth:0,filterPasses:!0,available:!0,treeKey:MD.ADD_SELECTION_TO_FILTER,expanded:!0,key:MD.ADD_SELECTION_TO_FILTER,parentTreeKeys:[]}}return t.prototype.updateDisplayedValuesToAllAvailable=function(t,e,i,n){"reload"===n?this.generateItemTree(t,e,i):"otherFilter"===n?(this.updateAvailable(i),this.updateExpandAll()):"miniFilter"===n&&(this.resetFilter(),this.updateExpandAll()),this.flattenItems()},t.prototype.updateDisplayedValuesToMatchMiniFilter=function(t,e,i,n,o,r){"reload"===r?this.generateItemTree(t,e,i):"otherFilter"===r&&this.updateAvailable(i),this.updateFilter(n,o),this.updateExpandAll(),this.flattenItems()},t.prototype.generateItemTree=function(t,e,i){var n,o,r;this.allDisplayedItemsTree=[],this.groupsExist=!1;var s=this.getTreeListPathGetter(t,i),a=function(e){var n=t(e),o=null!==(r=s(n))&&void 0!==r?r:[null];o.length>1&&(l.groupsExist=!0);var a,c=i.has(e),d=l.allDisplayedItemsTree,u=[];o.forEach((function(t,i){d||(d=[],a.children=d),(a=d.find((function(e){var i;return(null===(i=e.treeKey)||void 0===i?void 0:i.toUpperCase())===(null==t?void 0:t.toUpperCase())})))||(a={treeKey:t,depth:i,filterPasses:!0,expanded:!1,available:c,parentTreeKeys:u},i===o.length-1&&(a.key=e),d.push(a)),d=a.children,u=LD(LD([],ND(u),!1),[t],!1)}))},l=this;try{for(var c=ID(e),d=c.next();!d.done;d=c.next()){a(d.value)}}catch(t){n={error:t}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}this.updateAvailable(i),this.selectAllItem.children=this.allDisplayedItemsTree,this.selectAllItem.expanded=!1},t.prototype.getTreeListPathGetter=function(e,i){var n,o;if(this.treeListPathGetter)return this.treeListPathGetter;if(this.treeDataOrGrouping)return function(t){return t};var r=!1;try{for(var s=ID(i),a=s.next();!a.done;a=s.next()){var l=e(a.value);if(l instanceof Date){r=!0;break}if(null!=l)break}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return r?t.DATE_TREE_LIST_PATH_GETTER:(c.warnOnce("property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date."),function(t){return[String(t)]})},t.prototype.flattenItems=function(){var t=this;this.activeDisplayedItemsFlat=[];var e=function(i){i.forEach((function(i){i.filterPasses&&i.available&&(t.activeDisplayedItemsFlat.push(i),i.children&&i.expanded&&e(i.children))}))};e(this.allDisplayedItemsTree)},t.prototype.resetFilter=function(){var t=function(e){e.children&&e.children.forEach((function(e){t(e)})),e.filterPasses=!0};this.allDisplayedItemsTree.forEach((function(e){return t(e)}))},t.prototype.updateFilter=function(t,e){var i=this,n=function(n){return!!n.available&&(null==n.treeKey?e:t(i.formatter(i.treeListFormatter?i.treeListFormatter(n.treeKey,n.depth,n.parentTreeKeys):n.treeKey)))};this.allDisplayedItemsTree.forEach((function(t){return i.recursiveItemCheck(t,!1,n,"filterPasses")}))},t.prototype.getDisplayedValueCount=function(){return this.activeDisplayedItemsFlat.length},t.prototype.getDisplayedItem=function(t){return this.activeDisplayedItemsFlat[t]},t.prototype.getSelectAllItem=function(){return this.selectAllItem},t.prototype.getAddSelectionToFilterItem=function(){return this.addSelectionToFilterItem},t.prototype.getDisplayedKeys=function(){var t=[];return this.forEachDisplayedKey((function(e){return t.push(e)})),t},t.prototype.forEachDisplayedKey=function(t){var e=function(i,n){i.children?i.expanded&&n||i.children.forEach((function(t){t.filterPasses&&e(t,!1)})):t(i.key)};this.activeDisplayedItemsFlat.forEach((function(t){return e(t,!0)}))},t.prototype.someDisplayedKey=function(t){var e=function(i,n){return i.children?(!i.expanded||!n)&&i.children.some((function(t){return!!t.filterPasses&&e(t,!1)})):t(i.key)};return this.activeDisplayedItemsFlat.some((function(t){return e(t,!0)}))},t.prototype.hasGroups=function(){return this.groupsExist},t.prototype.refresh=function(){this.updateExpandAll(),this.flattenItems()},t.prototype.updateExpandAll=function(){var t=function(e,i,n){var o,r;try{for(var s=ID(e),a=s.next();!a.done;a=s.next()){var l=a.value;if(l.filterPasses&&l.available&&l.children){if(i=i||!!l.expanded,n=n||!l.expanded,i&&n)return;var c=t(l.children,i,n);if(void 0===c)return;c?i=!0:n=!0}}}catch(t){o={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}return i&&n?void 0:i},e=this.getSelectAllItem();e.expanded=t(e.children,!1,!1)},t.prototype.recursiveItemCheck=function(t,e,i,n){var o=this,r=!1;t.children&&t.children.forEach((function(s){var a=o.recursiveItemCheck(s,e||i(t),i,n);r=r||a}));var s=e||r||i(t);return t[n]=s,s},t.prototype.updateAvailable=function(t){var e=this,i=function(e){return t.has(e.key)};this.allDisplayedItemsTree.forEach((function(t){return e.recursiveItemCheck(t,!1,i,"available")}))},t.DATE_TREE_LIST_PATH_GETTER=function(t){return t?[String(t.getFullYear()),String(t.getMonth()+1),String(t.getDate())]:null},t}(),_D=function(){function t(t){var e=t.caseFormat;this.filteringKeys=null,this.filteringKeysCaseFormatted=null,this.hasNoAppliedFilteringKeys=!1,this.caseFormat=e}return t.prototype.allFilteringKeys=function(){return this.filteringKeys},t.prototype.allFilteringKeysCaseFormatted=function(){return this.filteringKeysCaseFormatted},t.prototype.noAppliedFilteringKeys=function(){return this.hasNoAppliedFilteringKeys},t.prototype.setFilteringKeys=function(t){var e=this;this.filteringKeys=new Set(t),this.hasNoAppliedFilteringKeys=!this.filteringKeys||0===this.filteringKeys.size,this.filteringKeysCaseFormatted=new Set,this.filteringKeys.forEach((function(t){return e.filteringKeysCaseFormatted.add(e.caseFormat(t))}))},t.prototype.addFilteringKey=function(t){null==this.filteringKeys&&(this.filteringKeys=new Set,this.filteringKeysCaseFormatted=new Set),this.filteringKeys.add(t),this.filteringKeysCaseFormatted.add(this.caseFormat(t)),this.hasNoAppliedFilteringKeys&&(this.hasNoAppliedFilteringKeys=!1)},t.prototype.hasCaseFormattedFilteringKey=function(t){return this.filteringKeysCaseFormatted.has(this.caseFormat(t))},t.prototype.hasFilteringKey=function(t){return this.filteringKeys.has(t)},t.prototype.reset=function(){this.filteringKeys=null,this.filteringKeysCaseFormatted=null,this.hasNoAppliedFilteringKeys=!1},t}(),GD=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},BD=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};!function(t){t[t.PROVIDED_LIST=0]="PROVIDED_LIST",t[t.PROVIDED_CALLBACK=1]="PROVIDED_CALLBACK",t[t.TAKEN_FROM_GRID_VALUES=2]="TAKEN_FROM_GRID_VALUES"}(OE||(OE={}));var VD=function(){function t(t){var e,i=this;this.localEventService=new D,this.miniFilterText=null,this.addCurrentSelectionToFilter=!1,this.providedValues=null,this.allValues=new Map,this.availableKeys=new Set,this.selectedKeys=new Set,this.initialised=!1;var n=t.usingComplexObjects,o=t.columnModel,r=t.valueService,s=t.treeDataTreeList,a=t.groupingTreeList,l=t.filterParams,d=t.gridOptionsService,u=t.valueFormatterService,h=t.valueFormatter,p=t.addManagedListener,f=l.column,g=l.colDef,v=l.textFormatter,y=l.doesRowPassOtherFilter,m=l.suppressSorting,b=l.comparator,S=l.rowModel,x=l.values,C=l.caseSensitive,w=l.convertValuesToStrings,E=l.treeList,O=l.treeListPathGetter,A=l.treeListFormatter;this.filterParams=l,this.gridOptionsService=d,this.setIsLoading=t.setIsLoading,this.translate=t.translate,this.caseFormat=t.caseFormat,this.createKey=t.createKey,this.usingComplexObjects=!!t.usingComplexObjects,this.formatter=v||xt.DEFAULT_FORMATTER,this.doesRowPassOtherFilters=y,this.suppressSorting=m||!1,this.convertValuesToStrings=!!w,this.filteringKeys=new _D({caseFormat:this.caseFormat});var T=null!=b?b:g.comparator,k=!!s||!!a;this.compareByValue=!!(n&&T||k||E&&!O),this.entryComparator=k&&!T?this.createTreeDataOrGroupingComparator():!E||O||T?function(t,e){var i=GD(t,2);i[0];var n=i[1],o=GD(e,2);o[0];var r=o[1];return T(n,r)}:function(t,e){var i=GD(t,2);i[0];var n=i[1],o=GD(e,2);o[0];var r=o[1];return c.defaultComparator(n,r)},this.keyComparator=null!==(e=T)&&void 0!==e?e:c.defaultComparator,this.caseSensitive=!!C;var M=d.get("getDataPath"),R=d.get("groupAllowUnbalanced");"clientSide"===S.getType()&&(this.clientSideValuesExtractor=new kD(S,this.filterParams,this.createKey,this.caseFormat,o,r,k,!!s,M,R,p)),null==x?this.valuesType=OE.TAKEN_FROM_GRID_VALUES:(this.valuesType=Array.isArray(x)?OE.PROVIDED_LIST:OE.PROVIDED_CALLBACK,this.providedValues=x),this.displayValueModel=E?new FD(this.formatter,O,A,s||a):new PD(u,h,this.formatter,f),this.updateAllValues().then((function(t){return i.resetSelectionState(t||[])}))}return t.prototype.addEventListener=function(t,e,i){this.localEventService.addEventListener(t,e,i)},t.prototype.removeEventListener=function(t,e,i){this.localEventService.removeEventListener(t,e,i)},t.prototype.updateOnParamsChange=function(t){var e=this;return new G((function(i){var n=t.values,o=t.textFormatter,r=t.suppressSorting,s=e.providedValues,a=e.suppressSorting;if(e.filterParams=t,e.formatter=o||xt.DEFAULT_FORMATTER,e.suppressSorting=r||!1,e.providedValues=null!=n?n:null,e.providedValues!==s||e.suppressSorting!==a){if(n&&0!==n.length){var l=Array.isArray(n)&&n.length>0&&"function"==typeof n[0];e.valuesType=l?OE.PROVIDED_CALLBACK:OE.PROVIDED_LIST}else e.valuesType=OE.TAKEN_FROM_GRID_VALUES,e.providedValues=null;var c=e.getModel();e.updateAllValues().then((function(t){e.setModel(c).then((function(){return i()}))}))}else i()}))},t.prototype.refreshValues=function(){var t=this;return new G((function(e){t.allValuesPromise.then((function(){var i=t.getModel();t.updateAllValues(),t.setModel(i).then((function(){return e()}))}))}))},t.prototype.overrideValues=function(t){var e=this;return new G((function(i){e.allValuesPromise.then((function(){e.valuesType=OE.PROVIDED_LIST,e.providedValues=t,e.refreshValues().then((function(){return i()}))}))}))},t.prototype.refreshAfterAnyFilterChanged=function(){var t=this;return this.showAvailableOnly()?this.allValuesPromise.then((function(e){return t.updateAvailableKeys(null!=e?e:[],"otherFilter"),!0})):G.resolve(!1)},t.prototype.isInitialised=function(){return this.initialised},t.prototype.updateAllValues=function(){var t=this;return this.allValuesPromise=new G((function(e){switch(t.valuesType){case OE.TAKEN_FROM_GRID_VALUES:t.getValuesFromRowsAsync(!1).then((function(i){return e(t.processAllValues(i))}));break;case OE.PROVIDED_LIST:e(t.processAllValues(t.uniqueValues(t.validateProvidedValues(t.providedValues))));break;case OE.PROVIDED_CALLBACK:t.setIsLoading(!0);var i=t.providedValues,n=t.filterParams,o=n.columnApi,r=n.api,s=n.column,a={success:function(i){t.setIsLoading(!1),e(t.processAllValues(t.uniqueValues(t.validateProvidedValues(i))))},colDef:n.colDef,column:s,columnApi:o,api:r,context:t.gridOptionsService.context};window.setTimeout((function(){return i(a)}),0);break;default:throw new Error("Unrecognised valuesType")}})),this.allValuesPromise.then((function(e){return t.updateAvailableKeys(e||[],"reload")})).then((function(){return t.initialised=!0})),this.allValuesPromise},t.prototype.processAllValues=function(t){var e=this.sortKeys(t);return this.allValues=null!=t?t:new Map,e},t.prototype.validateProvidedValues=function(t){if(this.usingComplexObjects&&(null==t?void 0:t.length)){var e=t[0];if(e&&"object"!=typeof e&&"function"!=typeof e)null==this.createKey(e)?c.warnOnce("Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects or set convertValuesToStrings=true in the filterParams. See https://www.ag-grid.com/javascript-data-grid/filter-set-filter-list/#filter-value-types"):c.warnOnce("Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects or enable convertValuesToStrings?")}return t},t.prototype.setValuesType=function(t){this.valuesType=t},t.prototype.getValuesType=function(){return this.valuesType},t.prototype.isKeyAvailable=function(t){return this.availableKeys.has(t)},t.prototype.showAvailableOnly=function(){return this.valuesType===OE.TAKEN_FROM_GRID_VALUES},t.prototype.updateAvailableKeys=function(e,i){var n=this.showAvailableOnly()?this.sortKeys(this.getValuesFromRows(!0)):e;this.availableKeys=new Set(n),this.localEventService.dispatchEvent({type:t.EVENT_AVAILABLE_VALUES_CHANGED}),this.updateDisplayedValues(i,e)},t.prototype.sortKeys=function(t){var e,i=null!=t?t:new Map;return this.suppressSorting?Array.from(i.keys()):(e=this.compareByValue?Array.from(i.entries()).sort(this.entryComparator).map((function(t){return GD(t,1)[0]})):Array.from(i.keys()).sort(this.keyComparator),this.filterParams.excelMode&&i.has(null)&&(e=e.filter((function(t){return null!=t}))).push(null),e)},t.prototype.getParamsForValuesFromRows=function(t){var e=this;if(void 0===t&&(t=!1),!this.clientSideValuesExtractor)return c.doOnce((function(){console.error("AG Grid: Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values")}),"setFilterValueNotCSRM"),null;return{predicate:function(i){return!t||e.doesRowPassOtherFilters(i)},existingValues:t&&!this.caseSensitive?this.allValues:void 0}},t.prototype.getValuesFromRows=function(t){void 0===t&&(t=!1);var e=this.getParamsForValuesFromRows(t);return e?this.clientSideValuesExtractor.extractUniqueValues(e.predicate,e.existingValues):null},t.prototype.getValuesFromRowsAsync=function(t){void 0===t&&(t=!1);var e=this.getParamsForValuesFromRows(t);return e?this.clientSideValuesExtractor.extractUniqueValuesAsync(e.predicate,e.existingValues):G.resolve(null)},t.prototype.setMiniFilter=function(t){return t=c.makeNull(t),this.miniFilterText!==t&&(null===t&&this.setAddCurrentSelectionToFilter(!1),this.miniFilterText=t,this.updateDisplayedValues("miniFilter"),!0)},t.prototype.getMiniFilter=function(){return this.miniFilterText},t.prototype.updateDisplayedValues=function(t,e){var i=this;if("expansion"!==t)if(null!=this.miniFilterText){var n=this.caseFormat(this.formatter(this.miniFilterText)||""),o=function(t){return null!=t&&i.caseFormat(t).indexOf(n)>=0},r=!!this.filterParams.excelMode&&o(this.translate("blanks"));this.displayValueModel.updateDisplayedValuesToMatchMiniFilter((function(t){return i.getValue(t)}),e,this.availableKeys,o,r,t)}else this.displayValueModel.updateDisplayedValuesToAllAvailable((function(t){return i.getValue(t)}),e,this.availableKeys,t);else this.displayValueModel.refresh()},t.prototype.getDisplayedValueCount=function(){return this.displayValueModel.getDisplayedValueCount()},t.prototype.getDisplayedItem=function(t){return this.displayValueModel.getDisplayedItem(t)},t.prototype.getSelectAllItem=function(){return this.displayValueModel.getSelectAllItem()},t.prototype.getAddSelectionToFilterItem=function(){return this.displayValueModel.getAddSelectionToFilterItem()},t.prototype.hasSelections=function(){return this.filterParams.defaultToNothingSelected?this.selectedKeys.size>0:this.allValues.size!==this.selectedKeys.size},t.prototype.getKeys=function(){return Array.from(this.allValues.keys())},t.prototype.getValues=function(){return Array.from(this.allValues.values())},t.prototype.getValue=function(t){return this.allValues.get(t)},t.prototype.setAddCurrentSelectionToFilter=function(t){this.addCurrentSelectionToFilter=t},t.prototype.isInWindowsExcelMode=function(){return"windows"===this.filterParams.excelMode},t.prototype.isAddCurrentSelectionToFilterChecked=function(){return this.isInWindowsExcelMode()&&this.addCurrentSelectionToFilter},t.prototype.showAddCurrentSelectionToFilter=function(){return this.isInWindowsExcelMode()&&c.exists(this.miniFilterText)&&this.miniFilterText.length>0},t.prototype.selectAllMatchingMiniFilter=function(t){var e=this;void 0===t&&(t=!1),null==this.miniFilterText?this.selectedKeys=new Set(this.allValues.keys()):(t&&this.selectedKeys.clear(),this.displayValueModel.forEachDisplayedKey((function(t){return e.selectedKeys.add(t)})))},t.prototype.deselectAllMatchingMiniFilter=function(){var t=this;null==this.miniFilterText?this.selectedKeys.clear():this.displayValueModel.forEachDisplayedKey((function(e){return t.selectedKeys.delete(e)}))},t.prototype.selectKey=function(t){this.selectedKeys.add(t)},t.prototype.deselectKey=function(t){this.filterParams.excelMode&&this.isEverythingVisibleSelected()&&this.resetSelectionState(this.displayValueModel.getDisplayedKeys()),this.selectedKeys.delete(t)},t.prototype.isKeySelected=function(t){return this.selectedKeys.has(t)},t.prototype.isEverythingVisibleSelected=function(){var t=this;return!this.displayValueModel.someDisplayedKey((function(e){return!t.isKeySelected(e)}))},t.prototype.isNothingVisibleSelected=function(){var t=this;return!this.displayValueModel.someDisplayedKey((function(e){return t.isKeySelected(e)}))},t.prototype.getModel=function(){if(!this.hasSelections())return null;var t=this.isAddCurrentSelectionToFilterChecked()?this.filteringKeys.allFilteringKeys():null;if(t&&t.size>0){if(this.selectedKeys){var e=new Set(BD(BD([],GD(Array.from(t)),!1),GD(Array.from(this.selectedKeys).filter((function(e){return!t.has(e)}))),!1));return Array.from(e)}return Array.from(t)}return Array.from(this.selectedKeys)},t.prototype.setModel=function(t){var e=this;return this.allValuesPromise.then((function(i){if(null==t)e.resetSelectionState(null!=i?i:[]);else{e.selectedKeys.clear();var n=new Map;e.allValues.forEach((function(t,i){n.set(e.caseFormat(i),i)})),t.forEach((function(t){var i=e.caseFormat(c.makeNull(t)),o=n.get(i);void 0!==o&&e.selectKey(o)}))}}))},t.prototype.uniqueValues=function(t){var e=this,i=new Map,n=new Set;return(null!=t?t:[]).forEach((function(t){var o=c.makeNull(t),r=e.convertAndGetKey(o),s=e.caseFormat(r);n.has(s)||(n.add(s),i.set(r,o))})),i},t.prototype.convertAndGetKey=function(t){return this.convertValuesToStrings?t:this.createKey(t)},t.prototype.resetSelectionState=function(t){this.filterParams.defaultToNothingSelected?this.selectedKeys.clear():this.selectedKeys=new Set(t)},t.prototype.hasGroups=function(){return this.displayValueModel.hasGroups()},t.prototype.createTreeDataOrGroupingComparator=function(){return function(t,e){var i=GD(t,2);i[0];var n=i[1],o=GD(e,2);o[0];var r=o[1];if(null==n)return null==r?0:-1;if(null==r)return 1;for(var s=0;s<n.length;s++){if(s>=r.length)return 1;var a=c.defaultComparator(n[s],r[s]);if(0!==a)return a}return 0}},t.prototype.setAppliedModelKeys=function(t){this.filteringKeys.setFilteringKeys(t)},t.prototype.addToAppliedModelKeys=function(t){this.filteringKeys.addFilteringKey(t)},t.prototype.getAppliedModelKeys=function(){return this.filteringKeys.allFilteringKeys()},t.prototype.getCaseFormattedAppliedModelKeys=function(){return this.filteringKeys.allFilteringKeysCaseFormatted()},t.prototype.hasAppliedModelKey=function(t){return this.filteringKeys.hasCaseFormattedFilteringKey(t)},t.prototype.hasAnyAppliedModelKey=function(){return!this.filteringKeys.noAppliedFilteringKeys()},t.EVENT_AVAILABLE_VALUES_CHANGED="availableValuesChanged",t}(),jD=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),WD=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},zD=function(t){function e(i){var n,o=this;return(o=t.call(this,i.isGroup?e.GROUP_TEMPLATE:e.TEMPLATE)||this).focusWrapper=i.focusWrapper,o.value=i.value,o.params=i.params,o.translate=i.translate,o.valueFormatter=i.valueFormatter,o.item=i.item,o.isSelected=i.isSelected,o.isTree=i.isTree,o.depth=null!==(n=i.depth)&&void 0!==n?n:0,o.isGroup=i.isGroup,o.groupsExist=i.groupsExist,o.isExpanded=i.isExpanded,o.hasIndeterminateExpandState=i.hasIndeterminateExpandState,o}return jD(e,t),e.prototype.init=function(){var t=this;this.addDestroyFunc((function(){var e;return null===(e=t.destroyCellRendererComponent)||void 0===e?void 0:e.call(t)})),this.render(),this.eCheckbox.setLabelEllipsis(!0).setValue(this.isSelected,!0).setDisabled(!!this.params.readOnly).getInputElement().setAttribute("tabindex","-1"),this.refreshVariableAriaLabels(),this.isTree&&(this.depth>0&&this.addCssClass("ag-set-filter-indent-"+this.depth),this.isGroup?this.setupExpansion():this.groupsExist&&this.addCssClass("ag-set-filter-add-group-indent"),c.setAriaLevel(this.getAriaElement(),this.depth+1)),this.refreshAriaChecked(),this.params.readOnly||this.eCheckbox.onValueChange((function(e){return t.onCheckboxChanged(!!e)}))},e.prototype.getFocusableElement=function(){return this.focusWrapper},e.prototype.setupExpansion=function(){this.eGroupClosedIcon.appendChild(c.createIcon("setFilterGroupClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(c.createIcon("setFilterGroupOpen",this.gridOptionsService,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.hasIndeterminateExpandState&&(this.eGroupIndeterminateIcon.appendChild(c.createIcon("setFilterGroupIndeterminate",this.gridOptionsService,null)),this.addManagedListener(this.eGroupIndeterminateIcon,"click",this.onExpandOrContractClicked.bind(this))),this.setExpandedIcons(),this.refreshAriaExpanded()},e.prototype.onExpandOrContractClicked=function(){this.setExpanded(!this.isExpanded)},e.prototype.setExpanded=function(t,i){if(this.isGroup&&t!==this.isExpanded){this.isExpanded=t;var n={type:e.EVENT_EXPANDED_CHANGED,isExpanded:!!t,item:this.item};i||this.dispatchEvent(n),this.setExpandedIcons(),this.refreshAriaExpanded()}},e.prototype.setExpandedIcons=function(){c.setDisplayed(this.eGroupClosedIcon,this.hasIndeterminateExpandState?!1===this.isExpanded:!this.isExpanded),c.setDisplayed(this.eGroupOpenedIcon,!0===this.isExpanded),this.hasIndeterminateExpandState&&c.setDisplayed(this.eGroupIndeterminateIcon,void 0===this.isExpanded)},e.prototype.onCheckboxChanged=function(t){this.isSelected=t;var i={type:e.EVENT_SELECTION_CHANGED,isSelected:t,item:this.item};this.dispatchEvent(i),this.refreshVariableAriaLabels(),this.refreshAriaChecked()},e.prototype.toggleSelected=function(){this.params.readOnly||this.setSelected(!this.isSelected)},e.prototype.setSelected=function(t,e){this.isSelected=t,this.eCheckbox.setValue(t,e),this.refreshAriaChecked()},e.prototype.refreshVariableAriaLabels=function(){if(this.isTree){var t=this.localeService.getLocaleTextFunc(),e=this.eCheckbox.getValue(),i=void 0===e?t("ariaIndeterminate","indeterminate"):e?t("ariaVisible","visible"):t("ariaHidden","hidden"),n=t("ariaToggleVisibility","Press SPACE to toggle visibility");c.setAriaLabelledBy(this.eCheckbox.getInputElement(),void 0),this.eCheckbox.setInputAriaLabel("".concat(n," (").concat(i,")"))}},e.prototype.setupFixedAriaLabels=function(t){if(this.isTree){var e=this.localeService.getLocaleTextFunc()("ariaFilterValue","Filter Value"),i=this.getAriaElement();c.setAriaLabel(i,"".concat(t," ").concat(e)),c.setAriaDescribedBy(i,this.eCheckbox.getInputElement().id)}},e.prototype.refreshAriaChecked=function(){var t=this.getAriaElement();c.setAriaChecked(t,this.eCheckbox.getValue())},e.prototype.refreshAriaExpanded=function(){c.setAriaExpanded(this.getAriaElement(),!!this.isExpanded)},e.prototype.refresh=function(t,e,i){var n,o;if(this.item=t,e!==this.isSelected&&this.setSelected(e,!0),this.setExpanded(i,!0),this.valueFunction){var r=this.valueFunction();this.setTooltipAndCellRendererParams(r,r),this.cellRendererComponent||this.renderCellWithoutCellRenderer()}if(this.cellRendererComponent&&!(null===(o=(n=this.cellRendererComponent).refresh)||void 0===o?void 0:o.call(n,this.cellRendererParams))){var s=this.cellRendererComponent;this.renderCell(),this.destroyBean(s)}},e.prototype.render=function(){var t=this.params.column,e=this.value,i=null;"function"==typeof e?(this.valueFunction=e,e=i=this.valueFunction()):i=this.isTree?c.toStringOrNull(e):this.getFormattedValue(t,e),this.setTooltipAndCellRendererParams(e,i),this.renderCell()},e.prototype.setTooltipAndCellRendererParams=function(t,e){if(this.params.showTooltips){var i=null!=e?e:c.toStringOrNull(t);this.setTooltip(i)}this.cellRendererParams={value:t,valueFormatted:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,colDef:this.params.colDef,column:this.params.column}},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="setFilterValue",e.colDef=this.getComponentHolder(),this.isTree&&(e.level=this.depth),e},e.prototype.getFormattedValue=function(t,e){return this.valueFormatterService.formatValue(t,null,e,this.valueFormatter,!1)},e.prototype.renderCell=function(){var t=this,e=this.userComponentFactory.getSetFilterCellRendererDetails(this.params,this.cellRendererParams),i=e?e.newAgStackInstance():void 0;null!=i?i.then((function(e){e&&(t.cellRendererComponent=e,t.eCheckbox.setLabel(e.getGui()),t.destroyCellRendererComponent=function(){return t.destroyBean(e)})})):this.renderCellWithoutCellRenderer()},e.prototype.renderCellWithoutCellRenderer=function(){var t,e=null!==(t=null==this.cellRendererParams.valueFormatted?this.cellRendererParams.value:this.cellRendererParams.valueFormatted)&&void 0!==t?t:this.translate("blanks");"string"!=typeof e&&(c.warnOnce("Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects, or set convertValuesToStrings=true in the filterParams. See ".concat(this.getFrameworkOverrides().getDocLink("filter-set-filter-list/#filter-value-types"))),e=""),this.eCheckbox.setLabel(e),this.setupFixedAriaLabels(e)},e.prototype.getComponentHolder=function(){return this.params.column.getColDef()},e.EVENT_SELECTION_CHANGED="selectionChanged",e.EVENT_EXPANDED_CHANGED="expandedChanged",e.GROUP_TEMPLATE='\n        <div class="ag-set-filter-item" aria-hidden="true">\n            <span class="ag-set-filter-group-icons">\n                <span class="ag-set-filter-group-closed-icon" ref="eGroupClosedIcon"></span>\n                <span class="ag-set-filter-group-opened-icon" ref="eGroupOpenedIcon"></span>\n                <span class="ag-set-filter-group-indeterminate-icon" ref="eGroupIndeterminateIcon"></span>\n            </span>\n            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>\n        </div>',e.TEMPLATE='\n        <div class="ag-set-filter-item">\n            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>\n        </div>',WD([n("valueFormatterService")],e.prototype,"valueFormatterService",void 0),WD([n("userComponentFactory")],e.prototype,"userComponentFactory",void 0),WD([o("eCheckbox")],e.prototype,"eCheckbox",void 0),WD([o("eGroupOpenedIcon")],e.prototype,"eGroupOpenedIcon",void 0),WD([o("eGroupClosedIcon")],e.prototype,"eGroupClosedIcon",void 0),WD([o("eGroupIndeterminateIcon")],e.prototype,"eGroupIndeterminateIcon",void 0),WD([r],e.prototype,"init",null),e}(s),UD={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",addCurrentSelectionToFilter:"Add current selection to filter",noMatches:"No matches."},HD=function(){function t(){}return t.prototype.getModelAsString=function(t,e){var i=(t||e.getModel()||{}).values,n=e.getValueModel();if(null==i||null==n)return"";var o=i.filter((function(t){return n.isKeyAvailable(t)})),r=o.length,s=o.slice(0,10).map((function(t){return e.getFormattedValue(t)}));return"(".concat(r,") ").concat(s.join(",")).concat(r>10?",...":"")},t}(),KD=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),YD=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},XD=function(t){function e(){var e=t.call(this,"setFilter")||this;return e.valueModel=null,e.setFilterParams=null,e.virtualList=null,e.caseSensitive=!1,e.convertValuesToStrings=!1,e.treeDataTreeList=!1,e.groupingTreeList=!1,e.hardRefreshVirtualList=!1,e.noValueFormatterSupplied=!1,e.filterModelFormatter=new HD,e.updateSetFilterOnParamsChange=function(t){var i;e.setFilterParams=t,e.convertValuesToStrings=!!t.convertValuesToStrings,e.caseSensitive=!!t.caseSensitive;var n=null!==(i=t.keyCreator)&&void 0!==i?i:t.colDef.keyCreator;e.setValueFormatter(t.valueFormatter,n,e.convertValuesToStrings,!!t.treeList,!!t.colDef.refData);var o=t.column.getId().startsWith(Ct);e.treeDataTreeList=e.gridOptionsService.get("treeData")&&!!t.treeList&&o,e.getDataPath=e.gridOptionsService.get("getDataPath"),e.groupingTreeList=!!e.columnModel.getRowGroupColumns().length&&!!t.treeList&&o,e.createKey=e.generateCreateKey(n,e.convertValuesToStrings,e.treeDataTreeList||e.groupingTreeList)},e}return KD(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this)},e.prototype.updateUiVisibility=function(){},e.prototype.createBodyTemplate=function(){return'\n            <div class="ag-set-filter">\n                <div ref="eFilterLoading" class="ag-filter-loading ag-hidden">'.concat(this.translateForSetFilter("loadingOoo"),'</div>\n                <ag-input-text-field class="ag-mini-filter" ref="eMiniFilter"></ag-input-text-field>\n                <div ref="eFilterNoMatches" class="ag-filter-no-matches ag-hidden">').concat(this.translateForSetFilter("noMatches"),'</div>\n                <div ref="eSetFilterList" class="ag-set-filter-list" role="presentation"></div>\n            </div>')},e.prototype.handleKeyDown=function(e){if(t.prototype.handleKeyDown.call(this,e),!e.defaultPrevented)switch(e.key){case d.SPACE:this.handleKeySpace(e);break;case d.ENTER:this.handleKeyEnter(e);break;case d.LEFT:this.handleKeyLeft(e);break;case d.RIGHT:this.handleKeyRight(e)}},e.prototype.handleKeySpace=function(t){var e;null===(e=this.getComponentForKeyEvent(t))||void 0===e||e.toggleSelected()},e.prototype.handleKeyEnter=function(t){if(this.setFilterParams){var e=this.setFilterParams||{},i=e.excelMode,n=e.readOnly;i&&!n&&(t.preventDefault(),this.onBtApply(!1,!1,t),"mac"===this.setFilterParams.excelMode&&this.eMiniFilter.getInputElement().select())}},e.prototype.handleKeyLeft=function(t){var e;null===(e=this.getComponentForKeyEvent(t))||void 0===e||e.setExpanded(!1)},e.prototype.handleKeyRight=function(t){var e;null===(e=this.getComponentForKeyEvent(t))||void 0===e||e.setExpanded(!0)},e.prototype.getComponentForKeyEvent=function(t){var e,i=this.gridOptionsService.getDocument();if(this.eSetFilterList.contains(i.activeElement)&&this.virtualList){var n=this.virtualList.getLastFocusedRow();if(null!=n){var o=this.virtualList.getComponentAt(n);if(null!=o)if(t.preventDefault(),!(null!==(e=this.setFilterParams)&&void 0!==e?e:{}).readOnly)return o}}},e.prototype.getCssIdentifier=function(){return"set-filter"},e.prototype.setModel=function(e){var i;return null==e&&null==(null===(i=this.valueModel)||void 0===i?void 0:i.getModel())?(this.setMiniFilter(null),G.resolve()):t.prototype.setModel.call(this,e)},e.prototype.refresh=function(e){var i,n,o,r=this;if(!t.prototype.refresh.call(this,e))return!1;return!["treeList","treeListFormatter","treeListPathGetter","keyCreator","convertValuesToStrings","caseSensitive","comparator","suppressSelectAll","excelMode"].some((function(t){var i;return e[t]!==(null===(i=r.setFilterParams)||void 0===i?void 0:i[t])}))&&(!this.haveColDefParamsChanged(e.colDef)&&(t.prototype.updateParams.call(this,e),this.updateSetFilterOnParamsChange(e),this.updateMiniFilter(),e.cellRenderer===(null===(i=this.setFilterParams)||void 0===i?void 0:i.cellRenderer)&&e.valueFormatter===(null===(n=this.setFilterParams)||void 0===n?void 0:n.valueFormatter)||this.checkAndRefreshVirtualList(),null===(o=this.valueModel)||void 0===o||o.updateOnParamsChange(e).then((function(){var t;(null===(t=r.valueModel)||void 0===t?void 0:t.hasSelections())&&r.refreshFilterValues()})),!0))},e.prototype.haveColDefParamsChanged=function(t){var e,i=null===(e=this.setFilterParams)||void 0===e?void 0:e.colDef;return["keyCreator","filterValueGetter"].some((function(e){return t[e]!==(null==i?void 0:i[e])}))},e.prototype.setModelAndRefresh=function(t){var e=this;return this.valueModel?this.valueModel.setModel(t).then((function(){return e.checkAndRefreshVirtualList()})):G.resolve()},e.prototype.resetUiToDefaults=function(){return this.setMiniFilter(null),this.setModelAndRefresh(null)},e.prototype.setModelIntoUi=function(t){this.setMiniFilter(null);var e=null==t?null:t.values;return this.setModelAndRefresh(e)},e.prototype.getModelFromUi=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var t=this.valueModel.getModel();return t?{values:t,filterType:this.getFilterType()}:null},e.prototype.getFilterType=function(){return"set"},e.prototype.getValueModel=function(){return this.valueModel},e.prototype.areModelsEqual=function(t,e){return null==t&&null==e||null!=t&&null!=e&&c.areEqual(t.values,e.values)},e.prototype.setParams=function(e){var i,n=this;this.applyExcelModeOptions(e),t.prototype.setParams.call(this,e),this.updateSetFilterOnParamsChange(e);var o=null!==(i=e.keyCreator)&&void 0!==i?i:e.colDef.keyCreator;this.valueModel=new VD({filterParams:e,setIsLoading:function(t){return n.setIsLoading(t)},valueFormatterService:this.valueFormatterService,translate:function(t){return n.translateForSetFilter(t)},caseFormat:function(t){return n.caseFormat(t)},createKey:this.createKey,valueFormatter:this.valueFormatter,usingComplexObjects:!!o,gridOptionsService:this.gridOptionsService,columnModel:this.columnModel,valueService:this.valueService,treeDataTreeList:this.treeDataTreeList,groupingTreeList:this.groupingTreeList,addManagedListener:function(t,e){return n.addManagedListener(n.eventService,t,e)}}),this.initialiseFilterBodyUi(),this.addEventListenersForDataChanges()},e.prototype.onAddCurrentSelectionToFilterChange=function(t){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setAddCurrentSelectionToFilter(t)},e.prototype.setValueFormatter=function(t,e,i,n,o){var r=t;if(!r){if(e&&!i&&!n)throw new Error("AG Grid: Must supply a Value Formatter in Set Filter params when using a Key Creator unless convertValuesToStrings is enabled");this.noValueFormatterSupplied=!0,o||(r=function(t){return c.toStringOrNull(t.value)})}this.valueFormatter=r},e.prototype.generateCreateKey=function(t,e,i){var n=this;if(i&&!t)throw new Error("AG Grid: Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.");return t?function(e,i){void 0===i&&(i=null);var o=n.getKeyCreatorParams(e,i);return c.makeNull(t(o))}:e?function(t){return Array.isArray(t)?t:c.makeNull(c.toStringOrNull(t))}:function(t){return c.makeNull(c.toStringOrNull(t))}},e.prototype.getFormattedValue=function(t){var e,i=this.valueModel.getValue(t);this.noValueFormatterSupplied&&(this.treeDataTreeList||this.groupingTreeList)&&Array.isArray(i)&&(i=c.last(i));var n=this.valueFormatterService.formatValue(this.setFilterParams.column,null,i,this.valueFormatter,!1);return null!==(e=null==n?c.toStringOrNull(i):n)&&void 0!==e?e:this.translateForSetFilter("blanks")},e.prototype.applyExcelModeOptions=function(t){"windows"===t.excelMode?(t.buttons||(t.buttons=["apply","cancel"]),null==t.closeOnApply&&(t.closeOnApply=!0)):"mac"===t.excelMode&&(t.buttons||(t.buttons=["reset"]),null==t.applyMiniFilterWhileTyping&&(t.applyMiniFilterWhileTyping=!0),null==t.debounceMs&&(t.debounceMs=500)),t.excelMode&&t.defaultToNothingSelected&&(t.defaultToNothingSelected=!1,c.warnOnce('The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.'))},e.prototype.addEventListenersForDataChanges=function(){var t=this;this.isValuesTakenFromGrid()&&(this.addManagedListener(this.eventService,l.EVENT_CELL_VALUE_CHANGED,(function(e){t.setFilterParams&&e.column===t.setFilterParams.column&&t.syncAfterDataChange()})),this.addManagedPropertyListeners(["treeData","getDataPath","groupAllowUnbalanced"],(function(){t.syncAfterDataChange()})))},e.prototype.syncAfterDataChange=function(){var t=this;if(!this.valueModel)throw new Error("Value model has not been created.");return this.valueModel.refreshValues().then((function(){t.checkAndRefreshVirtualList(),t.onBtApply(!1,!0)}))},e.prototype.setIsLoading=function(t){c.setDisplayed(this.eFilterLoading,t),t||(this.hardRefreshVirtualList=!0)},e.prototype.initialiseFilterBodyUi=function(){this.initVirtualList(),this.initMiniFilter()},e.prototype.initVirtualList=function(){var t=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.localeService.getLocaleTextFunc()("ariaFilterList","Filter List"),i=!!this.setFilterParams.treeList,n=this.virtualList=this.createBean(new S({cssIdentifier:"filter",ariaRole:i?"tree":"listbox",listName:e})),o=this.getRefElement("eSetFilterList");i&&o.classList.add("ag-set-filter-tree-list"),o&&o.appendChild(n.getGui());var r=this.setFilterParams.cellHeight;null!=r&&n.setRowHeight(r);n.setComponentCreator((function(e,n){return t.createSetListItem(e,i,n)}));var s;n.setComponentUpdater((function(e,i){return t.updateSetListItem(e,i)})),s=this.setFilterParams.suppressSelectAll?new qD(this.valueModel):new $D(this.valueModel,(function(){return t.isSelectAllSelected()})),i&&(s=new ZD(s)),n.setModel(s)},e.prototype.getSelectAllLabel=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var t=null!=this.valueModel.getMiniFilter()&&this.setFilterParams.excelMode?"selectAllSearchResults":"selectAll";return this.translateForSetFilter(t)},e.prototype.getAddSelectionToFilterLabel=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return this.translateForSetFilter("addCurrentSelectionToFilter")},e.prototype.createSetListItem=function(t,e,i){var n=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var o=this.valueModel.hasGroups(),r=this.isSelectedExpanded(t),s=r.isSelected,a=r.isExpanded,l=this.newSetListItemAttributes(t,e),c=l.value,d=l.depth,u=l.isGroup,h=l.hasIndeterminateExpandState,p=l.selectedListener,f=l.expandedListener,g={focusWrapper:i,value:c,params:this.setFilterParams,translate:function(t){return n.translateForSetFilter(t)},valueFormatter:this.valueFormatter,item:t,isSelected:s,isTree:e,depth:d,groupsExist:o,isGroup:u,isExpanded:a,hasIndeterminateExpandState:h},v=this.createBean(new zD(g));return v.addEventListener(zD.EVENT_SELECTION_CHANGED,p),f&&v.addEventListener(zD.EVENT_EXPANDED_CHANGED,f),v},e.prototype.newSetTreeItemAttributes=function(t,e){var i,n,o,r,s,a,l=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var c=this.valueModel.hasGroups();return t.key===MD.SELECT_ALL?{value:function(){return l.getSelectAllLabel()},isGroup:c,depth:t.depth,hasIndeterminateExpandState:!0,selectedListener:function(t){return l.onSelectAll(t.isSelected)},expandedListener:function(t){return l.onExpandAll(t.item,t.isExpanded)}}:t.key===MD.ADD_SELECTION_TO_FILTER?{value:function(){return l.getAddSelectionToFilterLabel()},depth:t.depth,isGroup:!1,hasIndeterminateExpandState:!1,selectedListener:function(t){l.onAddCurrentSelectionToFilterChange(t.isSelected)}}:t.children?{value:null!==(o=null===(n=(i=this.setFilterParams).treeListFormatter)||void 0===n?void 0:n.call(i,t.treeKey,t.depth,t.parentTreeKeys))&&void 0!==o?o:t.treeKey,depth:t.depth,isGroup:!0,selectedListener:function(t){return l.onGroupItemSelected(t.item,t.isSelected)},expandedListener:function(t){return l.onExpandedChanged(t.item,t.isExpanded)}}:{value:null!==(a=null===(s=(r=this.setFilterParams).treeListFormatter)||void 0===s?void 0:s.call(r,t.treeKey,t.depth,t.parentTreeKeys))&&void 0!==a?a:t.treeKey,depth:t.depth,selectedListener:function(t){return l.onItemSelected(t.item.key,t.isSelected)}}},e.prototype.newSetListItemAttributes=function(t,e){var i=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return this.isSetFilterModelTreeItem(t)?this.newSetTreeItemAttributes(t,e):t===MD.SELECT_ALL?{value:function(){return i.getSelectAllLabel()},selectedListener:function(t){return i.onSelectAll(t.isSelected)}}:t===MD.ADD_SELECTION_TO_FILTER?{value:function(){return i.getAddSelectionToFilterLabel()},selectedListener:function(t){i.onAddCurrentSelectionToFilterChange(t.isSelected)}}:{value:this.valueModel.getValue(t),selectedListener:function(t){return i.onItemSelected(t.item,t.isSelected)}}},e.prototype.updateSetListItem=function(t,e){var i=this.isSelectedExpanded(t),n=i.isSelected,o=i.isExpanded;e.refresh(t,n,o)},e.prototype.isSelectedExpanded=function(t){var e,i;return this.isSetFilterModelTreeItem(t)?(i=t.expanded,e=t.key===MD.SELECT_ALL?this.isSelectAllSelected():t.key===MD.ADD_SELECTION_TO_FILTER?this.valueModel.isAddCurrentSelectionToFilterChecked():t.children?this.areAllChildrenSelected(t):this.valueModel.isKeySelected(t.key)):e=t===MD.SELECT_ALL?this.isSelectAllSelected():t===MD.ADD_SELECTION_TO_FILTER?this.valueModel.isAddCurrentSelectionToFilterChecked():this.valueModel.isKeySelected(t),{isSelected:e,isExpanded:i}},e.prototype.isSetFilterModelTreeItem=function(t){return void 0!==(null==t?void 0:t.treeKey)},e.prototype.initMiniFilter=function(){var t=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.eMiniFilter,i=this.localeService.getLocaleTextFunc();e.setDisplayed(!this.setFilterParams.suppressMiniFilter),e.setValue(this.valueModel.getMiniFilter()),e.onValueChange((function(){return t.onMiniFilterInput()})),e.setInputAriaLabel(i("ariaSearchFilterValues","Search filter values")),this.addManagedListener(e.getInputElement(),"keydown",(function(e){return t.onMiniFilterKeyDown(e)}))},e.prototype.updateMiniFilter=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var t=this.eMiniFilter;t.isDisplayed()!==!this.setFilterParams.suppressMiniFilter&&t.setDisplayed(!this.setFilterParams.suppressMiniFilter);var e=this.valueModel.getMiniFilter();t.getValue()!==e&&t.setValue(e)},e.prototype.afterGuiAttached=function(e){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");t.prototype.afterGuiAttached.call(this,e),this.resetExpansion(),this.refreshVirtualList();var i=this.eMiniFilter;i.setInputPlaceholder(this.translateForSetFilter("searchOoo")),e&&e.suppressFocus||i.getFocusableElement().focus()},e.prototype.afterGuiDetached=function(){var e,i;t.prototype.afterGuiDetached.call(this),(null===(e=this.setFilterParams)||void 0===e?void 0:e.excelMode)&&this.resetMiniFilter();var n=this.getModel();!(null===(i=this.setFilterParams)||void 0===i?void 0:i.excelMode)&&this.areModelsEqual(n,this.getModelFromUi())||(this.resetUiToActiveModel(n),this.showOrHideResults())},e.prototype.applyModel=function(e){var i=this;if(void 0===e&&(e="api"),!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");this.setFilterParams.excelMode&&"rowDataUpdated"!==e&&this.valueModel.isEverythingVisibleSelected()&&this.valueModel.selectAllMatchingMiniFilter();var n=this.valueModel.showAddCurrentSelectionToFilter()&&this.valueModel.isAddCurrentSelectionToFilterChecked();if(n&&!this.getModel())return!1;var o=t.prototype.applyModel.call(this,e),r=this.getModel();return r?(n||this.valueModel.setAppliedModelKeys(new Set),r.values.forEach((function(t){i.valueModel.addToAppliedModelKeys(t)}))):n||this.valueModel.setAppliedModelKeys(null),o},e.prototype.isModelValid=function(t){return!this.setFilterParams||!this.setFilterParams.excelMode||(null==t||t.values.length>0)},e.prototype.doesFilterPass=function(t){var e=this;if(!this.setFilterParams||!this.valueModel||!this.valueModel.getCaseFormattedAppliedModelKeys())return!0;if(!this.valueModel.hasAnyAppliedModelKey())return!1;var i=t.node,n=t.data;if(this.treeDataTreeList)return this.doesFilterPassForTreeData(i,n);if(this.groupingTreeList)return this.doesFilterPassForGrouping(i);var o=this.getValueFromNode(i);return this.convertValuesToStrings?this.doesFilterPassForConvertValuesToString(i,o):null!=o&&Array.isArray(o)?0===o.length?this.valueModel.hasAppliedModelKey(null):o.some((function(t){return e.isInAppliedModel(e.createKey(t,i))})):this.isInAppliedModel(this.createKey(o,i))},e.prototype.doesFilterPassForConvertValuesToString=function(t,e){var i=this,n=this.createKey(e,t);return null!=n&&Array.isArray(n)?0===n.length?this.valueModel.hasAppliedModelKey(null):n.some((function(t){return i.isInAppliedModel(t)})):this.isInAppliedModel(n)},e.prototype.doesFilterPassForTreeData=function(t,e){var i;return!(null===(i=t.childrenAfterGroup)||void 0===i?void 0:i.length)&&this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(this.getDataPath(e))))},e.prototype.doesFilterPassForGrouping=function(t){var e=this,i=this.columnModel.getRowGroupColumns().map((function(i){return e.valueService.getKeyForNode(i,t)}));return i.push(this.getValueFromNode(t)),this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(i)))},e.prototype.checkMakeNullDataPath=function(t){return t&&(t=t.map((function(t){return c.toStringOrNull(c.makeNull(t))}))),(null==t?void 0:t.some((function(t){return null==t})))?null:t},e.prototype.isInAppliedModel=function(t){return this.valueModel.hasAppliedModelKey(t)},e.prototype.getValueFromNode=function(t){return this.setFilterParams.getValue(t)},e.prototype.getKeyCreatorParams=function(t,e){return void 0===e&&(e=null),{value:t,colDef:this.setFilterParams.colDef,column:this.setFilterParams.column,node:e,data:null==e?void 0:e.data,api:this.setFilterParams.api,columnApi:this.setFilterParams.columnApi,context:this.setFilterParams.context}},e.prototype.onNewRowsLoaded=function(){this.isValuesTakenFromGrid()&&this.syncAfterDataChange()},e.prototype.isValuesTakenFromGrid=function(){return!!this.valueModel&&this.valueModel.getValuesType()===OE.TAKEN_FROM_GRID_VALUES},e.prototype.setFilterValues=function(t){var e=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.overrideValues(t).then((function(){e.checkAndRefreshVirtualList(),e.onUiChanged()}))},e.prototype.resetFilterValues=function(){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setValuesType(OE.TAKEN_FROM_GRID_VALUES),this.syncAfterDataChange()},e.prototype.refreshFilterValues=function(){var t=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.isInitialised()&&this.valueModel.refreshValues().then((function(){t.checkAndRefreshVirtualList(),t.onUiChanged()}))},e.prototype.onAnyFilterChanged=function(){var t=this;setTimeout((function(){if(t.isAlive()){if(!t.valueModel)throw new Error("Value model has not been created.");t.valueModel.refreshAfterAnyFilterChanged().then((function(e){e&&(t.checkAndRefreshVirtualList(),t.showOrHideResults())}))}}),0)},e.prototype.onMiniFilterInput=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");if(this.valueModel.setMiniFilter(this.eMiniFilter.getValue())){var t=this.setFilterParams||{},e=t.applyMiniFilterWhileTyping;!t.readOnly&&e?this.filterOnAllVisibleValues(!1):this.updateUiAfterMiniFilterChange()}},e.prototype.updateUiAfterMiniFilterChange=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var t=this.setFilterParams||{},e=t.excelMode,i=t.readOnly;null==e||i?this.checkAndRefreshVirtualList():null==this.valueModel.getMiniFilter()?this.resetUiToActiveModel(this.getModel()):(this.valueModel.selectAllMatchingMiniFilter(!0),this.checkAndRefreshVirtualList(),this.onUiChanged()),this.showOrHideResults()},e.prototype.showOrHideResults=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var t=null!=this.valueModel.getMiniFilter()&&this.valueModel.getDisplayedValueCount()<1;c.setDisplayed(this.eNoMatches,t),c.setDisplayed(this.eSetFilterList,!t)},e.prototype.resetMiniFilter=function(){var t;this.eMiniFilter.setValue(null,!0),null===(t=this.valueModel)||void 0===t||t.setMiniFilter(null)},e.prototype.resetUiToActiveModel=function(t,e){var i=this;this.setModelAndRefresh(null==t?null:t.values).then((function(){i.onUiChanged(!1,"prevent"),null==e||e()}))},e.prototype.handleCancelEnd=function(e){this.setMiniFilter(null),t.prototype.handleCancelEnd.call(this,e)},e.prototype.onMiniFilterKeyDown=function(t){var e=this.setFilterParams||{},i=e.excelMode,n=e.readOnly;t.key!==d.ENTER||i||n||this.filterOnAllVisibleValues()},e.prototype.filterOnAllVisibleValues=function(t){void 0===t&&(t=!0);var e=(this.setFilterParams||{}).readOnly;if(!this.valueModel)throw new Error("Value model has not been created.");if(e)throw new Error("Unable to filter in readOnly mode.");this.valueModel.selectAllMatchingMiniFilter(!0),this.checkAndRefreshVirtualList(),this.onUiChanged(!1,t?"immediately":"debounce"),this.showOrHideResults()},e.prototype.focusRowIfAlive=function(t){var e=this;null!=t&&window.setTimeout((function(){if(!e.virtualList)throw new Error("Virtual list has not been created.");e.isAlive()&&e.virtualList.focusRow(t)}),0)},e.prototype.onSelectAll=function(t){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");t?this.valueModel.selectAllMatchingMiniFilter():this.valueModel.deselectAllMatchingMiniFilter(),this.refreshAfterSelection()},e.prototype.onGroupItemSelected=function(t,e){var i=this,n=function(t){t.children?t.children.forEach((function(t){return n(t)})):i.selectItem(t.key,e)};n(t),this.refreshAfterSelection()},e.prototype.onItemSelected=function(t,e){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");this.selectItem(t,e),this.refreshAfterSelection()},e.prototype.selectItem=function(t,e){e?this.valueModel.selectKey(t):this.valueModel.deselectKey(t)},e.prototype.onExpandAll=function(t,e){var i=function(t){t.filterPasses&&t.available&&t.children&&(t.children.forEach((function(t){return i(t)})),t.expanded=e)};i(t),this.refreshAfterExpansion()},e.prototype.onExpandedChanged=function(t,e){t.expanded=e,this.refreshAfterExpansion()},e.prototype.refreshAfterExpansion=function(){var t=this.virtualList.getLastFocusedRow();this.valueModel.updateDisplayedValues("expansion"),this.checkAndRefreshVirtualList(),this.focusRowIfAlive(t)},e.prototype.refreshAfterSelection=function(){var t=this.virtualList.getLastFocusedRow();this.checkAndRefreshVirtualList(),this.onUiChanged(),this.focusRowIfAlive(t)},e.prototype.setMiniFilter=function(t){this.eMiniFilter.setValue(t),this.onMiniFilterInput()},e.prototype.getMiniFilter=function(){return this.valueModel?this.valueModel.getMiniFilter():null},e.prototype.checkAndRefreshVirtualList=function(){if(!this.virtualList)throw new Error("Virtual list has not been created.");this.virtualList.refresh(!this.hardRefreshVirtualList),this.hardRefreshVirtualList&&(this.hardRefreshVirtualList=!1)},e.prototype.getFilterKeys=function(){return this.valueModel?this.valueModel.getKeys():[]},e.prototype.getFilterValues=function(){return this.valueModel?this.valueModel.getValues():[]},e.prototype.getValues=function(){return this.getFilterKeys()},e.prototype.refreshVirtualList=function(){this.setFilterParams&&this.setFilterParams.refreshValuesOnOpen?this.refreshFilterValues():this.checkAndRefreshVirtualList()},e.prototype.translateForSetFilter=function(t){return this.localeService.getLocaleTextFunc()(t,UD[t])},e.prototype.isSelectAllSelected=function(){if(!this.setFilterParams||!this.valueModel)return!1;if(this.setFilterParams.defaultToNothingSelected){if(this.valueModel.hasSelections()&&this.valueModel.isEverythingVisibleSelected())return!0;if(this.valueModel.isNothingVisibleSelected())return!1}else{if(this.valueModel.hasSelections()&&this.valueModel.isNothingVisibleSelected())return!1;if(this.valueModel.isEverythingVisibleSelected())return!0}},e.prototype.areAllChildrenSelected=function(t){var e=this,i=function(t){if(t.children){var n=!1,o=!1;return t.children.some((function(t){if(!t.filterPasses||!t.available)return!1;var e=i(t);return void 0===e||(e?n=!0:o=!0,n&&o)}))?void 0:n}return e.valueModel.isKeySelected(t.key)};return this.setFilterParams.defaultToNothingSelected?this.valueModel.hasSelections()&&i(t):i(t)},e.prototype.destroy=function(){null!=this.virtualList&&(this.virtualList.destroy(),this.virtualList=null),t.prototype.destroy.call(this)},e.prototype.caseFormat=function(t){return null==t||"string"!=typeof t||this.caseSensitive?t:t.toUpperCase()},e.prototype.resetExpansion=function(){var t,e;if(null===(t=this.setFilterParams)||void 0===t?void 0:t.treeList){var i=null===(e=this.valueModel)||void 0===e?void 0:e.getSelectAllItem();if(this.isSetFilterModelTreeItem(i)){var n=function(t){t.children&&(t.children.forEach((function(t){return n(t)})),t.expanded=!1)};n(i),this.valueModel.updateDisplayedValues("expansion")}}},e.prototype.getModelAsString=function(t){return this.filterModelFormatter.getModelAsString(t,this)},e.prototype.getPositionableElement=function(){return this.eSetFilterList},YD([o("eMiniFilter")],e.prototype,"eMiniFilter",void 0),YD([o("eFilterLoading")],e.prototype,"eFilterLoading",void 0),YD([o("eSetFilterList")],e.prototype,"eSetFilterList",void 0),YD([o("eFilterNoMatches")],e.prototype,"eNoMatches",void 0),YD([n("valueFormatterService")],e.prototype,"valueFormatterService",void 0),YD([n("columnModel")],e.prototype,"columnModel",void 0),YD([n("valueService")],e.prototype,"valueService",void 0),e}(ft),qD=function(){function t(t){this.model=t}return t.prototype.getRowCount=function(){return this.model.getDisplayedValueCount()},t.prototype.getRow=function(t){return this.model.getDisplayedItem(t)},t.prototype.areRowsEqual=function(t,e){return t===e},t}(),$D=function(){function t(t,e){this.model=t,this.isSelectAllSelected=e}return t.prototype.getRowCount=function(){var t=this.model.showAddCurrentSelectionToFilter()?2:1;return this.model.getDisplayedValueCount()+t},t.prototype.getRow=function(t){if(0===t)return this.model.getSelectAllItem();var e=this.model.showAddCurrentSelectionToFilter(),i=e?2:1;return 1===t&&e?this.model.getAddSelectionToFilterItem():this.model.getDisplayedItem(t-i)},t.prototype.areRowsEqual=function(t,e){return t===e},t}(),ZD=function(){function t(t){this.model=t}return t.prototype.getRowCount=function(){return this.model.getRowCount()},t.prototype.getRow=function(t){return this.model.getRow(t)},t.prototype.areRowsEqual=function(t,e){return null==t&&null==e||null!=t&&null!=e&&t.treeKey===e.treeKey&&t.depth===e.depth},t}(),JD=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),QD=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},tA=function(t){function e(){var e=t.call(this,'\n            <div class="ag-floating-filter-input ag-set-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')||this;return e.availableValuesListenerAdded=!1,e.filterModelFormatter=new HD,e}return JD(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.init=function(t){var e=this;this.params=t,this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",(function(){return e.params.showParentFilter()})),this.setParams(t)},e.prototype.setParams=function(t){var e=this.columnModel.getDisplayNameForColumn(t.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setInputAriaLabel("".concat(e," ").concat(i("ariaFilterInput","Filter Input")))},e.prototype.onParamsUpdated=function(t){this.params=t,this.setParams(t)},e.prototype.onParentModelChanged=function(t){this.updateFloatingFilterText(t)},e.prototype.parentSetFilterInstance=function(t){this.params.parentFilterInstance((function(e){if(!(e instanceof XD))throw new Error("AG Grid - SetFloatingFilter expects SetFilter as its parent");t(e)}))},e.prototype.addAvailableValuesListener=function(){var t=this;this.parentSetFilterInstance((function(e){var i=e.getValueModel();i&&t.addManagedListener(i,VD.EVENT_AVAILABLE_VALUES_CHANGED,(function(){return t.updateFloatingFilterText()}))})),this.availableValuesListenerAdded=!0},e.prototype.updateFloatingFilterText=function(t){var e=this;this.availableValuesListenerAdded||this.addAvailableValuesListener(),this.parentSetFilterInstance((function(i){e.eFloatingFilterText.setValue(e.filterModelFormatter.getModelAsString(t,i))}))},QD([o("eFloatingFilterText")],e.prototype,"eFloatingFilterText",void 0),QD([n("columnModel")],e.prototype,"columnModel",void 0),e}(s),eA={version:"31.0.1",moduleName:a.SetFilterModule,beans:[],userComponents:[{componentName:"agSetColumnFilter",componentClass:XD},{componentName:"agSetColumnFloatingFilter",componentClass:tA}],dependantModules:[Ft]},iA=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),nA=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},oA=function(t){function i(){var e=t.call(this)||this;return e.allComponents={},e}return iA(i,t),i.prototype.registerStatusPanel=function(t,e){this.allComponents[t]=e},i.prototype.unregisterStatusPanel=function(t){delete this.allComponents[t]},i.prototype.unregisterAllComponents=function(){this.allComponents={}},i.prototype.getStatusPanel=function(t){return this.allComponents[t]},i=nA([e("statusBarService")],i)}(i),rA=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sA=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},aA=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.compDestroyFunctions=[],i}return rA(e,t),e.prototype.postConstruct=function(){this.processStatusPanels(),this.addManagedPropertyListeners(["statusBar"],this.handleStatusBarChanged.bind(this))},e.prototype.processStatusPanels=function(){var t,e=null===(t=this.gridOptionsService.get("statusBar"))||void 0===t?void 0:t.statusPanels;if(e){var i=e.filter((function(t){return"left"===t.align}));this.createAndRenderComponents(i,this.eStatusBarLeft);var n=e.filter((function(t){return"center"===t.align}));this.createAndRenderComponents(n,this.eStatusBarCenter);var o=e.filter((function(t){return!t.align||"right"===t.align}));this.createAndRenderComponents(o,this.eStatusBarRight)}else this.setDisplayed(!1)},e.prototype.handleStatusBarChanged=function(){var t,e=null===(t=this.gridOptionsService.get("statusBar"))||void 0===t?void 0:t.statusPanels,i=Array.isArray(e)&&e.length>0;this.setDisplayed(i),this.resetStatusBar(),i&&this.processStatusPanels()},e.prototype.resetStatusBar=function(){this.eStatusBarLeft.innerHTML="",this.eStatusBarCenter.innerHTML="",this.eStatusBarRight.innerHTML="",this.destroyComponents(),this.statusBarService.unregisterAllComponents()},e.prototype.destroyComponents=function(){this.compDestroyFunctions.forEach((function(t){return t()})),this.compDestroyFunctions=[]},e.prototype.createAndRenderComponents=function(t,e){var i=this,n=[];t.forEach((function(t){var e=i.userComponentFactory.getStatusPanelCompDetails(t,{}).newAgStackInstance();e&&n.push({key:t.key||t.statusPanel,promise:e})})),G.all(n.map((function(t){return t.promise}))).then((function(){n.forEach((function(t){t.promise.then((function(n){var o=function(){i.getContext().destroyBean(n)};i.isAlive()?(i.statusBarService.registerStatusPanel(t.key,n),e.appendChild(n.getGui()),i.compDestroyFunctions.push(o)):o()}))}))}))},e.TEMPLATE='<div class="ag-status-bar">\n            <div ref="eStatusBarLeft" class="ag-status-bar-left" role="status"></div>\n            <div ref="eStatusBarCenter" class="ag-status-bar-center" role="status"></div>\n            <div ref="eStatusBarRight" class="ag-status-bar-right" role="status"></div>\n        </div>',sA([n("userComponentFactory")],e.prototype,"userComponentFactory",void 0),sA([n("statusBarService")],e.prototype,"statusBarService",void 0),sA([o("eStatusBarLeft")],e.prototype,"eStatusBarLeft",void 0),sA([o("eStatusBarCenter")],e.prototype,"eStatusBarCenter",void 0),sA([o("eStatusBarRight")],e.prototype,"eStatusBarRight",void 0),sA([r],e.prototype,"postConstruct",null),sA([N],e.prototype,"destroyComponents",null),e}(s),lA=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cA=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},dA=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return lA(e,t),e.prototype.setLabel=function(t,e){this.setDisplayed(!1);var i=this.localeService.getLocaleTextFunc();this.eLabel.innerHTML=i(t,e)},e.prototype.setValue=function(t){this.eValue.innerHTML=t},e.TEMPLATE='<div class="ag-status-name-value">\n            <span ref="eLabel"></span>:&nbsp;\n            <span ref="eValue" class="ag-status-name-value-value"></span>\n        </div>',cA([o("eLabel")],e.prototype,"eLabel",void 0),cA([o("eValue")],e.prototype,"eValue",void 0),e}(s),uA=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hA=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},pA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return uA(e,t),e.prototype.postConstruct=function(){"clientSide"===this.gridApi.getModel().getType()?(this.setLabel("totalAndFilteredRows","Rows"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-and-filtered-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,l.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()):console.warn("AG Grid: agTotalAndFilteredRowCountComponent should only be used with the client side row model.")},e.prototype.onDataChanged=function(){var t=this.localeService.getLocaleTextFunc(),e=t("thousandSeparator",","),i=t("decimalSeparator","."),n=c.formatNumberCommas(this.getFilteredRowCountValue(),e,i),o=c.formatNumberCommas(this.getTotalRowCount(),e,i);if(n===o)this.setValue(n);else{var r=this.localeService.getLocaleTextFunc();this.setValue("".concat(n," ").concat(r("of","of")," ").concat(o))}},e.prototype.getFilteredRowCountValue=function(){var t=0;return this.gridApi.forEachNodeAfterFilter((function(e){e.group||t++})),t},e.prototype.getTotalRowCount=function(){var t=0;return this.gridApi.forEachNode((function(e){e.group||t++})),t},e.prototype.init=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},hA([n("gridApi")],e.prototype,"gridApi",void 0),hA([r],e.prototype,"postConstruct",null),e}(dA),fA=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gA=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},vA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fA(e,t),e.prototype.postConstruct=function(){if(this.setLabel("filteredRows","Filtered"),"clientSide"===this.gridApi.getModel().getType()){this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-filtered-row-count"),this.setDisplayed(!0);var t=this.onDataChanged.bind(this);this.addManagedListener(this.eventService,l.EVENT_MODEL_UPDATED,t),t()}else console.warn("AG Grid: agFilteredRowCountComponent should only be used with the client side row model.")},e.prototype.onDataChanged=function(){var t=this.getTotalRowCountValue(),e=this.getFilteredRowCountValue(),i=this.localeService.getLocaleTextFunc(),n=i("thousandSeparator",","),o=i("decimalSeparator",".");this.setValue(c.formatNumberCommas(e,n,o)),this.setDisplayed(t!==e)},e.prototype.getTotalRowCountValue=function(){var t=0;return this.gridApi.forEachNode((function(e){return t+=1})),t},e.prototype.getFilteredRowCountValue=function(){var t=0;return this.gridApi.forEachNodeAfterFilter((function(e){e.group||(t+=1)})),t},e.prototype.init=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},gA([n("gridApi")],e.prototype,"gridApi",void 0),gA([r],e.prototype,"postConstruct",null),e}(dA),yA=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),mA=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},bA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yA(e,t),e.prototype.postConstruct=function(){this.setLabel("totalRows","Total Rows"),"clientSide"===this.gridApi.getModel().getType()?(this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,l.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()):console.warn("AG Grid: agTotalRowCountComponent should only be used with the client side row model.")},e.prototype.onDataChanged=function(){var t=this.localeService.getLocaleTextFunc(),e=t("thousandSeparator",","),i=t("decimalSeparator",".");this.setValue(c.formatNumberCommas(this.getRowCountValue(),e,i))},e.prototype.getRowCountValue=function(){var t=0;return this.gridApi.forEachLeafNode((function(e){return t+=1})),t},e.prototype.init=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},mA([n("gridApi")],e.prototype,"gridApi",void 0),mA([r],e.prototype,"postConstruct",null),e}(dA),SA=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xA=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},CA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return SA(e,t),e.prototype.postConstruct=function(){if(this.isValidRowModel()){this.setLabel("selectedRows","Selected"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-selected-row-count"),this.onRowSelectionChanged();var t=this.onRowSelectionChanged.bind(this);this.addManagedListener(this.eventService,l.EVENT_MODEL_UPDATED,t),this.addManagedListener(this.eventService,l.EVENT_SELECTION_CHANGED,t)}else console.warn("AG Grid: agSelectedRowCountComponent should only be used with the client and server side row model.")},e.prototype.isValidRowModel=function(){var t=this.gridApi.getModel().getType();return"clientSide"===t||"serverSide"===t},e.prototype.onRowSelectionChanged=function(){var t=this.selectionService.getSelectionCount();if(t<0)return this.setValue("?"),void this.setDisplayed(!0);var e=this.localeService.getLocaleTextFunc(),i=e("thousandSeparator",","),n=e("decimalSeparator",".");this.setValue(c.formatNumberCommas(t,i,n)),this.setDisplayed(t>0)},e.prototype.init=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},xA([n("gridApi")],e.prototype,"gridApi",void 0),xA([n("selectionService")],e.prototype,"selectionService",void 0),xA([r],e.prototype,"postConstruct",null),e}(dA),wA=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),EA=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},OA=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return wA(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.postConstruct=function(){this.isValidRowModel()?(this.avgAggregationComp.setLabel("avg","Average"),this.countAggregationComp.setLabel("count","Count"),this.minAggregationComp.setLabel("min","Min"),this.maxAggregationComp.setLabel("max","Max"),this.sumAggregationComp.setLabel("sum","Sum"),this.addManagedListener(this.eventService,l.EVENT_RANGE_SELECTION_CHANGED,this.onRangeSelectionChanged.bind(this)),this.addManagedListener(this.eventService,l.EVENT_MODEL_UPDATED,this.onRangeSelectionChanged.bind(this))):console.warn("AG Grid: agAggregationComponent should only be used with the client and server side row model.")},e.prototype.isValidRowModel=function(){var t=this.gridApi.getModel().getType();return"clientSide"===t||"serverSide"===t},e.prototype.init=function(){},e.prototype.setAggregationComponentValue=function(t,e,i){var n=this.getAggregationValueComponent(t);if(c.exists(n)&&n){var o=this.localeService.getLocaleTextFunc(),r=o("thousandSeparator",","),s=o("decimalSeparator",".");n.setValue(c.formatNumberTwoDecimalPlacesAndCommas(e,r,s)),n.setDisplayed(i)}},e.prototype.getAggregationValueComponent=function(t){var e="".concat(t,"AggregationComp"),i=null,n=this.gridOptionsService.get("statusBar"),o=c.exists(n)&&n?n.statusPanels.find((function(t){return"agAggregationComponent"===t.statusPanel})):null;return c.exists(o)&&o?(!c.exists(o.statusPanelParams)||c.exists(o.statusPanelParams)&&c.exists(o.statusPanelParams.aggFuncs)&&c.exists(o.statusPanelParams.aggFuncs.find((function(e){return e===t}))))&&(i=this[e]):i=this[e],i},e.prototype.onRangeSelectionChanged=function(){var t=this,e=this.rangeService?this.rangeService.getCellRanges():void 0,i=0,n=0,o=0,r=null,s=null,a={};e&&!c.missingOrEmpty(e)&&e.forEach((function(e){for(var l=t.rangeService.getRangeStartRow(e),d=t.rangeService.getRangeEndRow(e);;){if(c.missing(l)||!l||t.rowPositionUtils.before(d,l)||!l||!e.columns)break;e.columns.forEach((function(e){if(null!==l){var d=t.cellPositionUtils.createId({rowPinned:l.rowPinned,column:e,rowIndex:l.rowIndex});if(!a[d]){a[d]=!0;var u=t.rowRenderer.getRowNode(l);if(!c.missing(u)){var h=t.valueService.getValue(e,u);c.missing(h)||""===h||(n++,"object"==typeof h&&"value"in h&&""===(h=h.value)||("string"==typeof h&&(h=Number(h)),"number"!=typeof h||isNaN(h)||(i+=h,(null===s||h>s)&&(s=h),(null===r||h<r)&&(r=h),o++)))}}}})),l=t.cellNavigationService.getRowBelow(l)}}));var l=n>1,d=o>1;this.setAggregationComponentValue("count",n,l),this.setAggregationComponentValue("sum",i,d),this.setAggregationComponentValue("min",r,d),this.setAggregationComponentValue("max",s,d),this.setAggregationComponentValue("avg",i/o,d)},e.TEMPLATE='<div class="ag-status-panel ag-status-panel-aggregations">\n            <ag-name-value ref="avgAggregationComp"></ag-name-value>\n            <ag-name-value ref="countAggregationComp"></ag-name-value>\n            <ag-name-value ref="minAggregationComp"></ag-name-value>\n            <ag-name-value ref="maxAggregationComp"></ag-name-value>\n            <ag-name-value ref="sumAggregationComp"></ag-name-value>\n        </div>',EA([E("rangeService")],e.prototype,"rangeService",void 0),EA([n("valueService")],e.prototype,"valueService",void 0),EA([n("cellNavigationService")],e.prototype,"cellNavigationService",void 0),EA([n("rowRenderer")],e.prototype,"rowRenderer",void 0),EA([n("gridApi")],e.prototype,"gridApi",void 0),EA([n("cellPositionUtils")],e.prototype,"cellPositionUtils",void 0),EA([n("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),EA([o("sumAggregationComp")],e.prototype,"sumAggregationComp",void 0),EA([o("countAggregationComp")],e.prototype,"countAggregationComp",void 0),EA([o("minAggregationComp")],e.prototype,"minAggregationComp",void 0),EA([o("maxAggregationComp")],e.prototype,"maxAggregationComp",void 0),EA([o("avgAggregationComp")],e.prototype,"avgAggregationComp",void 0),EA([r],e.prototype,"postConstruct",null),e}(s),DA={version:"31.0.1",moduleName:a.StatusBarModule,beans:[oA],agStackComponents:[{componentName:"AgStatusBar",componentClass:aA},{componentName:"AgNameValue",componentClass:dA}],userComponents:[{componentName:"agAggregationComponent",componentClass:OA},{componentName:"agSelectedRowCountComponent",componentClass:CA},{componentName:"agTotalRowCountComponent",componentClass:bA},{componentName:"agFilteredRowCountComponent",componentClass:vA},{componentName:"agTotalAndFilteredRowCountComponent",componentClass:pA}],dependantModules:[Ft]},AA=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),TA=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},kA=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.firstRow=-1,e.lastRow=-1,e.rowCount=-1,e.rowNodesByIndex={},e}return AA(i,t),i.prototype.ensureRowHeightsValid=function(t,e,i,n){return!1},i.prototype.init=function(){var t=this;this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.addManagedListener(this.eventService,l.EVENT_VIEWPORT_CHANGED,this.onViewportChanged.bind(this)),this.addManagedPropertyListener("viewportDatasource",(function(){return t.updateDatasource()})),this.addManagedPropertyListener("rowHeight",(function(){t.rowHeight=t.gridOptionsService.getRowHeightAsNumber(),t.updateRowHeights()}))},i.prototype.start=function(){this.updateDatasource()},i.prototype.isLastRowIndexKnown=function(){return!0},i.prototype.destroyDatasource=function(){this.viewportDatasource&&(this.viewportDatasource.destroy&&this.viewportDatasource.destroy(),this.rowRenderer.datasourceChanged(),this.firstRow=-1,this.lastRow=-1)},i.prototype.updateDatasource=function(){var t=this.gridOptionsService.get("viewportDatasource");t&&this.setViewportDatasource(t)},i.prototype.getViewportRowModelPageSize=function(){return this.gridOptionsService.get("viewportRowModelPageSize")},i.prototype.getViewportRowModelBufferSize=function(){return this.gridOptionsService.get("viewportRowModelBufferSize")},i.prototype.calculateFirstRow=function(t){var e=this.getViewportRowModelBufferSize(),i=this.getViewportRowModelPageSize(),n=t-e;return n<0?0:Math.floor(n/i)*i},i.prototype.calculateLastRow=function(t){if(-1===t)return t;var e=this.getViewportRowModelBufferSize(),i=this.getViewportRowModelPageSize(),n=t+e,o=Math.ceil(n/i)*i,r=this.rowCount-1;return Math.min(o,r)},i.prototype.onViewportChanged=function(t){var e=this.calculateFirstRow(t.firstRow),i=this.calculateLastRow(t.lastRow);this.firstRow===e&&this.lastRow===i||(this.firstRow=e,this.lastRow=i,this.purgeRowsNotInViewport(),this.viewportDatasource&&this.viewportDatasource.setViewportRange(this.firstRow,this.lastRow))},i.prototype.purgeRowsNotInViewport=function(){var t=this;Object.keys(this.rowNodesByIndex).forEach((function(e){var i=parseInt(e,10);if(i<t.firstRow||i>t.lastRow){if(t.isRowFocused(i))return;delete t.rowNodesByIndex[i]}}))},i.prototype.isRowFocused=function(t){var e=this.focusService.getFocusCellToUseAfterRefresh();return!!e&&(null==e.rowPinned&&e.rowIndex===t)},i.prototype.setViewportDatasource=function(t){this.destroyDatasource(),this.viewportDatasource=t,this.rowCount=-1,t.init?t.init({setRowCount:this.setRowCount.bind(this),setRowData:this.setRowData.bind(this),getRow:this.getRow.bind(this)}):console.warn("AG Grid: viewport is missing init method.")},i.prototype.getType=function(){return"viewport"},i.prototype.getRow=function(t){return this.rowNodesByIndex[t]||(this.rowNodesByIndex[t]=this.createBlankRowNode(t)),this.rowNodesByIndex[t]},i.prototype.getRowNode=function(t){var e;return this.forEachNode((function(i){i.id===t&&(e=i)})),e},i.prototype.getRowCount=function(){return-1===this.rowCount?0:this.rowCount},i.prototype.getRowIndexAtPixel=function(t){return 0!==this.rowHeight?Math.floor(t/this.rowHeight):0},i.prototype.getRowBounds=function(t){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*t}},i.prototype.updateRowHeights=function(){var t=this;this.forEachNode((function(e){e.setRowHeight(t.rowHeight),e.setRowTop(t.rowHeight*e.rowIndex)}));var e={type:l.EVENT_MODEL_UPDATED,newData:!1,newPage:!1,keepRenderedRows:!0,animate:!1};this.eventService.dispatchEvent(e)},i.prototype.getTopLevelRowCount=function(){return this.getRowCount()},i.prototype.getTopLevelRowDisplayedIndex=function(t){return t},i.prototype.isEmpty=function(){return this.rowCount>0},i.prototype.isRowsToRender=function(){return this.rowCount>0},i.prototype.getNodesInRangeForSelection=function(t,e){var i=c.missing(t)?0:t.rowIndex,n=e.rowIndex,o=i<this.firstRow||i>this.lastRow,r=n<this.firstRow||n>this.lastRow;if(o||r)return[];for(var s=[],a=i<=n?n:i,l=i<=n?i:n;l<=a;l++)s.push(this.rowNodesByIndex[l]);return s},i.prototype.forEachNode=function(t){var e=this,i=0;Object.keys(this.rowNodesByIndex).forEach((function(n){var o=parseInt(n,10),r=e.rowNodesByIndex[o];t(r,i),i++}))},i.prototype.setRowData=function(t){var e=this;c.iterateObject(t,(function(t,i){var n=parseInt(t,10);if(n>=e.firstRow&&n<=e.lastRow){var o=e.rowNodesByIndex[n];c.missing(o)&&(o=e.createBlankRowNode(n),e.rowNodesByIndex[n]=o),o.setDataAndId(i,n.toString())}}))},i.prototype.createBlankRowNode=function(t){var e=new L(this.beans);return e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*t),e.setRowIndex(t),e},i.prototype.setRowCount=function(t,e){if(void 0===e&&(e=!1),t!==this.rowCount){this.rowCount=t,this.eventService.dispatchEventOnce({type:l.EVENT_ROW_COUNT_READY});var i={type:l.EVENT_MODEL_UPDATED,newData:!1,newPage:!1,keepRenderedRows:e,animate:!1};this.eventService.dispatchEvent(i)}},i.prototype.isRowPresent=function(t){return!!this.getRowNode(t.id)},TA([n("rowRenderer")],i.prototype,"rowRenderer",void 0),TA([n("focusService")],i.prototype,"focusService",void 0),TA([n("beans")],i.prototype,"beans",void 0),TA([r],i.prototype,"init",null),TA([N],i.prototype,"destroyDatasource",null),i=TA([e("rowModel")],i)}(i),MA={version:"31.0.1",moduleName:a.ViewportRowModelModule,rowModel:"viewport",beans:[kA],dependantModules:[Ft]};class RA{constructor(t,e,i){this._encode=t,this._decode=e,this._rangeCallback=i}floor(t){const e=new Date(t),i=this._encode(e);return this._decode(i)}ceil(t){const e=new Date(Number(t)-1),i=this._encode(e);return this._decode(i+1)}range(t,e,i){var n;const o=null===(n=this._rangeCallback)||void 0===n?void 0:n.call(this,t,e),r=this._encode(i?this.floor(t):this.ceil(t)),s=this._encode(i?this.ceil(e):this.floor(e));if(s<r)return[];const a=[];for(let t=r;t<=s;t++){const e=this._decode(t);a.push(e)}return null==o||o(),a}}class PA extends RA{getOffset(t,e){const i="number"==typeof t||t instanceof Date?this._encode(new Date(t)):0;return Math.floor(i)%e}every(t,e){let i,n=0;const{snapTo:o="start"}=null!=e?e:{};if("string"==typeof o){const e=n;i=(i,r)=>{const s="start"===o?i:r;return n=this.getOffset(s,t),()=>n=e}}else"number"==typeof o?n=this.getOffset(new Date(o),t):o instanceof Date&&(n=this.getOffset(o,t));return new RA(e=>{const i=this._encode(e);return Math.floor((i-n)/t)},e=>this._decode(e*t+n),i)}}const NA=new PA((function(t){return t.getTime()}),(function(t){return new Date(t)}));new Date(0).getFullYear();const LA=6e4*(new Date).getTimezoneOffset();const IA=new PA((function(t){return Math.floor((t.getTime()-LA)/1e3)}),(function(t){return new Date(LA+1e3*t)})),FA=6e4*(new Date).getTimezoneOffset();const _A=new PA((function(t){return Math.floor((t.getTime()-FA)/6e4)}),(function(t){return new Date(FA+6e4*t)})),GA=6e4*(new Date).getTimezoneOffset();const BA=new PA((function(t){return Math.floor((t.getTime()-GA)/36e5)}),(function(t){return new Date(GA+36e5*t)}));const VA=new PA((function(t){const e=6e4*t.getTimezoneOffset();return Math.floor((t.getTime()-e)/864e5)}),(function(t){const e=new Date(1970,0,1);return e.setDate(e.getDate()+t),e}));function jA(t){const e=new Date(2023,0,1+t).getTime();return new PA((function(t){const i=t.getTime();return Math.floor((i-e)/6048e5)}),(function(t){const i=new Date(e);return i.setDate(i.getDate()+7*t),i}))}const WA=jA(0);jA(1),jA(2),jA(3),jA(4),jA(5),jA(6);const zA=new PA((function(t){return 12*t.getFullYear()+t.getMonth()}),(function(t){const e=Math.floor(t/12);return new Date(e,t-12*e,1)}));const UA=new PA((function(t){return t.getFullYear()}),(function(t){const e=new Date;return e.setFullYear(t),e.setMonth(0,1),e.setHours(0,0,0,0),e}));function HA(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]])}return i}function KA(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s}function YA(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function XA(t,e,i,n){return new(i||(i=Promise))((function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))}new PA((function(t){return Math.floor(t.getTime()/6e4)}),(function(t){return new Date(6e4*t)})),new PA((function(t){return Math.floor(t.getTime()/36e5)}),(function(t){return new Date(36e5*t)})),new PA((function(t){return Math.floor(t.getTime()/864e5)}),(function(t){const e=new Date(0);return e.setUTCDate(e.getUTCDate()+t),e.setUTCHours(0,0,0,0),e})),new PA((function(t){return 12*t.getUTCFullYear()+t.getUTCMonth()}),(function(t){const e=Math.floor(t/12),i=t-12*e;return new Date(Date.UTC(e,i,1))})),new PA((function(t){return t.getUTCFullYear()}),(function(t){const e=new Date;return e.setUTCFullYear(t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e})),"function"==typeof SuppressedError&&SuppressedError;class qA{constructor(){this.destroyFns=[]}destroy(){for(const t of this.destroyFns)t()}}const $A=[];function ZA(t){const{length:e}=t;if(0===e)return;let i=1/0,n=-1/0;for(let o=0;o<e;o++){let e=t[o];e instanceof Date&&(e=e.getTime()),"number"==typeof e&&(e<i&&(i=e),e>n&&(n=e))}const o=[i,n];return o.some(t=>!isFinite(t))?void 0:o}function JA(t,e,i){var n;let o=!1;return t.length>2&&(t=null!==(n=ZA(t))&&void 0!==n?n:[NaN,NaN]),isNaN(e)||(o||(o=e>t[0]),t=[e,t[1]]),isNaN(i)||(o||(o=i<t[1]),t=[t[0],i]),t[0]>t[1]&&(t=[]),{extent:t,clipped:o}}function QA(t,e){if(null==t||null==e||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(Array.isArray(t[i])&&Array.isArray(e[i])){if(!QA(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;return!0}function tT(t){return void 0===t?[]:Array.isArray(t)?t:[t]}const eT={};function iT(t,e){eT[e]||(t(),eT[e]=!0)}const nT={log(...t){console.log(...t)},warn(t,...e){console.warn("AG Charts - "+t,...e)},error(t,...e){"object"==typeof t?console.error("AG Charts error",t,...e):console.error("AG Charts - "+t,...e)},table(...t){console.table(...t)},warnOnce(t,...e){iT(()=>nT.warn(t,...e),"Logger.warn: "+t)},errorOnce(t,...e){iT(()=>nT.error(t,...e),"Logger.warn: "+t)}};function oT(t){const e="undefined"!=typeof window?window:void 0;return null==e?void 0:e[t]}let rT=Date.now();const sT={create:(...t)=>(...e)=>{sT.check(...t)&&("function"==typeof e[0]&&(e=tT(e[0]())),(()=>{const t=Date.now()-rT;if(t>2e3){const e=(Math.floor(t/100)/10).toFixed(1);nT.log(`**** ${e}s since last log message ****`)}rT=Date.now()})(),nT.log(...e))},check(...t){0===t.length&&t.push(!0);return tT(oT("agChartsDebug")).some(e=>t.includes(e))}},aT=Symbol("BREAK"),lT="__decorator_config";function cT(t,e){return(i,n)=>{const o=n.toString(),r="__"+o,{getters:s,setters:a}=function(t,e,i,n){null==Object.getOwnPropertyDescriptor(t,lT)&&Object.defineProperty(t,lT,{value:{}});const o=t[lT];if(null!=o[i])return o[i];o[i]={setters:[],getters:[]};const r=Object.getOwnPropertyDescriptor(t,e),s=null==r?void 0:r.set,a=null==r?void 0:r.get;return Object.defineProperty(t,e,{set:function(t){var r,l;const c=null!==(l=null===(r=o[i])||void 0===r?void 0:r.setters)&&void 0!==l?l:[];let d;c.some(t=>t.length>2)&&(d=a?a.call(this):this[n]);for(const i of c)if((t=i(this,e,t,d))===aT)return;s?s.call(this,t):this[n]=t},get:function(){var t,r;let s=a?a.call(this):this[n];for(const n of null!==(r=null===(t=o[i])||void 0===t?void 0:t.getters)&&void 0!==r?r:[])if(s=n(this,e,s),s===aT)return;return s},enumerable:!0,configurable:!1}),o[i]}(i,n,o,r);a.push(t),e&&s.unshift(e)}}function dT(t){return void 0!==t&&lT in t}function uT(t){const e=new Set;for(;dT(t);)e.add(null==t?void 0:t[lT]),t=Object.getPrototypeOf(t);return Array.from(e).flatMap(t=>Object.keys(t))}function hT(t,e){const i=mT(t),n=mT(e);if("array"===n){const n=e;return"array"!==i||t.length!==n.length||n.some((e,i)=>null!=hT(null==t?void 0:t[i],e))?[...n]:null}if("primitive"===n)return"primitive"!==i?Object.assign({},e):t!==e?e:null;const o=t||{},r=e||{},s=new Set([...Object.keys(o),...Object.keys(r)]);let a=0;const l={};for(const t of s){if(o[t]===r[t])continue;const e=e=>{l[t]=e,a++},i=mT(o[t]),n=mT(r[t]);if(i!==n){e(r[t]);continue}if("primitive"===n||null===n){e(r[t]);continue}if("array"===n&&o[t].length!==r[t].length){e(r[t]);continue}if("class-instance"===n){e(r[t]);continue}if("function"===n&&o[t]!==r[t]){e(r[t]);continue}const s=hT(o[t],r[t]);null!==s&&e(s)}return 0===a?null:l}const pT=Symbol("<delete-property>"),fT=Symbol("<unspecified-property>");function gT(t,e){var i;const n=null!==(i=null==e?void 0:e.avoidDeepClone)&&void 0!==i?i:[];if(t.map(t=>mT(t)).some(t=>"array"===t)){const i=t[t.length-1];return Array.isArray(i)?i.map(t=>{const i=mT(t);return"array"===i?gT([[],t],e):"object"===i?gT([{},t],e):t}):i}const o={},r=new Set(t.map(t=>null!=t?Object.keys(t):[]).reduce((t,e)=>t.concat(e),[]));for(const i of r){const r=t.map(t=>null!=t&&"object"==typeof t&&i in t?t[i]:fT).filter(t=>t!==fT);if(0===r.length)continue;const s=r[r.length-1];if(s===pT)continue;const a=r.map(t=>mT(t)),l=a[0];a.some(t=>t!==l)?o[i]=s:"array"!==l&&"object"!==l||n.includes(i)?o[i]="array"===l?[...s]:s:o[i]=gT(r,e)}return o}function vT(t,e,i,...n){const o=mT(t),{skip:r=[]}=null!=i?i:{};if("array"===o)return e(o,t,...n),void t.forEach((t,o)=>{vT(t,e,i,...(null!=n?n:[]).map(t=>null==t?void 0:t[o]))});if("object"===o){e(o,t,...n);for(const o in t){if(r.includes(o))continue;const s=t[o],a=null==n?void 0:n.map(t=>null==t?void 0:t[o]),l=mT(s);"object"!==l&&"array"!==l||vT(s,e,i,...a)}}}const yT="undefined"!=typeof window;function mT(t){return null==t?null:yT&&t instanceof HTMLElement?"primitive":Array.isArray(t)?"array":t instanceof Date?"primitive":"object"==typeof t&&t.constructor===Object?"object":"function"==typeof t?"function":"object"==typeof t&&null!=t.constructor?"class-instance":"primitive"}const bT=2*Math.PI;function ST(t){return t%=bT,t+=bT,t%=bT}function xT(t){return(t%=bT)<-Math.PI?t+=bT:t>=Math.PI&&(t-=bT),t}function CT(t){return t/180*Math.PI}function wT(t,e,i){return Math.max(e,Math.min(i,t))}class ET{constructor(){this.type="band",this.cache=null,this.cacheProps=["_domain","range","_paddingInner","_paddingOuter","round","interval"],this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}didChange(){const{cache:t}=this;return!(t&&!this.cacheProps.some(e=>this[e]!==t[e]))&&(this.cache={},this.cacheProps.forEach(t=>this.cache[t]=this[t]),!0)}refresh(){this.didChange()&&this.update()}set domain(t){const e=[];this.index=new Map;const i=this.index;t.forEach(t=>{void 0===i.get(t)&&i.set(t,e.push(t)-1)}),this._domain=e}get domain(){return this._domain}ticks(){this.refresh();const{interval:t=1}=this,e=Math.abs(Math.round(t));return this._domain.filter((t,i)=>i%e==0)}convert(t){this.refresh();const e=this.index.get(t);if(void 0===e)return NaN;const i=this.ordinalRange[e];return void 0===i?NaN:i}invert(t){this.refresh();const e=this.ordinalRange.findIndex(e=>e===t);return this.domain[e]}get bandwidth(){return this.refresh(),this._bandwidth}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=wT(t,0,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this._paddingInner=wT(t,0,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this._paddingOuter=wT(t,0,1)}get paddingOuter(){return this._paddingOuter}update(){const t=this._domain.length;if(0===t)return;const e=this.round,i=this._paddingInner,n=this._paddingOuter,[o,r]=this.range,s=r-o,a=s/Math.max(1,t+2*n-i),l=e?Math.floor(a):a,c=o+(s-l*(t-i))/2,d=e?Math.round(c):c,u=l*(1-i),h=e?Math.round(u):u,p=a*(1-i),f=[];for(let e=0;e<t;e++)f.push(d+l*e);this._bandwidth=h,this._rawBandwidth=p,this.ordinalRange=f}}function OT(t,e,i){return Math.min(i,Math.max(t,e))}function DT(t,e,i=1e-10){return Math.abs(t-e)<i}function AT(t){return Math.sign(t)<0||Object.is(t,-0)}function TT(t,e=2){const i=Math.pow(10,e);return Math.round(t*i)/i}function kT(t,e=2){const i=Math.floor(Math.log(Math.abs(t))/Math.LN10);return i>=0||!isFinite(i)?t.toFixed(e):t.toFixed(Math.abs(i)-1+e)}function MT(t,e){return t>=0?Math.floor(t%e):Math.floor(t%e+e)}class RT{constructor(t,e,i,n=1){this.r=OT(0,t||0,1),this.g=OT(0,e||0,1),this.b=OT(0,i||0,1),this.a=OT(0,n||0,1)}static validColorString(t){return t.indexOf("#")>=0?!!RT.parseHex(t):t.indexOf("rgb")>=0?!!RT.stringToRgba(t):!!RT.nameToHex[t.toLowerCase()]}static fromString(t){if(t.indexOf("#")>=0)return RT.fromHexString(t);const e=RT.nameToHex[t.toLowerCase()];if(e)return RT.fromHexString(e);if(t.indexOf("rgb")>=0)return RT.fromRgbaString(t);throw new Error(`Invalid color string: '${t}'`)}static tryParseFromString(t){try{return RT.fromString(t)}catch(e){return nT.warnOnce(`invalid color string: '${t}'.`),RT.fromArray([0,0,0])}}static parseHex(t){let e;switch((t=t.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(let i=0;i<t.length;i+=2)e.push(parseInt(`${t[i]}${t[i+1]}`,16));break;case 3:case 4:e=t.split("").map(t=>parseInt(t,16)).map(t=>t+16*t)}if((null==e?void 0:e.length)>=3&&e.every(t=>t>=0))return 3===e.length&&e.push(255),e}static fromHexString(t){const e=RT.parseHex(t);if(e){const[t,i,n,o]=e;return new RT(t/255,i/255,n/255,o/255)}throw new Error(`Malformed hexadecimal color string: '${t}'`)}static stringToRgba(t){let[e,i]=[NaN,NaN];for(let n=0;n<t.length;n++){const o=t[n];if(e||"("!==o){if(")"===o){i=n;break}}else e=n}const n=e&&i&&t.substring(e+1,i);if(!n)return;const o=n.split(","),r=[];for(let t=0;t<o.length;t++){const e=o[t];let i=parseFloat(e);if(isNaN(i))return;e.indexOf("%")>=0?(i=Math.max(0,Math.min(100,i)),i/=100):3===t?i=Math.max(0,Math.min(1,i)):(i=Math.max(0,Math.min(255,i)),i/=255),r.push(i)}return r}static fromRgbaString(t){const e=RT.stringToRgba(t);if(e){if(3===e.length)return new RT(e[0],e[1],e[2]);if(4===e.length)return new RT(e[0],e[1],e[2],e[3])}throw new Error(`Malformed rgb/rgba color string: '${t}'`)}static fromArray(t){if(4===t.length)return new RT(t[0],t[1],t[2],t[3]);if(3===t.length)return new RT(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,e,i,n=1){const o=RT.HSBtoRGB(t,e,i);return new RT(o[0],o[1],o[2],n)}static fromHSL(t,e,i,n=1){const o=RT.HSLtoRGB(t,e,i);return new RT(o[0],o[1],o[2],n)}static padHex(t){return 1===t.length?"0"+t:t}toHexString(){let t="#"+RT.padHex(Math.round(255*this.r).toString(16))+RT.padHex(Math.round(255*this.g).toString(16))+RT.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(t+=RT.padHex(Math.round(255*this.a).toString(16))),t}toRgbaString(t=3){const e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*i)/i),`rgba(${e.join(", ")})`):`rgb(${e.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return RT.RGBtoHSB(this.r,this.g,this.b)}static RGBtoHSL(t,e,i){const n=Math.min(t,e,i),o=Math.max(t,e,i),r=(o+n)/2;let s,a;if(o===n)s=NaN,a=0;else{const l=o-n;a=r>.5?l/(2-o-n):l/(o+n),s=o===t?(e-i)/l+(e<i?6:0):o===e?(i-t)/l+2:(t-e)/l+4,s*=60}return[s,a,r]}static HSLtoRGB(t,e,i){if(0===e)return[i,i,i];const n=i<.5?i*(1+e):i+e-i*e,o=2*i-n;function r(t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?o+6*(n-o)*t:t<.5?n:t<2/3?o+(n-o)*(2/3-t)*6:o}return[r(t/360+1/3),r(t/360),r(t/360-1/3)]}static RGBtoHSB(t,e,i){const n=Math.min(t,e,i),o=Math.max(t,e,i);let r=NaN;if(n!==o){const s=o-n,a=(o-t)/s,l=(o-e)/s,c=(o-i)/s;r=t===o?c-l:e===o?2+a-c:4+l-a,r/=6,r<0&&(r+=1)}return[360*r,0!==o?(o-n)/o:0,o]}static HSBtoRGB(t,e,i){isNaN(t)&&(t=0),t=(t%360+360)%360/360;let n=0,o=0,r=0;if(0===e)n=o=r=i;else{const s=6*(t-Math.floor(t)),a=s-Math.floor(s),l=i*(1-e),c=i*(1-e*a),d=i*(1-e*(1-a));switch(s>>0){case 0:n=i,o=d,r=l;break;case 1:n=c,o=i,r=l;break;case 2:n=l,o=i,r=d;break;case 3:n=l,o=c,r=i;break;case 4:n=d,o=l,r=i;break;case 5:n=i,o=l,r=c}}return[n,o,r]}derive(t,e,i,n){const o=RT.RGBtoHSB(this.r,this.g,this.b);let r=o[2];0==r&&i>1&&(r=.05);const s=((o[0]+t)%360+360)%360,a=Math.max(Math.min(o[1]*e,1),0);r=Math.max(Math.min(r*i,1),0);const l=Math.max(Math.min(this.a*n,1),0),c=RT.HSBtoRGB(s,a,r);return c.push(l),RT.fromArray(c)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(t,e){const i=RT.tryParseFromString(t),n=RT.tryParseFromString(e);return t=>{const e=(e,i)=>e*(1-t)+i*t;return new RT(e(i.r,n.r),e(i.g,n.g),e(i.b,n.b),e(i.a,n.a)).toString()}}}function PT(t){return cT((e,i,n)=>{var o,r,s;if(t(n,{target:e}))return n;const a=i.toString().replace(/^_*/,"");let l=null!==(r=null===(o=e.constructor)||void 0===o?void 0:o.className)&&void 0!==r?r:null===(s=e.constructor)||void 0===s?void 0:s.name;(null==l?void 0:l.length)<3&&(l=null);const c=l?`of [${l}] `:"";return t.message?nT.warn(`Property [${a}] ${c}cannot be set to [${NT(n)}]; ${t.message}, ignoring.`):nT.warn(`Property [${a}] ${c}cannot be set to [${NT(n)}], ignoring.`),aT})}function NT(t){return"number"==typeof t&&isNaN(t)?"NaN":t===1/0?"Infinity":t===-1/0?"-Infinity":JSON.stringify(t)}function LT(t,e){return t.message=e,t}RT.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});const IT=(t,e,i)=>void 0===t||i(t,e),FT=(t,e)=>LT((i,n)=>Array.isArray(i)&&(!t||i.length===t)&&(!e||i.every(t=>e(t,n))),"expecting an Array"),_T=t=>LT((e,i)=>IT(e,i,FT(t)),"expecting an optional Array");LT(t=>Array.isArray(t)&&t.length>0,"expecting a non-empty Array");const GT=(...t)=>LT((e,i)=>t.every(t=>t(e,i)),t.map(t=>t.message).filter(t=>null!=t).join(" AND ")),BT=t=>null!=t&&!isNaN(t),VT=t=>LT((e,i)=>!BT(e)||!BT(i.target[t])||e<i.target[t],"expected to be less than "+t),jT=t=>LT((e,i)=>!BT(e)||!BT(i.target[t])||e>i.target[t],"expected to be greater than "+t),WT=LT(t=>"function"==typeof t,"expecting a Function"),zT=LT((t,e)=>IT(t,e,WT),"expecting an optional Function"),UT=LT(t=>!0===t||!1===t,"expecting a Boolean"),HT=LT((t,e)=>IT(t,e,UT),"expecting an optional Boolean"),KT=LT(t=>"string"==typeof t,"expecting a String"),YT=LT((t,e)=>IT(t,e,KT),"expecting an optional String"),XT=LT(t=>t instanceof Date&&!isNaN(+t),"expecting a Date object"),qT=LT((t,e)=>IT(t,e,XT),"expecting an optional Date");LT(FT(void 0,XT),"expecting an Array of Date objects");const $T=ok(0),ZT=((...t)=>LT((e,i)=>t.some(t=>t(e,i)),t.map(t=>t.message).filter(t=>null!=t).join(" OR ")))(qT,LT((t,e)=>IT(t,e,$T),"expecting an optional number")),JT="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",QT=LT(t=>"string"==typeof t&&RT.validColorString(t),"expecting a color String. "+JT),tk=LT((t,e)=>IT(t,e,QT),"expecting an optional color String. "+JT),ek=LT(FT(void 0,QT),"expecting an Array of color strings. "+JT),ik=LT((t,e)=>IT(t,e,ek),"expecting an optional Array of color strings. "+JT);function nk(t="expecting a finite Number",e,i){let n=t;return void 0!==e&&void 0!==i?n+=` between ${e} and ${i} inclusive`:void 0!==e?n+=" greater than or equal to "+e:void 0!==i&&(n+=" less than or equal to "+i),n}function ok(t,e){return LT(i=>"number"==typeof i&&Number.isFinite(i)&&(void 0===t||i>=t)&&(void 0===e||i<=e),nk(void 0,t,e))}function rk(t,e){return LT((i,n)=>IT(i,n,ok(t,e)),nk("expecting an optional finite Number",t,e))}function sk(t,e){return LT(i=>"number"==typeof i&&(isNaN(i)||Number.isFinite(i)&&(void 0===t||i>=t)&&(void 0===e||i<=e)),nk(void 0,t,e))}const ak=LT(FT(void 0,ok()),"expecting an Array of numbers"),lk=LT((t,e)=>IT(t,e,ak),"expecting an optional Array of numbers"),ck=LT(FT(void 0,KT),"expecting an Array of strings");function dk(...t){return LT(e=>"string"==typeof e&&t.indexOf(e)>=0,"expecting one of: "+t.join(", "))}LT((t,e)=>IT(t,e,ck),"expecting an optional Array of strings");const uk=LT(FT(void 0,UT),"expecting an Array of boolean values");LT((t,e)=>IT(t,e,uk),"expecting an optional Array of boolean values");const hk=["normal","bold","bolder","lighter"],pk=LT(t=>"normal"===t||"italic"===t||"oblique"===t,"expecting a font style keyword such as 'normal', 'italic' or 'oblique'"),fk=LT((t,e)=>IT(t,e,pk),"expecting an optional font style keyword such as 'normal', 'italic' or 'oblique'"),gk=LT(t=>hk.includes(t)||"number"==typeof t&&isFinite(t),"expecting a font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),vk=LT((t,e)=>IT(t,e,gk),"expecting an optional font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),yk=LT(FT(void 0,ok(0)),"expecting an Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),mk=LT((t,e)=>IT(t,e,yk),"expecting an optional Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),bk=["butt","round","square"],Sk=LT(t=>bk.includes(t),"expecting a line cap keyword such as 'butt', 'round' or 'square'");LT((t,e)=>IT(t,e,Sk),"expecting an optional line cap keyword such as 'butt', 'round' or 'square'");const xk=["round","bevel","miter"],Ck=LT(t=>xk.includes(t),"expecting a line join keyword such as 'round', 'bevel' or 'miter'");LT((t,e)=>IT(t,e,Ck),"expecting an optional line join keyword such as 'round', 'bevel' or 'miter'");const wk=["top","right","bottom","left"],Ek=LT(t=>wk.includes(t),"expecting a position keyword such as 'top', 'right', 'bottom' or 'left"),Ok=["exact","nearest"],Dk=LT(t=>"number"==typeof t&&Number.isFinite(t)||Ok.includes(t),"expecting an interaction range of 'exact', 'nearest' or a number"),Ak=["never","always","hyphenate","on-space"],Tk=LT(t=>Ak.includes(t),"expecting a text wrap strategy keyword such as 'never', 'always', 'hyphenate', or 'on-space'"),kk=["ellipsis","hide"];LT(t=>kk.includes(t),"expecting an overflow strategy keyword such as 'ellipsis', or 'hide'");const Mk=["left","center","right"];LT(t=>Mk.includes(t),"expecting a text align keyword such as 'left', 'center', or 'right'");const Rk=["top","middle","bottom"];LT(t=>Rk.includes(t),"expecting a text align keyword such as 'top', 'middle', or 'bottom'");const Pk=["horizontal","vertical"],Nk=LT(t=>Pk.includes(t),"expecting a direction keyword such as 'horizontal' or 'vertical'");var Lk,Ik;LT((t,e)=>IT(t,e,Nk),"expecting an optional direction keyword such as 'horizontal' or 'vertical'"),function(t){t.X="x",t.Y="y"}(Lk||(Lk={})),function(t){t[t.NONE=0]="NONE",t[t.TRIVIAL=1]="TRIVIAL",t[t.MINOR=2]="MINOR",t[t.MAJOR=3]="MAJOR"}(Ik||(Ik={}));const Fk=function(){try{return new Function("return true"),!0}catch(t){return!1}}();function _k(t){const{changeCb:e,convertor:i}=null!=t?t:{};return function(n,o){const r="__"+o;n[o]||(Fk&&null==e&&null==i?function(t,e,i,n){const{redraw:o=Ik.TRIVIAL,type:r="normal",checkDirtyOnAssignment:s=!1}=null!=n?n:{},a=new Function("value",`\n        const oldValue = this.${i};\n        if (value !== oldValue) {\n            this.${i} = value;\n            ${"normal"===r?`this.markDirty(this, ${o});`:""}\n            ${"transform"===r?`this.markDirtyTransform(${o});`:""}\n            ${"path"===r?`if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ${o}); }`:""}\n            ${"font"===r?`if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ${o}); }`:""}\n        }\n        ${s?`if (value != null && value._dirty > ${Ik.NONE}) { this.markDirty(value, value._dirty); }`:""}\n`),l=new Function(`return this.${i};`);Object.defineProperty(t,e,{set:a,get:l,enumerable:!0,configurable:!0})}(n,o,r,t):function(t,e,i,n){const{redraw:o=Ik.TRIVIAL,type:r="normal",changeCb:s,convertor:a,checkDirtyOnAssignment:l=!1}=null!=n?n:{};Object.defineProperty(t,e,{set:function(t){const e=this[i];(t=a?a(t):t)!==e&&(this[i]=t,"normal"===r&&this.markDirty(this,o),"transform"===r&&this.markDirtyTransform(o),"path"!==r||this._dirtyPath||(this._dirtyPath=!0,this.markDirty(this,o)),"font"!==r||this._dirtyFont||(this._dirtyFont=!0,this.markDirty(this,o)),s&&s(this)),l&&null!=t&&t._dirty>Ik.NONE&&this.markDirty(t,t._dirty)},get:function(){return this[i]},enumerable:!0,configurable:!0})}(n,o,r,t))}}class Gk{constructor(){this._dirty=Ik.MAJOR}markDirty(t,e=Ik.TRIVIAL){this._dirty>e||(this._dirty=e)}markClean(t){this._dirty=Ik.NONE}isDirty(){return this._dirty>Ik.NONE}}const Bk={};function Vk(t){var e;const i=t.constructor,n=Object.prototype.hasOwnProperty.call(i,"className")?i.className:i.name;if(!n)throw new Error(`The ${i} is missing the 'className' property.`);const o=(null!==(e=Bk[n])&&void 0!==e?e:0)+1;return Bk[n]=o,n+"-"+o}function jk(t,e,i=1/0){const n={nearest:void 0,distanceSquared:i};for(const i of e){const e=i.distanceSquared(t);if(0===e)return{nearest:i,distanceSquared:0};e<n.distanceSquared&&(n.nearest=i,n.distanceSquared=e)}return n}class Wk{constructor(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}clone(){const{x:t,y:e,width:i,height:n}=this;return new Wk(t,e,i,n)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}containsPoint(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}collidesBBox(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}isInfinite(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0}distanceSquared(t){if(this.containsPoint(t.x,t.y))return 0;const e=t.x-Math.max(this.x,Math.min(t.x,this.x+this.width)),i=t.y-Math.max(this.y,Math.min(t.y,this.y+this.height));return e*e+i*i}static nearestBox(t,e){return jk(t,e)}shrink(t,e){const i=(t,e)=>{switch(t){case"top":this.y+=e;case"bottom":this.height-=e;break;case"left":this.x+=e;case"right":this.width-=e;break;case"vertical":this.y+=e,this.height-=2*e;break;case"horizontal":this.x+=e,this.width-=2*e;break;case void 0:this.x+=e,this.width-=2*e,this.y+=e,this.height-=2*e}};return"number"==typeof t?i(e,t):Object.entries(t).forEach(([t,e])=>i(t,e)),this}grow(t,e){if("number"==typeof t)this.shrink(-t,e);else{const e=Object.assign({},t);for(const t in e)e[t]*=-1;this.shrink(e)}return this}static merge(t){let e=1/0,i=1/0,n=-1/0,o=-1/0;return t.forEach(t=>{t.x<e&&(e=t.x),t.y<i&&(i=t.y),t.x+t.width>n&&(n=t.x+t.width),t.y+t.height>o&&(o=t.y+t.height)}),new Wk(e,i,n-e,o-i)}}Wk.zero=new Wk(0,0,0,0);class zk{get e(){return[...this.elements]}constructor(t=[1,0,0,1,0,0]){this.elements=t}setElements(t){const e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this}get identity(){const t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}AxB(t,e,i){const n=t[0]*e[0]+t[2]*e[1],o=t[1]*e[0]+t[3]*e[1],r=t[0]*e[2]+t[2]*e[3],s=t[1]*e[2]+t[3]*e[3],a=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];(i=null!=i?i:t)[0]=n,i[1]=o,i[2]=r,i[3]=s,i[4]=a,i[5]=l}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(t){const e=new Array(6);return this.AxB(this.elements,t.elements,e),new zk(e)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){const t=this.elements;let e=t[0],i=t[1],n=t[2],o=t[3];const r=t[4],s=t[5],a=1/(e*o-i*n);return e*=a,i*=a,n*=a,o*=a,new zk([o,-i,-n,e,n*s-o*r,i*r-e*s])}inverseTo(t){const e=this.elements;let i=e[0],n=e[1],o=e[2],r=e[3];const s=e[4],a=e[5],l=1/(i*r-n*o);return i*=l,n*=l,o*=l,r*=l,t.setElements([r,-n,-o,i,o*a-r*s,n*s-i*a]),this}invertSelf(){const t=this.elements;let e=t[0],i=t[1],n=t[2],o=t[3];const r=t[4],s=t[5],a=1/(e*o-i*n);return e*=a,i*=a,n*=a,o*=a,t[0]=o,t[1]=-i,t[2]=-n,t[3]=e,t[4]=n*s-o*r,t[5]=i*r-e*s,this}transformPoint(t,e){const i=this.elements;return{x:t*i[0]+e*i[2]+i[4],y:t*i[1]+e*i[3]+i[5]}}transformBBox(t,e){const i=this.elements,n=i[0],o=i[1],r=i[2],s=i[3],a=.5*t.width,l=.5*t.height,c=t.x+a,d=t.y+l,u=Math.abs(a*n)+Math.abs(l*r),h=Math.abs(a*o)+Math.abs(l*s);return e||(e=new Wk(0,0,0,0)),e.x=c*n+d*r+i[4]-u,e.y=c*o+d*s+i[5]-h,e.width=u+u,e.height=h+h,e}toContext(t){if(this.identity)return;const e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}static flyweight(t){return zk.instance.setElements(t.elements)}static updateTransformMatrix(t,e,i,n,o,r,s){const[a,l]=[0,0],c=e,d=i;let u,h;1===c&&1===d?(u=0,h=0):(u=null==(null==s?void 0:s.scalingCenterX)?a:null==s?void 0:s.scalingCenterX,h=null==(null==s?void 0:s.scalingCenterY)?l:null==s?void 0:s.scalingCenterY);const p=n,f=Math.cos(p),g=Math.sin(p);let v,y;0===p?(v=0,y=0):(v=null==(null==s?void 0:s.rotationCenterX)?a:null==s?void 0:s.rotationCenterX,y=null==(null==s?void 0:s.rotationCenterY)?l:null==s?void 0:s.rotationCenterY);const m=o,b=r,S=u*(1-c)-v,x=h*(1-d)-y;return t.setElements([f*c,g*c,-g*d,f*d,f*S-g*x+v+m,g*S+f*x+y+b]),t}static fromContext(t){const e=t.getTransform();return new zk([e.a,e.b,e.c,e.d,e.e,e.f])}}var Uk;zk.instance=new zk,function(t){t[t.All=0]="All",t[t.None=1]="None"}(Uk||(Uk={}));const Hk=t=>{t.parent&&(t.parent.dirtyZIndex=!0),t.zIndexChanged()};class Kk extends Gk{get datum(){var t,e;return null!==(t=this._datum)&&void 0!==t?t:null===(e=this._parent)||void 0===e?void 0:e.datum}get previousDatum(){return this._previousDatum}set datum(t){this._datum!==t&&(this._previousDatum=this._datum),this._datum=t}_setLayerManager(t){this._layerManager=t,this._debug=null==t?void 0:t.debug;for(const e of this._children)e._setLayerManager(t);for(const e of this._virtualChildren)e._setLayerManager(t)}get layerManager(){return this._layerManager}get parent(){return this._parent}get children(){if(0===this._virtualChildren.length)return this._children;const t=[...this._children];for(const e of this._virtualChildren)t.push(...e.children);return t}get virtualChildren(){return this._virtualChildren}hasVirtualChildren(){return this._virtualChildren.length>0}setProperties(t,e){const i=null!=e?e:Object.keys(t);for(const e of i)this[e]=t[e];return this}append(t){Array.isArray(t)||(t=[t]);for(const e of t){if(e.parent)throw new Error(`${e} already belongs to another parent: ${e.parent}.`);if(e.layerManager)throw new Error(`${e} already belongs to a scene: ${e.layerManager}.`);if(this.childSet[e.id])throw new Error(`Duplicate ${e.constructor.name} node: ${e}`);e.isVirtual?this._virtualChildren.push(e):this._children.push(e),this.childSet[e.id]=!0,e._parent=this,e._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,Ik.MAJOR)}appendChild(t){return this.append(t),t}removeChild(t){const e=()=>{throw new Error("The node to be removed is not a child of this node.")};if(t.parent!==this&&e(),t.isVirtual){const i=this._virtualChildren.indexOf(t);i<0&&e(),this._virtualChildren.splice(i,1)}else{const i=this._children.indexOf(t);i<0&&e(),this._children.splice(i,1)}return delete this.childSet[t.id],t._parent=void 0,t._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(t,Ik.MAJOR),t}calculateCumulativeMatrix(){this.computeTransformMatrix();const t=zk.flyweight(this.matrix);let e=this.parent;for(;e;)e.computeTransformMatrix(),t.preMultiplySelf(e.matrix),e=e.parent;return t}transformPoint(t,e){return this.calculateCumulativeMatrix().invertSelf().transformPoint(t,e)}inverseTransformPoint(t,e){return this.calculateCumulativeMatrix().transformPoint(t,e)}transformBBox(t){return this.calculateCumulativeMatrix().invertSelf().transformBBox(t)}inverseTransformBBox(t){return this.calculateCumulativeMatrix().transformBBox(t)}markDirtyTransform(){this.dirtyTransform=!0,this.markDirty(this,Ik.MAJOR)}constructor({isVirtual:t,tag:e}={}){super(),this.serialNumber=Kk._nextSerialNumber++,this.id=Vk(this),this.isContainerNode=!1,this._virtualChildren=[],this._children=[],this.childSet={},this.matrix=new zk,this.inverseMatrix=new zk,this.dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=Uk.All,this.isVirtual=null!=t&&t,this.tag=null!=e?e:NaN}containsPoint(t,e){return!1}pickNode(t,e){var i;if(!this.visible||this.pointerEvents===Uk.None||!this.containsPoint(t,e))return;const n=this.children;if(n.length>1e3)for(let o=n.length-1;o>=0;o--){const r=n[o],s=(null===(i=r.computeTransformedBBox())||void 0===i?void 0:i.containsPoint(t,e))?r.pickNode(t,e):void 0;if(s)return s}else if(n.length)for(let i=n.length-1;i>=0;i--){const o=n[i].pickNode(t,e);if(o)return o}else if(!this.isContainerNode)return this}findNodes(t){const e=t(this)?[this]:[];for(const i of this.children){const n=i.findNodes(t);n&&e.push(...n)}return e}computeBBox(){}computeTransformedBBox(){const t=this.computeBBox();if(!t)return;this.computeTransformMatrix();const e=zk.flyweight(this.matrix);let i=this.parent;for(;i;)i.computeTransformMatrix(),e.preMultiplySelf(i.matrix),i=i.parent;return e.transformBBox(t,t),t}computeTransformMatrix(){if(!this.dirtyTransform)return;const{matrix:t,scalingX:e,scalingY:i,rotation:n,translationX:o,translationY:r,scalingCenterX:s,scalingCenterY:a,rotationCenterX:l,rotationCenterY:c}=this;zk.updateTransformMatrix(t,e,i,n,o,r,{scalingCenterX:s,scalingCenterY:a,rotationCenterX:l,rotationCenterY:c}),t.inverseTo(this.inverseMatrix),this.dirtyTransform=!1}render(t){const{stats:e}=t;this._dirty=Ik.NONE,e&&e.nodesRendered++}clearBBox(t){const e=this.computeBBox();if(null==e)return;const{x:i,y:n,width:o,height:r}=e,s=this.transformPoint(i,n),a=this.transformPoint(i+o,n+r);t.clearRect(s.x,s.y,a.x-s.x,a.y-s.y)}markDirty(t,e=Ik.TRIVIAL,i=e){this._dirty>e||this._dirty===e&&e===i||(this._dirty=e,this.parent?this.parent.markDirty(this,i):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(t){const{force:e=!1,recursive:i=!0}=null!=t?t:{};if(this._dirty!==Ik.NONE||e){if(this._dirty=Ik.NONE,!1!==i)for(const t of this._virtualChildren)t.markClean({force:e});if(!0===i)for(const t of this._children)t.markClean({force:e})}}visibilityChanged(){}get nodeCount(){let t=1,e=this._dirty>=Ik.NONE||this.dirtyTransform?1:0,i=this.visible?1:0;const n=n=>{const{count:o,visibleCount:r,dirtyCount:s}=n.nodeCount;t+=o,i+=r,e+=s};for(const t of this._children)n(t);for(const t of this._virtualChildren)n(t);return{count:t,visibleCount:i,dirtyCount:e}}zIndexChanged(){}}Kk._nextSerialNumber=0,KA([_k({type:"transform"}),YA("design:type",Number)],Kk.prototype,"scalingX",void 0),KA([_k({type:"transform"}),YA("design:type",Number)],Kk.prototype,"scalingY",void 0),KA([_k({type:"transform"}),YA("design:type",Object)],Kk.prototype,"scalingCenterX",void 0),KA([_k({type:"transform"}),YA("design:type",Object)],Kk.prototype,"scalingCenterY",void 0),KA([_k({type:"transform"}),YA("design:type",Object)],Kk.prototype,"rotationCenterX",void 0),KA([_k({type:"transform"}),YA("design:type",Object)],Kk.prototype,"rotationCenterY",void 0),KA([_k({type:"transform"}),YA("design:type",Number)],Kk.prototype,"rotation",void 0),KA([_k({type:"transform"}),YA("design:type",Number)],Kk.prototype,"translationX",void 0),KA([_k({type:"transform"}),YA("design:type",Number)],Kk.prototype,"translationY",void 0),KA([_k({redraw:Ik.MAJOR,changeCb:t=>t.visibilityChanged()}),YA("design:type",Boolean)],Kk.prototype,"visible",void 0),KA([_k({redraw:Ik.TRIVIAL,changeCb:Hk}),YA("design:type",Number)],Kk.prototype,"zIndex",void 0),KA([_k({redraw:Ik.TRIVIAL,changeCb:Hk}),YA("design:type",Array)],Kk.prototype,"zIndexSubOrder",void 0);class Yk extends Gk{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}}KA([PT(UT),_k({redraw:Ik.MAJOR}),YA("design:type",Object)],Yk.prototype,"enabled",void 0),KA([PT(QT),_k({redraw:Ik.MAJOR}),YA("design:type",Object)],Yk.prototype,"color",void 0),KA([PT(ok()),_k({redraw:Ik.MAJOR}),YA("design:type",Object)],Yk.prototype,"xOffset",void 0),KA([PT(ok()),_k({redraw:Ik.MAJOR}),YA("design:type",Object)],Yk.prototype,"yOffset",void 0),KA([PT(ok(0)),_k({redraw:Ik.MAJOR}),YA("design:type",Object)],Yk.prototype,"blur",void 0);const Xk=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];function qk(){if("undefined"==typeof navigator)return!0;const t=navigator.userAgent;return!Xk.some(e=>e.test(t))}class $k{constructor(t){this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0;const{document:e,window:i,width:n=600,height:o=300,domLayer:r=!1,zIndex:s=0,name:a,overrideDevicePixelRatio:l}=t;this.document=e,this.window=i,$k.document=e,this.element=e.createElement("canvas"),this.element.width=n,this.element.height=o,this.realContext=this.element.getContext("2d"),this.imageSource=this.realContext.canvas;const{style:c}=this.element;c.userSelect="none",c.display="block",r&&(c.position="absolute",c.zIndex=String(s),c.top="0",c.left="0",c.pointerEvents="none",c.opacity="1",a&&(this.element.id=a)),this.context=this.setPixelRatio(l),this.resize(n,o)}set container(t){this._container!==t&&(this.remove(),t&&t.appendChild(this.element),this._container=t)}get container(){return this._container}set enabled(t){this.element.style.display=t?"block":"none",this._enabled=!!t}get enabled(){return this._enabled}remove(){const{parentNode:t}=this.element;null!=t&&t.removeChild(this.element)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}snapshot(){}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}toImage(){const t=this.document.createElement("img");return t.src=this.getDataURL(),t}getDataURL(t){return this.element.toDataURL(t)}download(t,e="image/png"){t=(null!=t?t:"").trim()||"image";const i=this.getDataURL(e),n=this.document,o=n.createElement("a");o.href=i,o.download=t,o.style.display="none",n.body.appendChild(o),o.click(),n.body.removeChild(o)}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=null!=t?t:this.window.devicePixelRatio;return qk()||(e=1),this._pixelRatio=e,$k.overrideScale(this.realContext,e)}set pixelated(t){this.element.style.imageRendering=t?"pixelated":"auto"}get pixelated(){return"pixelated"===this.element.style.imageRendering}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{element:i,context:n,pixelRatio:o}=this;i.width=Math.round(t*o),i.height=Math.round(e*o),i.style.width=t+"px",i.style.height=e+"px",n.resetTransform(),this._width=t,this._height=e}static get textMeasuringContext(){if(this._textMeasuringContext)return this._textMeasuringContext;const t=this.document.createElement("canvas");return this._textMeasuringContext=t.getContext("2d"),this._textMeasuringContext}static get svgText(){if(this._svgText)return this._svgText;const t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.setAttribute("width","100"),e.setAttribute("height","100"),e.classList?e.classList.add("text-measuring-svg"):e.setAttribute("class","text-measuring-svg"),e.style.position="absolute",e.style.top="-1000px",e.style.visibility="hidden";const i=document.createElementNS(t,"text");return i.setAttribute("x","0"),i.setAttribute("y","30"),i.setAttribute("text","black"),e.appendChild(i),document.body.appendChild(e),this._svgText=i,i}static get has(){if(this._has)return this._has;const t="undefined"==typeof navigator||navigator.userAgent.indexOf("Chrome")>-1,e="undefined"!=typeof navigator&&navigator.userAgent.indexOf("Firefox")>-1,i=!t&&"undefined"!=typeof navigator&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!e&&!i,getTransform:void 0!==this.textMeasuringContext.getTransform}),this._has}static measureText(t,e,i,n){const o=this.textMeasuringContext;return o.font=e,o.textBaseline=i,o.textAlign=n,o.measureText(t)}static getTextSize(t,e){if(this.has.textMetrics){const i=this.textMeasuringContext;i.font=e;const n=i.measureText(t);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}return this.measureSvgText(t,e)}static measureSvgText(t,e){const i=this.textSizeCache,n=i[e];if(n){const e=n[t];if(e)return e}else i[e]={};const o=this.svgText;o.style.font=e,o.textContent=t;const r=o.getBBox(),s={width:r.width,height:r.height};return i[e][t]=s,s}static overrideScale(t,e){let i=0;const n={save(){this.$save(),i++},restore(){if(!(i>0))throw new Error("AG Charts - Unable to restore() past depth 0");this.$restore(),i--},setTransform(t,i,n,o,r,s){"object"==typeof t?this.$setTransform(t):this.$setTransform(t*e,i*e,n*e,o*e,r*e,s*e)},resetTransform(){this.$setTransform(e,0,0,e,0,0)},verifyDepthZero(){if(0!==i)throw new Error("AG Charts - Save/restore depth is non-zero: "+i)}};for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t["$"+e]||(t["$"+e]=t[e]),t[e]=n[e]);return t}}$k.document=globalThis.document,$k.textSizeCache={};class Zk extends class{constructor(){this.stops=[]}}{constructor(){super(...arguments),this.angle=0}createGradient(t,e){const{stops:i,angle:n}=this,o=ST(CT(n+90)),r=Math.cos(o),s=Math.sin(o),a=e.width,l=e.height,c=e.x+.5*a,d=e.y+.5*l;if(a>0&&l>0){const e=Math.sqrt(l*l+a*a)/2,n=Math.atan2(l,a);let u;u=o<Math.PI/2?o:o<Math.PI?Math.PI-o:o<3*Math.PI/2?o-Math.PI:2*Math.PI-o;const h=e*Math.abs(Math.cos(u-n)),p=t.createLinearGradient(c+r*h,d+s*h,c-r*h,d-s*h);return i.forEach(t=>{p.addColorStop(t.offset,t.color)}),p}return"black"}}const Jk=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i;class Qk extends Kk{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=Qk.defaultStyles.fill,this.stroke=Qk.defaultStyles.stroke,this.strokeWidth=Qk.defaultStyles.strokeWidth,this.lineDash=Qk.defaultStyles.lineDash,this.lineDashOffset=Qk.defaultStyles.lineDashOffset,this.lineCap=Qk.defaultStyles.lineCap,this.lineJoin=Qk.defaultStyles.lineJoin,this.opacity=Qk.defaultStyles.opacity,this.fillShadow=Qk.defaultStyles.fillShadow}restoreOwnStyles(){const t=this.constructor.defaultStyles,e=Object.getOwnPropertyNames(t);for(let i=0,n=e.length;i<n;i++){const n=e[i];this[n]=t[n]}}updateGradient(){const{fill:t}=this;let e;if((null==t?void 0:t.startsWith("linear-gradient"))&&(e=Jk.exec(t))){const t=parseFloat(e[1]),i=[],n=e[2],o=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let r;for(;r=o.exec(n);)i.push(r[0]);this.gradient=new Zk,this.gradient.angle=t,this.gradient.stops=i.map((t,e)=>({offset:e/(i.length-1),color:t}))}else this.gradient=void 0}align(t,e){var i,n,o;const r=null!==(o=null===(n=null===(i=this.layerManager)||void 0===i?void 0:i.canvas)||void 0===n?void 0:n.pixelRatio)&&void 0!==o?o:1,s=Math.round(t*r)/r;return null==e?s:0===e?0:e<1?Math.ceil(e*r)/r:Math.round((e+t)*r)/r-s}fillStroke(t){this.renderFill(t),this.renderStroke(t)}renderFill(t){if(this.fill){const{globalAlpha:e}=t;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),t.fill(),t.globalAlpha=e}t.shadowColor="rgba(0, 0, 0, 0)"}applyFill(t){this.gradient?t.fillStyle=this.gradient.createGradient(t,this.computeBBox()):t.fillStyle=this.fill}applyFillAlpha(t){const{globalAlpha:e}=t;t.globalAlpha=e*this.opacity*this.fillOpacity}applyShadow(t){var e,i;const n=null!==(i=null===(e=this.layerManager)||void 0===e?void 0:e.canvas.pixelRatio)&&void 0!==i?i:1,o=this.fillShadow;(null==o?void 0:o.enabled)&&(t.shadowColor=o.color,t.shadowOffsetX=o.xOffset*n,t.shadowOffsetY=o.yOffset*n,t.shadowBlur=o.blur*n)}renderStroke(t){if(this.stroke&&this.strokeWidth){const{globalAlpha:e}=t;t.strokeStyle=this.stroke,t.globalAlpha=e*this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),t.stroke(),t.globalAlpha=e}}containsPoint(t,e){return this.isPointInPath(t,e)}}Qk.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0}),KA([_k({redraw:Ik.MINOR}),YA("design:type",Number)],Qk.prototype,"fillOpacity",void 0),KA([_k({redraw:Ik.MINOR}),YA("design:type",Number)],Qk.prototype,"strokeOpacity",void 0),KA([_k({redraw:Ik.MINOR,changeCb:t=>t.updateGradient()}),YA("design:type",Object)],Qk.prototype,"fill",void 0),KA([_k({redraw:Ik.MINOR}),YA("design:type",Object)],Qk.prototype,"stroke",void 0),KA([_k({redraw:Ik.MINOR}),YA("design:type",Number)],Qk.prototype,"strokeWidth",void 0),KA([_k({redraw:Ik.MINOR}),YA("design:type",Object)],Qk.prototype,"lineDash",void 0),KA([_k({redraw:Ik.MINOR}),YA("design:type",Number)],Qk.prototype,"lineDashOffset",void 0),KA([_k({redraw:Ik.MINOR}),YA("design:type",String)],Qk.prototype,"lineCap",void 0),KA([_k({redraw:Ik.MINOR}),YA("design:type",String)],Qk.prototype,"lineJoin",void 0),KA([_k({redraw:Ik.MINOR,convertor:t=>Math.min(1,Math.max(0,t))}),YA("design:type",Number)],Qk.prototype,"opacity",void 0),KA([_k({redraw:Ik.MINOR,checkDirtyOnAssignment:!0}),YA("design:type",Object)],Qk.prototype,"fillShadow",void 0);function tM(t){const{redraw:e=Ik.MAJOR,changeCb:i}=null!=t?t:{};return _k({redraw:e,type:"font",changeCb:i})}class eM extends Qk{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=eM.defaultStyles.textAlign,this.textBaseline=eM.defaultStyles.textBaseline,this.lineHeight=void 0}_setLines(){this.lines=aM(this.text)}get font(){return(null==this._font||this._dirtyFont)&&(this._dirtyFont=!1,this._font=iM(this)),this._font}computeBBox(){return $k.has.textMetrics?oM(this.lines,this.x,this.y,this):rM(this.lines,this.x,this.y,this)}getLineHeight(t){var e,i;if(this.lineHeight)return this.lineHeight;if($k.has.textMetrics){const n=$k.measureText(t,this.font,this.textBaseline,this.textAlign);return(null!==(e=n.fontBoundingBoxAscent)&&void 0!==e?e:n.emHeightAscent)+(null!==(i=n.fontBoundingBoxDescent)&&void 0!==i?i:n.emHeightDescent)}return $k.getTextSize(t,this.font).height}isPointInPath(t,e){const i=this.transformPoint(t,e),n=this.computeBBox();return!!n&&n.containsPoint(i.x,i.y)}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===Ik.NONE&&!i)return void(n&&(n.nodesSkipped+=this.nodeCount.count));if(!this.lines.length||!this.layerManager)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(e);const{fill:o,stroke:r,strokeWidth:s}=this;e.font=this.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline;const a=this.layerManager.canvas.pixelRatio||1,{globalAlpha:l}=e;if(o){e.fillStyle=o,e.globalAlpha=l*this.opacity*this.fillOpacity;const{fillShadow:t}=this;(null==t?void 0:t.enabled)&&(e.shadowColor=t.color,e.shadowOffsetX=t.xOffset*a,e.shadowOffsetY=t.yOffset*a,e.shadowBlur=t.blur*a),this.renderLines((t,i,n)=>e.fillText(t,i,n))}if(r&&s){e.strokeStyle=r,e.lineWidth=s,e.globalAlpha=l*this.opacity*this.strokeOpacity;const{lineDash:t,lineDashOffset:i,lineCap:n,lineJoin:o}=this;t&&e.setLineDash(t),i&&(e.lineDashOffset=i),n&&(e.lineCap=n),o&&(e.lineJoin=o),this.renderLines((t,i,n)=>e.strokeText(t,i,n))}super.render(t)}renderLines(t){const{lines:e,x:i,y:n}=this,o=this.lines.map(t=>this.getLineHeight(t));let r=-(o.reduce((t,e)=>t+e,0)-o[0])*sM(this.textBaseline);for(let s=0;s<e.length;s++)t(e[s],i,n+r),r+=o[s]}static wrap(t,e,i,n,o,r="ellipsis"){var s;const a="hide"!==r,l=function(t){const e=new Map,i=e=>$k.getTextSize(e,t);return{size:i,width:t=>{if(e.has(t))return e.get(t);const{width:n}=i(t);return e.set(t,n),n}}}(iM(n)),c=t.split(/\r?\n/g);if(0===c.length)return"";if("never"===o)return null!==(s=eM.truncateLine(c[0],e,l,a?"auto":"never"))&&void 0!==s?s:"";const d=[];let u=0;for(const t of c){const r=eM.wrapLine(t,e,i,l,n,o,u,a);if(null==r)return"";if(d.push(r.result),u=r.cumulativeHeight,r.truncated)break}return d.join("\n").trim()}static wrapLine(t,e,i,n,o,r,s,a){if(!(t=t.trim()))return{result:"",truncated:!1,cumulativeHeight:s};const l=n.size(t);if(l.width<=e)return{result:t,truncated:!1,cumulativeHeight:s+l.height};if(l.height>i||n.width("W")>e)return a?{result:"",truncated:!0,cumulativeHeight:s}:void 0;const c=t.split(/\s+/g),d=eM.wrapLineSequentially(c,e,i,n,o,r,s,a);if(null==d)return;s=d.cumulativeHeight;let{lines:u}=d;if(!d.wordsBrokenOrTruncated&&!d.linesTruncated){const t=d.lines.length,i=eM.wrapLineBalanced(c,e,n,t);i.length===u.length&&(u=i)}return{result:u.map(t=>t.join(" ")).join("\n"),truncated:d.linesTruncated,cumulativeHeight:s}}static breakWord(t,e,i,n,o){const r=e=>eM.punctuationMarks.includes(t[e]),s=n?o.width("-"):0,a=[];let l=0,c=0;for(let n=0;n<t.length;n++){const r=t[n],d=o.width(r);l+d+s>(0===c?e:i)&&(a.push(n),l=0,c++),l+=d}const d=[];let u=0;for(const e of a){let i=t.substring(u,e);n&&i.length>0&&!r(e-1)&&!r(e)&&(i+="-"),d.push(i),u=e}return d.push(t.substring(u)),d}static truncateLine(t,e,i,n){t=t.trimEnd();const o=i.width(t);if(o>e&&"never"===n)return;if(o<=e&&"force"!==n)return t;const r=i.width("\u2026");let s=t,a=o;for(;s.length>0&&a+r>e;)s=s.slice(0,-1).trimEnd(),a=i.width(s);return a+r<=e?s+"\u2026":void 0}static wrapLineSequentially(t,e,i,n,o,r,s,a){const{fontSize:l=0,lineHeight:c=l*eM.defaultLineHeightRatio}=o,d="always"===r||"hyphenate"===r,u="hyphenate"===r,h=n.width(" ");let p=!1,f=!1;const g=[];let v=[],y=0;const m=()=>({lines:g,linesTruncated:f,wordsBrokenOrTruncated:p,cumulativeHeight:s}),b=()=>{if(!a)return;const t=v.join(" "),i=eM.truncateLine(t,e,n,"force");return null!=i?(v.splice(0,v.length,i),f=!0,m()):void 0},S=()=>{const t=s+c;return!(t>=i)&&(v=[],y=0,s=t,g.push(v),!0)};if(!S())return b();for(let i=0;i<t.length;i++){const o=t[i],r=n.width(o),s=0===v.length?0:h,l=y+s+r;if(l<=e)v.push(o),y=l;else if(r<=e){if(!S())return b();v.push(o),y=r}else{if(p=!0,!d){if(a){if(!S())return b();const r=eM.truncateLine(o,e,n,"force");if(null==r)return;v.push(r),i<t.length-1&&(f=!0);break}return}{const t=e-y-s,i=eM.breakWord(o,t,e,u,n);for(let t=0;t<i.length;t++){const e=i[t];if(e&&v.push(e),t===i.length-1)y=n.width(e);else if(!S())return b()}}}}return m()}static wrapLineBalanced(t,e,i,n){const o=t.reduce((t,e)=>t+i.width(e),0),r=i.width(" "),s=(o+r*(t.length-n-2))/n,a=[];let l=[],c=i.width(t[0]),d=!0;for(const n of t){const t=i.width(n);if(d){l=[],l.push(n),c=t,d=!1,a.push(l);continue}const o=c+r+t;o<=s?(l.push(n),c=o):o<=e?(l.push(n),d=!0):(l=[n],c=t,a.push(l))}return a}setFont(t){this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontStyle=t.fontStyle,this.fontWeight=t.fontWeight}setAlign(t){this.textAlign=t.textAlign,this.textBaseline=t.textBaseline}}function iM(t){const{fontFamily:e,fontSize:i,fontStyle:n,fontWeight:o}=t;return[null!=n?n:"",null!=o?o:"",i+"px",e].join(" ").trim()}function nM(t,e,i,n){return $k.has.textMetrics?oM(t,e,i,n):rM(t,e,i,n)}function oM(t,e,i,n){var o,r;let s=0,a=0,l=0,c=0,d=0;const u=iM(n),{lineHeight:h,textBaseline:p=eM.defaultStyles.textBaseline,textAlign:f=eM.defaultStyles.textAlign}=n;for(let e=0;e<t.length;e++){const i=$k.measureText(t[e],u,p,f);s=Math.max(s,i.actualBoundingBoxLeft),l=Math.max(l,i.width),0==e?(a+=i.actualBoundingBoxAscent,c+=i.actualBoundingBoxAscent):d+=null!==(o=i.fontBoundingBoxAscent)&&void 0!==o?o:i.emHeightAscent,e==t.length-1?c+=i.actualBoundingBoxDescent:d+=null!==(r=i.fontBoundingBoxDescent)&&void 0!==r?r:i.emHeightDescent}return void 0!==h&&(d=(t.length-1)*h),c+=d,a+=d*sM(p),new Wk(e-s,i-a,l,c)}function rM(t,e,i,n){let o=0,r=0,s=0;const a=iM(n),{lineHeight:l,textBaseline:c=eM.defaultStyles.textBaseline,textAlign:d=eM.defaultStyles.textAlign}=n;if(t.length>0){const e=$k.getTextSize(t[0],a);o=e.width,r=e.height}for(let e=1;e<t.length;e++){const i=$k.getTextSize(t[e],a);o=Math.max(o,i.width),s+=null!=l?l:i.height}switch(d){case"end":case"right":e-=o;break;case"center":e-=o/2}switch(c){case"alphabetic":i-=.7*r+.5*s;break;case"middle":i-=.45*r+.5*s;break;case"ideographic":i-=r+s;break;case"hanging":i-=.2*r+.5*s;break;case"bottom":i-=r+s}return new Wk(e,i,o,r+s)}function sM(t){switch(t){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return.5}}function aM(t){return"string"==typeof t?t.split(/\r?\n/g):[]}function lM(t,e){return cT((i,n,o)=>(i[t][null!=e?e:n]=o,o))}function cM(t){const{newValue:e,oldValue:i,changeValue:n}=t;return cT((t,o,r,s)=>(r!==s&&(void 0!==s&&(null==i||i.call(t,s)),void 0!==r&&(null==e||e.call(t,r)),null==n||n.call(t,r,s)),r))}eM.className="Text",eM.defaultLineHeightRatio=1.15,eM.defaultStyles=Object.assign({},Qk.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),eM.ellipsis="\u2026",eM.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],KA([_k({redraw:Ik.MAJOR}),YA("design:type",Number)],eM.prototype,"x",void 0),KA([_k({redraw:Ik.MAJOR}),YA("design:type",Number)],eM.prototype,"y",void 0),KA([_k({redraw:Ik.MAJOR,changeCb:t=>t._setLines()}),YA("design:type",String)],eM.prototype,"text",void 0),KA([tM(),YA("design:type",String)],eM.prototype,"fontStyle",void 0),KA([tM(),YA("design:type",String)],eM.prototype,"fontWeight",void 0),KA([tM(),YA("design:type",Number)],eM.prototype,"fontSize",void 0),KA([tM(),YA("design:type",String)],eM.prototype,"fontFamily",void 0),KA([_k({redraw:Ik.MAJOR}),YA("design:type",String)],eM.prototype,"textAlign",void 0),KA([_k({redraw:Ik.MAJOR}),YA("design:type",String)],eM.prototype,"textBaseline",void 0),KA([_k({redraw:Ik.MAJOR}),YA("design:type",Number)],eM.prototype,"lineHeight",void 0);class dM{constructor(){this.node=new eM,this.enabled=!1,this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.maxWidth=void 0,this.maxHeight=void 0,this.wrapping="always";const t=this.node;t.textAlign="center",t.pointerEvents=Uk.None}computeTextWrap(t,e){var i,n;const{text:o,wrapping:r}=this,s=Math.min(null!==(i=this.maxWidth)&&void 0!==i?i:1/0,t),a=null!==(n=this.maxHeight)&&void 0!==n?n:e;if(!isFinite(s)&&!isFinite(a))return void(this.node.text=o);const l=eM.wrap(null!=o?o:"",s,a,this,r);this.node.text=l}}dM.SMALL_PADDING=10,dM.LARGE_PADDING=20,KA([PT(UT),YA("design:type",Object)],dM.prototype,"enabled",void 0),KA([PT(YT),lM("node"),YA("design:type",String)],dM.prototype,"text",void 0),KA([PT(fk),lM("node"),YA("design:type",Object)],dM.prototype,"fontStyle",void 0),KA([PT(vk),lM("node"),YA("design:type",Object)],dM.prototype,"fontWeight",void 0),KA([PT(ok(0)),lM("node"),YA("design:type",Number)],dM.prototype,"fontSize",void 0),KA([PT(KT),lM("node"),YA("design:type",String)],dM.prototype,"fontFamily",void 0),KA([PT(tk),lM("node","fill"),YA("design:type",Object)],dM.prototype,"color",void 0),KA([PT(rk(0)),YA("design:type",Number)],dM.prototype,"spacing",void 0),KA([PT(rk(0)),YA("design:type",Number)],dM.prototype,"lineHeight",void 0),KA([PT(rk(0)),YA("design:type",Number)],dM.prototype,"maxWidth",void 0),KA([PT(rk(0)),YA("design:type",Number)],dM.prototype,"maxHeight",void 0),KA([PT(Tk),YA("design:type",String)],dM.prototype,"wrapping",void 0);class uM{constructor(){this.enabled=!1,this.text=void 0,this.spacing=dM.SMALL_PADDING,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.formatter=void 0}}function hM(t,e){const i={};if(Array.isArray(e))for(let n=0;n<t.length;n++)i[""+t[n]]=e[n];else for(let n=0;n<t.length;n++)i[""+t[n]]=e;return i}function pM(t,e){return i=>Number(t)*(1-i)+Number(e)*i}KA([PT(UT),YA("design:type",Object)],uM.prototype,"enabled",void 0),KA([PT(YT),YA("design:type",String)],uM.prototype,"text",void 0),KA([PT(rk(0)),YA("design:type",Number)],uM.prototype,"spacing",void 0),KA([PT(fk),YA("design:type",String)],uM.prototype,"fontStyle",void 0),KA([PT(vk),YA("design:type",String)],uM.prototype,"fontWeight",void 0),KA([PT(ok(0)),YA("design:type",Number)],uM.prototype,"fontSize",void 0),KA([PT(KT),YA("design:type",String)],uM.prototype,"fontFamily",void 0),KA([PT(tk),YA("design:type",String)],uM.prototype,"color",void 0),KA([PT(Tk),YA("design:type",String)],uM.prototype,"wrapping",void 0),KA([PT(zT),YA("design:type",Function)],uM.prototype,"formatter",void 0);const fM=t=>t,gM=t=>Math.sin(t*Math.PI/2),vM=t=>-(Math.cos(t*Math.PI)-1)/2;var yM=Object.freeze({__proto__:null,linear:fM,easeIn:t=>1-Math.cos(t*Math.PI/2),easeOut:gM,easeInOut:vM,easeInQuad:t=>t*t,easeOutQuad:t=>1-Math.pow(1-t,2),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2});const mM={animationDuration:.2,animationDelay:1};var bM;function SM(t){return t.every(t=>t instanceof Kk)}!function(t){t.Loop="loop",t.Reverse="reverse"}(bM||(bM={}));class xM{constructor(t){var e,i,n,o,r,s,a,l,c,d;this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=t.id,this.groupId=t.groupId,this.autoplay=null===(e=t.autoplay)||void 0===e||e,this.delay=null!==(i=t.delay)&&void 0!==i?i:0,this.duration=null!==(n=t.duration)&&void 0!==n?n:1e3,this.ease=null!==(o=t.ease)&&void 0!==o?o:fM,this.repeat=null!==(r=t.repeat)&&void 0!==r?r:0,this.repeatType=null!==(s=t.repeatType)&&void 0!==s?s:bM.Loop,this.onComplete=t.onComplete,this.onPlay=t.onPlay,this.onStop=t.onStop,this.onRepeat=t.onRepeat,this.onUpdate=t.onUpdate,this.interpolate=this.createInterpolator(t.from,t.to),!0===t.skip?(null===(a=this.onUpdate)||void 0===a||a.call(this,t.to,!1,this),null===(l=this.onStop)||void 0===l||l.call(this,this),null===(c=this.onComplete)||void 0===c||c.call(this,this)):this.autoplay&&(this.play(),null===(d=this.onUpdate)||void 0===d||d.call(this,t.from,!0,this))}play(){var t;return this.isPlaying||(this.isPlaying=!0,null===(t=this.onPlay)||void 0===t||t.call(this,this)),this}pause(){return this.isPlaying&&(this.isPlaying=!1),this}stop(){var t;return this.isPlaying&&(this.isPlaying=!1,null===(t=this.onStop)||void 0===t||t.call(this,this)),this}reset(t){const e=this.interpolate(this.isReverse?1-this.delta:this.delta);return this.interpolate=this.createInterpolator(e,t.to),this.elapsed=0,this.iteration=0,"number"==typeof t.delay&&(this.delay=t.delay),"number"==typeof t.duration&&(this.duration=t.duration),"function"==typeof t.ease&&(this.ease=t.ease),this}update(t){var e,i,n;if(this.elapsed+=t,this.elapsed<=this.delay)return this;const o=this.interpolate(this.isReverse?1-this.delta:this.delta);return null===(e=this.onUpdate)||void 0===e||e.call(this,o,!1,this),this.elapsed-this.delay>=this.duration&&(this.iteration<this.repeat?(this.iteration++,this.elapsed=(this.elapsed-this.delay)%this.duration+this.delay,this.repeatType===bM.Reverse&&(this.isReverse=!this.isReverse),null===(i=this.onRepeat)||void 0===i||i.call(this,this)):(this.stop(),null===(n=this.onComplete)||void 0===n||n.call(this,this))),this}get delta(){return this.ease(OT(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(t,e){if("object"!=typeof e)return this.interpolateValue(t,e);const i=Object.keys(e).map(i=>[i,this.interpolateValue(t[i],e[i])]);return t=>{const e={};for(const[n,o]of i)e[n]=o(t);return e}}interpolateValue(t,e){try{switch(typeof t){case"number":return pM(t,e);case"string":return function(t,e){if("string"==typeof t)try{t=RT.fromString(t)}catch(e){t=RT.fromArray([0,0,0])}if("string"==typeof e)try{e=RT.fromString(e)}catch(t){e=RT.fromArray([0,0,0])}const i=pM(t.r,e.r),n=pM(t.g,e.g),o=pM(t.b,e.b),r=pM(t.a,e.a);return t=>RT.fromArray([i(t),n(t),o(t),r(t)]).toRgbaString()}(t,e)}}catch(t){}throw new Error(`Unable to interpolate values: ${t}, ${e}`)}}const CM={added:{animationDuration:.25,animationDelay:.75},updated:{animationDuration:.5,animationDelay:.25},removed:{animationDuration:.25,animationDelay:0},unknown:{animationDuration:1,animationDelay:0}};function wM(t,e,i,n,o,r,s){const{defaultDuration:a}=i,{fromFn:l,toFn:c,intermediateFn:d}=o,u=SM(n),h=u?n:[],p=u?[]:n,f={added:{},removed:{}};r&&s&&(f.added=hM(s.added,!0),f.removed=hM(s.removed,!0));const g=(n,o)=>{var u,h;let p,g=0,v=0;for(const y of o){const m=n[g]===y,b={last:v>=o.length-1,lastLive:g>=n.length-1,prev:o[v-1],prevFromProps:p,prevLive:n[g-1],next:o[v+1],nextLive:n[g+(m?1:0)]},S=`${t}_${e}_${y.id}`;i.stopByAnimationId(S);let x="unknown";m?r&&s&&(x=OM(y,y.datum,r,f)):x="removed";const C=l(y,y.datum,x,b),{animationDelay:w,animationDuration:E,start:O={},finish:D={}}=C,A=HA(C,["animationDelay","animationDuration","start","finish"]),T=c(y,y.datum,x,b),{animationDelay:k,animationDuration:M,start:R={},finish:P={}}=T,N=HA(T,["animationDelay","animationDuration","start","finish"]);i.animate({id:S,groupId:t,from:A,to:N,ease:gM,onPlay:()=>{y.setProperties(Object.assign(Object.assign({},O),R))},onUpdate(t){y.setProperties(t),d&&y.setProperties(d(y,y.datum,x,b))},onStop:()=>{y.setProperties(Object.assign(Object.assign(Object.assign({},N),D),P))},duration:(null!==(u=null!=E?E:M)&&void 0!==u?u:1)*a,delay:(null!==(h=null!=w?w:k)&&void 0!==h?h:0)*a}),m&&g++,v++,p=A}};let v=0;for(const n of p){const o=n.nodes();g(o.filter(t=>!n.isGarbage(t)),o),i.animate({id:`${t}_${e}_selection_${v}`,groupId:t,from:0,to:1,ease:gM,onStop(){n.cleanup()}}),v++}g(h,h)}function EM(t,e,i,n,o,r,s={}){const a=SM(n),l=a?n:[],c=a?[]:n,{animationDelay:d=0,animationDuration:u=1,start:h={},finish:p={}}=s,{defaultDuration:f}=i;i.animate({id:`${t}_${e}`,groupId:t,from:o,to:r,ease:gM,onPlay:()=>{for(const t of l)t.setProperties(h);for(const t of c)for(const e of t.nodes())e.setProperties(h)},onUpdate(t){for(const e of l)e.setProperties(t);for(const e of c)for(const i of e.nodes())i.setProperties(t)},onStop:()=>{for(const t of l)t.setProperties(Object.assign(Object.assign({},r),p));for(const t of c)for(const e of t.nodes())e.setProperties(Object.assign(Object.assign({},r),p))},duration:u*f,delay:d*f})}function OM(t,e,i,n){const o=i(t,e);return n.added[o]?"added":n.removed[o]?"removed":"updated"}var DM=Object.freeze({__proto__:null,NODE_UPDATE_PHASES:["removed","updated","added"],FROM_TO_MIXINS:CM,fromToMotion:wM,staticFromToMotion:EM});const AM=t=>`(${t})`,TM=t=>AM(t)+"?",kM=t=>TM("?:"+t),MM=new RegExp(["^",kM(`${TM(".")}${AM("[<>=^]")}`),TM("[+\\-( ]"),TM("[$\u20ac\xa3\xa5\u20a3\u20b9#]"),TM("0"),TM("\\d+"),TM(","),kM("\\."+AM("\\d+")),TM("~"),TM("[%a-z]"),"$"].join(""),"i"),RM=new RegExp(["^",AM(".*?"),`#\\{${AM(".+?")}\\}`,AM(".*?"),"$"].join(""));function PM(t){let e,i;const n=RM.exec(t);n&&([,e,t,i]=n);const o=MM.exec(t);if(!o)throw new Error("The number formatter is invalid: "+t);const[,r,s,a,l,c,d,u,h,p,f]=o;return{fill:r,align:s,sign:a,symbol:l,zero:c,width:parseInt(d),comma:u,precision:parseInt(h),trim:Boolean(p),type:f,prefix:e,suffix:i}}function NM(t){const e="string"==typeof t?PM(t):t,{fill:i,align:n,sign:o="-",symbol:r,zero:s,width:a,comma:l,type:c,prefix:d="",suffix:u="",precision:h}=e;let{trim:p}=e;const f=void 0===h||isNaN(h);let g,v;if(c)if(c in FM&&c in IM)g=f?IM[c]:FM[c];else if(c in FM)g=FM[c];else{if(!(c in IM))throw new Error("The number formatter type is invalid: "+c);g=IM[c]}else g=FM.g,p=!0;return v=null==h||f?c?6:12:h,t=>{let e=g(t,v);return p&&(e=e.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")),l&&(e=function(t,e){let i=t.indexOf(".");i<0&&(i=t.length);const n=t.substring(0,i).split(""),o=t.substring(i);for(let t=n.length-3;t>0;t-=3)n.splice(t,0,e);return`${n.join("")}${o}`}(e,l)),e=function(t,e,i=""){if("("===i)return t>=0?e:`(${e})`;const n="+"===i?"+":"";return`${t>=0?n:"\u2212"}${e}`}(t,e,o),r&&"#"!==r&&(e=`${r}${e}`),"#"===r&&"x"===c&&(e="0x"+e),"s"===c&&(e=`${e}${function(t){return VM[_M(t)]}(t)}`),"%"!==c&&"p"!==c||(e+="%"),null==a||isNaN(a)||(e=function(t,e,i=" ",n=">"){let o=t;if(">"!==n&&n){if("<"===n)o=o.padEnd(e,i);else if("^"===n){const t=Math.max(0,e-o.length),n=Math.ceil(t/2),r=Math.floor(t/2);o=o.padStart(n+o.length,i),o=o.padEnd(r+o.length,i)}}else o=o.padStart(e,i);return o}(e,a,null!=i?i:s,n)),e=`${d}${e}${u}`,e}}const LM=t=>Math.floor(Math.abs(t)),IM={b:t=>LM(t).toString(2),c:t=>String.fromCharCode(t),d:t=>Math.round(Math.abs(t)).toFixed(0),o:t=>LM(t).toString(8),x:t=>LM(t).toString(16),X:t=>IM.x(t).toUpperCase(),n:t=>IM.d(t),"%":t=>""+LM(100*t).toFixed(0)},FM={e:(t,e)=>Math.abs(t).toExponential(e),E:(t,e)=>FM.e(t,e).toUpperCase(),f:(t,e)=>Math.abs(t).toFixed(e),F:(t,e)=>FM.f(t,e).toUpperCase(),g:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),n=Math.floor(Math.log10(i));return n>=-4&&n<e?i.toFixed(e-1-n):i.toExponential(e-1)},G:(t,e)=>FM.g(t,e).toUpperCase(),n:(t,e)=>FM.g(t,e),p:(t,e)=>FM.r(100*t,e),r:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),n=Math.floor(Math.log10(i))-(e-1);if(n<=0)return i.toFixed(-n);const o=Math.pow(10,n);return(Math.round(i/o)*o).toFixed()},s:(t,e)=>{const i=_M(t);return FM.r(t/Math.pow(10,i),e)},"%":(t,e)=>FM.f(100*t,e)};function _M(t){const e=Math.log10(Math.abs(t)),i=3*Math.floor(e/3);return Math.max(GM,Math.min(BM,i))}const GM=-24,BM=24,VM={[GM]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[BM]:"Y"};function jM(t,e){const i=PM(null!=e?e:",f"),{precision:n}=i;(null==n||isNaN(n))&&("f"===i.type||"%"===i.type?i.precision=Math.max(...t.map(t=>{if("number"!=typeof t||0===t)return 0;const e=Math.floor(Math.log10(Math.abs(t))),n=i.type?6:12,o=t.toExponential(n-1).replace(/\.?0+e/,"e"),r=o.indexOf(".");if(r<0)return e>=0?0:-e;const s=o.indexOf("e")-r;return Math.max(0,s-e-1)})):i.type&&!(i.type in FM)||(i.precision=Math.max(...t.map(t=>{if("number"!=typeof t)return 0;const e=t.toExponential((i.type?6:12)-1).replace(/\.?0+e/,"e");return e.substring(0,e.indexOf("e")).replace(".","").length}))));const o=NM(i);return t=>o(Number(t))}function WM(t,e,i,n,o){if(i<2)return KM(t,e,e-t);const r=UM(t,e,i,n,o);return isNaN(r)?new HM(0):KM(t=Math.ceil(t/r)*r,e=Math.floor(e/r)*r,r)}const zM=[1,2,5,10];function UM(t,e,i,n=0,o=1/0){const r=(e-t)/i,s=Math.floor(Math.log10(r)),a=Math.pow(10,s),l=zM.map(r=>{const s=r*a,l=Math.ceil((e-t)/s);return{multiplier:r,isWithinBounds:l>=n&&l<=o,diffCount:Math.abs(l-i)}}).sort((t,e)=>t.isWithinBounds!==e.isWithinBounds?t.isWithinBounds?-1:1:t.diffCount-e.diffCount)[0].multiplier;return!l||isNaN(l)?NaN:l*a}class HM extends Array{constructor(t,e){if(super(),e)for(let t=0,i=e.length;t<i;t++)this[t]=e[t];this.fractionDigits=t}}function KM(t,e,i){const n=(t=>{var e,i;const n=t.split("e");return Math.max((null!==(i=null===(e=n[0].split(".")[1])||void 0===e?void 0:e.length)&&void 0!==i?i:0)-Number(n[1]),0)})((i%1).toExponential()),o=Math.pow(10,n),r=Math.ceil((e-t)/i),s=new HM(n);for(let e=0;e<=r;e++){const n=t+i*e;s.push(Math.round(n*o)/o)}return s}class YM{static is(t){return t instanceof YM}constructor(t,e){this.domain=t,this.range=e,this.nice=!1,this.tickCount=YM.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClampMode="raw",this.cache=null,this.cacheProps=["domain","range","nice","tickCount","minTickCount","maxTickCount"]}transform(t){return t}transformInvert(t){return t}calcBandwidth(t=1){const e=this.getDomain(),i=Math.max(...this.range),n=(e[1]-e[0])/t+1,o=Math.floor(i),r=Math.min(n,o);return i/Math.max(1,r)}fromDomain(t){return"number"==typeof t?t:t instanceof Date?t.getTime():NaN}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(t,e){var i;const n=null!==(i=null==e?void 0:e.clampMode)&&void 0!==i?i:this.defaultClampMode;if(!this.domain||this.domain.length<2)return NaN;this.refresh();const o=this.getDomain().map(t=>this.transform(t)),[r,s]=o,{range:a}=this,[l,c]=a;if(t=this.transform(t),"clamped"===n){if(t<r)return l;if(t>s)return c}return r===s?(l+c)/2:t===r?l:t===s?c:l+(this.fromDomain(t)-this.fromDomain(r))/(this.fromDomain(s)-this.fromDomain(r))*(c-l)}invert(t){this.refresh();const e=this.getDomain().map(t=>this.transform(t)),[i,n]=e,{range:o}=this,[r,s]=o,a=r>s;let l;return t<(a?s:r)?a?n:i:t>(a?r:s)?a?i:n:(l=r===s?this.toDomain((this.fromDomain(i)+this.fromDomain(n))/2):this.toDomain(this.fromDomain(i)+(t-r)/(s-r)*(this.fromDomain(n)-this.fromDomain(i))),this.transformInvert(l))}didChange(){const{cache:t}=this;return!(t&&!this.cacheProps.some(e=>this[e]!==t[e]))&&(this.cache={},this.cacheProps.forEach(t=>this.cache[t]=this[t]),!0)}refresh(){this.didChange()&&this.update()}getPixelRange(){const t=this.range.slice().sort((t,e)=>t-e);return t[1]-t[0]}isDenseInterval({start:t,stop:e,interval:i,count:n}){return null!=n||(n=(e-t)/("number"==typeof i?i:1)),n>=this.getPixelRange()&&(nT.warn("the configured tick interval results in more than 1 tick per pixel, ignoring. Supply a larger tick interval or omit this configuration."),!0)}}YM.defaultTickCount=5,YM.defaultMaxTickCount=6;class XM extends YM{constructor(){super([0,1],[0,1]),this.type="linear"}toDomain(t){return t}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:YM.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||this.domain.some(t=>!isFinite(t)))return[];this.refresh();const[i,n]=this.getDomain(),{interval:o}=this;if(o){const t=Math.abs(o);if(!this.isDenseInterval({start:i,stop:n,interval:t}))return KM(i,n,t)}return WM(i,n,e,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}getTickStep(t,e){var i,n;const o=null!==(i=this.tickCount)&&void 0!==i?i:YM.defaultTickCount;return null!==(n=this.interval)&&void 0!==n?n:UM(t,e,o,this.minTickCount,this.maxTickCount)}updateNiceDomain(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:YM.defaultTickCount;let[i,n]=this.domain;if(e<1)return void(this.niceDomain=[i,n]);if(1===e)return void(this.niceDomain=function(t,e){const i=Math.floor(Math.log10(e-t)),n=Math.pow(10,i);return zM.map(i=>{const o=i*n,r=Math.floor(t/o)*o,s=Math.ceil(e/o)*o;return{error:1-(e-t)/(s-r),domain:[r,s]}}).sort((t,e)=>t.error-e.error)[0].domain}(i,n));let o=i,r=n;for(let t=0;t<4;t++){const t=this.getTickStep(i,n),[e,s]=this.domain;if(t>=1)i=Math.floor(e/t)*t,n=Math.ceil(s/t)*t;else{const o=1/t;i=Math.floor(e*o)/o,n=Math.ceil(s*o)/o}if(i===o&&n===r)break;o=i,r=n}this.niceDomain=[i,n]}tickFormat({ticks:t,specifier:e}){return jM(null!=t?t:this.ticks(),e)}}function qM(t,e){let i=0;return"number"==typeof t&&"number"==typeof e?i=t-e:"string"==typeof t&&"string"==typeof e?i=t.localeCompare(e):null==t&&null==e||(i=null==t?-1:null==e?1:String(t).localeCompare(String(e))),i}function $M(t,e,i){const n=t=>"function"==typeof t?t():t;for(const o in t){const r=i(n(t[o]),n(e[o]));if(0!==r)return r}return 0}class ZM extends Kk{zIndexChanged(){var t;this.layer&&(null===(t=this._layerManager)||void 0===t||t.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return null!=this.layer}constructor(t){var e;super({isVirtual:null==t?void 0:t.isVirtual}),this.opts=t,this.opacity=1,this.lastBBox=void 0;const{zIndex:i,zIndexSubOrder:n}=null!=t?t:{};this.isContainerNode=!0,void 0!==i&&(this.zIndex=i),void 0!==n&&(this.zIndexSubOrder=n),this.name=null===(e=this.opts)||void 0===e?void 0:e.name}_setLayerManager(t){var e,i;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(super._setLayerManager(t),t&&(null===(e=this.opts)||void 0===e?void 0:e.layer)){const{zIndex:e,zIndexSubOrder:n,name:o}=null!==(i=this.opts)&&void 0!==i?i:{},r=()=>this.getComputedOpacity(),s=()=>this.getVisibility();this.layer=t.addLayer({zIndex:e,zIndexSubOrder:n,name:o,getComputedOpacity:r,getVisibility:s})}}getComputedOpacity(){let t=1,e=this;do{e instanceof ZM&&(t*=e.opacity)}while(e=e.parent);return t}getVisibility(){let t=this,e=this.visible;for(;t=t.parent;)t.visible||(e=t.visible);return e}visibilityChanged(){this.layer&&(this.layer.enabled=this.visible)}markDirty(t,e=Ik.TRIVIAL){if(this.isVirtual)return void super.markDirty(t,e);let i=e;(e<Ik.MINOR||null!=this.layer)&&(i=Ik.TRIVIAL),super.markDirty(t,e,i)}containsPoint(t,e){return!0}computeBBox(){return this.computeTransformMatrix(),ZM.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}render(t){var e,i;const{opts:{name:n}={},_debug:o=(()=>{})}=this,{dirty:r,dirtyZIndex:s,layer:a,children:l,clipRect:c,dirtyTransform:d}=this;let{ctx:u,forceRender:h,clipBBox:p}=t;const{resized:f,stats:g}=t,v=u.getTransform(),y=r>=Ik.MINOR||s||f;let m=y,b=!1;for(const t of l)if(m||(m=null==t.layerManager&&t.dirty>=Ik.TRIVIAL),b||(b=null!=t.layerManager&&t.dirty>=Ik.TRIVIAL),m)break;if(n&&o({name:n,group:this,isDirty:y,isChildDirty:m,dirtyTransform:d,renderCtx:t,forceRender:h}),d)h="dirtyTransform";else if(a){const t=this.computeBBox();void 0!==this.lastBBox&&this.lastBBox.equals(t)||(h="dirtyTransform",this.lastBBox=t)}if(!(y||m||b||h))return n&&g&&o({name:n,result:"skipping",renderCtx:t,counts:this.nodeCount,group:this}),a&&g&&(g.layersSkipped++,g.nodesSkipped+=this.nodeCount.count),void this.markClean({recursive:!1});const S=this.visible;if(a){if(u=a.context,u.save(),u.resetTransform(),"dirtyTransform"!==h&&(h=m||s),h&&a.clear(),p){const{width:e,height:i,x:r,y:s}=p;o(()=>({name:n,clipBBox:p,ctxTransform:u.getTransform(),renderCtx:t,group:this})),this.clipCtx(u,r,s,e,i)}u.setTransform(v)}else u.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(u),c){const{x:e,y:i,width:r,height:s}=c;u.save(),o(()=>({name:n,clipRect:c,ctxTransform:u.getTransform(),renderCtx:t,group:this})),this.clipCtx(u,e,i,r,s),p=this.matrix.transformBBox(c)}const x=this.hasVirtualChildren();s?(this.sortChildren(l),"dirtyTransform"!==h&&(h=!0)):x&&this.sortChildren(l);const C=h!==t.forceRender||p!==t.clipBBox||u!==t.ctx?Object.assign(Object.assign({},t),{ctx:u,forceRender:h,clipBBox:p}):t;let w=0;for(const t of l)t.visible&&S?h||t.dirty!==Ik.NONE?(u.save(),t.render(C),u.restore()):g&&(w+=t.nodeCount.count):(t.markClean(),g&&(w+=t.nodeCount.count));if(g&&(g.nodesSkipped+=w),super.render(t),c&&u.restore(),x)for(const t of this.virtualChildren)t.markClean({recursive:"virtual"});a&&(g&&g.layersRendered++,u.restore(),h&&a.snapshot(),null===(i=(e=a.context).verifyDepthZero)||void 0===i||i.call(e)),n&&g&&o({name:n,result:"rendered",skipped:w,renderCtx:t,counts:this.nodeCount,group:this})}sortChildren(t){this.dirtyZIndex=!1,t.sort((t,e)=>{var i,n;return $M([t.zIndex,...null!==(i=t.zIndexSubOrder)&&void 0!==i?i:[void 0,void 0],t.serialNumber],[e.zIndex,...null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0],e.serialNumber],qM)})}clipCtx(t,e,i,n,o){t.beginPath(),t.moveTo(e,i),t.lineTo(e+n,i),t.lineTo(e+n,i+o),t.lineTo(e,i+o),t.closePath(),t.clip()}static computeBBox(t){let e=1/0,i=-1/0,n=1/0,o=-1/0;return t.forEach(t=>{if(!t.visible)return;const r=t.computeTransformedBBox();if(!r)return;const s=r.x,a=r.y;s<e&&(e=s),a<n&&(n=a),s+r.width>i&&(i=s+r.width),a+r.height>o&&(o=a+r.height)}),new Wk(e,n,i-e,o-n)}setClipRectInGroupCoordinateSpace(t){this.clipRect=t?this.transformBBox(t):void 0}}ZM.className="Group",KA([_k({redraw:Ik.MAJOR,convertor:t=>Math.min(1,Math.max(0,t))}),YA("design:type",Number)],ZM.prototype,"opacity",void 0);class JM{static select(t,e,i=!0){return new JM(t,e,i)}static selectAll(t,e){const i=[],n=t=>{e(t)&&i.push(t),t.children.forEach(n)};return n(t),i}static selectByClass(t,e){return JM.selectAll(t,t=>t instanceof e)}static selectByTag(t,e){return JM.selectAll(t,t=>t.tag===e)}constructor(t,e,i=!0){this.parentNode=t,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=sT.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(Kk,e)?()=>new e:e}createNode(t,e,i){const n=this.nodeFactory(t);return n.datum=t,null==e||e(n),null!=i?this._nodes.splice(i,0,n):this._nodes.push(n),this.parentNode.appendChild(n),n}update(t,e,i){if(this.garbageBin.size>0&&this.debug("Selection - update() called with pending garbage: "+t),i){const n=new Map(t.map((t,e)=>[i(t),[t,e]]));for(const[t,e]of this._nodesMap.entries())if(n.has(e)){const[i]=n.get(e);t.datum=i,this.garbageBin.delete(t),n.delete(e)}else this.garbageBin.add(t);for(const[t,[i,o]]of n.entries())this._nodesMap.set(this.createNode(i,e,o),t)}else{const i=Math.max(t.length,this.data.length);for(let n=0;n<i;n++)n>=t.length?this.garbageBin.add(this._nodes[n]):n>=this._nodes.length?this.createNode(t[n],e):(this._nodes[n].datum=t[n],this.garbageBin.delete(this._nodes[n]))}return this.data=t.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return 0===this.garbageBin.size||(this._nodes=this._nodes.filter(t=>!this.garbageBin.has(t)||(this._nodesMap.delete(t),this.garbageBin.delete(t),this.parentNode.removeChild(t),!1))),this}clear(){return this.update([]),this}isGarbage(t){return this.garbageBin.has(t)}hasGarbage(){return this.garbageBin.size>0}each(t){return this._nodes.forEach((e,i)=>t(e,e.datum,i)),this}*[Symbol.iterator](){for(let t=0;t<this._nodes.length;t++){const e=this._nodes[t],i=this._nodes[t].datum;yield{node:e,datum:i,index:t}}}select(t){return JM.selectAll(this.parentNode,t)}selectByClass(t){return JM.selectByClass(this.parentNode,t)}selectByTag(t){return JM.selectByTag(this.parentNode,t)}nodes(){return this._nodes}}class QM extends Qk{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(t){this.x1=t,this.x2=t}set y(t){this.y1=t,this.y2=t}computeBBox(){return new Wk(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(t,e){if(this.x1===this.x2||this.y1===this.y2){const{x:i,y:n}=this.transformPoint(t,e);return this.computeBBox().grow(this.strokeWidth/2).containsPoint(i,n)}return!1}render(t){var e;const{ctx:i,forceRender:n,stats:o}=t;if(this.dirty===Ik.NONE&&!n)return void(o&&(o.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:r,y1:s,x2:a,y2:l}=this;if(r===a){const t=Math.round(r)+Math.floor(this.strokeWidth)%2/2;r=t,a=t}else if(s===l){const t=Math.round(s)+Math.floor(this.strokeWidth)%2/2;s=t,l=t}i.beginPath(),i.moveTo(r,s),i.lineTo(a,l),this.fillStroke(i),null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}function tR(t,e,i,n){if(0===t)return function(t,e,i){if(0===t)return function(t,e){const i=-e/t;return 0!==t&&i>=0&&i<=1?[i]:[]}(e,i);const n=e*e-4*t*i,o=[];if(0===n){const i=-e/(2*t);i>=0&&i<=1&&o.push(i)}else if(n>0){const i=Math.sqrt(n),r=(-e-i)/(2*t),s=(-e+i)/(2*t);r>=0&&r<=1&&o.push(r),s>=0&&s<=1&&o.push(s)}return o}(e,i,n);const o=e/t,r=i/t,s=(3*r-o*o)/9,a=(9*o*r-27*(n/t)-2*o*o*o)/54,l=s*s*s+a*a,c=[];if(l>=0){const t=Math.sqrt(l),e=Math.sign(a+t)*Math.pow(Math.abs(a+t),1/3),i=Math.sign(a-t)*Math.pow(Math.abs(a-t),1/3),n=Math.abs(Math.sqrt(3)*(e-i)/2),r=-1/3*o+(e+i);if(r>=0&&r<=1&&c.push(r),0===n){const t=-1/3*o-(e+i)/2;t>=0&&t<=1&&c.push(t)}}else{const t=Math.acos(a/Math.sqrt(-s*s*s)),e=1/3*o,i=2*Math.sqrt(-s),n=i*Math.cos(1/3*t)-e,r=i*Math.cos(1/3*(t+2*Math.PI))-e,l=i*Math.cos(1/3*(t+4*Math.PI))-e;n>=0&&n<=1&&c.push(n),r>=0&&r<=1&&c.push(r),l>=0&&l<=1&&c.push(l)}return c}function eR(t,e,i,n,o,r,s,a){const l=(i-t)*(a-r)-(n-e)*(s-o);if(0===l)return null;const c=((s-o)*(e-r)-(t-o)*(a-r))/l,d=((i-t)*(e-r)-(n-e)*(t-o))/l;return c>=0&&c<=1&&d>=0&&d<=1?{x:t+c*(i-t),y:e+c*(n-e)}:null}function iR(t,e,i,n,o,r,s,a,l,c,d,u){const h=[],p=c-u,f=d-l,g=l*(u-c)-c*(d-l),v=nR(t,i,o,s),y=nR(e,n,r,a),m=tR(p*v[0]+f*y[0],p*v[1]+f*y[1],p*v[2]+f*y[2],p*v[3]+f*y[3]+g);for(const t of m){const e=t*t,i=t*e,n=v[0]*i+v[1]*e+v[2]*t+v[3],o=y[0]*i+y[1]*e+y[2]*t+y[3];let r;r=l!==d?(n-l)/(d-l):(o-c)/(u-c),r>=0&&r<=1&&h.push({x:n,y:o})}return h}function nR(t,e,i,n){return[3*e-t-3*i+n,3*t-6*e+3*i,-3*t+3*e,t]}function oR(t,e,i,n,o,r,s,a,l,c){const d=(c-a)/(l-s),u=a-d*s,h=Math.pow(d,2)+1,p=2*(d*(u-e)-t),f=Math.pow(t,2)+Math.pow(u-e,2)-Math.pow(i,2),g=Math.pow(p,2)-4*h*f;if(g<0)return[];const v=(-p+Math.sqrt(g))/2/h,y=(-p-Math.sqrt(g))/2/h,m=[];return[v,y].forEach(t=>{if(!(t>=Math.min(s,l)&&t<=Math.max(s,l)))return;const e=d*t+u,i=ST(n);let a=ST(o),c=ST(Math.atan2(e,t));a<=i&&(a+=2*Math.PI),c<i&&(c+=2*Math.PI),r!==(c>=i&&c<=a)&&m.push({x:t,y:e})}),m}function rR(t,e,i){const n=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),{innerRadius:o,outerRadius:r}=i;if(i.startAngle===i.endAngle||n<Math.min(o,r)||n>Math.max(o,r))return!1;const s=xT(i.startAngle),a=xT(i.endAngle),l=Math.atan2(e,t);return s<a?l<=a&&l>=s:l<=a&&l>=-Math.PI||l>=s&&l<=Math.PI}function sR(t,e){const{startAngle:i,endAngle:n,innerRadius:o,outerRadius:r}=e,s={x:r*Math.cos(i),y:r*Math.sin(i)},a={x:r*Math.cos(n),y:r*Math.sin(n)},l=0===o?{x:0,y:0}:{x:o*Math.cos(i),y:o*Math.sin(i)},c=0===o?{x:0,y:0}:{x:o*Math.cos(n),y:o*Math.sin(n)};return null!=eR(t.start.x,t.start.y,t.end.x,t.end.y,s.x,s.y,l.x,l.y)||null!=eR(t.start.x,t.start.y,t.end.x,t.end.y,a.x,a.y,c.x,c.y)||oR(0,0,r,i,n,!0,t.start.x,t.start.y,t.end.x,t.end.y).length>0}var aR;QM.className="Line",QM.defaultStyles=Object.assign({},Qk.defaultStyles,{fill:void 0,strokeWidth:1}),KA([_k({redraw:Ik.MAJOR}),YA("design:type",Number)],QM.prototype,"x1",void 0),KA([_k({redraw:Ik.MAJOR}),YA("design:type",Number)],QM.prototype,"y1",void 0),KA([_k({redraw:Ik.MAJOR}),YA("design:type",Number)],QM.prototype,"x2",void 0),KA([_k({redraw:Ik.MAJOR}),YA("design:type",Number)],QM.prototype,"y2",void 0),function(t){t[t.Move=0]="Move",t[t.Line=1]="Line",t[t.Arc=2]="Arc",t[t.Curve=3]="Curve",t[t.ClosePath=4]="ClosePath"}(aR||(aR={}));class lR{constructor(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}isDirty(){if(this._closedPath!==this.previousClosedPath)return!0;if(this.previousCommands.length!==this.commands.length)return!0;if(this.previousParams.length!==this.params.length)return!0;for(let t=0;t<this.commands.length;t++)if(this.commands[t]!==this.previousCommands[t])return!0;for(let t=0;t<this.params.length;t++)if(this.params[t]!==this.previousParams[t])return!0;return!1}draw(t){const e=this.commands,i=this.params;let n=0;t.beginPath();for(const o of e)switch(o){case aR.Move:t.moveTo(i[n++],i[n++]);break;case aR.Line:t.lineTo(i[n++],i[n++]);break;case aR.Curve:t.bezierCurveTo(i[n++],i[n++],i[n++],i[n++],i[n++],i[n++]);break;case aR.Arc:t.arc(i[n++],i[n++],i[n++],i[n++],i[n++],1===i[n++]);break;case aR.ClosePath:t.closePath()}0===e.length&&t.closePath()}moveTo(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push(aR.Move),this.params.push(t,e)}lineTo(t,e){this.xy?(this.commands.push(aR.Line),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)}rect(t,e,i,n){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+n),this.lineTo(t,e+n),this.closePath()}arc(t,e,i,n,o,r=!1){const s=t+i*Math.cos(o),a=e+i*Math.sin(o);this.xy?(this.xy[0]=s,this.xy[1]=a):this.xy=[s,a],this.commands.push(aR.Arc),this.params.push(t,e,i,n,o,r?1:0)}cubicCurveTo(t,e,i,n,o,r){this.xy||this.moveTo(t,e),this.commands.push(aR.Curve),this.params.push(t,e,i,n,o,r),this.xy&&(this.xy[0]=o,this.xy[1]=r)}get closedPath(){return this._closedPath}closePath(){this.xy&&(this.xy=void 0,this.commands.push(aR.ClosePath),this._closedPath=!0)}clear({trackChanges:t}={trackChanges:!1}){t?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1}isPointInPath(t,e){const i=this.commands,n=this.params,o=i.length,r=-1e4,s=-1e4;let a=NaN,l=NaN,c=0,d=0,u=0;for(let h=0,p=0;h<o;h++)switch(i[h]){case aR.Move:!isNaN(a)&&eR(a,l,c,d,r,s,t,e)&&u++,c=n[p++],a=c,d=n[p++],l=d;break;case aR.Line:eR(c,d,n[p++],n[p++],r,s,t,e)&&u++,c=n[p-2],d=n[p-1];break;case aR.Curve:u+=iR(c,d,n[p++],n[p++],n[p++],n[p++],n[p++],n[p++],r,s,t,e).length,c=n[p-2],d=n[p-1];break;case aR.Arc:const i=n[p++],o=n[p++],h=n[p++],f=n[p++],g=n[p++];u+=oR(i,o,h,f,g,Boolean(n[p++]),r,s,t,e).length,c=i+Math.cos(g)*h,d=o+Math.sin(g)*h;break;case aR.ClosePath:!isNaN(a)&&eR(a,l,c,d,r,s,t,e)&&u++}return u%2==1}getPoints(){const{commands:t,params:e}=this,i=[];let n=0;for(let o=0;o<t.length;o++)switch(t[o]){case aR.Move:case aR.Line:i.push({x:e[n++],y:e[n++]});break;case aR.Curve:n+=4,i.push({x:e[n++],y:e[n++]});break;case aR.Arc:i.push({x:e[n++],y:e[n++]}),n+=4;break;case aR.ClosePath:}return i}}function cR(t){const{redraw:e=Ik.MAJOR,changeCb:i,convertor:n}=null!=t?t:{};return _k({redraw:e,type:"path",convertor:n,changeCb:i})}class dR extends Qk{constructor(){super(...arguments),this.path=new lR,this.clipScalingX=1,this.clipScalingY=1,this._dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty(this,Ik.MAJOR))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var t,e,i,n;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!==(e=null===(t=this.fillShadow)||void 0===t?void 0:t.isDirty())&&void 0!==e&&e||null!==(n=null===(i=this.clipPath)||void 0===i?void 0:i.isDirty())&&void 0!==n&&n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.path.closedPath&&this.path.isPointInPath(i.x,i.y)}isDirtyPath(){return!1}updatePath(){}clip(t,e){const i=t.getTransform(),n=1!==this.clipScalingX||1!==this.clipScalingY;n&&t.scale(this.clipScalingX,this.clipScalingY),e(),n&&t.setTransform(i)}render(t){var e;const{ctx:i,forceRender:n,stats:o}=t;this.dirty!==Ik.NONE||n?(this.computeTransformMatrix(),this.matrix.toContext(i),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.clipPath&&null!=this.clipMode?(i.save(),"normal"===this.clipMode&&this.clip(i,()=>{var t;null===(t=this.clipPath)||void 0===t||t.draw(i),i.clip()}),this.clipScalingX>0&&this.clipScalingY>0&&(this.path.draw(i),this.fillStroke(i)),"punch-out"===this.clipMode&&this.clip(i,()=>{var t,e;null===(t=this.clipPath)||void 0===t||t.draw(i),i.clip();const{x:n=-1e4,y:o=-1e4,width:r=2e4,height:s=2e4}=null!==(e=this.computeBBox())&&void 0!==e?e:{};i.clearRect(n,o,r,s)}),i.restore()):(this.path.draw(i),this.fillStroke(i)),null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)):o&&(o.nodesSkipped+=this.nodeCount.count)}}dR.className="Path",KA([cR(),YA("design:type",lR)],dR.prototype,"clipPath",void 0),KA([cR(),YA("design:type",String)],dR.prototype,"clipMode",void 0),KA([cR(),YA("design:type",Object)],dR.prototype,"clipScalingX",void 0),KA([cR(),YA("design:type",Object)],dR.prototype,"clipScalingY",void 0);class uR extends dR{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.angleOffset=0,this.inset=0}computeBBox(){const t=this.outerRadius;return new Wk(this.centerX-t,this.centerY-t,2*t,2*t)}updatePath(){const t=this.path,{angleOffset:e,inset:i}=this,n=this.startAngle+e,o=this.endAngle+e,r=Math.abs(this.endAngle-this.startAngle)>=2*Math.PI,s=this.centerX,a=this.centerY;if(t.clear(),r){const e=this.innerRadius<=0?0:this.innerRadius+i,r=Math.min(e,this.outerRadius-i),l=Math.max(e,this.outerRadius-i);t.arc(s,a,l,n,o),r>0&&(t.moveTo(s+r*Math.cos(o),a+r*Math.sin(o)),t.arc(s,a,r,o,n,!0))}else{const e=Math.min(this.innerRadius+i,this.outerRadius-i),r=Math.max(this.innerRadius+i,this.outerRadius-i),l=e>0?i/e:0,c=r>0?i/r:0,d=Math.abs(o-n);if(d<2*c)return;const u=e<=i||d<2*l;if(u){const l=Math.abs(d)<.5*Math.PI?i*(1+Math.cos(d))/Math.sin(d):NaN;let c;c=l>0&&l<r?Math.max(Math.hypot(i,l),e):e;const u=.5*(n+o);t.moveTo(s+c*Math.cos(u),a+c*Math.sin(u))}else t.moveTo(s+e*Math.cos(n+l),a+e*Math.sin(n+l));t.arc(s,a,r,n+c,o-c),u||(e>0?t.arc(s,a,e,o-l,n+l,!0):t.lineTo(s,a))}t.closePath(),this.dirtyPath=!1}isPointInPath(t,e){const{angleOffset:i}=this,n=this.startAngle+i,o=this.endAngle+i,r=Math.min(this.innerRadius,this.outerRadius),s=Math.max(this.innerRadius,this.outerRadius),a=this.transformPoint(t,e);return rR(a.x,a.y,{startAngle:n,endAngle:o,innerRadius:r,outerRadius:s})}}function hR(t,e){if(gR(t)&&gR(e)){const i={};return Object.keys(t).forEach(n=>{i[n]=n in e?hR(t[n],e[n]):t[n]}),Object.keys(e).forEach(n=>{n in t||(i[n]=e[n])}),i}return Array.isArray(t)&&!Array.isArray(e)||pR(t)&&!pR(e)?t:e}function pR(t){return"object"==typeof t&&null!==t}function fR(t){return pR(t)&&!Array.isArray(t)}function gR(t){return fR(t)&&t.constructor===Object}function vR(...t){var e;const i={};for(const n of t){if(!n)continue;const t=dT(n)?uT(n):Object.keys(n);for(const o of t)fR(i[o])&&fR(n[o])?i[o]=vR(i[o],n[o]):null!==(e=i[o])&&void 0!==e||(i[o]=n[o])}return i}uR.className="Sector",KA([cR(),YA("design:type",Number)],uR.prototype,"centerX",void 0),KA([cR(),YA("design:type",Number)],uR.prototype,"centerY",void 0),KA([cR(),YA("design:type",Number)],uR.prototype,"innerRadius",void 0),KA([cR(),YA("design:type",Number)],uR.prototype,"outerRadius",void 0),KA([cR(),YA("design:type",Number)],uR.prototype,"startAngle",void 0),KA([cR(),YA("design:type",Number)],uR.prototype,"endAngle",void 0),KA([cR(),YA("design:type",Number)],uR.prototype,"angleOffset",void 0),KA([cR(),YA("design:type",Number)],uR.prototype,"inset",void 0);let yR=null;function mR(t){if(null!=t)return""===t?"":(null!=yR||(yR=document.createElement("div")),yR.textContent=String(t),yR.innerHTML)}const bR=t=>"string"==typeof t,SR=t=>!!t&&Object.prototype.hasOwnProperty.call(t,"toString")&&bR(t.toString());function xR(t){return bR(t)||SR(t)}function CR(t){return ER(t)||!!(e=t)&&Object.prototype.hasOwnProperty.call(e,"valueOf")&&ER(e.valueOf())||(t=>t instanceof Date&&!isNaN(+t))(t);var e}function wR(t,e){return e&&CR(t)?t:e?void 0:xR(t)?t:String(t)}const ER=t=>"number"==typeof t&&Number.isFinite(t),OR=new Map;function DR(t,e){var i,n,o;const r=JSON.stringify(t,null,0);return OR.has(e)||OR.set(e,new Map),(null===(i=OR.get(e))||void 0===i?void 0:i.has(r))||null===(n=OR.get(e))||void 0===n||n.set(r,e(t)),null===(o=OR.get(e))||void 0===o?void 0:o.get(r)}const AR={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let t=NaN;return(e=1/0,i)=>{const n=i.keys[0],o=Math.abs(n-t);return t=n,!isNaN(o)&&o>0&&o<e?o:e}}},TR={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:t}})=>{if(null!=t)return[...t].sort((t,e)=>{for(let i=0;i<t.length;i++){const n=t[i]-e[i];if(0!==n)return n}return 0})}};function kR({normaliseTo:t,mode:e}){const i=(e,i)=>{const n=e*t/i;return n>=0?Math.min(t,n):Math.max(-t,n)};return()=>()=>(t,n)=>{const o=[0,0];for(const i of n){const n=t[i],r=n<0?0:1;"sum"===e?o[r]+=n:o[r]=0===r?Math.min(o[r],n):Math.max(o[r],n)}const r=Math.max(Math.abs(o[0]),o[1]);for(const e of n)t[e]=i(t[e],r)}}function MR(t,e,i,n="sum"){return{scopes:[t.id],type:"group-value-processor",matchGroupIds:e,adjust:DR({normaliseTo:i,mode:n},kR)}}function RR({normaliseTo:t,zeroDomain:e,rangeMin:i,rangeMax:n}){const o=t[1]-t[0],r=(i,n,r)=>{const s=t[0]+(i-n)/r*o;return 0===r?e:s>=t[1]?t[1]:s<t[0]?t[0]:s};return()=>(e,o)=>{let[s,a]=e.domain.values[o];null!=i&&(s=i),null!=n&&(a=n);const l=a-s;e.domain.values[o]=[t[0],t[1]];for(const t of e.data){let i=t.values;"ungrouped"===e.type&&(i=[i]);for(const t of i)t[o]=r(t[o],s,l)}}}function PR(t,e,i,n,o,r){return{scopes:[t.id],type:"property-value-processor",property:e,adjust:DR({normaliseTo:i,rangeMin:o,rangeMax:r,zeroDomain:n},RR)}}function NR(t,e=[]){return{type:"processor",scopes:[t.id],property:"animationValidation",calculate(i){var n;const{keys:o,values:r}=i.defs,{input:s,data:a}=i;let l=!0,c=!0;const d=[];for(let i=0;i<r.length;i++)(null===(n=r[i].scopes)||void 0===n?void 0:n.some(e=>e===t.id))&&e.some(t=>r[i].id===t)&&d.push([i,r[i]]);const u=(t,e,n)=>{var o;if("category"===e.valueType){const e=i.domain[n][t];return void(l&&(l=e.length===s.count))}let r=null===(o=a[0])||void 0===o?void 0:o[n][t];for(let e=1;(l||c)&&e<a.length;e++){const i=a[e][n][t];c&&(c=r<=i),l&&(l=r!==i),r=i}};for(let t=0;(l||c)&&t<o.length;t++)u(t,o[t],"keys");for(let t=0;(l||c)&&t<d.length;t++){const[e,i]=d[t];u(e,i,"values")}return{uniqueKeys:l,orderedKeys:c}}}}function LR({mode:t,separateNegative:e}){return()=>()=>(i,n)=>{const o=[0,0];for(const r of n){const n=i[r],s=AT(n)&&e?0:1;"number"!=typeof n||isNaN(n)||("normal"===t&&(o[s]+=n),i[r]=o[s],"trailing"===t&&(o[s]+=n))}}}function IR({mode:t,sum:e}){return()=>{const i=[];let n=!0;return()=>(o,r)=>{let s=0;for(const a of r){const r=o[a],l=n&&"current"===e?0:i[a];i[a]=r;const c="current"===e?r:l;"number"!=typeof r||isNaN(r)?o[a]=s:"number"!=typeof l||isNaN(l)?o[a]=s:("normal"===t&&(s+=c),o[a]=s,"trailing"===t&&(s+=c))}n=!1}}}function FR(t,e,i,n,o=!1){let r;if(i.startsWith("window")){r=DR({mode:i.endsWith("-trailing")?"trailing":"normal",sum:n},IR)}else r=DR({mode:i,separateNegative:o},LR);return{scopes:[t.id],type:"group-value-processor",matchGroupIds:[e],adjust:r}}function _R(t,e=!0){return{type:"processor",property:"diff",calculate:i=>{const n={changed:!1,moved:[],added:[],updated:[],removed:[],addedIndices:[],updatedIndices:[],removedIndices:[]},o=new Map,r=new Map,s=new Map,a=new Map,l=new Map,c=new Map,d=new Map;for(let n=0;n<Math.max(t.data.length,i.data.length);n++){const u=t.data[n],h=i.data[n],p=u?GR(u.keys):"",f=h?GR(h.keys):"";p!==f?(a.has(f)?(!e&&QA(a.get(f).values,h.values)||(s.set(f,h),c.set(f,n),o.set(f,h)),a.delete(f),d.delete(f)):h&&(r.set(f,h),l.set(f,n)),r.has(p)?(!e&&QA(r.get(p).values,u.values)||(s.set(p,u),c.set(p,n),o.set(p,u)),r.delete(p),l.delete(p)):u&&(s.delete(p),c.delete(p),a.set(p,u),d.set(p,n))):QA(u.values,h.values)||(s.set(f,h),c.set(f,n))}return n.added=Array.from(r.keys()),n.updated=Array.from(s.keys()),n.removed=Array.from(a.keys()),n.moved=Array.from(o.keys()),n.addedIndices=Array.from(l.values()),n.updatedIndices=Array.from(c.values()),n.removedIndices=Array.from(d.values()),n.changed=n.added.length>0||n.updated.length>0||n.removed.length>0,n}}}function GR(t){return t.join("___")}class BR{constructor(){this.enabled=!0,this.color="#464646",this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return iM(this)}}function VR(t){const{parallelFlipRotation:e=0,regularFlipRotation:i=0}=t,n=t.rotation?ST(CT(t.rotation)):0,o=!n&&e>=0&&e<=Math.PI?-1:1,r=!n&&i>=0&&i<=Math.PI?-1:1;let s=0;return t.parallel?s=o*Math.PI/2:-1===r&&(s=Math.PI),{configuredRotation:n,defaultRotation:s,parallelFlipFlag:o,regularFlipFlag:r}}function jR(t,e,i,n,o){const r=e>0&&e<=Math.PI,s=i>0&&i<=Math.PI;if(t){if(!e&&!i)return"center";if(n*(r||s?-1:1)==-1)return"end"}else if(n*o==-1)return"end";return"start"}function WR(t,e,i,n,o){const{width:r,height:s}=e,a=new Wk(i,n,0,0);o.transformBBox(a,e);const{x:l=0,y:c=0}=e;return e.width=r,e.height=s,{point:{x:l,y:c,size:0},label:{width:r,height:s,text:t}}}var zR;KA([PT(UT),YA("design:type",Object)],BR.prototype,"enabled",void 0),KA([PT(QT),YA("design:type",Object)],BR.prototype,"color",void 0),KA([PT(fk),YA("design:type",String)],BR.prototype,"fontStyle",void 0),KA([PT(vk),YA("design:type",String)],BR.prototype,"fontWeight",void 0),KA([PT(ok(0)),YA("design:type",Object)],BR.prototype,"fontSize",void 0),KA([PT(KT),YA("design:type",Object)],BR.prototype,"fontFamily",void 0),KA([PT(zT),YA("design:type",Function)],BR.prototype,"formatter",void 0),function(t){t[t.SERIES_BACKGROUND_ZINDEX=-10]="SERIES_BACKGROUND_ZINDEX",t[t.AXIS_GRID_ZINDEX=0]="AXIS_GRID_ZINDEX",t[t.AXIS_ZINDEX=20]="AXIS_ZINDEX",t[t.SERIES_CROSSLINE_RANGE_ZINDEX=30]="SERIES_CROSSLINE_RANGE_ZINDEX",t[t.SERIES_LAYER_ZINDEX=500]="SERIES_LAYER_ZINDEX",t[t.AXIS_FOREGROUND_ZINDEX=750]="AXIS_FOREGROUND_ZINDEX",t[t.SERIES_CROSSHAIR_ZINDEX=1e3]="SERIES_CROSSHAIR_ZINDEX",t[t.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",t[t.SERIES_CROSSLINE_LINE_ZINDEX=2500]="SERIES_CROSSLINE_LINE_ZINDEX",t[t.LEGEND_ZINDEX=3e3]="LEGEND_ZINDEX"}(zR||(zR={}));class UR extends dR{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){const{x:t,y:e,size:i}=this,n=i/2;return new Wk(t-n,e-n,i,i)}applyPath(t,e){const{path:i}=this;let{x:n,y:o}=this;i.clear();for(const{x:r,y:s,t:a}of e)n+=r*t,o+=s*t,"move"===a?i.moveTo(n,o):i.lineTo(n,o);i.closePath()}}KA([cR(),YA("design:type",Number)],UR.prototype,"x",void 0),KA([cR(),YA("design:type",Number)],UR.prototype,"y",void 0),KA([cR({convertor:Math.abs}),YA("design:type",Number)],UR.prototype,"size",void 0);class HR extends UR{updatePath(){const{x:t,y:e,path:i,size:n}=this,o=n/2;i.clear(),i.arc(t,e,o,0,2*Math.PI),i.closePath()}}HR.className="Circle";const KR={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},YR={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"};class XR{constructor(t){this.modules={},this.parent=t}destroy(){for(const[t,e]of Object.entries(this.modules))e.instance.destroy(),delete this.modules[t],delete this.parent[t]}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);if(t.optionsKey in this.parent)throw new Error(`AG Charts - class already has option key '${t.optionsKey}'`);null==this.moduleContext&&(this.moduleContext=this.parent.createModuleContext());const e=new t.instanceConstructor(Object.assign({},this.moduleContext));this.modules[t.optionsKey]={instance:e},this.parent[t.optionsKey]=e}removeModule(t){var e,i;null===(i=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===i||i.destroy(),delete this.modules[t.optionsKey],delete this.parent[t.optionsKey]}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}*[Symbol.iterator](){for(const{instance:t}of Object.values(this.modules))yield t}}class qR{constructor(){this.registeredListeners=new Map}addListener(t,e,i){const n={symbol:Symbol(t),handler:e,meta:i};return this.registeredListeners.has(t)?this.registeredListeners.get(t).push(n):this.registeredListeners.set(t,[n]),()=>this.removeListener(n.symbol)}removeListener(t){for(const[e,i]of this.registeredListeners.entries()){const n=i.findIndex(e=>e.symbol===t);if(n>=0){i.splice(n,1),0===i.length&&this.registeredListeners.delete(e);break}}}dispatch(t,...e){const i=new class{constructor(){this.results=void 0}push(t){var e;void 0!==t&&(null!==(e=this.results)&&void 0!==e||(this.results=[]),this.results.push(t))}};for(const n of this.getListenersByType(t))try{i.push(n.handler(...e))}catch(t){nT.errorOnce(t)}return i.results}dispatchWrapHandlers(t,e,...i){for(const n of this.getListenersByType(t))try{e(n.handler,n.meta,...i)}catch(t){nT.errorOnce(t)}}getListenersByType(t){var e;return null!==(e=this.registeredListeners.get(t))&&void 0!==e?e:[]}}class $R{constructor(){this.eventListeners=new Map}addEventListener(t,e){if("function"!=typeof e)throw new Error("AG Charts - listener must be a Function");const i=this.eventListeners.get(t);i?i.add(e):this.eventListeners.set(t,new Set([e]))}removeEventListener(t,e){var i;null===(i=this.eventListeners.get(t))||void 0===i||i.delete(e),0===this.eventListeners.size&&this.eventListeners.delete(t)}hasEventListener(t){return this.eventListeners.has(t)}clearEventListeners(){this.eventListeners.clear()}fireEvent(t){var e;null===(e=this.eventListeners.get(t.type))||void 0===e||e.forEach(e=>e(t))}}function ZR(t,e=[1/0,-1/0]){for(const i of t)"number"==typeof i&&(i<e[0]&&(e[0]=i),i>e[1]&&(e[1]=i));return e}function JR(t,e=[0,0]){for(const i of t)"number"==typeof i&&(i<0&&(e[0]+=i),i>0&&(e[1]+=i));return e}function QR(t,e){return{id:e,scopes:[t.id],type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(t,e=[0,0])=>{var i,n;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e}}}function tP(t,e,i,n){const o={id:e,scopes:[t.id],matchGroupIds:n?[n]:void 0,type:"aggregate",aggregateFunction:(t,e=[])=>{const n=e[1]-e[0];return i.aggregateFunction(t).map(t=>t/n)}};return i.groupAggregateFunction&&(o.groupAggregateFunction=i.groupAggregateFunction),o}function eP(t){return()=>{let e=0;return i=>"number"!=typeof i||isNaN(i)?i:(e+=t?Math.max(0,i):i,e)}}var iP,nP;function oP(t){return null!=wR(t,!0)}function rP(t){return null!=wR(t,!1)}function sP(t,e,i,n={}){return Object.assign({scopes:[t.id],property:e,type:"key",valueType:i?"range":"category",validation:i?oP:rP},n)}function aP(t,e,i,n={}){return Object.assign({scopes:[t.id],property:e,type:"value",valueType:i?"range":"category",validation:i?oP:rP},n)}function lP(t,e,i,n={}){const{onlyPositive:o}=n,r=HA(n,["onlyPositive"]);return Object.assign(Object.assign({},aP(t,e,i,r)),{processor:eP(o)})}function cP(t,e,i,n,o="current",r){return[aP(t,e,i,r),FR(t,r.groupId,n,o,r.separateNegative)]}!function(t){t[t.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",t[t.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",t[t.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",t[t.NEAREST_NODE=3]="NEAREST_NODE"}(iP||(iP={}));class dP{constructor(t,e,{datum:i},n){this.type=t,this.event=e,this.datum=i,this.seriesId=n.id}}class uP{constructor(){this.fill="yellow",this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.lineDashOffset=void 0}}KA([PT(tk),YA("design:type",String)],uP.prototype,"fill",void 0),KA([PT(rk(0,1)),YA("design:type",Number)],uP.prototype,"fillOpacity",void 0),KA([PT(tk),YA("design:type",String)],uP.prototype,"stroke",void 0),KA([PT(rk(0)),YA("design:type",Number)],uP.prototype,"strokeWidth",void 0),KA([PT(rk(0,1)),YA("design:type",Number)],uP.prototype,"strokeOpacity",void 0),KA([PT(mk),YA("design:type",Array)],uP.prototype,"lineDash",void 0),KA([PT(rk(0)),YA("design:type",Number)],uP.prototype,"lineDashOffset",void 0);class hP{constructor(){this.strokeWidth=void 0,this.dimOpacity=void 0,this.enabled=void 0}}KA([PT(rk(0)),YA("design:type",Number)],hP.prototype,"strokeWidth",void 0),KA([PT(rk(0,1)),YA("design:type",Number)],hP.prototype,"dimOpacity",void 0),KA([PT(HT),YA("design:type",Boolean)],hP.prototype,"enabled",void 0);class pP{constructor(){this.color="black"}}KA([PT(tk),YA("design:type",String)],pP.prototype,"color",void 0);class fP{constructor(){this.item=new uP,this.series=new hP,this.text=new pP}}!function(t){t[t.None=0]="None",t[t.This=1]="This",t[t.Other=2]="Other"}(nP||(nP={}));class gP extends $R{get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}set data(t){this._data=t,this.onDataChange()}get data(){var t;return null!==(t=this._data)&&void 0!==t?t:this._chartData}onDataChange(){this.nodeDataRefresh=!0}setChartData(t){this._chartData=t,this.data===t&&this.onDataChange()}hasData(){const{data:t}=this;return t&&(!Array.isArray(t)||t.length>0)}set visible(t){this._visible=t,this.visibleChanged()}get visible(){return this._visible}onSeriesGroupingChange(t,e){const{id:i,type:n,visible:o,rootGroup:r,highlightGroup:s,annotationGroup:a}=this;t&&this.ctx.seriesStateManager.deregisterSeries({id:i,type:n}),e&&this.ctx.seriesStateManager.registerSeries({id:i,type:n,visible:o,seriesGrouping:e}),null!=this.rootGroup.parent&&this.ctx.seriesLayerManager.changeGroup({id:i,type:n,rootGroup:r,highlightGroup:s,annotationGroup:a,getGroupZIndexSubOrder:t=>this.getGroupZIndexSubOrder(t),seriesGrouping:e,oldGrouping:t})}getBandScalePadding(){return{inner:1,outer:0}}constructor(t){super(),this.NodeClickEvent=dP,this.id=Vk(this),this.rootGroup=new ZM({name:"seriesRoot",isVirtual:!0}),this.axes={[Lk.X]:void 0,[Lk.Y]:void 0},this.directions=[Lk.X,Lk.Y],this.nodeDataRefresh=!0,this._visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.seriesGrouping=void 0,this._declarationOrder=-1,this.seriesListeners=new qR,this.highlightStyle=new fP,this.moduleMap=new XR(this),this.nodeDataDependencies={},this.ctx=t.moduleCtx;const{useLabelLayer:e=!1,pickModes:i=[iP.NEAREST_BY_MAIN_AXIS_FIRST],directionKeys:n={},directionNames:o={},contentGroupVirtual:r=!0,canHaveAxes:s=!1}=t;this.directionKeys=n,this.directionNames=o,this.canHaveAxes=s,this.contentGroup=this.rootGroup.appendChild(new ZM({name:this.id+"-content",layer:!r,isVirtual:r,zIndex:zR.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.highlightGroup=new ZM({name:this.id+"-highlight",layer:!r,isVirtual:r,zIndex:zR.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("highlight")}),this.highlightNode=this.highlightGroup.appendChild(new ZM({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new ZM({name:"highlightLabel",zIndex:10})),this.pickModes=i,this.labelGroup=this.rootGroup.appendChild(new ZM({name:this.id+"-series-labels",layer:e,zIndex:zR.SERIES_LABEL_ZINDEX})),this.annotationGroup=new ZM({name:this.id+"-annotation",layer:!r,isVirtual:r,zIndex:zR.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("annotation")})}getGroupZIndexSubOrder(t,e=0){let i=0;switch(t){case"data":case"paths":break;case"labels":i+=2e4;break;case"marker":i+=1e4;break;case"highlight":e+=15e3;break;case"annotation":i+=15e3}return[()=>this._declarationOrder+i,e]}addListener(t,e){return this.seriesListeners.addListener(t,e)}dispatch(t,e){return this.seriesListeners.dispatch(t,e)}addChartEventListeners(){}destroy(){this.ctx.seriesStateManager.deregisterSeries(this),this.ctx.seriesLayerManager.releaseGroup(this)}getDirectionValues(t,e){const i=this.resolveKeyDirection(t),n=null==e?void 0:e[i],o=[];if(!n)return o;const r=(...t)=>{for(const e of t)Array.isArray(e)?r(...e):"object"==typeof e?r(...Object.values(e)):o.push(e)};return r(...n.map(t=>this[t])),o}getKeys(t){return this.getDirectionValues(t,this.directionKeys)}getNames(t){return this.getDirectionValues(t,this.directionNames)}resolveKeyDirection(t){return t}getDomain(t){var e;const i=this.getSeriesDomain(t);return(null!==(e=this.dispatch("data-getDomain",{direction:t}))&&void 0!==e?e:[]).reduce((t,e)=>t.concat(e),i)}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){this.ctx.seriesStateManager.registerSeries(this)}getOpacity(){const{dimOpacity:t=1,enabled:e=!0}=this.highlightStyle.series;if(!e||1===t)return 1;switch(this.isItemIdHighlighted()){case nP.None:case nP.This:return 1;case nP.Other:default:return t}}getStrokeWidth(t){const{strokeWidth:e,enabled:i=!0}=this.highlightStyle.series;if(!i||void 0===e)return t;switch(this.isItemIdHighlighted()){case nP.This:return e;case nP.None:case nP.Other:return t}}isItemIdHighlighted(){var t,e;const{series:i}=null!==(e=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight())&&void 0!==e?e:{};return null==i?nP.None:i!==this?nP.Other:nP.This}getModuleTooltipParams(t){var e;return(null!==(e=this.dispatch("tooltip-getParams",{datum:t}))&&void 0!==e?e:[]).reduce((t,e)=>Object.assign(Object.assign({},e),t),{})}pickNode(t,e){const{pickModes:i,visible:n,rootGroup:o}=this;if(n&&o.visible)for(const n of i){if(e&&!e.includes(n))continue;let i;switch(n){case iP.EXACT_SHAPE_MATCH:i=this.pickNodeExactShape(t);break;case iP.NEAREST_BY_MAIN_AXIS_FIRST:case iP.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST:i=this.pickNodeMainAxisFirst(t,n===iP.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST);break;case iP.NEAREST_NODE:i=this.pickNodeClosestDatum(t)}if(i)return{pickMode:n,match:i.datum,distance:i.distance}}}pickNodeExactShape(t){const e=this.contentGroup.pickNode(t.x,t.y);return e&&{datum:e.datum,distance:0}}pickNodeClosestDatum(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeMainAxisFirst(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(t,e){this.fireEvent(new this.NodeClickEvent("nodeClick",t,e,this))}fireNodeDoubleClickEvent(t,e){this.fireEvent(new this.NodeClickEvent("nodeDoubleClick",t,e,this))}toggleSeriesItem(t,e){this.visible=e,this.nodeDataRefresh=!0,this.dispatch("visibility-changed",{itemId:t,enabled:e})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return Object.assign(Object.assign({},this.ctx),{series:this})}getLabelText(t,e,i=String){var n;return t.formatter&&null!==(n=this.ctx.callbackCache.call(t.formatter,Object.assign({seriesId:this.id},e)))&&void 0!==n?n:i(e.value)}getMarkerStyle(t,e,i=t.getStyle()){var n,o;const r=vR({size:null!==(o=null===(n=e.datum.point)||void 0===n?void 0:n.size)&&void 0!==o?o:0},i);if(t.formatter){return vR(this.ctx.callbackCache.call(t.formatter,Object.assign(Object.assign(Object.assign({seriesId:this.id},r),e),{datum:e.datum.datum})),r)}return r}updateMarkerStyle(t,e,i,n=e.getStyle(),{applyTranslation:o=!0}={}){const{point:r}=i.datum,s=this.getMarkerStyle(e,i,n),a=this.visible&&s.size>0&&r&&!isNaN(r.x)&&!isNaN(r.y);o?t.setProperties(Object.assign(Object.assign({visible:a},s),{translationX:null==r?void 0:r.x,translationY:null==r?void 0:r.y})):t.setProperties(Object.assign({visible:a},s)),"function"!=typeof e.shape||t.dirtyPath||(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())}getMinRect(){}checkResize(t){const e={seriesRectWidth:null==t?void 0:t.width,seriesRectHeight:null==t?void 0:t.height},i=null!=hT(this.nodeDataDependencies,e);return i&&(this.nodeDataDependencies=e,this.markNodeDataDirty()),i}}function vP({id:t},e,i,n){EM(t,e,i,n,{opacity:0},{opacity:1},mM)}function yP({id:t},e,i,n){EM(t,e,i,n,{opacity:1},{opacity:0},mM)}function mP(t){return{opacity:1}}gP.highlightedZIndex=1e12,KA([PT(KT),YA("design:type",Object)],gP.prototype,"id",void 0),KA([PT(UT),YA("design:type",Object)],gP.prototype,"_visible",void 0),KA([PT(UT),YA("design:type",Object)],gP.prototype,"showInLegend",void 0),KA([PT(KT),YA("design:type",Object)],gP.prototype,"cursor",void 0),KA([PT(Dk),YA("design:type",Object)],gP.prototype,"nodeClickRange",void 0),KA([cM({changeValue:function(t,e){this.onSeriesGroupingChange(e,t)}}),YA("design:type",Object)],gP.prototype,"seriesGrouping",void 0);const bP={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function SP(t,e=new Date(t.getFullYear(),0,1)){const i=t.getTimezoneOffset()-e.getTimezoneOffset(),n=t.getTime()-e.getTime()+6e4*i;return Math.floor(n/864e5)}function xP(t,e){const i=(e-new Date(t.getFullYear(),0,1).getDay()+7)%7,n=new Date(t.getFullYear(),0,i+1);return n<=t?Math.floor(SP(t,n)/7)+1:0}const CP={a:t=>bP.shortDays[t.getDay()],A:t=>bP.days[t.getDay()],b:t=>bP.shortMonths[t.getMonth()],B:t=>bP.months[t.getMonth()],c:"%x, %X",d:(t,e)=>EP(t.getDate(),2,null!=e?e:"0"),e:"%_d",f:(t,e)=>EP(1e3*t.getMilliseconds(),6,null!=e?e:"0"),H:(t,e)=>EP(t.getHours(),2,null!=e?e:"0"),I:(t,e)=>{const i=t.getHours()%12;return 0===i?"12":EP(i,2,null!=e?e:"0")},j:(t,e)=>EP(SP(t)+1,3,null!=e?e:"0"),m:(t,e)=>EP(t.getMonth()+1,2,null!=e?e:"0"),M:(t,e)=>EP(t.getMinutes(),2,null!=e?e:"0"),L:(t,e)=>EP(t.getMilliseconds(),3,null!=e?e:"0"),p:t=>t.getHours()<12?"AM":"PM",Q:t=>String(t.getTime()),s:t=>String(Math.floor(t.getTime()/1e3)),S:(t,e)=>EP(t.getSeconds(),2,null!=e?e:"0"),u:t=>{let e=t.getDay();return e<1&&(e+=7),String(e%7)},U:(t,e)=>EP(xP(t,0),2,null!=e?e:"0"),V:(t,e)=>EP(function t(e,i=e.getFullYear()){const n=new Date(i,0,1).getDay(),o=new Date(i,0,(4-n+7)%7-3+1);return o<=e?Math.floor(SP(e,o)/7)+1:t(e,i-1)}(t),2,null!=e?e:"0"),w:(t,e)=>EP(t.getDay(),2,null!=e?e:"0"),W:(t,e)=>EP(xP(t,1),2,null!=e?e:"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(t,e)=>EP(t.getFullYear()%100,2,null!=e?e:"0"),Y:(t,e)=>EP(t.getFullYear(),4,null!=e?e:"0"),Z:t=>function(t){const e=t.getTimezoneOffset(),i=Math.abs(e);return`${e>0?"-":"+"}${EP(Math.floor(i/60),2,"0")}${EP(Math.floor(i%60),2,"0")}`}(t),"%":()=>"%"},wP={_:" ",0:"0","-":""};function EP(t,e,i){const n=String(Math.floor(t));return n.length>=e?n:`${i.repeat(e-n.length)}${n}`}function OP(t){const e=[];for(;t.length>0;){let i=t.indexOf("%");if(0!==i){const n=i>0?t.substring(0,i):t;e.push(n)}if(i<0)break;const n=t[i+1],o=wP[n];null!=o&&i++;const r=t[i+1],s=CP[r];if("function"==typeof s)e.push([s,o]);else if("string"==typeof s){const t=OP(s);e.push([t,o])}else e.push(`${null!=o?o:""}${r}`);t=t.substring(i+2)}return t=>{const i="number"==typeof t?new Date(t):t;return e.map(t=>"string"==typeof t?t:t[0](i,t[1])).join("")}}const DP=/(#\{(.*?)\})/g;function AP(t,e,i){return t.replace(DP,(function(...t){const n=t[2],[o,r]=n.split(":"),s=e[o];if("number"==typeof s){const t=r&&i&&i[r];if(t){const{locales:e,options:i}=t;return s.toLocaleString(e,i)}return String(s)}if(s instanceof Date){const t=r&&i&&i[r];if("string"==typeof t){return OP(t)(s)}return s.toDateString()}return"string"==typeof s||(null==s?void 0:s.toString)?String(s):""}))}function TP(t,e){const i=t.createElement("style");i.innerHTML=e,t.head.insertBefore(i,t.head.querySelector("style"))}function kP(t,e){var i,n,o;if("string"==typeof t)return t;const{content:r=(null!==(i=null==e?void 0:e.content)&&void 0!==i?i:""),title:s=(null==e?void 0:e.title),color:a=(null!==(n=null==e?void 0:e.color)&&void 0!==n?n:"white"),backgroundColor:l=(null!==(o=null==e?void 0:e.backgroundColor)&&void 0!==o?o:"#888")}=t;return`${s?`<div class="ag-chart-tooltip-title"\n        style="color: ${a}; background-color: ${l}">${s}</div>`:""}${r?`<div class="ag-chart-tooltip-content">${r}</div>`:""}`}const MP=["pointer","node"],RP=LT(t=>MP.includes(t),"expecting a position type keyword such as 'pointer' or 'node'");class PP{constructor(){this.type="pointer",this.xOffset=0,this.yOffset=0}}KA([PT(RP),YA("design:type",String)],PP.prototype,"type",void 0),KA([PT(ok()),YA("design:type",Number)],PP.prototype,"xOffset",void 0),KA([PT(ok()),YA("design:type",Number)],PP.prototype,"yOffset",void 0);class NP{constructor(t,e,i,n){this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.lastVisibilityChange=Date.now(),this.position=new PP,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=n,this.window=i;const o=e.createElement("div");if(this.element=this.tooltipRoot.appendChild(o),this.element.classList.add("ag-chart-tooltip"),this.canvasElement=t,"undefined"!=typeof IntersectionObserver){const t=new IntersectionObserver(t=>{for(const e of t)e.target===this.canvasElement&&0===e.intersectionRatio&&this.toggle(!1)},{root:this.tooltipRoot});t.observe(this.canvasElement),this.observer=t}NP.tooltipDocuments.indexOf(e)<0&&(TP(e,'\n.ag-chart-tooltip {\n    transition: transform 0.1s ease;\n    display: table;\n    position: fixed;\n    left: 0px;\n    top: 0px;\n    white-space: nowrap;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: rgb(70, 70, 70);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);\n}\n\n.ag-chart-tooltip-no-interaction {\n    pointer-events: none;\n    user-select: none;\n}\n\n.ag-chart-tooltip-no-animation {\n    transition: none !important;\n}\n\n.ag-chart-tooltip-hidden {\n    visibility: hidden;\n}\n\n.ag-chart-tooltip-title {\n    position: relative;\n    padding: 8px 14px;\n    border-top-left-radius: 2px;\n    border-top-right-radius: 2px;\n    color: white;\n    background-color: #888888;\n    z-index: 1;\n}\n\n.ag-chart-tooltip-title:only-child {\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n}\n\n.ag-chart-tooltip-content {\n    padding: 6px 14px;\n    line-height: 1.7em;\n    background: white;\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n    border: 1px solid rgba(0, 0, 0, 0.15);\n    overflow: hidden;\n}\n\n.ag-chart-tooltip-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid #d9d9d9;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-tooltip-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: calc(100% - 1px);\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid white;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-tooltip.ag-chart-dark-tooltip {\n    color: white;\n    background: #15181c;\n}\n\n.ag-chart-tooltip.ag-chart-dark-tooltip .ag-chart-tooltip-content {\n    border-color: rgba(255, 255, 255, 0.15);\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n'),NP.tooltipDocuments.push(e))}destroy(){const{parentNode:t}=this.element;t&&t.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)}isVisible(){const{element:t}=this;return!t.classList.contains("ag-chart-tooltip-hidden")}updateClass(t,e){const{element:i,class:n,lastClass:o,enableInteraction:r,lastVisibilityChange:s}=this,a=this.isVisible(),l=!!t;let c=1/0;if(a!==l){const t=Date.now();c=t-s,this.lastVisibilityChange=t}const d=(t,e)=>{const n="ag-chart-tooltip-"+t;e?i.classList.add(n):i.classList.remove(n)};c>5&&d("no-animation",!a&&l&&c>100),d("no-interaction",!r),d("hidden",!t),d("arrow",!!e),n!==o&&(o&&i.classList.remove(o),n&&i.classList.add(n),this.lastClass=n)}show(t,e,i=!1){var n,o,r,s,a,l,c;const{element:d,canvasElement:u}=this;if(void 0!==e)d.innerHTML=e;else if(!d.innerHTML)return void this.toggle(!1);const h=(t,e,i)=>Math.max(Math.min(e,i),t),p=null!==(o=null===(n=t.position)||void 0===n?void 0:n.xOffset)&&void 0!==o?o:0,f=null!==(s=null===(r=t.position)||void 0===r?void 0:r.yOffset)&&void 0!==s?s:0,g=u.getBoundingClientRect(),v=g.left+t.offsetX-d.clientWidth/2+p,y=g.top+t.offsetY-d.clientHeight-8+f,m=this.getWindowBoundingBox(),b=m.x+m.width-d.clientWidth-1,S=m.y+m.height-d.clientHeight,x=h(m.x,v,b),C=h(m.y,y,S),w=!(x!==v||C!==y)&&!p&&!f,E=null!==(l=null!==(a=t.showArrow)&&void 0!==a?a:this.showArrow)&&void 0!==l?l:w;if(this.updateShowArrow(E),d.style.transform=`translate(${Math.round(x)}px, ${Math.round(C)}px)`,this.enableInteraction=null!==(c=t.enableInteraction)&&void 0!==c&&c,this.delay>0&&!i)return this.toggle(!1),void(this.showTimeout=this.window.setTimeout(()=>{this.toggle(!0)},this.delay));this.toggle(!0)}getWindowBoundingBox(){return new Wk(0,0,this.window.innerWidth,this.window.innerHeight)}toggle(t){t||this.window.clearTimeout(this.showTimeout),this.updateClass(t,this._showArrow)}pointerLeftOntoTooltip(t){var e;if(!this.enableInteraction)return!1;const i=null===(e=t.sourceEvent.relatedTarget)||void 0===e?void 0:e.classList,n=Boolean(["","-title","-content"].filter(t=>null==i?void 0:i.contains("ag-chart-tooltip"+t)));return void 0!==i&&n}updateShowArrow(t){this._showArrow=t}}NP.tooltipDocuments=[],KA([PT(UT),YA("design:type",Boolean)],NP.prototype,"enabled",void 0),KA([PT(HT),YA("design:type",Boolean)],NP.prototype,"showArrow",void 0),KA([PT(YT),YA("design:type",String)],NP.prototype,"class",void 0),KA([PT(ok(0)),YA("design:type",Number)],NP.prototype,"delay",void 0),KA([PT(Dk),YA("design:type",Object)],NP.prototype,"range",void 0);class LP{constructor(){this.enabled=!1}}KA([PT(UT),YA("design:type",Object)],LP.prototype,"enabled",void 0);class IP{constructor(){this.enabled=!0,this.showArrow=void 0,this.format=void 0,this.renderer=void 0,this.interaction=new LP,this.position=new PP}toTooltipHtml(t,e,i){var n,o;const r=null!==(n=null==i?void 0:i.format)&&void 0!==n?n:this.format,s=null!==(o=null==i?void 0:i.renderer)&&void 0!==o?o:this.renderer;return r?kP({content:AP(r,e)},t):s?kP(s(e),t):kP(t)}}function FP(t,e,i,n){const o=[i.convert(0),i.convert(1)],r=[n.convert(0),n.convert(1)],s=Math.PI/-2+CT(e);return{nodes:{toFn:(t,e,i,{prevLive:n})=>{var r,a;let{startAngle:l,endAngle:c,innerRadius:d,outerRadius:u}=e;const{stroke:h,fill:p}=e.sectorFormat;if("removed"===i&&n?(l=null===(r=n.datum)||void 0===r?void 0:r.endAngle,c=null===(a=n.datum)||void 0===a?void 0:a.endAngle):"removed"!==i||n||(l=s,c=s),"removed"===i){const t=(({radius:t})=>({innerRadius:o[0],outerRadius:o[0]+(o[1]-o[0])*t}))(e);d=t.innerRadius,u=t.outerRadius}return{startAngle:l,endAngle:c,outerRadius:u,innerRadius:d,stroke:h,fill:p}},fromFn:(e,i,n,{prevFromProps:o})=>{var a,l,c,d,u,h;let{startAngle:p,endAngle:f,innerRadius:g,outerRadius:v}=e,{fill:y,stroke:m}=i.sectorFormat;if("unknown"===n||"added"===n&&!o?(p=s,f=s,g=i.innerRadius,v=i.outerRadius):"added"===n&&o&&(p=null!==(a=o.endAngle)&&void 0!==a?a:s,f=null!==(l=o.endAngle)&&void 0!==l?l:s,g=null!==(c=o.innerRadius)&&void 0!==c?c:i.innerRadius,v=null!==(d=o.outerRadius)&&void 0!==d?d:i.outerRadius),"added"===n&&!t){const t=(({radius:t})=>({innerRadius:r[0],outerRadius:r[0]+(r[1]-r[0])*t}))(i);g=t.innerRadius,v=t.outerRadius}return"updated"===n&&(y=null!==(u=e.fill)&&void 0!==u?u:y,m=null!==(h=e.stroke)&&void 0!==h?h:m),{startAngle:p,endAngle:f,innerRadius:g,outerRadius:v,fill:y,stroke:m}}},innerCircle:{fromFn:(t,e)=>{var i,n,o;return{size:null!==(o=null!==(n=null===(i=t.previousDatum)||void 0===i?void 0:i.radius)&&void 0!==n?n:t.size)&&void 0!==o?o:0}},toFn:(t,e)=>{var i;return{size:null!==(i=e.radius)&&void 0!==i?i:0}}}}}function _P(t,e){return{startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,fill:e.sectorFormat.fill,stroke:e.sectorFormat.stroke}}function GP(t,e){const i=SM(t),n=i?t:[],o=i?[]:t;for(const t of o){for(const i of t.nodes()){const t=e(i,i.datum);i.setProperties(t)}t.cleanup()}for(const t of n){const i=e(t,t.datum);t.setProperties(i)}}KA([PT(UT),YA("design:type",Object)],IP.prototype,"enabled",void 0),KA([PT(HT),YA("design:type",Boolean)],IP.prototype,"showArrow",void 0),KA([PT(YT),YA("design:type",String)],IP.prototype,"format",void 0),KA([PT(zT),YA("design:type",Function)],IP.prototype,"renderer",void 0);var BP,VP=Object.freeze({__proto__:null,resetMotion:GP});class jP{constructor(t,e,i){this.states=e,this.preTransitionCb=i,this.debug=sT.create(!0,"animation"),this.state=t,this.debug(`%c${this.constructor.name} | init -> ${t}`,"color: green")}transition(t,e){var i,n;const o=this.states[this.state],r=null==o?void 0:o[t];if(!r)return void this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${this.state}`,"color: grey");let s=this.state;return"string"==typeof r?s=r:"object"==typeof r&&(s=r.target),this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${s}`,"color: green"),null===(i=this.preTransitionCb)||void 0===i||i.call(this,this.state,s),this.state=s,"function"==typeof r?r(e):"object"==typeof r&&(null===(n=r.action)||void 0===n||n.call(r,e)),this.state}}class WP extends gP{isContinuous(){var t,e;return{isContinuousX:YM.is(null===(t=this.axes[Lk.X])||void 0===t?void 0:t.scale),isContinuousY:YM.is(null===(e=this.axes[Lk.Y])||void 0===e?void 0:e.scale)}}requestDataModel(t,e,i){var n;return XA(this,void 0,void 0,(function*(){const o=i.props,r=null!==(n=this.dispatch("data-prerequest",this.isContinuous()))&&void 0!==n?n:[];for(const t of r)o.push(...t);const{dataModel:s,processedData:a}=yield t.request(this.id,null!=e?e:[],Object.assign(Object.assign({},i),{props:o}));return this.dataModel=s,this.processedData=a,this.dispatch("data-processed",{dataModel:s,processedData:a}),{dataModel:s,processedData:a}}))}isProcessedDataAnimatable(){var t,e;const i=null===(e=null===(t=this.processedData)||void 0===t?void 0:t.reduced)||void 0===e?void 0:e.animationValidation;if(!i)return!0;const{orderedKeys:n,uniqueKeys:o}=i;return!!n&&!!o}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}}class zP extends WP{constructor(t){var{useLabelLayer:e=!1,pickModes:i=[iP.EXACT_SHAPE_MATCH],canHaveAxes:n=!1,animationResetFns:o}=t,r=HA(t,["useLabelLayer","pickModes","canHaveAxes","animationResetFns"]);super(Object.assign(Object.assign({},r),{useLabelLayer:e,pickModes:i,contentGroupVirtual:!1,directionKeys:{[Lk.X]:["angleKey"],[Lk.Y]:["radiusKey"]},directionNames:{[Lk.X]:["angleName"],[Lk.Y]:["radiusName"]},canHaveAxes:n})),this.sectorGroup=this.contentGroup.appendChild(new ZM),this.itemSelection=JM.select(this.sectorGroup,()=>this.nodeFactory(),!1),this.labelSelection=JM.select(this.labelGroup,eM,!1),this.highlightSelection=JM.select(this.highlightGroup,()=>this.nodeFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.sectorGroup.zIndexSubOrder=[()=>this._declarationOrder,1],this.animationResetFns=o,this.animationState=new jP("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)}},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),highlightMarkers:t=>this.animateReadyHighlightMarkers(t),resize:t=>this.animateReadyResize(t)},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)}},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)}}},()=>this.checkProcessedDataAnimatable())}getLabelData(){return[]}computeLabelsBBox(t,e){return null}resetAllAnimation(){var t;const{item:e,label:i}=null!==(t=this.animationResetFns)&&void 0!==t?t:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&GP([this.itemSelection,this.highlightSelection],e),i&&GP([this.labelSelection],i),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(t){var e;const{item:i}=null!==(e=this.animationResetFns)&&void 0!==e?e:{};i&&GP([this.highlightSelection],i)}animateReadyHighlightMarkers(t){}animateReadyResize(t){this.resetAllAnimation()}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t){return{seriesRect:t}}}class UP extends dP{constructor(t,e,i,n){super(t,e,i,n),this.angleKey=n.angleKey,this.radiusKey=n.radiusKey,this.calloutLabelKey=n.calloutLabelKey,this.sectorLabelKey=n.sectorLabelKey}}!function(t){t[t.Sector=0]="Sector",t[t.Callout=1]="Callout",t[t.Label=2]="Label"}(BP||(BP={}));class HP extends BR{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}}KA([PT(ok(0)),YA("design:type",Object)],HP.prototype,"offset",void 0),KA([PT(ok(0)),YA("design:type",Object)],HP.prototype,"minAngle",void 0),KA([PT(ok(0)),YA("design:type",Object)],HP.prototype,"minSpacing",void 0),KA([PT(ok(0)),YA("design:type",Object)],HP.prototype,"maxCollisionOffset",void 0),KA([PT(UT),YA("design:type",Object)],HP.prototype,"avoidCollisions",void 0);class KP extends BR{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}}KA([PT(ok()),YA("design:type",Object)],KP.prototype,"positionOffset",void 0),KA([PT(ok(0,1)),YA("design:type",Object)],KP.prototype,"positionRatio",void 0);class YP{constructor(){this.length=10,this.strokeWidth=1}}KA([PT(ik),YA("design:type",Array)],YP.prototype,"colors",void 0),KA([PT(ok(0)),YA("design:type",Number)],YP.prototype,"length",void 0),KA([PT(ok(0)),YA("design:type",Number)],YP.prototype,"strokeWidth",void 0);KA([PT(UT),YA("design:type",Object)],class extends dM{constructor(){super(...arguments),this.showInLegend=!1}}.prototype,"showInLegend",void 0);class XP extends BR{constructor(){super(...arguments),this.text="",this.margin=2}}KA([PT(KT),YA("design:type",Object)],XP.prototype,"text",void 0),KA([PT(ok()),YA("design:type",Object)],XP.prototype,"margin",void 0);class qP{constructor(){this.fill="transparent",this.fillOpacity=1}}KA([PT(QT),YA("design:type",Object)],qP.prototype,"fill",void 0),KA([PT(rk(0,1)),YA("design:type",Object)],qP.prototype,"fillOpacity",void 0);class $P extends zP{constructor(t){super({moduleCtx:t,useLabelLayer:!0,animationResetFns:{item:_P,label:mP}}),this.previousRadiusScale=new XM,this.radiusScale=new XM,this.backgroundGroup=this.rootGroup.appendChild(new ZM({name:this.id+"-background",layer:!0,zIndex:zR.SERIES_BACKGROUND_ZINDEX})),this.innertCircleGroup=this.backgroundGroup.appendChild(new ZM({name:this.id+"-innerCircle"})),this.nodeData=[],this.seriesItemEnabled=[],this.title=void 0,this.calloutLabel=new HP,this.sectorLabel=new KP,this.calloutLine=new YP,this.tooltip=new IP,this.angleKey="",this.angleName="",this.innerLabels=[],this.innerCircle=void 0,this.radiusKey=void 0,this.radiusName=void 0,this.radiusMin=void 0,this.radiusMax=void 0,this.calloutLabelKey=void 0,this.calloutLabelName=void 0,this.sectorLabelKey=void 0,this.sectorLabelName=void 0,this.legendItemKey=void 0,this.fills=Object.values(KR),this.strokes=Object.values(YR),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.innerRadiusOffset=0,this.innerRadiusRatio=1,this.strokeWidth=1,this.shadow=void 0,this.highlightStyle=new fP,this.surroundingRadius=void 0,this.NodeClickEvent=UP,this.angleScale=new XM,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(t=>t+Math.PI/2);const e=new ZM({name:"pieCalloutLabels"}),i=new ZM({name:"pieSectorLabels"}),n=new ZM({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(i),this.labelGroup.append(n),this.calloutLabelSelection=JM.select(e,ZM),this.sectorLabelSelection=JM.select(i,eM),this.innerLabelsSelection=JM.select(n,eM),this.innerCircleSelection=JM.select(this.innertCircleGroup,HR)}addChartEventListeners(){var t;null===(t=this.ctx.chartEventManager)||void 0===t||t.addListener("legend-item-click",t=>this.onLegendItemClick(t))}visibleChanged(){this.processSeriesItemEnabled()}processSeriesItemEnabled(){var t;const{data:e,visible:i}=this;this.seriesItemEnabled=null!==(t=null==e?void 0:e.map(()=>i))&&void 0!==t?t:[]}nodeFactory(){return new uR}getSeriesDomain(t){return t===Lk.X?this.angleScale.domain:this.radiusScale.domain}processData(t){var e,i;return XA(this,void 0,void 0,(function*(){let{data:n}=this;const{angleKey:o,radiusKey:r,calloutLabelKey:s,sectorLabelKey:a,legendItemKey:l,seriesItemEnabled:c}=this;if(null==o||null==n)return;const d=!this.ctx.animationManager.isSkipped(),u=[],h=[];l?u.push(sP(this,l,!1,{id:"legendItemKey"})):s?u.push(sP(this,s,!1,{id:"calloutLabelKey"})):a&&u.push(sP(this,a,!1,{id:"sectorLabelKey"})),r&&h.push(function(t,e,i={}){const{min:n=-1/0,max:o=1/0}=i,r=HA(i,["min","max"]);return Object.assign({scopes:[t.id],type:"value",property:e,valueType:"range",validation:oP,processor:()=>t=>"number"!=typeof t||isNaN(t)?t:Math.min(Math.max(t,n),o)},r)}(this,r,{id:"radiusValue",min:null!==(e=this.radiusMin)&&void 0!==e?e:0,max:this.radiusMax}),aP(this,r,!0,{id:"radiusRaw"}),PR(this,{id:"radiusValue"},[0,1],1,null!==(i=this.radiusMin)&&void 0!==i?i:0,this.radiusMax)),s&&h.push(aP(this,s,!1,{id:"calloutLabelValue"})),a&&h.push(aP(this,a,!1,{id:"sectorLabelValue"})),l&&h.push(aP(this,l,!1,{id:"legendItemValue"})),d&&this.processedData&&u.length>0&&h.push(_R(this.processedData)),h.push(NR(this)),n=n.map((t,e)=>c[e]?t:Object.assign(Object.assign({},t),{[o]:0})),yield this.requestDataModel(t,n,{props:[...u,lP(this,o,!0,{id:"angleValue",onlyPositive:!0}),aP(this,o,!0,{id:"angleRaw"}),PR(this,{id:"angleValue"},[0,1],0,0),...h]}),this.animationState.transition("updateData")}))}maybeRefreshNodeData(){return XA(this,void 0,void 0,(function*(){if(!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=yield this.createNodeData();this.nodeData=t,this.nodeDataRefresh=!1}))}getProcessedDataIndexes(t){return{angleIdx:t.resolveProcessedDataIndexById(this,"angleValue").index,radiusIdx:this.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue").index:-1,calloutLabelIdx:this.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,sectorLabelIdx:this.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,legendItemIdx:this.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue").index:-1}}createNodeData(){return XA(this,void 0,void 0,(function*(){const{id:t,processedData:e,dataModel:i,rotation:n,angleScale:o}=this;if(!e||!i||"ungrouped"!==e.type)return[];const{angleIdx:r,radiusIdx:s,calloutLabelIdx:a,sectorLabelIdx:l,legendItemIdx:c}=this.getProcessedDataIndexes(i);let d=0;const u=e.data.map((t,e)=>{var i;const{datum:u,values:h}=t,p=h[r],f=o.convert(d)+CT(n);d=p;const g=o.convert(d)+CT(n),v=Math.abs(g-f),y=f+v/2,m=h[r+1],b=s>=0&&null!==(i=h[s])&&void 0!==i?i:1,S=s>=0?h[s+1]:void 0,x=c>=0?h[c]:void 0,C=this.getLabels(u,y,v,!0,h[a],h[l],x),w=this.getSectorFormat(u,e,!1);return Object.assign({itemId:e,series:this,datum:u,index:e,angleValue:m,midAngle:y,midCos:Math.cos(y),midSin:Math.sin(y),startAngle:f,endAngle:g,sectorFormat:w,radiusValue:S,radius:b,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(b),0),legendItemValue:x},C)});return[{itemId:t,nodeData:u,labelData:u}]}))}getLabels(t,e,i,n,o,r,s){const{calloutLabel:a,sectorLabel:l,legendItemKey:c}=this,d=!n||a.enabled?this.calloutLabelKey:void 0,u=!n||l.enabled?this.sectorLabelKey:void 0;if(!d&&!u&&!c)return{};const h={datum:t,angleKey:this.angleKey,angleName:this.angleName,radiusKey:this.radiusKey,radiusName:this.radiusName,calloutLabelKey:this.calloutLabelKey,calloutLabelName:this.calloutLabelName,sectorLabelKey:this.sectorLabelKey,sectorLabelName:this.sectorLabelName,legendItemKey:this.legendItemKey},p={};return d&&i>CT(a.minAngle)&&(p.calloutLabel=Object.assign(Object.assign({},this.getTextAlignment(e)),{text:this.getLabelText(a,Object.assign(Object.assign({},h),{value:o})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),u&&(p.sectorLabel={text:this.getLabelText(l,Object.assign(Object.assign({},h),{value:r}))}),null!=c&&null!=s&&(p.legendItem={key:c,text:s}),p}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=xT(t)- -3*Math.PI/4;return e[MT(Math.floor(i/(Math.PI/2)),e.length)]}getSectorFormat(t,e,i){var n,o,r,s,a;const{angleKey:l,radiusKey:c,fills:d,strokes:u,formatter:h,id:p,ctx:{callbackCache:f,highlightManager:g}}=this,v=g.getActiveHighlight(),y=i&&(null==v?void 0:v.series)===this&&e===v.itemId,{fill:m,fillOpacity:b,stroke:S,strokeWidth:x,strokeOpacity:C}=vR(y&&this.highlightStyle.item,{fill:d[e%d.length],fillOpacity:this.fillOpacity,stroke:u[e%u.length],strokeWidth:this.getStrokeWidth(this.strokeWidth),strokeOpacity:this.getOpacity()});let w;return h&&(w=f.call(h,{datum:t,angleKey:l,radiusKey:c,fill:m,stroke:S,fills:d,strokes:u,strokeWidth:x,highlighted:y,seriesId:p})),{fill:null!==(n=null==w?void 0:w.fill)&&void 0!==n?n:m,fillOpacity:null!==(o=null==w?void 0:w.fillOpacity)&&void 0!==o?o:b,stroke:null!==(r=null==w?void 0:w.stroke)&&void 0!==r?r:S,strokeWidth:null!==(s=null==w?void 0:w.strokeWidth)&&void 0!==s?s:x,strokeOpacity:null!==(a=null==w?void 0:w.strokeOpacity)&&void 0!==a?a:C}}getInnerRadius(){const{radius:t,innerRadiusRatio:e,innerRadiusOffset:i}=this,n=t*e+i;return n===t||n<0?0:n}getOuterRadius(){return Math.max(this.radius*this.outerRadiusRatio+this.outerRadiusOffset,0)}updateRadiusScale(t){const e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e),this.nodeData=this.nodeData.map(t=>{var{radius:e}=t,i=HA(t,["radius"]);return Object.assign(Object.assign({},i),{radius:e,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(e),0)})})}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);if(0===i)return NaN;return-i-(2+(null!==(e=null===(t=this.title)||void 0===t?void 0:t.spacing)&&void 0!==e?e:0))-Math.max(0,-i)}update({seriesRect:t}){return XA(this,void 0,void 0,(function*(){const{title:e}=this,i={seriesRectWidth:null==t?void 0:t.width,seriesRectHeight:null==t?void 0:t.height},n=null!=hT(this.nodeDataDependencies,i);if(n&&(this.nodeDataDependencies=i),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(n),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),e){const t=this.getTitleTranslationY(),i=e.node.computeBBox();e.node.visible=e.enabled&&isFinite(t)&&!this.bboxIntersectsSurroundingSeries(i,0,t),e.node.translationY=isFinite(t)?t:0}this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(t)}))}updateTitleNodes(){var t,e;const{title:i,oldTitle:n}=this;n!==i&&(n&&(null===(t=this.labelGroup)||void 0===t||t.removeChild(n.node)),i&&(i.node.textBaseline="bottom",null===(e=this.labelGroup)||void 0===e||e.appendChild(i.node)),this.oldTitle=i)}updateNodeMidPoint(){this.nodeData.forEach(t=>{const e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,e),y:t.midSin*Math.max(0,e)}})}updateSelections(){return XA(this,void 0,void 0,(function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()}))}updateGroupSelection(){return XA(this,void 0,void 0,(function*(){const{itemSelection:t,highlightSelection:e,calloutLabelSelection:i,sectorLabelSelection:n,innerLabelsSelection:o}=this,r=(t,e)=>{let i=this.nodeData;e&&(i=i.map(t=>Object.assign(Object.assign({},t),{sectorFormat:Object.assign({},t.sectorFormat)}))),t.update(i),this.ctx.animationManager.isSkipped()&&t.cleanup()};r(t,!1),r(e,!0),i.update(this.nodeData,t=>{const e=new QM;e.tag=BP.Callout,e.pointerEvents=Uk.None,t.appendChild(e);const i=new eM;i.tag=BP.Label,i.pointerEvents=Uk.None,t.appendChild(i)}),n.update(this.nodeData,t=>{t.pointerEvents=Uk.None}),o.update(this.innerLabels,t=>{t.pointerEvents=Uk.None})}))}updateInnerCircleSelection(){const{innerCircle:t}=this;let e=0;const i=this.getInnerRadius();if(i>0){const t=Math.min(i,this.getOuterRadius()),n=1;e=Math.ceil(2*t+n)}const n=t?[{radius:e}]:[];this.innerCircleSelection.update(n)}updateNodes(t){return XA(this,void 0,void 0,(function*(){const e=this.ctx.highlightManager.getActiveHighlight(),i=this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(null==e?void 0:e.series)===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((t,{radius:e})=>{var i,n;t.setProperties({fill:null===(i=this.innerCircle)||void 0===i?void 0:i.fill,opacity:null===(n=this.innerCircle)||void 0===n?void 0:n.fillOpacity,size:e})});const n=(t,e,i,n)=>{const o=this.getSectorFormat(e.datum,e.itemId,n);e.sectorFormat.fill=o.fill,e.sectorFormat.stroke=o.stroke;const r=this.ctx.animationManager.isSkipped();r&&(t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius),(n||r)&&(t.fill=o.fill,t.stroke=o.stroke),t.strokeWidth=o.strokeWidth,t.fillOpacity=o.fillOpacity,t.strokeOpacity=this.strokeOpacity,t.lineDash=this.lineDash,t.lineDashOffset=this.lineDashOffset,t.fillShadow=this.shadow,t.lineJoin="round"};this.itemSelection.each((t,e,i)=>n(t,e,0,!1)),this.highlightSelection.each((t,i,o)=>{const r=(null==e?void 0:e.series)===this&&t.datum.itemId===e.itemId;n(t,i,0,r),t.visible=r}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.animationState.transition("update")}))}updateCalloutLineNodes(){var t;const{calloutLine:e}=this,i=e.length,n=e.strokeWidth,o=null!==(t=e.colors)&&void 0!==t?t:this.strokes,{offset:r}=this.calloutLabel;this.calloutLabelSelection.selectByTag(BP.Callout).forEach((t,e)=>{const s=t.datum,{calloutLabel:a,outerRadius:l}=s;if((null==a?void 0:a.text)&&!a.hidden&&0!==l){t.visible=!0,t.strokeWidth=n,t.stroke=o[e%o.length],t.fill=void 0;const c=s.midCos*l,d=s.midSin*l;let u=s.midCos*(l+i),h=s.midSin*(l+i);if((a.collisionTextAlign||0!==a.collisionOffsetY)&&null!=a.box){const t=a.box;let e=u,i=h;u<t.x?e=t.x:u>t.x+t.width&&(e=t.x+t.width),h<t.y?i=t.y:h>t.y+t.height&&(i=t.y+t.height);const n=e-u,o=i-h,s=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),l=s-r;l>0&&(u+=n*l/s,h+=o*l/s)}t.x1=c,t.y1=d,t.x2=u,t.y2=h}else t.visible=!1})}getLabelOverflow(t,e,i){const n=i.x-this.centerX,o=i.x+i.width-this.centerX,r=i.y-this.centerY,s=i.y+i.height-this.centerY;let a=1;e.x+1<n?a=(e.x+e.width-n)/e.width:e.x+e.width-1>o&&(a=(o-e.x)/e.width);const l=e.y+1<r||e.y+e.height-1>s;return{textLength:1===a?t.length:Math.floor(t.length*a)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t,e=0,i=0){const{surroundingRadius:n}=this;if(null==n)return!1;const o=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],r=Math.pow(n,2);return o.some(t=>Math.pow(t.x,2)+Math.pow(t.y,2)>r)}computeCalloutLabelCollisionOffsets(){const{radiusScale:t,calloutLabel:e,calloutLine:i}=this,{offset:n,minSpacing:o}=e,r=t.convert(0),s=this.nodeData,a=this.nodeData.filter(t=>{return!(!(e=t).calloutLabel||0===e.outerRadius);var e});if(a.forEach(t=>{const e=t.calloutLabel;null!=e&&(e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0)}),a.length<=1)return;const l=a.filter(t=>t.midCos<0).sort((t,e)=>t.midSin-e.midSin),c=a.filter(t=>t.midCos>=0).sort((t,e)=>t.midSin-e.midSin),d=a.filter(t=>{var e;return t.midSin<0&&"center"===(null===(e=t.calloutLabel)||void 0===e?void 0:e.textAlign)}).sort((t,e)=>t.midCos-e.midCos),u=a.filter(t=>{var e;return t.midSin>=0&&"center"===(null===(e=t.calloutLabel)||void 0===e?void 0:e.textAlign)}).sort((t,e)=>t.midCos-e.midCos),h=new eM,p=t=>{var e;const o=t.calloutLabel;if(null==o)return new Wk(0,0,0,0);const r=t.outerRadius+i.length+n,s=t.midCos*r,a=t.midSin*r+o.collisionOffsetY;return h.text=o.text,h.x=s,h.y=a,h.setFont(this.calloutLabel),h.setAlign({textAlign:null!==(e=o.collisionTextAlign)&&void 0!==e?e:o.textAlign,textBaseline:o.textBaseline}),h.computeBBox()},f=(t,e,i)=>{const n=p(t).grow(o/2),r=p(e).grow(o/2);if(n.x<r.x+r.width&&n.x+n.width>r.x&&("to-top"===i?n.y<r.y+r.height:n.y+n.height>r.y)){const t="to-top"===i?n.y-r.y-r.height:n.y+n.height-r.y;e.calloutLabel.collisionOffsetY=t}},g=t=>{const e=t.slice().sort((t,e)=>Math.abs(t.midSin)-Math.abs(e.midSin))[0],i=t.indexOf(e);for(let e=i-1;e>=0;e--){const i=t[e+1],n=t[e];f(i,n,"to-top")}for(let e=i+1;e<t.length;e++){const i=t[e-1],n=t[e];f(i,n,"to-bottom")}},v=t=>{const e=a.some(t=>0!==t.calloutLabel.collisionOffsetY),i=t.map(t=>p(t)),n=i.map(t=>t.clone().grow(o/2));let l=!1;for(let e=0;e<n.length&&!l;e++){const i=n[e];for(let o=e+1;o<t.length;o++){const t=n[o];if(i.collidesBBox(t)){l=!0;break}}}const c=s.map(t=>{const{startAngle:e,endAngle:i,outerRadius:n}=t;return{startAngle:e,endAngle:i,innerRadius:r,outerRadius:n}}),d=i.some(t=>c.some(e=>function(t,e){const i={x:t.x,y:t.y},n={x:t.x+t.width,y:t.y},o={x:t.x,y:t.y+t.height},r={x:t.x+t.width,y:t.y+t.height};return sR({start:i,end:n},e)||sR({start:o,end:r},e)}(t,e)));(l||e||d)&&t.filter(t=>"center"===t.calloutLabel.textAlign).forEach(t=>{const e=t.calloutLabel;t.midCos<0?e.collisionTextAlign="right":t.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"})};g(l),g(c),v(d),v(u)}updateCalloutLabelNodes(t){const{radiusScale:e,calloutLabel:i,calloutLine:n}=this,o=n.length,{offset:r,color:s}=i,a=new eM;this.calloutLabelSelection.selectByTag(BP.Label).forEach(n=>{var l;const{datum:c}=n,d=c.calloutLabel,u=e.convert(c.radius),h=Math.max(0,u);if(!(null==d?void 0:d.text)||0===h||d.hidden)return void(n.visible=!1);const p=h+o+r,f=c.midCos*p,g=c.midSin*p+d.collisionOffsetY,v={textAlign:null!==(l=d.collisionTextAlign)&&void 0!==l?l:d.textAlign,textBaseline:d.textBaseline};a.text=d.text,a.x=f,a.y=g,a.setFont(this.calloutLabel),a.setAlign(v);const y=a.computeBBox();let m=d.text,b=!0;if(i.avoidCollisions){const{textLength:e,hasVerticalOverflow:i}=this.getLabelOverflow(d.text,y,t);m=d.text.length===e?d.text:d.text.substring(0,e)+"\u2026",b=!i}n.text=m,n.x=f,n.y=g,n.setFont(this.calloutLabel),n.setAlign(v),n.fill=s,n.visible=b})}computeLabelsBBox(t,e){var i;return XA(this,void 0,void 0,(function*(){const{calloutLabel:n,calloutLine:o}=this,r=o.length,{offset:s,maxCollisionOffset:a,minSpacing:l}=n;if(!n.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const c=[],d=new eM;let u;if((null===(i=this.title)||void 0===i?void 0:i.text)&&this.title.enabled){const t=this.getTitleTranslationY();isFinite(t)&&(d.text=this.title.text,d.x=0,d.y=t,d.setFont(this.title),d.setAlign({textBaseline:"bottom",textAlign:"center"}),u=d.computeBBox(),c.push(u))}return this.nodeData.forEach(i=>{var n;const o=i.calloutLabel;if(!o||0===i.outerRadius)return null;const h=i.outerRadius+r+s,p=i.midCos*h,f=i.midSin*h+o.collisionOffsetY;d.text=o.text,d.x=p,d.y=f,d.setFont(this.calloutLabel),d.setAlign({textAlign:null!==(n=o.collisionTextAlign)&&void 0!==n?n:o.textAlign,textBaseline:o.textBaseline});const g=d.computeBBox();if(o.box=g,Math.abs(o.collisionOffsetY)>a)o.hidden=!0;else{if(u){const t=e.y-this.centerY,i=new Wk(u.x-l,t,u.width+2*l,u.y+u.height+l-t);if(g.collidesBBox(i))return void(o.hidden=!0)}if(t.hideWhenNecessary){const{textLength:t,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:n}=this.getLabelOverflow(o.text,g,e),r=o.text.length>2&&t<2;if(i||r||n)return void(o.hidden=!0)}o.hidden=!1,c.push(g)}}),0===c.length?null:Wk.merge(c)}))}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:n,fontWeight:o,fontFamily:r,positionOffset:s,positionRatio:a,color:l}=this.sectorLabel,c=e>0,d=1===this.seriesItemEnabled.filter(Boolean).length;this.sectorLabelSelection.each((t,u)=>{const{sectorLabel:h,outerRadius:p}=u;let f=!1;if(h&&0!==p){const g=e*(1-a)+p*a+s;t.fill=l,t.fontStyle=n,t.fontWeight=o,t.fontSize=i,t.fontFamily=r,t.text=h.text;!c&&d?(t.x=0,t.y=0):(t.x=u.midCos*g,t.y=u.midSin*g),t.textAlign="center",t.textBaseline="middle";const v=t.computeBBox(),y=[[v.x,v.y],[v.x+v.width,v.y],[v.x+v.width,v.y+v.height],[v.x,v.y+v.height]],{startAngle:m,endAngle:b}=u,S={startAngle:m,endAngle:b,innerRadius:e,outerRadius:p};y.every(([t,e])=>rR(t,e,S))&&(f=!0)}t.visible=f})}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each((i,n)=>{const{fontStyle:o,fontWeight:r,fontSize:s,fontFamily:a,color:l}=n;i.fontStyle=o,i.fontWeight=r,i.fontSize=s,i.fontFamily=a,i.text=n.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",t.push(i.computeBBox()),e.push(n.margin)});const i=t=>0===t?0:e[t],n=t=>t===e.length-1?0:e[t],o=t.reduce((t,e,o)=>t+e.height+i(o)+n(o),0),r=Math.max(...t.map(t=>t.width)),s=this.getInnerRadius(),a=Math.sqrt(Math.pow(r/2,2)+Math.pow(o/2,2))<=(s>0?s:this.getOuterRadius()),l=[];for(let e=0,r=-o/2;e<t.length;e++){const o=t[e].height+r+i(e);l.push(o),r=o+n(e)}this.innerLabelsSelection.each((t,e,i)=>{t.y=l[i],t.visible=a})}getDatumLegendName(t){const{angleKey:e,calloutLabelKey:i,sectorLabelKey:n,legendItemKey:o}=this,{sectorLabel:r,calloutLabel:s,legendItem:a}=t;return o&&void 0!==a?a.text:i&&i!==e&&void 0!==(null==s?void 0:s.text)?s.text:n&&n!==e&&void 0!==(null==r?void 0:r.text)?r.text:void 0}getTooltipHtml(t){var e;if(!this.angleKey)return"";const{datum:i,angleValue:n,sectorFormat:{fill:o}}=t,r=mR(null===(e=this.title)||void 0===e?void 0:e.text),s=ER(n)?kT(n):String(n),a=this.getDatumLegendName(t);return this.tooltip.toTooltipHtml({title:null!=r?r:a,content:r&&a?`${a}: ${s}`:s,backgroundColor:o},{datum:i,title:r,color:o,seriesId:this.id,angleKey:this.angleKey,angleName:this.angleName,radiusKey:this.radiusKey,radiusName:this.radiusName,calloutLabelKey:this.calloutLabelKey,calloutLabelName:this.calloutLabelName,sectorLabelKey:this.sectorLabelKey,sectorLabelName:this.sectorLabelName})}getLegendData(t){var e,i,n,o,r;const{processedData:s,angleKey:a,calloutLabelKey:l,sectorLabelKey:c,legendItemKey:d,id:u,dataModel:h}=this;if(!h||!s||0===s.data.length||"category"!==t)return[];if(!(d||l&&l!==a||c&&c!==a))return[];const{calloutLabelIdx:p,sectorLabelIdx:f,legendItemIdx:g}=this.getProcessedDataIndexes(h),v=(null===(e=this.title)||void 0===e?void 0:e.showInLegend)&&this.title.text,y=[];for(let t=0;t<s.data.length;t++){const{datum:e,values:h}=s.data[t],m=[];v&&m.push(v);const b=this.getLabels(e,2*Math.PI,2*Math.PI,!1,h[p],h[f],h[g]);if(d&&void 0!==b.legendItem?m.push(b.legendItem.text):l&&l!==a&&void 0!==(null===(i=b.calloutLabel)||void 0===i?void 0:i.text)?m.push(null===(n=b.calloutLabel)||void 0===n?void 0:n.text):c&&c!==a&&void 0!==(null===(o=b.sectorLabel)||void 0===o?void 0:o.text)&&m.push(null===(r=b.sectorLabel)||void 0===r?void 0:r.text),0===m.length)continue;const S=this.getSectorFormat(e,t,!1);y.push({legendType:"category",id:u,itemId:t,seriesId:u,enabled:this.seriesItemEnabled[t],label:{text:m.join(" - ")},marker:{fill:S.fill,stroke:S.stroke,fillOpacity:this.fillOpacity,strokeOpacity:this.strokeOpacity,strokeWidth:this.strokeWidth}})}return y}onLegendItemClick(t){const{enabled:e,itemId:i,series:n}=t;n.id===this.id?this.toggleSeriesItem(i,e):"pie"===n.type&&this.toggleOtherSeriesItems(n,i,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e,i){var n,o;const{legendItemKey:r,dataModel:s}=this;if(!r||!s)return;const a=t.legendItemKey&&(null===(n=t.data)||void 0===n?void 0:n.find((t,i)=>i===e)[t.legendItemKey]);if(!a)return;const l=s.resolveProcessedDataIndexById(this,"legendItemValue").index;null===(o=this.processedData)||void 0===o||o.data.forEach(({values:t},e)=>{t[l]===a&&this.toggleSeriesItem(e,i)})}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=FP(!0,this.rotation,this.radiusScale,this.previousRadiusScale);wM(this.id,"nodes",e,[this.itemSelection,this.highlightSelection],i.nodes),wM(this.id,"innerCircle",e,[this.innerCircleSelection],i.innerCircle),vP(this,"callout",e,[this.calloutLabelSelection]),vP(this,"sector",e,[this.sectorLabelSelection]),vP(this,"inner",e,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var t,e,i,n,o,r;const{itemSelection:s,highlightSelection:a,processedData:l,radiusScale:c,previousRadiusScale:d}=this,{animationManager:u}=this.ctx,h=null===(t=null==l?void 0:l.reduced)||void 0===t?void 0:t.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const p=0===(null!==(e=null==h?void 0:h.moved.length)&&void 0!==e?e:0)&&(null==h?void 0:h.addedIndices.every(t=>!h.removedIndices.includes(t))),f=(null!==(i=null==l?void 0:l.defs.keys.length)&&void 0!==i?i:0)>0,g=null===(r=null===(o=null===(n=null==l?void 0:l.reduced)||void 0===n?void 0:n.animationValidation)||void 0===o?void 0:o.uniqueKeys)||void 0===r||r;p&&f&&g||this.ctx.animationManager.skipCurrentBatch();const v=FP(!1,this.rotation,c,d);wM(this.id,"nodes",u,[s,a],v.nodes,(t,e)=>this.getDatumId(e),h),wM(this.id,"innerCircle",u,[this.innerCircleSelection],v.innerCircle),vP(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),vP(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),vP(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,radiusScale:i,previousRadiusScale:n}=this,{animationManager:o}=this.ctx,r=FP(!1,this.rotation,i,n);wM(this.id,"nodes",o,[t,e],r.nodes),wM(this.id,"innerCircle",o,[this.innerCircleSelection],r.innerCircle),yP(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),yP(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),yP(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(t){var e,i,n;const{calloutLabelKey:o,sectorLabelKey:r,legendItemKey:s}=this;if(null===(n=null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.animationValidation)||void 0===n?void 0:n.uniqueKeys)return s?t[s]:o?t[o]:r?t[r]:void 0}getDatumId(t){var e;const{index:i}=t;return null!==(e=this.getDatumIdFromData(t.datum))&&void 0!==e?e:""+i}onDataChange(){this.processSeriesItemEnabled()}}$P.className="PieSeries",$P.type="pie",KA([PT(KT),YA("design:type",Object)],$P.prototype,"angleKey",void 0),KA([PT(KT),YA("design:type",Object)],$P.prototype,"angleName",void 0),KA([PT(YT),YA("design:type",String)],$P.prototype,"radiusKey",void 0),KA([PT(YT),YA("design:type",String)],$P.prototype,"radiusName",void 0),KA([PT(rk(0)),YA("design:type",Number)],$P.prototype,"radiusMin",void 0),KA([PT(rk(0)),YA("design:type",Number)],$P.prototype,"radiusMax",void 0),KA([PT(YT),YA("design:type",String)],$P.prototype,"calloutLabelKey",void 0),KA([PT(YT),YA("design:type",String)],$P.prototype,"calloutLabelName",void 0),KA([PT(YT),YA("design:type",String)],$P.prototype,"sectorLabelKey",void 0),KA([PT(YT),YA("design:type",String)],$P.prototype,"sectorLabelName",void 0),KA([PT(YT),YA("design:type",String)],$P.prototype,"legendItemKey",void 0),KA([PT(ek),YA("design:type",Array)],$P.prototype,"fills",void 0),KA([PT(ek),YA("design:type",Array)],$P.prototype,"strokes",void 0),KA([PT(ok(0,1)),YA("design:type",Object)],$P.prototype,"fillOpacity",void 0),KA([PT(ok(0,1)),YA("design:type",Object)],$P.prototype,"strokeOpacity",void 0),KA([PT(mk),YA("design:type",Array)],$P.prototype,"lineDash",void 0),KA([PT(ok(0)),YA("design:type",Number)],$P.prototype,"lineDashOffset",void 0),KA([PT(zT),YA("design:type",Function)],$P.prototype,"formatter",void 0),KA([PT(ok(-360,360)),YA("design:type",Object)],$P.prototype,"rotation",void 0),KA([PT(ok()),YA("design:type",Object)],$P.prototype,"outerRadiusOffset",void 0),KA([PT(ok(0)),YA("design:type",Object)],$P.prototype,"outerRadiusRatio",void 0),KA([PT(ok()),YA("design:type",Object)],$P.prototype,"innerRadiusOffset",void 0),KA([PT(ok(0)),YA("design:type",Object)],$P.prototype,"innerRadiusRatio",void 0),KA([PT(ok(0)),YA("design:type",Object)],$P.prototype,"strokeWidth",void 0);const ZP={constructors:{},constructedArrays:new WeakMap};class JP extends Qk{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new Wk(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:n,stats:o}=t;if(this.dirty===Ik.NONE&&!n)return void(o&&(o.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:r,y1:s,x2:a,y2:l}=this;r=this.align(r),s=this.align(s),a=this.align(a),l=this.align(l);const{fill:c,opacity:d,isRange:u}=this;if(!(!u||!c)){const{fillOpacity:t}=this;i.fillStyle=c,i.globalAlpha=d*t,i.beginPath(),i.moveTo(r,s),i.lineTo(a,s),i.lineTo(a,l),i.lineTo(r,l),i.closePath(),i.fill()}const{stroke:h,strokeWidth:p,startLine:f,endLine:g}=this;if(!(!f&&!g||!h||!p)){const{strokeOpacity:t,lineDash:e,lineDashOffset:n,lineCap:o,lineJoin:c}=this;i.strokeStyle=h,i.globalAlpha=d*t,i.lineWidth=p,e&&i.setLineDash(e),n&&(i.lineDashOffset=n),o&&(i.lineCap=o),c&&(i.lineJoin=c),i.beginPath(),f&&(i.moveTo(r,s),i.lineTo(a,s)),g&&(i.moveTo(a,l),i.lineTo(r,l)),i.stroke()}null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}JP.className="Range",JP.defaultStyles=Object.assign(Object.assign({},Qk.defaultStyles),{strokeWidth:1}),KA([_k({redraw:Ik.MINOR}),YA("design:type",Number)],JP.prototype,"x1",void 0),KA([_k({redraw:Ik.MINOR}),YA("design:type",Number)],JP.prototype,"y1",void 0),KA([_k({redraw:Ik.MINOR}),YA("design:type",Number)],JP.prototype,"x2",void 0),KA([_k({redraw:Ik.MINOR}),YA("design:type",Number)],JP.prototype,"y2",void 0),KA([_k({redraw:Ik.MINOR}),YA("design:type",Boolean)],JP.prototype,"startLine",void 0),KA([_k({redraw:Ik.MINOR}),YA("design:type",Boolean)],JP.prototype,"endLine",void 0),KA([_k({redraw:Ik.MINOR}),YA("design:type",Boolean)],JP.prototype,"isRange",void 0);const QP={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},tN={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};function eN({yDirection:t,padding:e=0,position:i="top",bbox:n}){const o=t?QP:tN,{xTranslationDirection:r,yTranslationDirection:s}=o[i];return{xTranslation:r*(e+(t?n.width:n.height)/2),yTranslation:s*(e+(t?n.height:n.width)/2)}}const iN=({yDirection:t,xEnd:e,yStart:i,yEnd:n})=>t?{x:e/2,y:i}:{x:e,y:isNaN(n)?i:(i+n)/2},nN=({yDirection:t,xStart:e,xEnd:i,yStart:n,yEnd:o})=>t?{x:e,y:isNaN(o)?n:(n+o)/2}:{x:i/2,y:n},oN=({yDirection:t,xEnd:e,yStart:i,yEnd:n})=>t?{x:e,y:isNaN(n)?i:(i+n)/2}:{x:e/2,y:isNaN(n)?i:n},rN=({yDirection:t,xStart:e,xEnd:i,yStart:n,yEnd:o})=>t?{x:i/2,y:isNaN(o)?n:o}:{x:e,y:isNaN(o)?n:(n+o)/2},sN=({yDirection:t,xStart:e,xEnd:i,yStart:n})=>t?{x:e/2,y:n}:{x:i,y:n},aN=({yDirection:t,xStart:e,yStart:i,yEnd:n})=>t?{x:e,y:isNaN(n)?i:n}:{x:e,y:i},lN=({yDirection:t,xEnd:e,yStart:i,yEnd:n})=>t?{x:e,y:i}:{x:e,y:isNaN(n)?i:n},cN=({yDirection:t,xStart:e,xEnd:i,yStart:n,yEnd:o})=>t?{x:i,y:isNaN(o)?n:o}:{x:e,y:isNaN(o)?n:o},dN={top:{c:iN},bottom:{c:rN},left:{c:nN},right:{c:oN},topLeft:{c:sN},topRight:{c:lN},bottomLeft:{c:aN},bottomRight:{c:cN},inside:{c:({xEnd:t,yStart:e,yEnd:i})=>({x:t/2,y:isNaN(i)?e:(e+i)/2})},insideLeft:{c:nN},insideRight:{c:oN},insideTop:{c:iN},insideBottom:{c:rN},insideTopLeft:{c:sN},insideBottomLeft:{c:aN},insideTopRight:{c:lN},insideBottomRight:{c:cN}},uN=["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],hN=LT((t,e)=>IT(t,e,t=>uN.includes(t)),"expecting an optional crossLine label position keyword such as 'topLeft', 'topRight' or 'inside'"),pN=LT((t,e)=>IT(t,e,t=>"range"===t||"line"===t),"expecting a crossLine type keyword such as 'range' or 'line'");class fN{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}}KA([PT(HT),YA("design:type",Boolean)],fN.prototype,"enabled",void 0),KA([PT(YT),YA("design:type",String)],fN.prototype,"text",void 0),KA([PT(fk),YA("design:type",String)],fN.prototype,"fontStyle",void 0),KA([PT(vk),YA("design:type",String)],fN.prototype,"fontWeight",void 0),KA([PT(ok(0)),YA("design:type",Number)],fN.prototype,"fontSize",void 0),KA([PT(KT),YA("design:type",String)],fN.prototype,"fontFamily",void 0),KA([PT(ok()),YA("design:type",Number)],fN.prototype,"padding",void 0),KA([PT(tk),YA("design:type",String)],fN.prototype,"color",void 0),KA([PT(hN),YA("design:type",String)],fN.prototype,"position",void 0),KA([PT(rk(-360,360)),YA("design:type",Number)],fN.prototype,"rotation",void 0),KA([PT(HT),YA("design:type",Boolean)],fN.prototype,"parallel",void 0);class gN{constructor(){this.id=Vk(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new fN,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=Lk.X,this.group=new ZM({name:""+this.id,layer:!0,zIndex:gN.LINE_LAYER_ZINDEX}),this.crossLineRange=new JP,this.crossLineLabel=new eM,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;const{group:t,crossLineRange:e,crossLineLabel:i}=this;t.append([e,i]),e.pointerEvents=Uk.None}update(t){this.enabled&&t&&0!==this.data.length?(this.group.visible=!0,this.group.zIndex=this.getZIndex(this.isRange),this.updateNodes()):this.group.visible=!1}calculateLayout(t){if(!t)return;if(!this.createNodeData())return;const{sideFlag:e,gridLength:i,data:n}=this,o=[],r=e*i,s=n[0],a=n[1],l=new Wk(Math.min(0,r),Math.min(s,a),Math.abs(0-r),Math.abs(s-a));o.push(l);const c=this.computeLabelBBox();return c&&o.push(c),Wk.merge(o)}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(){var t,e;const{scale:i,gridLength:n,sideFlag:o,direction:r,label:{position:s="top"},clippedRange:a,strokeWidth:l=0}=this;if(this.data=[],!i)return!1;const c=null!==(t=i.bandwidth)&&void 0!==t?t:0,d=t=>Math.max(Math.min(...a),Math.min(Math.max(...a),t)),[u,h]=[0,o*n];let[p,f]=this.getRange(),[g,v]=[Number(i.convert(p,{clampMode:"clamped"})),i.convert(f,{clampMode:"clamped"})+c];g=d(g),v=d(v),[p,f]=[Number(i.convert(p)),i.convert(f)+c];const y=!isNaN(g)&&!isNaN(v)&&(p===g||f===v||g!==v)&&Math.abs(v-g)>0;if(y){g!==Math.min(g,v)&&([g,v]=[Math.min(g,v),Math.max(g,v)],[p,f]=[f,p])}if(this.isRange=y,this.startLine=!isNaN(p)&&l>0&&p===g,this.endLine=!isNaN(f)&&l>0&&f===v,!y&&!this.startLine&&!this.endLine)return!1;if(this.data=[g,v],this.label.enabled){const t=r===Lk.Y,{c:i=iN}=null!==(e=dN[s])&&void 0!==e?e:{},{x:n,y:o}=i({yDirection:t,xStart:u,xEnd:h,yStart:g,yEnd:v});this.labelPoint={x:n,y:o}}return!0}updateRangeNode(){var t;const{crossLineRange:e,sideFlag:i,gridLength:n,data:o,startLine:r,endLine:s,isRange:a,fill:l,fillOpacity:c,stroke:d,strokeWidth:u,lineDash:h}=this;e.x1=0,e.x2=i*n,e.y1=o[0],e.y2=o[1],e.startLine=r,e.endLine=s,e.isRange=a,e.fill=l,e.fillOpacity=null!=c?c:1,e.stroke=d,e.strokeWidth=null!=u?u:1,e.strokeOpacity=null!==(t=this.strokeOpacity)&&void 0!==t?t:1,e.lineDash=h}updateLabel(){const{crossLineLabel:t,label:e}=this;e.text&&(t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.fill=e.color,t.text=e.text)}positionLabel(){const{crossLineLabel:t,labelPoint:{x:e,y:i}={},label:{parallel:n,rotation:o,position:r="top",padding:s=0},direction:a,parallelFlipRotation:l,regularFlipRotation:c}=this;if(void 0===e||void 0===i)return;const{defaultRotation:d,configuredRotation:u}=VR({rotation:o,parallel:n,regularFlipRotation:c,parallelFlipRotation:l});t.rotation=d+u,t.textBaseline="middle",t.textAlign="center";const h=t.computeTransformedBBox();if(!h)return;const p=a===Lk.Y,{xTranslation:f,yTranslation:g}=eN({yDirection:p,padding:s,position:r,bbox:h});t.translationX=e+f,t.translationY=i+g}getZIndex(t=!1){return t?gN.RANGE_LAYER_ZINDEX:gN.LINE_LAYER_ZINDEX}getRange(){const{value:t,range:e,scale:i}=this,n=YM.is(i);let[o,r]=null!=e?e:[t,void 0];return n||void 0!==r||(r=o),o=null!=wR(o,n)?o:void 0,r=null!=wR(r,n)?r:void 0,n&&o===r&&(r=void 0),void 0===o&&void 0!==r&&(o=r,r=void 0),[o,r]}computeLabelBBox(){const{label:t}=this;if(!t.enabled)return;const e=new eM;e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=t.text;const{labelPoint:{x:i,y:n}={},label:{parallel:o,rotation:r,position:s="top",padding:a=0},direction:l,parallelFlipRotation:c,regularFlipRotation:d}=this;if(void 0===i||void 0===n)return;const{configuredRotation:u}=VR({rotation:r,parallel:o,regularFlipRotation:d,parallelFlipRotation:c});e.rotation=u,e.textBaseline="middle",e.textAlign="center";const h=e.computeTransformedBBox();if(!h)return;const p=l===Lk.Y,{xTranslation:f,yTranslation:g}=eN({yDirection:p,padding:a,position:s,bbox:h});return e.translationX=i+f,e.translationY=n+g,e.computeTransformedBBox()}calculatePadding(t){var e,i,n,o,r,s,a,l;const{isRange:c,startLine:d,endLine:u,direction:h,label:{padding:p=0,position:f="top"}}=this;if(!c&&!d&&!u)return;const g=this.computeLabelBBox(),v=null==g?void 0:g.x,y=null==g?void 0:g.y;if(!g||null==v||null==y)return;const m=function({yDirection:t,bbox:e,padding:i=0,position:n="top"}){const o={};return n.startsWith("inside")||("top"!==n||t?"bottom"!==n||t?"left"===n&&t?o.left=i+e.width:"right"===n&&t&&(o.right=i+e.width):o.bottom=i+e.height:o.top=i+e.height),o}({yDirection:h===Lk.Y,padding:p,position:f,bbox:g});t.left=Math.max(null!==(e=t.left)&&void 0!==e?e:0,null!==(i=m.left)&&void 0!==i?i:0),t.right=Math.max(null!==(n=t.right)&&void 0!==n?n:0,null!==(o=m.right)&&void 0!==o?o:0),t.top=Math.max(null!==(r=t.top)&&void 0!==r?r:0,null!==(s=m.top)&&void 0!==s?s:0),t.bottom=Math.max(null!==(a=t.bottom)&&void 0!==a?a:0,null!==(l=m.bottom)&&void 0!==l?l:0)}}gN.LINE_LAYER_ZINDEX=zR.SERIES_CROSSLINE_LINE_ZINDEX,gN.RANGE_LAYER_ZINDEX=zR.SERIES_CROSSLINE_RANGE_ZINDEX,gN.className="CrossLine",KA([PT(HT),YA("design:type",Boolean)],gN.prototype,"enabled",void 0),KA([PT(pN),YA("design:type",String)],gN.prototype,"type",void 0),KA([PT(_T(2)),YA("design:type",Array)],gN.prototype,"range",void 0),KA([PT(tk),YA("design:type",String)],gN.prototype,"fill",void 0),KA([PT(rk(0,1)),YA("design:type",Number)],gN.prototype,"fillOpacity",void 0),KA([PT(tk),YA("design:type",String)],gN.prototype,"stroke",void 0),KA([PT(rk()),YA("design:type",Number)],gN.prototype,"strokeWidth",void 0),KA([PT(rk(0,1)),YA("design:type",Number)],gN.prototype,"strokeOpacity",void 0),KA([PT(mk),YA("design:type",Array)],gN.prototype,"lineDash",void 0);const vN=t=>t;class yN extends YM{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.cacheProps=["domain","range","nice","tickCount","base"],this.baseLog=vN,this.basePow=vN,this.log=t=>this.domain[0]>=0?this.baseLog(t):-this.baseLog(-t),this.pow=t=>this.domain[0]>=0?this.basePow(t):-this.basePow(-t),this.defaultClampMode="clamped"}toDomain(t){return t}transform(t){return this.domain[0]>=0?Math.log(t):-Math.log(-t)}transformInvert(t){return this.domain[0]>=0?Math.exp(t):-Math.exp(-t)}update(){!this.domain||this.domain.length<2||(this.updateLogFn(),this.updatePowFn(),this.nice&&this.updateNiceDomain())}updateLogFn(){const{base:t}=this;let e;if(10===t)e=Math.log10;else if(t===Math.E)e=Math.log;else if(2===t)e=Math.log2;else{const i=Math.log(t);e=t=>Math.log(t)/i}this.baseLog=e}updatePowFn(){const{base:t}=this;let e;e=10===t?yN.pow10:t===Math.E?Math.exp:e=>Math.pow(t,e),this.basePow=e}updateNiceDomain(){const[t,e]=this.domain,i=this.pow(Math.floor(this.log(t))),n=this.pow(Math.ceil(this.log(e)));this.niceDomain=[i,n]}static pow10(t){return t>=0?Math.pow(10,t):1/Math.pow(10,-t)}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:10;if(!this.domain||this.domain.length<2||e<1)return[];this.refresh();const i=this.base,[n,o]=this.getDomain();let r=this.log(n),s=this.log(o);if(this.interval){const t=Math.abs(this.interval),e=Math.abs(s-r),i=KM(r,s,Math.min(e,t)).map(t=>this.pow(t)).filter(t=>t>=n&&t<=o);if(!this.isDenseInterval({start:n,stop:o,interval:t,count:i.length}))return i}if(!(i%1==0)||s-r>=e)return WM(r,s,Math.min(s-r,e)).map(t=>this.pow(t));const a=[],l=n>0;r=Math.floor(r)-1,s=Math.round(s)+1;const c=Math.min(...this.range),d=(Math.max(...this.range)-c)/e;let u=1/0;for(let t=r;t<=s;t++){const e=this.convert(this.pow(t+1));for(let r=1;r<i;r++){const s=l?r:i-r+1,c=this.pow(t)*s,h=this.convert(c),p=Math.abs(u-h),f=Math.abs(h-e),g=p>=d&&f>=d;c>=n&&c<=o&&(1===r||g)&&(a.push(c),u=h)}}return a}tickFormat({count:t,ticks:e,specifier:i}){const{base:n}=this;return null==i&&(i=10===n?".0e":","),"string"==typeof i&&(i=NM(i)),t===1/0?i:(null==e&&this.ticks(),t=>i(t))}}var mN;KA([PT(ok(0)),YA("design:type",Object)],yN.prototype,"base",void 0),function(t){t[t.MILLISECOND=0]="MILLISECOND",t[t.SECOND=1]="SECOND",t[t.MINUTE=2]="MINUTE",t[t.HOUR=3]="HOUR",t[t.WEEK_DAY=4]="WEEK_DAY",t[t.SHORT_MONTH=5]="SHORT_MONTH",t[t.MONTH=6]="MONTH",t[t.SHORT_YEAR=7]="SHORT_YEAR",t[t.YEAR=8]="YEAR"}(mN||(mN={}));const bN={[mN.MILLISECOND]:".%L",[mN.SECOND]:":%S",[mN.MINUTE]:"%I:%M",[mN.HOUR]:"%I %p",[mN.WEEK_DAY]:"%a",[mN.SHORT_MONTH]:"%b %d",[mN.MONTH]:"%B",[mN.SHORT_YEAR]:"%y",[mN.YEAR]:"%Y"};function SN(t){return t instanceof Date?t.getTime():t}class xN extends YM{constructor(){super([new Date(2022,11,7),new Date(2022,11,8)],[0,1]),this.type="time",this.cacheProps=["domain","range","nice","tickCount","interval","minTickCount","maxTickCount"],this.year=UA,this.month=zA,this.week=WA,this.day=VA,this.hour=BA,this.minute=_A,this.second=IA,this.millisecond=NA,this.tickIntervals=[[this.second,1,1e3],[this.second,5,5e3],[this.second,15,15e3],[this.second,30,3e4],[this.minute,1,6e4],[this.minute,5,3e5],[this.minute,15,9e5],[this.minute,30,18e5],[this.hour,1,36e5],[this.hour,3,108e5],[this.hour,6,216e5],[this.hour,12,432e5],[this.day,1,864e5],[this.day,2,1728e5],[this.week,1,6048e5],[this.week,2,12096e5],[this.week,3,18144e5],[this.month,1,2592e6],[this.month,2,5184e6],[this.month,3,7776e6],[this.month,4,10368e6],[this.month,6,15552e6],[this.year,1,31536e6]]}toDomain(t){return new Date(t)}calculateDefaultTickFormat(t=[]){let e=mN.YEAR;const i=t=>{t<e&&(e=t)};for(const e of t){i(this.getLowestGranularityFormat(e))}const n=SN(t[0]),o=SN(t[t.length-1]),r=new Date(n).getFullYear(),s=new Date(o).getFullYear()-r>0;return this.buildFormatString(e,s)}buildFormatString(t,e){let i=[bN[t]],n=0;const o=this.getDomain(),r=Math.min(...o.map(SN)),s=Math.max(...o.map(SN))-r;switch(t){case mN.SECOND:s/6e4>1&&i.push(bN[mN.MINUTE]);case mN.MINUTE:s/36e5>1&&i.push(bN[mN.HOUR]);case mN.HOUR:n=i.length,s/864e5>1&&i.push(bN[mN.WEEK_DAY]);case mN.WEEK_DAY:if(s/6048e5>1||e){const t=i.indexOf(bN[mN.WEEK_DAY]);t>-1&&i.splice(t,1,bN[mN.SHORT_MONTH])}case mN.SHORT_MONTH:case mN.MONTH:(s/31536e6>1||e)&&i.push(bN[mN.YEAR])}return n<i.length&&(i=[...i.slice(0,n),i.slice(n).join(" ")]),n>0&&(i=[...i.slice(0,n).reverse(),...i.slice(n)],n<i.length&&i.splice(n,0," ")),i.join("")}getLowestGranularityFormat(t){return this.second.floor(t)<t?mN.MILLISECOND:this.minute.floor(t)<t?mN.SECOND:this.hour.floor(t)<t?mN.MINUTE:this.day.floor(t)<t?mN.HOUR:this.month.floor(t)<t?this.week.floor(t)<t?mN.WEEK_DAY:mN.SHORT_MONTH:this.year.floor(t)<t?mN.MONTH:mN.YEAR}defaultTickFormat(t){const e=this.calculateDefaultTickFormat(t);return t=>OP(e)(t)}getTickInterval({start:t,stop:e,count:i,minCount:n,maxCount:o}){const{tickIntervals:r}=this;let s,a;const l=null!=i?i:YM.defaultTickCount,c=Math.abs(e-t)/Math.max(l,1);let d=0;for(;d<r.length&&c>r[d][2];)d++;if(0===d)a=Math.max(UM(t,e,l,n,o),1),s=this.millisecond;else if(d===r.length){a=UM(t/31536e6,e/31536e6,l,n,o),s=this.year}else{const t=c-r[d-1][2]<r[d][2]-c?d-1:d;[s,a]=r[t]}return s.every(a)}invert(t){return new Date(super.invert(t))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const[t,e]=this.getDomain().map(SN);if(void 0!==this.interval)return this.getTicksForInterval({start:t,stop:e});if(this.nice){const{tickCount:t}=this;if(2===t)return this.niceDomain;if(1===t)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:t,stop:e})}getDefaultTicks({start:t,stop:e}){const i=this.getTickInterval({start:t,stop:e,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return i?i.range(new Date(t),new Date(e)):[]}getTicksForInterval({start:t,stop:e}){const{interval:i,tickIntervals:n}=this;if(!i)return[];if(i instanceof RA){const n=i.range(new Date(t),new Date(e));return this.isDenseInterval({start:t,stop:e,interval:i,count:n.length})?this.getDefaultTicks({start:t,stop:e}):n}const o=Math.abs(i);if(this.isDenseInterval({start:t,stop:e,interval:o}))return this.getDefaultTicks({start:t,stop:e});const r=[...n];r.reverse();const s=r.find(t=>o%t[2]==0);if(s){return s[0].every(o/(s[2]/s[1])).range(new Date(t),new Date(e))}let a=new Date(t);const l=new Date(e),c=[];for(;a<=l;)c.push(a),a=new Date(a),a.setMilliseconds(a.getMilliseconds()+o);return c}tickFormat({ticks:t,specifier:e}){return null==e?this.defaultTickFormat(t):OP(e)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[t,e]=this.domain;for(let i=0;i<4;i++){this.updateNiceDomainIteration(t,e);const[i,n]=this.niceDomain;if(SN(t)===SN(i)&&SN(e)===SN(n))break;t=i,e=n}}updateNiceDomainIteration(t,e){const i=SN(t),n=SN(e),{interval:o}=this;let r;if(o instanceof RA)r=o;else{const t="number"==typeof o?(n-i)/Math.max(o,1):this.tickCount;r=this.getTickInterval({start:i,stop:n,count:t,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(r){const i=r.range(t,e,!0),n=i[0],o=i[i.length-1];this.niceDomain=[n,o]}}}class CN{constructor(t=0,e=t,i=t,n=e){this.top=t,this.right=e,this.bottom=i,this.left=n}clear(){this.top=this.right=this.bottom=this.left=0}}KA([PT(ok(0)),YA("design:type",Number)],CN.prototype,"top",void 0),KA([PT(ok(0)),YA("design:type",Number)],CN.prototype,"right",void 0),KA([PT(ok(0)),YA("design:type",Number)],CN.prototype,"bottom",void 0),KA([PT(ok(0)),YA("design:type",Number)],CN.prototype,"left",void 0);var wN=Object.freeze({__proto__:null,extent:ZA,normalisedExtent:function(t,e,i){return JA(t,e,i).extent},normalisedExtentWithMetadata:JA,toFixed:kT,isNumberEqual:DT,tickFormat:jM,interpolateString:AP,ticks:WM,tickStep:UM,range:KM,Color:RT,isString:bR,isStringObject:SR,isDate:t=>t instanceof Date&&!isNaN(+t),isDiscrete:xR,isContinuous:CR,checkDatum:wR,isNumber:ER,resetIds:function(){for(const t in Bk)delete Bk[t]},createId:Vk,Padding:CN,jsonDiff:hT,DELETE:pT,jsonMerge:gT,jsonApply:function t(e,i,n={}){var o,r,s;const{path:a,matcherPath:l=(a?a.replace(/(\[[0-9+]+])/i,"[]"):void 0),skip:c=[],constructors:d={},constructedArrays:u=new WeakMap,allowedTypes:h={},idx:p}=n;if(null==e)throw new Error("AG Charts - target is uninitialised: "+(null!=a?a:"<root>"));if(null==i)return e;const f=e;null!=p&&"_declarationOrder"in f&&(f._declarationOrder=p);const g=mT(e);for(const p in i){const v=`${l?l+".":""}${p}`;if(c.indexOf(v)>=0)continue;const y=i[p],m=`${a?a+".":""}${p}`,b=f.constructor,S=f[p];let x=null!==(o=d[v])&&void 0!==o?o:d[p];try{const i=mT(S),o=mT(y);if("class-instance"===g&&!(p in e)&&!Object.prototype.hasOwnProperty.call(f,p)){nT.warn(`unable to set [${m}] in ${null==b?void 0:b.name} - property is unknown`);continue}const a=null!==(r=h[v])&&void 0!==r?r:[i];if("class-instance"===i&&"object"===o);else if(null!=i&&null!=o&&!a.includes(o)){nT.warn(`unable to set [${m}] in ${null==b?void 0:b.name} - can't apply type of [${o}], allowed types are: [${a}]`);continue}if("array"===o)if(x=null!==(s=null!=x?x:u.get(S))&&void 0!==s?s:d[v+"[]"],null!=x){const e=y;f[p]=e.map((e,i)=>t(new x,e,Object.assign(Object.assign({},n),{path:m,matcherPath:v+"[]",idx:i})))}else f[p]=y;else"class-instance"===o?f[p]=y:"object"===o?null!=S?t(S,y,Object.assign(Object.assign({},n),{path:m,matcherPath:v,idx:void 0})):f[p]=null!=x?t(new x,y,Object.assign(Object.assign({},n),{path:m,matcherPath:v,idx:void 0})):y:f[p]=y}catch(t){nT.warn(`unable to set [${m}] in [${null==b?void 0:b.name}]; nested error is: ${t.message}`)}}return e},jsonWalk:vT,normalizeAngle360:ST,normalizeAngle360Inclusive:function(t){return t%=bT,(t+=bT)!==bT&&(t%=bT),t},normalizeAngle180:xT,toRadians:CT,toDegrees:function(t){return t/Math.PI*180},angleBetween:function(t,e){return t=ST(t),(e=ST(e))-t+(t>e?2*Math.PI:0)},zipObject:hM,clamp:OT,isEqual:DT,isNegative:AT,round:TT,mod:MT,sanitizeHtml:mR,Logger:nT});function EN(t,e){return t.length===e.length&&t.every((t,i)=>Number(t)===Number(e[i]))}function ON(t,e,i,n,o){let r=t.x;t.x<e?r=e:t.x>e+n&&(r=e+n);let s=t.y;t.y<i?s=i:t.y>i+o&&(s=i+o);const a=t.x-r,l=t.y-s;return Math.sqrt(a*a+l*l)<=.5*t.size}function DN(t,e,i,n,o){const r=t.x+t.width>e&&t.x<e+n,s=t.y+t.height>i&&t.y<i+o;return r&&s}const AN=["stroke","lineDash"],TN=LT(FT(void 0,t=>{for(const e in t)if(!AN.includes(e))return!1;return!0}),"expecting an Array of objects with gridline style properties such as 'stroke' and 'lineDash'");class kN{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}}function MN(t,e=[void 0]){return cT((i,n,o)=>e.includes(o)?t:o)}KA([PT(UT),YA("design:type",Object)],kN.prototype,"enabled",void 0),KA([PT(ok(0)),YA("design:type",Number)],kN.prototype,"width",void 0),KA([PT(TN),YA("design:type",Array)],kN.prototype,"style",void 0);class RN{constructor(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0}getSideFlag(){return this.mirrored?1:-1}getFont(){return iM(this)}}KA([PT(UT),YA("design:type",Object)],RN.prototype,"enabled",void 0),KA([PT(HT),YA("design:type",Boolean)],RN.prototype,"autoWrap",void 0),KA([PT(rk(0)),YA("design:type",Number)],RN.prototype,"maxWidth",void 0),KA([PT(rk(0)),YA("design:type",Number)],RN.prototype,"maxHeight",void 0),KA([PT(fk),YA("design:type",String)],RN.prototype,"fontStyle",void 0),KA([PT(vk),YA("design:type",String)],RN.prototype,"fontWeight",void 0),KA([PT(ok(1)),YA("design:type",Number)],RN.prototype,"fontSize",void 0),KA([PT(KT),YA("design:type",String)],RN.prototype,"fontFamily",void 0),KA([PT(ok(0)),YA("design:type",Number)],RN.prototype,"padding",void 0),KA([PT(sk()),MN(NaN),YA("design:type",Number)],RN.prototype,"minSpacing",void 0),KA([PT(tk),YA("design:type",String)],RN.prototype,"color",void 0),KA([PT(rk(-360,360)),YA("design:type",Number)],RN.prototype,"rotation",void 0),KA([PT(UT),YA("design:type",Boolean)],RN.prototype,"avoidCollisions",void 0),KA([PT(UT),YA("design:type",Boolean)],RN.prototype,"mirrored",void 0),KA([PT(UT),YA("design:type",Boolean)],RN.prototype,"parallel",void 0),KA([PT(YT),YA("design:type",String)],RN.prototype,"format",void 0);class PN{constructor(){this.enabled=!0,this.width=1,this.color=void 0}}KA([PT(UT),YA("design:type",Object)],PN.prototype,"enabled",void 0),KA([PT(ok(0)),YA("design:type",Number)],PN.prototype,"width",void 0),KA([PT(tk),YA("design:type",String)],PN.prototype,"color",void 0);const NN=LT((t,e)=>IT(t,e,(t,e)=>0!==t&&ok(0)(t,e)||t instanceof RA),"expecting an optional non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'");class LN{constructor(){this.enabled=!0,this.width=1,this.size=6,this.color=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}}function IN(t){const e=Math.min(...t.range),i=Math.max(...t.range),n=Math.floor(e),o=Math.ceil(i);return{min:n,max:o,visible:n!==o}}KA([PT(UT),YA("design:type",Object)],LN.prototype,"enabled",void 0),KA([PT(ok(0)),YA("design:type",Number)],LN.prototype,"width",void 0),KA([PT(ok(0)),YA("design:type",Number)],LN.prototype,"size",void 0),KA([PT(tk),YA("design:type",String)],LN.prototype,"color",void 0),KA([PT(NN),YA("design:type",Object)],LN.prototype,"interval",void 0),KA([PT(_T()),YA("design:type",Array)],LN.prototype,"values",void 0),KA([PT(GT(sk(1),VT("maxSpacing"))),MN(NaN),YA("design:type",Number)],LN.prototype,"minSpacing",void 0);const FN=2*Math.PI,_N=FN/2;function GN(t){const e=e=>{var i,n;const o=Math.min(...null!==(i=e.range)&&void 0!==i?i:[t.min]),r=Math.max(...null!==(n=e.range)&&void 0!==n?n:[t.max]),s=Math.round(e.translationY);return s<o||s>r},i=(t,i,n)=>{const o={translationY:Math.round(t.translationY),opacity:t.opacity};return"added"===(n=((t,i,n)=>"removed"!==n&&e(t)?"removed":"added"!==n&&e(i)?"added":n)(i,t.datum,n))&&(o.translationY=Math.round(i.translationY),o.opacity=0),Object.assign(Object.assign({},o),CM[n])},n=(t,e,i)=>{const n={translationY:Math.round(e.translationY),opacity:1};return"removed"===i&&(n.opacity=0),n};return{tick:{fromFn:i,toFn:n,intermediateFn:(t,i,n)=>({visible:!e(t)})},line:{fromFn:(t,e)=>{var i,n;return Object.assign(Object.assign({},null!==(n=null!==(i=t.previousDatum)&&void 0!==i?i:e)&&void 0!==n?n:{y:t.y,x1:t.x1,x2:t.x2}),CM.updated)},toFn:(t,e)=>Object.assign({},e)},label:{fromFn:(t,e,n)=>{var o;const r=null!==(o=t.previousDatum)&&void 0!==o?o:e;let s=r.rotation;return"added"!==n&&"removed"!==n||(s=e.rotation),Object.assign(Object.assign({},i(t,e,n)),{x:r.x,y:r.y,rotation:s,rotationCenterX:r.rotationCenterX})},toFn:(t,e,i)=>{var o,r;let s;var a,l;return"added"===i||"removed"===i?s=e.rotation:(a=null!==(r=null===(o=t.previousDatum)||void 0===o?void 0:o.rotation)&&void 0!==r?r:e.rotation,l=e.rotation,s=Math.abs(l-a)<_N?l:a>l?l+FN:l-FN),Object.assign(Object.assign({},n(0,e,i)),{x:e.x,y:e.y,rotation:s,rotationCenterX:e.rotationCenterX,finish:{rotation:e.rotation}})}},group:{fromFn:(t,e)=>{const{rotation:i,translationX:n,translationY:o}=t;return Object.assign({rotation:i,translationX:n,translationY:o},CM.updated)},toFn:(t,e)=>{const{rotation:i,translationX:n,translationY:o}=e;return{rotation:i,translationX:n,translationY:o}}}}}var BN,VN,jN;!function(t){t[t.TickLine=0]="TickLine",t[t.TickLabel=1]="TickLabel",t[t.GridLine=2]="GridLine",t[t.GridArc=3]="GridArc",t[t.AxisLine=4]="AxisLine"}(BN||(BN={})),function(t){t[t.CREATE=0]="CREATE",t[t.CREATE_SECONDARY=1]="CREATE_SECONDARY",t[t.FILTER=2]="FILTER",t[t.VALUES=3]="VALUES"}(VN||(VN={}));class WN{get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}set crossLines(t){var e,i;null===(e=this._crossLines)||void 0===e||e.forEach(t=>this.detachCrossLine(t)),t&&this.assignCrossLineArrayConstructor(t),this._crossLines=t,null===(i=this._crossLines)||void 0===i||i.forEach(t=>{this.attachCrossLine(t),this.initCrossLine(t)})}get crossLines(){return this._crossLines}constructor(t,e){this.moduleCtx=t,this.scale=e,this.id=Vk(this),this.nice=!0,this.dataDomain={domain:[],clipped:!1},this.keys=[],this.boundSeries=[],this.includeInvisibleDomains=!1,this.axisGroup=new ZM({name:this.id+"-axis",zIndex:zR.AXIS_ZINDEX}),this.lineNode=this.axisGroup.appendChild(new QM),this.tickLineGroup=this.axisGroup.appendChild(new ZM({name:this.id+"-Axis-tick-lines",zIndex:zR.AXIS_ZINDEX})),this.tickLabelGroup=this.axisGroup.appendChild(new ZM({name:this.id+"-Axis-tick-labels",zIndex:zR.AXIS_ZINDEX})),this.crossLineGroup=new ZM({name:this.id+"-CrossLines"}),this.gridGroup=new ZM({name:this.id+"-Axis-grid"}),this.gridLineGroup=this.gridGroup.appendChild(new ZM({name:this.id+"-gridLines",zIndex:zR.AXIS_GRID_ZINDEX})),this.tickLineGroupSelection=JM.select(this.tickLineGroup,QM,!1),this.tickLabelGroupSelection=JM.select(this.tickLabelGroup,eM,!1),this.gridLineGroupSelection=JM.select(this.gridLineGroup,QM,!1),this.line=new PN,this.tick=this.createTick(),this.gridLine=new kN,this.label=this.createLabel(),this.defaultTickMinSpacing=WN.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new dM,this._gridLength=0,this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this.maxThickness=1/0,this.moduleMap=new XR(this),this.refreshScale(),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node),this.destroyFns.push(t.interactionManager.addListener("hover",t=>this.checkAxisHover(t))),this.animationManager=t.animationManager,this.animationState=new jP("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()}},ready:{update:t=>this.animateReadyUpdate(t),resize:()=>this.resetSelectionNodes()}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines);let i=void 0;this.destroyFns.push(t.layoutService.addListener("layout-complete",t=>{null!=i&&null!=hT(t.chart,i)&&this.animationState.transition("resize"),i=Object.assign({},t.chart)})),this.destroyFns.push(t.updateService.addListener("update-complete",t=>{this.minRect=t.minRect}))}attachCrossLine(t){this.crossLineGroup.appendChild(t.group)}detachCrossLine(t){this.crossLineGroup.removeChild(t.group)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach(t=>t())}refreshScale(){var t;this.range=this.scale.range.slice(),null===(t=this.crossLines)||void 0===t||t.forEach(t=>{this.initCrossLine(t)})}updateRange(){var t;const{range:e,visibleRange:i,scale:n}=this,o=(e[1]-e[0])/(i[1]-i[0]),r=o*i[0],s=e[0]-r;n.range=[s,s+o],null===(t=this.crossLines)||void 0===t||t.forEach(t=>{t.clippedRange=[e[0],e[1]]})}setCrossLinesVisible(t){this.crossLineGroup.visible=t}attachAxis(t,e){e.appendChild(this.gridGroup),t.appendChild(this.axisGroup),t.appendChild(this.crossLineGroup)}detachAxis(t,e){e.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup)}inRange(t,e=0,i=0){const n=Math.min(...this.range),o=Math.max(...this.range);return t+e>=n-i&&t<=o+i}onLabelFormatChange(t,e){const{scale:i,fractionDigits:n}=this,o=!(i instanceof yN)&&n>0?t=>"number"==typeof t?t.toFixed(n):String(t):t=>String(t);if(e&&i&&i.tickFormat)try{this.labelFormatter=i.tickFormat({ticks:t,specifier:e})}catch(t){this.labelFormatter=o,nT.warnOnce(`the axis label format string ${e} is invalid. No formatting will be applied`)}else this.labelFormatter=o}setDomain(){var t;const{scale:e,dataDomain:{domain:i},tick:{values:n}}=this;if(n&&YM.is(e)){const[o,r]=null!==(t=ZA(n))&&void 0!==t?t:[1/0,-1/0],s=Math.min(e.fromDomain(i[0]),o),a=Math.max(e.fromDomain(i[1]),r);e.domain=[e.toDomain(s),e.toDomain(a)]}else e.domain=i}setTickInterval(t){var e;this.scale.interval=null!==(e=this.tick.interval)&&void 0!==e?e:t}setTickCount(t,e,i){const{scale:n}=this;if(t&&YM.is(n))return"number"==typeof t?(n.tickCount=t,n.minTickCount=null!=e?e:0,void(n.maxTickCount=null!=i?i:1/0)):void(n instanceof xN&&this.setTickInterval(t))}set gridLength(t){var e;(this._gridLength&&!t||!this._gridLength&&t)&&this.gridLineGroupSelection.clear(),this._gridLength=t,null===(e=this.crossLines)||void 0===e||e.forEach(t=>{this.initCrossLine(t)})}get gridLength(){return this._gridLength}createTick(){return new LN}createLabel(){return new RN}checkAxisHover(t){this.computeBBox().containsPoint(t.offsetX,t.offsetY)&&this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)}update(t){if(!this.tickGenerationResult)return;const{rotation:e,parallelFlipRotation:i,regularFlipRotation:n}=this.calculateRotations(),o=this.label.getSideFlag();this.updatePosition();const r=this.getAxisLineCoordinates(),s=this.tickGenerationResult,{tickData:a,combinedRotation:l,textBaseline:c,textAlign:d}=s,u=HA(s,["tickData","combinedRotation","textBaseline","textAlign"]),h=this.tickLabelGroupSelection.nodes().map(t=>t.datum.tickId);if(this.updateSelections(r,a.ticks,{combinedRotation:l,textAlign:d,textBaseline:c,range:this.scale.range}),this.animationManager.isSkipped())this.resetSelectionNodes();else{const t=this.calculateUpdateDiff(h,a);this.animationState.transition("update",t)}return this.updateAxisLine(),this.updateLabels(),this.updateVisibility(),this.updateGridLines(o),this.updateTickLines(),this.updateTitle({anyTickVisible:a.ticks.length>0}),this.updateCrossLines({rotation:e,parallelFlipRotation:i,regularFlipRotation:n}),this.updateLayoutState(),u.primaryTickCount}getAxisLineCoordinates(){const{range:[t,e]}=this;return{x:0,y1:Math.min(t,e),y2:Math.max(t,e)}}getTickLineCoordinates(t){const{tick:e,label:i}=this,n=i.getSideFlag()*e.size,o=Math.min(0,n);return{x1:o,x2:o+Math.abs(n),y:Math.round(t.translationY)}}getTickLabelProps(t,e){const{label:i}=this,{combinedRotation:n,textBaseline:o,textAlign:r,range:s}=e,a=t.tickLabel,l=i.getSideFlag()*(this.tick.size+i.padding+this.seriesAreaPadding),c=""!==a&&null!=a;return{tickId:t.tickId,translationY:t.translationY,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,rotation:n,rotationCenterX:l,text:a,textAlign:r,textBaseline:o,visible:c,x:l,y:0,range:s}}setTitleProps(t,e){var i;const{title:n}=this;if(n){if(t.color=n.color,t.fontFamily=n.fontFamily,t.fontSize=n.fontSize,t.fontStyle=n.fontStyle,t.fontWeight=n.fontWeight,t.enabled=n.enabled,t.wrapping=n.wrapping,n.enabled){const o=t.node,{tickSpace:r}=e,s=(null!==(i=n.spacing)&&void 0!==i?i:0)+r,a=this.label.getSideFlag(),l=ST(this.rotation),c=-1===a&&l>Math.PI&&l<2*Math.PI?-1:1,d=c*a*Math.PI/2,u=1===c?"bottom":"top",{range:h}=this,p=Math.floor(c*a*(h[0]+h[1])/2),f=-1===a?Math.floor(c*-s):Math.floor(-s),{callbackCache:g}=this.moduleCtx,{formatter:v=(t=>t.defaultValue)}=n,y=g.call(v,this.getTitleFormatterParams());o.setProperties({rotation:d,text:y,textBaseline:u,visible:!0,x:p,y:f})}}else t.enabled=!1}calculateLayout(t){var e;const{rotation:i,parallelFlipRotation:n,regularFlipRotation:o}=this.calculateRotations(),r=this.label.getSideFlag(),s=r*(this.tick.size+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.tickGenerationResult=this.generateTicks({primaryTickCount:t,parallelFlipRotation:n,regularFlipRotation:o,labelX:s,sideFlag:r});const a=this.tickGenerationResult,{tickData:l,combinedRotation:c,textBaseline:d,textAlign:u}=a,h=HA(a,["tickData","combinedRotation","textBaseline","textAlign"]),p=[],{x:f,y1:g,y2:v}=this.getAxisLineCoordinates(),y=new Wk(f,g,0,v-g);p.push(y);const{tick:m}=this;m.enabled&&l.ticks.forEach(t=>{const{x1:e,x2:i,y:n}=this.getTickLineCoordinates(t),o=new Wk(e,n,i-e,0);p.push(o)});const{label:b}=this;if(b.enabled){const t=new eM;l.ticks.forEach(e=>{const i=this.getTickLabelProps(e,{combinedRotation:c,textAlign:u,textBaseline:d,range:this.scale.range});if(!i.visible)return;t.setProperties(Object.assign(Object.assign({},i),{translationY:Math.round(e.translationY)}));const n=t.computeTransformedBBox();n&&p.push(n)})}const{title:S}=this;if(null==S?void 0:S.enabled){const t=new dM;let e=0;if(l.ticks.length>0){const t=Wk.merge(p).width;isFinite(t)&&(e+=t)}this.setTitleProps(t,{tickSpace:e});const i=t.node.computeTransformedBBox();i&&p.push(i)}const x=(t=>{const e=new zk,{rotation:i,translationX:n,translationY:o,rotationCenterX:r,rotationCenterY:s}=this.getAxisTransform();return zk.updateTransformMatrix(e,1,1,i,n,o,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:r,rotationCenterY:s}),e.transformBBox(t)})(Wk.merge(p)),C=this.isAnySeriesActive();return null===(e=this.crossLines)||void 0===e||e.forEach(t=>{var e;t.sideFlag=-r,t.direction=i===-Math.PI/2?Lk.X:Lk.Y,t instanceof gN&&(t.label.parallel=null!==(e=t.label.parallel)&&void 0!==e?e:this.label.parallel),t.parallelFlipRotation=n,t.regularFlipRotation=o,t.calculateLayout(C)}),this.updateLayoutState(),{primaryTickCount:t=h.primaryTickCount,bbox:x}}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}updateScale(){this.updateRange(),this.calculateDomain(),this.setDomain(),this.setTickInterval(this.tick.interval);const{scale:t,nice:e}=this;YM.is(t)&&(t.nice=e,t.update())}calculateRotations(){const t=CT(this.rotation);return{rotation:t,parallelFlipRotation:ST(t),regularFlipRotation:ST(t-Math.PI/2)}}generateTicks({primaryTickCount:t,parallelFlipRotation:e,regularFlipRotation:i,labelX:n,sideFlag:o}){var r;const{scale:s,tick:a,label:{parallel:l,rotation:c,fontFamily:d,fontSize:u,fontStyle:h,fontWeight:p}}=this,f=void 0!==t,{defaultRotation:g,configuredRotation:v,parallelFlipFlag:y,regularFlipFlag:m}=VR({rotation:c,parallel:l,regularFlipRotation:i,parallelFlipRotation:e}),b=v+g,S=new zk,{maxTickCount:x}=this.estimateTickCount({minSpacing:a.minSpacing,maxSpacing:null!==(r=a.maxSpacing)&&void 0!==r?r:NaN}),C=!YM.is(s)||isNaN(x)?10:x;let w=jR(l,v,0,o,m);const E=function(t,e,i,n){return t&&!e?i*n==-1?"hanging":"bottom":"middle"}(l,v,o,y),O={fontFamily:d,fontSize:u,fontStyle:h,fontWeight:p,textBaseline:E,textAlign:w};let D={rawTicks:[],ticks:[],labelCount:0},A=0,T=0,k=!0,M=!1;for(;k&&A<=C&&!M;){T=0,w=jR(l,v,0,o,m);const e=this.getTickStrategies({secondaryAxis:f,index:A});for(const i of e){({tickData:D,index:A,autoRotation:T,terminate:M}=i({index:A,tickData:D,textProps:O,labelOverlap:k,terminate:M,primaryTickCount:t}));const e=0!==v||0!==T,r=b+T;w=jR(l,v,T,o,m),k=this.checkLabelOverlap(r,e,S,D.ticks,n,Object.assign(Object.assign({},O),{textAlign:w}))}}const R=g+v+T;return!f&&D.rawTicks.length>0&&(t=D.rawTicks.length),{tickData:D,primaryTickCount:t,combinedRotation:R,textBaseline:E,textAlign:w}}getTickStrategies({index:t,secondaryAxis:e}){const{scale:i,label:n,tick:o}=this,r=YM.is(i),s=n.enabled&&n.avoidCollisions,a=!r&&0!==t&&s,l=!0===n.autoRotate&&void 0===n.rotation,c=[];let d;d=this.tick.values?VN.VALUES:e?VN.CREATE_SECONDARY:a?VN.FILTER:VN.CREATE;if(c.push(({index:t,tickData:e,primaryTickCount:i,terminate:n})=>this.createTickData(d,t,e,n,i)),!r&&!isNaN(o.minSpacing)){const t=({index:t,tickData:e,primaryTickCount:i,terminate:n})=>this.createTickData(VN.FILTER,t,e,n,i);c.push(t)}if(!s)return c;if(n.autoWrap){const t=({index:t,tickData:e,textProps:i})=>this.wrapLabels(e,t,i);c.push(t)}else if(l){const t=({index:t,tickData:e,labelOverlap:i,terminate:n})=>({index:t,tickData:e,autoRotation:this.getAutoRotation(i),terminate:n});c.push(t)}return c}createTickData(t,e,i,n,o){var r;const{scale:s,tick:a}=this,{maxTickCount:l,minTickCount:c,defaultTickCount:d}=this.estimateTickCount({minSpacing:a.minSpacing,maxSpacing:null!==(r=a.maxSpacing)&&void 0!==r?r:NaN}),u=YM.is(s),h=!u||isNaN(l)?10:l;let p=u?Math.max(d-e,c):l;const f=void 0===a.interval&&void 0===a.values&&p>c&&(u||t===VN.FILTER);let g=!0;for(;g&&e<=h;){const n=i.rawTicks;p=u?Math.max(d-e,c):l;const{rawTicks:r,ticks:s,labelCount:a}=this.getTicks({tickGenerationType:t,previousTicks:n,tickCount:p,minTickCount:c,maxTickCount:l,primaryTickCount:o});i.rawTicks=r,i.ticks=s,i.labelCount=a,g=!!f&&EN(r,n),e++}const v=void 0!==a.interval||void 0!==a.values;return n||(n=v),{tickData:i,index:e,autoRotation:0,terminate:n}}checkLabelOverlap(t,e,i,n,o,r){zk.updateTransformMatrix(i,1,1,t,0,0);return function(t,e){const i=[];for(let n=0;n<t.length;n++){const o=t[n],{point:{x:r,y:s},label:{text:a}}=o;let{label:{width:l,height:c}}=o;l+=null!=e?e:0,c+=null!=e?e:0;if(i.some(t=>DN(t,r,s,l,c)))return!0;i.push({index:n,text:a,x:r,y:s,width:l,height:c,datum:o})}return!1}(this.createLabelData(n,o,r,i),function(t,e){return isNaN(t)?e?0:10:t}(this.label.minSpacing,e))}createLabelData(t,e,i,n){const o=[];for(const r of t){const{tickLabel:t,translationY:s}=r;if(""===t||null==t)continue;const a=aM(t),{width:l,height:c}=nM(a,e,s,i),d=WR(t,new Wk(e,s,l,c),e,s,n);o.push(d)}return o}getAutoRotation(t){var e;return t?ST(CT(null!==(e=this.label.autoRotateAngle)&&void 0!==e?e:0)):0}getTicks({tickGenerationType:t,previousTicks:e,tickCount:i,minTickCount:n,maxTickCount:o,primaryTickCount:r}){var s;const{range:a,scale:l,visibleRange:c}=this;let d=[];switch(t){case VN.VALUES:d=this.tick.values;break;case VN.CREATE_SECONDARY:d=this.updateSecondaryAxisTicks(r);break;case VN.FILTER:d=this.filterTicks(e,i);break;default:d=this.createTicks(i,n,o)}this.onLabelFormatChange(d,this.label.format),this.fractionDigits=d.fractionDigits>=0?d.fractionDigits:0;const u=(null!==(s=l.bandwidth)&&void 0!==s?s:0)/2,h=[];let p=0;const f=new Map,g=Math.max(0,Math.floor(c[0]*d.length)),v=Math.min(d.length,Math.ceil(c[1]*d.length));for(let t=g;t<v;t++){const e=d[t],i=l.convert(e)+u;if(a.length>0&&!this.inRange(i,0,.001))continue;const n=this.formatTick(e,t);let o=n;if(f.has(o)){const t=f.get(o);f.set(o,t+1),o=`${o}_${t}`}else f.set(o,1);h.push({tick:e,tickId:o,tickLabel:n,translationY:i}),""!==n&&null!=n&&p++}return{rawTicks:d,ticks:h,labelCount:p}}filterTicks(t,e){var i;const n=!isNaN(this.tick.minSpacing)||!isNaN(null!==(i=this.tick.maxSpacing)&&void 0!==i?i:NaN)?Math.ceil(t.length/e):2;return t.filter((t,e)=>e%n==0)}createTicks(t,e,i){var n,o,r;return this.setTickCount(t,e,i),null!==(r=null===(o=(n=this.scale).ticks)||void 0===o?void 0:o.call(n))&&void 0!==r?r:[]}estimateTickCount({minSpacing:t,maxSpacing:e}){const{minRect:i}=this,n=this.calculateRangeWithBleed(),o=Math.max(this.defaultTickMinSpacing,n/YM.defaultMaxTickCount);let r=!isNaN(e);isNaN(t)&&(t=o),isNaN(e)&&(e=n),t>e&&(t===o?t=e:e=t);const s=i?this.direction===Lk.X?i.width:i.height:1;r&&(r=s<o);const a=OT(1,Math.floor(n/t),r?Math.floor(n/s):1/0),l=Math.min(a,Math.ceil(n/e));return{minTickCount:l,maxTickCount:a,defaultTickCount:OT(l,YM.defaultTickCount,a)}}updateVisibility(){this.moduleCtx.animationManager.isSkipped()&&this.resetSelectionNodes(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines({rotation:t,parallelFlipRotation:e,regularFlipRotation:i}){var n;const o=this.label.getSideFlag(),r=this.isAnySeriesActive();null===(n=this.crossLines)||void 0===n||n.forEach(n=>{var s;n.sideFlag=-o,n.direction=t===-Math.PI/2?Lk.X:Lk.Y,n instanceof gN&&(n.label.parallel=null!==(s=n.label.parallel)&&void 0!==s?s:this.label.parallel),n.parallelFlipRotation=e,n.regularFlipRotation=i,n.update(r)})}updateTickLines(){const{tick:t,label:e}=this,i=e.getSideFlag();this.tickLineGroupSelection.each(e=>{e.strokeWidth=t.width,e.stroke=t.color,e.x1=i*t.size,e.x2=0,e.y1=0,e.y2=0})}calculateAvailableRange(){const{range:t}=this,e=Math.min(...t);return Math.max(...t)-e}calculateRangeWithBleed(){const{visibleRange:t}=this,e=1/(t[1]-t[0]);return TT(this.calculateAvailableRange()*e,2)}calculateDomain(){if(this.linkedTo)this.dataDomain=this.linkedTo.dataDomain;else{const t=this.boundSeries.filter(t=>this.includeInvisibleDomains||t.isEnabled()).flatMap(t=>t.getDomain(this.direction));this.dataDomain=this.normaliseDataDomain(t)}}getAxisTransform(){return{rotation:CT(this.rotation),rotationCenterX:0,rotationCenterY:0,translationX:this.translation.x,translationY:this.translation.y}}updatePosition(){const{crossLineGroup:t,axisGroup:e,gridGroup:i,translation:n,gridLineGroupSelection:o,gridPadding:r,gridLength:s}=this,{rotation:a}=this.calculateRotations(),l=this.label.getSideFlag(),c=Math.floor(n.x),d=Math.floor(n.y);t.setProperties({rotation:a,translationX:c,translationY:d}),e.datum=this.getAxisTransform(),i.setProperties({rotation:a,translationX:c,translationY:d}),o.each(t=>{t.x1=r,t.x2=-l*s+r,t.y=0})}updateSecondaryAxisTicks(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(t,e,i){this.lineNode.datum=t,this.gridLineGroupSelection.update(this.gridLength?e:[],t=>t.append(new QM({tag:BN.GridLine})),t=>t.tickId),this.tickLineGroupSelection.update(e,t=>t.appendChild(new QM({tag:BN.TickLine})),t=>t.tickId),this.tickLabelGroupSelection.update(e.map(t=>this.getTickLabelProps(t,i)),t=>t.appendChild(new eM({tag:BN.TickLabel})),t=>t.tickId)}updateAxisLine(){const{line:t}=this,e=t.enabled?t.width:0;this.lineNode.setProperties({stroke:t.color,strokeWidth:e})}updateGridLines(t){const{gridLine:{style:e,width:i},gridPadding:n,gridLength:o}=this;0!==o&&0!==e.length&&this.gridLineGroupSelection.each((r,s,a)=>{const{stroke:l,lineDash:c}=e[a%e.length];r.setProperties({x1:n,x2:-t*o+n,y:0,fill:void 0,stroke:l,strokeWidth:i,lineDash:c})})}updateLabels(){const{label:t}=this;t.enabled&&this.tickLabelGroupSelection.each((t,e)=>{t.setProperties(e,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])})}wrapLabels(t,e,i){const{parallel:n,maxWidth:o,maxHeight:r}=this.label;let s=this.maxThickness,a=Math.round(this.calculateAvailableRange()/t.labelCount);return n&&([s,a]=[a,s]),t.ticks.forEach(t=>{t.tickLabel=eM.wrap(t.tickLabel,null!=o?o:s,null!=r?r:a,i,"hyphenate")}),{tickData:t,index:e,autoRotation:0,terminate:!0}}updateTitle(t){const{rotation:e,title:i,_titleCaption:n,lineNode:o,tickLineGroup:r,tickLabelGroup:s}=this;if(!i)return void(n.enabled=!1);let a=0;const{anyTickVisible:l}=t;if(i.enabled&&l){const t=ZM.computeBBox([r,s,o]),i=0===e?t.width:t.height;Math.abs(i)<1/0&&(a+=i)}this.setTitleProps(n,{tickSpace:a})}formatTick(t,e){var i,n;const{label:o,labelFormatter:r,fractionDigits:s,moduleCtx:{callbackCache:a}}=this;if(o.formatter){const n=s>0?t:String(t);return null!==(i=a.call(o.formatter,{value:n,index:e,fractionDigits:s,formatter:r}))&&void 0!==i?i:n}return r&&null!==(n=a.call(r,t))&&void 0!==n?n:String(t)}formatDatum(t){return String(t)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(t=>this.includeInvisibleDomains||t.isEnabled())}clipTickLines(t,e,i,n){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new Wk(t,e,i,n))}clipGrid(t,e,i,n){this.gridGroup.setClipRectInGroupCoordinateSpace(new Wk(t,e,i,n))}calculatePadding(t,e){return[Math.abs(.01*t),Math.abs(.01*t)]}getTitleFormatterParams(){var t;const e=this.boundSeries.reduce((t,e)=>{const i=e.getKeys(this.direction),n=e.getNames(this.direction);for(let e=0;e<i.length;e++)t.push({key:i[e],name:n[e]});return t},[]);return{direction:this.direction,boundSeries:e,defaultValue:null===(t=this.title)||void 0===t?void 0:t.text}}normaliseDataDomain(t){return{domain:t,clipped:!1}}getLayoutState(){return Object.assign({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.tick.size},this.layout)}getModuleMap(){return this.moduleMap}createModuleContext(){var t;return null!==(t=this.axisContext)&&void 0!==t||(this.axisContext=this.createAxisContext()),Object.assign(Object.assign({},this.moduleCtx),{parent:this.axisContext})}createAxisContext(){return{axisId:this.id,direction:this.direction,continuous:YM.is(this.scale),keys:()=>this.boundSeries.flatMap(t=>t.getKeys(this.direction)),scaleValueFormatter:t=>{var e,i;return null===(i=(e=this.scale).tickFormat)||void 0===i?void 0:i.call(e,{specifier:t})},scaleBandwidth:()=>{var t;return null!==(t=this.scale.bandwidth)&&void 0!==t?t:0},scaleConvert:t=>this.scale.convert(t),scaleInvert:t=>{var e,i;return null===(i=(e=this.scale).invert)||void 0===i?void 0:i.call(e,t)}}}animateReadyUpdate(t){const{animationManager:e}=this.moduleCtx,i=GN(IN(this));wM(this.id,"axis-group",e,[this.axisGroup],i.group),wM(this.id,"line",e,[this.lineNode],i.line),wM(this.id,"line-paths",e,[this.gridLineGroupSelection,this.tickLineGroupSelection],i.tick,(t,e)=>e.tickId,t),wM(this.id,"tick-labels",e,[this.tickLabelGroupSelection],i.label,(t,e)=>e.tickId,t)}resetSelectionNodes(){const{gridLineGroupSelection:t,tickLineGroupSelection:e,tickLabelGroupSelection:i,lineNode:n}=this,o=IN(this);GP([this.axisGroup],(t,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY})),GP([t,e],function(t){const{visible:e,min:i,max:n}=t;return(t,o)=>{const r=Math.round(o.translationY);return{translationY:r,opacity:1,visible:e&&r>=i&&r<=n}}}(o)),GP([i],(t,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX})),GP([n],(t,e)=>Object.assign({},e))}calculateUpdateDiff(t,e){const i=new Set,n=new Set,o=Math.max(t.length,e.ticks.length);for(let r=0;r<o;r++){const o=e.ticks[r],s=t[r],a=null==o?void 0:o.tickId;s!==a&&(n.has(a)?n.delete(a):a&&i.add(a),i.has(s)?i.delete(s):s&&n.add(s))}return{changed:i.size>0||n.size>0,added:[...i.values()],removed:[...n.values()]}}}WN.defaultTickMinSpacing=50,KA([PT(UT),YA("design:type",Boolean)],WN.prototype,"nice",void 0),KA([PT(ck),YA("design:type",Array)],WN.prototype,"keys",void 0);class zN extends RN{constructor(){super(...arguments),this.autoRotateAngle=335}}KA([PT(HT),YA("design:type",Boolean)],zN.prototype,"autoRotate",void 0),KA([PT(ok(-360,360)),YA("design:type",Number)],zN.prototype,"autoRotateAngle",void 0);class UN extends WN{constructor(){super(...arguments),this.thickness=0,this.position="left"}get direction(){return["top","bottom"].includes(this.position)?Lk.X:Lk.Y}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(t){return this.updateDirection(),super.update(t)}calculateLayout(t){return this.updateDirection(),super.calculateLayout(t)}createAxisContext(){return Object.assign(Object.assign({},super.createAxisContext()),{position:this.position})}assignCrossLineArrayConstructor(t){var e,i,n;e=t,i=gN,null===(n=ZP.constructedArrays)||void 0===n||n.set(e,i)}createLabel(){return new zN}}KA([PT(ok(0)),YA("design:type",Number)],UN.prototype,"thickness",void 0),KA([PT(Ek),YA("design:type",String)],UN.prototype,"position",void 0);class HN extends UN{constructor(t){super(t,new ET),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(t){this._paddingOverrideEnabled=!0,this.scale.paddingInner=t}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(t){this.scale.paddingOuter=t}get paddingOuter(){return this.scale.paddingOuter}normaliseDataDomain(t){const e=[],i=new Set;for(const n of t){const t=n instanceof Date?n.getTime():n;i.has(t)||(i.add(t),e.push(n))}return{domain:e,clipped:!1}}calculateDomain(){if(!this._paddingOverrideEnabled){const t=this.boundSeries.map(t=>{var e;return null===(e=t.getBandScalePadding)||void 0===e?void 0:e.call(t)}).filter(t=>null!=t);t.length>0&&(this.scale.paddingInner=Math.min(...t.map(t=>t.inner)),this.scale.paddingOuter=Math.max(...t.map(t=>t.outer)))}return super.calculateDomain()}}HN.className="CategoryAxis",HN.type="category",KA([PT(ok(0,1)),YA("design:type",Number)],HN.prototype,"groupPaddingInner",void 0);class KN{constructor(t="",e,i=0){this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter((t,e)=>e!==this.number):[]}}function YN(t,e=!0){const i=new KN;let n=0;return e&&t.forEach(t=>n=Math.max(n,t.labels.length)),t.forEach(t=>{if(e)for(;t.labels.length<n;)t.labels.unshift("");!function(t,e){const i=e.labels.slice().reverse(),n=i.length-1;i.forEach((e,i)=>{const o=t.children,r=o.find(t=>t.label===e),s=i!==n;if(r&&s)t=r;else{const i=new KN(e,t);i.number=o.length,o.push(i),s&&(t=i)}})}(i,t)}),i}function XN(t,e,i){const n=i/(e.number-t.number);e.change-=n,e.shift+=i,t.change+=n,e.prelim+=i,e.mod+=i}function qN(t,e,i){return e.getSiblings().indexOf(t.ancestor)>=0?t.ancestor:i}function $N(t,e){const i=t.children;if(i.length){let n=i[0];i.forEach(t=>{$N(t,e),n=function(t,e,i){const n=t.getLeftSibling();if(n){let o=t,r=t,s=n,a=r.getLeftmostSibling(),l=r.mod,c=o.mod,d=s.mod,u=a.mod;for(;s.nextRight()&&r.nextLeft();){s=s.nextRight(),r=r.nextLeft(),a=a.nextLeft(),o=o.nextRight(),o.ancestor=t;const n=s.prelim+d-(r.prelim+l)+i;n>0&&(XN(qN(s,t,e),t,n),l+=n,c+=n),d+=s.mod,l+=r.mod,u+=a.mod,c+=o.mod}s.nextRight()&&!o.nextRight()?(o.thread=s.nextRight(),o.mod+=d-c):(r.nextLeft()&&!a.nextLeft()&&(a.thread=r.nextLeft(),a.mod+=l-u),e=t)}return e}(t,n,e)}),function(t){const e=t.children;if(e){let t=0,i=0;for(let n=e.length-1;n>=0;n--){const o=e[n];o.prelim+=t,o.mod+=t,i+=o.change,t+=o.shift+i}}}(t);const o=(i[0].prelim+i[i.length-1].prelim)/2,r=t.getLeftSibling();r?(t.prelim=r.prelim+e,t.mod=t.prelim-o):t.prelim=o}else{const i=t.getLeftSibling();t.prelim=i?i.prelim+e:0}}class ZN{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){const{x:i,y:n}=e(t);i>this.right&&(this.right=i),i<this.left&&(this.left=i),n>this.bottom&&(this.bottom=n),n<this.top&&(this.top=n)}}function JN(t){const e=new QN;return $N(t,1),function t(e,i,n){e.x=e.prelim+i,e.y=e.depth,n.update(e),e.children.forEach(o=>t(o,i+e.mod,n))}(t,-t.prelim,e),function t(e){const i=e.children;let n=0;i.forEach(e=>{t(e),e.children.length?n+=e.leafCount:n++}),e.leafCount=n,i.length?(e.subtreeLeft=i[0].subtreeLeft,e.subtreeRight=i[e.children.length-1].subtreeRight,e.x=(e.subtreeLeft+e.subtreeRight)/2):(e.subtreeLeft=e.x,e.subtreeRight=e.x)}(t),e}class QN{constructor(){this.dimensions=new ZN,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(t){this.dimensions.update(t,t=>({x:t.x,y:t.y})),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)}resize(t,e,i=0,n=0,o=!1){const r=this.leafCount-1,s=this.depth,a=this.dimensions;let l=1,c=1;if(t>0&&r){const e=(a.right-a.left)/r;l=t/r/e,o&&(l=-l)}if(e>0&&s){const t=(a.bottom-a.top)/s;c=e/s/t}const d=new ZN;this.nodes.forEach(t=>{t.screenX=t.x*l,t.screenY=t.y*c,d.update(t,t=>({x:t.screenX,y:t.screenY}))});const u=-d.left,h=-d.top;this.nodes.forEach(t=>{t.screenX+=u+i,t.screenY+=h+n})}}class tL extends RN{constructor(){super(...arguments),this.grid=!1}}KA([PT(UT),YA("design:type",Boolean)],tL.prototype,"grid",void 0);class eL extends UN{constructor(t){super(t,new ET),this.tickScale=new ET,this.line=new PN,this.label=new tL,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;const{tickLineGroup:e,tickLabelGroup:i,gridLineGroup:n,tickScale:o,scale:r}=this;r.paddingOuter=.1,r.paddingInner=2*r.paddingOuter,this.range=r.range.slice(),this.refreshScale(),o.paddingInner=1,o.paddingOuter=0,this.gridLineSelection=JM.select(n,QM),this.axisLineSelection=JM.select(e,QM),this.separatorSelection=JM.select(e,QM),this.labelSelection=JM.select(i,eM)}updateRange(){const{range:t,visibleRange:e,scale:i}=this,n=(t[1]-t[0])/(e[1]-e[0]),o=n*e[0],r=t[0]-o;this.tickScale.range=i.range=[r,r+n],this.resizeTickTree()}resizeTickTree(){var t;const e=this.scale,i=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,n=this.tickTreeLayout,o=this.lineHeight;n&&n.resize(Math.abs(i[1]-i[0]),n.depth*o,(Math.min(i[0],i[1])||0)+(null!==(t=e.bandwidth)&&void 0!==t?t:0)/2,-n.depth*o,i[1]-i[0]<0)}get lineHeight(){return 1.5*this.label.fontSize}set gridLength(t){(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineSelection.clear(),this.labelSelection.clear()),this._gridLength=t}get gridLength(){return this._gridLength}calculateDomain(){var t;const{direction:e}=this,i=[];let n;this.boundSeries.filter(t=>t.visible).forEach(t=>{if(e===Lk.X)if(void 0===n){const o=t.getDomain(e);i.push(o),n="number"==typeof o[0]}else n&&i.push(t.getDomain(e));else i.push(t.getDomain(e))});const o=(new Array).concat(...i),r=null!==(t=ZA(o))&&void 0!==t?t:o;this.dataDomain=this.normaliseDataDomain(r),this.scale.domain=this.dataDomain.domain}normaliseDataDomain(t){const e=t.filter((t,e,i)=>i.indexOf(t)===e),i=YN(e);this.tickTreeLayout=JN(i);const n=e.slice();return n.push(""),this.tickScale.domain=n,this.resizeTickTree(),{domain:e,clipped:!1}}update(){this.computedLayout&&(this.updatePosition(),this.updateTitleCaption(),this.updateCategoryLabels(),this.updateSeparators(),this.updateAxisLines(),this.updateCategoryGridLines(),this.resetSelectionNodes())}updateTitleCaption(){const{_titleCaption:t}=this;t.node.visible=!1}updateCategoryLabels(){if(!this.computedLayout)return;const{tickLabelLayout:t}=this.computedLayout;this.labelSelection.update(t).each((t,e)=>{t.setProperties(e)})}updateSeparators(){if(!this.computedLayout)return;const{separatorLayout:t}=this.computedLayout,{range:e}=this;this.separatorSelection.update(t).each((t,i)=>{t.x1=i.x1,t.x2=i.x2,t.y1=i.y,t.y2=i.y,t.visible=i.y>=e[0]-1e-7&&i.y<=e[1]+1e-7,t.stroke=this.tick.color,t.fill=void 0,t.strokeWidth=1})}updateAxisLines(){if(!this.computedLayout)return;const{axisLineLayout:t}=this.computedLayout;this.axisLineSelection.update(t).each((t,e)=>{t.setProperties(Object.assign(Object.assign({},e),{stroke:this.line.color,strokeWidth:this.line.width})),t.x1=e.x,t.x2=e.x,t.y1=e.y1,t.y2=e.y2,t.strokeWidth=this.line.width,t.stroke=this.line.color})}updateCategoryGridLines(){const{gridLength:t,gridLine:e,label:i,range:n,tickScale:o}=this,r=o.ticks(),s=i.getSideFlag(),a=this.gridLineSelection.update(t?r:[]);if(t){const{width:i,style:r}=e,l=r.length;a.each((e,a,c)=>{const d=Math.round(o.convert(a));e.x1=0,e.x2=-s*t,e.y1=d,e.y2=d,e.visible=d>=n[0]&&d<=n[1];const{stroke:u,lineDash:h}=r[c%l];e.stroke=u,e.strokeWidth=i,e.lineDash=h,e.fill=void 0})}}computeLayout(){this.updateDirection(),this.calculateDomain(),this.updateRange();const{scale:t,label:e,label:{parallel:i},moduleCtx:{callbackCache:n},range:o,title:r,title:{formatter:s=(t=>t.defaultValue)}={}}=this,a=t.range[0],l=t.range[1],c=Math.abs(l-a)/t.domain.length||0,d=CT(this.rotation),u=Math.abs(Math.cos(d))<1e-8,h=e.getSideFlag(),p=this.lineHeight,f=this.tickTreeLayout,g=t.ticks(),v=f?f.nodes:[],y=!!f&&f.depth>1,{defaultRotation:m,configuredRotation:b,parallelFlipFlag:S}=VR({rotation:e.rotation,parallel:i,regularFlipRotation:ST(d-Math.PI/2),parallelFlipRotation:ST(d)}),x=[],C=new Map;let w=0;const E=new eM,O=(t,i)=>{var a;if(E.setProperties({fill:e.color,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,textAlign:"center",textBaseline:-1===S?"bottom":"hanging",translationX:t.screenY-.25*e.fontSize,translationY:t.screenX}),0===i){if(!((null==r?void 0:r.enabled)&&g.length>0))return!1;const i=n.call(s,this.getTitleFormatterParams());E.setProperties({fill:r.color,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStyle:r.fontStyle,fontWeight:r.fontWeight,text:i,textBaseline:"hanging",translationX:t.screenY-.25*e.fontSize,translationY:t.screenX})}else{if(!(t.screenX>=o[0]&&t.screenX<=o[1]))return!1;e.formatter?E.text=null!==(a=n.call(e.formatter,{value:String(t.label),index:i}))&&void 0!==a?a:String(t.label):E.text=String(t.label)}return!0};v.forEach((t,e)=>{if(O(t,e)){const t=E.computeTransformedBBox();t&&(C.set(e,t),t.width>w&&(w=t.width))}});const D=h*e.padding,A=this.label.grid,T=[];v.forEach((t,e)=>{let i=O(t,e);const n=e;E.x=D,E.rotationCenterX=D;const o=!t.children.length;if(o){E.rotation=b,E.textAlign="end",E.textBaseline="middle";const t=C.get(n);t&&t.height>c&&(i=!1,C.delete(n))}else{E.translationX-=w-p+this.label.padding;const e=t.leafCount*c,o=C.get(n);o&&o.width>e?(i=!1,C.delete(n)):E.rotation=u?m:-Math.PI/2}if(t.parent&&y){const e=o?t.screenX-c/2:t.screenX-t.leafCount*c/2;if(o)(t.number!==t.children.length-1||A)&&T.push({y:e,x1:0,x2:-w-2*this.label.padding});else{const i=-w-2*this.label.padding+t.screenY;T.push({y:e,x1:i+p,x2:i})}}let r;if(i){const t=E.computeTransformedBBox();t&&C.set(e,t),r=Object.assign(Object.assign({},{fill:(s=E).fill,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight,rotation:s.rotation,rotationCenterX:s.rotationCenterX,rotationCenterY:s.rotationCenterY,text:s.text,textAlign:s.textAlign,textBaseline:s.textBaseline,translationX:s.translationX,translationY:s.translationY,visible:s.visible,x:s.x,y:s.y}),{visible:i})}else C.delete(e),r={visible:i};var s;x.push(r)});let k=0;T.forEach(t=>k=Math.min(k,t.x2)),T.push({y:Math.max(a,l),x1:0,x2:k});const M=[],R=[];T.forEach(t=>{if(t.y>=o[0]-1e-7&&t.y<=o[1]+1e-7){const{x1:e,x2:i,y:n}=t,o=new Wk(Math.min(e,i),n,Math.abs(e-i),0);R.push(o),M.push({x1:e,x2:i,y:n})}});const P=[],N=[],L=f?f.depth+1:1;for(let t=0;t<L;t++){const e=g.length>0&&(0===t||A&&y),i=t>0?-w-2*this.label.padding-(t-1)*p:0,n=new Wk(i,Math.min(...o),0,Math.abs(o[1]-o[0]));N.push(n),P.push({x:i,y1:o[0],y2:o[1],visible:e})}return{bbox:(t=>{const e=new zk,{rotation:i,translationX:n,translationY:o,rotationCenterX:r,rotationCenterY:s}=this.getAxisTransform();return zk.updateTransformMatrix(e,1,1,i,n,o,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:r,rotationCenterY:s}),e.transformBBox(t)})(Wk.merge([...C.values(),...R,...N])),tickLabelLayout:x,separatorLayout:M,axisLineLayout:P}}calculateLayout(){const{axisLineLayout:t,separatorLayout:e,tickLabelLayout:i,bbox:n}=this.computeLayout();return this.computedLayout={axisLineLayout:t,separatorLayout:e,tickLabelLayout:i},{bbox:n,primaryTickCount:void 0}}}eL.className="GroupedCategoryAxis",eL.type="grouped-category",KA([PT(tk),YA("design:type",String)],eL.prototype,"labelColor",void 0);class iL{static isSupported(){return"undefined"!=typeof OffscreenCanvas&&null!=OffscreenCanvas.prototype.transferToImageBitmap}constructor({width:t=600,height:e=300,overrideDevicePixelRatio:i}){this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(t,e),this.realContext=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.context=this.setPixelRatio(i),this.resize(t,e)}snapshot(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()}destroy(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=null!=t?t:window.devicePixelRatio;return qk()||(e=1),this._pixelRatio=e,$k.overrideScale(this.realContext,e)}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{canvas:i,context:n,pixelRatio:o}=this;i.width=Math.round(t*o),i.height=Math.round(e*o),n.resetTransform(),this._width=t,this._height=e}}!function(t){t.SCENE="scene",t.SCENE_STATS="scene:stats",t.SCENE_STATS_VERBOSE="scene:stats:verbose",t.SCENE_DIRTY_TREE="scene:dirtyTree"}(jN||(jN={}));const nL="adv-composite";class oL{constructor(t){var e;this.id=Vk(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug=sT.create(!0,jN.SCENE);const{document:i,window:n,mode:o=(null!==(e=oT("agChartsSceneRenderModel"))&&void 0!==e?e:nL),width:r,height:s,overrideDevicePixelRatio:a}=t;this.overrideDevicePixelRatio=a,this.opts={document:i,window:n,mode:o},this.canvas=new $k({document:i,window:n,width:r,height:s,overrideDevicePixelRatio:a})}set container(t){this.canvas.container=t}get container(){return this.canvas.container}download(t,e){this.canvas.download(t,e)}getDataURL(t){return this.canvas.getDataURL(t)}get width(){return this.pendingSize?this.pendingSize[0]:this.canvas.width}get height(){return this.pendingSize?this.pendingSize[1]:this.canvas.height}resize(t,e){t=Math.round(t),e=Math.round(e);const i=t<=0||e<=0,n=isNaN(t)||isNaN(e);return!(t===this.width&&e===this.height||n||i)&&(this.pendingSize=[t,e],this.markDirty(),!0)}addLayer(t){var e;const{mode:i}=this.opts;if(!["composite","dom-composite",nL].includes(i))return;const{zIndex:n=this._nextZIndex++,name:o,zIndexSubOrder:r,getComputedOpacity:s,getVisibility:a}=t,{width:l,height:c,overrideDevicePixelRatio:d}=this,u="dom-composite"===i,h=i===nL&&iL.isSupported()?new iL({width:l,height:c,overrideDevicePixelRatio:d}):new $k({document:this.opts.document,window:this.opts.window,width:l,height:c,domLayer:u,zIndex:n,name:o,overrideDevicePixelRatio:d}),p={id:this._nextLayerId++,name:o,zIndex:n,zIndexSubOrder:r,canvas:h,getComputedOpacity:s,getVisibility:a};if(n>=this._nextZIndex&&(this._nextZIndex=n+1),this.layers.push(p),this.sortLayers(),u){const t=this.layers.map(t=>t.canvas).filter(t=>t instanceof $k),i=t.findIndex(t=>t===h);(null!==(e=t[i-1])&&void 0!==e?e:this.canvas).element.insertAdjacentElement("afterend",h.element)}return this.debug("Scene.addLayer() - layers",this.layers),p.canvas}removeLayer(t){const e=this.layers.findIndex(e=>e.canvas===t);e>=0&&(this.layers.splice(e,1),t.destroy(),this.markDirty(),this.debug("Scene.removeLayer() -  layers",this.layers))}moveLayer(t,e,i){const n=this.layers.find(e=>e.canvas===t);n&&(n.zIndex=e,n.zIndexSubOrder=i,this.sortLayers(),this.markDirty(),this.debug("Scene.moveLayer() -  layers",this.layers))}sortLayers(){this.layers.sort((t,e)=>{var i,n;return $M([t.zIndex,...null!==(i=t.zIndexSubOrder)&&void 0!==i?i:[void 0,void 0],t.id],[e.zIndex,...null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0],e.id],qM)})}markDirty(){this._dirty=!0}get dirty(){return this._dirty}set root(t){var e;t!==this._root&&(null===(e=this._root)||void 0===e||e._setLayerManager(),this._root=t,t&&t._setLayerManager({addLayer:t=>this.addLayer(t),moveLayer:(...t)=>this.moveLayer(...t),removeLayer:(...t)=>this.removeLayer(...t),markDirty:()=>this.markDirty(),canvas:this.canvas,debug:sT.create(jN.SCENE)}),this.markDirty())}get root(){return this._root}strip(){const{layers:t}=this;for(const e of t)e.canvas.destroy(),delete e.canvas;t.splice(0,t.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()}destroy(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})}render(t){var e,i;return XA(this,void 0,void 0,(function*(){const{debugSplitTimes:n={start:performance.now()},extraDebugStats:o={}}=null!=t?t:{},{canvas:r,canvas:{context:s},root:a,layers:l,pendingSize:c,opts:{mode:d}}=this;if(c&&(this.canvas.resize(...c),this.layers.forEach(t=>t.canvas.resize(...c)),this.pendingSize=void 0),a&&!a.visible)return void(this._dirty=!1);if(a&&!this.dirty)return this.debug("Scene.render() - no-op",{redrawType:Ik[a.dirty],tree:this.buildTree(a)}),void this.debugStats(n,s,void 0,o);const u={ctx:s,devicePixelRatio:null!==(e=this.canvas.pixelRatio)&&void 0!==e?e:1,forceRender:!0,resized:!!c,debugNodes:{}};sT.check(jN.SCENE_STATS_VERBOSE)&&(u.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let h=!1;if((!a||a.dirty>=Ik.TRIVIAL)&&(h=!0,r.clear()),a){const{dirtyTree:t,paths:e}=this.buildDirtyTree(a);sT.create(jN.SCENE_DIRTY_TREE)("Scene.render() - dirtyTree",{dirtyTree:t,paths:e})}a&&h&&(this.debug("Scene.render() - before",{redrawType:Ik[a.dirty],canvasCleared:h,tree:this.buildTree(a)}),a.visible&&(s.save(),a.render(u),s.restore())),n["\u270d\ufe0f"]=performance.now(),"dom-composite"!==d&&l.length>0&&h&&(this.sortLayers(),s.save(),s.setTransform(1/r.pixelRatio,0,0,1/r.pixelRatio,0,0),l.forEach(({canvas:{imageSource:t,enabled:e},getComputedOpacity:i,getVisibility:n})=>{e&&n()&&(s.globalAlpha=i(),s.drawImage(t,0,0))}),s.restore(),n["\u26d9"]=performance.now()),null===(i=s.verifyDepthZero)||void 0===i||i.call(s),this._dirty=!1,this.debugStats(n,s,u.stats,o),this.debugSceneNodeHighlight(s,u.debugNodes),a&&this.debug("Scene.render() - after",{redrawType:Ik[a.dirty],canvasCleared:h,tree:this.buildTree(a)})}))}debugStats(t,e,i,n={}){if(sT.check(jN.SCENE_STATS,jN.SCENE_STATS_VERBOSE)){const o=performance.now(),r=t.start;t.end=performance.now();const s=(t,e)=>{const i=t+e;return`${t} / ${i} (${Math.round(100*t/i)}%)`},a=(t,e,i)=>`${t}: ${Math.round(100*(i-e))/100}ms`,{layersRendered:l=0,layersSkipped:c=0,nodesRendered:d=0,nodesSkipped:u=0}=null!=i?i:{};let h=0;const p=Object.entries(t).filter(([t])=>"end"!==t).map(([t,e],i)=>{const n=i>0?a(t,h,e):null;return h=e,n}).filter(t=>null!=t).join(" + "),f=Object.entries(n).map(([t,e])=>`${t}: ${e}`).join(" ; "),g=sT.check(jN.SCENE_STATS_VERBOSE),v=[`${a("\u23f1\ufe0f",r,o)} (${p})`,""+f,"Layers: "+(g?s(l,c):this.layers.length),g?"Nodes: "+s(d,u):null].filter(t=>null!=t).map(t=>[t,$k.getTextSize(t,e.font)]),y=Math.max(...v.map(([,{width:t}])=>t)),m=v.reduce((t,[,{height:e}])=>t+e,0);e.save(),e.fillStyle="white",e.fillRect(0,0,y,m),e.fillStyle="black";let b=0;for(const[t,i]of v)b+=i.height,e.fillText(t,2,b);e.restore()}}debugSceneNodeHighlight(t,e){var i;const n=t=>e=>!!t.test(e.id)||e instanceof ZM&&null!=e.name&&t.test(e.name),o=t=>e=>t===e.id||e instanceof ZM&&null!=e.name&&t===e.name,r=tT(oT("agChartsSceneDebug")).flatMap(t=>"layout"===t?["seriesRoot","legend","root",/.*Axis-\d+-axis.*/]:t);for(const t of r){if("string"==typeof t&&null!=e[t])continue;const r="string"==typeof t?o(t):n(t),s=null===(i=this.root)||void 0===i?void 0:i.findNodes(r);if(s&&0!==s.length)for(const t of s)t instanceof ZM&&t.name?e[t.name]=t:e[t.id]=t;else nT.log(`Scene.render() - no debugging node with id [${t}] in scene graph.`)}t.save();for(const[i,n]of Object.entries(e)){const e=n.computeTransformedBBox();e?(t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(e.x,e.y,e.width,e.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(i,e.x,e.y,e.width),t.fillText(i,e.x,e.y,e.width)):nT.log(`Scene.render() - no bbox for debugged node [${i}].`)}t.restore()}buildTree(t){var e,i;const n=null!==(e=t instanceof ZM?t.name:null)&&void 0!==e?e:t.id;return Object.assign(Object.assign({name:n,node:t,dirty:Ik[t.dirty]},(null===(i=t.parent)||void 0===i?void 0:i.isVirtual)?{virtualParentDirty:Ik[t.parent.dirty],virtualParent:t.parent}:{}),t.children.map(t=>this.buildTree(t)).reduce((t,e)=>{let{name:i}=e;const{node:{visible:n,opacity:o,zIndex:r,zIndexSubOrder:s},node:a,virtualParent:l}=e;(!n||o<=0)&&(i=`(${i})`),a instanceof ZM&&a.isLayer()&&(i=`*${i}*`);const c=[""+(null!=i?i:"<unknown>"),"z: "+r,s&&"zo: "+s.map(t=>"function"==typeof t?t()+" (fn)":t).join(" / "),l&&"(virtual parent)"].filter(t=>!!t).join(" ");let d=c,u=1;for(;null!=t[d]&&u<100;)d=`${c} (${u++})`;return t[d]=e,t},{}))}buildDirtyTree(t){var e;if(t.dirty===Ik.NONE)return{dirtyTree:{},paths:[]};const i=t.children.map(t=>this.buildDirtyTree(t)).filter(t=>t.paths.length>0),n=null!==(e=t instanceof ZM?t.name:null)&&void 0!==e?e:t.id,o=0===i.length?[n]:i.map(t=>t.paths).reduce((t,e)=>t.concat(e),[]).map(t=>`${n}.${t}`);return{dirtyTree:Object.assign({name:n,node:t,dirty:Ik[t.dirty]},i.map(t=>t.dirtyTree).filter(t=>void 0!==t.dirty).reduce((t,e)=>{var i;return t[null!==(i=e.name)&&void 0!==i?i:"<unknown>"]=e,t},{})),paths:o}}}function rL(t){return new Promise(e=>{setTimeout(()=>e(void 0),t)})}oL.className="Scene";class sL{constructor(){this.cache=new WeakMap}call(t,...e){let i,n=this.cache.get(t);const o=()=>{try{const o=t(...e);return n&&null!=i&&n.set(i,o),o}catch(t){return void nT.warnOnce("User callback errored, ignoring",t)}};try{i=JSON.stringify(e)}catch(t){return o()}return null==n&&(n=new Map,this.cache.set(t,n)),n.has(i)?n.get(i):o()}invalidateCache(){this.cache=new WeakMap}}class aL{constructor(){this.available=!0,this.acquireQueue=[]}acquire(t){return new Promise(e=>{this.acquireQueue.push([t,e]),this.available&&this.dispatchNext()})}acquireImmediately(t){return XA(this,void 0,void 0,(function*(){return!!this.available&&(yield this.acquire(t),!0)}))}waitForClearAcquireQueue(){return XA(this,void 0,void 0,(function*(){return this.acquire(()=>XA(this,void 0,void 0,(function*(){})))}))}dispatchNext(){var t,e;return XA(this,void 0,void 0,(function*(){this.available=!1;let[i,n]=null!==(t=this.acquireQueue.shift())&&void 0!==t?t:[];for(;i;){try{yield i(),null==n||n()}catch(t){nT.error("mutex callback error",t),null==n||n()}[i,n]=null!==(e=this.acquireQueue.shift())&&void 0!==e?e:[]}this.available=!0}))}}function lL(t,e){let i,n,o=0,r=!1;const s=()=>r,a=()=>{r=!1,null==n||n(),n=void 0,i=void 0,o>0&&t(l)},l=()=>{const t=o;o=0,r=!0;const i=e({count:t});i?i.then(a).catch(a):a()};return{schedule(e){0!==o||s()||t(l,e),o++},await(){return XA(this,void 0,void 0,(function*(){if(s())for(null==i&&(i=new Promise(t=>{n=t}));s();)yield i}))}}}class cL{static init(t){if("undefined"!=typeof ResizeObserver)this.resizeObserver=new ResizeObserver(t=>{for(const e of t){const{width:t,height:i}=e.contentRect;this.checkSize(this.elements.get(e.target),e.target,t,i)}});else{const t=()=>{this.elements.forEach((t,e)=>{this.checkClientSize(e,t)})};this.pollerHandler=window.setInterval(t,100)}this.ready=!0,this.documentReady="loading"!==t.readyState,this.documentReady||(this.readyEventFn=()=>{const e="loading"!==t.readyState,i=this.documentReady;if(this.documentReady=e,e&&e!==i){for(const[t,e]of this.queuedObserveRequests)this.observe(t,e);this.queuedObserveRequests.length=0}},t.addEventListener("DOMContentLoaded",this.readyEventFn))}static destroy(){var t;null!=this.pollerHandler&&(clearInterval(this.pollerHandler),this.pollerHandler=void 0),this.readyEventFn&&(document.removeEventListener("DOMContentLoaded",this.readyEventFn),this.readyEventFn=void 0),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),this.resizeObserver=void 0,this.ready=!1}static checkSize(t,e,i,n){t&&(t.size&&i===t.size.width&&n===t.size.height||(t.size={width:i,height:n},t.cb(t.size,e)))}static observe(t,e){this.ready||this.init(t.ownerDocument),this.documentReady?(this.unobserve(t,!1),this.resizeObserver&&this.resizeObserver.observe(t),this.elements.set(t,{cb:e})):this.queuedObserveRequests.push([t,e])}static unobserve(t,e=!0){this.resizeObserver&&this.resizeObserver.unobserve(t),this.elements.delete(t),this.queuedObserveRequests=this.queuedObserveRequests.filter(([e])=>e===t),e&&0===this.elements.size&&this.destroy()}static checkClientSize(t,e){const i=t.clientWidth?t.clientWidth:0,n=t.clientHeight?t.clientHeight:0;this.checkSize(e,t,i,n)}}cL.elements=new Map,cL.ready=!1,cL.documentReady=!1,cL.queuedObserveRequests=[];class dL{constructor(){this.range="tooltip"}}var uL;KA([PT(dk("tooltip","node")),YA("design:type",String)],dL.prototype,"range",void 0),function(t){t[t.FULL=0]="FULL",t[t.PROCESS_DATA=1]="PROCESS_DATA",t[t.PERFORM_LAYOUT=2]="PERFORM_LAYOUT",t[t.SERIES_UPDATE=3]="SERIES_UPDATE",t[t.TOOLTIP_RECALCULATION=4]="TOOLTIP_RECALCULATION",t[t.SCENE_RENDER=5]="SCENE_RENDER",t[t.NONE=6]="NONE"}(uL||(uL={}));class hL{constructor(t){this.type=t,this.continuousDomain=[1/0,-1/0],this.discreteDomain=new Set}extend(t){"discrete"===this.type?this.discreteDomain.add(t):"continuous"===this.type&&(this.continuousDomain[0]>t&&(this.continuousDomain[0]=t),this.continuousDomain[1]<t&&(this.continuousDomain[1]=t))}getDomain(){if("discrete"===this.type)return this.discreteDomain;if("continuous"===this.type)return this.continuousDomain;throw new Error("AG Charts - Unsupported data domain type: "+this.type)}}function pL(t){return t.map(t=>null==t||"number"==typeof t||"string"==typeof t||"boolean"==typeof t?t:"object"==typeof t?JSON.stringify(t):t).join("-")}function fL(t,e){var i;const n=function(t){if(void 0===t)return[];let[e,i]=t;return e=+e,i=+i,0===e&&0===i?[0,1]:e===1/0&&i===-1/0?[]:(e===1/0&&(e=0),i===-1/0&&(i=0),ER(e)&&ER(i)?[e,i]:[])}(t);if(0===n.length)return n;let[o,r]=n;if(o===r){const[t,n]=null!==(i=null==e?void 0:e.calculatePadding(o,r))&&void 0!==i?i:[1,1];o-=t,r+=n}return[o,r]}const gL=Symbol("invalid");class vL{constructor(t){const{props:e,mode:i="standalone"}=t;this.mode=i;let n=!0;for(const t of e){if("key"===t.type&&!n)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===t.type&&n&&(n=!1)}this.opts=Object.assign({dataVisible:!0},t),this.keys=e.filter(t=>"key"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e,missing:0})),this.values=e.filter(t=>"value"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e,missing:0})),this.aggregates=e.filter(t=>"aggregate"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e})),this.groupProcessors=e.filter(t=>"group-value-processor"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e})),this.propertyProcessors=e.filter(t=>"property-value-processor"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e})),this.reducers=e.filter(t=>"reducer"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e})),this.processors=e.filter(t=>"processor"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e}));for(const t of this.values)if(null==t.property)throw new Error("AG Charts - internal config error: no properties specified for value definitions: "+JSON.stringify(t));const o=({matchGroupIds:t})=>{for(const e of null!=t?t:[])if(!this.values.some(t=>t.groupId===e))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${e}).`)},r=({matchIds:t})=>{for(const e of null!=t?t:[])if(!this.values.some(t=>{var i;return null===(i=t.ids)||void 0===i?void 0:i.some(([t,i])=>t===e[0]&&i===e[1])}))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${e}).`)};for(const t of[...this.groupProcessors,...this.aggregates])r(t),o(t)}resolveProcessedDataIndexById(t,e){var i;const{index:n,def:o}=null!==(i=this.resolveProcessedDataDefById(t,e))&&void 0!==i?i:{};return{index:n,def:o}}resolveProcessedDataIndicesById(t,e){return this.resolveProcessedDataDefsById(t,e).map(({index:t,def:e})=>({index:t,def:e}))}resolveProcessedDataDefById(t,e){return this.resolveProcessedDataDefsById(t,e)[0]}resolveProcessedDataDefsByIds(t,e){const i=[];for(const n of e)i.push([n,this.resolveProcessedDataDefsById(t,n)]);return i}resolveProcessedDataDefsValues(t,{keys:e,values:i}){const n={};for(const[o,[{index:r,def:s}]]of t){const t="key"===s.type?e:i;n[o]=t[r]}return n}resolveProcessedDataDefsById(t,e){const{keys:i,values:n,aggregates:o,groupProcessors:r,reducers:s}=this,a=i=>{const{ids:n,scopes:o}=i;return null!=n&&(!(null!=t&&!(null==o?void 0:o.some(e=>e===t.id)))&&n.some(([i,n])=>i===t.id&&("string"==typeof e?n===e:e.test(n))))},l=[i,n,o,r,s],c=[];for(const t of l)c.push(...t.filter(a).map(t=>({index:t.index,def:t})));if(c.length>0)return c;throw new Error(`AG Charts - didn't find property definition for [${e}, ${t.id}]`)}getDomain(t,e,i="value",n){var o,r,s,a;let l,c;try{l=this.resolveProcessedDataIndicesById(t,e)}catch(t){if("string"!=typeof e&&/didn't find property definition/.test(t.message))return[];throw t}switch(i){case"key":c="keys";break;case"value":c="values";break;case"aggregate":c="aggValues";break;case"group-value-processor":c="groups";break;default:return[]}const d=null!==(r=null===(o=n.domain[c])||void 0===o?void 0:o[l[0].index])&&void 0!==r?r:[];if(1===l.length)return d;const u=[...d];for(const t of l.slice(1))ZR(null!==(a=null===(s=n.domain[c])||void 0===s?void 0:s[t.index])&&void 0!==a?a:[],u);return u}processData(t){const{opts:{groupByKeys:e,groupByFn:i},aggregates:n,groupProcessors:o,reducers:r,processors:s,propertyProcessors:a}=this,l=performance.now();for(const t of[...this.keys,...this.values])t.missing=0;if(e&&0===this.keys.length)return;let c=this.extractData(t);e?c=this.groupData(c):i&&(c=this.groupData(c,i(c))),o.length>0&&this.postProcessGroups(c),n.length>0&&this.aggregateData(c),a.length>0&&this.postProcessProperties(c),r.length>0&&this.reduceData(c),s.length>0&&this.postProcessData(c);for(const e of[...this.keys,...this.values])t.length>0&&e.missing>=t.length&&nT.warnOnce(`the key '${e.property}' was not found in any data element.`);const d=performance.now();return c.time=d-l,sT.check(!0,"data-model")&&function(t){var e,i;const n=(t,e)=>{e.length>0&&(nT.log("DataModel.processData() - "+t),nT.table(e))};if(nT.log("DataModel.processData() - processedData",t),n("Key Domains",t.domain.keys),n("Group Domains",null!==(e=t.domain.groups)&&void 0!==e?e:[]),n("Value Domains",t.domain.values),n("Aggregate Domains",null!==(i=t.domain.aggValues)&&void 0!==i?i:[]),"grouped"===t.type){const e=t.data.reduce((t,e)=>{var i,n;const o=null!==(i=e.keys)&&void 0!==i?i:[],r=null!==(n=e.aggValues)&&void 0!==n?n:[],s=e.keys.map(()=>{}),a=null==r?void 0:r.map(()=>{});return t.push(...e.values.map((t,e)=>[...0===e?o:s,...null!=t?t:[],...0==e?r:a])),t},[]);n("Values",e)}else{const e=t.data.reduce((t,e)=>{var i;const n=null!==(i=e.aggValues)&&void 0!==i?i:[];return t.push([...e.keys,...e.values,...n]),t},[]);n("Values",e)}}(c),c}valueGroupIdxLookup({matchGroupIds:t,matchIds:e}){return this.values.map((t,e)=>({def:t,index:e})).filter(({def:i})=>!(t&&(null==i.groupId||!t.includes(i.groupId)))&&(!e||null!=i.ids&&e.some(([t,e])=>{var n;return null===(n=i.ids)||void 0===n?void 0:n.some(([i,n])=>i===t&&n===e)}))).map(({index:t})=>t)}valueIdxLookup(t,e){const i=null==t||0===t.length,n=e=>{if(null==e)return!0;const n=null==e||0===e.length;return i===n||(null==e?void 0:e.some(e=>t.includes(e)))},o="string"==typeof e?e:e.id,r=this.values.findIndex(t=>{var e;return n(t.scopes)&&((null===(e=t.ids)||void 0===e?void 0:e.some(t=>(([t,e])=>n([t])&&e===o)(t)))||t.property===o||t.id===o)});if(r>=0)return r;throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(e)} in scope(s) ${JSON.stringify(t)}`)}extractData(t){var e;const{keys:i,values:n,opts:{dataVisible:o}}=this,{dataDomain:r,processValue:s,scopes:a,allScopesHaveSameDefs:l}=this.initDataDomainProcessor(),c=new Array(o?t.length:0);let d=0,u=0;for(const r of t){const t=a.size>0?new Set(a):void 0,h=o?new Array(i.length):void 0;let p,f=0;for(const t of i){if(p=s(t,r,p),p===gL)break;h&&(h[f++]=p)}if(p===gL)continue;const g=o&&n.length>0?new Array(n.length):void 0;let v,y=0;for(const i of n)if(v=s(i,r,v),v===gL){if(l)break;for(const n of null!==(e=i.scopes)&&void 0!==e?e:a)null==t||t.delete(n);if(y++,0===(null==t?void 0:t.size))break}else g&&(g[y++]=v);if((v!==gL||!l)&&(0!==(null==t?void 0:t.size)&&o)){const e={datum:r,keys:h,values:g};!l&&t&&t.size<a.size&&(u++,e.validScopes=[...t]),c[d++]=e}}c.length=d;const h=t=>{const e=r.get(t).getDomain();return Array.isArray(e)&&e[0]>e[1]?[]:[...e]};return{type:"ungrouped",input:{count:t.length},data:c,domain:{keys:i.map(t=>h(t)),values:n.map(t=>h(t))},defs:{allScopesHaveSameDefs:l,keys:i,values:n},partialValidDataCount:u,time:0}}groupData(t,e){var i,n,o,r;const s=new Map;for(const a of t.data){const{keys:t,values:l,datum:c,validScopes:d}=a,u=e?e(a):t,h=pL(u);if(s.has(h)){const t=s.get(h);if(t.values.push(l),t.datum.push(c),null!=d)for(let e=0;e<(null!==(n=null===(i=t.validScopes)||void 0===i?void 0:i.length)&&void 0!==n?n:0);e++){const i=null===(o=t.validScopes)||void 0===o?void 0:o[e];d.some(t=>t===i)||(null===(r=t.validScopes)||void 0===r||r.splice(e,1))}}else s.set(h,{keys:u,values:[l],datum:[c],validScopes:d})}const a=new Array(s.size),l=new Array(s.size);let c=0;for(const[,{keys:t,values:e,datum:i,validScopes:n}]of s.entries())0!==(null==n?void 0:n.length)&&(l[c]=t,a[c++]={keys:t,values:e,datum:i,validScopes:n});return Object.assign(Object.assign({},t),{type:"grouped",data:a,domain:Object.assign(Object.assign({},t.domain),{groups:l})})}aggregateData(t){var e,i,n,o,r,s,a,l;const{aggregates:c}=this;if(!c)return;const d=c.map(()=>[1/0,-1/0]),u=c.map(t=>this.valueGroupIdxLookup(t)),h=c.map(t=>t.aggregateFunction),p=c.map(t=>t.groupAggregateFunction),f=c.map(t=>t.finalFunction);for(const g of t.data){let{values:v}=g;const{validScopes:y}=g;null!==(e=g.aggValues)&&void 0!==e||(g.aggValues=new Array(u.length)),"ungrouped"===t.type&&(v=[v]);let m=0;for(const t of u){if(!(null===(i=null==y?void 0:y.some(t=>{var e;return null===(e=c[m].matchScopes)||void 0===e?void 0:e.some(e=>t===e)}))||void 0===i||i)){m++;continue}let e=null!==(o=null===(n=p[m])||void 0===n?void 0:n.call(p))&&void 0!==o?o:ZR([]);for(const i of v){const n=t.map(t=>i[t]),o=h[m](n,g.keys);o&&(e=null!==(s=null===(r=p[m])||void 0===r?void 0:r.call(p,o,e))&&void 0!==s?s:ZR(o,e))}const u=(null!==(l=null===(a=f[m])||void 0===a?void 0:a.call(f,e))&&void 0!==l?l:e).map(t=>{return e=t,Number.isInteger(e)?e:Math.abs(e)>1e4?Math.trunc(e):Math.round(1e4*e)/1e4;var e});ZR(u,d[m]),g.aggValues[m++]=u}}t.domain.aggValues=d}postProcessGroups(t){var e,i,n,o,r;const{groupProcessors:s}=this;if(!s)return;const a=new Set,l=new Map,c=new Map,d=new Map;for(const t of s){const e=this.valueGroupIdxLookup(t);c.set(t,e),d.set(t,t.adjust());for(const t of e){const e=this.values[t];a.add(t),l.set(t,new hL("category"===e.valueType?"discrete":"continuous"))}}const u=t=>{var e;for(const i of a)null===(e=l.get(i))||void 0===e||e.extend(t[i])};for(const a of t.data){for(const l of s){if(!(null===(i=null===(e=a.validScopes)||void 0===e?void 0:e.some(t=>{var e;return null===(e=l.matchScopes)||void 0===e?void 0:e.some(e=>t===e)}))||void 0===i||i))continue;const s=null!==(n=c.get(l))&&void 0!==n?n:[],u=null!==(r=null===(o=d.get(l))||void 0===o?void 0:o())&&void 0!==r?r:()=>{};if("grouped"!==t.type)a.values&&u(a.values,s);else for(const t of a.values)t&&u(t,s)}if("grouped"===t.type)for(const t of a.values)u(t);else u(a.values)}for(const[e,i]of l)t.domain.values[e]=[...i.getDomain()]}postProcessProperties(t){const{propertyProcessors:e}=this;if(e)for(const{adjust:i,property:n,scopes:o}of e)i()(t,this.valueIdxLookup(null!=o?o:[],n))}reduceData(t){var e,i,n;const{reducers:o}=this,r=o.map(t=>t.scopes),s=o.map(t=>t.reducer()),a=o.map(t=>t.initialValue);for(const n of t.data){let t=0;for(const o of s){null===(i=null===(e=n.validScopes)||void 0===e?void 0:e.some(e=>{var i;return null===(i=r[t])||void 0===i?void 0:i.some(t=>e===t)}))||void 0===i||i?(a[t]=o(a[t],n),t++):t++}}for(let e=0;e<a.length;e++)null!==(n=t.reduced)&&void 0!==n||(t.reduced={}),t.reduced[o[e].property]=a[e]}postProcessData(t){var e;const{processors:i}=this;for(const n of i)null!==(e=t.reduced)&&void 0!==e||(t.reduced={}),t.reduced[n.property]=n.calculate(t)}initDataDomainProcessor(){var t;const{keys:e,values:i}=this,n=new Set;for(const e of i)for(const i of null!==(t=e.scopes)&&void 0!==t?t:[])n.add(i);const o=n.size,r=new Map,s=new Map;let a=!0;const l=(t,e,i=r)=>{var n;"category"===e?i.set(t,new hL("discrete")):(i.set(t,new hL("continuous")),a&&(a=(null!==(n=t.scopes)&&void 0!==n?n:[]).length===o))},c=()=>{e.forEach(t=>l(t,t.valueType)),i.forEach(t=>l(t,t.valueType))};c();const d=this.buildAccessors(...e,...i);return{dataDomain:r,processValue:(t,e,i)=>{var n,o,a,l;let u,h=!1;if(t.property in d){try{u=d[t.property](e)}catch(t){}h=void 0!==u}else h=t.property in e,u=h?e[t.property]:t.missingValue;if(null!=t.forceValue){u=h&&AT(u)?-1*t.forceValue:t.forceValue,h=!0}if(h||"missingValue"in t||t.missing++,r.has(t)||c(),h){if(!(null===(o=null===(n=t.validation)||void 0===n?void 0:n.call(t,u,e))||void 0===o||o)){if(!("invalidValue"in t))return gL;u=t.invalidValue}}return t.processor&&(s.has(t)||s.set(t,t.processor()),u=null===(a=s.get(t))||void 0===a?void 0:a(u,i!==gL?i:void 0)),null===(l=r.get(t))||void 0===l||l.extend(u),u},initDataDomain:c,scopes:n,allScopesHaveSameDefs:a}}buildAccessors(...t){const e={};if("integrated"===this.mode)return e;for(const i of t){if(!(i.property.indexOf(".")>=0||i.property.indexOf("[")>=0))continue;let t;t=i.property.startsWith("[")?`return datum${i.property};`:`return datum.${i.property};`,e[i.property]=new Function("datum",t)}return e}}class yL{constructor(t){this.mode=t,this.debug=sT.create(!0,"data-model"),this.requested=[],this.status="setup"}request(t,e,i){return XA(this,void 0,void 0,(function*(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");return new Promise((n,o)=>{this.requested.push({id:t,opts:i,data:e,resultCb:n,reject:o})})}))}execute(){return XA(this,void 0,void 0,(function*(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const t=this.mergeRequested();this.debug("DataController.execute() - merged",t);const e=sT.check(!0,"data-model");e&&(window.processedData=[]);for(const{opts:i,data:n,resultCbs:o,rejects:r,ids:s}of t)try{const t=new vL(Object.assign(Object.assign({},i),{mode:this.mode})),a=t.processData(n);e&&window.processedData.push(a),a&&0===a.partialValidDataCount?o.forEach(e=>e({dataModel:t,processedData:a})):a?this.splitResult(t,a,s,o):r.forEach(t=>t(new Error("AG Charts - no processed data generated")))}catch(t){r.forEach(e=>e(t))}}))}mergeRequested(){const t=[],e=t=>t.filter(t=>"key"===t.type).map(t=>t.property).join(";"),i=({opts:t,data:i})=>n=>n[0].data===i&&n[0].opts.groupByKeys===t.groupByKeys&&n[0].opts.dataVisible===t.dataVisible&&n[0].opts.groupByFn===t.groupByFn&&e(n[0].opts.props)===e(t.props),n=t=>e=>{var i;if(e.type!==t.type)return!1;const n=null!==(i=hT(e,t))&&void 0!==i?i:{};return delete n.scopes,delete n.id,delete n.ids,0===Object.keys(n).length},o=t=>Object.assign(Object.assign({},t[0]),{props:t.reduce((t,e)=>{var i,o,r,s,a,l;for(const c of e.props){null!=c.id&&(null!==(i=c.ids)&&void 0!==i||(c.ids=[]),null===(o=c.scopes)||void 0===o||o.forEach(t=>{var e;return null===(e=c.ids)||void 0===e?void 0:e.push([t,c.id])}));const e=t.find(n(c));e?(null!==(r=e.scopes)&&void 0!==r||(e.scopes=[]),e.scopes.push(...null!==(s=c.scopes)&&void 0!==s?s:[]),"key"!==e.type&&"value"!==e.type||null===(a=e.ids)||void 0===a||a.push(...null!==(l=c.ids)&&void 0!==l?l:[])):t.push(c)}return t},[])});for(const e of this.requested){const n=t.find(i(e));n?n.push(e):t.push([e])}return t.map(t=>({ids:t.map(({id:t})=>t),resultCbs:t.map(({resultCb:t})=>t),rejects:t.map(({reject:t})=>t),data:t[0].data,opts:o(t.map(({opts:t})=>t))}))}splitResult(t,e,i,n){for(let o=0;o<i.length;o++){const r=i[o];(0,n[o])({dataModel:t,processedData:Object.assign(Object.assign({},e),{data:e.data.filter(({validScopes:t})=>null==t||t.some(t=>t===r))})})}}}class mL{constructor(t){this.getSeries=t}}class bL{constructor(){this.listeners=new qR}addListener(t,e,i){return this.listeners.addListener(t,e,i)}removeListener(t){this.listeners.removeListener(t)}}const SL=[!0,"animation"];class xL extends bL{constructor(t,e){super(),this.interactionManager=t,this.chartUpdateMutex=e,this.defaultDuration=1e3,this.batch=new CL,this.debug=sT.create(...SL),this.isPlaying=!1,this.requestId=null,this.skipAnimations=!1}animate(t){var e,i,{disableInteractions:n=!0,immutable:o=!0}=t,r=HA(t,["disableInteractions","immutable"]);const{batch:s}=this;try{if(null!=r.id&&s.controllers.has(r.id)){if(!o)return s.controllers.get(r.id).reset(r);s.controllers.get(r.id).stop(),this.debug("Skipping animation batch due to update of existing animation: "+r.id),this.batch.skip()}}catch(t){return void this.failsafeOnError(t)}const a=null!==(e=r.id)&&void 0!==e?e:Math.random().toString(),l=this.isSkipped();return l&&this.debug("AnimationManager - skipping animation"),new xM(Object.assign(Object.assign({},r),{id:a,skip:l,autoplay:!!this.isPlaying&&r.autoplay,duration:null!==(i=r.duration)&&void 0!==i?i:this.defaultDuration,onPlay:t=>{var e;s.controllers.set(a,t),this.requestAnimation(),n&&this.interactionManager.pause("animation"),null===(e=r.onPlay)||void 0===e||e.call(t,t)},onStop:t=>{var e;s.controllers.delete(a),n&&this.interactionManager.resume("animation"),null===(e=r.onStop)||void 0===e||e.call(t,t)}}))}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");for(const t of this.batch.controllers.values())try{t.play()}catch(t){this.failsafeOnError(t)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");for(const t of this.batch.controllers.values())try{t.pause()}catch(t){this.failsafeOnError(t)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()");for(const t of this.batch.controllers.values())try{t.stop()}catch(t){this.failsafeOnError(t,!1)}}stopByAnimationId(t){var e;try{null!=t&&this.batch.controllers.has(t)&&(null===(e=this.batch.controllers.get(t))||void 0===e||e.stop())}catch(t){return void this.failsafeOnError(t)}}stopByAnimationGroupId(t){for(const e of this.batch.controllers.values())e.groupId===t&&this.stopByAnimationId(e.id)}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(t=!0){this.skipAnimations=t}isSkipped(){return this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){sT.check(...SL)&&this.debug("AnimationManager - skipCurrentBatch()",{stack:(new Error).stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(t){this.requestId=requestAnimationFrame(t)}requestAnimation(){if(!this.batch.isActive()||null!==this.requestId)return;let t;const e=i=>XA(this,void 0,void 0,(function*(){const n=()=>XA(this,void 0,void 0,(function*(){const e=i-(null!=t?t:i);t=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.controllers.size});for(const t of this.batch.controllers.values())try{t.update(e)}catch(t){this.failsafeOnError(t)}this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:e})}));this.isSkippingFrames()?yield this.chartUpdateMutex.acquireImmediately(n):yield this.chartUpdateMutex.acquire(n),this.batch.isActive()&&this.scheduleAnimationFrame(e)}));this.scheduleAnimationFrame(e)}cancelAnimation(){null!==this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(t,e=!0){nT.error("Error during animation, skipping animations",t),e&&this.cancelAnimation()}startBatch(t){this.debug(`AnimationManager - startBatch() with skipAnimations=${t}.`),this.reset(),this.batch.destroy(),this.batch=new CL,!0===t&&this.batch.skip()}endBatch(){this.debug(`AnimationManager - endBatch() with ${this.batch.controllers.size} animations; skipped: ${this.batch.isSkipped()}.`),this.batch.isSkipped()&&!this.batch.isActive()&&this.batch.skip(!1)}}class CL{constructor(){this.controllers=new Map,this.skipAnimations=!1}isActive(){return this.controllers.size>0}skip(t=!0){if(!1===this.skipAnimations&&!0===t){for(const t of this.controllers.values())t.stop();this.controllers.clear()}this.skipAnimations=t}isSkipped(){return this.skipAnimations}destroy(){}}class wL extends bL{legendItemClick(t,e,i,n){const o={type:"legend-item-click",series:t,itemId:e,enabled:i,legendItemName:n};this.listeners.dispatch("legend-item-click",o)}legendItemDoubleClick(t,e,i,n,o){const r={type:"legend-item-double-click",series:t,itemId:e,enabled:i,legendItemName:o,numVisibleItems:n};this.listeners.dispatch("legend-item-double-click",r)}axisHover(t,e){const i={type:"axis-hover",axisId:t,direction:e};this.listeners.dispatch("axis-hover",i)}}class EL{constructor(t){this.states={},this.element=t}updateCursor(t,e){delete this.states[t],null!=e&&(this.states[t]={style:e}),this.applyStates()}applyStates(){let t="default";Object.entries(this.states).reverse().slice(0,1).forEach(([e,{style:i}])=>t=i),this.element.style.cursor=t}getCursor(){return this.element.style.cursor}}class OL extends bL{constructor(){super(...arguments),this.highlightStates=new Map,this.pickedStates=new Map}updateHighlight(t,e){this.highlightStates.delete(t),null!=e&&this.highlightStates.set(t,e),this.applyHighlightStates()}getActiveHighlight(){return this.activeHighlight}updatePicked(t,e){this.pickedStates.delete(t),null!=e&&this.pickedStates.set(t,e),this.applyPickedStates()}getActivePicked(){return this.activePicked}applyHighlightStates(){const{activeHighlight:t}=this;this.activeHighlight=Array.from(this.highlightStates.values()).pop(),this.isEqual(this.activeHighlight,t)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:t})}applyPickedStates(){this.activePicked=Array.from(this.pickedStates.values()).pop()}isEqual(t,e){return t===e||(null==t?void 0:t.series)===(null==e?void 0:e.series)&&(null==t?void 0:t.itemId)===(null==e?void 0:e.itemId)&&(null==t?void 0:t.datum)===(null==e?void 0:e.datum)}}const DL=["pagehide","mousemove","mouseup"],AL=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel"];class TL extends bL{constructor(t,e,i){super(),this.eventHandler=t=>this.processEvent(t),this.mouseDown=!1,this.touchDown=!1,this.pausers={animation:0,"context-menu":0},this.rootElement=e.body,this.element=t,this.window=i;for(const e of AL)e.startsWith("touch")?t.addEventListener(e,this.eventHandler,{passive:!0}):"wheel"===e?t.addEventListener(e,this.eventHandler,{passive:!1}):t.addEventListener(e,this.eventHandler);for(const t of DL)this.window.addEventListener(t,this.eventHandler);TL.interactionDocuments.includes(e)||(TP(e,"\n.ag-chart-wrapper {\n    touch-action: none;\n}\n"),TL.interactionDocuments.push(e))}destroy(){for(const t of DL)this.window.removeEventListener(t,this.eventHandler);for(const t of AL)this.element.removeEventListener(t,this.eventHandler)}resume(t){this.pausers[t]--}pause(t){this.pausers[t]++}processEvent(t){const e=this.decideInteractionEventTypes(t);e.length>0&&this.dispatchEvent(t,e).catch(t=>nT.errorOnce(t))}dispatchEvent(t,e){return XA(this,void 0,void 0,(function*(){const i=this.calculateCoordinates(t);if(null==i)return;const n=Object.entries(this.pausers).filter(([,t])=>t>0).map(([t])=>t);for(const o of e)this.listeners.dispatchWrapHandlers(o,(t,e,i)=>{var o;n.length>0&&!(null===(o=null==e?void 0:e.bypassPause)||void 0===o?void 0:o.some(t=>n.includes(t)))||i.consumed||t(i)},this.buildEvent(Object.assign({type:o,event:t,pauses:n},i)))}))}decideInteractionEventTypes(t){switch(t.type){case"click":return["click"];case"dblclick":return["dblclick"];case"contextmenu":return["contextmenu"];case"mousedown":return this.mouseDown=!0,this.dragStartElement=t.target,["drag-start"];case"touchstart":return this.touchDown=!0,this.dragStartElement=t.target,["drag-start"];case"touchmove":case"mousemove":return this.mouseDown||this.touchDown||this.isEventOverElement(t)?this.mouseDown||this.touchDown?["drag"]:["hover"]:[];case"mouseup":return this.mouseDown||this.isEventOverElement(t)?(this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"touchend":return this.touchDown||this.isEventOverElement(t)?(this.touchDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"mouseout":case"touchcancel":return["leave"];case"mouseenter":const e=t instanceof MouseEvent&&1==(1&t.buttons);return this.mouseDown!==e?(this.mouseDown=e,[e?"drag-start":"drag-end"]):[];case"pagehide":return["page-left"];case"wheel":return["wheel"]}return[]}isEventOverElement(t){var e;return t.target===this.element||(null===(e=t.target)||void 0===e?void 0:e.parentElement)===this.element}calculateCoordinates(t){var e;if(t instanceof MouseEvent){const{clientX:e,clientY:i,pageX:n,pageY:o,offsetX:r,offsetY:s}=t;return this.fixOffsets(t,{clientX:e,clientY:i,pageX:n,pageY:o,offsetX:r,offsetY:s})}if("undefined"!=typeof TouchEvent&&t instanceof TouchEvent){const i=null!==(e=t.touches[0])&&void 0!==e?e:t.changedTouches[0],{clientX:n,clientY:o,pageX:r,pageY:s}=i;return Object.assign(Object.assign({},TL.NULL_COORDS),{clientX:n,clientY:o,pageX:r,pageY:s})}if(t instanceof PageTransitionEvent){if(t.persisted)return;return TL.NULL_COORDS}}fixOffsets(t,e){const i=t=>{let e=0,i=0;for(;t;)e+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{x:e,y:i}};if(null!=this.dragStartElement&&t.target!==this.dragStartElement){const n=i(this.dragStartElement),o=i(t.target);e.offsetX-=n.x-o.x,e.offsetY-=n.y-o.y}return e}buildEvent(t){const{type:e,event:i,clientX:n,clientY:o,pauses:r}=t;let{offsetX:s,offsetY:a,pageX:l,pageY:c}=t;if(!ER(s)||!ER(a)){const t=this.element.getBoundingClientRect();s=n-t.left,a=o-t.top}if(!ER(l)||!ER(c)){const t=this.rootElement.getBoundingClientRect();l=n-t.left,c=o-t.top}const d={type:e,offsetX:s,offsetY:a,pageX:l,pageY:c,sourceEvent:i,consumed:!1,pauses:r,consume(){d.consumed=!0}};return d}}TL.interactionDocuments=[],TL.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};class kL{constructor(t,e){this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=t,this.destroyFns.push(e.addListener("hover",t=>this.checkExclusiveRects(t)))}getRange(){return this.tooltip.range}updateTooltip(t,e,i){var n;null==i&&(i=null===(n=this.states[t])||void 0===n?void 0:n.content),this.states[t]={content:i,meta:e},this.applyStates()}updateExclusiveRect(t,e){e?this.exclusiveAreas[t]=e:delete this.exclusiveAreas[t]}removeTooltip(t){delete this.states[t],this.applyStates()}getTooltipMeta(t){var e;return null===(e=this.states[t])||void 0===e?void 0:e.meta}destroy(){for(const t of this.destroyFns)t()}checkExclusiveRects(t){let e;for(const[i,n]of Object.entries(this.exclusiveAreas))if(n.containsPoint(t.offsetX,t.offsetY)){e=i;break}e!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=e,this.applyStates())}applyStates(){var t;const e=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states);let i,n;if(e.reverse(),e.slice(0,1).forEach(t=>{var e;const{content:o,meta:r}=null!==(e=this.states[t])&&void 0!==e?e:{};i=o,n=r}),void 0===n||void 0===i)return this.appliedState=void 0,void this.tooltip.toggle(!1);if((null===(t=this.appliedState)||void 0===t?void 0:t.content)===i){const t=this.tooltip.isVisible();this.tooltip.show(n,void 0,t)}else this.tooltip.show(n,i);this.appliedState={content:i,meta:n}}static makeTooltipMeta(t,e,i,n){var o,r,s,a;const{pageX:l,pageY:c,offsetX:d,offsetY:u}=t,h={xOffset:i.series.tooltip.position.xOffset,yOffset:i.series.tooltip.position.yOffset},p={pageX:l,pageY:c,offsetX:d,offsetY:u,event:t,showArrow:i.series.tooltip.showArrow,position:h},f=null!==(r=null===(o=i.yBar)||void 0===o?void 0:o.upperPoint)&&void 0!==r?r:i.midPoint;if("node"===i.series.tooltip.position.type&&f){const{x:t,y:o}=f,r=i.series.contentGroup.inverseTransformPoint(t,o),s=e.element.getBoundingClientRect();return Object.assign(Object.assign({},p),{pageX:Math.round(s.left+n.scrollX+r.x),pageY:Math.round(s.top+n.scrollY+r.y),offsetX:Math.round(r.x),offsetY:Math.round(r.y)})}return p.enableInteraction=null!==(a=null===(s=i.series.tooltip.interaction)||void 0===s?void 0:s.enabled)&&void 0!==a&&a,p}}class ML extends bL{constructor(){super(...arguments),this.axes={}}updateAxes(t){var e;const i=new Set(Object.keys(this.axes));t.forEach(t=>{var e,n,o;i.delete(t.id),null!==(e=(n=this.axes)[o=t.id])&&void 0!==e||(n[o]=new RL(t))}),i.forEach(t=>{delete this.axes[t]}),(null===(e=this.initialZoom)||void 0===e?void 0:e.newZoom)&&this.updateZoom(this.initialZoom.callerId,this.initialZoom.newZoom),this.initialZoom=void 0}updateZoom(t,e){0!==Object.keys(this.axes).length?(Object.values(this.axes).forEach(i=>{i.updateZoom(t,null==e?void 0:e[i.getDirection()])}),this.applyStates()):this.initialZoom={callerId:t,newZoom:e}}updateAxisZoom(t,e,i){var n;null===(n=this.axes[e])||void 0===n||n.updateZoom(t,i),this.applyStates()}getZoom(){let t,e;if(Object.values(this.axes).forEach(i=>{i.getDirection()===Lk.X?t=i.getZoom():i.getDirection()===Lk.Y&&(e=i.getZoom())}),t||e)return{x:t,y:e}}getAxisZoom(t){var e;return null===(e=this.axes[t])||void 0===e?void 0:e.getZoom()}getAxisZooms(){const t={};for(const[e,i]of Object.entries(this.axes))t[e]={direction:i.getDirection(),zoom:i.getZoom()};return t}applyStates(){if(!Object.values(this.axes).map(t=>t.applyStates()).some(Boolean))return;const t=this.getZoom(),e={};for(const[t,i]of Object.entries(this.axes))e[t]=i.getZoom();this.listeners.dispatch("zoom-change",Object.assign(Object.assign({type:"zoom-change"},null!=t?t:{}),{axes:e}))}}class RL{constructor(t){this.states={},this.axis=t;const[e=0,i=1]=t.visibleRange;this.currentZoom={min:e,max:i},this.states.__initial__=this.currentZoom}getDirection(){return this.axis.direction}updateZoom(t,e){delete this.states[t],null!=e&&(this.states[t]=Object.assign({},e))}getZoom(){return this.currentZoom}applyStates(){var t,e;const i=this.currentZoom,n=Object.keys(this.states)[Object.keys(this.states).length-1];return this.currentZoom=Object.assign({},this.states[n]),(null==i?void 0:i.min)!==(null===(t=this.currentZoom)||void 0===t?void 0:t.min)||(null==i?void 0:i.max)!==(null===(e=this.currentZoom)||void 0===e?void 0:e.max)}}class PL extends qR{constructor(){super(...arguments),this.layoutComplete="layout-complete"}addListener(t,e){if(this.isLayoutStage(t)||this.isLayoutComplete(t))return super.addListener(t,e);throw new Error("AG Charts - unsupported listener type: "+t)}dispatchPerformLayout(t,e){return this.isLayoutStage(t)?this.getListenersByType(t).reduce((t,e)=>{try{return e.handler(t)}catch(e){return nT.errorOnce(e),t}},e):e}dispatchLayoutComplete(t){this.dispatch(this.layoutComplete,t)}isLayoutStage(t){return t!==this.layoutComplete}isLayoutComplete(t){return t===this.layoutComplete}}function NL({orientation:t,bboxes:e,maxHeight:i,maxWidth:n,itemPaddingY:o=0,itemPaddingX:r=0,forceResult:s=!1}){const a="horizontal"===t,l={max:a?n:i,fn:a?t=>t.width:t=>t.height,padding:a?r:o},c={max:a?i:n,fn:a?t=>t.height:t=>t.width,padding:a?o:r};let d=0;const u=[];for(;d<e.length;){const t=LL(e.slice(d),d,l,c,s);if(!t)return;d+=t.processedBBoxCount,u.push(t.pageIndices)}return function(t,e,i,n,o){let r=0,s=0;return{pages:t.map(t=>{"horizontal"===e&&(t=function(t){const e=[];for(const i of t[0])e.push([]);return t.forEach((t,i)=>{t.forEach((t,n)=>{e[n][i]=t})}),e}(t));let a=0;const l=t.map(t=>{const e=t.map(t=>(a=Math.max(t,a),i[t]));let r=0,s=0;return e.forEach(t=>{r+=t.height+n,s=Math.max(s,t.width+o)}),{indices:t,bboxes:e,columnHeight:Math.ceil(r),columnWidth:Math.ceil(s)}});let c=0,d=0;return l.forEach(t=>{c+=t.columnWidth,d=Math.max(d,t.columnHeight)}),r=Math.max(c,r),s=Math.max(d,s),{columns:l,startIndex:t[0][0],endIndex:a,pageWidth:c,pageHeight:d}}),maxPageWidth:r,maxPageHeight:s}}(u,t,e,o,r)}function LL(t,e,i,n,o){let r=function(t,e){const i=t.length;let n=0;for(let o=0;o<i;o++)if(n+=e.fn(t[o])+e.padding,n>e.max){return i/o<2?Math.ceil(i/2):o}return i}(t,i);if(r<1){if(!o)return;r=1}for(let s=r;s>=1;s--){const r=IL(t,e,s,i,n,o);if(null==r&&s<=1)return;if(null==r)continue;if("number"==typeof r){if(r<=1)return;s=r<s&&r>1?r:s;continue}return{processedBBoxCount:r.length*r[0].length,pageIndices:r}}}function IL(t,e,i,n,o,r){var s;const a=[];let l=0,c=0,d=[];const u=[];for(let h=0;h<t.length;h++){const p=(h+i)%i;0===p&&(l+=c,c=0,d.length>0&&a.push(d),d=[]);const f=n.fn(t[h])+n.padding;u[p]=Math.max(null!==(s=u[p])&&void 0!==s?s:0,f),c=Math.max(c,o.fn(t[h])+o.padding);const g=l+c,v=!r||a.length>0;if(g>o.max&&v){d=[];break}if(u.reduce((t,e)=>t+e,0)>n.max&&!r)return u.length<i?u.length:void 0;d.push(h+e)}return d.length>0&&a.push(d),a.length>0?a:void 0}class FL extends UR{updatePath(){const t=this.size/4.2;super.applyPath(t,FL.moves)}}FL.className="Cross",FL.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}];class _L extends UR{updatePath(){const t=this.size/2;super.applyPath(t,_L.moves)}}_L.className="Diamond",_L.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}];class GL extends UR{rad(t){return t/180*Math.PI}updatePath(){const{x:t,path:e,size:i,rad:n}=this,o=i/4,r=this.y+o/2;e.clear(),e.arc(t-o,r-o,o,n(130),n(330)),e.arc(t+o,r-o,o,n(220),n(50)),e.lineTo(t,r+o),e.closePath()}}GL.className="Heart";class BL extends UR{updatePath(){const t=this.size/3;super.applyPath(t,BL.moves)}}BL.className="Plus",BL.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];class VL extends UR{updatePath(){const{path:t,x:e,y:i}=this,n=this.size/2;t.clear(),t.moveTo(this.align(e-n),this.align(i-n)),t.lineTo(this.align(e+n),this.align(i-n)),t.lineTo(this.align(e+n),this.align(i+n)),t.lineTo(this.align(e-n),this.align(i+n)),t.closePath()}}VL.className="Square";class jL extends UR{updatePath(){const t=1.1*this.size;super.applyPath(t,jL.moves)}}jL.className="Triangle",jL.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];const WL={circle:HR,cross:FL,diamond:_L,heart:GL,plus:BL,square:VL,triangle:jL},zL=Object.keys(WL);function UL(t){return zL.includes(t)}function HL(t=VL){return UL(t)?WL[t]:"function"==typeof t?t:VL}class KL extends ZM{constructor(){super({name:"markerLabelGroup"}),this.label=new eM,this._marker=new VL,this._markerSize=15,this._spacing=8;const t=this.label;t.textBaseline="middle",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.y=$k.has.textMetrics?1:0,this.append([this.marker,t]),this.update()}set marker(t){this._marker!==t&&(this.removeChild(this._marker),this._marker=t,this.appendChild(t),this.update())}get marker(){return this._marker}set markerSize(t){this._markerSize!==t&&(this._markerSize=t,this.update())}get markerSize(){return this._markerSize}set spacing(t){this._spacing!==t&&(this._spacing=t,this.update())}get spacing(){return this._spacing}update(){const t=this.marker,e=this.markerSize;t.size=e,this.label.x=e/2+this.spacing}render(t){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,super.render(t)}}KL.className="MarkerLabel",KA([lM("label"),YA("design:type",String)],KL.prototype,"text",void 0),KA([lM("label"),YA("design:type",String)],KL.prototype,"fontStyle",void 0),KA([lM("label"),YA("design:type",String)],KL.prototype,"fontWeight",void 0),KA([lM("label"),YA("design:type",Number)],KL.prototype,"fontSize",void 0),KA([lM("label"),YA("design:type",String)],KL.prototype,"fontFamily",void 0),KA([lM("label","fill"),YA("design:type",String)],KL.prototype,"color",void 0),KA([lM("marker","fill"),YA("design:type",String)],KL.prototype,"markerFill",void 0),KA([lM("marker","stroke"),YA("design:type",String)],KL.prototype,"markerStroke",void 0),KA([lM("marker","strokeWidth"),YA("design:type",Number)],KL.prototype,"markerStrokeWidth",void 0),KA([lM("marker","fillOpacity"),YA("design:type",Number)],KL.prototype,"markerFillOpacity",void 0),KA([lM("marker","strokeOpacity"),YA("design:type",Number)],KL.prototype,"markerStrokeOpacity",void 0);class YL{constructor(){this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}}KA([PT(QT),YA("design:type",String)],YL.prototype,"color",void 0),KA([PT(fk),YA("design:type",String)],YL.prototype,"fontStyle",void 0),KA([PT(vk),YA("design:type",String)],YL.prototype,"fontWeight",void 0),KA([PT(ok(0)),YA("design:type",Number)],YL.prototype,"fontSize",void 0),KA([PT(KT),YA("design:type",String)],YL.prototype,"fontFamily",void 0);class XL{constructor(){this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}}KA([PT(ok(0)),YA("design:type",Object)],XL.prototype,"size",void 0),KA([PT(tk),YA("design:type",String)],XL.prototype,"fill",void 0),KA([PT(rk(0,1)),YA("design:type",Number)],XL.prototype,"fillOpacity",void 0),KA([PT(tk),YA("design:type",String)],XL.prototype,"stroke",void 0),KA([PT(ok(0)),YA("design:type",Number)],XL.prototype,"strokeWidth",void 0),KA([PT(ok(0,1)),YA("design:type",Number)],XL.prototype,"strokeOpacity",void 0);class qL{constructor(t){this.parent=t,this.shape=jL,this.size=15,this.padding=8}}KA([cM({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}}),YA("design:type",Object)],qL.prototype,"shape",void 0),KA([PT(ok(0)),YA("design:type",Object)],qL.prototype,"size",void 0),KA([PT(ok(0)),YA("design:type",Number)],qL.prototype,"padding",void 0);class $L{constructor(t,e,i,n){this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.interactionManager=i,this.cursorManager=n,this.id=Vk(this),this.group=new ZM({name:"pagination"}),this.labelNode=new eM,this.marker=new qL(this),this.activeStyle=new XL,this.inactiveStyle=new XL,this.highlightStyle=new XL,this.label=new YL,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new jL,this._previousButton=new jL;const{labelNode:o}=this;o.textBaseline="middle",o.fontSize=12,o.fontFamily="Verdana, sans-serif",o.fill="black",o.y=$k.has.textMetrics?1:0,this.group.append([this.nextButton,this.previousButton,o]),this.interactionManager.addListener("click",t=>this.onPaginationClick(t)),this.interactionManager.addListener("hover",t=>this.onPaginationMouseMove(t)),this.update(),this.updateMarkers()}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(t){switch(this._orientation=t,t){case"horizontal":this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break;case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}set nextButton(t){this._nextButton!==t&&(this.group.removeChild(this._nextButton),this._nextButton=t,this.group.appendChild(t))}get nextButton(){return this._nextButton}set previousButton(t){this._previousButton!==t&&(this.group.removeChild(this._previousButton),this._previousButton=t,this.group.appendChild(t))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:t,padding:e}=this.marker;this.nextButton.size=t,this.previousButton.size=t,this.labelNode.x=t/2+e}updateNextButtonPosition(){const t=this.labelNode.computeBBox();this.nextButton.translationX=t.x+t.width+this.marker.size/2+this.marker.padding}updateLabel(){const{currentPage:t,totalPages:e,labelNode:i,label:{color:n,fontStyle:o,fontWeight:r,fontSize:s,fontFamily:a}}=this;i.text=`${t+1} / ${e}`,i.fill=n,i.fontStyle=o,i.fontWeight=r,i.fontSize=s,i.fontFamily=a}updateMarkers(){const{nextButton:t,previousButton:e,nextButtonDisabled:i,previousButtonDisabled:n,activeStyle:o,inactiveStyle:r,highlightStyle:s,highlightActive:a}=this,l=(t,e)=>e?r:t===a?s:o;this.updateMarker(t,l("next",i)),this.updateMarker(e,l("previous",n))}updateMarker(t,e){var i;const{size:n}=this.marker;t.size=n,t.fill=e.fill,t.fillOpacity=null!==(i=e.fillOpacity)&&void 0!==i?i:1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity}enableOrDisableButtons(){const{currentPage:t,totalPages:e}=this,i=0===e,n=t===e-1,o=0===t;this.nextButtonDisabled=n||i,this.previousButtonDisabled=o||i}nextButtonContainsPoint(t,e){return!this.nextButtonDisabled&&this.nextButton.containsPoint(t,e)}previousButtonContainsPoint(t,e){return!this.previousButtonDisabled&&this.previousButton.containsPoint(t,e)}onPaginationClick(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.incrementPage(),this.onPaginationChanged(),t.consume()):this.previousButtonContainsPoint(e,i)&&(this.decrementPage(),this.onPaginationChanged(),t.consume())}onPaginationMouseMove(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(uL.SCENE_RENDER)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const t=HL(this.marker.shape||jL);this.previousButton=new t,this.nextButton=new t,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(uL.SCENE_RENDER)}attachPagination(t){t.append(this.group)}computeBBox(){return this.group.computeBBox()}}$L.className="Pagination";const ZL=["horizontal","vertical"],JL=LT((t,e)=>IT(t,e,t=>ZL.includes(t)),"expecting an orientation keyword such as 'horizontal' or 'vertical'");class QL{constructor(){this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}}KA([PT(rk(0)),YA("design:type",Number)],QL.prototype,"maxLength",void 0),KA([PT(QT),YA("design:type",String)],QL.prototype,"color",void 0),KA([PT(fk),YA("design:type",String)],QL.prototype,"fontStyle",void 0),KA([PT(vk),YA("design:type",String)],QL.prototype,"fontWeight",void 0),KA([PT(ok(0)),YA("design:type",Number)],QL.prototype,"fontSize",void 0),KA([PT(KT),YA("design:type",String)],QL.prototype,"fontFamily",void 0),KA([PT(zT),YA("design:type",Function)],QL.prototype,"formatter",void 0);class tI{constructor(){this.size=15,this._shape=void 0,this.padding=8,this.strokeWidth=void 0}set shape(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()}get shape(){return this._shape}}KA([PT(ok(0)),YA("design:type",Object)],tI.prototype,"size",void 0),KA([PT(ok(0)),YA("design:type",Number)],tI.prototype,"padding",void 0),KA([PT(rk(0)),YA("design:type",Object)],tI.prototype,"strokeWidth",void 0);class eI{constructor(){this.marker=new tI,this.label=new QL,this.maxWidth=void 0,this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0}}KA([PT(rk(0)),YA("design:type",Number)],eI.prototype,"maxWidth",void 0),KA([PT(ok(0)),YA("design:type",Object)],eI.prototype,"paddingX",void 0),KA([PT(ok(0)),YA("design:type",Object)],eI.prototype,"paddingY",void 0),KA([PT(UT),YA("design:type",Boolean)],eI.prototype,"toggleSeriesVisible",void 0);class iI{constructor(){this.legendItemClick=void 0,this.legendItemDoubleClick=void 0}}KA([PT(zT),YA("design:type",Function)],iI.prototype,"legendItemClick",void 0);class nI{set data(t){this._data=t,this.updateGroupVisibility()}get data(){return this._data}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}getOrientation(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}constructor(t){this.ctx=t,this.id=Vk(this),this.group=new ZM({name:"legend",layer:!0,zIndex:zR.LEGEND_ZINDEX}),this.itemSelection=JM.select(this.group,KL),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.item=new eI,this.listeners=new iI,this.truncatedItems=new Set,this._data=[],this._enabled=!0,this.position="bottom",this.maxWidth=void 0,this.maxHeight=void 0,this.reverseOrder=void 0,this.destroyFns=[],this.spacing=20,this.characterWidths=new Map,this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new $L(e=>t.updateService.update(e),t=>this.updatePageNumber(t),t.interactionManager,t.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;const e={bypassPause:["animation"]};this.destroyFns.push(t.interactionManager.addListener("click",t=>this.checkLegendClick(t),e),t.interactionManager.addListener("dblclick",t=>this.checkLegendDoubleClick(t),e),t.interactionManager.addListener("hover",t=>this.handleLegendMouseMove(t)),t.layoutService.addListener("start-layout",t=>this.positionLegend(t.shrinkRect)),()=>this.detachLegend())}destroy(){this.destroyFns.forEach(t=>t())}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,Ik.MINOR)}getCharacterWidths(t){const{characterWidths:e}=this;if(e.has(t))return e.get(t);const i={"...":$k.getTextSize("...",t).width};return e.set(t,i),i}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.append(this.group)}detachLegend(){var t;null===(t=this.group.parent)||void 0===t||t.removeChild(this.group)}getItemLabel(t){const{ctx:{callbackCache:e}}=this,{formatter:i}=this.item.label;return i?e.call(i,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text}performLayout(t,e){const{paddingX:i,paddingY:n,label:o,maxWidth:r,marker:{size:s,padding:a,shape:l},label:{maxLength:c=1/0,fontStyle:d,fontWeight:u,fontSize:h,fontFamily:p}}=this.item,f=[...this.data];this.reverseOrder&&f.reverse(),this.itemSelection.update(f);const g=[],v=iM(o),y=null!=r?r:.8*t,m=s+a+i;if(this.itemSelection.each((t,e)=>{var i;const n=HL(null!=l?l:e.marker.shape);t.marker&&t.marker instanceof n||(t.marker=new n),t.markerSize=s,t.spacing=a,t.fontStyle=d,t.fontWeight=u,t.fontSize=h,t.fontFamily=p;const o=null!==(i=e.itemId)&&void 0!==i?i:e.id,r=this.getItemLabel(e),f=(null!=r?r:"<unknown>").replace(/\r?\n/g," ");t.text=this.truncate(f,c,y,m,v,o),g.push(t.computeBBox())}),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return!1;const b=this.size,S=this.oldSize;b[0]=t,b[1]=e,b[0]===S[0]&&b[1]===S[1]||(S[0]=b[0],S[1]=b[1]);const{pages:x,maxPageHeight:C,maxPageWidth:w}=this.updatePagination(g,t,e);this.pages=x,this.maxPageSize=[w-i,C-n];const E=this.pagination.currentPage,O=this.pages[E];this.pages.length<1||!O?this.visible=!1:(this.visible=!0,this.updatePositions(E),this.update())}truncate(t,e,i,n,o,r){const s=t.split("");let a=!1;t.length>e&&(t=""+t.substring(0,e),a=!0);if(Math.floor(n+$k.getTextSize(t,o).width)>i){let e="";const r=this.getCharacterWidths(o);let l=n+r["..."];for(const t of s){if(r[t]||(r[t]=$k.getTextSize(t,o).width),l+=r[t],l>i)break;e+=t}t=e,a=!0}return a?(t+="...",this.truncatedItems.add(r)):this.truncatedItems.delete(r),t}updatePagination(t,e,i){const n=this.getOrientation(),o=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=n,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:r,maxPageHeight:s,maxPageWidth:a,paginationBBox:l,paginationVertical:c}=this.calculatePagination(t,e,i),d=r.findIndex(t=>t.endIndex>=o);this.pagination.currentPage=Math.min(Math.max(d,0),r.length-1);const{paddingX:u,paddingY:h}=this.item,p=a-u,f=s-h;let g=0,v=-l.y-this.item.marker.size/2;return c?v+=f+8:(g+=-l.x+p+8,v+=(f-l.height)/2),this.pagination.translationX=g,this.pagination.translationY=v,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:s,maxPageWidth:a,pages:r}}calculatePagination(t,e,i){var n,o,r;const{paddingX:s,paddingY:a}=this.item,l=this.getOrientation(),c=["left","right"].includes(this.position);let d=this.pagination.computeBBox(),u=new Wk(0,0,0,0),h=[],p=0,f=0,g=0;const v=t=>{const{width:e,height:i}=t;return e===d.width&&i===d.height},y=void 0!==this.maxWidth||void 0!==this.maxHeight;do{if(g++>10){nT.warn("unable to find stable legend layout.");break}d=u;const v=e-(c?0:d.width),m=NL({orientation:l,bboxes:t,maxHeight:i-(c?d.height:0),maxWidth:v,itemPaddingY:a,itemPaddingX:s,forceResult:y});h=null!==(n=null==m?void 0:m.pages)&&void 0!==n?n:[],p=null!==(o=null==m?void 0:m.maxPageWidth)&&void 0!==o?o:0,f=null!==(r=null==m?void 0:m.maxPageHeight)&&void 0!==r?r:0;const b=h.length;if(this.pagination.visible=b>1,this.pagination.totalPages=b,this.pagination.update(),u=this.pagination.computeBBox(),!this.pagination.visible)break}while(!v(u));return{maxPageWidth:p,maxPageHeight:f,pages:h,paginationBBox:d,paginationVertical:c}}updatePositions(t=0){const{item:{paddingY:e},itemSelection:i,pages:n}=this;if(n.length<1||!n[t])return;const{columns:o,startIndex:r,endIndex:s}=n[t];let a=0,l=0;const c=o.length,d=o[0].indices.length,u="horizontal"===this.getOrientation(),h=o[0].bboxes[0].height+e,p=[];i.each((t,e,i)=>{var n,f;if(i<r||i>s)return void(t.visible=!1);const g=i-r;let v=0,y=0;u?(v=g%c,y=Math.floor(g/c)):(v=Math.floor(g/d),y=g%d),t.visible=!0;const m=o[v];m&&(l=h*y,a=null!==(n=p[y])&&void 0!==n?n:0,p[y]=(null!==(f=p[y])&&void 0!==f?f:0)+m.columnWidth,t.translationX=Math.floor(a),t.translationY=Math.floor(l))})}updatePageNumber(t){const{pages:e}=this,{startIndex:i,endIndex:n}=e[t];0===i?this.paginationTrackingIndex=0:t===e.length-1?this.paginationTrackingIndex=n:this.paginationTrackingIndex=Math.floor((i+n)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.ctx.updateService.update(uL.SCENE_RENDER)}update(){const{label:{color:t},marker:e}=this.item;this.itemSelection.each((i,n)=>{var o;const r=n.marker;i.markerFill=r.fill,i.markerStroke=r.stroke,i.markerStrokeWidth=null!==(o=e.strokeWidth)&&void 0!==o?o:Math.min(2,r.strokeWidth),i.markerFillOpacity=r.fillOpacity,i.markerStrokeOpacity=r.strokeOpacity,i.opacity=n.enabled?1:.5,i.color=t})}getDatumForPoint(t,e){const i=[],n={dist:1/0,datum:void 0};for(const o of this.group.children){if(!o.visible)continue;if(!(o instanceof KL))continue;const r=o.computeBBox();if(r.grow(this.item.paddingX/2,"horizontal"),r.grow(this.item.paddingY/2,"vertical"),r.containsPoint(t,e))return o.datum;const s=t-r.x-this.item.paddingX/2,a=e-r.y-this.item.paddingY/2,l=Math.pow(s,2)+Math.pow(a,2);s>=0&&a>=0&&l<n.dist&&(n.dist=l,n.datum=o.datum),i.push(r)}if(Wk.merge(i).containsPoint(t,e))return n.datum}computeBBox(){return this.group.computeBBox()}computePagedBBox(){const t=this.group.computeBBox();if(this.pages.length<=1)return t;const[e,i]=this.maxPageSize;return t.height=Math.max(i,t.height),t.width=Math.max(e,t.width),t}checkLegendClick(t){const{listeners:{legendItemClick:e},ctx:{dataService:i,highlightManager:n},item:{toggleSeriesVisible:o}}=this,{offsetX:r,offsetY:s}=t,a=this.computeBBox(),l=this.group.visible&&a.containsPoint(r,s),c=this.getDatumForPoint(r,s);if(!l||!c)return;const{id:d,itemId:u,enabled:h}=c,p=i.getSeries().find(t=>t.id===d);if(!p)return;t.consume();let f=h;o&&(f=!h,this.ctx.chartEventManager.legendItemClick(p,u,f,c.legendItemName)),f?n.updateHighlight(this.id,{series:p,itemId:u,datum:void 0}):n.updateHighlight(this.id),this.ctx.updateService.update(uL.PROCESS_DATA,{forceNodeDataRefresh:!0}),null==e||e({type:"click",enabled:f,itemId:u,seriesId:p.id})}checkLegendDoubleClick(t){var e;const{listeners:{legendItemDoubleClick:i},ctx:{dataService:n},item:{toggleSeriesVisible:o}}=this,{offsetX:r,offsetY:s}=t;if("integrated"===this.ctx.mode)return;const a=this.computeBBox(),l=this.group.visible&&a.containsPoint(r,s),c=this.getDatumForPoint(r,s);if(!l||!c)return;const{id:d,itemId:u,seriesId:h}=c,p=n.getSeries(),f=p.find(t=>t.id===d);if(f){if(t.consume(),o){const t={},i=p.flatMap(t=>t.getLegendData("category"));i.forEach(e=>{var i,n;null!==(i=t[n=e.seriesId])&&void 0!==i||(t[n]=0),e.enabled&&t[e.seriesId]++});const n=i.find(t=>t.itemId===u&&t.seriesId===h);this.ctx.chartEventManager.legendItemDoubleClick(f,u,null!==(e=null==n?void 0:n.enabled)&&void 0!==e&&e,t,null==n?void 0:n.legendItemName)}this.ctx.updateService.update(uL.PROCESS_DATA,{forceNodeDataRefresh:!0}),null==i||i({type:"dblclick",enabled:!0,itemId:u,seriesId:f.id})}}handleLegendMouseMove(t){var e;const{enabled:i,item:{toggleSeriesVisible:n},listeners:o}=this;if(!i)return;const r=this.computeBBox(),{pageX:s,pageY:a,offsetX:l,offsetY:c}=t,d=this.group.visible&&r.containsPoint(l,c);if(!d)return this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),void this.ctx.tooltipManager.removeTooltip(this.id);t.consume();const u=this.getDatumForPoint(l,c);if(!(d&&void 0!==u))return this.ctx.cursorManager.updateCursor(this.id),void this.ctx.highlightManager.updateHighlight(this.id);const h=u?this.ctx.dataService.getSeries().find(t=>t.id===(null==u?void 0:u.id)):void 0;u&&this.truncatedItems.has(null!==(e=u.itemId)&&void 0!==e?e:u.id)?this.ctx.tooltipManager.updateTooltip(this.id,{pageX:s,pageY:a,offsetX:l,offsetY:c,event:t,showArrow:!1},kP({content:this.getItemLabel(u)})):this.ctx.tooltipManager.removeTooltip(this.id),(n||null!=o.legendItemClick||null!=o.legendItemDoubleClick)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),(null==u?void 0:u.enabled)&&h?this.ctx.highlightManager.updateHighlight(this.id,{series:h,itemId:null==u?void 0:u.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}positionLegend(t){const e=t.clone();if(!this.enabled||!this.data.length)return{shrinkRect:e};const[i,n]=this.calculateLegendDimensions(t);this.group.translationX=0,this.group.translationY=0,this.performLayout(i,n);const o=this.computePagedBBox(),r=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return t.height-o.height;case"right":default:return t.width-o.width}};if(this.visible){let i,n;switch(this.position){case"top":case"bottom":i=(t.width-o.width)/2,n=r(),e.shrink(o.height,this.position);break;case"left":case"right":default:i=r(),n=(t.height-o.height)/2,e.shrink(o.width,this.position)}this.group.translationX=Math.floor(-o.x+t.x+i),this.group.translationY=Math.floor(-o.y+t.y+n)}if(this.visible&&this.enabled&&this.data.length){const t=this.spacing;e.shrink(t,this.position);const i=o.clone();i.x+=this.group.translationX,i.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,i)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:e}}calculateLegendDimensions(t){const{width:e,height:i}=t,n=e/i;let o,r;switch(this.position){case"top":case"bottom":const t=n<1?Math.min(.5,1/n*.2):.2;o=this.maxWidth?Math.min(this.maxWidth,e):e,r=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*t);break;case"left":case"right":default:const s=n>1?Math.min(.5,.25*n):.25;o=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*s),r=this.maxHeight?Math.min(this.maxHeight,i):i}return[o,r]}}nI.className="Legend",KA([PT(UT),YA("design:type",Object)],nI.prototype,"_enabled",void 0),KA([PT(Ek),YA("design:type",String)],nI.prototype,"position",void 0),KA([PT(rk(0)),YA("design:type",Number)],nI.prototype,"maxWidth",void 0),KA([PT(rk(0)),YA("design:type",Number)],nI.prototype,"maxHeight",void 0),KA([PT(HT),YA("design:type",Boolean)],nI.prototype,"reverseOrder",void 0),KA([PT(JL),YA("design:type",String)],nI.prototype,"orientation",void 0),KA([PT(ok(0)),YA("design:type",Object)],nI.prototype,"spacing",void 0);class oI{constructor(t,e,i){this.text=void 0,this.className=t,this.parentElement=e,this.document=i}show(t){var e,i;let n=this.element;if(n||(n=this.document.createElement("div"),n.className=this.className,this.element=n),n.style.position="absolute",n.style.left=t.x+"px",n.style.top=t.y+"px",n.style.width=t.width+"px",n.style.height=t.height+"px",this.renderer)n.innerHTML=this.renderer();else{const t=this.document.createElement("div");t.style.alignItems="center",t.style.boxSizing="border-box",t.style.display="flex",t.style.justifyContent="center",t.style.margin="8px",t.style.height="100%",t.style.font="12px Verdana, sans-serif",t.innerText=null!==(e=this.text)&&void 0!==e?e:"No data to display",n.append(t)}null===(i=this.parentElement)||void 0===i||i.append(n)}hide(){var t;null===(t=this.element)||void 0===t||t.remove(),this.element=void 0}}KA([PT(zT),YA("design:type",Function)],oI.prototype,"renderer",void 0),KA([PT(YT),YA("design:type",String)],oI.prototype,"text",void 0);class rI{constructor(t){this.noData=new oI("ag-chart-no-data-overlay",t,t.ownerDocument)}}class sI{constructor(t){this.groups={},this.series={},this.expectedSeriesCount=1,this.mode="normal",this.rootGroup=t}setSeriesCount(t){this.expectedSeriesCount=t}requestGroup(t){var e,i,n,o;const{id:r,type:s,rootGroup:a,highlightGroup:l,annotationGroup:c,seriesGrouping:d}=t,{groupIndex:u=r}=null!=d?d:{};if(null!=this.series[r])throw new Error("AG Charts - series already has an allocated layer: "+this.series[r]);0===Object.keys(this.series).length&&(this.mode=this.expectedSeriesCount>=30?"aggressive-grouping":"normal"),null!==(e=(n=this.groups)[s])&&void 0!==e||(n[s]={});const h=this.lookupIdx(u);let p=this.groups[s][h];return p||(p=null!==(i=(o=this.groups[s])[h])&&void 0!==i?i:o[h]={seriesIds:[],group:this.rootGroup.appendChild(new ZM({name:s+"-content",layer:!0,zIndex:zR.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("data")})),highlight:this.rootGroup.appendChild(new ZM({name:s+"-highlight",layer:!0,zIndex:zR.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("highlight")})),annotation:this.rootGroup.appendChild(new ZM({name:s+"-annotation",layer:!0,zIndex:zR.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("annotation")}))}),this.series[r]={layerState:p,seriesConfig:t},p.seriesIds.push(r),p.group.appendChild(a),p.highlight.appendChild(l),p.annotation.appendChild(c),p.group}changeGroup(t){var e,i;const{id:n,seriesGrouping:o,type:r,rootGroup:s,highlightGroup:a,annotationGroup:l,oldGrouping:c}=t,{groupIndex:d=n}=null!=o?o:{};(null===(i=null===(e=this.groups[r])||void 0===e?void 0:e[d])||void 0===i?void 0:i.seriesIds.includes(n))||(null!=this.series[n]&&this.releaseGroup({id:n,seriesGrouping:c,type:r,rootGroup:s,highlightGroup:a,annotationGroup:l}),this.requestGroup(t))}releaseGroup(t){var e,i,n,o,r;const{id:s,seriesGrouping:a,rootGroup:l,highlightGroup:c,annotationGroup:d,type:u}=t,{groupIndex:h=s}=null!=a?a:{};if(null==this.series[s])throw new Error("AG Charts - series doesn't have an allocated layer: "+s);const p=this.lookupIdx(h),f=null!==(i=null===(e=this.groups[u])||void 0===e?void 0:e[p])&&void 0!==i?i:null===(n=this.series[s])||void 0===n?void 0:n.layerState;if(f&&(f.seriesIds=f.seriesIds.filter(t=>t!==s),f.group.removeChild(l),f.highlight.removeChild(c),f.annotation.removeChild(d)),0===(null==f?void 0:f.seriesIds.length))this.rootGroup.removeChild(f.group),this.rootGroup.removeChild(f.highlight),this.rootGroup.removeChild(f.annotation),delete this.groups[u][p],delete this.groups[u][s];else if((null==f?void 0:f.seriesIds.length)>0){const t=null===(r=this.series[null===(o=null==f?void 0:f.seriesIds)||void 0===o?void 0:o[0]])||void 0===r?void 0:r.seriesConfig;f.group.zIndexSubOrder=null==t?void 0:t.getGroupZIndexSubOrder("data"),f.highlight.zIndexSubOrder=null==t?void 0:t.getGroupZIndexSubOrder("highlight"),f.annotation.zIndexSubOrder=null==t?void 0:t.getGroupZIndexSubOrder("annotation")}delete this.series[s]}lookupIdx(t){return"normal"===this.mode?t:"string"!=typeof t||(t=Number(t.split("-").slice(-1)[0]))?Math.floor(30*Math.max(Math.min(t/this.expectedSeriesCount,1),0)):0}destroy(){for(const t of Object.values(this.groups))for(const e of Object.values(t))this.rootGroup.removeChild(e.group),this.rootGroup.removeChild(e.highlight),this.rootGroup.removeChild(e.annotation);this.groups={},this.series={}}}class aI{constructor(){this.groups={}}registerSeries({id:t,seriesGrouping:e,visible:i,type:n}){var o,r;e&&(null!==(o=(r=this.groups)[n])&&void 0!==o||(r[n]={}),this.groups[n][t]={grouping:e,visible:i})}deregisterSeries({id:t,type:e}){this.groups[e]&&delete this.groups[e][t],this.groups[e]&&0===Object.keys(this.groups[e]).length&&delete this.groups[e]}getVisiblePeerGroupIndex({type:t,seriesGrouping:e}){var i;if(!e)return{visibleGroupCount:1,index:0};const n=[...Object.entries(null!==(i=this.groups[t])&&void 0!==i?i:{}).filter(([t,e])=>e.visible).reduce((t,[e,i])=>(i.visible&&t.add(i.grouping.groupIndex),t),new Set).values()];return n.sort((t,e)=>t-e),{visibleGroupCount:n.length,index:n.indexOf(e.groupIndex)}}}class lI{constructor(t,e){this.chartLike=t,this.layoutService=e,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("layout-complete",t=>this.layoutComplete(t)),this.layoutService.addListener("start-layout",t=>this.positionPadding(t.shrinkRect)),this.layoutService.addListener("start-layout",t=>this.positionCaptions(t.shrinkRect)))}destroy(){this.destroyFns.forEach(t=>t())}layoutComplete({clipSeries:t,series:{paddedRect:e}}){const{seriesArea:i,seriesRoot:n}=this.chartLike;i.clip||t?n.setClipRectInGroupCoordinateSpace(e):n.setClipRectInGroupCoordinateSpace()}positionPadding(t){const{padding:e}=this.chartLike;return t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),{shrinkRect:t}}positionCaptions(t){var e,i,n,o;const{title:r,subtitle:s,footnote:a}=this.chartLike,l=t.clone(),c=e=>{var i;const n=t.height/10,o=null!==(i=e.lineHeight)&&void 0!==i?i:e.fontSize*eM.defaultLineHeightRatio,r=t.width,s=Math.max(o,n);e.computeTextWrap(r,s)},d=(t,e)=>{const i=l.y;t.node.x=l.x+l.width/2,t.node.y=i,t.node.textBaseline="top",c(t);const n=t.node.computeBBox(),o=Math.ceil(n.y-i+n.height+e);l.shrink(o,"top")};if(s&&(s.node.visible=null!==(e=s.enabled)&&void 0!==e&&e),r&&(r.node.visible=r.enabled,r.node.visible)){const t=(null==s?void 0:s.node.visible)?dM.SMALL_PADDING:dM.LARGE_PADDING;d(r,null!==(i=r.spacing)&&void 0!==i?i:t)}return s&&s.node.visible&&d(s,null!==(n=s.spacing)&&void 0!==n?n:0),a&&(a.node.visible=a.enabled,a.node.visible&&((t,e)=>{const i=l.y+l.height;t.node.x=l.x+l.width/2,t.node.y=i,t.node.textBaseline="bottom",c(t);const n=t.node.computeBBox(),o=Math.ceil(i-n.y+e);l.shrink(o,"bottom")})(a,null!==(o=a.spacing)&&void 0!==o?o:0)),{shrinkRect:l}}}class cI extends qR{constructor(t){super(),this.updateCallback=t}update(t=uL.FULL,{forceNodeDataRefresh:e=!1,skipAnimations:i=!1}={}){this.updateCallback(t,{forceNodeDataRefresh:e,skipAnimations:i})}dispatchUpdateComplete(t){const e={type:"update-complete",minRect:t};this.dispatch("update-complete",e)}}function dI(t){let e,i;if(null!=t.window)e=t.window;else if("undefined"!=typeof window)e=window;else{if("undefined"==typeof global)throw new Error("AG Charts - unable to resolve global window");e=global.window}if(null!=t.document)i=t.document;else if("undefined"!=typeof document)i=document;else{if("undefined"==typeof global)throw new Error("AG Charts - unable to resolve global document");i=global.document}return{document:i,window:e,overrideDevicePixelRatio:t.overrideDevicePixelRatio,sceneMode:t.sceneMode}}class uI{constructor(){this.clip=void 0,this.padding=new CN(0)}}KA([PT(HT),YA("design:type",Boolean)],uI.prototype,"clip",void 0);class hI extends $R{getOptions(){var t;const{queuedUserOptions:e}=this;return gT([null!==(t=e[e.length-1])&&void 0!==t?t:this.userOptions])}autoSizeChanged(t){const{style:e}=this.element;if(t){if(e.display="block",e.width="100%",e.height="100%",!this._lastAutoSize)return;this.resize(void 0,void 0,"autoSize option")}else e.display="inline-block",e.width="auto",e.height="auto"}download(t,e){this.scene.download(t,e)}get destroyed(){return this._destroyed}constructor(t,e){var i;super(),this.id=Vk(this),this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this.seriesRoot=new ZM({name:this.id+"-Series-root"}),this.debug=sT.create(),this.extraDebugStats={},this.container=void 0,this.data=[],this._firstAutoSize=!0,this.padding=new CN(20),this.seriesArea=new uI,this.title=void 0,this.subtitle=void 0,this.footnote=void 0,this.mode="standalone",this._destroyed=!1,this._destroyFns=[],this.modules={},this.legendModules={},this.processors=[],this.legends=new Map,this._pendingFactoryUpdatesCount=0,this._performUpdateNoRenderCount=0,this._performUpdateType=uL.NONE,this._performUpdateSkipAnimations=!1,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new aL,this.updateRequestors={},this.performUpdateTrigger=lL((t,e=0)=>setTimeout(t,e),({count:t})=>XA(this,void 0,void 0,(function*(){this._destroyed||this.updateMutex.acquire(()=>XA(this,void 0,void 0,(function*(){try{yield this.performUpdate(t)}catch(t){this._lastPerformUpdateError=t,nT.error("update error",t)}})))}))),this._axes=[],this._series=[],this.lastInteractionEvent=void 0,this.pointerScheduler=function(t){return lL((t,e)=>requestAnimationFrame(t),t)}(()=>{this.lastInteractionEvent&&this.handlePointer(this.lastInteractionEvent),this.lastInteractionEvent=void 0}),this.onSeriesNodeClick=t=>{const e=Object.assign(Object.assign({},t),{type:"seriesNodeClick"});Object.defineProperty(e,"series",{enumerable:!1,get:()=>t.series}),this.fireEvent(e)},this.onSeriesNodeDoubleClick=t=>{const e=Object.assign(Object.assign({},t),{type:"seriesNodeDoubleClick"});this.fireEvent(e)},this.specialOverrides=dI(t);const{window:n,document:o}=this.specialOverrides,r=null==e?void 0:e.scene,s=null!==(i=null==e?void 0:e.element)&&void 0!==i?i:o.createElement("div"),a=null==e?void 0:e.container,l=new ZM({name:"root"});l.visible=!1,l.append(this.seriesRoot),this.axisGridGroup=new ZM({name:"Axes-Grids",layer:!0,zIndex:zR.AXIS_GRID_ZINDEX}),l.appendChild(this.axisGridGroup),this.axisGroup=new ZM({name:"Axes",layer:!0,zIndex:zR.AXIS_ZINDEX}),l.appendChild(this.axisGroup),this.element=s,s.classList.add("ag-chart-wrapper"),s.style.position="relative",this.scene=null!=r?r:new oL(this.specialOverrides),this.scene.root=l,this.scene.container=s,this.autoSize=!0,this.chartEventManager=new wL,this.cursorManager=new EL(s),this.highlightManager=new OL,this.interactionManager=new TL(s,o,n),this.zoomManager=new ML,this.dataService=new mL(()=>this.series),this.layoutService=new PL,this.updateService=new cI((t=uL.FULL,{forceNodeDataRefresh:e,skipAnimations:i})=>this.update(t,{forceNodeDataRefresh:e,skipAnimations:i})),this.seriesStateManager=new aI,this.seriesLayerManager=new sI(this.seriesRoot),this.callbackCache=new sL,this.animationManager=new xL(this.interactionManager,this.updateMutex),this.animationManager.skip(),this.animationManager.play(),this.processors=[new lI(this,this.layoutService)],this.tooltip=new NP(this.scene.canvas.element,o,n,o.body),this.tooltipManager=new kL(this.tooltip,this.interactionManager),this.overlays=new rI(this.element),this.highlight=new dL,this.container=a,cL.observe(this.element,t=>this.rawResize(t)),this._destroyFns.push(this.interactionManager.addListener("click",t=>this.onClick(t)),this.interactionManager.addListener("dblclick",t=>this.onDoubleClick(t)),this.interactionManager.addListener("hover",t=>this.onMouseMove(t)),this.interactionManager.addListener("leave",t=>this.onLeave(t)),this.interactionManager.addListener("page-left",()=>this.destroy()),this.interactionManager.addListener("wheel",()=>this.disablePointer()),this.interactionManager.addListener("drag-start",()=>this.disablePointer()),this.animationManager.addListener("animation-frame",t=>{this.update(uL.SCENE_RENDER)}),this.highlightManager.addListener("highlight-change",t=>this.changeHighlightDatum(t)),this.zoomManager.addListener("zoom-change",t=>this.update(uL.PROCESS_DATA,{forceNodeDataRefresh:!0,skipAnimations:!0}))),this.legend=this.attachLegend("category",nI)}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);const e=new t.instanceConstructor(this.getModuleContext());this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeModule(t){var e;null===(e=this.modules[t.optionsKey])||void 0===e||e.instance.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]}attachLegend(t,e){const i=new e(this.getModuleContext());return this.legends.set(t,i),i.attachLegend(this.scene.root),i}addLegendModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);const e=this.attachLegend(t.identifier,t.instanceConstructor);this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeLegendModule(t){this.legends.delete(t.identifier),this.removeModule(t)}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}getModuleContext(){const{scene:t,animationManager:e,chartEventManager:i,cursorManager:n,highlightManager:o,interactionManager:r,tooltipManager:s,zoomManager:a,dataService:l,layoutService:c,updateService:d,seriesStateManager:u,seriesLayerManager:h,mode:p,callbackCache:f,specialOverrides:{window:g,document:v}}=this;return{window:g,document:v,scene:t,animationManager:e,chartEventManager:i,cursorManager:n,highlightManager:o,interactionManager:r,tooltipManager:s,zoomManager:a,dataService:l,layoutService:c,updateService:d,mode:p,seriesStateManager:u,seriesLayerManager:h,callbackCache:f}}destroy(t){if(this._destroyed)return;const e=null==t?void 0:t.keepTransferableResources;let i;this._performUpdateType=uL.NONE,this._destroyFns.forEach(t=>t()),this.processors.forEach(t=>t.destroy()),this.tooltipManager.destroy(),this.tooltip.destroy(),Object.values(this.legends).forEach(t=>t.destroy()),this.legends.clear(),this.overlays.noData.hide(),cL.unobserve(this.element);for(const t of Object.keys(this.modules))this.removeModule({optionsKey:t});return this.interactionManager.destroy(),this.animationManager.stop(),e?(this.scene.strip(),i={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.removeAllSeries(),this.seriesLayerManager.destroy(),this.axes.forEach(t=>t.destroy()),this.axes=[],this.callbackCache.invalidateCache(),this._destroyed=!0,i}disablePointer(t=!1){t||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent&&(this.lastInteractionEvent=void 0)}requestFactoryUpdate(t){this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(()=>XA(this,void 0,void 0,(function*(){yield t(),this._pendingFactoryUpdatesCount--})))}get performUpdateType(){return this._performUpdateType}get lastPerformUpdateError(){return this._lastPerformUpdateError}update(t=uL.FULL,e){var i,n;const{forceNodeDataRefresh:o=!1,skipAnimations:r,seriesToUpdate:s=this.series,newAnimationBatch:a}=null!=e?e:{};o&&this.series.forEach(t=>t.markNodeDataDirty());for(const t of s)this.seriesToUpdate.add(t);if(r&&(this.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),a&&(this.animationManager.isActive()?this._performUpdateSkipAnimations=!0:null!==(i=this._performUpdateSkipAnimations)&&void 0!==i||(this._performUpdateSkipAnimations=!1)),sT.check(!0)){let e=null!==(n=(new Error).stack)&&void 0!==n?n:"<unknown>";e=e.replace(/\([^)]*/g,""),this.updateRequestors[e]=t}t<this._performUpdateType&&(this._performUpdateType=t,this.performUpdateTrigger.schedule(null==e?void 0:e.backOffMs))}performUpdate(t){var e;return XA(this,void 0,void 0,(function*(){const{_performUpdateType:i,extraDebugStats:n}=this,o=[...this.seriesToUpdate];this._performUpdateType=uL.NONE,this.seriesToUpdate.clear(),0===this.updateShortcutCount&&i<uL.SCENE_RENDER&&this.animationManager.startBatch(this._performUpdateSkipAnimations),this.debug("Chart.performUpdate() - start",uL[i]);const r={start:performance.now()};switch(i){case uL.FULL:case uL.PROCESS_DATA:yield this.processData(),this.disablePointer(!0),r["\ud83c\udfed"]=performance.now();case uL.PERFORM_LAYOUT:if(this.checkUpdateShortcut(uL.PERFORM_LAYOUT))break;if(!this.checkFirstAutoSize(o))break;yield this.processLayout(),r["\u2316"]=performance.now();case uL.SERIES_UPDATE:if(this.checkUpdateShortcut(uL.SERIES_UPDATE))break;const{seriesRect:t}=this,s=[...o].map(e=>e.update({seriesRect:t}));yield Promise.all(s),r["\ud83e\udd14"]=performance.now();case uL.TOOLTIP_RECALCULATION:if(this.checkUpdateShortcut(uL.TOOLTIP_RECALCULATION))break;const a=this.tooltipManager.getTooltipMeta(this.id),l="hover"===(null===(e=null==a?void 0:a.event)||void 0===e?void 0:e.type);i<=uL.SERIES_UPDATE&&l&&this.handlePointer(a.event),r["\u2196"]=performance.now();case uL.SCENE_RENDER:if(this.checkUpdateShortcut(uL.SCENE_RENDER))break;n.updateShortcutCount=this.updateShortcutCount,yield this.scene.render({debugSplitTimes:r,extraDebugStats:n}),this.extraDebugStats={};case uL.NONE:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=void 0,this.animationManager.endBatch()}this.updateService.dispatchUpdateComplete(this.getMinRect());const s=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round(100*(s-r.start))/100,count:t,performUpdateType:uL[i]})}))}checkUpdateShortcut(t){return this.updateShortcutCount>3?(nT.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=t&&(this.updateShortcutCount++,!0)}checkFirstAutoSize(t){if(this.autoSize&&!this._lastAutoSize){const e=this._performUpdateNoRenderCount++,i=10*(2^e);if(e<8)return this.update(uL.PERFORM_LAYOUT,{seriesToUpdate:t,backOffMs:i}),this.debug("Chart.checkFirstAutoSize() - backing off until first size update",i),!1;this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0}set axes(t){const e=new Set;this._axes.forEach(t=>{t.detachAxis(this.axisGroup,this.axisGridGroup),e.add(t)}),this._axes=t.filter(t=>!t.linkedTo).concat(t.filter(t=>t.linkedTo)),this._axes.forEach(t=>{t.attachAxis(this.axisGroup,this.axisGridGroup),e.delete(t)}),this.zoomManager.updateAxes(this._axes),e.forEach(t=>t.destroy())}get axes(){return this._axes}set series(t){this.removeAllSeries(),this.seriesLayerManager.setSeriesCount(t.length),t.forEach(t=>this.addSeries(t))}get series(){return this._series}addSeries(t){const{series:e}=this;return!!(e.indexOf(t)<0)&&(e.push(t),null==t.rootGroup.parent&&this.seriesLayerManager.requestGroup(t),this.initSeries(t),!0)}initSeries(t){const e=this;t.chart={get mode(){return e.mode},get seriesRect(){return e.seriesRect},placeLabels:()=>e.placeLabels()},t.setChartData(this.data),this.addSeriesListeners(t),t.addChartEventListeners()}removeAllSeries(){this.series.forEach(t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),t.destroy(),t.chart=void 0}),this._series=[]}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)}updateAllSeriesListeners(){this.series.forEach(t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(t)})}assignSeriesToAxes(){this.axes.forEach(t=>{t.boundSeries=this.series.filter(e=>e.axes[t.direction]===t)})}assignAxesToSeries(){const t={};this.axes.forEach(e=>{var i;const n=e.direction;(null!==(i=t[n])&&void 0!==i?i:t[n]=[]).push(e)}),this.series.forEach(e=>{e.directions.forEach(i=>{const n=t[i];if(!n)return void nT.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);const o=e.getKeys(i),r=this.findMatchingAxis(n,o);r?e.axes[i]=r:nT.warnOnce(`no matching axis for direction [${i}] and keys [${o}]; check series and axes configuration.`)})})}findMatchingAxis(t,e){for(const i of t){const t=i.keys;if(!t.length)return i;if(e)for(const n of e)if(t.indexOf(n)>=0)return i}}rawResize(t){var e;let{width:i,height:n}=t;if(i=Math.floor(i),n=Math.floor(n),!this.autoSize)return;if(0===i&&0===n)return;const[o=0,r=0]=null!==(e=this._lastAutoSize)&&void 0!==e?e:[];o===i&&r===n||(this._lastAutoSize=[i,n],this.resize(void 0,void 0,"SizeMonitor"))}resize(t,e,i){var n,o,r,s;if(null!=t||(t=null!==(n=this.width)&&void 0!==n?n:this.autoSize?null===(o=this._lastAutoSize)||void 0===o?void 0:o[0]:this.scene.canvas.width),null!=e||(e=null!==(r=this.height)&&void 0!==r?r:this.autoSize?null===(s=this._lastAutoSize)||void 0===s?void 0:s[1]:this.scene.canvas.height),this.debug("Chart.resize() from "+i,{width:t,height:e,stack:(new Error).stack}),t&&e&&Number.isFinite(t)&&Number.isFinite(e)&&this.scene.resize(t,e)){this.disablePointer(),this.animationManager.reset();let t=!0;this.autoSize&&this._firstAutoSize&&(t=!1,this._firstAutoSize=!1),this.update(uL.PERFORM_LAYOUT,{forceNodeDataRefresh:!0,skipAnimations:t})}}processData(){return XA(this,void 0,void 0,(function*(){this.series.some(t=>t.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const t=new yL(this.mode),e=this.series.map(e=>e.processData(t));yield t.execute(),yield Promise.all(e),yield this.updateLegend()}))}placeLabels(){const t=[],e=[];for(const n of this.series){if(!n.visible)continue;const o=n.getLabelData();o&&(null!=(i=o[0])&&"object"==typeof i.point&&"object"==typeof i.label)&&(e.push(o),t.push(n))}var i;const{seriesRect:n}=this,o=n&&e.length>0?function(t,e,i=5){const n=[];t=t.map(t=>t.slice().sort((t,e)=>e.point.size-t.point.size));for(let l=0;l<t.length;l++){const c=n[l]=[],d=t[l];if((null==d?void 0:d.length)&&d[0].label)for(let l=0,u=d.length;l<u;l++){const u=d[l],h=u.label,p=.5*u.point.size,f=u.point.x-.5*h.width,g=u.point.y-p-h.height-i,{width:v,height:y}=h;if(!(!e||(s=g,a=y,(r=f)+v<(o=e).x+o.width&&r>o.x&&s>o.y&&s+a<o.y+o.height)))continue;if(t.some(t=>t.some(t=>ON(t.point,f,g,v,y))))continue;n.some(t=>t.some(t=>DN(t,f,g,v,y)))||c.push({index:l,text:h.text,x:f,y:g,width:v,height:y,datum:u})}}var o,r,s,a;return n}(e,{x:0,y:0,width:n.width,height:n.height}):[];return new Map(o.map((e,i)=>[t[i],e]))}updateLegend(){return XA(this,void 0,void 0,(function*(){this.legends.forEach((t,e)=>{const i=this.series.filter(t=>t.showInLegend).flatMap(t=>t.getLegendData(e));i.every(t=>"category"===t.legendType)&&this.validateCategoryLegendData(i),t.data=i})}))}validateCategoryLegendData(t){const e={};t.forEach(t=>{var i,n,o,r,s;const a=null===(i=this.series.find(e=>e.id===t.seriesId))||void 0===i?void 0:i.type;a&&(null!==(n=e[a])&&void 0!==n||(e[a]={}),null!==(o=(r=e[a])[s=t.label.text])&&void 0!==o||(r[s]=new Set),null!=t.marker.fill&&e[a][t.label.text].add(t.marker.fill))});for(const t of Object.values(e))for(const[e,i]of Object.entries(t))i.size>1&&nT.warnOnce(`legend item '${e}' has multiple fill colors, this may cause unexpected behaviour.`)}processLayout(){var t;return XA(this,void 0,void 0,(function*(){const e=this.animationRect;yield this.performLayout(),e&&!(null===(t=this.animationRect)||void 0===t?void 0:t.equals(e))&&this.animationManager.skipCurrentBatch(),this.handleNoDataOverlay(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}))}performLayout(){return XA(this,void 0,void 0,(function*(){this.scene.root&&(this.scene.root.visible=!0);const{width:t,height:e}=this.scene;let i={shrinkRect:new Wk(0,0,t,e)};return i=this.layoutService.dispatchPerformLayout("start-layout",i),i=this.layoutService.dispatchPerformLayout("before-series",i),i.shrinkRect}))}pickSeriesNode(t,e,i){var n,o;const r=performance.now(),s=e?[iP.EXACT_SHAPE_MATCH]:void 0,a=[...this.series].reverse();let l;for(const e of a){if(!e.visible||!e.rootGroup.visible)continue;const{match:o,distance:r}=null!==(n=e.pickNode(t,s))&&void 0!==n?n:{};if(o&&null!=r&&((!l||l.distance>r)&&r<=(null!=i?i:1/0)&&(l={series:e,distance:r,datum:o}),0===r))break}return this.extraDebugStats.pickSeriesNode=Math.round((null!==(o=this.extraDebugStats.pickSeriesNode)&&void 0!==o?o:0)+(performance.now()-r)),l}onMouseMove(t){this.lastInteractionEvent=t,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=t.offsetX,this.extraDebugStats.mouseY=t.offsetY,this.update(uL.SCENE_RENDER)}onLeave(t){this.tooltip.pointerLeftOntoTooltip(t)||this.disablePointer()}handlePointer(t){const{lastPick:e,hoverRect:i}=this,{offsetX:n,offsetY:o}=t,r=(t=!1)=>{e&&this.disablePointer(t)};(null==i?void 0:i.containsPoint(n,o))?(this.handlePointerTooltip(t,r),this.handlePointerNode(t)):r()}handlePointerTooltip(t,e){const{lastPick:i,tooltip:n}=this,{range:o}=n,{offsetX:r,offsetY:s}=t;let a;"number"==typeof o&&Number.isFinite(o)&&(a=o);const l=this.pickSeriesNode({x:r,y:s},"exact"===o,a);if(!l)return this.tooltipManager.removeTooltip(this.id),void("tooltip"===this.highlight.range&&e(!0));const c="node"===this.highlight.range||!i||i.datum!==l.datum;let d;c?(d=l.series.getTooltipHtml(l.datum),"tooltip"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,l.datum)):i&&(i.event=t.sourceEvent);const u=null!=a,h=this.tooltip.enabled&&l.series.tooltip.enabled,p="exact"===o&&0===l.distance,f=h&&("nearest"===o||u||p)&&(!c||void 0!==d),g=kL.makeTooltipMeta(t,this.scene.canvas,l.datum,this.specialOverrides.window);f&&this.tooltipManager.updateTooltip(this.id,g,d)}handlePointerNode(t){this.checkSeriesNodeRange(t,(t,e)=>{(t.hasEventListener("nodeClick")||t.hasEventListener("nodeDoubleClick"))&&this.cursorManager.updateCursor("chart","pointer"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,e)})||(this.cursorManager.updateCursor("chart"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id))}onClick(t){this.checkSeriesNodeClick(t)?this.update(uL.SERIES_UPDATE):this.fireEvent({type:"click",event:t.sourceEvent})}onDoubleClick(t){this.checkSeriesNodeDoubleClick(t)?this.update(uL.SERIES_UPDATE):this.fireEvent({type:"doubleClick",event:t.sourceEvent})}checkSeriesNodeClick(t){return this.checkSeriesNodeRange(t,(e,i)=>e.fireNodeClickEvent(t.sourceEvent,i))}checkSeriesNodeDoubleClick(t){return this.checkSeriesNodeRange(t,(e,i)=>e.fireNodeDoubleClickEvent(t.sourceEvent,i))}checkSeriesNodeRange(t,e){const i=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1),n=null==i?void 0:i.datum,o=null==n?void 0:n.series.nodeClickRange;let r;"number"==typeof o&&Number.isFinite(o)&&(r=o);let s=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!0);if(s?this.highlightManager.updatePicked(this.id,s.datum):this.highlightManager.updatePicked(this.id),n&&"nearest"===o)return e(n.series,n),!0;if("exact"!==o&&(s=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1,r)),!s)return!1;const a=null!=r,l="exact"===o&&0===s.distance;return!(!a&&!l)&&(e(s.series,s.datum),!0)}changeHighlightDatum(t){var e,i;const n=new Set,{series:o,datum:r}=null!==(e=t.currentHighlight)&&void 0!==e?e:{},{series:s,datum:a}=null!==(i=t.previousHighlight)&&void 0!==i?i:{};s&&n.add(s),o&&n.add(o),(null==s?void 0:s.cursor)&&a&&this.cursorManager.updateCursor(s.id),(null==o?void 0:o.cursor)&&r&&this.cursorManager.updateCursor(o.id,o.cursor),this.lastPick=t.currentHighlight?{datum:t.currentHighlight}:void 0;null==o||null==s?this.update(uL.SERIES_UPDATE):this.update(uL.SERIES_UPDATE,{seriesToUpdate:n})}waitForUpdate(t=5e3){return XA(this,void 0,void 0,(function*(){const e=performance.now();for(this._pendingFactoryUpdatesCount>0&&(yield this.updateMutex.waitForClearAcquireQueue());this._performUpdateType!==uL.NONE;){if(performance.now()-e>t)throw new Error("waitForUpdate() timeout reached.");yield rL(5)}yield this.updateMutex.waitForClearAcquireQueue()}))}handleNoDataOverlay(){!this.series.some(t=>t.hasData())&&this.seriesRect?this.overlays.noData.show(this.seriesRect):this.overlays.noData.hide()}getMinRect(){const t=this.series.map(t=>t.getMinRect()).filter(t=>void 0!==t);if(t.length)return new Wk(0,0,t.reduce((t,e)=>Math.max(t,e.width),0),t.reduce((t,e)=>Math.max(t,e.height),0))}}var pI;KA([cM({newValue(t){this.destroyed||t.appendChild(this.element)},oldValue(t){t.removeChild(this.element)}}),YA("design:type",Object)],hI.prototype,"container",void 0),KA([cM({newValue(t){var e;null===(e=this.series)||void 0===e||e.forEach(e=>{e.setChartData(t)})}}),YA("design:type",Object)],hI.prototype,"data",void 0),KA([cM({newValue(t){this.resize(t,void 0,"width option")}}),YA("design:type",Number)],hI.prototype,"width",void 0),KA([cM({newValue(t){this.resize(void 0,t,"height option")}}),YA("design:type",Number)],hI.prototype,"height",void 0),KA([cM({changeValue(t){this.autoSizeChanged(t)}}),PT(UT),YA("design:type",Object)],hI.prototype,"autoSize",void 0),KA([cM({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}}),YA("design:type",Function)],hI.prototype,"title",void 0),KA([cM({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}}),YA("design:type",Function)],hI.prototype,"subtitle",void 0),KA([cM({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}}),YA("design:type",Function)],hI.prototype,"footnote",void 0),KA([PT(dk("standalone","integrated")),YA("design:type",String)],hI.prototype,"mode",void 0),function(t){t[t.Open=0]="Open",t[t.Chord=1]="Chord",t[t.Round=2]="Round"}(pI||(pI={}));class fI extends dR{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=pI.Open,this.restoreOwnStyles()}get fullPie(){return DT(ST(this.startAngle),ST(this.endAngle))}updatePath(){const t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===pI.Chord?t.closePath():this.type!==pI.Round||this.fullPie||(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new Wk(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(t,e){const i=this.transformPoint(t,e),n=this.computeBBox();return this.type!==pI.Open&&n.containsPoint(i.x,i.y)&&this.path.isPointInPath(i.x,i.y)}}fI.className="Arc",fI.defaultStyles=Object.assign({},Qk.defaultStyles,{lineWidth:1,fillStyle:null}),KA([cR(),YA("design:type",Number)],fI.prototype,"centerX",void 0),KA([cR(),YA("design:type",Number)],fI.prototype,"centerY",void 0),KA([cR(),YA("design:type",Number)],fI.prototype,"radius",void 0),KA([cR(),YA("design:type",Number)],fI.prototype,"startAngle",void 0),KA([cR(),YA("design:type",Number)],fI.prototype,"endAngle",void 0),KA([cR(),YA("design:type",Boolean)],fI.prototype,"counterClockwise",void 0),KA([cR(),YA("design:type",Number)],fI.prototype,"type",void 0);const gI=t=>{const e=RT.fromString(t),[i,n,o]=RT.RGBtoHSL(e.r,e.g,e.b);return{h:i,s:n,l:o,a:e.a}};class vI{constructor(){this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(gI)}update(){const{domain:t,range:e}=this;t.length<2&&(nT.warnOnce("`colorDomain` should have at least 2 values."),0===t.length?t.push(0,1):1===t.length&&t.push(t[0]+1));for(let e=1;e<t.length;e++){if(t[e-1]>=t[e]){nT.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort((t,e)=>t-e);break}}if(e.length<t.length)for(let i=e.length;i<t.length;i++)e.push(e.length>0?e[0]:"black");this.parsedRange=this.range.map(gI)}convert(t){const{domain:e,range:i,parsedRange:n}=this,o=e[0],r=e[e.length-1],s=i[0],a=i[i.length-1];if(t<=o)return s;if(t>=r)return a;let l,c;if(2===e.length){const e=(t-o)/(r-o),n=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(e*(i.length-1)),i.length-2),c=(e-l*n)/n}else{for(l=0;l<e.length-2&&!(t<e[l+1]);l++);const i=e[l];c=(t-i)/(e[l+1]-i)}return((t,e,i)=>{let n,o;if(i=Math.min(Math.max(i,0),1),Number.isNaN(t.h)&&Number.isNaN(e.h))n=0,o=0;else if(Number.isNaN(t.h))n=e.h,o=e.s;else if(Number.isNaN(e.h))n=t.h,o=t.s;else{const r=t.h;let s=e.h;const a=e.h-t.h;a>180?s-=360:a<-180&&(s+=360),n=r*(1-i)+s*i,o=t.s*(1-i)+e.s*i}const r=t.l*(1-i)+e.l*i,s=t.a*(1-i)+e.a*i;return RT.fromHSL(n,o,r,s)})(n[l],n[l+1],c).toRgbaString()}}class yI extends Qk{constructor(){super(...arguments),this.direction="to-right",this.stops=void 0,this._mask=void 0}get mask(){return this._mask}set mask(t){null!=this._mask&&this.removeChild(this._mask),null!=t&&this.appendChild(t),this._mask=t}isPointInPath(t,e){var i,n;return null!==(n=null===(i=this.mask)||void 0===i?void 0:i.isPointInPath(t,e))&&void 0!==n&&n}computeBBox(){var t;return null===(t=this.mask)||void 0===t?void 0:t.computeBBox()}render(t){const{mask:e,stops:i}=this,{ctx:n,devicePixelRatio:o}=t,r=1/o,s=null==e?void 0:e.computeTransformedBBox();if(null==e||null==i||null==s)return;e.dirtyPath&&(e.updatePath(),e.dirtyPath=!1),n.save(),n.beginPath(),e.path.draw(n),n.clip(),n.resetTransform();const a=Math.floor(s.x),l=Math.ceil(s.x+s.width),c=Math.floor(s.y),d=Math.ceil(s.y+s.height),u=new vI,[h,p]="to-right"===this.direction?[a,l]:[c,d];if(u.domain=i.map((t,e)=>h+(p-h)*e/(i.length-1)),u.range=i,u.update(),"to-right"===this.direction){const t=d-c;for(let e=a;e<=l;e+=r)n.fillStyle=u.convert(e),n.fillRect(e,c,r,t)}else{const t=l-a;for(let e=c;e<=d;e+=r)n.fillStyle=u.convert(e),n.fillRect(a,e,t,r)}n.restore()}}KA([_k({redraw:Ik.MAJOR}),YA("design:type",String)],yI.prototype,"direction",void 0),KA([_k({redraw:Ik.MAJOR}),YA("design:type",Array)],yI.prototype,"stops",void 0),KA([_k({redraw:Ik.MAJOR}),YA("design:type",Function)],yI.prototype,"_mask",void 0);class mI extends dR{constructor(){super(...arguments),this.borderPath=new lR,this.x=0,this.y=0,this.width=10,this.height=10,this.radius=0,this.crisp=!1,this.lastUpdatePathStrokeWidth=Qk.defaultStyles.strokeWidth,this.effectiveStrokeWidth=Qk.defaultStyles.strokeWidth,this.microPixelEffectOpacity=1}isDirtyPath(){var t;return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty()||(null===(t=this.clipPath)||void 0===t?void 0:t.isDirty()))}updatePath(){var t,e,i;const{path:n,borderPath:o,crisp:r}=this;let{x:s,y:a,width:l,height:c,strokeWidth:d}=this;const u=1/(null!==(e=null===(t=this.layerManager)||void 0===t?void 0:t.canvas.pixelRatio)&&void 0!==e?e:1);let h=1;if(n.clear({trackChanges:!0}),o.clear({trackChanges:!0}),r&&(l<=u&&(h*=l/u),c<=u&&(h*=c/u),l=this.align(s,l),c=this.align(a,c),s=this.align(s),a=this.align(a)),d)if(l<u){const t=s+u/2;o.moveTo(t,a),o.lineTo(t,a+c),d=u,this.borderClipPath=void 0}else if(c<u){const t=a+u/2;o.moveTo(s,t),o.lineTo(s+l,t),d=u,this.borderClipPath=void 0}else if(d<l&&d<c){const t=d/2;s+=t,a+=t,l-=d,c-=d,this.borderClipPath=void 0,n.rect(s,a,l,c),o.rect(s,a,l,c)}else this.borderClipPath=null!==(i=this.borderClipPath)&&void 0!==i?i:new lR,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(s,a,l,c),o.rect(s,a,l,c);else this.borderClipPath=void 0,n.rect(s,a,l,c);this.effectiveStrokeWidth=d,this.lastUpdatePathStrokeWidth=d,this.microPixelEffectOpacity=h}computeBBox(){const{x:t,y:e,width:i,height:n}=this;return new Wk(t,e,i,n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}applyFillAlpha(t){const{fillOpacity:e,microPixelEffectOpacity:i,opacity:n}=this,{globalAlpha:o}=t;t.globalAlpha=o*n*e*i}renderStroke(t){const{stroke:e,effectiveStrokeWidth:i,borderPath:n,borderClipPath:o,opacity:r,microPixelEffectOpacity:s}=this;if(!!e&&!!i){const{strokeOpacity:a,lineDash:l,lineDashOffset:c,lineCap:d,lineJoin:u}=this;o&&(o.draw(t),t.clip()),n.draw(t);const{globalAlpha:h}=t;t.strokeStyle=e,t.globalAlpha=h*r*a*s,t.lineWidth=i,l&&t.setLineDash(l),c&&(t.lineDashOffset=c),d&&(t.lineCap=d),u&&(t.lineJoin=u),t.stroke(),t.globalAlpha=h}}}mI.className="Rect",KA([cR(),YA("design:type",Number)],mI.prototype,"x",void 0),KA([cR(),YA("design:type",Number)],mI.prototype,"y",void 0),KA([cR(),YA("design:type",Number)],mI.prototype,"width",void 0),KA([cR(),YA("design:type",Number)],mI.prototype,"height",void 0),KA([cR(),YA("design:type",Number)],mI.prototype,"radius",void 0),KA([cR(),YA("design:type",Boolean)],mI.prototype,"crisp",void 0);class bI extends Kk{constructor(t){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=t}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===Ik.NONE&&!i)return void(n&&n.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const o=this.sourceImage;e.globalAlpha=this.opacity,e.drawImage(o,0,0,o.width,o.height,this.x,this.y,this.width,this.height),super.render(t)}}KA([_k({redraw:Ik.MAJOR}),YA("design:type",Number)],bI.prototype,"x",void 0),KA([_k({redraw:Ik.MAJOR}),YA("design:type",Number)],bI.prototype,"y",void 0),KA([_k({redraw:Ik.MAJOR}),YA("design:type",Number)],bI.prototype,"width",void 0),KA([_k({redraw:Ik.MAJOR}),YA("design:type",Number)],bI.prototype,"height",void 0),KA([_k({redraw:Ik.MAJOR}),YA("design:type",Number)],bI.prototype,"opacity",void 0);const SI=Object.assign(Object.assign({},DM),VP);var xI=Object.freeze({__proto__:null,motion:SI,Caption:dM,DropShadow:Yk,Group:ZM,Scene:oL,Node:Kk,get PointerEvents(){return Uk},get RedrawType(){return Ik},SceneChangeDetection:_k,Selection:JM,Arc:fI,Line:QM,LinearGradientFill:yI,Path:dR,ScenePathChangeDetection:cR,Rect:mI,Sector:uR,Shape:Qk,Text:eM,getFont:iM,ContinuousScale:YM,BandScale:ET,LinearScale:XM,toRadians:CT,Label:BR,Marker:UR,getMarker:HL,Circle:HR,Diamond:_L,Square:VL,Triangle:jL,Tooltip:NP,toTooltipHtml:kP,BBox:Wk,nearestSquared:jk,nearestSquaredInContainer:function(t,e,i=1/0){const n=e.transformPoint(t.x,t.y),o={nearest:void 0,distanceSquared:i};for(const t of e.children){const{nearest:e,distanceSquared:i}=t.nearestSquared(n,o.distanceSquared);if(0===i)return{nearest:e,distanceSquared:i};i<o.distanceSquared&&(o.nearest=e,o.distanceSquared=i)}return o},HdpiCanvas:$k,Image:bI,Path2D:lR,easing:yM});const CI={[Lk.X]:["xKey"],[Lk.Y]:["yKey"]},wI={[Lk.X]:["xName"],[Lk.Y]:["yName"]};class EI extends dP{constructor(t,e,i,n){super(t,e,i,n),this.xKey=n.xKey,this.yKey=n.yKey}}class OI extends WP{get contextNodeData(){return this._contextNodeData.slice()}constructor(t){var{pathsPerSeries:e=1,hasMarkers:i=!1,hasHighlightedLabels:n=!1,pathsZIndexSubOrderOffset:o=[],directionKeys:r=CI,directionNames:s=wI,datumSelectionGarbageCollection:a=!0,markerSelectionGarbageCollection:l=!0,animationResetFns:c}=t,d=HA(t,["pathsPerSeries","hasMarkers","hasHighlightedLabels","pathsZIndexSubOrderOffset","directionKeys","directionNames","datumSelectionGarbageCollection","markerSelectionGarbageCollection","animationResetFns"]);super(Object.assign({directionKeys:r,directionNames:s,useSeriesGroupLayer:!0,canHaveAxes:!0},d)),this.legendItemName=void 0,this._contextNodeData=[],this.NodeClickEvent=EI,this.highlightSelection=JM.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=JM.select(this.highlightLabel,eM),this.annotationSelections=new Set,this.subGroups=[],this.subGroupId=0,this.debug=sT.create(),this.opts={pathsPerSeries:e,hasMarkers:i,hasHighlightedLabels:n,pathsZIndexSubOrderOffset:o,directionKeys:r,directionNames:s,animationResetFns:c,datumSelectionGarbageCollection:a,markerSelectionGarbageCollection:l},this.animationState=new jP("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)}},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),highlightMarkers:t=>this.animateReadyHighlightMarkers(t),resize:t=>this.animateReadyResize(t)},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)}},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)}}},()=>this.checkProcessedDataAnimatable())}addChartEventListeners(){this.ctx.chartEventManager.addListener("legend-item-click",t=>this.onLegendItemClick(t)),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t))}destroy(){super.destroy(),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)}update({seriesRect:t}){var e,i;return XA(this,void 0,void 0,(function*(){const{visible:n,_contextNodeData:o}=this,{series:r}=null!==(i=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight())&&void 0!==i?i:{},s=r?r===this:void 0,a=this.checkResize(t),l=yield this.updateHighlightSelection(s);yield this.updateSelections(n),yield this.updateNodes(l,s,n);const c=this.getAnimationData(t,o);a&&this.animationState.transition("resize",c),this.animationState.transition("update",c)}))}updateSelections(t){return XA(this,void 0,void 0,(function*(){if((t||!this.ctx.animationManager.isSkipped())&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this._contextNodeData=yield this.createNodeData();const t=this.isProcessedDataAnimatable();this._contextNodeData.forEach(e=>{var i;null!==(i=e.animationValid)&&void 0!==i||(e.animationValid=t)}),yield this.updateSeriesGroups();const{dataModel:e,processedData:i}=this;void 0!==e&&void 0!==i&&this.dispatch("data-update",{dataModel:e,processedData:i})}yield Promise.all(this.subGroups.map((t,e)=>this.updateSeriesGroupSelections(t,e)))}}))}updateSeriesGroupSelections(t,e,i){return XA(this,void 0,void 0,(function*(){const{datumSelection:n,labelSelection:o,markerSelection:r,paths:s}=t,a=this._contextNodeData[e],{nodeData:l,labelData:c,itemId:d}=a;yield this.updatePaths({seriesHighlighted:i,itemId:d,contextData:a,paths:s,seriesIdx:e}),t.datumSelection=yield this.updateDatumSelection({nodeData:l,datumSelection:n,seriesIdx:e}),t.labelSelection=yield this.updateLabelSelection({labelData:c,labelSelection:o,seriesIdx:e}),r&&(t.markerSelection=yield this.updateMarkerSelection({nodeData:l,markerSelection:r,seriesIdx:e}))}))}markerFactory(){return new(HL())}updateSeriesGroups(){return XA(this,void 0,void 0,(function*(){const{_contextNodeData:t,contentGroup:e,subGroups:i,opts:{pathsPerSeries:n,hasMarkers:o,datumSelectionGarbageCollection:r,markerSelectionGarbageCollection:s}}=this;if(t.length===i.length)return;t.length<i.length&&i.splice(t.length).forEach(({dataNodeGroup:t,markerGroup:i,labelGroup:n,paths:o})=>{e.removeChild(t),i&&e.removeChild(i),n&&e.removeChild(n);for(const t of o)e.removeChild(t)});const a=t.length;for(;a>i.length;){const t=!1,a=this.subGroupId++,l=new ZM({name:`${this.id}-series-sub${a}-dataNodes`,layer:t,zIndex:zR.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("data",a)}),c=o?new ZM({name:`${this.id}-series-sub${this.subGroupId++}-markers`,layer:t,zIndex:zR.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("marker",a)}):void 0,d=new ZM({name:`${this.id}-series-sub${this.subGroupId++}-labels`,layer:t,zIndex:zR.SERIES_LABEL_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("labels",a)});e.appendChild(l),e.appendChild(d),c&&e.appendChild(c);const u=[];for(let t=0;t<n;t++)u[t]=new dR,u[t].zIndex=zR.SERIES_LAYER_ZINDEX,u[t].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",t),e.appendChild(u[t]);i.push({paths:u,dataNodeGroup:l,markerGroup:c,labelGroup:d,labelSelection:JM.select(d,eM),datumSelection:JM.select(l,()=>this.nodeFactory(),r),markerSelection:c?JM.select(c,()=>this.markerFactory(),s):void 0})}}))}getGroupZIndexSubOrder(t,e=0){var i;const n=super.getGroupZIndexSubOrder(t,e);if("paths"===t){const t=null!==(i=this.opts.pathsZIndexSubOrderOffset[e])&&void 0!==i?i:0,o=n[0];n[0]="function"==typeof o?()=>+o()+t:+o+t}return n}updateNodes(t,e,i){var n;return XA(this,void 0,void 0,(function*(){const{highlightSelection:o,highlightLabelSelection:r,opts:{hasMarkers:s,hasHighlightedLabels:a}}=this,l=!this.ctx.animationManager.isSkipped(),c=this.visible&&(null===(n=this._contextNodeData)||void 0===n?void 0:n.length)>0&&i;this.rootGroup.visible=l||c,this.contentGroup.visible=l||c,this.highlightGroup.visible=(l||c)&&!!e;const d=this.getOpacity();s?(yield this.updateMarkerNodes({markerSelection:o,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlightMarkers",o)):(yield this.updateDatumNodes({datumSelection:o,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlight",o)),a&&(yield this.updateLabelNodes({labelSelection:r,seriesIdx:-1})),yield Promise.all(this.subGroups.map((i,n)=>XA(this,void 0,void 0,(function*(){const{dataNodeGroup:o,markerGroup:r,datumSelection:a,labelSelection:u,markerSelection:h,paths:p,labelGroup:f}=i,{itemId:g}=this.contextNodeData[n],v=c;o.opacity=d,o.visible=l||v,f.visible=v,r&&(r.opacity=d,r.zIndex=o.zIndex>=zR.SERIES_LAYER_ZINDEX?o.zIndex:o.zIndex+1,r.visible=v),f&&(f.opacity=d),yield this.updatePathNodes({seriesHighlighted:e,itemId:g,paths:p,seriesIdx:n,opacity:d,visible:v,animationEnabled:l}),o.visible&&(yield this.updateDatumNodes({datumSelection:a,highlightedItems:t,isHighlight:!1,seriesIdx:n}),yield this.updateLabelNodes({labelSelection:u,seriesIdx:n}),s&&h&&(yield this.updateMarkerNodes({markerSelection:h,isHighlight:!1,seriesIdx:n})))}))))}))}getHighlightLabelData(t,e){const i=t.find(t=>t.datum===e.datum&&t.itemId===e.itemId);return i?[i]:void 0}getHighlightData(t,e){return e?[e]:void 0}updateHighlightSelection(t){var e;return XA(this,void 0,void 0,(function*(){const{highlightSelection:i,highlightLabelSelection:n,_contextNodeData:o}=this,r=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),s=t&&(null==r?void 0:r.datum)?r:void 0;let a,l;if(null!=s){const t=this.isLabelEnabled();for(const{labelData:e,nodeData:i}of o)if(l=this.getHighlightData(i,s),a=t?this.getHighlightLabelData(e,s):void 0,(!t||null!=a)&&null!=l)break}return this.highlightSelection=yield this.updateHighlightSelectionItem({items:l,highlightSelection:i}),this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({items:a,highlightLabelSelection:n}),l}))}pickNodeExactShape(t){var e;const i=super.pickNodeExactShape(t);if(i)return i;const{x:n,y:o}=t,{opts:{hasMarkers:r}}=this;for(const{dataNodeGroup:t,markerGroup:e}of this.subGroups){let i=t.pickNode(n,o);if(!i&&r&&(i=null==e?void 0:e.pickNode(n,o)),i)break}for(const i of this.moduleMap){const{datum:n}=null!==(e=i.pickNodeExact(t))&&void 0!==e?e:{};if(void 0!==n)return{datum:n,distance:0}}}pickNodeClosestDatum(t){var e,i;const{x:n,y:o}=t,{axes:r,rootGroup:s,_contextNodeData:a}=this,l=r[Lk.X],c=r[Lk.Y],d=s.transformPoint(n,o);let u,h=1/0;for(const t of a)for(const e of t.nodeData){const{point:{x:t=NaN,y:i=NaN}={}}=e;if(isNaN(t)||isNaN(i))continue;if(!((null==l?void 0:l.inRange(t))&&(null==c?void 0:c.inRange(i))))continue;const n=Math.max(Math.pow(d.x-t,2)+Math.pow(d.y-i,2),0);n<h&&(h=n,u=e)}for(const e of this.moduleMap){const i=e.pickNodeNearest(t);if(void 0!==i&&i.distanceSquared<h){h=i.distanceSquared,u=i.datum;break}}if(u){return{datum:u,distance:Math.max(Math.sqrt(h)-(null!==(i=null===(e=u.point)||void 0===e?void 0:e.size)&&void 0!==i?i:0),0)}}}pickNodeMainAxisFirst(t,e){var i,n;const{x:o,y:r}=t,{axes:s,rootGroup:a,_contextNodeData:l}=this,c=s[Lk.X],d=s[Lk.Y],u=[c,d].filter(t=>t instanceof HN).map(t=>t.direction);if(e&&0===u.length)return;const[h=Lk.X]=u,p=a.transformPoint(o,r),f=h===Lk.X?[p.x,p.y]:[p.y,p.x],g=[1/0,1/0];let v;for(const t of l)for(const e of t.nodeData){const{point:{x:t=NaN,y:i=NaN}={}}=e;if(isNaN(t)||isNaN(i))continue;if(!((null==c?void 0:c.inRange(t))&&(null==d?void 0:d.inRange(i))))continue;const n=h===Lk.X?[t,i]:[i,t];let o=!0;for(let t=0;t<n.length;t++){const e=Math.abs(n[t]-f[t]);if(e>g[t]){o=!1;break}e<g[t]&&(g[t]=e,g.fill(1/0,t+1,g.length))}o&&(v=e)}if(v){let e=Math.max(Math.pow(g[0],2)+Math.pow(g[1],2)-(null!==(n=null===(i=v.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0),0);for(const i of this.moduleMap){const n=i.pickNodeMainAxisFirst(t);if(void 0!==n&&n.distanceSquared<e){v=n.datum,e=n.distanceSquared;break}}return{datum:v,distance:Math.sqrt(e)}}}onLegendItemClick(t){const{enabled:e,itemId:i,series:n,legendItemName:o}=t,r=null!=this.legendItemName&&this.legendItemName===o;(n.id===this.id||r)&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:n,numVisibleItems:o,legendItemName:r}=t,s=Object.values(o).reduce((t,e)=>t+e,0),a=null!=this.legendItemName&&this.legendItemName===r;n.id===this.id||a||e&&1===s?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}shouldFlipXY(){return!1}getMinRect(){const[t]=this._contextNodeData;if(!t||0==t.nodeData.length)return;const e=t.nodeData.map(({midPoint:t})=>{var e;return null!==(e=null==t?void 0:t.x)&&void 0!==e?e:0}).sort((t,e)=>t-e).reduce((t,e,i,n)=>i>0?Math.max(t,e-n[i-1]):t,0),i=t.nodeData.map(({midPoint:t})=>{var e;return null!==(e=null==t?void 0:t.y)&&void 0!==e?e:0}).sort((t,e)=>t-e).reduce((t,e,i,n)=>i>0?Math.max(t,e-n[i-1]):t,0);return new Wk(0,0,e,i)}updateHighlightSelectionItem(t){return XA(this,void 0,void 0,(function*(){const{opts:{hasMarkers:e}}=this,{items:i,highlightSelection:n}=t,o=null!=i?i:[];if(e){const t=n;return this.updateMarkerSelection({nodeData:o,markerSelection:t,seriesIdx:-1})}return this.updateDatumSelection({nodeData:o,datumSelection:n,seriesIdx:-1})}))}updateHighlightSelectionLabel(t){return XA(this,void 0,void 0,(function*(){const{items:e,highlightLabelSelection:i}=t,n=null!=e?e:[];return this.updateLabelSelection({labelData:n,labelSelection:i,seriesIdx:-1})}))}updateDatumSelection(t){return XA(this,void 0,void 0,(function*(){return t.datumSelection}))}updateDatumNodes(t){return XA(this,void 0,void 0,(function*(){}))}updateMarkerSelection(t){return XA(this,void 0,void 0,(function*(){return t.markerSelection}))}updateMarkerNodes(t){return XA(this,void 0,void 0,(function*(){}))}updatePaths(t){return XA(this,void 0,void 0,(function*(){t.paths.forEach(t=>t.visible=!1)}))}updatePathNodes(t){return XA(this,void 0,void 0,(function*(){const{paths:e,opacity:i,visible:n}=t;for(const t of e)t.opacity=i,t.visible=n}))}resetAllAnimation(t){var e,i;const{path:n,datum:o,label:r,marker:s}=null!==(i=null===(e=this.opts)||void 0===e?void 0:e.animationResetFns)&&void 0!==i?i:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),n&&t.paths.forEach(t=>{GP(t,n)}),o&&GP(t.datumSelections,o),r&&GP(t.labelSelections,r),s&&GP(t.markerSelections,s),t.contextData.some(t=>!1===t.animationValid)&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e,i;const{datum:n}=null!==(i=null===(e=this.opts)||void 0===e?void 0:e.animationResetFns)&&void 0!==i?i:{};n&&GP([t],n)}animateReadyHighlightMarkers(t){var e,i;const{marker:n}=null!==(i=null===(e=this.opts)||void 0===e?void 0:e.animationResetFns)&&void 0!==i?i:{};n&&GP([t],n)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t,e){return{datumSelections:this.subGroups.map(({datumSelection:t})=>t),markerSelections:this.subGroups.filter(({markerSelection:t})=>void 0!==t).map(({markerSelection:t})=>t),labelSelections:this.subGroups.map(({labelSelection:t})=>t),annotationSelections:[...this.annotationSelections],contextData:this._contextNodeData,previousContextData:e,paths:this.subGroups.map(({paths:t})=>t),seriesRect:t}}calculateScaling(){const t={},e=e=>{const i=this.axes[e];if(i)if(i.scale instanceof yN){const{range:n,domain:o}=i.scale;t[e]={type:"log",convert:t=>i.scale.convert(t),domain:[o[0],o[1]],range:[n[0],n[1]]}}else if(i.scale instanceof YM){const{range:n}=i.scale,o=i.scale.getDomain();t[e]={type:"continuous",domain:[o[0],o[1]],range:[n[0],n[1]]}}else if(i.scale){const{domain:n}=i.scale;t[e]={type:"category",domain:n,range:n.map(t=>i.scale.convert(t))}}};return e(Lk.X),e(Lk.Y),t}}KA([PT(YT),YA("design:type",String)],OI.prototype,"legendItemName",void 0);const DI=["top","right","bottom","left"];class AI extends hI{constructor(t,e){super(t,e),this.paired=!0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastVisibility={crossLines:!0,series:!0}}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return XA(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),{animationRect:i,seriesRect:n,visibility:o,clipSeries:r}=this.updateAxes(e);this.seriesRoot.visible=o.series,this.seriesRect=n,this.animationRect=i,this.seriesRoot.translationX=Math.floor(n.x),this.seriesRoot.translationY=Math.floor(n.y);const{seriesArea:{padding:s}}=this,a=n.clone().grow({top:s.top,right:s.right,bottom:s.bottom,left:s.left});return this.hoverRect=a,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:r,series:{rect:n,paddedRect:a,visible:o.series,shouldFlipXY:this.shouldFlipXY()},axes:this.axes.map(t=>Object.assign({id:t.id},t.getLayoutState()))}),e}))}updateAxes(t){var e;const i=Object.assign({},this._lastAxisWidths),n=Object.assign({},this._lastVisibility),o=new Set(this._axes.map(t=>t.position));for(const t of Object.keys(i))o.has(t)||delete i[t];const r=(t,e)=>!Object.keys(t).some(t=>null==i[t])&&(n.crossLines===e.crossLines&&n.series===e.series&&Object.entries(i).every(([e,i])=>{const n=t[e];return null==i&&null==n||i===n}));let s={},a={},l=!1,c=null===(e=this.seriesRect)||void 0===e?void 0:e.clone(),d=0,u={};do{Object.assign(i,s),Object.assign(n,a);const e=this.updateAxesPass(i,t.clone(),c);if(h=e.axisWidths,s=Object.entries(h).reduce((t,[e,i])=>(i&&Math.abs(i)===1/0&&(i=0),t[e]=null!=i?Math.ceil(i):i,t),{}),a=e.visibility,l=e.clipSeries,c=e.seriesRect,u=e.primaryTickCounts,d++>10){nT.warn("unable to find stable axis layout.");break}}while(!r(s,a));var h;this.axes.forEach(t=>{const{direction:e}=t,i=u[e];t.update(i)});return this.axes.forEach(e=>{if(e.setCrossLinesVisible(n.crossLines),c)switch(e.clipGrid(c.x,c.y,c.width+5,c.height+5),e.position){case"left":case"right":e.clipTickLines(t.x,c.y,t.width+5,c.height+5);break;case"top":case"bottom":e.clipTickLines(c.x,t.y,c.width+5,t.height+5)}}),this._lastAxisWidths=i,this._lastVisibility=n,{seriesRect:c,animationRect:t,visibility:n,clipSeries:l}}updateAxesPass(t,e,i){const{axes:n}=this,o={},r={},s={series:!0,crossLines:!0};let a=!1;const l={},c=this.applySeriesPadding(e),d=i?this.buildCrossLinePadding(t):{},u=this.buildAxisBound(c,t,d,s),h=this.buildSeriesRect(u,t);return n.forEach(e=>{var i,n;const{position:s="left"}=e,{clipSeries:d,axisThickness:p,axisOffset:f}=this.calculateAxisDimensions({axis:e,seriesRect:h,paddedBounds:c,axisWidths:t,newAxisWidths:r,primaryTickCounts:l,clipSeries:a,addInterAxisPadding:(null!==(i=o[s])&&void 0!==i?i:0)>0});o[s]=(null!==(n=o[s])&&void 0!==n?n:0)+1,a=a||d,this.positionAxis({axis:e,axisBound:u,axisOffset:f,axisThickness:p,axisWidths:t,primaryTickCounts:l,seriesRect:h})}),{clipSeries:a,seriesRect:h,axisWidths:r,visibility:s,primaryTickCounts:l}}buildCrossLinePadding(t){var e;const i={};this.axes.forEach(t=>{t.crossLines&&t.crossLines.forEach(t=>{t.calculatePadding(i)})});for(const[n,o=0]of Object.entries(i))i[n]=Math.max(o-(null!==(e=t[n])&&void 0!==e?e:0),0);return i}applySeriesPadding(t){const e=t.clone(),i=this.axes.slice().reverse();return DI.forEach(t=>{const n=this.seriesArea.padding[t],o=i.find(e=>e.position===t);o?o.seriesAreaPadding=n:e.shrink(n,t)}),e}buildAxisBound(t,e,i,n){var o,r,s,a;const l=t.clone(),{top:c=0,right:d=0,bottom:u=0,left:h=0}=i,p=h+d,f=c+u,g=(null!==(o=e.left)&&void 0!==o?o:0)+(null!==(r=e.right)&&void 0!==r?r:0)+p,v=(null!==(s=e.top)&&void 0!==s?s:0)+(null!==(a=e.bottom)&&void 0!==a?a:0)+f;return l.width<=g||l.height<=v?(n.crossLines=!1,n.series=!1,l):(l.x+=h,l.y+=c,l.width-=p,l.height-=f,l)}buildSeriesRect(t,e){const i=t.clone(),{top:n,bottom:o,left:r,right:s}=e;return i.x+=null!=r?r:0,i.y+=null!=n?n:0,i.width-=(null!=r?r:0)+(null!=s?s:0),i.height-=(null!=n?n:0)+(null!=o?o:0),i.width=Math.max(0,i.width),i.height=Math.max(0,i.height),i}clampToOutsideSeriesRect(t,e,i,n){const{x:o,y:r,width:s,height:a}=t,l=[o,r,o+s,r+a];return(1===n?Math.min:Math.max)(e,l[("x"===i?0:1)+(1===n?0:2)])}calculateAxisDimensions(t){var e,i,n,o,r;const{axis:s,seriesRect:a,paddedBounds:l,axisWidths:c,newAxisWidths:d,primaryTickCounts:u,addInterAxisPadding:h}=t;let{clipSeries:p}=t;const{position:f="left",direction:g}=s,v=null!==(e=d[f])&&void 0!==e?e:0;switch(f){case"top":case"bottom":s.range=[0,a.width],s.gridLength=a.height;break;case"right":case"left":s.range=(t=>t instanceof HN||t instanceof eL?[0,a.height]:[a.height,0])(s),s.gridLength=a.width}const y=this.zoomManager.getAxisZoom(s.id),{min:m=0,max:b=1}=null!=y?y:{};s.visibleRange=[m,b];const S=s.dataDomain.clipped||s.visibleRange[0]>0||s.visibleRange[1]<1;p||(p=S);let x=s.nice?u[g]:void 0;null!=s.thickness&&s.thickness>0?s.maxThickness=s.thickness:g===Lk.Y?s.maxThickness=.3*l.width:s.maxThickness=.3*l.height;const C=s.calculateLayout(x);x=C.primaryTickCount,u[g]=null!==(i=u[g])&&void 0!==i?i:x;let w=0;if(null!=s.thickness&&s.thickness>0)w=s.thickness;else{const{bbox:t}=C;w=g===Lk.X?t.height:t.width}return h&&(w+=15),w=Math.ceil(w),d[f]=(null!==(n=d[f])&&void 0!==n?n:0)+w,s.gridPadding=(null!==(o=c[f])&&void 0!==o?o:0)-(null!==(r=d[f])&&void 0!==r?r:0),{clipSeries:p,axisThickness:w,axisOffset:v,primaryTickCount:x}}positionAxis(t){var e,i,n,o;const{axis:r,axisBound:s,axisWidths:a,seriesRect:l,axisOffset:c,axisThickness:d}=t,{position:u}=r;switch(u){case"top":r.translation.x=s.x+(null!==(e=a.left)&&void 0!==e?e:0),r.translation.y=this.clampToOutsideSeriesRect(l,s.y+1+c+d,"y",1);break;case"bottom":r.translation.x=s.x+(null!==(i=a.left)&&void 0!==i?i:0),r.translation.y=this.clampToOutsideSeriesRect(l,s.y+s.height+1-d-c,"y",-1);break;case"left":r.translation.y=s.y+(null!==(n=a.top)&&void 0!==n?n:0),r.translation.x=this.clampToOutsideSeriesRect(l,s.x+c+d,"x",1);break;case"right":r.translation.y=s.y+(null!==(o=a.top)&&void 0!==o?o:0),r.translation.x=this.clampToOutsideSeriesRect(l,s.x+s.width-d-c,"x",-1)}r.updatePosition({rotation:CT(r.rotation),sideFlag:r.label.getSideFlag()})}shouldFlipXY(){return!this.series.some(t=>!(t instanceof OI&&t.shouldFlipXY()))}}function TI(t,e){let i=Math.floor(t[0]),n=t[1];i=function(t,e,i){const n=Math.abs(e-t)/(i-1),o=Math.floor(Math.log10(n)),r=Math.pow(10,o);return Math.floor(t/r)*r}(i,n,e);const o=function(t,e,i){return function(t){const e=Math.floor(Math.log10(t)),i=Math.pow(10,e),n=t/i*10;if(n>0&&n<=1)return i/10;if(n>1&&n<=2)return 2*i/10;if(n>1&&n<=5)return 5*i/10;if(n>5&&n<=10)return 10*i/10;if(n>10&&n<=20)return 20*i/10;if(n>20&&n<=40)return 40*i/10;if(n>40&&n<=50)return 50*i/10;if(n>50&&n<=100)return 100*i/10;return n}((e-t)/(i-1))}(i,n,e);n=i+(e-1)*o;return[[i,n],function(t,e,i){const n=Math.floor(Math.log10(e)),o=e>0&&e<1?Math.abs(n):0,r=Math.pow(10,o),s=new HM(o);for(let n=0;n<i;n++){const i=t+e*n;s[n]=Math.round(i*r)/r}return s}(i,o,e)]}AI.className="CartesianChart",AI.type="cartesian";class kI extends LN{constructor(){super(...arguments),this.maxSpacing=NaN}}KA([PT(GT(sk(1),jT("minSpacing"))),MN(NaN),YA("design:type",Number)],kI.prototype,"maxSpacing",void 0);class MI extends UN{constructor(t,e=new XM){super(t,e),this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:n,clipped:o}=JA(t,e,i);return{domain:n,clipped:o}}formatDatum(t){return"number"==typeof t?t.toFixed(2):(nT.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(t))}createTick(){return new kI}updateSecondaryAxisTicks(t){if(null==this.dataDomain)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");if(0===this.dataDomain.domain.length)return[];const[e,i]=TI(this.dataDomain.domain,null!=t?t:0);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),i}}function RI(){return LT(t=>"number"==typeof t&&0!==t,"expecting a non-zero Number")}MI.className="NumberAxis",MI.type="number",KA([PT(GT(sk(),VT("max"))),MN(NaN),YA("design:type",Number)],MI.prototype,"min",void 0),KA([PT(GT(sk(),jT("min"))),MN(NaN),YA("design:type",Number)],MI.prototype,"max",void 0);class PI extends MI{normaliseDataDomain(t){const{min:e,max:i}=this,{extent:n,clipped:o}=JA(t,e,i),r=n[0]>n[1],s=n[0]<0&&n[1]>0,a=0===n[0]&&0===n[1];return(r||s||a)&&(t=[],s?nT.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):a&&nT.warn("the data domain has 0 extent, no data is rendered.")),0===n[0]&&(n[0]=1),0===n[1]&&(n[1]=-1),{domain:n,clipped:o}}set base(t){this.scale.base=t}get base(){return this.scale.base}constructor(t){super(t,new yN),this.min=NaN,this.max=NaN}}PI.className="LogAxis",PI.type="log",KA([PT(GT(sk(),VT("max"),RI())),MN(NaN),YA("design:type",Number)],PI.prototype,"min",void 0),KA([PT(GT(sk(),jT("min"),RI())),MN(NaN),YA("design:type",Number)],PI.prototype,"max",void 0);class NI extends LN{constructor(){super(...arguments),this.maxSpacing=NaN}}KA([PT(GT(sk(1),jT("minSpacing"))),MN(NaN),YA("design:type",Number)],NI.prototype,"maxSpacing",void 0);class LI extends UN{constructor(t){super(t,new xN),this.datumFormat="%m/%d/%y, %H:%M:%S",this.min=void 0,this.max=void 0;const{scale:e}=this;this.refreshScale(),this.datumFormatter=e.tickFormat({specifier:this.datumFormat})}normaliseDataDomain(t){var e;let{min:i,max:n}=this,o=!1;return"number"==typeof i&&(i=new Date(i)),"number"==typeof n&&(n=new Date(n)),t.length>2&&(t=(null!==(e=ZA(t))&&void 0!==e?e:[0,1e3]).map(t=>new Date(t))),i instanceof Date&&(o||(o=i>t[0]),t=[i,t[1]]),n instanceof Date&&(o||(o=n<t[1]),t=[t[0],n]),t[0]>t[1]&&(t=[]),{domain:t,clipped:o}}createTick(){return new NI}onLabelFormatChange(t,e){e?super.onLabelFormatChange(t,e):this.labelFormatter=this.scale.tickFormat({ticks:t})}formatDatum(t){var e;return null!==(e=this.moduleCtx.callbackCache.call(this.datumFormatter,t))&&void 0!==e?e:String(t)}calculatePadding(t,e){return[0,1]}}LI.className="TimeAxis",LI.type="time",KA([PT(GT(ZT,VT("max"))),YA("design:type",Object)],LI.prototype,"min",void 0),KA([PT(GT(ZT,jT("min"))),YA("design:type",Object)],LI.prototype,"max",void 0);const II={[MI.type]:MI,[HN.type]:HN,[LI.type]:LI,[eL.type]:eL,[PI.type]:PI},FI={has:t=>Object.prototype.hasOwnProperty.call(II,t),get axesTypes(){return Object.keys(II)}},_I={};function GI(t){var e;return null!==(e=_I[t])&&void 0!==e?e:{}}const BI={};class VI extends qA{constructor(t){var e;super(),this.node=new ZM({name:"background",zIndex:zR.SERIES_BACKGROUND_ZINDEX}),this.rectNode=new mI,this.visible=!0,this.fill="white",this.image=void 0,this.node.appendChild(this.rectNode),null===(e=t.scene.root)||void 0===e||e.appendChild(this.node),this.destroyFns.push(()=>{var e;return null===(e=t.scene.root)||void 0===e?void 0:e.removeChild(this.node)},t.layoutService.addListener("layout-complete",t=>this.onLayoutComplete(t)))}onLayoutComplete(t){const{width:e,height:i}=t.chart;this.rectNode.width=e,this.rectNode.height=i}}KA([PT(UT),lM("node","visible"),YA("design:type",Boolean)],VI.prototype,"visible",void 0),KA([PT(tk),lM("rectNode","fill"),YA("design:type",String)],VI.prototype,"fill",void 0);class jI{set fill(t){this.rh.fill=t}get fill(){return this.rh.fill}set stroke(t){this.rh.stroke=t}get stroke(){return this.rh.stroke}set strokeWidth(t){this.rh.strokeWidth=t}get strokeWidth(){return this.rh.strokeWidth}set width(t){this.rh.width=t}get width(){return this.rh.width}set height(t){this.rh.height=t}get height(){return this.rh.height}set gripLineGap(t){this.rh.gripLineGap=t}get gripLineGap(){return this.rh.gripLineGap}set gripLineLength(t){this.rh.gripLineLength=t}get gripLineLength(){return this.rh.gripLineLength}constructor(t){this.rh=t}}class WI{set fill(t){this.rm.fill=t}get fill(){return this.rm.fill}set stroke(t){this.rm.stroke=t}get stroke(){return this.rm.stroke}set strokeWidth(t){this.rm.strokeWidth=t}get strokeWidth(){return this.rm.strokeWidth}set fillOpacity(t){this.rm.fillOpacity=t}get fillOpacity(){return this.rm.fillOpacity}constructor(t){this.rm=t}}class zI extends dR{constructor(){super(...arguments),this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(t){this._centerX!==t&&(this._centerX=t,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(t){this._centerY!==t&&(this._centerY=t,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(t){this._gripLineGap!==t&&(this._gripLineGap=t,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(t){this._gripLineLength!==t&&(this._gripLineLength=t,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)}get height(){return this._height}computeBBox(){const{centerX:t,centerY:e,width:i,height:n}=this;return new Wk(t-i/2,e-n/2,i,n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}updatePath(){const{path:t,centerX:e,centerY:i,width:n,height:o}=this;t.clear();const r=e-n/2,s=i-o/2,a=this.align(r),l=this.align(s),c=a+this.align(r,n),d=l+this.align(s,o);t.moveTo(a,l),t.lineTo(c,l),t.lineTo(c,d),t.lineTo(a,d),t.lineTo(a,l);const u=this.gripLineGap/2,h=this.gripLineLength/2;t.moveTo(this.align(e-u),this.align(i-h)),t.lineTo(this.align(e-u),this.align(i+h)),t.moveTo(this.align(e+u),this.align(i-h)),t.lineTo(this.align(e+u),this.align(i+h))}}function UI(t,e){t!==e&&(this.dirtyPath=!0)}zI.className="RangeHandle",KA([PT(QT),YA("design:type",Object)],zI.prototype,"_fill",void 0),KA([PT(QT),YA("design:type",Object)],zI.prototype,"_stroke",void 0),KA([PT(ok(0)),YA("design:type",Object)],zI.prototype,"_strokeWidth",void 0),KA([PT(Sk),YA("design:type",Object)],zI.prototype,"_lineCap",void 0),KA([PT(ok(0)),YA("design:type",Number)],zI.prototype,"_width",void 0),KA([PT(ok(0)),YA("design:type",Number)],zI.prototype,"_gripLineGap",void 0),KA([PT(ok(0)),YA("design:type",Number)],zI.prototype,"_gripLineLength",void 0),KA([PT(ok(0)),YA("design:type",Number)],zI.prototype,"_height",void 0);class HI extends dR{constructor(){super(...arguments),this.x=0,this.y=0,this.width=200,this.height=30,this.minRange=.05,this._min=0,this._max=1}set min(t){var e;t=OT(0,t,this.max-this.minRange),this._min===t||isNaN(t)||(this._min=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get min(){return this._min}set max(t){var e;t=OT(this.min+this.minRange,t,1),this._max===t||isNaN(t)||(this._max=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get max(){return this._max}computeBBox(){const{x:t,y:e,width:i,height:n}=this;return new Wk(t,e,i,n)}computeVisibleRangeBBox(){const{x:t,y:e,width:i,height:n,min:o,max:r}=this,s=t+i*o;return new Wk(s,e,t+i*r-s,n)}updatePath(){const{path:t,x:e,y:i,width:n,height:o,min:r,max:s}=this;t.clear();const a=this.align(e),l=this.align(i),c=a+this.align(e,n),d=l+this.align(i,o);t.moveTo(a,l),t.lineTo(c,l),t.lineTo(c,d),t.lineTo(a,d),t.lineTo(a,l);const u=this.align(e+n*r),h=this.align(e+n*s);t.moveTo(u,l),t.lineTo(u,d),t.lineTo(h,d),t.lineTo(h,l),t.lineTo(u,l)}}HI.className="RangeMask",KA([cM({changeValue:UI}),PT(ok(0)),YA("design:type",Object)],HI.prototype,"x",void 0),KA([cM({changeValue:UI}),PT(ok(0)),YA("design:type",Object)],HI.prototype,"y",void 0),KA([cM({changeValue:UI}),PT(ok(0)),YA("design:type",Object)],HI.prototype,"width",void 0),KA([cM({changeValue:UI}),PT(ok(0)),YA("design:type",Object)],HI.prototype,"height",void 0),KA([PT(ok()),YA("design:type",Number)],HI.prototype,"_min",void 0),KA([PT(ok()),YA("design:type",Number)],HI.prototype,"_max",void 0);class KI extends ZM{set x(t){this.mask.x=t,this.updateHandles()}get x(){return this.mask.x}set y(t){this.mask.y=t,this.updateHandles()}get y(){return this.mask.y}set width(t){this.mask.width=t,this.updateHandles()}get width(){return this.mask.width}set height(t){this.mask.height=t,this.updateHandles()}get height(){return this.mask.height}set min(t){this.mask.min=t}get min(){return this.mask.min}set max(t){this.mask.max=t}get max(){return this.mask.max}constructor(){super({name:"rangeSelectorGroup"}),this.minHandle=new zI,this.maxHandle=new zI,this.mask=(()=>{const{x:t,y:e,width:i,height:n,min:o,max:r}=KI.defaults,s=new HI;s.x=t,s.y=e,s.width=i,s.height=n,s.min=o,s.max=r;const{minHandle:a,maxHandle:l}=this;return a.centerX=t,l.centerX=t+i,a.centerY=l.centerY=e+n/2,this.append([s,a,l]),s.onRangeChange=()=>{var t;this.updateHandles(),null===(t=this.onRangeChange)||void 0===t||t.call(this)},s})(),this._x=KI.defaults.x,this._y=KI.defaults.y,this._width=KI.defaults.width,this._height=KI.defaults.height,this._min=KI.defaults.min,this._max=KI.defaults.max,this.isContainerNode=!0}updateHandles(){const{minHandle:t,maxHandle:e,x:i,y:n,width:o,height:r,mask:s}=this;t.centerX=i+o*s.min,e.centerX=i+o*s.max,t.centerY=e.centerY=n+r/2}computeBBox(){return this.mask.computeBBox()}computeVisibleRangeBBox(){return this.mask.computeVisibleRangeBBox()}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===Ik.NONE&&!i)return void(n&&n.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const{mask:o,minHandle:r,maxHandle:s}=this;[o,r,s].forEach(n=>{n.visible&&(i||n.dirty>Ik.NONE)&&(e.save(),n.render(Object.assign(Object.assign({},t),{ctx:e,forceRender:i})),e.restore())}),this.markClean({force:!0}),n&&n.nodesRendered++}}KI.className="Range",KI.defaults={x:0,y:0,width:200,height:30,min:0,max:1};class YI extends qA{set width(t){this.rs.width=t}get width(){return this.rs.width}set height(t){this.rs.height=t}get height(){return this.rs.height}set min(t){this.rs.min=t}get min(){return this.rs.min}set max(t){this.rs.max=t}get max(){return this.rs.max}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){const t=this.enabled&&this.visible;this.rs.visible=t,t?this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max},y:{min:0,max:1}}):this.ctx.zoomManager.updateZoom("navigator")}constructor(t){var e;super(),this.ctx=t,this.rs=new KI,this.mask=new WI(this.rs.mask),this.minHandle=new jI(this.rs.minHandle),this.maxHandle=new jI(this.rs.maxHandle),this.minHandleDragging=!1,this.maxHandleDragging=!1,this.panHandleOffset=NaN,this.enabled=!1,this.margin=10,this._visible=!0,this.rs.onRangeChange=()=>t.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max},y:{min:0,max:1}}),null===(e=t.scene.root)||void 0===e||e.appendChild(this.rs);const i={bypassPause:["animation"]};this.destroyFns.push(t.interactionManager.addListener("drag-start",t=>this.onDragStart(t),i),t.interactionManager.addListener("drag",t=>this.onDrag(t),i),t.interactionManager.addListener("hover",t=>this.onDrag(t),i),t.interactionManager.addListener("drag-end",()=>this.onDragStop(),i),t.layoutService.addListener("before-series",t=>this.layout(t)),t.layoutService.addListener("layout-complete",t=>this.layoutComplete(t)),()=>{var e;return null===(e=t.scene.root)||void 0===e?void 0:e.removeChild(this.rs)},()=>this.ctx.zoomManager.updateZoom("navigator")),this.updateGroupVisibility()}layout({shrinkRect:t}){if(this.enabled){const e=this.rs.height+this.margin;t.shrink(e,"bottom"),this.rs.y=t.y+t.height+this.margin}return{shrinkRect:t}}layoutComplete({series:{rect:t,visible:e}}){this.enabled&&e&&(this.rs.x=t.x,this.rs.width=t.width),this.visible=e}onDragStart(t){if(!this.enabled)return;const{offsetX:e,offsetY:i}=t,{rs:n}=this,{minHandle:o,maxHandle:r,x:s,width:a,min:l}=n,c=n.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(o.containsPoint(e,i)?this.minHandleDragging=!0:r.containsPoint(e,i)?this.maxHandleDragging=!0:c.containsPoint(e,i)&&(this.panHandleOffset=(e-s)/a-l))}onDrag(t){if(!this.enabled)return;const{rs:e,panHandleOffset:i}=this,{x:n,y:o,width:r,height:s,minHandle:a,maxHandle:l}=e,{offsetX:c,offsetY:d}=t,u=n+r*e.min,h=n+r*e.max,p=new Wk(u,o,h-u,s),f=()=>Math.min(Math.max((c-n)/r,0),1);if(a.containsPoint(c,d)||l.containsPoint(c,d)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):p.containsPoint(c,d)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)e.min=f();else if(this.maxHandleDragging)e.max=f();else if(!isNaN(i)){const t=e.max-e.min,n=Math.min(f()-i,1-t);n<=e.min?(e.min=n,e.max=e.min+t):(e.max=n+t,e.min=e.max-t)}}onDragStop(){this.stopHandleDragging()}stopHandleDragging(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN}}KA([cM({changeValue(t){t&&(this.min=0,this.max=1),this.updateGroupVisibility()}}),PT(UT),YA("design:type",Object)],YI.prototype,"enabled",void 0),KA([PT(ok(0)),YA("design:type",Object)],YI.prototype,"margin",void 0);const XI=12,qI=13,$I=17,ZI={},JI={},QI={has:t=>Object.prototype.hasOwnProperty.call(ZI,t),isCartesian:t=>"cartesian"===ZI[t],isPolar:t=>"polar"===ZI[t],isHierarchy:t=>"hierarchy"===ZI[t],get seriesTypes(){return Object.keys(ZI)},get cartesianTypes(){return this.seriesTypes.filter(t=>this.isCartesian(t))},get polarTypes(){return this.seriesTypes.filter(t=>this.isPolar(t))},get hierarchyTypes(){return this.seriesTypes.filter(t=>this.isHierarchy(t))}};function tF(t){var e;return null!==(e=JI[t])&&void 0!==e?e:{}}const eF=Symbol("extends-chart-defaults"),iF=Symbol("extends-legend-defaults"),nF=Symbol("extends-legend-item-defaults"),oF=Symbol("extends-legend-item-marker-defaults"),rF=Symbol("extends-axes-defaults"),sF=Symbol("extends-axes-label-defaults"),aF=Symbol("extends-axes-line-defaults"),lF=Symbol("extends-axes-tick-defaults"),cF=Symbol("extends-axes-grid-line-defaults"),dF=Symbol("extends-series-defaults"),uF=Symbol("extends-cartesian-marker-defaults"),hF=Symbol("override-series-label-defaults"),pF=Symbol("default-font"),fF=Symbol("default-label-colour"),gF=Symbol("default-inverted-label-colour"),vF=Symbol("default-inside-series-label-colour"),yF=Symbol("default-muted-label-colour"),mF=Symbol("default-axis-grid-colour"),bF=Symbol("default-axis-line-colour"),SF=Symbol("default-cross-lines-colour"),xF=Symbol("default-background-colour"),CF=Symbol("default-shadow-colour"),wF=Symbol("default-waterfall-series-positive-colors"),EF=Symbol("default-waterfall-series-negative-colors"),OF=Symbol("default-waterfall-series-total-colors"),DF=Symbol("default-waterfall-series-connector-line-stroke"),AF=Symbol("default-polar-series-stroke"),TF=Symbol("default-diverging-series-colour-range"),kF=Symbol("default-hierarchy-fills"),MF=Symbol("default-hierarchy-strokes");function RF(t,e,i,n,o){const{defaultDuration:r}=i,{addPhaseFn:s,updatePhaseFn:a,removePhaseFn:l}=o,c=(n,o,s)=>{i.animate({id:`${t}_${e}_${o.id}_${n}`,groupId:t,from:0,to:1,ease:gM,onUpdate(t,e){e&&"removed"!==n||(o.path.clear({trackChanges:!0}),s(t,o),o.checkPathDirty())},onStop(){"added"===n&&(o.path.clear({trackChanges:!0}),s(1,o),o.checkPathDirty())},duration:CM[n].animationDuration*r,delay:CM[n].animationDelay*r})};for(const t of n)i.isSkipped()||(c("removed",t,l),c("updated",t,a)),c("added",t,s)}const PF=LT(t=>UL(t)||Object.getPrototypeOf(t)===UR,"expecting a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class");class NF extends Gk{constructor(){super(...arguments),this.enabled=!0,this.shape=HR,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){const{size:t,fill:e,fillOpacity:i,stroke:n,strokeWidth:o,strokeOpacity:r}=this;return{size:t,fill:e,fillOpacity:i,stroke:n,strokeWidth:o,strokeOpacity:r}}getDiameter(){return this.size+this.strokeWidth}}function LF({id:t},e,i){EM(t,"markers",e,i,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1}),i.forEach(t=>t.cleanup())}function IF({id:t},e,i,n){wM(t,"markers",e,i,{fromFn:(t,e)=>{var i,o;const r=null!==(o=null===(i=e.midPoint)||void 0===i?void 0:i.x)&&void 0!==o?o:n,s=vM(r/n)-.1;return{scalingX:0,scalingY:0,animationDelay:Math.max(Math.min(s,1),0),animationDuration:.2}},toFn:()=>({scalingX:1,scalingY:1})})}function FF(t){return{opacity:1,scalingX:1,scalingY:1}}function _F(t,e){var i,n,o,r;return{translationX:null!==(n=null===(i=e.point)||void 0===i?void 0:i.x)&&void 0!==n?n:NaN,translationY:null!==(r=null===(o=e.point)||void 0===o?void 0:o.y)&&void 0!==r?r:NaN}}function GF(t,e){const i=(e,i)=>{const n=t[i][e];return Array.isArray(n)?n[0]:n},n=e=>{const{xValue:n}=e;return t.moved[n]?{point:i(n,"moved"),status:"updated"}:t.removed[n]?{point:i(n,"removed"),status:"removed"}:t.added[n]?{point:i(n,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(t,i)=>{var o,r,s,a,l,c;const{status:d,point:u}=n(i);if("unknown"===d)return{opacity:0};const h=Object.assign({translationX:null!==(r=null===(o=null==u?void 0:u.from)||void 0===o?void 0:o.x)&&void 0!==r?r:t.translationX,translationY:null!==(a=null===(s=null==u?void 0:u.from)||void 0===s?void 0:s.y)&&void 0!==a?a:t.translationY,opacity:t.opacity},CM[d]);return"added"===e?Object.assign(Object.assign(Object.assign({},h),{opacity:0,translationX:null===(l=null==u?void 0:u.to)||void 0===l?void 0:l.x,translationY:null===(c=null==u?void 0:u.to)||void 0===c?void 0:c.y}),CM.added):("added"===d&&(h.opacity=0),h)},toFn:(t,i)=>{var o,r;const{status:s,point:a}=n(i);if("unknown"===s)return{opacity:0};const l=Object.assign({translationX:i.point.x,translationY:i.point.y,opacity:1},CM[s]);return"removed"===s||"removed"===e?Object.assign(Object.assign(Object.assign({},l),{translationX:null===(o=null==a?void 0:a.to)||void 0===o?void 0:o.x,translationY:null===(r=null==a?void 0:a.to)||void 0===r?void 0:r.y,opacity:0}),CM.removed):l}}}function BF(t){return t.reduce(({min:t,max:e},i)=>((null==t||t.point.x>i.point.x)&&(t=i),(null==e||e.point.x<i.point.x)&&(e=i),{min:t,max:e}),{})}function VF(t,e,i){const n=(e.y-t.y)/(e.x-t.x);return{x:i,y:(i-t.x)*n+t.y}}function jF(t,e,i,n){let o=-1,r=0;const s=[];for(;r<t.length;)t[r].change!==e?t[r].change!==i?(s.length>0&&(n(s,o,r),s.length=0),o=r,r++):r++:(s.push(t[r]),r++);s.length>0&&n(s,o,r)}function WF(t,e){jF(t,"out","in",(i,n,o)=>{var r,s;-1===n&&t[o]?i.forEach(e=>e.to=t[o].from):o===t.length&&t[n]?i.forEach(e=>e.to=t[n].from):"intersect"===e&&(null===(r=t[n])||void 0===r?void 0:r.from)&&(null===(s=t[o])||void 0===s?void 0:s.from)?i.forEach(e=>e.to=VF(t[n].from,t[o].from,e.from.x)):i.forEach(t=>t.to=t.from)}),jF(t,"in","out",(i,n,o)=>{var r,s;-1===n&&t[o]?i.forEach(e=>e.from=t[o].to):o===t.length&&t[n]?i.forEach(e=>e.from=t[n].to):"intersect"===e&&(null===(r=t[n])||void 0===r?void 0:r.to)&&(null===(s=t[o])||void 0===s?void 0:s.to)?i.forEach(e=>e.from=VF(t[n].to,t[o].to,e.to.x)):i.forEach(t=>t.from=t.to)})}function zF(t,e,i){const n=isNaN(t.x)?e.x:t.x,o=isNaN(t.y)?e.y:t.y,r=e.x-t.x,s=e.y-t.y;return{x:n+(isNaN(r)?0:r*i),y:o+(isNaN(s)?0:s*i)}}function UF(t,e,i){const{path:n}=i;let o;for(const i of t){const t=e[i.change];if(null==t)continue;const{from:r,to:s}=i;if(null==r||null==s)continue;const{x:a,y:l}=zF(r,s,t);if(!1===i.moveTo)n.lineTo(a,l);else if(!0!==i.moveTo&&o){if(o){const e="in"===i.moveTo?t:1-t,{x:r,y:s}=zF(o,{x:a,y:l},e);n.lineTo(r,s),n.moveTo(a,l)}}else n.moveTo(a,l);o={x:a,y:l}}}function HF({id:t},e,i){EM(t,"path_properties",e,i,{clipScalingX:0},{clipScalingX:1},{start:{clipMode:"normal"},finish:{clipMode:void 0}})}function KF(t){return e=>({opacity:t.getOpacity(),clipScalingX:1,clipMode:void 0})}function YF(t,e){if(!e)return NaN;if(t instanceof Date&&(t=t.getTime()),"continuous"===e.type&&"number"==typeof t){return(t-e.domain[0])/(e.domain[1]-e.domain[0])*(e.range[1]-e.range[0])+e.range[0]}if("log"===e.type&&"number"==typeof t)return e.convert(t);const i=e.domain.findIndex(e=>e===t);return i>=0?e.range[i]:NaN}function XF(t,e){const i=Number(t),n=Number(e);return isNaN(i)||isNaN(n)?t===e:Math.abs(n-i)<.25}function qF(t=!1,e=!1){return t===e?!!t:t?"in":"out"}function $F(t,e,i={}){var n,o,r,s;const{backfillSplitMode:a="intersect"}=i,l=e=>{var i,n;return{x:YF(null!==(i=e.xValue)&&void 0!==i?i:NaN,t.scales.x),y:YF(null!==(n=e.yValue)&&void 0!==n?n:NaN,t.scales.y)}},c=t=>{var i,n;return{x:YF(null!==(i=t.xValue)&&void 0!==i?i:NaN,e.scales.x),y:YF(null!==(n=t.yValue)&&void 0!==n?n:NaN,e.scales.y)}},d=[],u={added:{},moved:{},removed:{}},h=(t,e,i,n="move")=>{t&&(isNaN(t.point.x)||isNaN(t.point.y))&&(t=e);const o={from:null==t?void 0:t.point,to:null==e?void 0:e.point,moveTo:qF(null==t?void 0:t.point.moveTo,null==e?void 0:e.point.moveTo),change:n};"move"===n?(u.moved[i]=o,y++,m++):"in"===n?(u.added[i]=o,m++):"out"===n&&(u.removed[i]=o,y++),d.push(o)},{min:p,max:f}=BF(e.nodeData),{min:g,max:v}=BF(t.nodeData);let y=0,m=0;for(;y<e.nodeData.length||m<t.nodeData.length;){const i=e.nodeData[y],a=t.nodeData[m],d=i?l(i):void 0,u=a?c(a):void 0,b=void 0;if(d&&XF(d.x,null==a?void 0:a.point.x))h(i,a,a.xValue,"move");else if(d&&d.x<(null!==(n=null==g?void 0:g.point.x)&&void 0!==n?n:-1/0))h(i,b,i.xValue,"out");else if(d&&d.x>(null!==(o=null==v?void 0:v.point.x)&&void 0!==o?o:1/0))h(i,b,i.xValue,"out");else if(u&&u.x<(null!==(r=null==p?void 0:p.point.x)&&void 0!==r?r:-1/0))h(b,a,a.xValue,"in");else if(u&&u.x>(null!==(s=null==f?void 0:f.point.x)&&void 0!==s?s:1/0))h(b,a,a.xValue,"in");else if(d&&d.x<(null==a?void 0:a.point.x))h(i,b,i.xValue,"out");else if(u&&u.x<(null==i?void 0:i.point.x))h(b,a,a.xValue,"in");else if(i)h(i,b,i.xValue,"out");else{if(!a)throw new Error("Unable to process points");h(b,a,a.xValue,"in")}}return WF(d,a),{result:d,resultMap:u}}function ZF(t,e,i,n={}){var o,r,s;const{backfillSplitMode:a="intersect",multiDatum:l=!1}=n,c=[],d={added:{},moved:{},removed:{}},u={added:{},moved:{},removed:{}};let h=void 0,p=void 0;const f=(t,e)=>{var i,n;const o="move"===e.change?"moved":"in"===e.change?"added":"removed";l?(null!==(i=(n=u[o])[t])&&void 0!==i||(n[t]=[]),u[o][t].push(e)):d[o][t]=e,h=e,p=t};let g=0,v=0,y=!1;for(;g<e.nodeData.length||v<t.nodeData.length;){const n=e.nodeData[g],a=t.nodeData[v];let d;if((null==n?void 0:n.xValue)===(null==a?void 0:a.xValue))d={change:"move",moveTo:qF(null!==(o=n.point.moveTo)&&void 0!==o&&o,a.point.moveTo),from:n.point,to:a.point},f(n.xValue,d),g++,v++;else if(i.removed.indexOf(null==n?void 0:n.xValue)>=0)d={change:"out",moveTo:null!==(r=n.point.moveTo)&&void 0!==r&&r,from:n.point},f(n.xValue,d),g++;else if(i.added.indexOf(null==a?void 0:a.xValue)>=0)d={change:"in",moveTo:null!==(s=a.point.moveTo)&&void 0!==s&&s,to:a.point},f(a.xValue,d),v++;else if(l&&h&&p===(null==n?void 0:n.xValue))d=Object.assign({},h),f(n.xValue,d),g++;else{if(!l||!h||p!==(null==a?void 0:a.xValue)){y=!0;break}d=Object.assign({},h),f(a.xValue,d),v++}c.push(d)}let m=-1/0;return y||(y=c.some(t=>{const{change:e,to:{x:i=-1/0}={}}=t;if("out"===e)return;const n=i<m;return m=i,n})),y?{result:void 0,resultMap:void 0}:(WF(c,a),l?{result:c,resultMap:u}:{result:c,resultMap:d})}function JF(t,e,i,n,o){const r=function(t,e){let i="updated";const n=t=>t.visible;return!n(e)&&n(t)?i="added":n(e)&&!n(t)&&(i="removed"),i}(t,e);return{status:r,path:{addPhaseFn:(t,e)=>{o(i,{move:1,in:t},e)},updatePhaseFn:(t,e)=>{o(i,{move:t},e)},removePhaseFn:(t,e)=>{o(i,{move:0,out:t},e)}},pathProperties:function(t,e){const i="none"===e?"updated":t,n={fromFn:e=>{let n;return n="removed"===t?{finish:{visible:!1}}:"added"===t?{start:{visible:!0}}:{},Object.assign(Object.assign({},CM[i]),n)},toFn:t=>Object.assign({},CM[i])};return"fade"===e?{fromFn:e=>{const i="added"===t?0:e.opacity;return Object.assign({opacity:i},n.fromFn(e))},toFn:e=>{const i="removed"===t?0:1;return Object.assign({opacity:i},n.toFn(e))}}:n}(r,n)}}var QF,t_;function e_(t){const{points:e}=t.fillData;return{top:e.slice(0,e.length/2),bottom:e.slice(e.length/2).reverse()}}function i_(t,e,i){return{scales:e.scales,nodeData:i[t],visible:e.visible}}function n_(t,e,i){var n;const o="category"===(null===(n=t.scales.x)||void 0===n?void 0:n.type);let r="updated";e.visible&&!t.visible?r="removed":!e.visible&&t.visible&&(r="added");const{resultMap:s}=o&&i?ZF(t,e,i,{backfillSplitMode:"static",multiDatum:!0}):$F(t,e,{backfillSplitMode:"static"}),{top:a,bottom:l}=o&&i?function(t,e,i){const n=e_(e),o=e_(t),r={multiDatum:!0};return{top:ZF(i_("top",t,o),i_("top",e,n),i,r),bottom:ZF(i_("bottom",t,o),i_("bottom",e,n),i,r)}}(t,e,i):function(t,e){const i=e_(e),n=e_(t);return{top:$F(i_("top",t,n),i_("top",e,i)),bottom:$F(i_("bottom",t,n),i_("bottom",e,i))}}(t,e);if(void 0===s||void 0===a.result||void 0===l.result)return;const c=[...a.result,...l.result.reverse()];return{fill:JF(t,e,c,"none",UF),marker:GF(s,r)}}KA([PT(UT),_k({redraw:Ik.MAJOR}),YA("design:type",Object)],NF.prototype,"enabled",void 0),KA([PT(PF),_k({redraw:Ik.MAJOR}),YA("design:type",Object)],NF.prototype,"shape",void 0),KA([PT(ok(0)),_k({redraw:Ik.MAJOR}),YA("design:type",Number)],NF.prototype,"size",void 0),KA([PT(tk),_k({redraw:Ik.MAJOR}),YA("design:type",String)],NF.prototype,"fill",void 0),KA([PT(rk(0,1)),_k({redraw:Ik.MAJOR}),YA("design:type",Number)],NF.prototype,"fillOpacity",void 0),KA([PT(tk),_k({redraw:Ik.MAJOR}),YA("design:type",String)],NF.prototype,"stroke",void 0),KA([PT(rk(0)),_k({redraw:Ik.MAJOR}),YA("design:type",Number)],NF.prototype,"strokeWidth",void 0),KA([PT(rk(0,1)),_k({redraw:Ik.MAJOR}),YA("design:type",Number)],NF.prototype,"strokeOpacity",void 0),KA([PT(zT),_k({redraw:Ik.MAJOR}),YA("design:type",Function)],NF.prototype,"formatter",void 0),function(t){t[t.Fill=0]="Fill",t[t.Stroke=1]="Stroke",t[t.Marker=2]="Marker",t[t.Label=3]="Label"}(QF||(QF={}));class o_ extends OI{constructor(t){super({moduleCtx:t,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[iP.NEAREST_BY_MAIN_AXIS_FIRST,iP.EXACT_SHAPE_MATCH],animationResetFns:{path:KF({getOpacity:()=>this.getOpacity()}),label:mP,marker:(t,e)=>Object.assign(Object.assign({},{opacity:1,scalingX:1,scalingY:1}),_F(0,e))}}),this.tooltip=new IP,this.marker=new NF,this.label=new BR,this.fill="#c16068",this.stroke="#874349",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.xName=void 0,this.strokeWidth=2,this.shadow=void 0}processData(t){return XA(this,void 0,void 0,(function*(){const{xKey:e,yKey:i,normalizedTo:n,data:o,visible:r,seriesGrouping:{groupIndex:s=this.id}={}}=this;if(null==e||null==i||null==o)return;const a=!this.ctx.animationManager.isSkipped(),{isContinuousX:l,isContinuousY:c}=this.isContinuous(),d=[`area-stack-${s}-yValues`,`area-stack-${s}-yValues-trailing`,`area-stack-${s}-yValues-prev`,`area-stack-${s}-yValues-trailing-prev`,`area-stack-${s}-yValues-marker`],u=[],h=n&&isFinite(n)?n:void 0;h&&(u.push(MR(this,[d[0],d[1],d[4]],h,"range")),u.push(MR(this,[d[2],d[3]],h,"range"))),!l&&a&&this.processedData&&u.push(_R(this.processedData)),a&&u.push(NR(this));const p={invalidValue:null};r||(p.forceValue=0),yield this.requestDataModel(t,o,{props:[sP(this,e,l,{id:"xValue"}),aP(this,i,c,Object.assign({id:"yValueRaw"},p)),...cP(this,i,c,"window","current",Object.assign(Object.assign({id:"yValueEnd"},p),{groupId:d[0]})),...cP(this,i,c,"window-trailing","current",Object.assign(Object.assign({id:"yValueStart"},p),{groupId:d[1]})),...cP(this,i,c,"window","last",Object.assign(Object.assign({id:"yValuePreviousEnd"},p),{groupId:d[2]})),...cP(this,i,c,"window-trailing","last",Object.assign(Object.assign({id:"yValuePreviousStart"},p),{groupId:d[3]})),...cP(this,i,c,"normal","current",Object.assign(Object.assign({id:"yValueCumulative"},p),{groupId:d[4]})),...u],groupByKeys:!0}),this.animationState.transition("updateData")}))}getSeriesDomain(t){const{processedData:e,dataModel:i,axes:n}=this;if(!e||!i)return[];const o=n[Lk.X],r=n[Lk.Y],s=i.resolveProcessedDataDefById(this,"xValue"),a=i.getDomain(this,"xValue","key",e),l=i.getDomain(this,"yValueEnd","value",e);if(t===Lk.X)return"key"===(null==s?void 0:s.def.type)&&"category"===s.def.valueType?a:fL(ZA(a),o);if(r instanceof PI||r instanceof LI)return fL(l,r);return fL([l[0]>0?0:l[0],l[1]<0?0:l[1]],r)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e;return XA(this,void 0,void 0,(function*(){const{axes:i,data:n,processedData:{data:o}={},dataModel:r}=this,s=i[Lk.X],a=i[Lk.Y];if(!(s&&a&&n&&r))return[];const{yKey:l="",xKey:c="",marker:d,label:u,fill:h,stroke:p}=this,{scale:f}=s,{scale:g}=a,v=YM.is(g),y=(null!==(e=f.bandwidth)&&void 0!==e?e:0)/2,m=r.resolveProcessedDataDefsByIds(this,["yValueStart","yValueEnd","yValueRaw","yValuePreviousStart","yValuePreviousEnd","yValueCumulative"]),b=t=>{const{point:e}=t,i=HA(t,["point"]);return Object.assign(Object.assign({},i),{point:Object.assign(Object.assign({},e),{moveTo:!0})})},S=(t,e,i)=>{const n=f.convert(t)+y,o=g.convert(e);return[{point:{x:n,y:g.convert(i)},yValue:i,xValue:t},{point:{x:n,y:o},yValue:e,xValue:t}]},x=(t,e,i)=>{let n;const o=this.normalizedTo&&isFinite(this.normalizedTo),r=o&&v&&CR(i);(!o&&!isNaN(i)||r)&&(n=e);return{x:f.convert(t)+y,y:g.convert(n),size:d.size}},C=l,w=[],E=[],O={itemId:C,fillData:{itemId:C,points:[]},strokeData:{itemId:C,points:[]},labelData:w,nodeData:E,scales:t.calculateScaling.call(this),visible:this.visible},D=O.fillData.points,A=[],T=O.strokeData.points;let k,M=-1,R=-1/0;return null==o||o.forEach(t=>{const{keys:e,keys:[i],datum:n,values:o}=t;o.forEach((t,o)=>{var s,a,f;M++;const g=n[o],v=r.resolveProcessedDataDefsValues(m,{keys:e,values:t}),{yValueRaw:y,yValueCumulative:O}=v;let{yValueStart:P,yValueEnd:N,yValuePreviousStart:L,yValuePreviousEnd:I}=v;const F=null!=y,_=x(i,+O,y);if(F&&d&&E.push({index:M,series:this,itemId:C,datum:g,midPoint:{x:_.x,y:_.y},cumulativeValue:N,yValue:y,xValue:i,yKey:l,xKey:c,point:_,fill:null!==(s=d.fill)&&void 0!==s?s:h,stroke:null!==(a=d.stroke)&&void 0!==a?a:p,strokeWidth:null!==(f=d.strokeWidth)&&void 0!==f?f:this.getStrokeWidth(this.strokeWidth)}),F&&u){const t=this.getLabelText(u,{value:y,datum:g,xKey:c,yKey:l,xName:this.xName,yName:this.yName},t=>ER(t)?t.toFixed(2):String(t));w.push({index:M,series:this,itemId:l,datum:g,x:_.x,y:_.y,label:t?{text:t,fontStyle:u.fontStyle,fontWeight:u.fontWeight,fontSize:u.fontSize,fontFamily:u.fontFamily,textAlign:"center",textBaseline:"bottom",fill:u.color}:void 0})}null!=R&&null!=y||(P=null!=P?P:0,N=null!=P?P:0,L=null!=L?L:0,I=null!=L?L:0);const[G,B]=S(k,L,I),[V,j]=S(i,P,N);null!=k&&null!=i&&(D.push(G),A.push(B),D.push(V),A.push(j)),F&&null!=R&&M>0&&(T.push(b(G)),T.push(V)),k=i,R=y})}),T.length>0&&(T[0]=b(T[0])),A.reverse(),D.push(...A),[O]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(HL(t))}updatePathNodes(t){return XA(this,void 0,void 0,(function*(){const{opacity:e,visible:i,animationEnabled:n}=t,[o,r]=t.paths,{seriesRectHeight:s,seriesRectWidth:a}=this.nodeDataDependencies,l=this.getStrokeWidth(this.strokeWidth);r.setProperties({tag:QF.Stroke,fill:void 0,lineJoin:r.lineCap="round",pointerEvents:Uk.None,stroke:this.stroke,strokeWidth:l,strokeOpacity:this.strokeOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,opacity:e,visible:i}),o.setProperties({tag:QF.Fill,stroke:void 0,lineJoin:"round",pointerEvents:Uk.None,fill:this.fill,fillOpacity:this.fillOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,strokeOpacity:this.strokeOpacity,fillShadow:this.shadow,opacity:e,visible:i||n,strokeWidth:l});const c=t=>{var e,i;null==t.clipPath&&(t.clipPath=new lR,t.clipScalingX=1,t.clipScalingY=1),null===(e=t.clipPath)||void 0===e||e.clear({trackChanges:!0}),null===(i=t.clipPath)||void 0===i||i.rect(-25,-25,(null!=a?a:0)+50,(null!=s?s:0)+50)};c(r),c(o)}))}updatePaths(t){return XA(this,void 0,void 0,(function*(){this.updateAreaPaths([t.paths],[t.contextData])}))}updateAreaPaths(t,e){this.updateFillPath(t,e),this.updateStrokePath(t,e)}updateFillPath(t,e){e.forEach(({fillData:e},i)=>{const[n]=t[i],{path:o}=n;o.clear({trackChanges:!0});for(const{point:t}of e.points)t.moveTo?o.moveTo(t.x,t.y):o.lineTo(t.x,t.y);o.closePath(),n.checkPathDirty()})}updateStrokePath(t,e){e.forEach(({strokeData:e},i)=>{const[,n]=t[i],{path:o}=n;o.clear({trackChanges:!0});for(const{point:t}of e.points)t.moveTo?o.moveTo(t.x,t.y):o.lineTo(t.x,t.y);n.checkPathDirty()})}updateMarkerSelection(t){return XA(this,void 0,void 0,(function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:n}}=this,o=n&&e?e:[];return this.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(o)}))}updateMarkerNodes(t){return XA(this,void 0,void 0,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:n="",yKey:o="",marker:r,fill:s,stroke:a,strokeWidth:l,fillOpacity:c,strokeOpacity:d}=this,u=vR(i&&this.highlightStyle.item,r.getStyle(),{fill:s,stroke:a,strokeWidth:l,fillOpacity:c,strokeOpacity:d});e.each((t,e)=>{this.updateMarkerStyle(t,r,{datum:e,highlighted:i,xKey:n,yKey:o},u)}),i||this.marker.markClean()}))}updateLabelSelection(t){return XA(this,void 0,void 0,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,t=>{t.tag=QF.Label})}))}updateLabelNodes(t){return XA(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:n,fontWeight:o,fontSize:r,fontFamily:s,color:a}=this.label;e.each((t,e)=>{const{x:l,y:c,label:d}=e;d&&i&&this.visible?(t.fontStyle=n,t.fontWeight=o,t.fontSize=r,t.fontFamily=s,t.textAlign=d.textAlign,t.textBaseline=d.textBaseline,t.text=d.text,t.x=l,t.y=c-10,t.fill=a,t.visible=!0):t.visible=!1})}))}getTooltipHtml(t){const{xKey:e,id:i,axes:n,xName:o,yName:r,tooltip:s,marker:a,dataModel:l}=this,{yKey:c,xValue:d,yValue:u,datum:h}=t,p=n[Lk.X],f=n[Lk.Y];if(!(e&&c&&p&&f&&ER(u)&&l))return"";const g=p.formatDatum(d),v=f.formatDatum(u),y=mR(r),m=mR(g+": "+v),b=vR({fill:this.fill},a.getStyle(),{stroke:this.stroke,strokeWidth:this.strokeWidth}),{fill:S}=this.getMarkerStyle(a,{datum:t,xKey:e,yKey:c,highlighted:!1},b);return s.toTooltipHtml({title:y,content:m,backgroundColor:S},{datum:h,xKey:e,xName:o,yKey:c,yName:r,color:S,title:y,seriesId:i})}getLegendData(t){var e,i,n,o,r;const{data:s,id:a,xKey:l,yKey:c,yName:d,marker:u,fill:h,stroke:p,fillOpacity:f,strokeOpacity:g,visible:v}=this;return(null==s?void 0:s.length)&&l&&c&&"category"===t?[{legendType:t,id:a,itemId:c,seriesId:a,enabled:v,label:{text:null!=d?d:c},marker:{shape:u.shape,fill:null!==(e=u.fill)&&void 0!==e?e:h,stroke:null!==(i=u.stroke)&&void 0!==i?i:p,fillOpacity:null!==(n=u.fillOpacity)&&void 0!==n?n:f,strokeOpacity:null!==(o=u.strokeOpacity)&&void 0!==o?o:g,strokeWidth:null!==(r=u.strokeWidth)&&void 0!==r?r:0}}]:[]}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,contextData:n,paths:o}=t,{animationManager:r}=this.ctx,{seriesRectWidth:s=0}=this.nodeDataDependencies;this.updateAreaPaths(o,n),HF(this,r,o.flat()),GP(e,_F),IF(this,r,e,s),vP(this,"labels",r,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:n}=this.ctx,{markerSelections:o,labelSelections:r,contextData:s,paths:a,previousContextData:l}=t;if(super.resetAllAnimation(t),0===s.length||!l||0===l.length)return n.skipCurrentBatch(),void this.updateAreaPaths(a,s);const[[c,d]]=a,[u]=s,[h]=l,p=n_(u,h,null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff);if(void 0===p)return n.skipCurrentBatch(),void this.updateAreaPaths(a,s);wM(this.id,"marker_update",n,o,p.marker),wM(this.id,"fill_path_properties",n,[c],p.fill.pathProperties),RF(this.id,"fill_path_update",n,[c],p.fill.path),this.updateStrokePath(a,s),function({id:t},e,i,n){EM(t,e,i,n,{opacity:0},{opacity:1},mM)}(this,"stroke",n,[d]),vP(this,"labels",n,r)}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new ZM}}o_.className="AreaSeries",o_.type="area",KA([PT(QT),YA("design:type",String)],o_.prototype,"fill",void 0),KA([PT(QT),YA("design:type",String)],o_.prototype,"stroke",void 0),KA([PT(ok(0,1)),YA("design:type",Object)],o_.prototype,"fillOpacity",void 0),KA([PT(ok(0,1)),YA("design:type",Object)],o_.prototype,"strokeOpacity",void 0),KA([PT(mk),YA("design:type",Array)],o_.prototype,"lineDash",void 0),KA([PT(ok(0)),YA("design:type",Number)],o_.prototype,"lineDashOffset",void 0),KA([PT(YT),YA("design:type",String)],o_.prototype,"xKey",void 0),KA([PT(YT),YA("design:type",String)],o_.prototype,"xName",void 0),KA([PT(YT),YA("design:type",String)],o_.prototype,"yKey",void 0),KA([PT(YT),YA("design:type",String)],o_.prototype,"yName",void 0),KA([PT(rk(0)),YA("design:type",Number)],o_.prototype,"normalizedTo",void 0),KA([PT(ok(0)),YA("design:type",Object)],o_.prototype,"strokeWidth",void 0);class r_ extends OI{constructor(){super(...arguments),this.direction="vertical"}getBandScalePadding(){return{inner:.2,outer:.1}}shouldFlipXY(){return"horizontal"===this.direction}getBarDirection(){return this.shouldFlipXY()?Lk.X:Lk.Y}getCategoryDirection(){return this.shouldFlipXY()?Lk.Y:Lk.X}getValueAxis(){const t=this.getBarDirection();return this.axes[t]}getCategoryAxis(){const t=this.getCategoryDirection();return this.axes[t]}}function s_(t,e){const{startingX:i,startingY:n}=function(t,e){const i=e[t?Lk.Y:Lk.X];let n=1/0,o=0;if(!i)return{startingX:n,startingY:o};t?o=i.scale.convert(YM.is(i.scale)?0:Math.max(...i.range)):n=i.scale.convert(YM.is(i.scale)?0:Math.min(...i.range));return{startingX:n,startingY:o}}(t,e),o=t=>{var e;return AT(null!==(e=t.yValue)&&void 0!==e?e:0)};return{isVertical:t,calculate:(e,r)=>{let s=t?e.x:i,a=t?n:e.y,l=t?e.width:0,c=t?0:e.height;return r&&(isNaN(s)||isNaN(a))&&(({x:s,y:a}=r),l=t?r.width:0,c=t?0:r.height,t&&!o(r)?a+=r.height:!t&&o(r)&&(s+=r.width)),{x:s,y:a,width:l,height:c}}}}function a_(t){const e=t=>null==t||isNaN(t.x)||isNaN(t.y);return{toFn:(i,n,o)=>"removed"===o||e(n)?t.calculate(n,i.previousDatum):{x:n.x,y:n.y,width:n.width,height:n.height},fromFn:(i,n,o)=>{"updated"===o&&e(n)?o="removed":"updated"===o&&e(i.previousDatum)&&(o="added");let r={x:i.x,y:i.y,width:i.width,height:i.height};return"unknown"!==o&&"added"!==o||(r=t.calculate(n,i.previousDatum)),Object.assign(Object.assign({},r),CM[o])}}}function l_(t,{x:e,y:i,width:n,height:o}){return{x:e,y:i,width:n,height:o}}KA([PT(Nk),YA("design:type",String)],r_.prototype,"direction",void 0),function(t){t[t.Bar=0]="Bar",t[t.Label=1]="Label"}(t_||(t_={}));class c_ extends BR{constructor(){super(...arguments),this.placement="inside"}}KA([PT(dk("inside","outside")),YA("design:type",String)],c_.prototype,"placement",void 0);class d_ extends r_{constructor(t){super({moduleCtx:t,pickModes:[iP.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationResetFns:{datum:l_,label:mP}}),this.label=new c_,this.tooltip=new IP,this.fill="#c16068",this.stroke="#874349",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.stackGroup=void 0,this.strokeWidth=1,this.shadow=void 0,this.groupScale=new ET,this.smallestDataInterval=void 0}resolveKeyDirection(t){return this.getBarDirection()===Lk.X?t===Lk.X?Lk.Y:Lk.X:t}processData(t){var e,i,n,o;return XA(this,void 0,void 0,(function*(){const{xKey:r,yKey:s,normalizedTo:a,seriesGrouping:{groupIndex:l=this.id}={},data:c=[]}=this;if(null==r||null==s||null==c)return;const d=!this.ctx.animationManager.isSkipped(),u=Math.abs(null!=a?a:NaN),h=YM.is(null===(e=this.getCategoryAxis())||void 0===e?void 0:e.scale),p=YM.is(null===(i=this.getValueAxis())||void 0===i?void 0:i.scale),f=`bar-stack-${l}-yValues`,g=f+"-trailing",v=u&&isFinite(u)?u:void 0,y=[];v&&y.push(MR(this,[f,g],v,"range")),d&&this.processedData&&y.push(_R(this.processedData)),d&&y.push(NR(this));const m=this.visible?{}:{forceValue:0},{processedData:b}=yield this.requestDataModel(t,c,{props:[sP(this,r,h,{id:"xValue"}),aP(this,s,p,Object.assign({id:"yValue-raw",invalidValue:null},m)),...cP(this,s,p,"normal","current",Object.assign({id:"yValue-end",invalidValue:null,missingValue:0,groupId:f,separateNegative:!0},m)),...cP(this,s,p,"trailing","current",Object.assign({id:"yValue-start",invalidValue:null,missingValue:0,groupId:g,separateNegative:!0},m)),...h?[AR]:[],...y],groupByKeys:!0});this.smallestDataInterval={x:null!==(o=null===(n=b.reduced)||void 0===n?void 0:n.smallestKeyInterval)&&void 0!==o?o:1/0,y:1/0},this.animationState.transition("updateData")}))}getSeriesDomain(t){var e;const{processedData:i,dataModel:n}=this;if(!i||!n)return[];const{reduced:{[AR.property]:o}={}}=i,r=this.getCategoryAxis(),s=this.getValueAxis(),a=n.resolveProcessedDataDefById(this,"xValue"),l=n.getDomain(this,"xValue","key",i),c=n.getDomain(this,"yValue-end","value",i);if(t===this.getCategoryDirection()){if("key"===(null==a?void 0:a.def.type)&&"category"===(null==a?void 0:a.def.valueType))return l;const i=null!=o&&isFinite(o)?o:0,n=null!==(e=ZA(l))&&void 0!==e?e:[NaN,NaN];return t===Lk.Y?fL([n[0]+-i,n[1]],r):fL([n[0],n[1]+i],r)}if(this.getValueAxis()instanceof PI)return fL(c,s);return fL([c[0]>0?0:c[0],c[1]<0?0:c[1]],s)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});return XA(this,void 0,void 0,(function*(){const{dataModel:e}=this,i=this.getCategoryAxis(),n=this.getValueAxis();if(!(e&&i&&n))return[];const o=i.scale,r=n.scale,{groupScale:s,yKey:a="",xKey:l="",fill:c,stroke:d,strokeWidth:u,label:h,processedData:p,ctx:{seriesStateManager:f},smallestDataInterval:g}=this,v=YM.is(o)?o.calcBandwidth(null==g?void 0:g.x):o.bandwidth,y=[],{index:m,visibleGroupCount:b}=f.getVisiblePeerGroupIndex(this);for(let t=0;t<b;t++)y.push(String(t));s.domain=y,s.range=[0,null!=v?v:0],i instanceof HN?s.paddingInner=i.groupPaddingInner:s.padding=i instanceof eL?.1:0,s.round=0!==s.padding;const S=s.bandwidth>=1?s.bandwidth:s.rawBandwidth,x=e.resolveProcessedDataIndexById(this,"xValue").index,C=e.resolveProcessedDataIndexById(this,"yValue-raw").index,w=e.resolveProcessedDataIndexById(this,"yValue-start").index,E=e.resolveProcessedDataIndexById(this,"yValue-end").index,O=!this.ctx.animationManager.isSkipped(),D={itemId:a,nodeData:[],labelData:[],scales:t.calculateScaling.call(this),visible:this.visible||O};return null==p||p.data.forEach(({keys:t,datum:e,values:i})=>{const n=t[x],p=o.convert(n),f=+i[0][E],g=+i[0][w],v=i[0][C],y=p+s.convert(String(m));if(isNaN(f))return;const b=r.convert(f),O=r.convert(g),A=this.getBarDirection()===Lk.X,T={x:A?Math.min(b,O):y,y:A?y:Math.min(b,O),width:A?Math.abs(O-b):S,height:A?S:Math.abs(O-b)},{fontStyle:k,fontWeight:M,fontSize:R,fontFamily:P,color:N,placement:L}=h,I=this.getLabelText(this.label,{datum:e[0],value:v,xKey:l,yKey:a,xName:this.xName,yName:this.yName,legendItemName:this.legendItemName},t=>ER(t)?t.toFixed(2):""),F=I?Object.assign({text:I,fill:N,fontStyle:k,fontWeight:M,fontSize:R,fontFamily:P},function({isPositive:t,isVertical:e,placement:i,padding:n=0,rect:o}){let r=o.x+o.width/2,s=o.y+o.height/2,a="center",l="middle";switch(i){case"start":e?(s=t?o.y+o.height+n:o.y-n,l=t?"top":"bottom"):(r=t?o.x-n:o.x+o.width+n,a=t?"start":"end");break;case"outside":case"end":e?(s=t?o.y-n:o.y+o.height+n,l=t?"bottom":"top"):(r=t?o.x+o.width+n:o.x-n,a=t?"start":"end")}return{x:r,y:s,textAlign:a,textBaseline:l}}({isPositive:v>=0,isVertical:!A,placement:L,rect:T})):void 0,_=this.shouldFlipXY()?T.height:T.width,G={series:this,itemId:a,datum:e[0],cumulativeValue:f,xValue:n,yValue:v,yKey:a,xKey:l,capDefaults:{lengthRatioMultiplier:_,lengthMax:_},x:T.x,y:T.y,width:T.width,height:T.height,midPoint:{x:T.x+T.width/2,y:T.y+T.height/2},fill:c,stroke:d,strokeWidth:u,label:F};D.nodeData.push(G),D.labelData.push(G)}),[D]}))}nodeFactory(){return new mI}updateDatumSelection(t){return XA(this,void 0,void 0,(function*(){return t.datumSelection.update(t.nodeData,t=>{t.tag=t_.Bar},t=>t.xValue)}))}updateDatumNodes(t){return XA(this,void 0,void 0,(function*(){const{datumSelection:e,isHighlight:i}=t,{yKey:n="",fill:o,stroke:r,fillOpacity:s,strokeOpacity:a,lineDash:l,lineDashOffset:c,shadow:d,formatter:u,id:h,highlightStyle:{item:p},ctx:f,stackGroup:g}=this,v=this.axes[Lk.X],y=function(t=[]){const[e,i]=t;return!(0!==e||1!==i)}(null==v?void 0:v.visibleRange),m=this.getCategoryDirection()===Lk.X;e.each((t,e)=>{const v={fill:o,stroke:r,fillOpacity:s,strokeOpacity:a,lineDash:l,lineDashOffset:c,fillShadow:d,strokeWidth:this.getStrokeWidth(this.strokeWidth)},b=m?e.width>0:e.height>0,S=function(t){var e,i,n,o,r,{datum:s,isHighlighted:a,style:l,highlightStyle:c,formatter:d,seriesId:u,ctx:{callbackCache:h}}=t,p=HA(t,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","ctx"]);const{fill:f,fillOpacity:g,stroke:v,strokeWidth:y}=vR(a&&c,l),{strokeOpacity:m,fillShadow:b,lineDash:S,lineDashOffset:x}=l;let C;return d&&(C=h.call(d,Object.assign({datum:s.datum,xKey:s.xKey,fill:f,stroke:v,strokeWidth:y,highlighted:a,seriesId:u},p))),{fill:null!==(e=null==C?void 0:C.fill)&&void 0!==e?e:f,stroke:null!==(i=null==C?void 0:C.stroke)&&void 0!==i?i:v,strokeWidth:null!==(n=null==C?void 0:C.strokeWidth)&&void 0!==n?n:y,fillOpacity:null!==(o=null==C?void 0:C.fillOpacity)&&void 0!==o?o:g,strokeOpacity:null!==(r=null==C?void 0:C.strokeOpacity)&&void 0!==r?r:m,lineDash:S,lineDashOffset:x,fillShadow:b}}({datum:e,isHighlighted:i,style:v,highlightStyle:p,formatter:u,seriesId:h,stackGroup:g,ctx:f,yKey:n});S.crisp=y,S.visible=b,function({rect:t,config:e}){const{crisp:i=!0,fill:n,stroke:o,strokeWidth:r,fillOpacity:s,strokeOpacity:a,lineDash:l,lineDashOffset:c,fillShadow:d,visible:u=!0}=e;t.crisp=i,t.fill=n,t.stroke=o,t.strokeWidth=r,t.fillOpacity=s,t.strokeOpacity=a,t.lineDash=l,t.lineDashOffset=c,t.fillShadow=d,t.visible=u}({rect:t,config:S})})}))}updateLabelSelection(t){return XA(this,void 0,void 0,(function*(){const e=this.label.enabled?t.labelData:[];return t.labelSelection.update(e,t=>{t.tag=t_.Label,t.pointerEvents=Uk.None})}))}updateLabelNodes(t){return XA(this,void 0,void 0,(function*(){t.labelSelection.each((t,e)=>{!function(t,e,i){if(e.enabled&&i){const{x:n,y:o,text:r,textAlign:s,textBaseline:a}=i,{color:l,fontStyle:c,fontWeight:d,fontSize:u,fontFamily:h}=e;t.setProperties({visible:!0,x:n,y:o,text:r,fill:l,fontStyle:c,fontWeight:d,fontSize:u,fontFamily:h,textAlign:s,textBaseline:a})}else t.visible=!1}(t,this.label,e.label)})}))}getTooltipHtml(t){var e;const{xKey:i,yKey:n,processedData:o,ctx:{callbackCache:r}}=this,s=this.getCategoryAxis(),a=this.getValueAxis(),{xValue:l,yValue:c,datum:d}=t;if(!(o&&i&&n&&s&&a))return"";const{xName:u,yName:h,fill:p,stroke:f,tooltip:g,formatter:v,id:y,stackGroup:m}=this,b=this.getStrokeWidth(this.strokeWidth),S=s.formatDatum(l),x=a.formatDatum(c),C=mR(h),w=mR(S+": "+x);let E;v&&(E=r.call(v,{datum:d,fill:p,stroke:f,strokeWidth:b,highlighted:!1,xKey:i,yKey:n,seriesId:y,stackGroup:m}));const O=null!==(e=null==E?void 0:E.fill)&&void 0!==e?e:p;return g.toTooltipHtml({title:C,content:w,backgroundColor:O},Object.assign({datum:d,xKey:i,xName:u,yKey:n,yName:h,color:O,title:C,seriesId:y,stackGroup:m},this.getModuleTooltipParams(d)))}getLegendData(t){var e;const{id:i,data:n,xKey:o,yKey:r,yName:s,legendItemName:a,fill:l,stroke:c,strokeWidth:d,fillOpacity:u,strokeOpacity:h,visible:p,showInLegend:f}=this;return"category"===t&&f&&(null==n?void 0:n.length)&&o&&r?[{legendType:"category",id:i,itemId:r,seriesId:i,enabled:p,label:{text:null!==(e=null!=a?a:s)&&void 0!==e?e:r},marker:{fill:l,stroke:c,fillOpacity:u,strokeOpacity:h,strokeWidth:d},legendItemName:a}]:[]}animateEmptyUpdateReady({datumSelections:t,labelSelections:e,annotationSelections:i}){const n=a_(s_("vertical"===this.direction,this.axes));wM(this.id,"nodes",this.ctx.animationManager,t,n),vP(this,"labels",this.ctx.animationManager,e),vP(this,"annotations",this.ctx.animationManager,i)}animateWaitingUpdateReady(t){var e,i;const{datumSelections:n,labelSelections:o,annotationSelections:r}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);const s=null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff,a=a_(s_("vertical"===this.direction,this.axes));wM(this.id,"nodes",this.ctx.animationManager,n,a,(t,e)=>String(e.xValue),s),vP(this,"labels",this.ctx.animationManager,o),vP(this,"annotations",this.ctx.animationManager,r)}isLabelEnabled(){return this.label.enabled}}d_.className="BarSeries",d_.type="bar",KA([PT(tk),YA("design:type",String)],d_.prototype,"fill",void 0),KA([PT(tk),YA("design:type",String)],d_.prototype,"stroke",void 0),KA([PT(ok(0,1)),YA("design:type",Object)],d_.prototype,"fillOpacity",void 0),KA([PT(ok(0,1)),YA("design:type",Object)],d_.prototype,"strokeOpacity",void 0),KA([PT(mk),YA("design:type",Array)],d_.prototype,"lineDash",void 0),KA([PT(ok(0)),YA("design:type",Number)],d_.prototype,"lineDashOffset",void 0),KA([PT(zT),YA("design:type",Function)],d_.prototype,"formatter",void 0),KA([PT(YT),YA("design:type",String)],d_.prototype,"xKey",void 0),KA([PT(YT),YA("design:type",String)],d_.prototype,"xName",void 0),KA([PT(YT),YA("design:type",String)],d_.prototype,"yKey",void 0),KA([PT(YT),YA("design:type",String)],d_.prototype,"yName",void 0),KA([PT(YT),YA("design:type",String)],d_.prototype,"stackGroup",void 0),KA([PT(rk()),YA("design:type",Number)],d_.prototype,"normalizedTo",void 0),KA([PT(ok(0)),YA("design:type",Number)],d_.prototype,"strokeWidth",void 0);class u_ extends EI{constructor(t,e,i,n){super(t,e,i,n),this.sizeKey=n.sizeKey}}class h_ extends NF{constructor(){super(...arguments),this.maxSize=30,this.domain=void 0}}KA([PT(ok(0)),_k({redraw:Ik.MAJOR}),YA("design:type",Object)],h_.prototype,"maxSize",void 0),KA([PT(lk),_k({redraw:Ik.MAJOR}),YA("design:type",Array)],h_.prototype,"domain",void 0);class p_ extends OI{constructor(t){super({moduleCtx:t,pickModes:[iP.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,iP.NEAREST_NODE,iP.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:mP,marker:FF}}),this.NodeClickEvent=u_,this.sizeScale=new XM,this.marker=new h_,this.label=new BR,this.title=void 0,this.labelKey=void 0,this.xName=void 0,this.yName=void 0,this.sizeName="Size",this.labelName="Label",this.xKey=void 0,this.yKey=void 0,this.sizeKey=void 0,this.colorKey=void 0,this.colorName="Color",this.colorRange=["#ffff00","#00ff00","#0000ff"],this.colorScale=new vI,this.tooltip=new IP}processData(t){var e,i;return XA(this,void 0,void 0,(function*(){const{xKey:n,yKey:o,sizeKey:r,labelKey:s,colorScale:a,colorDomain:l,colorRange:c,colorKey:d,marker:u,data:h}=this;if(null==n||null==o||null==r||null==h)return;const{isContinuousX:p,isContinuousY:f}=this.isContinuous(),{dataModel:g,processedData:v}=yield this.requestDataModel(t,h,{props:[sP(this,n,p,{id:"xKey-raw"}),sP(this,o,f,{id:"yKey-raw"}),...s?[sP(this,s,!1,{id:"labelKey-raw"})]:[],aP(this,n,p,{id:"xValue"}),aP(this,o,f,{id:"yValue"}),aP(this,r,!0,{id:"sizeValue"}),...d?[aP(this,d,!0,{id:"colorValue"})]:[],...s?[aP(this,s,!1,{id:"labelValue"})]:[]],dataVisible:this.visible}),y=g.resolveProcessedDataIndexById(this,"sizeValue").index,m=null!==(e=v.domain.values[y])&&void 0!==e?e:[];if(this.sizeScale.domain=u.domain?u.domain:m,d){const t=g.resolveProcessedDataIndexById(this,"colorValue").index;a.domain=null!==(i=null!=l?l:v.domain.values[t])&&void 0!==i?i:[],a.range=c,a.update()}this.animationState.transition("updateData")}))}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const n=t===Lk.X?"xValue":"yValue",o=e.resolveProcessedDataDefById(this,n),r=e.getDomain(this,n,"value",i);if("value"===(null==o?void 0:o.def.type)&&"category"===(null==o?void 0:o.def.valueType))return r;const s=this.axes[t];return fL(ZA(r),s)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e,i,n,o;return XA(this,void 0,void 0,(function*(){const{visible:r,axes:s,yKey:a="",xKey:l="",label:c,labelKey:d,dataModel:u,processedData:h,colorScale:p,sizeKey:f="",colorKey:g}=this,v=s[Lk.X],y=s[Lk.Y];if(!(u&&h&&r&&v&&y))return[];const m=u.resolveProcessedDataIndexById(this,"xValue").index,b=u.resolveProcessedDataIndexById(this,"yValue").index,S=f?u.resolveProcessedDataIndexById(this,"sizeValue").index:-1,x=g?u.resolveProcessedDataIndexById(this,"colorValue").index:-1,C=d?u.resolveProcessedDataIndexById(this,"labelValue").index:-1,w=v.scale,E=y.scale,O=(null!==(e=w.bandwidth)&&void 0!==e?e:0)/2,D=(null!==(i=E.bandwidth)&&void 0!==i?i:0)/2,{sizeScale:A,marker:T}=this,k=[];A.range=[T.size,T.maxSize];const M=c.getFont();for(const{values:t,datum:e}of null!==(n=h.data)&&void 0!==n?n:[]){const i=t[m],n=t[b],o=w.convert(i)+O,r=E.convert(n)+D,s=this.getLabelText(c,{value:d?t[C]:n,datum:e,xKey:l,yKey:a,sizeKey:f,labelKey:d,xName:this.xName,yName:this.yName,sizeName:this.sizeName,labelName:this.labelName}),u=$k.getTextSize(String(s),M),h=f?A.convert(t[S]):T.size,v=g?p.convert(t[x]):void 0;k.push({series:this,itemId:a,yKey:a,xKey:l,datum:e,xValue:i,yValue:n,sizeValue:t[S],point:{x:o,y:r,size:h},midPoint:{x:o,y:r},fill:v,label:Object.assign({text:s},u)})}return[{itemId:null!==(o=this.yKey)&&void 0!==o?o:this.id,nodeData:k,labelData:k,scales:t.calculateScaling.call(this),visible:this.visible}]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}getLabelData(){var t;return null===(t=this.contextNodeData)||void 0===t?void 0:t.reduce((t,e)=>t.concat(e.labelData),[])}markerFactory(){const{shape:t}=this.marker;return new(HL(t))}updateMarkerSelection(t){return XA(this,void 0,void 0,(function*(){const{nodeData:e,markerSelection:i}=t;this.marker.isDirty()&&(i.clear(),i.cleanup());const n=this.marker.enabled?e:[];return i.update(n,void 0,t=>this.getDatumId(t))}))}updateMarkerNodes(t){return XA(this,void 0,void 0,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:n="",yKey:o="",sizeKey:r="",labelKey:s,marker:a}=this,l=vR(i&&this.highlightStyle.item,a.getStyle());this.sizeScale.range=[a.size,a.maxSize],e.each((t,e)=>{this.updateMarkerStyle(t,a,{datum:e,highlighted:i,xKey:n,yKey:o,sizeKey:r,labelKey:s},l)}),i||this.marker.markClean()}))}updateLabelSelection(t){var e,i;return XA(this,void 0,void 0,(function*(){const{labelSelection:n}=t,{label:{enabled:o}}=this,r=(o&&null!==(i=null===(e=this.chart)||void 0===e?void 0:e.placeLabels().get(this))&&void 0!==i?i:[]).map(t=>Object.assign(Object.assign({},t.datum),{point:{x:t.x,y:t.y,size:t.datum.point.size}}));return n.update(r)}))}updateLabelNodes(t){return XA(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{label:i}=this;e.each((t,e)=>{var n,o,r,s;t.text=e.label.text,t.fill=i.color,t.x=null!==(o=null===(n=e.point)||void 0===n?void 0:n.x)&&void 0!==o?o:0,t.y=null!==(s=null===(r=e.point)||void 0===r?void 0:r.y)&&void 0!==s?s:0,t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.fontSize=i.fontSize,t.fontFamily=i.fontFamily,t.textAlign="left",t.textBaseline="top"})}))}getTooltipHtml(t){var e;const{xKey:i,yKey:n,sizeKey:o,axes:r}=this,s=r[Lk.X],a=r[Lk.Y];if(!(i&&n&&s&&a&&o))return"";const{marker:l,tooltip:c,xName:d,yName:u,sizeName:h,labelKey:p,labelName:f,id:g}=this,v=vR({fill:t.fill,strokeWidth:this.getStrokeWidth(l.strokeWidth)},l.getStyle()),{fill:y="gray"}=this.getMarkerStyle(l,{datum:t,highlighted:!1,xKey:i,yKey:n,sizeKey:o,labelKey:p},v),m=null!==(e=this.title)&&void 0!==e?e:u,{datum:b,xValue:S,yValue:x,sizeValue:C,label:{text:w}}=t,E=mR(s.formatDatum(S)),O=mR(a.formatDatum(x));let D=`<b>${mR(null!=d?d:i)}</b>: ${E}<br><b>${mR(null!=u?u:n)}</b>: ${O}`;return o&&(D+=`<br><b>${mR(null!=h?h:o)}</b>: ${mR(String(C))}`),p&&(D=`<b>${mR(null!=f?f:p)}</b>: ${mR(w)}<br>`+D),c.toTooltipHtml({title:m,content:D,backgroundColor:y},{datum:b,xKey:i,xName:d,yKey:n,yName:u,sizeKey:o,sizeName:h,labelKey:p,labelName:f,title:m,color:y,seriesId:g})}getLegendData(){var t;const{id:e,data:i,xKey:n,yKey:o,sizeKey:r,yName:s,title:a,visible:l,marker:c}=this,{shape:d,fill:u,stroke:h,fillOpacity:p,strokeOpacity:f,strokeWidth:g}=c;return(null==i?void 0:i.length)&&n&&o&&r?[{legendType:"category",id:e,itemId:o,seriesId:e,enabled:l,label:{text:null!==(t=null!=a?a:s)&&void 0!==t?t:o},marker:{shape:d,fill:null!=u?u:"rgba(0, 0, 0, 0)",stroke:null!=h?h:"rgba(0, 0, 0, 0)",fillOpacity:null!=p?p:1,strokeOpacity:null!=f?f:1,strokeWidth:null!=g?g:0}}]:[]}animateEmptyUpdateReady({markerSelections:t,labelSelections:e}){LF(this,this.ctx.animationManager,t),vP(this,"labels",this.ctx.animationManager,e)}getDatumId(t){return GR([""+t.xValue,""+t.yValue,t.label.text])}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new ZM}}p_.className="BubbleSeries",p_.type="bubble",KA([PT(YT),YA("design:type",String)],p_.prototype,"title",void 0),KA([PT(YT),YA("design:type",String)],p_.prototype,"labelKey",void 0),KA([PT(YT),YA("design:type",String)],p_.prototype,"xName",void 0),KA([PT(YT),YA("design:type",String)],p_.prototype,"yName",void 0),KA([PT(YT),YA("design:type",String)],p_.prototype,"sizeName",void 0),KA([PT(YT),YA("design:type",String)],p_.prototype,"labelName",void 0),KA([PT(YT),YA("design:type",String)],p_.prototype,"xKey",void 0),KA([PT(YT),YA("design:type",String)],p_.prototype,"yKey",void 0),KA([PT(YT),YA("design:type",String)],p_.prototype,"sizeKey",void 0),KA([PT(YT),YA("design:type",String)],p_.prototype,"colorKey",void 0),KA([PT(YT),YA("design:type",String)],p_.prototype,"colorName",void 0),KA([PT(lk),YA("design:type",Array)],p_.prototype,"colorDomain",void 0),KA([PT(ek),YA("design:type",Array)],p_.prototype,"colorRange",void 0);const f_=["count","sum","mean"],g_=LT(t=>f_.includes(t),"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean");var v_;!function(t){t[t.Bin=0]="Bin",t[t.Label=1]="Label"}(v_||(v_={}));class y_ extends OI{constructor(t){super({moduleCtx:t,pickModes:[iP.EXACT_SHAPE_MATCH],datumSelectionGarbageCollection:!1,animationResetFns:{datum:l_,label:mP}}),this.label=new BR,this.tooltip=new IP,this.fill=void 0,this.stroke=void 0,this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.areaPlot=!1,this.aggregation="sum",this.binCount=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.strokeWidth=1,this.shadow=void 0,this.calculatedBins=[]}deriveBins(t){if(void 0===this.binCount){const e=WM(t[0],t[1],10),i=UM(t[0],t[1],10),n=e[0],o=t=>[t,t+i];return[[n-i,n],...e.map(o)]}return this.calculateNiceBins(t,this.binCount)}calculateNiceBins(t,e){const i=Math.floor(t[0]),n=t[1],o=e||1,{start:r,binSize:s}=this.calculateNiceStart(i,n,o);return this.getBins(r,n,s,o)}getBins(t,e,i,n){const o=[];for(let r=0;r<n;r++){const s=Math.round(10*(t+r*i))/10;let a=Math.round(10*(t+(r+1)*i))/10;r===n-1&&(a=Math.max(a,e)),o[r]=[s,a]}return o}calculateNiceStart(t,e,i){const n=Math.abs(e-t)/i,o=Math.floor(Math.log10(n)),r=Math.pow(10,o);return{start:Math.floor(t/r)*r,binSize:n}}processData(t){return XA(this,void 0,void 0,(function*(){const{xKey:e,yKey:i,data:n,areaPlot:o,aggregation:r}=this,s=[sP(this,e,!0),TR];if(i){let t=QR(this,"groupCount");"count"===r||("sum"===r?t={id:"groupAgg",scopes:[this.id],type:"aggregate",matchGroupIds:a?[a]:void 0,aggregateFunction:t=>JR(t),groupAggregateFunction:(t,e=[0,0])=>{var i,n;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e}}:"mean"===r&&(t=function(t,e,i){return{id:e,scopes:[t.id],matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:t=>JR(t),groupAggregateFunction:(t,e=[0,0,-1])=>{var i,n;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e[2]++,e},finalFunction:(t=[0,0,0])=>{const e=t[0]+t[1];return e>=0?[0,e/t[2]]:[e/t[2],0]}}}(this,"groupAgg"))),o&&(t=tP(this,"groupAgg",t)),s.push(aP(this,i,!0,{invalidValue:void 0}),t)}else{let t=QR(this,"groupAgg");o&&(t=tP(this,"groupAgg",t)),s.push(t)}var a;!this.ctx.animationManager.isSkipped()&&this.processedData&&s.push(_R(this.processedData,!1)),yield this.requestDataModel(t,null!=n?n:[],{props:s,dataVisible:this.visible,groupByFn:t=>{var e;const i=fL(t.domain.keys[0]);if(0===i.length)return t.domain.groups=[],()=>[];const n=null!==(e=this.bins)&&void 0!==e?e:this.deriveBins(i),o=n.length;return this.calculatedBins=[...n],t=>{const e=t.keys[0];for(let t=0;t<o;t++){const i=n[t];if(e>=i[0]&&e<i[1])return i;if(t===o-1&&e<=i[1])return i}return[]}}}),this.animationState.transition("updateData")}))}getSeriesDomain(t){var e,i,n,o;const{processedData:r,dataModel:s}=this;if(!r||!s||!this.calculatedBins.length)return[];const a=s.getDomain(this,"groupAgg","aggregate",r),l=null===(e=this.calculatedBins)||void 0===e?void 0:e[0][0],c=null===(i=this.calculatedBins)||void 0===i?void 0:i[(null!==(o=null===(n=this.calculatedBins)||void 0===n?void 0:n.length)&&void 0!==o?o:0)-1][1];return t===Lk.X?fL([l,c]):fL(a)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e;return XA(this,void 0,void 0,(function*(){const{axes:i,processedData:n,ctx:{callbackCache:o}}=this,r=i[Lk.X],s=i[Lk.Y];if(!(this.visible&&r&&s&&n&&"grouped"===n.type))return[];const{scale:a}=r,{scale:l}=s,{fill:c,stroke:d,strokeWidth:u,id:h,yKey:p="",xKey:f=""}=this,g=[],{label:{formatter:v=(t=>String(t.value)),fontStyle:y,fontWeight:m,fontSize:b,fontFamily:S,color:x}}=this;return n.data.forEach(t=>{var e;const{aggValues:[[i,n]]=[[0,0]],datum:r,datum:{length:s},keys:C,keys:[w,E]}=t,O=a.convert(w),D=a.convert(E),A=i+n,T=l.convert(0),k=l.convert(A),M=D-O,R=Math.abs(k-T),P=0!==A?{text:null!==(e=o.call(v,{value:A,datum:r,seriesId:h,xKey:f,yKey:p,xName:this.xName,yName:this.yName}))&&void 0!==e?e:String(A),fontStyle:y,fontWeight:m,fontSize:b,fontFamily:S,fill:x,x:O+M/2,y:k+R/2}:void 0,N={x:O+M/2,y:k+R/2};g.push({series:this,datum:r,aggregatedValue:A,frequency:s,domain:C,yKey:p,xKey:f,x:O,y:k,xValue:O,yValue:k,width:M,height:R,midPoint:N,fill:c,stroke:d,strokeWidth:u,label:P})}),[{itemId:null!==(e=this.yKey)&&void 0!==e?e:this.id,nodeData:g,labelData:g,scales:t.calculateScaling.call(this),animationValid:!0,visible:this.visible}]}))}nodeFactory(){return new mI}updateDatumSelection(t){return XA(this,void 0,void 0,(function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,t=>{t.tag=v_.Bin,t.crisp=!0},t=>t.domain.join("_"))}))}updateDatumNodes(t){return XA(this,void 0,void 0,(function*(){const{datumSelection:e,isHighlight:i}=t,{fillOpacity:n,strokeOpacity:o,shadow:r,highlightStyle:{item:{fill:s,fillOpacity:a=n,stroke:l,strokeWidth:c}}}=this;e.each((t,e,d)=>{var u,h;const p=i&&void 0!==c?c:e.strokeWidth,f=i?a:n;t.fill=null!==(u=i?s:void 0)&&void 0!==u?u:e.fill,t.stroke=null!==(h=i?l:void 0)&&void 0!==h?h:e.stroke,t.fillOpacity=f,t.strokeOpacity=o,t.strokeWidth=p,t.lineDash=this.lineDash,t.lineDashOffset=this.lineDashOffset,t.fillShadow=r,t.zIndex=i?gP.highlightedZIndex:d,t.visible=e.height>0})}))}updateLabelSelection(t){return XA(this,void 0,void 0,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,t=>{t.tag=v_.Label,t.pointerEvents=Uk.None,t.textAlign="center",t.textBaseline="middle"})}))}updateLabelNodes(t){return XA(this,void 0,void 0,(function*(){const{labelSelection:e}=t,i=this.label.enabled;e.each((t,e)=>{const n=e.label;n&&i?(t.text=n.text,t.x=n.x,t.y=n.y,t.fontStyle=n.fontStyle,t.fontWeight=n.fontWeight,t.fontSize=n.fontSize,t.fontFamily=n.fontFamily,t.fill=n.fill,t.visible=!0):t.visible=!1})}))}getTooltipHtml(t){const{xKey:e,yKey:i="",axes:n}=this,o=n[Lk.X],r=n[Lk.Y];if(!e||!o||!r)return"";const{xName:s,yName:a,fill:l,tooltip:c,aggregation:d,id:u}=this,{aggregatedValue:h,frequency:p,domain:[f,g]}=t,v=`${mR(null!=s?s:e)}: ${o.formatDatum(f)} - ${o.formatDatum(g)}`;let y=i?`<b>${mR(null!=a?a:i)} (${d})</b>: ${r.formatDatum(h)}<br>`:"";y+="<b>Frequency</b>: "+p;const m={title:v,backgroundColor:l,content:y};return c.toTooltipHtml(m,{datum:{data:t.datum,aggregatedValue:t.aggregatedValue,domain:t.domain,frequency:t.frequency},xKey:e,xName:s,yKey:i,yName:a,color:l,title:v,seriesId:u})}getLegendData(t){var e;const{id:i,data:n,xKey:o,yName:r,visible:s,fill:a,stroke:l,fillOpacity:c,strokeOpacity:d,strokeWidth:u}=this;return n&&0!==n.length&&"category"===t?[{legendType:"category",id:i,itemId:o,seriesId:i,enabled:s,label:{text:null!==(e=null!=r?r:o)&&void 0!==e?e:"Frequency"},marker:{fill:null!=a?a:"rgba(0, 0, 0, 0)",stroke:null!=l?l:"rgba(0, 0, 0, 0)",fillOpacity:c,strokeOpacity:d,strokeWidth:u}}]:[]}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){const i=a_(s_(!0,this.axes));wM(this.id,"datums",this.ctx.animationManager,t,i),vP(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(t){var e,i;const n=null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff,o=a_(s_(!0,this.axes));wM(this.id,"datums",this.ctx.animationManager,t.datumSelections,o,(t,e)=>this.getDatumId(e),n),vP(this,"labels",this.ctx.animationManager,t.labelSelections)}getDatumId(t){return GR(t.domain.map(t=>""+t))}isLabelEnabled(){return this.label.enabled}}y_.className="HistogramSeries",y_.type="histogram",KA([PT(tk),YA("design:type",String)],y_.prototype,"fill",void 0),KA([PT(tk),YA("design:type",String)],y_.prototype,"stroke",void 0),KA([PT(ok(0,1)),YA("design:type",Object)],y_.prototype,"fillOpacity",void 0),KA([PT(ok(0,1)),YA("design:type",Object)],y_.prototype,"strokeOpacity",void 0),KA([PT(mk),YA("design:type",Array)],y_.prototype,"lineDash",void 0),KA([PT(ok(0)),YA("design:type",Number)],y_.prototype,"lineDashOffset",void 0),KA([PT(YT),YA("design:type",String)],y_.prototype,"xKey",void 0),KA([PT(UT),YA("design:type",Boolean)],y_.prototype,"areaPlot",void 0),KA([PT(_T()),YA("design:type",Array)],y_.prototype,"bins",void 0),KA([PT(g_),YA("design:type",String)],y_.prototype,"aggregation",void 0),KA([PT(rk(0)),YA("design:type",Number)],y_.prototype,"binCount",void 0),KA([PT(YT),YA("design:type",String)],y_.prototype,"xName",void 0),KA([PT(YT),YA("design:type",String)],y_.prototype,"yKey",void 0),KA([PT(YT),YA("design:type",String)],y_.prototype,"yName",void 0),KA([PT(ok(0)),YA("design:type",Number)],y_.prototype,"strokeWidth",void 0);class m_ extends OI{constructor(t){super({moduleCtx:t,hasMarkers:!0,pickModes:[iP.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,iP.NEAREST_NODE,iP.EXACT_SHAPE_MATCH],markerSelectionGarbageCollection:!1,animationResetFns:{path:KF({getOpacity:()=>this.getOpacity()}),label:mP,marker:(t,e)=>Object.assign(Object.assign({},{opacity:1,scalingX:1,scalingY:1}),_F(0,e))}}),this.label=new BR,this.marker=new NF,this.tooltip=new IP,this.title=void 0,this.stroke="#874349",this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2,this.strokeOpacity=1,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0}processData(t){return XA(this,void 0,void 0,(function*(){const{xKey:e,yKey:i,data:n}=this;if(null==e||null==i||null==n)return;const o=!this.ctx.animationManager.isSkipped(),{isContinuousX:r,isContinuousY:s}=this.isContinuous(),a=[];r||(a.push(sP(this,e,r,{id:"xKey"})),o&&this.processedData&&a.push(_R(this.processedData))),o&&a.push(NR(this,r?["xValue"]:[])),a.push(aP(this,e,r,{id:"xValue"}),aP(this,i,s,{id:"yValue",invalidValue:void 0})),yield this.requestDataModel(t,n,{props:a}),this.animationState.transition("updateData")}))}getSeriesDomain(t){const{axes:e,dataModel:i,processedData:n}=this;if(!n||!i)return[];const o=e[Lk.X],r=e[Lk.Y],s=i.resolveProcessedDataDefById(this,"xValue");if(t===Lk.X){const t=i.getDomain(this,"xValue","value",n);return"value"===(null==s?void 0:s.def.type)&&"category"===s.def.valueType?t:fL(ZA(t),o)}return fL(i.getDomain(this,"yValue","value",n),r)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e,i,n;return XA(this,void 0,void 0,(function*(){const{processedData:o,dataModel:r,axes:s}=this,a=s[Lk.X],l=s[Lk.Y];if(!(o&&r&&a&&l))return[];const{label:c,yKey:d="",xKey:u=""}=this,h=a.scale,p=l.scale,f=(null!==(e=h.bandwidth)&&void 0!==e?e:0)/2,g=(null!==(i=p.bandwidth)&&void 0!==i?i:0)/2,v=[],y=this.marker.enabled?this.marker.size:0,m=r.resolveProcessedDataIndexById(this,"xValue").index,b=r.resolveProcessedDataIndexById(this,"yValue").index;let S,x=!0;for(let t=0;t<o.data.length;t++){const{datum:e,values:i}=null!=S?S:o.data[t],r=i[m],s=i[b];if(void 0===s)x=!0;else{const i=h.convert(r)+f;if(isNaN(i)){x=!0,S=void 0;continue}S=void 0===(null===(n=o.data[t+1])||void 0===n?void 0:n.values[b])?void 0:o.data[t+1];const a=p.convert(s)+g,l=this.getLabelText(c,{value:s,datum:e,xKey:u,yKey:d,xName:this.xName,yName:this.yName},t=>ER(t)?t.toFixed(2):String(t));v.push({series:this,datum:e,yKey:d,xKey:u,point:{x:i,y:a,moveTo:x,size:y},midPoint:{x:i,y:a},yValue:s,xValue:r,capDefaults:{lengthRatioMultiplier:this.marker.getDiameter(),lengthMax:1/0},label:l?{text:l,fontStyle:c.fontStyle,fontWeight:c.fontWeight,fontSize:c.fontSize,fontFamily:c.fontFamily,textAlign:"center",textBaseline:"bottom",fill:c.color}:void 0}),x=!1}}return[{itemId:d,nodeData:v,labelData:v,scales:t.calculateScaling.call(this),visible:this.visible}]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(HL(t))}updatePathNodes(t){var e,i;return XA(this,void 0,void 0,(function*(){const{paths:[n],opacity:o,visible:r,animationEnabled:s}=t,{seriesRectHeight:a,seriesRectWidth:l}=this.nodeDataDependencies;n.setProperties({fill:void 0,lineJoin:"round",pointerEvents:Uk.None,opacity:o,stroke:this.stroke,strokeWidth:this.getStrokeWidth(this.strokeWidth),strokeOpacity:this.strokeOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset}),s||(n.visible=r),null==n.clipPath&&(n.clipPath=new lR,n.clipScalingX=1,n.clipScalingY=1),null===(e=n.clipPath)||void 0===e||e.clear({trackChanges:!0}),null===(i=n.clipPath)||void 0===i||i.rect(-25,-25,(null!=l?l:0)+50,(null!=a?a:0)+50)}))}updateMarkerSelection(t){return XA(this,void 0,void 0,(function*(){let{nodeData:e}=t;const{markerSelection:i}=t,{shape:n,enabled:o}=this.marker;return e=n&&o?e:[],this.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(e,void 0,t=>this.getDatumId(t))}))}updateMarkerNodes(t){return XA(this,void 0,void 0,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:n="",yKey:o="",marker:r,stroke:s,strokeWidth:a,strokeOpacity:l}=this,c=vR(i&&this.highlightStyle.item,r.getStyle(),{stroke:s,strokeWidth:a,strokeOpacity:l}),d=this.ctx.animationManager.isSkipped();e.each((t,e)=>{this.updateMarkerStyle(t,r,{datum:e,highlighted:i,xKey:n,yKey:o},c,{applyTranslation:d})}),i||this.marker.markClean()}))}updateLabelSelection(t){return XA(this,void 0,void 0,(function*(){let{labelData:e}=t;const{labelSelection:i}=t,{shape:n,enabled:o}=this.marker;return e=n&&o?e:[],i.update(e)}))}updateLabelNodes(t){return XA(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:n,fontWeight:o,fontSize:r,fontFamily:s,color:a}=this.label;e.each((t,e)=>{const{point:l,label:c}=e;e&&c&&i?(t.fontStyle=n,t.fontWeight=o,t.fontSize=r,t.fontFamily=s,t.textAlign=c.textAlign,t.textBaseline=c.textBaseline,t.text=c.text,t.x=l.x,t.y=l.y-10,t.fill=a,t.visible=!0):t.visible=!1})}))}getTooltipHtml(t){var e;const{xKey:i,yKey:n,axes:o}=this,r=o[Lk.X],s=o[Lk.Y];if(!(i&&n&&r&&s))return"";const{xName:a,yName:l,tooltip:c,marker:d,id:u}=this,{datum:h,xValue:p,yValue:f}=t,g=r.formatDatum(p),v=s.formatDatum(f),y=mR(null!==(e=this.title)&&void 0!==e?e:l),m=mR(g+": "+v),b=vR({fill:d.stroke},d.getStyle(),{strokeWidth:this.strokeWidth}),{fill:S}=this.getMarkerStyle(d,{datum:t,xKey:i,yKey:n,highlighted:!1},b);return c.toTooltipHtml({title:y,content:m,backgroundColor:S},Object.assign({datum:h,xKey:i,xName:a,yKey:n,yName:l,title:y,color:S,seriesId:u},this.getModuleTooltipParams(h)))}getLegendData(t){var e,i,n,o,r,s,a,l;const{id:c,data:d,xKey:u,yKey:h,yName:p,visible:f,title:g,marker:v,stroke:y,strokeOpacity:m}=this;return(null==d?void 0:d.length)&&u&&h&&"category"===t?[{legendType:"category",id:c,itemId:h,seriesId:c,enabled:f,label:{text:null!==(e=null!=g?g:p)&&void 0!==e?e:h},marker:{shape:v.shape,fill:null!==(i=v.fill)&&void 0!==i?i:"rgba(0, 0, 0, 0)",stroke:null!==(o=null!==(n=v.stroke)&&void 0!==n?n:y)&&void 0!==o?o:"rgba(0, 0, 0, 0)",fillOpacity:null!==(r=v.fillOpacity)&&void 0!==r?r:1,strokeOpacity:null!==(a=null!==(s=v.strokeOpacity)&&void 0!==s?s:m)&&void 0!==a?a:1,strokeWidth:null!==(l=v.strokeWidth)&&void 0!==l?l:0}}]:[]}updatePaths(t){return XA(this,void 0,void 0,(function*(){this.updateLinePaths([t.paths],[t.contextData])}))}updateLinePaths(t,e){e.forEach(({nodeData:e},i)=>{const[n]=t[i],{path:o}=n;o.clear({trackChanges:!0});for(const t of e)t.point.moveTo?o.moveTo(t.point.x,t.point.y):o.lineTo(t.point.x,t.point.y);n.checkPathDirty()})}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,annotationSelections:n,contextData:o,paths:r}=t,{animationManager:s}=this.ctx,{seriesRectWidth:a=0}=this.nodeDataDependencies;this.updateLinePaths(r,o),HF(this,s,r.flat()),GP(e,_F),IF(this,s,e,a),vP(this,"labels",s,i),vP(this,"annotations",s,n)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateLinePaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:n}=this.ctx,{markerSelections:o,labelSelections:r,annotationSelections:s,contextData:a,paths:l,previousContextData:c}=t;if(super.resetAllAnimation(t),0===a.length||!c||0===c.length)return n.skipCurrentBatch(),void this.updateLinePaths(l,a);const[d]=l,[u]=a,[h]=c,p=function(t,e,i){var n;const o="category"===(null===(n=t.scales.x)||void 0===n?void 0:n.type),{result:r,resultMap:s}=o&&i?ZF(t,e,i):$F(t,e);let a="updated";if(e.visible&&!t.visible?a="removed":!e.visible&&t.visible&&(a="added"),void 0===r||void 0===s)return;const l=JF(t,e,r,"fade",UF),c=GF(s,a);return Object.assign(Object.assign({},l),{marker:c})}(u,h,null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff);if(void 0===p)return n.skipCurrentBatch(),void this.updateLinePaths(l,a);wM(this.id,"marker",n,o,p.marker),wM(this.id,"path_properties",n,d,p.pathProperties),RF(this.id,"path_update",n,d,p.path),vP(this,"labels",n,r),vP(this,"annotations",n,s)}getDatumId(t){return GR([""+t.xValue])}isLabelEnabled(){return this.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new ZM}}m_.className="LineSeries",m_.type="line",KA([PT(YT),YA("design:type",String)],m_.prototype,"title",void 0),KA([PT(tk),YA("design:type",String)],m_.prototype,"stroke",void 0),KA([PT(mk),YA("design:type",Array)],m_.prototype,"lineDash",void 0),KA([PT(ok(0)),YA("design:type",Number)],m_.prototype,"lineDashOffset",void 0),KA([PT(ok(0)),YA("design:type",Number)],m_.prototype,"strokeWidth",void 0),KA([PT(ok(0,1)),YA("design:type",Number)],m_.prototype,"strokeOpacity",void 0),KA([PT(YT),YA("design:type",String)],m_.prototype,"xKey",void 0),KA([PT(YT),YA("design:type",String)],m_.prototype,"xName",void 0),KA([PT(YT),YA("design:type",String)],m_.prototype,"yKey",void 0),KA([PT(YT),YA("design:type",String)],m_.prototype,"yName",void 0);class b_ extends OI{constructor(t){super({moduleCtx:t,pickModes:[iP.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,iP.NEAREST_NODE,iP.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:FF,label:mP}}),this.marker=new NF,this.label=new BR,this.title=void 0,this.labelKey=void 0,this.xName=void 0,this.yName=void 0,this.labelName="Label",this.xKey=void 0,this.yKey=void 0,this.colorKey=void 0,this.colorName="Color",this.colorRange=["#ffff00","#00ff00","#0000ff"],this.colorScale=new vI,this.tooltip=new IP}processData(t){var e;return XA(this,void 0,void 0,(function*(){const{xKey:i,yKey:n,labelKey:o,data:r}=this;if(null==i||null==n||null==r)return;const{isContinuousX:s,isContinuousY:a}=this.isContinuous(),{colorScale:l,colorDomain:c,colorRange:d,colorKey:u}=this,{dataModel:h,processedData:p}=yield this.requestDataModel(t,r,{props:[sP(this,i,s,{id:"xKey-raw"}),sP(this,n,a,{id:"yKey-raw"}),...o?[sP(this,o,!1,{id:"labelKey-raw"})]:[],aP(this,i,s,{id:"xValue"}),aP(this,n,a,{id:"yValue"}),...u?[aP(this,u,!0,{id:"colorValue"})]:[],...o?[aP(this,o,!1,{id:"labelValue"})]:[]],dataVisible:this.visible});if(u){const t=h.resolveProcessedDataIndexById(this,"colorValue").index;l.domain=null!==(e=null!=c?c:p.domain.values[t])&&void 0!==e?e:[],l.range=d,l.update()}this.animationState.transition("updateData")}))}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const n=t===Lk.X?"xValue":"yValue",o=e.resolveProcessedDataDefById(this,n),r=e.getDomain(this,n,"value",i);if("value"===(null==o?void 0:o.def.type)&&"category"===(null==o?void 0:o.def.valueType))return r;const s=this.axes[t];return fL(ZA(r),s)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e,i,n,o;return XA(this,void 0,void 0,(function*(){const{visible:r,axes:s,yKey:a="",xKey:l="",label:c,labelKey:d,dataModel:u,processedData:h}=this,p=s[Lk.X],f=s[Lk.Y];if(!(u&&h&&r&&p&&f))return[];const g=u.resolveProcessedDataIndexById(this,"xValue").index,v=u.resolveProcessedDataIndexById(this,"yValue").index,y=this.colorKey?u.resolveProcessedDataIndexById(this,"colorValue").index:-1,m=this.labelKey?u.resolveProcessedDataIndexById(this,"labelValue").index:-1,{colorScale:b,colorKey:S}=this,x=p.scale,C=f.scale,w=(null!==(e=x.bandwidth)&&void 0!==e?e:0)/2,E=(null!==(i=C.bandwidth)&&void 0!==i?i:0)/2,{marker:O}=this,D=[],A=c.getFont();for(const{values:t,datum:e}of null!==(n=h.data)&&void 0!==n?n:[]){const i=t[g],n=t[v],o=x.convert(i)+w,r=C.convert(n)+E,s=this.getLabelText(this.label,{value:d?t[m]:n,datum:e,xKey:l,yKey:a,labelKey:d,xName:this.xName,yName:this.yName,labelName:this.labelName}),c=$k.getTextSize(s,A),u=S?b.convert(t[y]):void 0;D.push({series:this,itemId:a,yKey:a,xKey:l,datum:e,xValue:i,yValue:n,capDefaults:{lengthRatioMultiplier:this.marker.getDiameter(),lengthMax:1/0},point:{x:o,y:r,size:O.size},midPoint:{x:o,y:r},fill:u,label:Object.assign({text:s},c)})}return[{itemId:null!==(o=this.yKey)&&void 0!==o?o:this.id,nodeData:D,labelData:D,scales:t.calculateScaling.call(this),visible:this.visible}]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}getLabelData(){var t;return null===(t=this.contextNodeData)||void 0===t?void 0:t.reduce((t,e)=>t.concat(e.labelData),[])}markerFactory(){const{shape:t}=this.marker;return new(HL(t))}updateMarkerSelection(t){return XA(this,void 0,void 0,(function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:n}}=this;this.marker.isDirty()&&(i.clear(),i.cleanup());const o=n?e:[];return i.update(o)}))}updateMarkerNodes(t){return XA(this,void 0,void 0,(function*(){const{xKey:e="",yKey:i="",labelKey:n,marker:o}=this,{markerSelection:r,isHighlight:s}=t,a=vR(s&&this.highlightStyle.item,o.getStyle());r.each((t,r)=>{this.updateMarkerStyle(t,o,{datum:r,highlighted:s,xKey:e,yKey:i,labelKey:n},a)}),s||this.marker.markClean()}))}updateLabelSelection(t){var e,i;return XA(this,void 0,void 0,(function*(){const{labelSelection:n}=t,{label:{enabled:o}}=this,r=(o&&null!==(i=null===(e=this.chart)||void 0===e?void 0:e.placeLabels().get(this))&&void 0!==i?i:[]).map(t=>Object.assign(Object.assign({},t.datum),{point:{x:t.x,y:t.y,size:t.datum.point.size}}));return n.update(r)}))}updateLabelNodes(t){return XA(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{label:i}=this;e.each((t,e)=>{var n,o,r,s;t.text=e.label.text,t.fill=i.color,t.x=null!==(o=null===(n=e.point)||void 0===n?void 0:n.x)&&void 0!==o?o:0,t.y=null!==(s=null===(r=e.point)||void 0===r?void 0:r.y)&&void 0!==s?s:0,t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.fontSize=i.fontSize,t.fontFamily=i.fontFamily,t.textAlign="left",t.textBaseline="top"})}))}getTooltipHtml(t){const{xKey:e,yKey:i,axes:n}=this,o=n[Lk.X],r=n[Lk.Y];if(!(e&&i&&o&&r))return"";const{marker:s,tooltip:a,xName:l,yName:c,labelKey:d,labelName:u,id:h,title:p=c}=this,f=vR({fill:t.fill,strokeWidth:this.getStrokeWidth(s.strokeWidth)},s.getStyle()),{fill:g="gray"}=this.getMarkerStyle(s,{datum:t,highlighted:!1,xKey:e,yKey:i,labelKey:d},f),{datum:v,xValue:y,yValue:m,label:b}=t,S=mR(o.formatDatum(y)),x=mR(r.formatDatum(m));let C=`<b>${mR(null!=l?l:e)}</b>: ${S}<br><b>${mR(null!=c?c:i)}</b>: ${x}`;return d&&(C=`<b>${mR(null!=u?u:d)}</b>: ${mR(b.text)}<br>`+C),a.toTooltipHtml({title:p,content:C,backgroundColor:g},Object.assign({datum:v,xKey:e,xName:l,yKey:i,yName:c,labelKey:d,labelName:u,title:p,color:g,seriesId:h},this.getModuleTooltipParams(v)))}getLegendData(t){var e,i,n,o,r;const{id:s,data:a,xKey:l,yKey:c,yName:d,title:u,visible:h,marker:p}=this,{fill:f,stroke:g,fillOpacity:v,strokeOpacity:y,strokeWidth:m}=p;return(null==a?void 0:a.length)&&l&&c&&"category"===t?[{legendType:"category",id:s,itemId:c,seriesId:s,enabled:h,label:{text:null!==(e=null!=u?u:d)&&void 0!==e?e:c},marker:{shape:p.shape,fill:null!==(n=null!==(i=p.fill)&&void 0!==i?i:f)&&void 0!==n?n:"rgba(0, 0, 0, 0)",stroke:null!==(r=null!==(o=p.stroke)&&void 0!==o?o:g)&&void 0!==r?r:"rgba(0, 0, 0, 0)",fillOpacity:null!=v?v:1,strokeOpacity:null!=y?y:1,strokeWidth:null!=m?m:0}}]:[]}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,annotationSelections:n}=t;LF(this,this.ctx.animationManager,e),vP(this,"labels",this.ctx.animationManager,i),vP(this,"annotations",this.ctx.animationManager,n)}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new ZM}}b_.className="ScatterSeries",b_.type="scatter",KA([PT(YT),YA("design:type",String)],b_.prototype,"title",void 0),KA([PT(YT),YA("design:type",String)],b_.prototype,"labelKey",void 0),KA([PT(YT),YA("design:type",String)],b_.prototype,"xName",void 0),KA([PT(YT),YA("design:type",String)],b_.prototype,"yName",void 0),KA([PT(YT),YA("design:type",String)],b_.prototype,"labelName",void 0),KA([PT(YT),YA("design:type",String)],b_.prototype,"xKey",void 0),KA([PT(YT),YA("design:type",String)],b_.prototype,"yKey",void 0),KA([PT(YT),YA("design:type",String)],b_.prototype,"colorKey",void 0),KA([PT(YT),YA("design:type",String)],b_.prototype,"colorName",void 0),KA([PT(lk),YA("design:type",Array)],b_.prototype,"colorDomain",void 0),KA([PT(ek),YA("design:type",Array)],b_.prototype,"colorRange",void 0);class S_{constructor(t,e,i,n,o,r,s,a,l,c,d){this.series=t,this.index=e,this.datum=i,this.size=n,this.colorValue=o,this.fill=r,this.stroke=s,this.sumSize=a,this.depth=l,this.parent=c,this.children=d,this.midPoint={x:0,y:0}}contains(t){let e=t;for(;null!=e&&e.index>=this.index;){if(e===this)return!0;e=e.parent}return!1}walk(t,e=S_.Walk.PreOrder){e===S_.Walk.PreOrder&&t(this),this.children.forEach(i=>{i.walk(t,e)}),e===S_.Walk.PostOrder&&t(this)}*[Symbol.iterator](){yield this;for(const t of this.children)yield*t}}S_.Walk={PreOrder:0,PostOrder:1};class x_ extends gP{constructor(t){super({moduleCtx:t,pickModes:[iP.EXACT_SHAPE_MATCH],contentGroupVirtual:!1}),this.childrenKey="children",this.sizeKey=void 0,this.colorKey=void 0,this.colorName=void 0,this.fills=Object.values(KR),this.strokes=Object.values(YR),this.colorRange=void 0,this.rootNode=new S_(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.animationState=new jP("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)}},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),resize:t=>this.animateReadyResize(t)},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)}},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)}}},()=>this.checkProcessedDataAnimatable())}hasData(){return Array.isArray(this.data)&&this.data.length>0}processData(){var t,e;return XA(this,void 0,void 0,(function*(){const{childrenKey:i,sizeKey:n,colorKey:o,fills:r,strokes:s,colorRange:a}=this;let l=0;const c=()=>(l+=1,l);let d=0,u=1/0,h=-1/0;const p=new Array((null!==(e=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==e?e:0)+1).fill(void 0),f=(t,e)=>{const r=c(),s=null!=e.depth?e.depth+1:0,a=null!=i?t[i]:void 0,l=null==a||0===a.length;let f=null!=n?t[n]:void 0;f=Number.isFinite(f)?Math.max(f,0):l?1:0;const v=f;d=Math.max(d,s);const y=null!=o?t[o]:void 0;return"number"==typeof y&&(p[r]=y,u=Math.min(u,y),h=Math.max(h,y)),g(new S_(this,r,t,f,y,void 0,void 0,v,s,e,[]),a)},g=(t,e)=>(null==e||e.forEach(e=>{const i=f(e,t);t.children.push(i),t.sumSize+=i.sumSize}),t),v=g(new S_(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.data),y=[u,h];let m;null!=a&&Number.isFinite(u)&&Number.isFinite(h)&&(m=new vI,m.domain=y,m.range=a,m.update()),v.children.forEach((t,e)=>{t.walk(t=>{let i;const n=p[t.index];null!=n&&(i=null==m?void 0:m.convert(n)),null!=i||(i=null==r?void 0:r[e%r.length]),t.fill=i,t.stroke=null==m?null==s?void 0:s[e%s.length]:"rgba(0, 0, 0, 0.2)"})}),this.rootNode=v,this.maxDepth=d,this.colorDomain=y}))}update({seriesRect:t}){return XA(this,void 0,void 0,(function*(){yield this.updateSelections(),yield this.updateNodes();const e=this.getAnimationData();this.checkResize(t)&&this.animationState.transition("resize",e),this.animationState.transition("update",e)}))}resetAllAnimation(t){var e;const i=null===(e=this.animationResetFns)||void 0===e?void 0:e.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),null!=i&&GP(t.datumSelections,i)}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e;const i=null===(e=this.animationResetFns)||void 0===e?void 0:e.datum;null!=i&&GP([t],i)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(){return{datumSelections:[this.groupSelection]}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(t){return"gradient"===t&&null!=this.colorKey&&null!=this.colorRange?[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.colorName,colorDomain:this.colorDomain,colorRange:this.colorRange}]:[]}getDatumIdFromData(t){return""+t.index}getDatumId(t){return this.getDatumIdFromData(t)}}KA([PT(YT),YA("design:type",String)],x_.prototype,"childrenKey",void 0),KA([PT(YT),YA("design:type",String)],x_.prototype,"sizeKey",void 0),KA([PT(YT),YA("design:type",String)],x_.prototype,"colorKey",void 0),KA([PT(YT),YA("design:type",String)],x_.prototype,"colorName",void 0),KA([PT(ik),YA("design:type",Array)],x_.prototype,"fills",void 0),KA([PT(ik),YA("design:type",Array)],x_.prototype,"strokes",void 0),KA([PT(ik),YA("design:type",Array)],x_.prototype,"colorRange",void 0);class C_ extends WN{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(t,e){return null}}KA([PT(ok(0,1)),YA("design:type",Number)],C_.prototype,"innerRadiusRatio",void 0);const w_={},E_={};function O_(t){return $A.some(t=>"enterprise"===t.packageType)?E_[t]:w_[t]}class D_ extends hI{constructor(t,e){super(t,e),this._data={}}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return XA(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),{seriesArea:{padding:i},seriesRoot:n}=this,o=e.clone();return e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e,this.animationRect=e,this.hoverRect=e,n.translationX=Math.floor(e.x),n.translationY=Math.floor(e.y),yield Promise.all(this.series.map(t=>XA(this,void 0,void 0,(function*(){yield t.update({seriesRect:e})})))),n.visible=this.series[0].visible,n.setClipRectInGroupCoordinateSpace(new Wk(e.x,e.y,e.width,e.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:o,paddedRect:e,visible:!0},axes:[]}),e}))}}D_.className="HierarchyChart",D_.type="hierarchy";const A_={fills:Array.from(Object.values(KR)),strokes:Array.from(Object.values(YR))},T_={get cartesian(){return{seriesTypes:QI.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:QI.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:QI.hierarchyTypes,commonOptions:[]}}},k_=Object.values(T_).reduce((t,{commonOptions:e})=>[...t,...e],[]);class M_{getPalette(){return A_}static getAxisDefaults(){return{top:{},right:{},bottom:{},left:{},title:{enabled:!1,text:"Axis Title",spacing:25,fontStyle:void 0,fontWeight:"normal",fontSize:qI,fontFamily:pF,color:fF},label:{fontStyle:void 0,fontWeight:void 0,fontSize:XI,fontFamily:pF,padding:5,rotation:void 0,color:fF,formatter:void 0,avoidCollisions:!0},line:{enabled:!0,width:1,color:bF},tick:{enabled:!1,width:1,color:bF},gridLine:{enabled:!0,style:[{stroke:mF,lineDash:[]}]},crossLines:{enabled:!1,fill:SF,stroke:SF,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:XI,fontFamily:pF,padding:5,color:fF}}}}static getSeriesDefaults(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:7,strokeWidth:1,formatter:void 0}}static getLegendItemMarkerDefaults(){return{shape:void 0,size:15,padding:8}}static getCaptionWrappingDefaults(){return"hyphenate"}static getChartDefaults(){return{background:{visible:!0,fill:xF},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontStyle:void 0,fontWeight:"normal",fontSize:$I,fontFamily:pF,color:fF,wrapping:M_.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontStyle:void 0,fontWeight:void 0,fontSize:qI,fontFamily:pF,color:yF,wrapping:M_.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",spacing:20,fontStyle:void 0,fontWeight:void 0,fontSize:qI,fontFamily:pF,color:"rgb(140, 140, 140)",wrapping:M_.getCaptionWrappingDefaults()},legend:{position:"bottom",spacing:30,listeners:{},item:{paddingX:16,paddingY:8,marker:M_.getLegendItemMarkerDefaults(),label:{color:fF,fontStyle:void 0,fontWeight:void 0,fontSize:XI,fontFamily:pF,formatter:void 0}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:fF},inactiveStyle:{fill:yF},highlightStyle:{fill:fF},label:{color:fF}}},tooltip:{enabled:!0,range:"nearest",delay:0},listeners:{}}}constructor(t){t=hR({},null!=t?t:{});const{overrides:e=null,palette:i=null}=t,n=this.createChartConfigPerChartType(this.getDefaults());if(e){const{common:t}=e,i=(t,e)=>{if(e)for(const i of t){const t=i;n[t]=hR(n[t],e)}};for(const[,{seriesTypes:e,commonOptions:n}]of Object.entries(T_)){const o=Object.assign({},t);for(const t of k_)n.includes(t)||delete o[t];i(e,o)}QI.seriesTypes.forEach(t=>{const i=t;e[i]&&(n[i]=hR(n[i],e[i]))})}this.palette=null!=i?i:this.getPalette(),this.config=Object.freeze(this.templateTheme(n))}createChartConfigPerChartType(t){return Object.entries(T_).forEach(([e,{seriesTypes:i}])=>{const n=tF(e);i.forEach(e=>{const i=e;t[i]||(t[i]={},hR(t[i],n))})}),t}getDefaults(){let t={};const e=t=>Object.assign(Object.assign(Object.assign({},BI),M_.getChartDefaults()),tF(t)),i=(t,i)=>{var n,o,r,s;const a=e(t),l={};for(const e of i){null!==(n=l[e])&&void 0!==n||(l[e]=hR({},a));const i=null!==(o=(s=l[e]).axes)&&void 0!==o?o:s.axes={},c=O_(e);c&&(l[e].series=hR(l[e].series,c));for(const e of FI.axesTypes){const n=GI(e);"cartesian"===t&&(i[e]=hR(i[e],null!==(r=M_.cartesianAxisDefault[e])&&void 0!==r?r:{})),n&&(i[e]=hR(i[e],n))}}return l};return t=hR(t,i("cartesian",QI.cartesianTypes)),t=hR(t,i("polar",QI.polarTypes)),t=hR(t,i("hierarchy",QI.hierarchyTypes)),t}templateTheme(t){const e=gT([t]),{extensions:i,properties:n}=this.getTemplateParameters();return vT(e,(t,e)=>{if(e.__extends__){const t=e.__extends__,n=i.get(t);if(null==n)throw new Error("AG Charts - no template variable provided for: "+t);Object.keys(n).forEach(t=>{t in e||(e[t]=n[t])}),delete e.__extends__}if(e.__overrides__){const t=e.__overrides__,n=i.get(t);if(null==n)throw new Error("AG Charts - no template variable provided for: "+t);Object.assign(e,n),delete e.__overrides__}if(Array.isArray(e))for(let t=0;t<e.length;t++){const i=e[t];n.has(i)&&(e[t]=n.get(i))}else for(const[t,i]of Object.entries(e))n.has(i)&&(e[t]=n.get(i))}),e}static getWaterfallSeriesDefaultPositiveColors(){return{fill:KR.BLUE,stroke:YR.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:KR.ORANGE,stroke:YR.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:KR.GRAY,stroke:YR.GRAY}}getTemplateParameters(){const t=new Map;t.set(eF,M_.getChartDefaults()),t.set(rF,M_.getAxisDefaults()),t.set(iF,M_.getChartDefaults().legend),t.set(nF,M_.getChartDefaults().legend.item),t.set(oF,M_.getLegendItemMarkerDefaults()),t.set(sF,M_.getAxisDefaults().label),t.set(aF,M_.getAxisDefaults().line),t.set(lF,M_.getAxisDefaults().tick),t.set(cF,M_.getAxisDefaults().gridLine),t.set(dF,M_.getSeriesDefaults()),t.set(hF,{}),t.set(uF,M_.getCartesianSeriesMarkerDefaults());const e=new Map;return e.set(pF,"Verdana, sans-serif"),e.set(fF,"rgb(70, 70, 70)"),e.set(gF,"white"),e.set(yF,"rgb(140, 140, 140)"),e.set(mF,"rgb(224,234,241)"),e.set(bF,"rgb(195, 195, 195)"),e.set(SF,"rgb(70, 70, 70)"),e.set(vF,"white"),e.set(xF,"white"),e.set(CF,"rgba(0, 0, 0, 0.5)"),e.set(TF,[KR.ORANGE,KR.YELLOW,KR.GREEN]),e.set(kF,["#ffffff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),e.set(MF,["#ffffff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),e.set(AF,"white"),e.set(wF,M_.getWaterfallSeriesDefaultPositiveColors()),e.set(EF,M_.getWaterfallSeriesDefaultNegativeColors()),e.set(OF,M_.getWaterfallSeriesDefaultTotalColors()),e.set(DF,M_.getWaterfallSeriesDefaultTotalColors().stroke),{extensions:t,properties:e}}}M_.cartesianAxisDefault={number:Object.assign(Object.assign({},M_.getAxisDefaults()),{line:Object.assign(Object.assign({},M_.getAxisDefaults().line),{enabled:!1})}),log:Object.assign(Object.assign({},M_.getAxisDefaults()),{base:10,line:Object.assign(Object.assign({},M_.getAxisDefaults().line),{enabled:!1})}),category:Object.assign(Object.assign({},M_.getAxisDefaults()),{groupPaddingInner:.1,label:Object.assign(Object.assign({},M_.getAxisDefaults().label),{autoRotate:!0}),gridLine:Object.assign(Object.assign({},M_.getAxisDefaults().gridLine),{enabled:!1})}),"grouped-category":Object.assign({},M_.getAxisDefaults()),time:Object.assign(Object.assign({},M_.getAxisDefaults()),{gridLine:Object.assign(Object.assign({},M_.getAxisDefaults().gridLine),{enabled:!1})})};const R_={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},P_={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},N_={fills:Array.from(Object.values(R_)),strokes:Array.from(Object.values(P_))};class L_ extends M_{static getWaterfallSeriesDefaultPositiveColors(){return{fill:R_.BLUE,stroke:P_.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:R_.ORANGE,stroke:P_.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:R_.GRAY,stroke:P_.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(wF,L_.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(EF,L_.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(OF,L_.getWaterfallSeriesDefaultTotalColors()),t.properties.set(DF,L_.getWaterfallSeriesDefaultTotalColors().stroke),t.properties.set(AF,"#182732"),t.properties.set(fF,"white"),t.properties.set(yF,"#7D91A0"),t.properties.set(mF,"#545A6E"),t.properties.set(SF,"white"),t.properties.set(TF,[R_.ORANGE,R_.YELLOW,R_.GREEN]),t.properties.set(kF,["#192834","#253746","#324859","#3f596c","#4d6a80"]),t.properties.set(MF,["#192834","#3b5164","#496275","#577287","#668399"]),t.properties.set(xF,"#182732"),t.properties.set(vF,"#182732"),t}getPalette(){return N_}constructor(t){super(t)}}const I_={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},F_={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},__={fills:Array.from(Object.values(I_)),strokes:Array.from(Object.values(F_))};class G_ extends L_{static getWaterfallSeriesDefaultPositiveColors(){return{fill:I_.BLUE,stroke:F_.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:I_.RED,stroke:F_.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:I_.GRAY,stroke:F_.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(wF,G_.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(EF,G_.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(OF,G_.getWaterfallSeriesDefaultTotalColors()),t.properties.set(TF,[I_.ORANGE,I_.YELLOW,I_.GREEN]),t.properties.set(DF,G_.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return __}}const B_={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},V_={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},j_={fills:Array.from(Object.values(B_)),strokes:Array.from(Object.values(V_))};class W_ extends M_{static getWaterfallSeriesDefaultPositiveColors(){return{fill:B_.BLUE,stroke:V_.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:B_.RED,stroke:V_.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:B_.GRAY,stroke:V_.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(wF,W_.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(EF,W_.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(OF,W_.getWaterfallSeriesDefaultTotalColors()),t.properties.set(TF,[B_.ORANGE,B_.YELLOW,B_.GREEN]),t.properties.set(DF,W_.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return j_}}const z_={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},U_={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff"},H_={fills:Array.from(Object.values(z_)),strokes:Array.from(Object.values(U_))};class K_ extends L_{static getWaterfallSeriesDefaultPositiveColors(){return{fill:z_.BLUE,stroke:U_.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:z_.RED,stroke:U_.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#eeeeee"}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(wF,K_.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(EF,K_.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(OF,K_.getWaterfallSeriesDefaultTotalColors()),t.properties.set(TF,[z_.BLUE,z_.RED]),t.properties.set(DF,K_.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return H_}}const Y_={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},X_={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb"},q_={fills:Array.from(Object.values(Y_)),strokes:Array.from(Object.values(X_))};class $_ extends M_{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Y_.BLUE,stroke:X_.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Y_.RED,stroke:X_.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#888888"}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(wF,$_.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(EF,$_.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(OF,$_.getWaterfallSeriesDefaultTotalColors()),t.properties.set(TF,[Y_.BLUE,Y_.RED]),t.properties.set(DF,$_.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return q_}}const Z_={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},J_={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},Q_={fills:Array.from(Object.values(Z_)),strokes:Array.from(Object.values(J_))};class tG extends L_{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Z_.BLUE,stroke:J_.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Z_.ORANGE,stroke:J_.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Z_.GRAY,stroke:J_.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(wF,tG.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(EF,tG.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(OF,tG.getWaterfallSeriesDefaultTotalColors()),t.properties.set(TF,[Z_.ORANGE,Z_.YELLOW,Z_.GREEN]),t.properties.set(DF,tG.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Q_}}const eG={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},iG={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},nG={fills:Array.from(Object.values(eG)),strokes:Array.from(Object.values(iG))};class oG extends M_{static getWaterfallSeriesDefaultPositiveColors(){return{fill:eG.BLUE,stroke:iG.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:eG.ORANGE,stroke:iG.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:eG.GRAY,stroke:iG.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(wF,oG.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(EF,oG.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(OF,oG.getWaterfallSeriesDefaultTotalColors()),t.properties.set(TF,[eG.ORANGE,eG.YELLOW,eG.GREEN]),t.properties.set(DF,oG.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return nG}}const rG={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},sG={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#c18aff",YELLOW:"#fff653",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},aG={fills:Array.from(Object.values(rG)),strokes:Array.from(Object.values(sG))};class lG extends L_{static getWaterfallSeriesDefaultPositiveColors(){return{fill:rG.BLUE,stroke:sG.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:rG.ORANGE,stroke:sG.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:rG.GRAY,stroke:sG.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(wF,lG.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(EF,lG.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(OF,lG.getWaterfallSeriesDefaultTotalColors()),t.properties.set(TF,[rG.ORANGE,rG.YELLOW,rG.GREEN]),t.properties.set(DF,lG.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return aG}}const cG={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},dG={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},uG={fills:Array.from(Object.values(cG)),strokes:Array.from(Object.values(dG))};class hG extends M_{static getWaterfallSeriesDefaultPositiveColors(){return{fill:cG.BLUE,stroke:dG.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:cG.ORANGE,stroke:dG.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:cG.GRAY,stroke:dG.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(wF,hG.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(EF,hG.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(OF,hG.getWaterfallSeriesDefaultTotalColors()),t.properties.set(TF,[cG.ORANGE,cG.YELLOW,cG.GREEN]),t.properties.set(DF,hG.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return uG}}const pG=()=>new M_,fG=()=>new L_,gG={undefined:pG,null:pG,"ag-default":pG,"ag-sheets":()=>new oG,"ag-polychroma":()=>new $_,"ag-vivid":()=>new hG,"ag-material":()=>new W_},vG={undefined:fG,null:fG,"ag-default-dark":fG,"ag-sheets-dark":()=>new tG,"ag-polychroma-dark":()=>new K_,"ag-vivid-dark":()=>new lG,"ag-material-dark":()=>new G_},yG=Object.assign(Object.assign({},vG),gG);class mG extends hI{constructor(t,e){super(t,e),this.padding=new CN(40),this.axisGroup.zIndex=zR.AXIS_FOREGROUND_ZINDEX}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return XA(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),i=e.clone();return this.computeSeriesRect(e),yield this.computeCircle(e),this.axes.forEach(t=>t.update()),this.hoverRect=e,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:i,paddedRect:e,visible:!0},axes:[]}),e}))}updateAxes(t,e,i){var n,o;const r=this.axes.find(t=>t.direction===Lk.X),s=this.axes.find(t=>t.direction===Lk.Y);if(!(r instanceof C_&&s instanceof C_))return;const a=r.scale,l=null===(n=a.ticks)||void 0===n?void 0:n.call(a).map(t=>a.convert(t)),c=s.innerRadiusRatio;r.innerRadiusRatio=c,null===(o=r.computeRange)||void 0===o||o.call(r),r.gridLength=i,s.gridAngles=l,s.gridRange=r.range,s.range=[i,i*c],[r,s].forEach(i=>{i.translation.x=t,i.translation.y=e,i.calculateLayout()})}computeSeriesRect(t){const{seriesArea:{padding:e}}=this;t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),this.seriesRect=t,this.animationRect=t}computeCircle(t){return XA(this,void 0,void 0,(function*(){const e=this.series.filter(t=>t instanceof zP),i=this.axes.filter(t=>t instanceof C_),n=(t,i,n)=>{this.updateAxes(t,i,n),e.forEach(e=>{e.centerX=t,e.centerY=i,e.radius=n});const o=e.filter(t=>t instanceof $P);if(o.length>1){const t=o.map(t=>{const e=t.getInnerRadius();return{series:t,innerRadius:e}}).sort((t,e)=>t.innerRadius-e.innerRadius);t[t.length-1].series.surroundingRadius=void 0;for(let e=0;e<t.length-1;e++)t[e].series.surroundingRadius=t[e+1].innerRadius}},o=t.x+t.width/2,r=t.y+t.height/2,s=Math.max(0,Math.min(t.width,t.height)/2);let a=s;n(o,r,a);const l=({hideWhenNecessary:l=!1}={})=>XA(this,void 0,void 0,(function*(){const c=[];for(const n of[...i,...e]){const e=yield n.computeLabelsBBox({hideWhenNecessary:l},t);e&&c.push(e)}if(0===c.length)return void n(o,r,s);const d=Wk.merge(c),u=this.refineCircle(d,a,t);n(u.centerX,u.centerY,u.radius),u.radius!==a&&(a=u.radius)}));return yield l(),yield l(),yield l(),yield l({hideWhenNecessary:!0}),yield l({hideWhenNecessary:!0}),{radius:a,centerX:o,centerY:r}}))}refineCircle(t,e,i){const n=-e,o=-e,r=e,s=e;let a=Math.max(0,n-t.x),l=Math.max(0,o-t.y),c=Math.max(0,t.x+t.width-r),d=Math.max(0,t.y+t.height-s);a=c=Math.max(a,c),l=d=Math.max(l,d);const u=i.width-a-c,h=i.height-l-d;let p=Math.min(u,h)/2;const f=.5*i.width/2,g=.5*i.height/2,v=Math.min(f,g);if(p<v){p=v;const t=a+c;if(2*p+(l+d)>i.height){const t=i.height-2*p;2*Math.min(l,d)>t?(l=t/2,d=t/2):l>d?l=t-d:d=t-l}if(2*p+t>i.width){const t=i.width-2*p;2*Math.min(a,c)>t?(a=t/2,c=t/2):a>c?a=t-c:c=t-a}}const y=a+2*p+c,m=l+2*p+d;return{centerX:i.x+(i.width-y)/2+a+p,centerY:i.y+(i.height-m)/2+l+p,radius:p}}}mG.className="PolarChart",mG.type="polar",Object.entries(yG).reduce((t,[e,i])=>(t[e]=i(),t),{});var bG,SG=Object.freeze({__proto__:null,TimeScale:xN,BandScale:ET,ContinuousScale:YM,ColorScale:vI,LinearScale:XM}),xG=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CG=wN.extent,wG=wN.isNumber,EG=wN.isString,OG=wN.isStringObject,DG=wN.isDate,AG=wN.createId,TG=wN.Padding,kG=SG.LinearScale,MG=SG.BandScale,RG=SG.TimeScale;!function(t){t[t.SERIES_FILL_ZINDEX=50]="SERIES_FILL_ZINDEX",t[t.AXIS_LINE_ZINDEX=500]="AXIS_LINE_ZINDEX",t[t.SERIES_STROKE_ZINDEX=1e3]="SERIES_STROKE_ZINDEX",t[t.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",t[t.CROSSHAIR_ZINDEX=2e3]="CROSSHAIR_ZINDEX",t[t.SERIES_MARKERS_ZINDEX=2500]="SERIES_MARKERS_ZINDEX"}(bG||(bG={}));var PG=function(){this.type="category",this.stroke="rgb(204, 214, 235)",this.strokeWidth=1},NG=function(){function t(){this.id=AG(this),this.seriesRect={x:0,y:0,width:0,height:0},this._context=void 0,this._container=void 0,this._data=void 0,this.padding=new TG(3),this.xKey="x",this.yKey="y",this.dataType=void 0,this.xData=[],this.yData=[],this.min=void 0,this.max=void 0,this.yScale=new kG,this.axis=new PG,this.highlightStyle={size:6,fill:"yellow",stroke:"silver",strokeWidth:1},this._width=100,this._height=100,this.smallestInterval=void 0,this.layoutId=0,this.defaultDateFormatter=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),this._onMouseMove=this.onMouseMove.bind(this),this._onMouseOut=this.onMouseOut.bind(this);var e=new xI.Group;this.rootGroup=e;var i=document.createElement("div");i.setAttribute("class","ag-sparkline-wrapper");var n=new xI.Scene({window:window,document:document});this.scene=n,this.canvasElement=n.canvas.element,n.root=e,n.container=i,this.resizeAndSetDimensions(this.width,this.height),t.tooltipDocuments.includes(document)||this.initialiseTooltipStyles(),this.setupDomEventListeners(this.canvasElement)}return Object.defineProperty(t.prototype,"context",{get:function(){return this._context},set:function(t){this._context!==t&&(this._context=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(t){if(this._container!==t){var e=this.canvasElement.parentNode;null!=e&&e.removeChild(this.canvasElement),t&&t.appendChild(this.canvasElement),this._container=t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){this._data!==t&&(this._data=t,this.processData(),this.mouseMoveEvent&&this.highlightedDatum&&this.updateHitPoint(this.mouseMoveEvent))},enumerable:!1,configurable:!0}),t.prototype.resizeAndSetDimensions=function(t,e){this.scene.resize(t,e),this.seriesRect.width=t,this.seriesRect.height=e},t.prototype.initialiseTooltipStyles=function(){var e=document.createElement("style");e.innerHTML="\n.ag-sparkline-tooltip-wrapper {\n    position: absolute;\n    user-select: none;\n    pointer-events: none;\n}\n\n.ag-sparkline-tooltip {\n    position: relative;\n    font: 12px arial,sans-serif;\n    border-radius: 2px;\n    box-shadow: 0 1px 3px rgb(0 0 0 / 20%), 0 1px 1px rgb(0 0 0 / 14%);\n    line-height: 1.7em;\n    overflow: hidden;\n    white-space: nowrap;\n    z-index: 99999;\n    background-color: rgb(255, 255, 255);\n    color: rgba(0,0,0, 0.67);\n}\n\n.ag-sparkline-tooltip-content {\n    padding: 0 7px;\n    opacity: 1;\n}\n\n.ag-sparkline-tooltip-title {\n    padding-left: 7px;\n    opacity: 1;\n}\n\n.ag-sparkline-tooltip-wrapper-hidden {\n    top: -10000px !important;\n}\n\n.ag-sparkline-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n",document.head.insertBefore(e,document.head.querySelector("style")),t.tooltipDocuments.push(document)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width!==t&&(this._width=t,this.scene.resize(t,this.height),this.scheduleLayout())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height!==t&&(this._height=t,this.scene.resize(this.width,t),this.scheduleLayout())},enumerable:!1,configurable:!0}),t.prototype.update=function(){},t.prototype.updateYScale=function(){this.updateYScaleRange(),this.updateYScaleDomain()},t.prototype.updateYScaleDomain=function(){},t.prototype.updateYScaleRange=function(){var t=this.yScale,e=this.seriesRect;t.range=[e.height,0]},t.prototype.updateXScale=function(){var t=this.axis.type;this.xScale=this.getXScale(t),this.updateXScaleRange(),this.updateXScaleDomain()},t.prototype.updateXScaleRange=function(){this.xScale.range=[0,this.seriesRect.width]},t.prototype.updateXScaleDomain=function(){var t,e=this.xData,i=this.xScale;(i instanceof kG||i instanceof RG)&&(t=CG(e)),this.xScale.domain=t?t.slice():e},t.prototype.getXScale=function(t){switch(void 0===t&&(t="category"),t){case"number":return new kG;case"time":return new RG;case"category":default:return new MG}},t.prototype.updateAxisLine=function(){},t.prototype.updateAxes=function(){this.updateYScale(),this.updateXScale(),this.updateAxisLine()},t.prototype.updateCrosshairs=function(){this.updateXCrosshairLine(),this.updateYCrosshairLine()},t.prototype.generateNodeData=function(){return[]},t.prototype.getNodeData=function(){return[]},t.prototype.updateNodes=function(){},t.prototype.updateXCrosshairLine=function(){},t.prototype.updateYCrosshairLine=function(){},t.prototype.highlightDatum=function(t){this.updateNodes()},t.prototype.dehighlightDatum=function(){this.highlightedDatum=void 0,this.updateNodes(),this.updateCrosshairs()},t.prototype.onMouseMove=function(t){this.mouseMoveEvent=t,this.updateHitPoint(t)},t.prototype.updateHitPoint=function(t){var e,i,n,o=this.pickClosestSeriesNodeDatum(t.offsetX,t.offsetY);if(o){var r=this.highlightedDatum;this.highlightedDatum=o,(this.highlightedDatum&&!r||this.highlightedDatum&&r&&this.highlightedDatum!==r)&&(this.highlightDatum(o),this.updateCrosshairs(),this.scene.render().catch((function(t){return console.error("AG Grid - chart rendering failed",t)}))),(null===(n=null===(i=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===i?void 0:i.enabled)||void 0===n||n)&&this.handleTooltip(t,o)}},t.prototype.onMouseOut=function(t){this.dehighlightDatum(),this.tooltip.toggle(!1),this.scene.render().catch((function(t){return console.error("AG Grid - chart rendering failed",t)}))},t.prototype.processData=function(){var t=this,e=this.data,i=this.yData,n=this.xData;if(e&&!this.invalidData(this.data)){i.length=0,n.length=0;var o=e.length,r=this.getDataType(e);this.dataType=r;var s,a=this.axis.type,l="number"!==a&&"time"!==a?"category":a,c="number"===l||"time"===l,d=function(e,i){null==t.smallestInterval&&(t.smallestInterval={x:1/0,y:1/0});var n=t.smallestInterval.x,o=Math.abs(e-i);o>0&&o<n&&(t.smallestInterval.x=o)};if("number"===r)for(var u=0;u<o;u++){var h=u,p=e[u],f=this.getDatum(h,l),g=this.getDatum(p,"number");c&&d(f,s),n.push(f),i.push(g),s=f}else if("array"===r)for(u=0;u<o;u++){var v=e[u];if(Array.isArray(v)){h=v[0],p=v[1],f=this.getDatum(h,l),g=this.getDatum(p,"number");if(null==f)continue;c&&d(f,s),n.push(f),i.push(g),s=f}}else if("object"===r){var y=this.yKey,m=this.xKey;for(u=0;u<o;u++){if("object"==typeof(v=e[u])&&!Array.isArray(v)){h=v[m],p=v[y],f=this.getDatum(h,l),g=this.getDatum(p,"number");if(null==f)continue;c&&d(f,s),n.push(f),i.push(g),s=f}}}this.updateAxes(),this.immediateLayout()}},t.prototype.getDataType=function(t){var e,i;try{for(var n=xG(t),o=n.next();!o.done;o=n.next()){var r=o.value;if(null!=r){if(wG(r))return"number";if(Array.isArray(r))return"array";if("object"==typeof r)return"object"}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}},t.prototype.getDatum=function(t,e){if("number"===e&&wG(t)||"time"===e&&(wG(t)||DG(t)))return t;if("category"===e){if(EG(t)||DG(t)||wG(t))return{toString:function(){return String(t)}};if(OG(t))return t}},Object.defineProperty(t.prototype,"layoutScheduled",{get:function(){return!!this.layoutId},enumerable:!1,configurable:!0}),t.prototype.scheduleLayout=function(){var t=this;this.layoutId&&cancelAnimationFrame(this.layoutId),this.layoutId=requestAnimationFrame((function(){t.immediateLayout(),t.layoutId=0}))},t.prototype.immediateLayout=function(){this.setSparklineDimensions(),this.invalidData(this.data)||(this.updateXScaleRange(),this.updateYScaleRange(),this.updateAxisLine(),this.update(),this.scene.render().catch((function(t){return console.error("AG Grid - chart rendering failed",t)})))},t.prototype.setSparklineDimensions=function(){var t=this,e=t.width,i=t.height,n=t.padding,o=t.seriesRect,r=t.rootGroup,s=e-n.left-n.right,a=i-n.top-n.bottom;o.width=s,o.height=a,o.x=n.left,o.y=n.top,r.translationX=o.x,r.translationY=o.y},t.prototype.pickClosestSeriesNodeDatum=function(t,e){for(var i,n=1/0,o=this.rootGroup.transformPoint(t,e),r=this.getNodeData(),s=0;s<r.length;s++){var a=r[s];if(!a.point)return;var l=this.getDistance(o,a.point);l<=n&&(n=l,i=a)}return i},t.prototype.getDistance=function(t,e){return Math.abs(t.x-e.x)},t.prototype.handleTooltip=function(t,e){var i,n,o=e.seriesDatum,r=this.canvasElement,s=t.clientX,a=t.clientY,l=null===(i=this.processedOptions)||void 0===i?void 0:i.tooltip,c={pageX:s,pageY:a,position:{xOffset:null==l?void 0:l.xOffset,yOffset:null==l?void 0:l.yOffset},container:null==l?void 0:l.container};null==c.container&&(c.container=r);var d=o.y,u=o.x,h=null===(n=null==l?void 0:l.enabled)||void 0===n||n,p=null==l?void 0:l.renderer;if(p){var f=p({context:this.context,datum:o,yValue:d,xValue:u});h="string"!=typeof f&&void 0!==f.enabled?f.enabled:h}var g=h&&void 0!==o.y&&this.getTooltipHtml(e);g&&this.tooltip.show(c,g)},t.prototype.formatNumericDatum=function(t){return String(Math.round(10*t)/10)},t.prototype.formatDatum=function(t){var e=this.axis.type||"category";return"number"===e&&"number"==typeof t?this.formatNumericDatum(t):"time"===e&&(t instanceof Date||wG(t))?this.defaultDateFormatter.format(t):String(t)},t.prototype.setupDomEventListeners=function(t){t.addEventListener("mousemove",this._onMouseMove),t.addEventListener("mouseout",this._onMouseOut)},t.prototype.cleanupDomEventListeners=function(t){t.removeEventListener("mousemove",this._onMouseMove),t.removeEventListener("mouseout",this._onMouseOut)},t.prototype.invalidData=function(t){return!t||!Array.isArray(t)||0===t.length},t.prototype.destroy=function(){this.scene.container=void 0,this.container=void 0,this.cleanupDomEventListeners(this.scene.canvas.element)},t.tooltipDocuments=[],t}();function LG(t,e){var i,n,o;if("string"==typeof t)return t;e=null!=e?e:{};var r,s,a=t.content,l=void 0===a?null!==(i=e.content)&&void 0!==i?i:"":a,c=t.title,d=void 0===c?null!==(n=e.title)&&void 0!==n?n:void 0:c,u=t.color,h=void 0===u?e.color:u,p=t.backgroundColor,f=void 0===p?e.backgroundColor:p,g=t.opacity,v=void 0===g?null!==(o=e.opacity)&&void 0!==o?o:1:g;h?(r=d?'<span class="'.concat(IG.class,'-title"; style="color: ').concat(h,'">').concat(d,"</span>"):"",s='<span class="'.concat(IG.class,'-content" style="color: ').concat(h,'">').concat(l,"</span>")):(r=d?'<span class="'.concat(IG.class,'-title">').concat(d,"</span>"):"",s='<span class="'.concat(IG.class,'-content">').concat(l,"</span>"));var y="opacity: ".concat(v);return f&&(y+="; background-color: ".concat(f.toLowerCase())),'<div class="'.concat(IG.class,'" style="').concat(y,'">\n                ').concat(r,"\n                ").concat(s,"\n            </div>")}var IG=function(){function t(){this.element=document.createElement("div"),document.body.appendChild(this.element)}return t.prototype.isVisible=function(){var e=this.element;if(e.classList)return!e.classList.contains("".concat(t.class,"-wrapper-hidden"));var i=e.getAttribute("class");return!!i&&i.split(" ").indexOf("".concat(t.class,"-wrapper-hidden"))<0},t.prototype.updateClass=function(e){var i=["".concat(t.class,"-wrapper")];!0!==e&&i.push("".concat(t.class,"-wrapper-hidden")),this.element.setAttribute("class",i.join(" "))},t.prototype.show=function(t,e){var i,n,o,r;this.toggle(!1);var s=this.element;if(void 0!==e)s.innerHTML=e;else if(!s.innerHTML)return;var a=null!==(n=null===(i=t.position)||void 0===i?void 0:i.xOffset)&&void 0!==n?n:10,l=null!==(r=null===(o=t.position)||void 0===o?void 0:o.yOffset)&&void 0!==r?r:0,c=t.pageX+a,d=t.pageY+l,u=s.getBoundingClientRect(),h=window.innerWidth-u.width;if(t.container){var p=t.container.getBoundingClientRect();h=p.left+(p.width-u.width)}c>h&&(c=t.pageX-s.clientWidth-a),"undefined"!=typeof scrollX&&(c+=scrollX),"undefined"!=typeof scrollY&&(d+=scrollY),s.style.left="".concat(Math.round(c),"px"),s.style.top="".concat(Math.round(d),"px"),this.toggle(!0)},t.prototype.toggle=function(t){this.updateClass(t)},t.prototype.destroy=function(){var t=this.element.parentNode;t&&t.removeChild(this.element)},t.class="ag-sparkline-tooltip",t}();function FG(t){switch(t){case"circle":return xI.Circle;case"square":return xI.Square;case"diamond":return xI.Diamond;default:return xI.Circle}}function _G(t,e){void 0===e&&(e="solid");var i={solid:[],dash:[4,3],dot:[1,3],dashDot:[4,3,1,3],dashDotDot:[4,3,1,3,1,3],shortDot:[1,1],shortDash:[3,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],longDash:[8,3],longDashDot:[8,3,1,3],longDashDotDot:[8,3,1,3,1,3]},n={solid:[],dash:[3,3],dot:[0,3],dashDot:[3,3,0,3],dashDotDot:[3,3,0,3,0,3],shortDot:[0,2],shortDash:[2,2],shortDashDot:[2,2,0,2],shortDashDotDot:[2,2,0,2,0,2],longDash:[7,3],longDashDot:[7,3,0,3],longDashDotDot:[7,3,0,3,0,3]};return"round"===t||"square"===t?null==n[e]?(console.warn("'".concat(e,"' is not a valid 'lineDash' option.")),n.solid):n[e]:null==i[e]?(console.warn("'".concat(e,"' is not a valid 'lineDash' option.")),i.solid):i[e]}var GG,BG,VG=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),jG=wN.extent,WG=SG.BandScale,zG=function(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0},UG=function(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1},HG=function(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}},KG=function(t){function e(){var e=t.call(this)||this;return e.fill="rgba(124, 181, 236, 0.25)",e.strokePath=new xI.Path,e.fillPath=new xI.Path,e.xCrosshairLine=new xI.Line,e.yCrosshairLine=new xI.Line,e.areaSparklineGroup=new xI.Group,e.xAxisLine=new xI.Line,e.markers=new xI.Group,e.markerSelection=xI.Selection.select(e.markers,(function(){return e.markerFactory()})),e.markerSelectionData=[],e.marker=new zG,e.line=new UG,e.crosshairs=new HG,e.rootGroup.append(e.areaSparklineGroup),e.xAxisLine.zIndex=bG.AXIS_LINE_ZINDEX,e.fillPath.zIndex=bG.SERIES_FILL_ZINDEX,e.strokePath.zIndex=bG.SERIES_STROKE_ZINDEX,e.xCrosshairLine.zIndex=bG.CROSSHAIR_ZINDEX,e.yCrosshairLine.zIndex=bG.CROSSHAIR_ZINDEX,e.markers.zIndex=bG.SERIES_MARKERS_ZINDEX,e.areaSparklineGroup.append([e.fillPath,e.xAxisLine,e.strokePath,e.xCrosshairLine,e.yCrosshairLine,e.markers]),e}return VG(e,t),e.prototype.markerFactory=function(){return new(FG(this.marker.shape))},e.prototype.getNodeData=function(){return this.markerSelectionData},e.prototype.update=function(){var t=this.generateNodeData();if(t){var e=t.nodeData,i=t.fillData,n=t.strokeData;this.markerSelectionData=e,this.updateSelection(e),this.updateNodes(),this.updateStroke(n),this.updateFill(i)}},e.prototype.updateYScaleDomain=function(){var t=this.yData,e=this.yScale,i=jG(t),n=0,o=1;void 0!==i&&(n=this.min=i[0],o=this.max=i[1]),n=n<0?n:0,o=o<0?0:o,e.domain=[n,o]},e.prototype.generateNodeData=function(){var t=this,e=t.data,i=t.yData,n=t.xData,o=t.xScale,r=t.yScale;if(e){for(var s,a,l,c,d=!(o instanceof WG),u=d?0:o.bandwidth/2,h=i.length,p=[],f=[],g=[],v=r.convert(0),y=0;y<h;y++){var m=i[y],b=n[y],S=o.convert(d?o.toDomain(b):b)+u,x=void 0===m?NaN:r.convert(m);y+1<h&&(c=o.convert(d?o.toDomain(n[y+1]):n[y+1])+u),g.push({seriesDatum:{x:b,y:m},point:{x:S,y:x}}),void 0===m&&void 0!==l?(f.push({seriesDatum:void 0,point:{x:l,y:v}}),void 0!==c&&f.push({seriesDatum:void 0,point:{x:c,y:v}})):void 0!==m&&(f.push({seriesDatum:{x:b,y:m},point:{x:S,y:x}}),p.push({seriesDatum:{x:b,y:m},point:{x:S,y:x}}),s=void 0!==s?s:S,a=S),l=S}return f.push({seriesDatum:void 0,point:{x:a,y:v}},{seriesDatum:void 0,point:{x:s,y:v}}),{nodeData:p,fillData:f,strokeData:g}}},e.prototype.updateAxisLine=function(){var t=this.xScale,e=this.yScale,i=this.axis,n=this.xAxisLine;n.x1=t.range[0],n.x2=t.range[1],n.y1=n.y2=0,n.stroke=i.stroke,n.strokeWidth=i.strokeWidth;var o=e.convert(0);n.translationY=o},e.prototype.updateSelection=function(t){this.markerSelection.update(t)},e.prototype.updateNodes=function(){var t=this,e=this.highlightedDatum,i=this.highlightStyle,n=this.marker,o=i.size,r=i.fill,s=i.stroke,a=i.strokeWidth,l=n.formatter;this.markerSelection.each((function(i,c,d){var u=c.point,h=c.seriesDatum;if(u){var p,f=c===e,g=f&&void 0!==r?r:n.fill,v=f&&void 0!==s?s:n.stroke,y=f&&void 0!==a?a:n.strokeWidth,m=f&&void 0!==o?o:n.size;if(l){var b=0===d,S=d===t.markerSelectionData.length-1,x=h.y===t.min,C=h.y===t.max;p=l({datum:c,xValue:h.x,yValue:h.y,min:x,max:C,first:b,last:S,fill:g,stroke:v,strokeWidth:y,size:m,highlighted:f})}i.size=p&&null!=p.size?p.size:m,i.fill=p&&null!=p.fill?p.fill:g,i.stroke=p&&null!=p.stroke?p.stroke:v,i.strokeWidth=p&&null!=p.strokeWidth?p.strokeWidth:y,i.translationX=u.x,i.translationY=u.y,i.visible=p&&null!=p.enabled?p.enabled:n.enabled&&i.size>0}}))},e.prototype.updateStroke=function(t){var e=this.strokePath,i=this.yData,n=this.line;if(!(i.length<2)){var o=e.path,r=t.length,s=!0;o.clear();for(var a=0;a<r;a++){var l=t[a],c=l.point,d=l.seriesDatum,u=c.x,h=c.y;null==d.y?s=!0:s?(o.moveTo(u,h),s=!1):o.lineTo(u,h)}e.lineJoin=e.lineCap="round",e.fill=void 0,e.stroke=n.stroke,e.strokeWidth=n.strokeWidth}},e.prototype.updateFill=function(t){var e=this.fillPath,i=this.yData,n=this.fill,o=e.path,r=t.length;if(o.clear(),!(i.length<2)){for(var s=0;s<r;s++){var a=t[s].point,l=a.x,c=a.y;s>0?o.lineTo(l,c):o.moveTo(l,c)}o.closePath(),e.lineJoin="round",e.stroke=void 0,e.fill=n}},e.prototype.updateXCrosshairLine=function(){var t,e=this.yScale,i=this.xCrosshairLine,n=this.highlightedDatum,o=this.crosshairs.xLine;if(o.enabled&&null!=n){i.y1=e.range[0],i.y2=e.range[1],i.x1=i.x2=0,i.stroke=o.stroke,i.strokeWidth=null!==(t=o.strokeWidth)&&void 0!==t?t:1,i.lineCap="round"===o.lineCap||"square"===o.lineCap?o.lineCap:void 0;var r=o.lineDash;i.lineDash=Array.isArray(r)?r:_G(i.lineCap,o.lineDash),i.translationX=n.point.x}else i.strokeWidth=0},e.prototype.updateYCrosshairLine=function(){var t,e=this.xScale,i=this.yCrosshairLine,n=this.highlightedDatum,o=this.crosshairs.yLine;if(o.enabled&&null!=n){i.x1=e.range[0],i.x2=e.range[1],i.y1=i.y2=0,i.stroke=o.stroke,i.strokeWidth=null!==(t=o.strokeWidth)&&void 0!==t?t:1,i.lineCap="round"===o.lineCap||"square"===o.lineCap?o.lineCap:void 0;var r=o.lineDash;i.lineDash=Array.isArray(r)?r:_G(i.lineCap,o.lineDash),i.translationY=n.point.y}else i.strokeWidth=0},e.prototype.getTooltipHtml=function(t){var e,i,n=this.dataType,o=t.seriesDatum,r=o.y,s=o.x,a={content:this.formatNumericDatum(r),title:"array"===n||"object"===n?this.formatDatum(s):void 0},l=null===(i=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===i?void 0:i.renderer;return l?LG(l({context:this.context,datum:o,yValue:r,xValue:s}),a):LG(a)},e.className="AreaSparkline",e}(NG),YG=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),XG=wN.extent,qG=SG.BandScale,$G=function(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0},ZG=function(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1},JG=function(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}},QG=function(t){function e(){var e=t.call(this)||this;return e.linePath=new xI.Path,e.xCrosshairLine=new xI.Line,e.yCrosshairLine=new xI.Line,e.lineSparklineGroup=new xI.Group,e.markers=new xI.Group,e.markerSelection=xI.Selection.select(e.markers,(function(){return e.markerFactory()})),e.markerSelectionData=[],e.marker=new $G,e.line=new ZG,e.crosshairs=new JG,e.rootGroup.append(e.lineSparklineGroup),e.linePath.zIndex=bG.SERIES_STROKE_ZINDEX,e.xCrosshairLine.zIndex=bG.CROSSHAIR_ZINDEX,e.yCrosshairLine.zIndex=bG.CROSSHAIR_ZINDEX,e.markers.zIndex=bG.SERIES_MARKERS_ZINDEX,e.lineSparklineGroup.append([e.linePath,e.xCrosshairLine,e.yCrosshairLine,e.markers]),e}return YG(e,t),e.prototype.getNodeData=function(){return this.markerSelectionData},e.prototype.markerFactory=function(){return new(FG(this.marker.shape))},e.prototype.onMarkerShapeChange=function(){this.markerSelection=this.markerSelection.clear(),this.scheduleLayout()},e.prototype.update=function(){var t=this.generateNodeData();t&&(this.markerSelectionData=t,this.updateSelection(t),this.updateNodes(),this.updateLine())},e.prototype.updateYScaleDomain=function(){var t=this.yData,e=this.yScale,i=XG(t),n=0,o=1;if(void 0!==i&&(n=this.min=i[0],o=this.max=i[1]),n===o){var r=Math.abs(.01*n);n-=r,o+=r}e.domain=[n,o]},e.prototype.generateNodeData=function(){var t=this,e=t.data,i=t.yData,n=t.xData,o=t.xScale,r=t.yScale;if(e){for(var s=!(o instanceof qG),a=s?0:o.bandwidth/2,l=[],c=0;c<i.length;c++){var d=i[c],u=n[c];if(null!=d){var h=o.convert(s?o.toDomain(u):u)+a,p=void 0===d?NaN:r.convert(d);l.push({seriesDatum:{x:u,y:d},point:{x:h,y:p}})}}return l}},e.prototype.updateSelection=function(t){this.markerSelection.update(t)},e.prototype.updateNodes=function(){var t=this,e=this.highlightedDatum,i=this.highlightStyle,n=this.marker,o=i.size,r=i.fill,s=i.stroke,a=i.strokeWidth,l=n.formatter;this.markerSelection.each((function(i,c,d){var u,h=c===e,p=h&&void 0!==r?r:n.fill,f=h&&void 0!==s?s:n.stroke,g=h&&void 0!==a?a:n.strokeWidth,v=h&&void 0!==o?o:n.size,y=c.seriesDatum,m=c.point;if(l){var b=0===d,S=d===t.markerSelectionData.length-1,x=y.y===t.min,C=y.y===t.max;u=l({datum:c,xValue:y.x,yValue:y.y,min:x,max:C,first:b,last:S,fill:p,stroke:f,strokeWidth:g,size:v,highlighted:h})}i.size=u&&null!=u.size?u.size:v,i.fill=u&&null!=u.fill?u.fill:p,i.stroke=u&&null!=u.stroke?u.stroke:f,i.strokeWidth=u&&null!=u.strokeWidth?u.strokeWidth:g,i.translationX=m.x,i.translationY=m.y,i.visible=u&&null!=u.enabled?u.enabled:n.enabled&&i.size>0}))},e.prototype.updateLine=function(){var t=this,e=t.linePath,i=t.yData,n=t.xData,o=t.xScale,r=t.yScale,s=t.line;if(!(i.length<2)){var a=!(o instanceof qG),l=e.path,c=i.length,d=a?0:o.bandwidth/2,u=!0;l.clear();for(var h=0;h<c;h++){var p=n[h],f=i[h],g=o.convert(a?o.toDomain(p):p)+d,v=void 0===f?NaN:r.convert(f);null==f?u=!0:u?(l.moveTo(g,v),u=!1):l.lineTo(g,v)}e.fill=void 0,e.stroke=s.stroke,e.strokeWidth=s.strokeWidth}},e.prototype.updateXCrosshairLine=function(){var t,e=this.yScale,i=this.xCrosshairLine,n=this.highlightedDatum,o=this.crosshairs.xLine;if(o.enabled&&null!=n){i.y1=e.range[0],i.y2=e.range[1],i.x1=i.x2=0,i.stroke=o.stroke,i.strokeWidth=null!==(t=o.strokeWidth)&&void 0!==t?t:1,i.lineCap="round"===o.lineCap||"square"===o.lineCap?o.lineCap:void 0;var r=o.lineDash;i.lineDash=Array.isArray(r)?r:_G(i.lineCap,o.lineDash),i.translationX=n.point.x}else i.strokeWidth=0},e.prototype.updateYCrosshairLine=function(){var t,e=this.xScale,i=this.yCrosshairLine,n=this.highlightedDatum,o=this.crosshairs.yLine;if(o.enabled&&null!=n){i.x1=e.range[0],i.x2=e.range[1],i.y1=i.y2=0,i.stroke=o.stroke,i.strokeWidth=null!==(t=o.strokeWidth)&&void 0!==t?t:1,i.lineCap="round"===o.lineCap||"square"===o.lineCap?o.lineCap:void 0;var r=o.lineDash;i.lineDash=Array.isArray(r)?r:_G(i.lineCap,o.lineDash),i.translationY=n.point.y}else i.strokeWidth=0},e.prototype.getTooltipHtml=function(t){var e,i,n=this.dataType,o=t.seriesDatum,r=o.y,s=o.x,a={content:this.formatNumericDatum(r),title:"array"===n||"object"===n?this.formatDatum(s):void 0},l=null===(i=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===i?void 0:i.renderer;return l?LG(l({context:this.context,datum:o,yValue:r,xValue:s}),a):LG(a)},e.className="LineSparkline",e}(NG),tB=function(){this.enabled=!0,this.fontSize=8,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"},eB=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),iB=wN.extent;!function(t){t[t.Rect=0]="Rect",t[t.Label=1]="Label"}(GG||(GG={})),function(t){t.InsideBase="insideBase",t.InsideEnd="insideEnd",t.Center="center",t.OutsideEnd="outsideEnd"}(BG||(BG={}));var nB=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formatter=void 0,e.placement=BG.InsideEnd,e}return eB(e,t),e}(tB),oB=function(t){function e(){var e=t.call(this)||this;return e.fill="rgb(124, 181, 236)",e.stroke="silver",e.strokeWidth=0,e.paddingInner=.1,e.paddingOuter=.2,e.valueAxisDomain=void 0,e.formatter=void 0,e.axisLine=new xI.Line,e.bandWidth=0,e.sparklineGroup=new xI.Group,e.rectGroup=new xI.Group,e.labelGroup=new xI.Group,e.rectSelection=xI.Selection.select(e.rectGroup,xI.Rect),e.labelSelection=xI.Selection.select(e.labelGroup,xI.Text),e.nodeSelectionData=[],e.label=new nB,e.rootGroup.append(e.sparklineGroup),e.rectGroup.zIndex=bG.SERIES_FILL_ZINDEX,e.axisLine.zIndex=bG.AXIS_LINE_ZINDEX,e.labelGroup.zIndex=bG.SERIES_LABEL_ZINDEX,e.sparklineGroup.append([e.rectGroup,e.axisLine,e.labelGroup]),e.axisLine.lineCap="round",e.label.enabled=!1,e}return eB(e,t),e.prototype.getNodeData=function(){return this.nodeSelectionData},e.prototype.update=function(){this.updateSelections(),this.updateNodes()},e.prototype.updateSelections=function(){var t=this.generateNodeData();t&&(this.nodeSelectionData=t,this.updateRectSelection(t),this.updateLabelSelection(t))},e.prototype.updateNodes=function(){this.updateRectNodes(),this.updateLabelNodes()},e.prototype.calculateStep=function(t){var e,i=this.xScale,n=this.paddingInner,o=this.paddingOuter,r=this.smallestInterval,s=(i.domain[1]-i.domain[0])/(null!==(e=null==r?void 0:r.x)&&void 0!==e?e:1)+1,a=Math.min(s,50),l=a-1;return t/Math.max(1,2*o+l*n+a)},e.prototype.updateYScaleDomain=function(){var t=this.yScale,e=this.yData,i=this.valueAxisDomain,n=iB(e),o=0,r=1;void 0!==n&&(o=this.min=n[0],r=this.max=n[1]),o=o<0?o:0,r=r<0?0:r,i&&(i[1]<r&&(i[1]=r),i[0]>o&&(i[0]=o)),t.domain=i||[o,r]},e.prototype.updateRectSelection=function(t){this.rectSelection.update(t)},e.prototype.updateRectNodes=function(){var t=this,e=this,i=e.highlightedDatum,n=e.formatter,o=e.fill,r=e.stroke,s=e.strokeWidth,a=this.highlightStyle,l=a.fill,c=a.stroke,d=a.strokeWidth;this.rectSelection.each((function(e,a,u){var h,p=a===i,f=p&&void 0!==l?l:o,g=p&&void 0!==c?c:r,v=p&&void 0!==d?d:s,y=a.x,m=a.y,b=a.width,S=a.height,x=a.seriesDatum;if(n){var C=0===u,w=u===t.nodeSelectionData.length-1,E=x.y===t.min,O=x.y===t.max;h=n({datum:a,xValue:x.x,yValue:x.y,width:b,height:S,min:E,max:O,first:C,last:w,fill:f,stroke:g,strokeWidth:v,highlighted:p})}e.fill=h&&h.fill||f,e.stroke=h&&h.stroke||g,e.strokeWidth=h&&h.strokeWidth||v,e.x=e.y=0,e.width=b,e.height=S,e.visible=e.height>0,e.translationX=y,e.translationY=m}))},e.prototype.updateLabelSelection=function(t){this.labelSelection.update(t,(function(t){t.tag=GG.Label,t.pointerEvents=xI.PointerEvents.None}))},e.prototype.updateLabelNodes=function(){var t=this.label,e=t.enabled,i=t.fontStyle,n=t.fontWeight,o=t.fontSize,r=t.fontFamily,s=t.color;this.labelSelection.each((function(t,a){var l=a.label;l&&e?(t.fontStyle=i,t.fontWeight=n,t.fontSize=o,t.fontFamily=r,t.textAlign=l.textAlign,t.textBaseline=l.textBaseline,t.text=l.text,t.x=l.x,t.y=l.y,t.fill=s,t.visible=!0):t.visible=!1}))},e.prototype.getTooltipHtml=function(t){var e,i,n=this.dataType,o=t.seriesDatum,r=o.y,s=o.x,a={content:this.formatNumericDatum(r),title:"array"===n||"object"===n?this.formatDatum(s):void 0},l=null===(i=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===i?void 0:i.renderer;return l?LG(l({context:this.context,datum:o,yValue:r,xValue:s}),a):LG(a)},e.prototype.formatLabelValue=function(t){return t%1!=0?t.toFixed(1):t.toFixed(0)},e}(NG),rB=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sB=wN.isNumber,aB=SG.BandScale,lB=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rB(e,t),e.prototype.updateYScaleRange=function(){var t=this.seriesRect;this.yScale.range=[0,t.width]},e.prototype.updateXScaleRange=function(){var t=this.xScale,e=this.seriesRect,i=this.paddingOuter,n=this.paddingInner;if(t instanceof aB)t.range=[0,e.height],t.paddingInner=n,t.paddingOuter=i;else{var o=this.calculateStep(e.height),r=o*i;this.bandWidth=o*(1-n),t.range=[r,e.height-r-this.bandWidth]}},e.prototype.updateAxisLine=function(){var t=this.yScale,e=this.axis,i=this.axisLine,n=this.seriesRect,o=e.strokeWidth;i.x1=0,i.x2=0,i.y1=0,i.y2=n.height,i.stroke=e.stroke,i.strokeWidth=o+(o%2==1?1:0);var r=t.convert(0);i.translationX=r},e.prototype.generateNodeData=function(){var t=this,e=t.data,i=t.yData,n=t.xData,o=t.xScale,r=t.yScale,s=t.fill,a=t.stroke,l=t.strokeWidth,c=t.label;if(e){for(var d=c.fontStyle,u=c.fontWeight,h=c.fontSize,p=c.fontFamily,f=c.color,g=c.formatter,v=c.placement,y=[],m=r.convert(0),b=!(o instanceof aB),S=0,x=i.length;S<x;S++){var C=i[S],w=n[S],E=void 0===C;E&&(C=0);var O=o.convert(b?o.toDomain(w):w),D=Math.min(void 0===C?NaN:r.convert(C),m),A=Math.max(void 0===C?NaN:r.convert(C),m),T=b?this.bandWidth:o.bandwidth,k=A-D,M={x:m,y:O},R=void 0;R=g?g({value:C}):void 0!==C&&sB(C)?this.formatLabelValue(C):"";var P=O+T/2,N=void 0,L=void 0,I=void 0!==C&&C>=0;if(v===BG.Center)N=D+k/2,L="center";else if(v===BG.OutsideEnd)N=D+(I?k+4:-4),L=I?"start":"end";else if(v===BG.InsideEnd){N=D+(I?k-4:4),L=I?"end":"start";var F=xI.HdpiCanvas.getTextSize(R,p).width||20;(I&&N<m+F||!I&&N>m-F)&&(N=m+4*(I?1:-1),L=I?"start":"end")}else N=m+4*(I?1:-1),L=I?"start":"end";y.push({x:D,y:O,width:k,height:T,fill:s,stroke:a,strokeWidth:l,seriesDatum:{x:w,y:E?void 0:C},point:M,label:{x:N,y:P,text:R,fontStyle:d,fontWeight:u,fontSize:h,fontFamily:p,textAlign:L,textBaseline:"middle",fill:f}})}return y}},e.prototype.getDistance=function(t,e){return Math.abs(t.y-e.y)},e.className="BarSparkline",e}(oB),cB=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dB=wN.isNumber,uB=SG.BandScale,hB=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cB(e,t),e.prototype.updateYScaleRange=function(){var t=this.seriesRect;this.yScale.range=[t.height,0]},e.prototype.updateXScaleRange=function(){var t=this.xScale,e=this.seriesRect,i=this.paddingOuter,n=this.paddingInner;if(t instanceof uB)t.range=[0,e.width],t.paddingInner=n,t.paddingOuter=i;else{var o=this.calculateStep(e.width),r=o*i;this.bandWidth=o*(1-n),t.range=[r,e.width-r-this.bandWidth]}},e.prototype.updateAxisLine=function(){var t=this.yScale,e=this.axis,i=this.axisLine,n=this.seriesRect,o=e.strokeWidth;i.x1=0,i.x2=n.width,i.y1=0,i.y2=0,i.stroke=e.stroke,i.strokeWidth=o+(o%2==1?1:0);var r=t.convert(0);i.translationY=r},e.prototype.generateNodeData=function(){var t=this,e=t.data,i=t.yData,n=t.xData,o=t.xScale,r=t.yScale,s=t.fill,a=t.stroke,l=t.strokeWidth,c=t.label;if(e){for(var d=c.fontStyle,u=c.fontWeight,h=c.fontSize,p=c.fontFamily,f=c.color,g=c.formatter,v=c.placement,y=[],m=r.convert(0),b=!(o instanceof uB),S=0,x=i.length;S<x;S++){var C=i[S],w=n[S],E=void 0===C;E&&(C=0);var O=Math.min(void 0===C?NaN:r.convert(C),m),D=o.convert(b?o.toDomain(w):w),A=Math.max(void 0===C?NaN:r.convert(C),m),T=b?this.bandWidth:o.bandwidth,k=A-O,M={x:D+T/2,y:m},R=void 0;R=g?g({value:C}):void 0!==C&&dB(C)?this.formatLabelValue(C):"";var P=D+T/2,N=void 0,L=void 0,I=void 0!==C&&C>=0;if(v===BG.Center)N=O+k/2,L="middle";else if(v===BG.OutsideEnd)N=O+(I?-2:k+2),L=I?"bottom":"top";else if(v===BG.InsideEnd){N=O+(I?2:k-2),L=I?"top":"bottom";var F=xI.HdpiCanvas.getTextSize(R,p).height||10;(I&&N>m-F||!I&&N<m+F)&&(N=m+2*(I?-1:1),L=I?"bottom":"top")}else N=m+2*(I?-1:1),L=I?"bottom":"top";y.push({x:D,y:O,width:T,height:k,fill:s,stroke:a,strokeWidth:l,seriesDatum:{x:w,y:E?void 0:C},point:M,label:{x:P,y:N,text:R,fontStyle:d,fontWeight:u,fontSize:h,fontFamily:p,textAlign:"center",textBaseline:L,fill:f}})}return y}},e.className="ColumnSparkline",e}(oB),pB=wN.isNumber,fB=function(){function t(){}return t.create=function(t,e){var i=function(t){void 0===t&&(t="line");switch(t){case"column":return new hB;case"bar":return new lB;case"area":return new KG;case"line":default:return new QG}}((t=wN.jsonMerge([t])).type);return e&&(i.tooltip=e),function(t,e){wB(t,"context",e.context,e),wB(t,"width",e.width,e),wB(t,"height",e.height,e),wB(t,"container",e.container,e),wB(t,"xKey",e.xKey,e),wB(t,"yKey",e.yKey,e),e.padding&&function(t,e){wB(t,"top",e.top,e),wB(t,"right",e.right,e),wB(t,"bottom",e.bottom,e),wB(t,"left",e.left,e)}(t.padding,e.padding);e.axis&&function(t,e){wB(t,"type",e.type,e),wB(t,"stroke",e.stroke,e),wB(t,"strokeWidth",e.strokeWidth,e)}(t.axis,e.axis);e.highlightStyle&&function(t,e){wB(t,"fill",e.fill,e),wB(t,"size",e.size,e),wB(t,"stroke",e.stroke,e),wB(t,"strokeWidth",e.strokeWidth,e)}(t.highlightStyle,e.highlightStyle)}(i,t),function(t,e){switch(e.type){case"bar":case"column":gB(t,e);break;case"area":!function(t,e){wB(t,"fill",e.fill,e),e.marker&&vB(t.marker,e.marker);e.line&&yB(t.line,e.line);e.crosshairs&&mB(t.crosshairs,e.crosshairs)}(t,e);break;case"line":default:!function(t,e){e.marker&&vB(t.marker,e.marker);e.line&&yB(t.line,e.line);e.crosshairs&&mB(t.crosshairs,e.crosshairs)}(t,e)}}(i,t),t.data&&(i.data=t.data),i.processedOptions=t,i},t}();function gB(t,e){wB(t,"valueAxisDomain",e.valueAxisDomain,e),wB(t,"fill",e.fill,e),wB(t,"stroke",e.stroke,e),wB(t,"strokeWidth",e.strokeWidth,e),wB(t,"paddingInner",e.paddingInner,e),wB(t,"paddingOuter",e.paddingOuter,e),wB(t,"formatter",e.formatter,e),e.label&&function(t,e){wB(t,"enabled",e.enabled,e),wB(t,"fontStyle",e.fontStyle,e),wB(t,"fontWeight",e.fontWeight,e),wB(t,"fontSize",e.fontSize,e),wB(t,"fontFamily",e.fontFamily,e),wB(t,"textAlign",e.textAlign,e),wB(t,"textBaseline",e.textBaseline,e),wB(t,"color",e.color,e),wB(t,"formatter",e.formatter,e),wB(t,"placement",e.placement,e)}(t.label,e.label)}function vB(t,e){wB(t,"enabled",e.enabled,e),wB(t,"size",e.size,e),wB(t,"shape",e.shape,e),wB(t,"fill",e.fill,e),wB(t,"stroke",e.stroke,e),wB(t,"strokeWidth",e.strokeWidth,e),wB(t,"formatter",e.formatter,e)}function yB(t,e){wB(t,"stroke",e.stroke,e),wB(t,"strokeWidth",e.strokeWidth,e)}function mB(t,e){t.xLine&&e.xLine&&bB(t.xLine,e.xLine),t.yLine&&e.yLine&&bB(t.yLine,e.yLine)}function bB(t,e){wB(t,"enabled",e.enabled,e),wB(t,"stroke",e.stroke,e),wB(t,"strokeWidth",e.strokeWidth,e),wB(t,"lineDash",e.lineDash,e),wB(t,"lineCap",e.lineCap,e)}var SB={};var xB=function(t,e,i){if(pB(e))return!0;var n,o,r="AG Charts: ".concat(t," must be a number, the value you provided is not a valid number. Using the default of ").concat(i,"px.");return n=function(){return console.warn(r)},o="".concat(t," not a number"),SB[o]||(n(),SB[o]=!0),!1},CB={xOffset:xB,yOffset:xB};function wB(t,e,i,n){if(e in n)if(e in t){var o=CB[e];(!o||o(e,i,t[e]))&&t[e]!==i&&(t[e]=i)}else console.warn("Property ".concat(e," does not exist on the target object."))}var EB=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),OB=function(){return(OB=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},DB=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},AB=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return EB(e,t),e.prototype.init=function(t){var e=this,i=!0,n=this.resizeObserverService.observeResize(this.getGui(),(function(){var n=e.getGui(),o=n.clientWidth,r=n.clientHeight;if(0!==o&&0!==r)if(i){var s=OB({data:t.value,width:o,height:r,context:{data:t.data}},t.sparklineOptions);e.sparkline=fB.create(s,e.sparklineTooltipSingleton.getSparklineTooltip()),e.eSparkline.appendChild(e.sparkline.canvasElement),i=!1}else e.sparkline.width=o,e.sparkline.height=r}));this.addDestroyFunc((function(){return n()}))},e.prototype.refresh=function(t){return!!this.sparkline&&(this.sparkline.data=t.value,!0)},e.prototype.destroy=function(){this.sparkline&&this.sparkline.destroy(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-sparkline-wrapper">\n            <span ref="eSparkline"></span>\n        </div>',DB([o("eSparkline")],e.prototype,"eSparkline",void 0),DB([n("resizeObserverService")],e.prototype,"resizeObserverService",void 0),DB([n("sparklineTooltipSingleton")],e.prototype,"sparklineTooltipSingleton",void 0),e}(s),TB=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),kB=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},MB=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return TB(i,t),i.prototype.postConstruct=function(){this.tooltip=new IG},i.prototype.getSparklineTooltip=function(){return this.tooltip},i.prototype.destroyTooltip=function(){this.tooltip&&this.tooltip.destroy()},kB([r],i.prototype,"postConstruct",null),kB([N],i.prototype,"destroyTooltip",null),i=kB([e("sparklineTooltipSingleton")],i)}(i),RB={version:"31.0.1",moduleName:a.SparklinesModule,beans:[MB],userComponents:[{componentName:"agSparklineCellRenderer",componentClass:AB}],dependantModules:[Ft]};const PB=[ei,di,Oo,Ts,Hs,DE,FE,nO,hO,pE,gO,jn,TD,eA,Co,DA,MA,RB],NB=wt.concat(PB);B.registerModules(PB);export{ei as AdvancedFilterModule,PB as AllEnterpriseModules,NB as AllModules,di as ClipboardModule,Oo as ColumnsToolPanelModule,Ft as EnterpriseCoreModule,Ts as ExcelExportModule,Hs as FiltersToolPanelModule,DE as GridChartsModule,Pt as LicenseManager,FE as MasterDetailModule,nO as MenuModule,aO as MultiFilter,hO as MultiFilterModule,Tn as PivotDropZonePanel,Yn as PrimaryColsPanel,pE as RangeSelectionModule,gO as RichSelectModule,On as RowGroupDropZonePanel,jn as RowGroupingModule,TD as ServerSideRowModelModule,XD as SetFilter,eA as SetFilterModule,Co as SideBarModule,RB as SparklinesModule,DA as StatusBarModule,mo as ToolPanelColDefService,Un as ValuesDropZonePanel,MA as ViewportRowModelModule,AE as __FORCE_MODULE_DETECTION_AG_GRID_CORE_EXT,TE as agCharts,Os as exportMultipleSheetsAsExcel,Es as getMultipleSheetsAsExcel};